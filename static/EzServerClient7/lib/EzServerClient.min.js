(function(e,o){if(typeof exports==="object"){module.exports=o()}else if(typeof define==="function"&&define.amd){define([],o)}else{e.ol=o()}})(this,function(){var OPENLAYERS={};var goog=this.goog={};this.CLOSURE_NO_DEPS=true;var COMPILED=false;var goog=goog||{};goog.global=this;goog.global.CLOSURE_UNCOMPILED_DEFINES;goog.global.CLOSURE_DEFINES;goog.isDef=function(e){return e!==void 0};goog.exportPath_=function(e,o,t){var r=e.split(".");var i=t||goog.global;if(!(r[0]in i)&&i.execScript){i.execScript("var "+r[0])}for(var n;r.length&&(n=r.shift());){if(!r.length&&goog.isDef(o)){i[n]=o}else if(i[n]){i=i[n]}else{i=i[n]={}}}};goog.define=function(e,o){var t=o;if(!COMPILED){if(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,e)){t=goog.global.CLOSURE_UNCOMPILED_DEFINES[e]}else if(goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,e)){t=goog.global.CLOSURE_DEFINES[e]}}goog.exportPath_(e,t)};goog.define("goog.DEBUG",true);goog.define("goog.LOCALE","en");goog.define("goog.TRUSTED_SITE",true);goog.define("goog.STRICT_MODE_COMPATIBLE",false);goog.define("goog.DISALLOW_TEST_ONLY_CODE",COMPILED&&!goog.DEBUG);goog.define("goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING",false);goog.provide=function(e){if(!COMPILED){if(goog.isProvided_(e)){throw Error('Namespace "'+e+'" already declared.')}}goog.constructNamespace_(e)};goog.constructNamespace_=function(e,o){if(!COMPILED){delete goog.implicitNamespaces_[e];var t=e;while(t=t.substring(0,t.lastIndexOf("."))){if(goog.getObjectByName(t)){break}goog.implicitNamespaces_[t]=true}}goog.exportPath_(e,o)};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;goog.module=function(e){if(!goog.isString(e)||!e||e.search(goog.VALID_MODULE_RE_)==-1){throw Error("Invalid module identifier")}if(!goog.isInModuleLoader_()){throw Error("Module "+e+" has been loaded incorrectly.")}if(goog.moduleLoaderState_.moduleName){throw Error("goog.module may only be called once per module.")}goog.moduleLoaderState_.moduleName=e;if(!COMPILED){if(goog.isProvided_(e)){throw Error('Namespace "'+e+'" already declared.')}delete goog.implicitNamespaces_[e]}};goog.module.get=function(e){return goog.module.getInternal_(e)};goog.module.getInternal_=function(e){if(!COMPILED){if(goog.isProvided_(e)){return e in goog.loadedModules_?goog.loadedModules_[e]:goog.getObjectByName(e)}else{return null}}};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return goog.moduleLoaderState_!=null};goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_()){throw new Error("goog.module.declareLegacyNamespace must be called from "+"within a goog.module")}if(!COMPILED&&!goog.moduleLoaderState_.moduleName){throw Error("goog.module must be called prior to "+"goog.module.declareLegacyNamespace.")}goog.moduleLoaderState_.declareLegacyNamespace=true};goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE){e=e||"";throw Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))}};goog.forwardDeclare=function(e){};goog.forwardDeclare("Document");goog.forwardDeclare("HTMLScriptElement");goog.forwardDeclare("XMLHttpRequest");if(!COMPILED){goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&goog.isDefAndNotNull(goog.getObjectByName(e))};goog.implicitNamespaces_={"goog.module":true}}goog.getObjectByName=function(e,o){var t=e.split(".");var r=o||goog.global;for(var i;i=t.shift();){if(goog.isDefAndNotNull(r[i])){r=r[i]}else{return null}}return r};goog.globalize=function(e,o){var t=o||goog.global;for(var r in e){t[r]=e[r]}};goog.addDependency=function(e,o,t,r){if(goog.DEPENDENCIES_ENABLED){var i,n;var a=e.replace(/\\/g,"/");var l=goog.dependencies_;if(!r||typeof r==="boolean"){r=r?{module:"goog"}:{}}for(var s=0;i=o[s];s++){l.nameToPath[i]=a;l.pathIsModule[a]=r["module"]=="goog"}for(var g=0;n=t[g];g++){if(!(a in l.requires)){l.requires[a]={}}l.requires[a][n]=true}}};goog.define("goog.ENABLE_DEBUG_LOADER",true);goog.logToConsole_=function(e){if(goog.global.console){goog.global.console["error"](e)}};goog.require=function(e){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_){goog.maybeProcessDeferredDep_(e)}if(goog.isProvided_(e)){if(goog.isInModuleLoader_()){return goog.module.getInternal_(e)}else{return null}}if(goog.ENABLE_DEBUG_LOADER){var o=goog.getPathFromDeps_(e);if(o){goog.writeScripts_(o);return null}}var t="goog.require could not find: "+e;goog.logToConsole_(t);throw Error(t)}};goog.basePath="";goog.global.CLOSURE_BASE_PATH;goog.global.CLOSURE_NO_DEPS;goog.global.CLOSURE_IMPORT_SCRIPT;goog.nullFunction=function(){};goog.abstractMethod=function(){throw Error("unimplemented abstract method")};goog.addSingletonGetter=function(e){e.getInstance=function(){if(e.instance_){return e.instance_}if(goog.DEBUG){goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e}return e.instance_=new e}};goog.instantiatedSingletons_=[];goog.define("goog.LOAD_MODULE_USING_EVAL",true);goog.define("goog.SEAL_MODULE_EXPORTS",goog.DEBUG);goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;if(goog.DEPENDENCIES_ENABLED){goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}};goog.inHtmlDocument_=function(){var e=goog.global.document;return e!=null&&"write"in e};goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH)){goog.basePath=goog.global.CLOSURE_BASE_PATH;return}else if(!goog.inHtmlDocument_()){return}var e=goog.global.document;var o=e.getElementsByTagName("SCRIPT");for(var t=o.length-1;t>=0;--t){var r=o[t];var i=r.src;var n=i.lastIndexOf("?");var a=n==-1?i.length:n;if(i.substr(a-7,7)=="base.js"){goog.basePath=i.substr(0,a-7);return}}};goog.importScript_=function(e,o){var t=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;if(t(e,o)){goog.dependencies_.written[e]=true}};goog.IS_OLD_IE_=!!(!goog.global.atob&&goog.global.document&&goog.global.document.all);goog.importModule_=function(e){var o='goog.retrieveAndExecModule_("'+e+'");';if(goog.importScript_("",o)){goog.dependencies_.written[e]=true}};goog.queuedModules_=[];goog.wrapModule_=function(e,o){if(!goog.LOAD_MODULE_USING_EVAL||!goog.isDef(goog.global.JSON)){return""+"goog.loadModule(function(exports) {"+'"use strict";'+o+"\n"+";return exports"+"});"+"\n//# sourceURL="+e+"\n"}else{return""+"goog.loadModule("+goog.global.JSON.stringify(o+"\n//# sourceURL="+e+"\n")+");"}};goog.loadQueuedModules_=function(){var e=goog.queuedModules_.length;if(e>0){var o=goog.queuedModules_;goog.queuedModules_=[];for(var t=0;t<e;t++){var r=o[t];goog.maybeProcessDeferredPath_(r)}}};goog.maybeProcessDeferredDep_=function(e){if(goog.isDeferredModule_(e)&&goog.allDepsAreAvailable_(e)){var o=goog.getPathFromDeps_(e);goog.maybeProcessDeferredPath_(goog.basePath+o)}};goog.isDeferredModule_=function(e){var o=goog.getPathFromDeps_(e);if(o&&goog.dependencies_.pathIsModule[o]){var t=goog.basePath+o;return t in goog.dependencies_.deferred}return false};goog.allDepsAreAvailable_=function(e){var o=goog.getPathFromDeps_(e);if(o&&o in goog.dependencies_.requires){for(var t in goog.dependencies_.requires[o]){if(!goog.isProvided_(t)&&!goog.isDeferredModule_(t)){return false}}}return true};goog.maybeProcessDeferredPath_=function(e){if(e in goog.dependencies_.deferred){var o=goog.dependencies_.deferred[e];delete goog.dependencies_.deferred[e];goog.globalEval(o)}};goog.loadModuleFromUrl=function(e){goog.retrieveAndExecModule_(e)};goog.loadModule=function(e){var o=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:undefined,declareLegacyNamespace:false};var t;if(goog.isFunction(e)){t=e.call(goog.global,{})}else if(goog.isString(e)){t=goog.loadModuleFromSource_.call(goog.global,e)}else{throw Error("Invalid module definition")}var r=goog.moduleLoaderState_.moduleName;if(!goog.isString(r)||!r){throw Error('Invalid module name "'+r+'"')}if(goog.moduleLoaderState_.declareLegacyNamespace){goog.constructNamespace_(r,t)}else if(goog.SEAL_MODULE_EXPORTS&&Object.seal){Object.seal(t)}goog.loadedModules_[r]=t}finally{goog.moduleLoaderState_=o}};goog.loadModuleFromSource_=function(){"use strict";var exports={};eval(arguments[0]);return exports};goog.writeScriptSrcNode_=function(e){goog.global.document.write('<script type="text/javascript" src="'+e+'"></'+"script>")};goog.appendScriptSrcNode_=function(e){var o=goog.global.document;var t=o.createElement("script");t.type="text/javascript";t.src=e;t.defer=false;t.async=false;o.head.appendChild(t)};goog.writeScriptTag_=function(e,o){if(goog.inHtmlDocument_()){var t=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&t.readyState=="complete"){var r=/\bdeps.js$/.test(e);if(r){return false}else{throw Error('Cannot write "'+e+'" after document load')}}var i=goog.IS_OLD_IE_;if(o===undefined){if(!i){if(goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){goog.appendScriptSrcNode_(e)}else{goog.writeScriptSrcNode_(e)}}else{var n=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";t.write('<script type="text/javascript" src="'+e+'"'+n+"></"+"script>")}}else{t.write('<script type="text/javascript">'+o+"</"+"script>")}return true}else{return false}};goog.lastNonModuleScriptIndex_=0;goog.onScriptLoad_=function(e,o){if(e.readyState=="complete"&&goog.lastNonModuleScriptIndex_==o){goog.loadQueuedModules_()}return true};goog.writeScripts_=function(e){var o=[];var t={};var r=goog.dependencies_;function i(e){if(e in r.written){return}if(e in r.visited){return}r.visited[e]=true;if(e in r.requires){for(var n in r.requires[e]){if(!goog.isProvided_(n)){if(n in r.nameToPath){i(r.nameToPath[n])}else{throw Error("Undefined nameToPath for "+n)}}}}if(!(e in t)){t[e]=true;o.push(e)}}i(e);for(var n=0;n<o.length;n++){var a=o[n];goog.dependencies_.written[a]=true}var l=goog.moduleLoaderState_;goog.moduleLoaderState_=null;for(var n=0;n<o.length;n++){var a=o[n];if(a){if(!r.pathIsModule[a]){goog.importScript_(goog.basePath+a)}else{goog.importModule_(goog.basePath+a)}}else{goog.moduleLoaderState_=l;throw Error("Undefined script input")}}goog.moduleLoaderState_=l};goog.getPathFromDeps_=function(e){if(e in goog.dependencies_.nameToPath){return goog.dependencies_.nameToPath[e]}else{return null}};goog.findBasePath_();if(!goog.global.CLOSURE_NO_DEPS){goog.importScript_(goog.basePath+"deps.js")}}goog.normalizePath_=function(e){var o=e.split("/");var t=0;while(t<o.length){if(o[t]=="."){o.splice(t,1)}else if(t&&o[t]==".."&&o[t-1]&&o[t-1]!=".."){o.splice(--t,2)}else{t++}}return o.join("/")};goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC){return goog.global.CLOSURE_LOAD_FILE_SYNC(e)}else{var o=new goog.global["XMLHttpRequest"];o.open("get",e,false);o.send();return o.responseText}};goog.retrieveAndExecModule_=function(e){if(!COMPILED){var o=e;e=goog.normalizePath_(e);var t=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;var r=goog.loadFileSync_(e);if(r!=null){var i=goog.wrapModule_(e,r);var n=goog.IS_OLD_IE_;if(n){goog.dependencies_.deferred[o]=i;goog.queuedModules_.push(o)}else{t(e,i)}}else{throw new Error("load of "+e+"failed")}}};goog.typeOf=function(e){var o=typeof e;if(o=="object"){if(e){if(e instanceof Array){return"array"}else if(e instanceof Object){return o}var t=Object.prototype.toString.call(e);if(t=="[object Window]"){return"object"}if(t=="[object Array]"||typeof e.length=="number"&&typeof e.splice!="undefined"&&typeof e.propertyIsEnumerable!="undefined"&&!e.propertyIsEnumerable("splice")){return"array"}if(t=="[object Function]"||typeof e.call!="undefined"&&typeof e.propertyIsEnumerable!="undefined"&&!e.propertyIsEnumerable("call")){return"function"}}else{return"null"}}else if(o=="function"&&typeof e.call=="undefined"){return"object"}return o};goog.isNull=function(e){return e===null};goog.isDefAndNotNull=function(e){return e!=null};goog.isArray=function(e){return goog.typeOf(e)=="array"};goog.isArrayLike=function(e){var o=goog.typeOf(e);return o=="array"||o=="object"&&typeof e.length=="number"};goog.isDateLike=function(e){return goog.isObject(e)&&typeof e.getFullYear=="function"};goog.isString=function(e){return typeof e=="string"};goog.isBoolean=function(e){return typeof e=="boolean"};goog.isNumber=function(e){return typeof e=="number"};goog.isFunction=function(e){return goog.typeOf(e)=="function"};goog.isObject=function(e){var o=typeof e;return o=="object"&&e!=null||o=="function"};goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]};goog.removeUid=function(e){if(e!==null&&"removeAttribute"in e){e.removeAttribute(goog.UID_PROPERTY_)}try{delete e[goog.UID_PROPERTY_]}catch(e){}};goog.UID_PROPERTY_="closure_uid_"+(Math.random()*1e9>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(e){var o=goog.typeOf(e);if(o=="object"||o=="array"){if(e.clone){return e.clone()}var t=o=="array"?[]:{};for(var r in e){t[r]=goog.cloneObject(e[r])}return t}return e};goog.bindNative_=function(e,o,t){return e.call.apply(e.bind,arguments)};goog.bindJs_=function(e,o,t){if(!e){throw new Error}if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(t,r);return e.apply(o,t)}}else{return function(){return e.apply(o,arguments)}}};goog.bind=function(e,o,t){if(Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1){goog.bind=goog.bindNative_}else{goog.bind=goog.bindJs_}return goog.bind.apply(null,arguments)};goog.partial=function(e,o){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();o.push.apply(o,arguments);return e.apply(this,o)}};goog.mixin=function(e,o){for(var t in o){e[t]=o[t]}};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};goog.globalEval=function(e){if(goog.global.execScript){goog.global.execScript(e,"JavaScript")}else if(goog.global.eval){if(goog.evalWorksForGlobals_==null){goog.global.eval("var _evalTest_ = 1;");if(typeof goog.global["_evalTest_"]!="undefined"){try{delete goog.global["_evalTest_"]}catch(e){}goog.evalWorksForGlobals_=true}else{goog.evalWorksForGlobals_=false}}if(goog.evalWorksForGlobals_){goog.global.eval(e)}else{var o=goog.global.document;var t=o.createElement("SCRIPT");t.type="text/javascript";t.defer=false;t.appendChild(o.createTextNode(e));o.body.appendChild(t);o.body.removeChild(t)}}else{throw Error("goog.globalEval not available")}};goog.evalWorksForGlobals_=null;goog.cssNameMapping_;goog.cssNameMappingStyle_;goog.getCssName=function(e,o){var t=function(e){return goog.cssNameMapping_[e]||e};var r=function(e){var o=e.split("-");var r=[];for(var i=0;i<o.length;i++){r.push(t(o[i]))}return r.join("-")};var i;if(goog.cssNameMapping_){i=goog.cssNameMappingStyle_=="BY_WHOLE"?t:r}else{i=function(e){return e}}if(o){return e+"-"+i(o)}else{return i(e)}};goog.setCssNameMapping=function(e,o){goog.cssNameMapping_=e;goog.cssNameMappingStyle_=o};goog.global.CLOSURE_CSS_NAME_MAPPING;if(!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING){goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING}goog.getMsg=function(e,o){if(o){e=e.replace(/\{\$([^}]+)}/g,function(e,t){return o!=null&&t in o?o[t]:e})}return e};goog.getMsgWithFallback=function(e,o){return e};goog.exportSymbol=function(e,o,t){goog.exportPath_(e,o,t)};goog.exportProperty=function(e,o,t){e[o]=t};goog.inherits=function(e,o){function t(){}t.prototype=o.prototype;e.superClass_=o.prototype;e.prototype=new t;e.prototype.constructor=e;e.base=function(e,t,r){var i=new Array(arguments.length-2);for(var n=2;n<arguments.length;n++){i[n-2]=arguments[n]}return o.prototype[t].apply(e,i)}};goog.base=function(e,o,t){var r=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!r){throw Error("arguments.caller not defined.  goog.base() cannot be used "+"with strict mode code. See "+"http://www.ecma-international.org/ecma-262/5.1/#sec-C")}if(r.superClass_){var i=new Array(arguments.length-1);for(var n=1;n<arguments.length;n++){i[n-1]=arguments[n]}return r.superClass_.constructor.apply(e,i)}var a=new Array(arguments.length-2);for(var n=2;n<arguments.length;n++){a[n-2]=arguments[n]}var l=false;for(var s=e.constructor;s;s=s.superClass_&&s.superClass_.constructor){if(s.prototype[o]===r){l=true}else if(l){return s.prototype[o].apply(e,a)}}if(e[o]===r){return e.constructor.prototype[o].apply(e,a)}else{throw Error("goog.base called from a method of one name "+"to a method of a different name")}};goog.scope=function(e){e.call(goog.global)};if(!COMPILED){goog.global["COMPILED"]=COMPILED}goog.defineClass=function(e,o){var t=o.constructor;var r=o.statics;if(!t||t==Object.prototype.constructor){t=function(){throw Error("cannot instantiate an interface (no constructor defined).")}}var i=goog.defineClass.createSealingConstructor_(t,e);if(e){goog.inherits(i,e)}delete o.constructor;delete o.statics;goog.defineClass.applyProperties_(i.prototype,o);if(r!=null){if(r instanceof Function){r(i)}else{goog.defineClass.applyProperties_(i,r)}}return i};goog.defineClass.ClassDescriptor;goog.define("goog.defineClass.SEAL_CLASS_INSTANCES",goog.DEBUG);goog.defineClass.createSealingConstructor_=function(e,o){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(o&&o.prototype&&o.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]){return e}var t=function(){var o=e.apply(this,arguments)||this;o[goog.UID_PROPERTY_]=o[goog.UID_PROPERTY_];if(this.constructor===t){Object.seal(o)}return o};return t}return e};goog.defineClass.OBJECT_PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];goog.defineClass.applyProperties_=function(e,o){var t;for(t in o){if(Object.prototype.hasOwnProperty.call(o,t)){e[t]=o[t]}}for(var r=0;r<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;r++){t=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[r];if(Object.prototype.hasOwnProperty.call(o,t)){e[t]=o[t]}}};goog.tagUnsealableClass=function(e){if(!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES){e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=true}};goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable";goog.provide("ol");ol.ASSUME_TOUCH=false;ol.DEFAULT_MAX_ZOOM=42;ol.DEFAULT_MIN_ZOOM=0;ol.DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD=.5;ol.DEFAULT_TILE_CACHE_HIGH_WATER_MARK=2048;ol.DEFAULT_TILE_SIZE=256;ol.DEFAULT_WMS_VERSION="1.3.0";ol.DRAG_BOX_HYSTERESIS_PIXELS=8;ol.ENABLE_CANVAS=true;ol.ENABLE_DOM=true;ol.ENABLE_IMAGE=true;ol.ENABLE_NAMED_COLORS=false;ol.ENABLE_PROJ4JS=true;ol.ENABLE_RASTER_REPROJECTION=true;ol.ENABLE_TILE=true;ol.ENABLE_VECTOR=true;ol.ENABLE_VECTOR_TILE=true;ol.ENABLE_WEBGL=true;ol.INITIAL_ATLAS_SIZE=256;ol.MAX_ATLAS_SIZE=-1;ol.MOUSEWHEELZOOM_MAXDELTA=1;ol.MOUSEWHEELZOOM_TIMEOUT_DURATION=80;ol.OVERVIEWMAP_MAX_RATIO=.75;ol.OVERVIEWMAP_MIN_RATIO=.1;ol.RASTER_REPROJECTION_MAX_SOURCE_TILES=100;ol.RASTER_REPROJECTION_MAX_SUBDIVISION=10;ol.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH=.25;ol.SIMPLIFY_TOLERANCE=.5;ol.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK=1024;ol.WEBGL_MAX_TEXTURE_SIZE;ol.WEBGL_EXTENSIONS;ol.inherits=goog.inherits;ol.nullFunction=function(){};goog.provide("ol.PostRenderFunction");goog.provide("ol.PreRenderFunction");ol.PostRenderFunction;ol.PreRenderFunction;goog.provide("goog.debug.Error");goog.debug.Error=function(e){if(Error.captureStackTrace){Error.captureStackTrace(this,goog.debug.Error)}else{var o=(new Error).stack;if(o){this.stack=o}}if(e){this.message=String(e)}this.reportErrorToServer=true};goog.inherits(goog.debug.Error,Error);goog.debug.Error.prototype.name="CustomError";goog.provide("goog.dom.NodeType");goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};goog.provide("goog.string");goog.provide("goog.string.Unicode");goog.define("goog.string.DETECT_DOUBLE_ESCAPING",false);goog.define("goog.string.FORCE_NON_DOM_HTML_UNESCAPING",false);goog.string.Unicode={NBSP:" "};goog.string.startsWith=function(e,o){return e.lastIndexOf(o,0)==0};goog.string.endsWith=function(e,o){var t=e.length-o.length;return t>=0&&e.indexOf(o,t)==t};goog.string.caseInsensitiveStartsWith=function(e,o){return goog.string.caseInsensitiveCompare(o,e.substr(0,o.length))==0};goog.string.caseInsensitiveEndsWith=function(e,o){return goog.string.caseInsensitiveCompare(o,e.substr(e.length-o.length,o.length))==0};goog.string.caseInsensitiveEquals=function(e,o){return e.toLowerCase()==o.toLowerCase()};goog.string.subs=function(e,o){var t=e.split("%s");var r="";var i=Array.prototype.slice.call(arguments,1);while(i.length&&t.length>1){r+=t.shift()+i.shift()}return r+t.join("%s")};goog.string.collapseWhitespace=function(e){return e.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")};goog.string.isEmptyOrWhitespace=function(e){return/^[\s\xa0]*$/.test(e)};goog.string.isEmptyString=function(e){return e.length==0};goog.string.isEmpty=goog.string.isEmptyOrWhitespace;goog.string.isEmptyOrWhitespaceSafe=function(e){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))};goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe;goog.string.isBreakingWhitespace=function(e){return!/[^\t\n\r ]/.test(e)};goog.string.isAlpha=function(e){return!/[^a-zA-Z]/.test(e)};goog.string.isNumeric=function(e){return!/[^0-9]/.test(e)};goog.string.isAlphaNumeric=function(e){return!/[^a-zA-Z0-9]/.test(e)};goog.string.isSpace=function(e){return e==" "};goog.string.isUnicodeChar=function(e){return e.length==1&&e>=" "&&e<="~"||e>=""&&e<="�"};goog.string.stripNewlines=function(e){return e.replace(/(\r\n|\r|\n)+/g," ")};goog.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")};goog.string.normalizeWhitespace=function(e){return e.replace(/\xa0|\s/g," ")};goog.string.normalizeSpaces=function(e){return e.replace(/\xa0|[ \t]+/g," ")};goog.string.collapseBreakingSpaces=function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};goog.string.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};goog.string.trimLeft=function(e){return e.replace(/^[\s\xa0]+/,"")};goog.string.trimRight=function(e){return e.replace(/[\s\xa0]+$/,"")};goog.string.caseInsensitiveCompare=function(e,o){var t=String(e).toLowerCase();var r=String(o).toLowerCase();if(t<r){return-1}else if(t==r){return 0}else{return 1}};goog.string.numberAwareCompare_=function(e,o,t){if(e==o){return 0}if(!e){return-1}if(!o){return 1}var r=e.toLowerCase().match(t);var i=o.toLowerCase().match(t);var n=Math.min(r.length,i.length);for(var a=0;a<n;a++){var l=r[a];var s=i[a];if(l!=s){var g=parseInt(l,10);if(!isNaN(g)){var p=parseInt(s,10);if(!isNaN(p)&&g-p){return g-p}}return l<s?-1:1}}if(r.length!=i.length){return r.length-i.length}return e<o?-1:1};goog.string.intAwareCompare=function(e,o){return goog.string.numberAwareCompare_(e,o,/\d+|\D+/g)};goog.string.floatAwareCompare=function(e,o){return goog.string.numberAwareCompare_(e,o,/\d+|\.\d+|\D+/g)};goog.string.numerateCompare=goog.string.floatAwareCompare;goog.string.urlEncode=function(e){return encodeURIComponent(String(e))};goog.string.urlDecode=function(e){return decodeURIComponent(e.replace(/\+/g," "))};goog.string.newLineToBr=function(e,o){return e.replace(/(\r\n|\r|\n)/g,o?"<br />":"<br>")};goog.string.htmlEscape=function(e,o){if(o){e=e.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;");if(goog.string.DETECT_DOUBLE_ESCAPING){e=e.replace(goog.string.E_RE_,"&#101;")}return e}else{if(!goog.string.ALL_RE_.test(e))return e;if(e.indexOf("&")!=-1){e=e.replace(goog.string.AMP_RE_,"&amp;")}if(e.indexOf("<")!=-1){e=e.replace(goog.string.LT_RE_,"&lt;")}if(e.indexOf(">")!=-1){e=e.replace(goog.string.GT_RE_,"&gt;")}if(e.indexOf('"')!=-1){e=e.replace(goog.string.QUOT_RE_,"&quot;")}if(e.indexOf("'")!=-1){e=e.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;")}if(e.indexOf("\0")!=-1){e=e.replace(goog.string.NULL_RE_,"&#0;")}if(goog.string.DETECT_DOUBLE_ESCAPING&&e.indexOf("e")!=-1){e=e.replace(goog.string.E_RE_,"&#101;")}return e}};goog.string.AMP_RE_=/&/g;goog.string.LT_RE_=/</g;goog.string.GT_RE_=/>/g;goog.string.QUOT_RE_=/"/g;goog.string.SINGLE_QUOTE_RE_=/'/g;goog.string.NULL_RE_=/\x00/g;goog.string.E_RE_=/e/g;goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/;goog.string.unescapeEntities=function(e){if(goog.string.contains(e,"&")){if(!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global){return goog.string.unescapeEntitiesUsingDom_(e)}else{return goog.string.unescapePureXmlEntities_(e)}}return e};goog.string.unescapeEntitiesWithDocument=function(e,o){if(goog.string.contains(e,"&")){return goog.string.unescapeEntitiesUsingDom_(e,o)}return e};goog.string.unescapeEntitiesUsingDom_=function(e,o){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'};var r;if(o){r=o.createElement("div")}else{r=goog.global.document.createElement("div")}return e.replace(goog.string.HTML_ENTITY_PATTERN_,function(e,o){var i=t[e];if(i){return i}if(o.charAt(0)=="#"){var n=Number("0"+o.substr(1));if(!isNaN(n)){i=String.fromCharCode(n)}}if(!i){r.innerHTML=e+" ";i=r.firstChild.nodeValue.slice(0,-1)}return t[e]=i})};goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,function(e,o){switch(o){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if(o.charAt(0)=="#"){var t=Number("0"+o.substr(1));if(!isNaN(t)){return String.fromCharCode(t)}}return e}})};goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g;goog.string.whitespaceEscape=function(e,o){return goog.string.newLineToBr(e.replace(/  /g," &#160;"),o)};goog.string.preserveSpaces=function(e){return e.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)};goog.string.stripQuotes=function(e,o){var t=o.length;for(var r=0;r<t;r++){var i=t==1?o:o.charAt(r);if(e.charAt(0)==i&&e.charAt(e.length-1)==i){return e.substring(1,e.length-1)}}return e};goog.string.truncate=function(e,o,t){if(t){e=goog.string.unescapeEntities(e)}if(e.length>o){e=e.substring(0,o-3)+"..."}if(t){e=goog.string.htmlEscape(e)}return e};goog.string.truncateMiddle=function(e,o,t,r){if(t){e=goog.string.unescapeEntities(e)}if(r&&e.length>o){if(r>o){r=o}var i=e.length-r;var n=o-r;e=e.substring(0,n)+"..."+e.substring(i)}else if(e.length>o){var a=Math.floor(o/2);var l=e.length-a;a+=o%2;e=e.substring(0,a)+"..."+e.substring(l)}if(t){e=goog.string.htmlEscape(e)}return e};goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"<"};goog.string.jsEscapeCache_={"'":"\\'"};goog.string.quote=function(e){e=String(e);var o=['"'];for(var t=0;t<e.length;t++){var r=e.charAt(t);var i=r.charCodeAt(0);o[t+1]=goog.string.specialEscapeChars_[r]||(i>31&&i<127?r:goog.string.escapeChar(r))}o.push('"');return o.join("")};goog.string.escapeString=function(e){var o=[];for(var t=0;t<e.length;t++){o[t]=goog.string.escapeChar(e.charAt(t))}return o.join("")};goog.string.escapeChar=function(e){if(e in goog.string.jsEscapeCache_){return goog.string.jsEscapeCache_[e]}if(e in goog.string.specialEscapeChars_){return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e]}var o=e;var t=e.charCodeAt(0);if(t>31&&t<127){o=e}else{if(t<256){o="\\x";if(t<16||t>256){o+="0"}}else{o="\\u";if(t<4096){o+="0"}}o+=t.toString(16).toUpperCase()}return goog.string.jsEscapeCache_[e]=o};goog.string.contains=function(e,o){return e.indexOf(o)!=-1};goog.string.caseInsensitiveContains=function(e,o){return goog.string.contains(e.toLowerCase(),o.toLowerCase())};goog.string.countOf=function(e,o){return e&&o?e.split(o).length-1:0};goog.string.removeAt=function(e,o,t){var r=e;if(o>=0&&o<e.length&&t>0){r=e.substr(0,o)+e.substr(o+t,e.length-o-t)}return r};goog.string.remove=function(e,o){var t=new RegExp(goog.string.regExpEscape(o),"");return e.replace(t,"")};goog.string.removeAll=function(e,o){var t=new RegExp(goog.string.regExpEscape(o),"g");return e.replace(t,"")};goog.string.regExpEscape=function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};goog.string.repeat=String.prototype.repeat?function(e,o){return e.repeat(o)}:function(e,o){return new Array(o+1).join(e)};goog.string.padNumber=function(e,o,t){var r=goog.isDef(t)?e.toFixed(t):String(e);var i=r.indexOf(".");if(i==-1){i=r.length}return goog.string.repeat("0",Math.max(0,o-i))+r};goog.string.makeSafe=function(e){return e==null?"":String(e)};goog.string.buildString=function(e){return Array.prototype.join.call(arguments,"")};goog.string.getRandomString=function(){var e=2147483648;return Math.floor(Math.random()*e).toString(36)+Math.abs(Math.floor(Math.random()*e)^goog.now()).toString(36)};goog.string.compareVersions=function(e,o){var t=0;var r=goog.string.trim(String(e)).split(".");var i=goog.string.trim(String(o)).split(".");var n=Math.max(r.length,i.length);for(var a=0;t==0&&a<n;a++){var l=r[a]||"";var s=i[a]||"";var g=new RegExp("(\\d*)(\\D*)","g");var p=new RegExp("(\\d*)(\\D*)","g");do{var u=g.exec(l)||["","",""];var c=p.exec(s)||["","",""];if(u[0].length==0&&c[0].length==0){break}var d=u[1].length==0?0:parseInt(u[1],10);var y=c[1].length==0?0:parseInt(c[1],10);t=goog.string.compareElements_(d,y)||goog.string.compareElements_(u[2].length==0,c[2].length==0)||goog.string.compareElements_(u[2],c[2])}while(t==0)}return t};goog.string.compareElements_=function(e,o){if(e<o){return-1}else if(e>o){return 1}return 0};goog.string.hashCode=function(e){var o=0;for(var t=0;t<e.length;++t){o=31*o+e.charCodeAt(t)>>>0}return o};goog.string.uniqueStringCounter_=Math.random()*2147483648|0;goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++};goog.string.toNumber=function(e){var o=Number(e);if(o==0&&goog.string.isEmptyOrWhitespace(e)){return NaN}return o};goog.string.isLowerCamelCase=function(e){return/^[a-z]+([A-Z][a-z]*)*$/.test(e)};goog.string.isUpperCamelCase=function(e){return/^([A-Z][a-z]*)+$/.test(e)};goog.string.toCamelCase=function(e){return String(e).replace(/\-([a-z])/g,function(e,o){return o.toUpperCase()})};goog.string.toSelectorCase=function(e){return String(e).replace(/([A-Z])/g,"-$1").toLowerCase()};goog.string.toTitleCase=function(e,o){var t=goog.isString(o)?goog.string.regExpEscape(o):"\\s";t=t?"|["+t+"]+":"";var r=new RegExp("(^"+t+")([a-z])","g");return e.replace(r,function(e,o,t){return o+t.toUpperCase()})};goog.string.capitalize=function(e){return String(e.charAt(0)).toUpperCase()+String(e.substr(1)).toLowerCase()};goog.string.parseInt=function(e){if(isFinite(e)){e=String(e)}if(goog.isString(e)){return/^\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10)}return NaN};goog.string.splitLimit=function(e,o,t){var r=e.split(o);var i=[];while(t>0&&r.length){i.push(r.shift());t--}if(r.length){i.push(r.join(o))}return i};goog.string.editDistance=function(e,o){var t=[];var r=[];if(e==o){return 0}if(!e.length||!o.length){return Math.max(e.length,o.length)}for(var i=0;i<o.length+1;i++){t[i]=i}for(var i=0;i<e.length;i++){r[0]=i+1;for(var n=0;n<o.length;n++){var a=Number(e[i]!=o[n]);r[n+1]=Math.min(r[n]+1,t[n+1]+1,t[n]+a)}for(var n=0;n<t.length;n++){t[n]=r[n]}}return r[o.length]};goog.provide("goog.asserts");goog.provide("goog.asserts.AssertionError");goog.require("goog.debug.Error");goog.require("goog.dom.NodeType");goog.require("goog.string");goog.define("goog.asserts.ENABLE_ASSERTS",goog.DEBUG);goog.asserts.AssertionError=function(e,o){o.unshift(e);goog.debug.Error.call(this,goog.string.subs.apply(null,o));o.shift();this.messagePattern=e}
;goog.inherits(goog.asserts.AssertionError,goog.debug.Error);goog.asserts.AssertionError.prototype.name="AssertionError";goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e};goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER;goog.asserts.doAssertFailure_=function(e,o,t,r){var i="Assertion failed";if(t){i+=": "+t;var n=r}else if(e){i+=": "+e;n=o}var a=new goog.asserts.AssertionError(""+i,n||[]);goog.asserts.errorHandler_(a)};goog.asserts.setErrorHandler=function(e){if(goog.asserts.ENABLE_ASSERTS){goog.asserts.errorHandler_=e}};goog.asserts.assert=function(e,o,t){if(goog.asserts.ENABLE_ASSERTS&&!e){goog.asserts.doAssertFailure_("",null,o,Array.prototype.slice.call(arguments,2))}return e};goog.asserts.fail=function(e,o){if(goog.asserts.ENABLE_ASSERTS){goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))}};goog.asserts.assertNumber=function(e,o,t){if(goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(e)){goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],o,Array.prototype.slice.call(arguments,2))}return e};goog.asserts.assertString=function(e,o,t){if(goog.asserts.ENABLE_ASSERTS&&!goog.isString(e)){goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],o,Array.prototype.slice.call(arguments,2))}return e};goog.asserts.assertFunction=function(e,o,t){if(goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)){goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],o,Array.prototype.slice.call(arguments,2))}return e};goog.asserts.assertObject=function(e,o,t){if(goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)){goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],o,Array.prototype.slice.call(arguments,2))}return e};goog.asserts.assertArray=function(e,o,t){if(goog.asserts.ENABLE_ASSERTS&&!goog.isArray(e)){goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],o,Array.prototype.slice.call(arguments,2))}return e};goog.asserts.assertBoolean=function(e,o,t){if(goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(e)){goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],o,Array.prototype.slice.call(arguments,2))}return e};goog.asserts.assertElement=function(e,o,t){if(goog.asserts.ENABLE_ASSERTS&&(!goog.isObject(e)||e.nodeType!=goog.dom.NodeType.ELEMENT)){goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],o,Array.prototype.slice.call(arguments,2))}return e};goog.asserts.assertInstanceof=function(e,o,t,r){if(goog.asserts.ENABLE_ASSERTS&&!(e instanceof o)){goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(o),goog.asserts.getType_(e)],t,Array.prototype.slice.call(arguments,3))}return e};goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype){goog.asserts.fail(e+" should not be enumerable in Object.prototype.")}};goog.asserts.getType_=function(e){if(e instanceof Function){return e.displayName||e.name||"unknown type name"}else if(e instanceof Object){return e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}else{return e===null?"null":typeof e}};goog.provide("ol.math");goog.require("goog.asserts");ol.math.clamp=function(e,o,t){return Math.min(Math.max(e,o),t)};ol.math.cosh=function(){var e;if("cosh"in Math){e=Math.cosh}else{e=function(e){var o=Math.exp(e);return(o+1/o)/2}}return e}();ol.math.roundUpToPowerOfTwo=function(e){goog.asserts.assert(0<e,"x should be larger than 0");return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))};ol.math.squaredSegmentDistance=function(e,o,t,r,i,n){var a=i-t;var l=n-r;if(a!==0||l!==0){var s=((e-t)*a+(o-r)*l)/(a*a+l*l);if(s>1){t=i;r=n}else if(s>0){t+=a*s;r+=l*s}}return ol.math.squaredDistance(e,o,t,r)};ol.math.squaredDistance=function(e,o,t,r){var i=t-e;var n=r-o;return i*i+n*n};ol.math.solveLinearSystem=function(e){var o=e.length;if(goog.asserts.ENABLE_ASSERTS){for(var t=0;t<o;t++){goog.asserts.assert(e[t].length==o+1,"every row should have correct number of columns")}}for(var r=0;r<o;r++){var i=r;var n=Math.abs(e[r][r]);for(var a=r+1;a<o;a++){var l=Math.abs(e[a][r]);if(l>n){n=l;i=a}}if(n===0){return null}var s=e[i];e[i]=e[r];e[r]=s;for(var g=r+1;g<o;g++){var p=-e[g][r]/e[r][r];for(var u=r;u<o+1;u++){if(r==u){e[g][u]=0}else{e[g][u]+=p*e[r][u]}}}}var c=new Array(o);for(var d=o-1;d>=0;d--){c[d]=e[d][o]/e[d][d];for(var y=d-1;y>=0;y--){e[y][o]-=e[y][d]*c[d]}}return c};ol.math.toDegrees=function(e){return e*180/Math.PI};ol.math.toRadians=function(e){return e*Math.PI/180};goog.provide("ol.CenterConstraint");goog.provide("ol.CenterConstraintType");goog.require("ol.math");ol.CenterConstraintType;ol.CenterConstraint.createExtent=function(e){return function(o){if(o){return[ol.math.clamp(o[0],e[0],e[2]),ol.math.clamp(o[1],e[1],e[3])]}else{return undefined}}};ol.CenterConstraint.none=function(e){return e};goog.provide("ol.array");goog.require("goog.asserts");ol.array.binarySearch=function(e,o,t){var r,i;var n=t||ol.array.numberSafeCompareFunction;var a=0;var l=e.length;var s=false;while(a<l){r=a+(l-a>>1);i=+n(e[r],o);if(i<0){a=r+1}else{l=r;s=!i}}return s?a:~a};ol.array.binaryFindNearest=function(e,o){var t=ol.array.binarySearch(e,o,function(e,o){return o-e});if(t>=0){return t}else if(t==-1){return 0}else if(t==-e.length-1){return e.length-1}else{var r=-t-2;var i=-t-1;if(e[r]-o<o-e[i]){return r}else{return i}}};ol.array.numberSafeCompareFunction=function(e,o){return e>o?1:e<o?-1:0};ol.array.includes=function(e,o){return e.indexOf(o)>=0};ol.array.linearFindNearest=function(e,o,t){var r=e.length;if(e[0]<=o){return 0}else if(o<=e[r-1]){return r-1}else{var i;if(t>0){for(i=1;i<r;++i){if(e[i]<o){return i-1}}}else if(t<0){for(i=1;i<r;++i){if(e[i]<=o){return i}}}else{for(i=1;i<r;++i){if(e[i]==o){return i}else if(e[i]<o){if(e[i-1]-o<o-e[i]){return i-1}else{return i}}}}goog.asserts.fail();return r-1}};ol.array.reverseSubArray=function(e,o,t){goog.asserts.assert(o>=0,"Array begin index should be equal to or greater than 0");goog.asserts.assert(t<e.length,"Array end index should be less than the array length");while(o<t){var r=e[o];e[o]=e[t];e[t]=r;++o;--t}};ol.array.flatten=function(e){var o=e.reduce(function(e,o){if(goog.isArray(o)){return e.concat(ol.array.flatten(o))}else{return e.concat(o)}},[]);return o};ol.array.extend=function(e,o){var t;var r=goog.isArrayLike(o)?o:[o];var i=r.length;for(t=0;t<i;t++){e[e.length]=r[t]}};ol.array.remove=function(e,o){var t=e.indexOf(o);var r=t>-1;if(r){e.splice(t,1)}return r};ol.array.find=function(e,o){var t=e.length>>>0;var r;for(var i=0;i<t;i++){r=e[i];if(o(r,i,e)){return r}}return null};ol.array.equals=function(e,o){var t=e.length;if(t!==o.length){return false}for(var r=0;r<t;r++){if(e[r]!==o[r]){return false}}return true};ol.array.stableSort=function(e,o){var t=e.length;var r=Array(e.length);var i;for(i=0;i<t;i++){r[i]={index:i,value:e[i]}}r.sort(function(e,t){return o(e.value,t.value)||e.index-t.index});for(i=0;i<e.length;i++){e[i]=r[i].value}};ol.array.findIndex=function(e,o){var t;var r=!e.every(function(r,i){t=i;return!o(r,i,e)});return r?t:-1};ol.array.isSorted=function(e,o,t){var r=o||ol.array.numberSafeCompareFunction;return e.every(function(o,i){if(i===0){return true}var n=r(e[i-1],o);return!(n>0||t&&n===0)})};goog.provide("ol.ResolutionConstraint");goog.provide("ol.ResolutionConstraintType");goog.require("ol.array");goog.require("ol.math");ol.ResolutionConstraintType;ol.ResolutionConstraint.createSnapToResolutions=function(e){return function(o,t,r){if(o!==undefined){var i=ol.array.linearFindNearest(e,o,r);i=ol.math.clamp(i+t,0,e.length-1);return e[i]}else{return undefined}}};ol.ResolutionConstraint.createSnapToPower=function(e,o,t){return function(r,i,n){if(r!==undefined){var a;if(n>0){a=0}else if(n<0){a=1}else{a=.5}var l=Math.floor(Math.log(o/r)/Math.log(e)+a);var s=Math.max(l+i,0);if(t!==undefined){s=Math.min(s,t)}return o/Math.pow(e,s)}else{return undefined}}};goog.provide("ol.RotationConstraint");goog.provide("ol.RotationConstraintType");goog.require("ol.math");ol.RotationConstraintType;ol.RotationConstraint.disable=function(e,o){if(e!==undefined){return 0}else{return undefined}};ol.RotationConstraint.none=function(e,o){if(e!==undefined){return e+o}else{return undefined}};ol.RotationConstraint.createSnapToN=function(e){var o=2*Math.PI/e;return function(e,t){if(e!==undefined){e=Math.floor((e+t)/o+.5)*o;return e}else{return undefined}}};ol.RotationConstraint.createSnapToZero=function(e){var o=e||ol.math.toRadians(5);return function(e,t){if(e!==undefined){if(Math.abs(e+t)<=o){return 0}else{return e+t}}else{return undefined}}};goog.provide("ol.Constraints");goog.require("ol.CenterConstraintType");goog.require("ol.ResolutionConstraintType");goog.require("ol.RotationConstraintType");ol.Constraints=function(e,o,t){this.center=e;this.resolution=o;this.rotation=t};goog.provide("ol.object");ol.object.assign=typeof Object.assign==="function"?Object.assign:function(e,o){if(e===undefined||e===null){throw new TypeError("Cannot convert undefined or null to object")}var t=Object(e);for(var r=1,i=arguments.length;r<i;++r){var n=arguments[r];if(n!==undefined&&n!==null){for(var a in n){if(n.hasOwnProperty(a)){t[a]=n[a]}}}}return t};ol.object.clear=function(e){for(var o in e){delete e[o]}};ol.object.getValues=function(e){var o=[];for(var t in e){o.push(e[t])}return o};ol.object.isEmpty=function(e){var o;for(o in e){return false}return!o};goog.provide("ol.events");goog.provide("ol.events.EventType");goog.provide("ol.events.KeyCode");goog.require("ol.object");ol.events.EventType={CHANGE:"change",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"mspointerdown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"};ol.events.KeyCode={LEFT:37,UP:38,RIGHT:39,DOWN:40};ol.events.LISTENER_MAP_PROP_="olm_"+(Math.random()*1e4|0);ol.events.EventTargetLike;ol.events.Key;ol.events.ListenerFunctionType;ol.events.ListenerObjType;ol.events.bindListener_=function(e){var o=function(o){var t=e.listener;var r=e.bindTo||e.target;if(e.callOnce){ol.events.unlistenByKey(e)}return t.call(r,o)};e.boundListener=o;return o};ol.events.findListener_=function(e,o,t,r){var i;for(var n=0,a=e.length;n<a;++n){i=e[n];if(i.listener===o&&i.bindTo===t){if(r){i.deleteIndex=n}return i}}return undefined};ol.events.getListeners=function(e,o){var t=e[ol.events.LISTENER_MAP_PROP_];return t?t[o]:undefined};ol.events.getListenerMap_=function(e){var o=e[ol.events.LISTENER_MAP_PROP_];if(!o){o=e[ol.events.LISTENER_MAP_PROP_]={}}return o};ol.events.removeListeners_=function(e,o){var t=ol.events.getListeners(e,o);if(t){for(var r=0,i=t.length;r<i;++r){e.removeEventListener(o,t[r].boundListener);ol.object.clear(t[r])}t.length=0;var n=e[ol.events.LISTENER_MAP_PROP_];if(n){delete n[o];if(Object.keys(n).length===0){delete e[ol.events.LISTENER_MAP_PROP_]}}}};ol.events.listen=function(e,o,t,r,i){var n=ol.events.getListenerMap_(e);var a=n[o];if(!a){a=n[o]=[]}var l=ol.events.findListener_(a,t,r,false);if(l){if(!i){l.callOnce=false}}else{l={bindTo:r,callOnce:!!i,listener:t,target:e,type:o};e.addEventListener(o,ol.events.bindListener_(l));a.push(l)}return l};ol.events.listenOnce=function(e,o,t,r){return ol.events.listen(e,o,t,r,true)};ol.events.unlisten=function(e,o,t,r){var i=ol.events.getListeners(e,o);if(i){var n=ol.events.findListener_(i,t,r,true);if(n){ol.events.unlistenByKey(n)}}};ol.events.unlistenByKey=function(e){if(e&&e.target){e.target.removeEventListener(e.type,e.boundListener);var o=ol.events.getListeners(e.target,e.type);if(o){var t="deleteIndex"in e?e.deleteIndex:o.indexOf(e);if(t!==-1){o.splice(t,1)}if(o.length===0){ol.events.removeListeners_(e.target,e.type)}}ol.object.clear(e)}};ol.events.unlistenAll=function(e){var o=ol.events.getListenerMap_(e);for(var t in o){ol.events.removeListeners_(e,t)}};goog.provide("goog.disposable.IDisposable");goog.disposable.IDisposable=function(){};goog.disposable.IDisposable.prototype.dispose=goog.abstractMethod;goog.disposable.IDisposable.prototype.isDisposed=goog.abstractMethod;goog.provide("goog.Disposable");goog.provide("goog.dispose");goog.provide("goog.disposeAll");goog.require("goog.disposable.IDisposable");goog.Disposable=function(){if(goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF){if(goog.Disposable.INCLUDE_STACK_ON_CREATION){this.creationStack=(new Error).stack}goog.Disposable.instances_[goog.getUid(this)]=this}this.disposed_=this.disposed_;this.onDisposeCallbacks_=this.onDisposeCallbacks_};goog.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2};goog.define("goog.Disposable.MONITORING_MODE",0);goog.define("goog.Disposable.INCLUDE_STACK_ON_CREATION",true);goog.Disposable.instances_={};goog.Disposable.getUndisposedObjects=function(){var e=[];for(var o in goog.Disposable.instances_){if(goog.Disposable.instances_.hasOwnProperty(o)){e.push(goog.Disposable.instances_[Number(o)])}}return e};goog.Disposable.clearUndisposedObjects=function(){goog.Disposable.instances_={}};goog.Disposable.prototype.disposed_=false;goog.Disposable.prototype.onDisposeCallbacks_;goog.Disposable.prototype.creationStack;goog.Disposable.prototype.isDisposed=function(){return this.disposed_};goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed;goog.Disposable.prototype.dispose=function(){if(!this.disposed_){this.disposed_=true;this.disposeInternal();if(goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF){var e=goog.getUid(this);if(goog.Disposable.MONITORING_MODE==goog.Disposable.MonitoringMode.PERMANENT&&!goog.Disposable.instances_.hasOwnProperty(e)){throw Error(this+" did not call the goog.Disposable base "+"constructor or was disposed of after a clearUndisposedObjects "+"call")}delete goog.Disposable.instances_[e]}}};goog.Disposable.prototype.registerDisposable=function(e){this.addOnDisposeCallback(goog.partial(goog.dispose,e))};goog.Disposable.prototype.addOnDisposeCallback=function(e,o){if(this.disposed_){e.call(o);return}if(!this.onDisposeCallbacks_){this.onDisposeCallbacks_=[]}this.onDisposeCallbacks_.push(goog.isDef(o)?goog.bind(e,o):e)};goog.Disposable.prototype.disposeInternal=function(){if(this.onDisposeCallbacks_){while(this.onDisposeCallbacks_.length){this.onDisposeCallbacks_.shift()()}}};goog.Disposable.isDisposed=function(e){if(e&&typeof e.isDisposed=="function"){return e.isDisposed()}return false};goog.dispose=function(e){if(e&&typeof e.dispose=="function"){e.dispose()}};goog.disposeAll=function(e){for(var o=0,t=arguments.length;o<t;++o){var r=arguments[o];if(goog.isArrayLike(r)){goog.disposeAll.apply(null,r)}else{goog.dispose(r)}}};goog.provide("ol.events.Event");ol.events.Event=function(e,o){this.propagationStopped;this.type=e;this.target=o};ol.events.Event.prototype.preventDefault=ol.events.Event.prototype.stopPropagation=function(){this.propagationStopped=true};ol.events.Event.stopPropagation=function(e){e.stopPropagation()};ol.events.Event.preventDefault=function(e){e.preventDefault()};goog.provide("ol.events.EventTarget");goog.require("goog.Disposable");goog.require("ol.events");goog.require("ol.events.Event");ol.events.EventTarget=function(){goog.base(this);this.listeners_={}};goog.inherits(ol.events.EventTarget,goog.Disposable);ol.events.EventTarget.prototype.addEventListener=function(e,o){var t=this.listeners_[e];if(!t){t=this.listeners_[e]=[]}if(t.indexOf(o)===-1){t.unshift(o)}};ol.events.EventTarget.prototype.dispatchEvent=function(e){var o=typeof e==="string"?new ol.events.Event(e):e;var t=o.type;o.target=this;var r=this.listeners_[t];if(r){for(var i=r.length-1;i>=0;--i){if(r[i].call(this,o)===false||o.propagationStopped){return false}}}};ol.events.EventTarget.prototype.disposeInternal=function(){ol.events.unlistenAll(this);goog.base(this,"disposeInternal")};ol.events.EventTarget.prototype.getListeners=function(e){return this.listeners_[e]};ol.events.EventTarget.prototype.hasListener=function(e){return e?e in this.listeners_:Object.keys(this.listeners_).length>0};ol.events.EventTarget.prototype.removeEventListener=function(e,o){var t=this.listeners_[e];if(t){var r=t.indexOf(o);t.splice(r,1);if(t.length===0){delete this.listeners_[e]}}};goog.provide("ol.Observable");goog.require("ol.events");goog.require("ol.events.EventTarget");goog.require("ol.events.EventType");ol.Observable=function(){goog.base(this);this.revision_=0};goog.inherits(ol.Observable,ol.events.EventTarget);ol.Observable.unByKey=function(e){if(Array.isArray(e)){for(var o=0,t=e.length;o<t;++o){ol.events.unlistenByKey(e[o])}}else{ol.events.unlistenByKey(e)}};ol.Observable.prototype.changed=function(){++this.revision_;this.dispatchEvent(ol.events.EventType.CHANGE)};ol.Observable.prototype.dispatchEvent;ol.Observable.prototype.getRevision=function(){return this.revision_};ol.Observable.prototype.on=function(e,o,t){if(Array.isArray(e)){var r=e.length;var i=new Array(r);for(var n=0;n<r;++n){i[n]=ol.events.listen(this,e[n],o,t)}return i}else{return ol.events.listen(this,e,o,t)}};ol.Observable.prototype.once=function(e,o,t){if(Array.isArray(e)){var r=e.length;var i=new Array(r);for(var n=0;n<r;++n){i[n]=ol.events.listenOnce(this,e[n],o,t)}return i}else{return ol.events.listenOnce(this,e,o,t)}};ol.Observable.prototype.un=function(e,o,t){if(Array.isArray(e)){for(var r=0,i=e.length;r<i;++r){ol.events.unlisten(this,e[r],o,t)}return}else{ol.events.unlisten(this,e,o,t)}};ol.Observable.prototype.unByKey=ol.Observable.unByKey;goog.provide("ol.Object");goog.provide("ol.ObjectEvent");goog.provide("ol.ObjectEventType");goog.require("ol.Observable");goog.require("ol.events");goog.require("ol.events.Event");goog.require("ol.object");ol.ObjectEventType={PROPERTYCHANGE:"propertychange"};ol.ObjectEvent=function(e,o,t){goog.base(this,e);this.key=o;this.oldValue=t};goog.inherits(ol.ObjectEvent,ol.events.Event);ol.Object=function(e){goog.base(this);goog.getUid(this);this.values_={};if(e!==undefined){this.setProperties(e)}};goog.inherits(ol.Object,ol.Observable);ol.Object.changeEventTypeCache_={};ol.Object.getChangeEventType=function(e){return ol.Object.changeEventTypeCache_.hasOwnProperty(e)?ol.Object.changeEventTypeCache_[e]:ol.Object.changeEventTypeCache_[e]="change:"+e};ol.Object.prototype.get=function(e){var o;if(this.values_.hasOwnProperty(e)){o=this.values_[e]}return o};ol.Object.prototype.getKeys=function(){return Object.keys(this.values_)};ol.Object.prototype.getProperties=function(){return ol.object.assign({},this.values_)};ol.Object.prototype.notify=function(e,o){var t;t=ol.Object.getChangeEventType(e);this.dispatchEvent(new ol.ObjectEvent(t,e,o));t=ol.ObjectEventType.PROPERTYCHANGE;this.dispatchEvent(new ol.ObjectEvent(t,e,o))};ol.Object.prototype.set=function(e,o,t){if(t){this.values_[e]=o}else{var r=this.values_[e];this.values_[e]=o;if(r!==o){this.notify(e,r)}}};ol.Object.prototype.setProperties=function(e,o){var t;for(t in e){this.set(t,e[t],o)}};ol.Object.prototype.unset=function(e,o){if(e in this.values_){var t=this.values_[e];delete this.values_[e];if(!o){this.notify(e,t)}}};goog.provide("ol.Size");goog.provide("ol.size");goog.require("goog.asserts");ol.Size;ol.size.buffer=function(e,o,t){if(t===undefined){t=[0,0]}t[0]=e[0]+2*o;t[1]=e[1]+2*o;return t};ol.size.equals=function(e,o){return e[0]==o[0]&&e[1]==o[1]};ol.size.hasArea=function(e){return e[0]>0&&e[1]>0};ol.size.scale=function(e,o,t){if(t===undefined){t=[0,0]}t[0]=e[0]*o+.5|0;t[1]=e[1]*o+.5|0;return t};ol.size.toSize=function(e,o){if(goog.isArray(e)){return e}else{goog.asserts.assert(goog.isNumber(e));if(o===undefined){o=[e,e]}else{o[0]=e;o[1]=e}return o}};goog.provide("goog.array");goog.provide("goog.array.ArrayLike");goog.require("goog.asserts");goog.define("goog.NATIVE_ARRAY_PROTOTYPES",goog.TRUSTED_SITE);goog.define("goog.array.ASSUME_NATIVE_FUNCTIONS",false);goog.array.ArrayLike;goog.array.peek=function(e){return e[e.length-1]};goog.array.last=goog.array.peek;goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(e,o,t){goog.asserts.assert(e.length!=null);return Array.prototype.indexOf.call(e,o,t)}:function(e,o,t){var r=t==null?0:t<0?Math.max(0,e.length+t):t;if(goog.isString(e)){if(!goog.isString(o)||o.length!=1){return-1}return e.indexOf(o,r)}for(var i=r;i<e.length;i++){if(i in e&&e[i]===o)return i}return-1};goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(e,o,t){goog.asserts.assert(e.length!=null);var r=t==null?e.length-1:t;return Array.prototype.lastIndexOf.call(e,o,r)}:function(e,o,t){var r=t==null?e.length-1:t;if(r<0){r=Math.max(0,e.length+r)}if(goog.isString(e)){if(!goog.isString(o)||o.length!=1){return-1}return e.lastIndexOf(o,r)}for(var i=r;i>=0;i--){if(i in e&&e[i]===o)return i}return-1};goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(e,o,t){goog.asserts.assert(e.length!=null);Array.prototype.forEach.call(e,o,t)}:function(e,o,t){var r=e.length;var i=goog.isString(e)?e.split(""):e;for(var n=0;n<r;n++){if(n in i){o.call(t,i[n],n,e)}}};goog.array.forEachRight=function(e,o,t){var r=e.length;var i=goog.isString(e)?e.split(""):e;for(var n=r-1;n>=0;--n){if(n in i){o.call(t,i[n],n,e)}}};goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(e,o,t){goog.asserts.assert(e.length!=null);return Array.prototype.filter.call(e,o,t)}:function(e,o,t){var r=e.length;var i=[];var n=0;var a=goog.isString(e)?e.split(""):e;for(var l=0;l<r;l++){if(l in a){var s=a[l];if(o.call(t,s,l,e)){i[n++]=s}}}return i};goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(e,o,t){goog.asserts.assert(e.length!=null);return Array.prototype.map.call(e,o,t)}:function(e,o,t){var r=e.length;var i=new Array(r);var n=goog.isString(e)?e.split(""):e;for(var a=0;a<r;a++){if(a in n){i[a]=o.call(t,n[a],a,e)}}return i};goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(e,o,t,r){goog.asserts.assert(e.length!=null);if(r){o=goog.bind(o,r)}return Array.prototype.reduce.call(e,o,t)}:function(e,o,t,r){var i=t;goog.array.forEach(e,function(t,n){i=o.call(r,i,t,n,e)});return i};goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(e,o,t,r){goog.asserts.assert(e.length!=null);goog.asserts.assert(o!=null);if(r){o=goog.bind(o,r)}return Array.prototype.reduceRight.call(e,o,t)}:function(e,o,t,r){var i=t;goog.array.forEachRight(e,function(t,n){i=o.call(r,i,t,n,e)});return i};goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(e,o,t){goog.asserts.assert(e.length!=null);return Array.prototype.some.call(e,o,t)}:function(e,o,t){var r=e.length;var i=goog.isString(e)?e.split(""):e;for(var n=0;n<r;n++){if(n in i&&o.call(t,i[n],n,e)){return true}}return false};goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(e,o,t){goog.asserts.assert(e.length!=null);return Array.prototype.every.call(e,o,t)}:function(e,o,t){var r=e.length;var i=goog.isString(e)?e.split(""):e;for(var n=0;n<r;n++){if(n in i&&!o.call(t,i[n],n,e)){return false}}return true};goog.array.count=function(e,o,t){var r=0;goog.array.forEach(e,function(e,i,n){if(o.call(t,e,i,n)){++r}},t);return r};goog.array.find=function(e,o,t){var r=goog.array.findIndex(e,o,t);return r<0?null:goog.isString(e)?e.charAt(r):e[r]};goog.array.findIndex=function(e,o,t){var r=e.length;var i=goog.isString(e)?e.split(""):e;for(var n=0;n<r;n++){if(n in i&&o.call(t,i[n],n,e)){return n}}return-1};goog.array.findRight=function(e,o,t){var r=goog.array.findIndexRight(e,o,t);return r<0?null:goog.isString(e)?e.charAt(r):e[r]};goog.array.findIndexRight=function(e,o,t){var r=e.length;var i=goog.isString(e)?e.split(""):e;for(var n=r-1;n>=0;n--){if(n in i&&o.call(t,i[n],n,e)){return n}}return-1};goog.array.contains=function(e,o){return goog.array.indexOf(e,o)>=0};goog.array.isEmpty=function(e){return e.length==0};goog.array.clear=function(e){if(!goog.isArray(e)){for(var o=e.length-1;o>=0;o--){delete e[o]}}e.length=0};goog.array.insert=function(e,o){if(!goog.array.contains(e,o)){e.push(o)}};goog.array.insertAt=function(e,o,t){goog.array.splice(e,t,0,o)};goog.array.insertArrayAt=function(e,o,t){goog.partial(goog.array.splice,e,t,0).apply(null,o)};goog.array.insertBefore=function(e,o,t){var r;if(arguments.length==2||(r=goog.array.indexOf(e,t))<0){e.push(o)}else{goog.array.insertAt(e,o,r)}};goog.array.remove=function(e,o){var t=goog.array.indexOf(e,o);var r;if(r=t>=0){goog.array.removeAt(e,t)}return r};goog.array.removeAt=function(e,o){goog.asserts.assert(e.length!=null);return Array.prototype.splice.call(e,o,1).length==1};goog.array.removeIf=function(e,o,t){var r=goog.array.findIndex(e,o,t);if(r>=0){goog.array.removeAt(e,r);return true}return false};goog.array.removeAllIf=function(e,o,t){var r=0;goog.array.forEachRight(e,function(i,n){if(o.call(t,i,n,e)){if(goog.array.removeAt(e,n)){r++}}});return r};goog.array.concat=function(e){return Array.prototype.concat.apply(Array.prototype,arguments)};goog.array.join=function(e){return Array.prototype.concat.apply(Array.prototype,arguments)};goog.array.toArray=function(e){var o=e.length;if(o>0){var t=new Array(o);for(var r=0;r<o;r++){t[r]=e[r]}return t}return[]};goog.array.clone=goog.array.toArray;goog.array.extend=function(e,o){for(var t=1;t<arguments.length;t++){var r=arguments[t];if(goog.isArrayLike(r)){var i=e.length||0;var n=r.length||0;e.length=i+n;for(var a=0;a<n;a++){e[i+a]=r[a]}}else{e.push(r)}}};goog.array.splice=function(e,o,t,r){goog.asserts.assert(e.length!=null);return Array.prototype.splice.apply(e,goog.array.slice(arguments,1))};goog.array.slice=function(e,o,t){goog.asserts.assert(e.length!=null);if(arguments.length<=2){return Array.prototype.slice.call(e,o)}else{return Array.prototype.slice.call(e,o,t)}};goog.array.removeDuplicates=function(e,o,t){var r=o||e;var i=function(e){return goog.isObject(e)?"o"+goog.getUid(e):(typeof e).charAt(0)+e};var n=t||i;var a={},l=0,s=0;while(s<e.length){var g=e[s++];var p=n(g);if(!Object.prototype.hasOwnProperty.call(a,p)){a[p]=true;r[l++]=g}}r.length=l};goog.array.binarySearch=function(e,o,t){return goog.array.binarySearch_(e,t||goog.array.defaultCompare,false,o)};goog.array.binarySelect=function(e,o,t){return goog.array.binarySearch_(e,o,true,undefined,t)};goog.array.binarySearch_=function(e,o,t,r,i){var n=0;var a=e.length;var l;while(n<a){var s=n+a>>1;var g;if(t){g=o.call(i,e[s],s,e)}else{g=o(r,e[s])}if(g>0){n=s+1}else{a=s;l=!g}}return l?n:~n};goog.array.sort=function(e,o){e.sort(o||goog.array.defaultCompare)};goog.array.stableSort=function(e,o){for(var t=0;t<e.length;t++){e[t]={index:t,value:e[t]}}var r=o||goog.array.defaultCompare;function i(e,o){return r(e.value,o.value)||e.index-o.index}goog.array.sort(e,i);for(var t=0;t<e.length;t++){e[t]=e[t].value}};goog.array.sortByKey=function(e,o,t){var r=t||goog.array.defaultCompare;goog.array.sort(e,function(e,t){return r(o(e),o(t))})};goog.array.sortObjectsByKey=function(e,o,t){goog.array.sortByKey(e,function(e){return e[o]},t)};goog.array.isSorted=function(e,o,t){var r=o||goog.array.defaultCompare;for(var i=1;i<e.length;i++){var n=r(e[i-1],e[i]);if(n>0||n==0&&t){return false}}return true};goog.array.equals=function(e,o,t){if(!goog.isArrayLike(e)||!goog.isArrayLike(o)||e.length!=o.length){return false}var r=e.length;var i=t||goog.array.defaultCompareEquality;for(var n=0;n<r;n++){if(!i(e[n],o[n])){return false}}return true};goog.array.compare3=function(e,o,t){var r=t||goog.array.defaultCompare;var i=Math.min(e.length,o.length);for(var n=0;n<i;n++){var a=r(e[n],o[n]);if(a!=0){return a}}return goog.array.defaultCompare(e.length,o.length)};goog.array.defaultCompare=function(e,o){return e>o?1:e<o?-1:0};goog.array.inverseDefaultCompare=function(e,o){return-goog.array.defaultCompare(e,o)};goog.array.defaultCompareEquality=function(e,o){return e===o};goog.array.binaryInsert=function(e,o,t){var r=goog.array.binarySearch(e,o,t);if(r<0){goog.array.insertAt(e,o,-(r+1));return true}return false};goog.array.binaryRemove=function(e,o,t){var r=goog.array.binarySearch(e,o,t);return r>=0?goog.array.removeAt(e,r):false};goog.array.bucket=function(e,o,t){var r={};for(var i=0;i<e.length;i++){var n=e[i];var a=o.call(t,n,i,e);if(goog.isDef(a)){var l=r[a]||(r[a]=[]);l.push(n)}}return r};goog.array.toObject=function(e,o,t){var r={};goog.array.forEach(e,function(i,n){r[o.call(t,i,n,e)]=i});return r};goog.array.range=function(e,o,t){var r=[];var i=0;var n=e;var a=t||1;if(o!==undefined){i=e;n=o}if(a*(n-i)<0){return[]}if(a>0){for(var l=i;l<n;l+=a){r.push(l)}}else{for(var l=i;l>n;l+=a){r.push(l)}}return r};goog.array.repeat=function(e,o){var t=[];for(var r=0;r<o;r++){t[r]=e}return t};goog.array.flatten=function(e){var o=8192;var t=[];for(var r=0;r<arguments.length;r++){var i=arguments[r];if(goog.isArray(i)){for(var n=0;n<i.length;n+=o){var a=goog.array.slice(i,n,n+o);var l=goog.array.flatten.apply(null,a);for(var s=0;s<l.length;s++){t.push(l[s])}}}else{t.push(i)}}return t};goog.array.rotate=function(e,o){goog.asserts.assert(e.length!=null);if(e.length){o%=e.length;if(o>0){Array.prototype.unshift.apply(e,e.splice(-o,o))}else if(o<0){Array.prototype.push.apply(e,e.splice(0,-o))}}return e};goog.array.moveItem=function(e,o,t){goog.asserts.assert(o>=0&&o<e.length);goog.asserts.assert(t>=0&&t<e.length);var r=Array.prototype.splice.call(e,o,1);Array.prototype.splice.call(e,t,0,r[0])};goog.array.zip=function(e){if(!arguments.length){return[]}var o=[];var t=arguments[0].length;for(var r=1;r<arguments.length;r++){if(arguments[r].length<t){t=arguments[r].length}}for(var r=0;r<t;r++){var i=[];for(var n=0;n<arguments.length;n++){i.push(arguments[n][r])}o.push(i)}return o};goog.array.shuffle=function(e,o){var t=o||Math.random;for(var r=e.length-1;r>0;r--){var i=Math.floor(t()*(r+1));var n=e[r];e[r]=e[i];e[i]=n}};goog.array.copyByIndex=function(e,o){var t=[];goog.array.forEach(o,function(o){t.push(e[o])});return t};goog.provide("goog.math");goog.require("goog.array");goog.require("goog.asserts");goog.math.randomInt=function(e){return Math.floor(Math.random()*e)};goog.math.uniformRandom=function(e,o){return e+Math.random()*(o-e)};goog.math.clamp=function(e,o,t){return Math.min(Math.max(e,o),t)};goog.math.modulo=function(e,o){var t=e%o;return t*o<0?t+o:t};goog.math.lerp=function(e,o,t){return e+t*(o-e)};goog.math.nearlyEquals=function(e,o,t){return Math.abs(e-o)<=(t||1e-6)};goog.math.standardAngle=function(e){return goog.math.modulo(e,360)};goog.math.standardAngleInRadians=function(e){return goog.math.modulo(e,2*Math.PI)};goog.math.toRadians=function(e){return e*Math.PI/180};goog.math.toDegrees=function(e){return e*180/Math.PI};goog.math.angleDx=function(e,o){return o*Math.cos(goog.math.toRadians(e))};goog.math.angleDy=function(e,o){return o*Math.sin(goog.math.toRadians(e))};goog.math.angle=function(e,o,t,r){return goog.math.standardAngle(goog.math.toDegrees(Math.atan2(r-o,t-e)))};goog.math.angleDifference=function(e,o){var t=goog.math.standardAngle(o)-goog.math.standardAngle(e);if(t>180){t=t-360}else if(t<=-180){t=360+t}return t};goog.math.sign=Math.sign||function(e){if(e>0){return 1}if(e<0){return-1}return e};goog.math.longestCommonSubsequence=function(e,o,t,r){var i=t||function(e,o){return e==o};var n=r||function(o,t){return e[o]};var a=e.length;var l=o.length;var s=[];for(var g=0;g<a+1;g++){s[g]=[];s[g][0]=0}for(var p=0;p<l+1;p++){s[0][p]=0}for(g=1;g<=a;g++){for(p=1;p<=l;p++){if(i(e[g-1],o[p-1])){s[g][p]=s[g-1][p-1]+1
}else{s[g][p]=Math.max(s[g-1][p],s[g][p-1])}}}var u=[];var g=a,p=l;while(g>0&&p>0){if(i(e[g-1],o[p-1])){u.unshift(n(g-1,p-1));g--;p--}else{if(s[g-1][p]>s[g][p-1]){g--}else{p--}}}return u};goog.math.sum=function(e){return goog.array.reduce(arguments,function(e,o){return e+o},0)};goog.math.average=function(e){return goog.math.sum.apply(null,arguments)/arguments.length};goog.math.sampleVariance=function(e){var o=arguments.length;if(o<2){return 0}var t=goog.math.average.apply(null,arguments);var r=goog.math.sum.apply(null,goog.array.map(arguments,function(e){return Math.pow(e-t,2)}))/(o-1);return r};goog.math.standardDeviation=function(e){return Math.sqrt(goog.math.sampleVariance.apply(null,arguments))};goog.math.isInt=function(e){return isFinite(e)&&e%1==0};goog.math.isFiniteNumber=function(e){return isFinite(e)&&!isNaN(e)};goog.math.isNegativeZero=function(e){return e==0&&1/e<0};goog.math.log10Floor=function(e){if(e>0){var o=Math.round(Math.log(e)*Math.LOG10E);return o-(parseFloat("1e"+o)>e?1:0)}return e==0?-Infinity:NaN};goog.math.safeFloor=function(e,o){goog.asserts.assert(!goog.isDef(o)||o>0);return Math.floor(e+(o||2e-15))};goog.math.safeCeil=function(e,o){goog.asserts.assert(!goog.isDef(o)||o>0);return Math.ceil(e-(o||2e-15))};goog.provide("ol.Coordinate");goog.provide("ol.CoordinateFormatType");goog.provide("ol.coordinate");goog.require("goog.math");goog.require("goog.string");ol.CoordinateFormatType;ol.Coordinate;ol.coordinate.add=function(e,o){e[0]+=o[0];e[1]+=o[1];return e};ol.coordinate.closestOnSegment=function(e,o){var t=e[0];var r=e[1];var i=o[0];var n=o[1];var a=i[0];var l=i[1];var s=n[0];var g=n[1];var p=s-a;var u=g-l;var c=p===0&&u===0?0:(p*(t-a)+u*(r-l))/(p*p+u*u||0);var d,y;if(c<=0){d=a;y=l}else if(c>=1){d=s;y=g}else{d=a+c*p;y=l+c*u}return[d,y]};ol.coordinate.createStringXY=function(e){return function(o){return ol.coordinate.toStringXY(o,e)}};ol.coordinate.degreesToStringHDMS_=function(e,o,t){var r=goog.math.modulo(e+180,360)-180;var i=Math.abs(3600*r);var n=t||0;return Math.floor(i/3600)+"° "+goog.string.padNumber(Math.floor(i/60%60),2)+"′ "+goog.string.padNumber(i%60,2,n)+"″ "+o.charAt(r<0?1:0)};ol.coordinate.format=function(e,o,t){if(e){return o.replace("{x}",e[0].toFixed(t)).replace("{y}",e[1].toFixed(t))}else{return""}};ol.coordinate.equals=function(e,o){var t=true;for(var r=e.length-1;r>=0;--r){if(e[r]!=o[r]){t=false;break}}return t};ol.coordinate.rotate=function(e,o){var t=Math.cos(o);var r=Math.sin(o);var i=e[0]*t-e[1]*r;var n=e[1]*t+e[0]*r;e[0]=i;e[1]=n;return e};ol.coordinate.scale=function(e,o){e[0]*=o;e[1]*=o;return e};ol.coordinate.sub=function(e,o){e[0]-=o[0];e[1]-=o[1];return e};ol.coordinate.squaredDistance=function(e,o){var t=e[0]-o[0];var r=e[1]-o[1];return t*t+r*r};ol.coordinate.squaredDistanceToSegment=function(e,o){return ol.coordinate.squaredDistance(e,ol.coordinate.closestOnSegment(e,o))};ol.coordinate.toStringHDMS=function(e,o){if(e){return ol.coordinate.degreesToStringHDMS_(e[1],"NS",o)+" "+ol.coordinate.degreesToStringHDMS_(e[0],"EW",o)}else{return""}};ol.coordinate.toStringXY=function(e,o){return ol.coordinate.format(e,"{x}, {y}",o)};ol.coordinate.fromProjectedArray=function(e,o){var t=o.charAt(0);if(t==="n"||t==="s"){return[e[1],e[0]]}else{return e}};goog.provide("goog.vec.Float32Array");goog.vec.Float32Array=function(e){this.length=e.length||e;for(var o=0;o<this.length;o++){this[o]=e[o]||0}};goog.vec.Float32Array.BYTES_PER_ELEMENT=4;goog.vec.Float32Array.prototype.BYTES_PER_ELEMENT=4;goog.vec.Float32Array.prototype.set=function(e,o){o=o||0;for(var t=0;t<e.length&&o+t<this.length;t++){this[o+t]=e[t]}};goog.vec.Float32Array.prototype.toString=Array.prototype.join;if(typeof Float32Array=="undefined"){goog.exportProperty(goog.vec.Float32Array,"BYTES_PER_ELEMENT",goog.vec.Float32Array.BYTES_PER_ELEMENT);goog.exportProperty(goog.vec.Float32Array.prototype,"BYTES_PER_ELEMENT",goog.vec.Float32Array.prototype.BYTES_PER_ELEMENT);goog.exportProperty(goog.vec.Float32Array.prototype,"set",goog.vec.Float32Array.prototype.set);goog.exportProperty(goog.vec.Float32Array.prototype,"toString",goog.vec.Float32Array.prototype.toString);goog.exportSymbol("Float32Array",goog.vec.Float32Array)}goog.provide("goog.vec.Float64Array");goog.vec.Float64Array=function(e){this.length=e.length||e;for(var o=0;o<this.length;o++){this[o]=e[o]||0}};goog.vec.Float64Array.BYTES_PER_ELEMENT=8;goog.vec.Float64Array.prototype.BYTES_PER_ELEMENT=8;goog.vec.Float64Array.prototype.set=function(e,o){o=o||0;for(var t=0;t<e.length&&o+t<this.length;t++){this[o+t]=e[t]}};goog.vec.Float64Array.prototype.toString=Array.prototype.join;if(typeof Float64Array=="undefined"){try{goog.exportProperty(goog.vec.Float64Array,"BYTES_PER_ELEMENT",goog.vec.Float64Array.BYTES_PER_ELEMENT)}catch(e){}goog.exportProperty(goog.vec.Float64Array.prototype,"BYTES_PER_ELEMENT",goog.vec.Float64Array.prototype.BYTES_PER_ELEMENT);goog.exportProperty(goog.vec.Float64Array.prototype,"set",goog.vec.Float64Array.prototype.set);goog.exportProperty(goog.vec.Float64Array.prototype,"toString",goog.vec.Float64Array.prototype.toString);goog.exportSymbol("Float64Array",goog.vec.Float64Array)}goog.provide("goog.vec");goog.provide("goog.vec.AnyType");goog.provide("goog.vec.ArrayType");goog.provide("goog.vec.Float32");goog.provide("goog.vec.Float64");goog.provide("goog.vec.Number");goog.require("goog.vec.Float32Array");goog.require("goog.vec.Float64Array");goog.vec.Float32;goog.vec.Float64;goog.vec.Number;goog.vec.AnyType;goog.vec.ArrayType;goog.vec.EPSILON=1e-6;goog.provide("goog.vec.Vec3");goog.require("goog.vec");goog.vec.Vec3.Float32;goog.vec.Vec3.Float64;goog.vec.Vec3.Number;goog.vec.Vec3.AnyType;goog.vec.Vec3.Type;goog.vec.Vec3.Vec3Like;goog.vec.Vec3.createFloat32=function(){return new Float32Array(3)};goog.vec.Vec3.createFloat64=function(){return new Float64Array(3)};goog.vec.Vec3.createNumber=function(){var e=new Array(3);goog.vec.Vec3.setFromValues(e,0,0,0);return e};goog.vec.Vec3.create=function(){return new Float32Array(3)};goog.vec.Vec3.createFloat32FromArray=function(e){var o=goog.vec.Vec3.createFloat32();goog.vec.Vec3.setFromArray(o,e);return o};goog.vec.Vec3.createFloat32FromValues=function(e,o,t){var r=goog.vec.Vec3.createFloat32();goog.vec.Vec3.setFromValues(r,e,o,t);return r};goog.vec.Vec3.cloneFloat32=goog.vec.Vec3.createFloat32FromArray;goog.vec.Vec3.createFloat64FromArray=function(e){var o=goog.vec.Vec3.createFloat64();goog.vec.Vec3.setFromArray(o,e);return o};goog.vec.Vec3.createFloat64FromValues=function(e,o,t){var r=goog.vec.Vec3.createFloat64();goog.vec.Vec3.setFromValues(r,e,o,t);return r};goog.vec.Vec3.cloneFloat64=goog.vec.Vec3.createFloat64FromArray;goog.vec.Vec3.createFromArray=function(e){var o=goog.vec.Vec3.create();goog.vec.Vec3.setFromArray(o,e);return o};goog.vec.Vec3.createFromValues=function(e,o,t){var r=goog.vec.Vec3.create();goog.vec.Vec3.setFromValues(r,e,o,t);return r};goog.vec.Vec3.clone=function(e){var o=goog.vec.Vec3.create();goog.vec.Vec3.setFromArray(o,e);return o};goog.vec.Vec3.setFromValues=function(e,o,t,r){e[0]=o;e[1]=t;e[2]=r;return e};goog.vec.Vec3.setFromArray=function(e,o){e[0]=o[0];e[1]=o[1];e[2]=o[2];return e};goog.vec.Vec3.add=function(e,o,t){t[0]=e[0]+o[0];t[1]=e[1]+o[1];t[2]=e[2]+o[2];return t};goog.vec.Vec3.subtract=function(e,o,t){t[0]=e[0]-o[0];t[1]=e[1]-o[1];t[2]=e[2]-o[2];return t};goog.vec.Vec3.negate=function(e,o){o[0]=-e[0];o[1]=-e[1];o[2]=-e[2];return o};goog.vec.Vec3.abs=function(e,o){o[0]=Math.abs(e[0]);o[1]=Math.abs(e[1]);o[2]=Math.abs(e[2]);return o};goog.vec.Vec3.scale=function(e,o,t){t[0]=e[0]*o;t[1]=e[1]*o;t[2]=e[2]*o;return t};goog.vec.Vec3.magnitudeSquared=function(e){var o=e[0],t=e[1],r=e[2];return o*o+t*t+r*r};goog.vec.Vec3.magnitude=function(e){var o=e[0],t=e[1],r=e[2];return Math.sqrt(o*o+t*t+r*r)};goog.vec.Vec3.normalize=function(e,o){var t=1/goog.vec.Vec3.magnitude(e);o[0]=e[0]*t;o[1]=e[1]*t;o[2]=e[2]*t;return o};goog.vec.Vec3.dot=function(e,o){return e[0]*o[0]+e[1]*o[1]+e[2]*o[2]};goog.vec.Vec3.cross=function(e,o,t){var r=e[0],i=e[1],n=e[2];var a=o[0],l=o[1],s=o[2];t[0]=i*s-n*l;t[1]=n*a-r*s;t[2]=r*l-i*a;return t};goog.vec.Vec3.distanceSquared=function(e,o){var t=e[0]-o[0];var r=e[1]-o[1];var i=e[2]-o[2];return t*t+r*r+i*i};goog.vec.Vec3.distance=function(e,o){return Math.sqrt(goog.vec.Vec3.distanceSquared(e,o))};goog.vec.Vec3.direction=function(e,o,t){var r=o[0]-e[0];var i=o[1]-e[1];var n=o[2]-e[2];var a=Math.sqrt(r*r+i*i+n*n);if(a){a=1/a;t[0]=r*a;t[1]=i*a;t[2]=n*a}else{t[0]=t[1]=t[2]=0}return t};goog.vec.Vec3.lerp=function(e,o,t,r){var i=e[0],n=e[1],a=e[2];r[0]=(o[0]-i)*t+i;r[1]=(o[1]-n)*t+n;r[2]=(o[2]-a)*t+a;return r};goog.vec.Vec3.max=function(e,o,t){if(goog.isNumber(o)){t[0]=Math.max(e[0],o);t[1]=Math.max(e[1],o);t[2]=Math.max(e[2],o)}else{t[0]=Math.max(e[0],o[0]);t[1]=Math.max(e[1],o[1]);t[2]=Math.max(e[2],o[2])}return t};goog.vec.Vec3.min=function(e,o,t){if(goog.isNumber(o)){t[0]=Math.min(e[0],o);t[1]=Math.min(e[1],o);t[2]=Math.min(e[2],o)}else{t[0]=Math.min(e[0],o[0]);t[1]=Math.min(e[1],o[1]);t[2]=Math.min(e[2],o[2])}return t};goog.vec.Vec3.equals=function(e,o){return e.length==o.length&&e[0]==o[0]&&e[1]==o[1]&&e[2]==o[2]};goog.provide("goog.vec.Vec4");goog.require("goog.vec");goog.vec.Vec4.Float32;goog.vec.Vec4.Float64;goog.vec.Vec4.Number;goog.vec.Vec4.AnyType;goog.vec.Vec4.Type;goog.vec.Vec4.Vec4Like;goog.vec.Vec4.createFloat32=function(){return new Float32Array(4)};goog.vec.Vec4.createFloat64=function(){return new Float64Array(4)};goog.vec.Vec4.createNumber=function(){var e=new Array(4);goog.vec.Vec4.setFromValues(e,0,0,0,0);return e};goog.vec.Vec4.create=function(){return new Float32Array(4)};goog.vec.Vec4.createFromArray=function(e){var o=goog.vec.Vec4.create();goog.vec.Vec4.setFromArray(o,e);return o};goog.vec.Vec4.createFloat32FromArray=function(e){var o=goog.vec.Vec4.createFloat32();goog.vec.Vec4.setFromArray(o,e);return o};goog.vec.Vec4.createFloat32FromValues=function(e,o,t,r){var i=goog.vec.Vec4.createFloat32();goog.vec.Vec4.setFromValues(i,e,o,t,r);return i};goog.vec.Vec4.cloneFloat32=goog.vec.Vec4.createFloat32FromArray;goog.vec.Vec4.createFloat64FromArray=function(e){var o=goog.vec.Vec4.createFloat64();goog.vec.Vec4.setFromArray(o,e);return o};goog.vec.Vec4.createFloat64FromValues=function(e,o,t,r){var i=goog.vec.Vec4.createFloat64();goog.vec.Vec4.setFromValues(i,e,o,t,r);return i};goog.vec.Vec4.cloneFloat64=goog.vec.Vec4.createFloat64FromArray;goog.vec.Vec4.createFromValues=function(e,o,t,r){var i=goog.vec.Vec4.create();goog.vec.Vec4.setFromValues(i,e,o,t,r);return i};goog.vec.Vec4.clone=goog.vec.Vec4.createFromArray;goog.vec.Vec4.setFromValues=function(e,o,t,r,i){e[0]=o;e[1]=t;e[2]=r;e[3]=i;return e};goog.vec.Vec4.setFromArray=function(e,o){e[0]=o[0];e[1]=o[1];e[2]=o[2];e[3]=o[3];return e};goog.vec.Vec4.add=function(e,o,t){t[0]=e[0]+o[0];t[1]=e[1]+o[1];t[2]=e[2]+o[2];t[3]=e[3]+o[3];return t};goog.vec.Vec4.subtract=function(e,o,t){t[0]=e[0]-o[0];t[1]=e[1]-o[1];t[2]=e[2]-o[2];t[3]=e[3]-o[3];return t};goog.vec.Vec4.negate=function(e,o){o[0]=-e[0];o[1]=-e[1];o[2]=-e[2];o[3]=-e[3];return o};goog.vec.Vec4.abs=function(e,o){o[0]=Math.abs(e[0]);o[1]=Math.abs(e[1]);o[2]=Math.abs(e[2]);o[3]=Math.abs(e[3]);return o};goog.vec.Vec4.scale=function(e,o,t){t[0]=e[0]*o;t[1]=e[1]*o;t[2]=e[2]*o;t[3]=e[3]*o;return t};goog.vec.Vec4.magnitudeSquared=function(e){var o=e[0],t=e[1],r=e[2],i=e[3];return o*o+t*t+r*r+i*i};goog.vec.Vec4.magnitude=function(e){var o=e[0],t=e[1],r=e[2],i=e[3];return Math.sqrt(o*o+t*t+r*r+i*i)};goog.vec.Vec4.normalize=function(e,o){var t=1/goog.vec.Vec4.magnitude(e);o[0]=e[0]*t;o[1]=e[1]*t;o[2]=e[2]*t;o[3]=e[3]*t;return o};goog.vec.Vec4.dot=function(e,o){return e[0]*o[0]+e[1]*o[1]+e[2]*o[2]+e[3]*o[3]};goog.vec.Vec4.lerp=function(e,o,t,r){var i=e[0],n=e[1],a=e[2],l=e[3];r[0]=(o[0]-i)*t+i;r[1]=(o[1]-n)*t+n;r[2]=(o[2]-a)*t+a;r[3]=(o[3]-l)*t+l;return r};goog.vec.Vec4.max=function(e,o,t){if(goog.isNumber(o)){t[0]=Math.max(e[0],o);t[1]=Math.max(e[1],o);t[2]=Math.max(e[2],o);t[3]=Math.max(e[3],o)}else{t[0]=Math.max(e[0],o[0]);t[1]=Math.max(e[1],o[1]);t[2]=Math.max(e[2],o[2]);t[3]=Math.max(e[3],o[3])}return t};goog.vec.Vec4.min=function(e,o,t){if(goog.isNumber(o)){t[0]=Math.min(e[0],o);t[1]=Math.min(e[1],o);t[2]=Math.min(e[2],o);t[3]=Math.min(e[3],o)}else{t[0]=Math.min(e[0],o[0]);t[1]=Math.min(e[1],o[1]);t[2]=Math.min(e[2],o[2]);t[3]=Math.min(e[3],o[3])}return t};goog.vec.Vec4.equals=function(e,o){return e.length==o.length&&e[0]==o[0]&&e[1]==o[1]&&e[2]==o[2]&&e[3]==o[3]};goog.provide("goog.vec.Mat4");goog.require("goog.vec");goog.require("goog.vec.Vec3");goog.require("goog.vec.Vec4");goog.vec.Mat4.Float32;goog.vec.Mat4.Float64;goog.vec.Mat4.Number;goog.vec.Mat4.AnyType;goog.vec.Mat4.Type;goog.vec.Mat4.Mat4Like;goog.vec.Mat4.createFloat32=function(){return new Float32Array(16)};goog.vec.Mat4.createFloat64=function(){return new Float64Array(16)};goog.vec.Mat4.createNumber=function(){var e=new Array(16);goog.vec.Mat4.setFromValues(e,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return e};goog.vec.Mat4.create=function(){return goog.vec.Mat4.createFloat32()};goog.vec.Mat4.createFloat32Identity=function(){var e=goog.vec.Mat4.createFloat32();e[0]=e[5]=e[10]=e[15]=1;return e};goog.vec.Mat4.createFloat64Identity=function(){var e=goog.vec.Mat4.createFloat64();e[0]=e[5]=e[10]=e[15]=1;return e};goog.vec.Mat4.createNumberIdentity=function(){var e=new Array(16);goog.vec.Mat4.setFromValues(e,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return e};goog.vec.Mat4.createIdentity=function(){return goog.vec.Mat4.createFloat32Identity()};goog.vec.Mat4.createFloat32FromArray=function(e){var o=goog.vec.Mat4.createFloat32();goog.vec.Mat4.setFromArray(o,e);return o};goog.vec.Mat4.createFloat32FromValues=function(e,o,t,r,i,n,a,l,s,g,p,u,c,d,y,h){var m=goog.vec.Mat4.createFloat32();goog.vec.Mat4.setFromValues(m,e,o,t,r,i,n,a,l,s,g,p,u,c,d,y,h);return m};goog.vec.Mat4.cloneFloat32=goog.vec.Mat4.createFloat32FromArray;goog.vec.Mat4.createFloat64FromArray=function(e){var o=goog.vec.Mat4.createFloat64();goog.vec.Mat4.setFromArray(o,e);return o};goog.vec.Mat4.createFloat64FromValues=function(e,o,t,r,i,n,a,l,s,g,p,u,c,d,y,h){var m=goog.vec.Mat4.createFloat64();goog.vec.Mat4.setFromValues(m,e,o,t,r,i,n,a,l,s,g,p,u,c,d,y,h);return m};goog.vec.Mat4.cloneFloat64=goog.vec.Mat4.createFloat64FromArray;goog.vec.Mat4.createFromArray=function(e){var o=goog.vec.Mat4.createFloat32();goog.vec.Mat4.setFromArray(o,e);return o};goog.vec.Mat4.createFromValues=function(e,o,t,r,i,n,a,l,s,g,p,u,c,d,y,h){return goog.vec.Mat4.createFloat32FromValues(e,o,t,r,i,n,a,l,s,g,p,u,c,d,y,h)};goog.vec.Mat4.clone=goog.vec.Mat4.createFromArray;goog.vec.Mat4.getElement=function(e,o,t){return e[o+t*4]};goog.vec.Mat4.setElement=function(e,o,t,r){e[o+t*4]=r;return e};goog.vec.Mat4.setFromValues=function(e,o,t,r,i,n,a,l,s,g,p,u,c,d,y,h,m){e[0]=o;e[1]=t;e[2]=r;e[3]=i;e[4]=n;e[5]=a;e[6]=l;e[7]=s;e[8]=g;e[9]=p;e[10]=u;e[11]=c;e[12]=d;e[13]=y;e[14]=h;e[15]=m;return e};goog.vec.Mat4.setFromArray=function(e,o){e[0]=o[0];e[1]=o[1];e[2]=o[2];e[3]=o[3];e[4]=o[4];e[5]=o[5];e[6]=o[6];e[7]=o[7];e[8]=o[8];e[9]=o[9];e[10]=o[10];e[11]=o[11];e[12]=o[12];e[13]=o[13];e[14]=o[14];e[15]=o[15];return e};goog.vec.Mat4.setFromRowMajorArray=function(e,o){e[0]=o[0];e[1]=o[4];e[2]=o[8];e[3]=o[12];e[4]=o[1];e[5]=o[5];e[6]=o[9];e[7]=o[13];e[8]=o[2];e[9]=o[6];e[10]=o[10];e[11]=o[14];e[12]=o[3];e[13]=o[7];e[14]=o[11];e[15]=o[15];return e};goog.vec.Mat4.setDiagonalValues=function(e,o,t,r,i){e[0]=o;e[5]=t;e[10]=r;e[15]=i;return e};goog.vec.Mat4.setDiagonal=function(e,o){e[0]=o[0];e[5]=o[1];e[10]=o[2];e[15]=o[3];return e};goog.vec.Mat4.getDiagonal=function(e,o,t){if(!t){o[0]=e[0];o[1]=e[5];o[2]=e[10];o[3]=e[15]}else{var r=t>0?4*t:-t;for(var i=0;i<4-Math.abs(t);i++){o[i]=e[r+5*i]}}return o};goog.vec.Mat4.setColumnValues=function(e,o,t,r,i,n){var a=o*4;e[a]=t;e[a+1]=r;e[a+2]=i;e[a+3]=n;return e};goog.vec.Mat4.setColumn=function(e,o,t){var r=o*4;e[r]=t[0];e[r+1]=t[1];e[r+2]=t[2];e[r+3]=t[3];return e};goog.vec.Mat4.getColumn=function(e,o,t){var r=o*4;t[0]=e[r];t[1]=e[r+1];t[2]=e[r+2];t[3]=e[r+3];return t};goog.vec.Mat4.setColumns=function(e,o,t,r,i){goog.vec.Mat4.setColumn(e,0,o);goog.vec.Mat4.setColumn(e,1,t);goog.vec.Mat4.setColumn(e,2,r);goog.vec.Mat4.setColumn(e,3,i);return e};goog.vec.Mat4.getColumns=function(e,o,t,r,i){goog.vec.Mat4.getColumn(e,0,o);goog.vec.Mat4.getColumn(e,1,t);goog.vec.Mat4.getColumn(e,2,r);goog.vec.Mat4.getColumn(e,3,i)};goog.vec.Mat4.setRowValues=function(e,o,t,r,i,n){e[o]=t;e[o+4]=r;e[o+8]=i;e[o+12]=n;return e};goog.vec.Mat4.setRow=function(e,o,t){e[o]=t[0];e[o+4]=t[1];e[o+8]=t[2];e[o+12]=t[3];return e};goog.vec.Mat4.getRow=function(e,o,t){t[0]=e[o];t[1]=e[o+4];t[2]=e[o+8];t[3]=e[o+12];return t};goog.vec.Mat4.setRows=function(e,o,t,r,i){goog.vec.Mat4.setRow(e,0,o);goog.vec.Mat4.setRow(e,1,t);goog.vec.Mat4.setRow(e,2,r);goog.vec.Mat4.setRow(e,3,i);return e};goog.vec.Mat4.getRows=function(e,o,t,r,i){goog.vec.Mat4.getRow(e,0,o);goog.vec.Mat4.getRow(e,1,t);goog.vec.Mat4.getRow(e,2,r);goog.vec.Mat4.getRow(e,3,i)};goog.vec.Mat4.makeZero=function(e){e[0]=0;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=0;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=0;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=0;return e};goog.vec.Mat4.makeIdentity=function(e){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e};goog.vec.Mat4.addMat=function(e,o,t){t[0]=e[0]+o[0];t[1]=e[1]+o[1];t[2]=e[2]+o[2];t[3]=e[3]+o[3];t[4]=e[4]+o[4];t[5]=e[5]+o[5];t[6]=e[6]+o[6];t[7]=e[7]+o[7];t[8]=e[8]+o[8];t[9]=e[9]+o[9];t[10]=e[10]+o[10];t[11]=e[11]+o[11];t[12]=e[12]+o[12];t[13]=e[13]+o[13];t[14]=e[14]+o[14];t[15]=e[15]+o[15];return t};goog.vec.Mat4.subMat=function(e,o,t){t[0]=e[0]-o[0];t[1]=e[1]-o[1];t[2]=e[2]-o[2];t[3]=e[3]-o[3];t[4]=e[4]-o[4];t[5]=e[5]-o[5];t[6]=e[6]-o[6];t[7]=e[7]-o[7];t[8]=e[8]-o[8];t[9]=e[9]-o[9];t[10]=e[10]-o[10];t[11]=e[11]-o[11];t[12]=e[12]-o[12];t[13]=e[13]-o[13];t[14]=e[14]-o[14];t[15]=e[15]-o[15];return t};goog.vec.Mat4.multScalar=function(e,o,t){t[0]=e[0]*o;t[1]=e[1]*o;t[2]=e[2]*o;t[3]=e[3]*o;t[4]=e[4]*o;t[5]=e[5]*o;t[6]=e[6]*o;t[7]=e[7]*o;t[8]=e[8]*o;t[9]=e[9]*o;t[10]=e[10]*o;t[11]=e[11]*o;t[12]=e[12]*o;t[13]=e[13]*o;t[14]=e[14]*o;t[15]=e[15]*o;return t};goog.vec.Mat4.multMat=function(e,o,t){var r=e[0],i=e[1],n=e[2],a=e[3];var l=e[4],s=e[5],g=e[6],p=e[7];var u=e[8],c=e[9],d=e[10],y=e[11];var h=e[12],m=e[13],f=e[14],v=e[15];var _=o[0],E=o[1],S=o[2],T=o[3];var P=o[4],x=o[5],b=o[6],M=o[7];var L=o[8],R=o[9],C=o[10],A=o[11];var I=o[12],O=o[13],N=o[14],w=o[15];t[0]=r*_+l*E+u*S+h*T;t[1]=i*_+s*E+c*S+m*T;t[2]=n*_+g*E+d*S+f*T;t[3]=a*_+p*E+y*S+v*T;t[4]=r*P+l*x+u*b+h*M;t[5]=i*P+s*x+c*b+m*M;t[6]=n*P+g*x+d*b+f*M;t[7]=a*P+p*x+y*b+v*M;t[8]=r*L+l*R+u*C+h*A;t[9]=i*L+s*R+c*C+m*A;t[10]=n*L+g*R+d*C+f*A;t[11]=a*L+p*R+y*C+v*A;t[12]=r*I+l*O+u*N+h*w;t[13]=i*I+s*O+c*N+m*w;t[14]=n*I+g*O+d*N+f*w;t[15]=a*I+p*O+y*N+v*w;return t};goog.vec.Mat4.transpose=function(e,o){if(o==e){var t=e[1],r=e[2],i=e[3];var n=e[6],a=e[7];var l=e[11];o[1]=e[4];o[2]=e[8];o[3]=e[12];o[4]=t;o[6]=e[9];o[7]=e[13];o[8]=r;o[9]=n;o[11]=e[14];o[12]=i;o[13]=a;o[14]=l}else{o[0]=e[0];o[1]=e[4];o[2]=e[8];o[3]=e[12];o[4]=e[1];o[5]=e[5];o[6]=e[9];o[7]=e[13];o[8]=e[2];o[9]=e[6];o[10]=e[10];o[11]=e[14];o[12]=e[3];o[13]=e[7];o[14]=e[11];o[15]=e[15]}return o};goog.vec.Mat4.determinant=function(e){var o=e[0],t=e[1],r=e[2],i=e[3];var n=e[4],a=e[5],l=e[6],s=e[7];var g=e[8],p=e[9],u=e[10],c=e[11];var d=e[12],y=e[13],h=e[14],m=e[15];var f=o*a-t*n;var v=o*l-r*n;var _=o*s-i*n;var E=t*l-r*a;var S=t*s-i*a;var T=r*s-i*l;var P=g*y-p*d;var x=g*h-u*d;var b=g*m-c*d;var M=p*h-u*y;var L=p*m-c*y;var R=u*m-c*h;return f*R-v*L+_*M+E*b-S*x+T*P};goog.vec.Mat4.invert=function(e,o){var t=e[0],r=e[1],i=e[2],n=e[3];var a=e[4],l=e[5],s=e[6],g=e[7];var p=e[8],u=e[9],c=e[10],d=e[11];var y=e[12],h=e[13],m=e[14],f=e[15];var v=t*l-r*a;var _=t*s-i*a;var E=t*g-n*a;var S=r*s-i*l;var T=r*g-n*l;var P=i*g-n*s;var x=p*h-u*y;var b=p*m-c*y;var M=p*f-d*y;var L=u*m-c*h;var R=u*f-d*h;var C=c*f-d*m;var A=v*C-_*R+E*L+S*M-T*b+P*x;if(A==0){return false}var I=1/A;o[0]=(l*C-s*R+g*L)*I;o[1]=(-r*C+i*R-n*L)*I;o[2]=(h*P-m*T+f*S)*I;o[3]=(-u*P+c*T-d*S)*I;o[4]=(-a*C+s*M-g*b)*I;o[5]=(t*C-i*M+n*b)*I;o[6]=(-y*P+m*E-f*_)*I;o[7]=(p*P-c*E+d*_)*I;o[8]=(a*R-l*M+g*x)*I;o[9]=(-t*R+r*M-n*x)*I;o[10]=(y*T-h*E+f*v)*I;o[11]=(-p*T+u*E-d*v)*I;o[12]=(-a*L+l*b-s*x)*I;o[13]=(t*L-r*b+i*x)*I;o[14]=(-y*S+h*_-m*v)*I;o[15]=(p*S-u*_+c*v)*I;return true};goog.vec.Mat4.equals=function(e,o){return e.length==o.length&&e[0]==o[0]&&e[1]==o[1]&&e[2]==o[2]&&e[3]==o[3]&&e[4]==o[4]&&e[5]==o[5]&&e[6]==o[6]&&e[7]==o[7]&&e[8]==o[8]&&e[9]==o[9]&&e[10]==o[10]&&e[11]==o[11]&&e[12]==o[12]&&e[13]==o[13]&&e[14]==o[14]&&e[15]==o[15]};goog.vec.Mat4.multVec3=function(e,o,t){var r=o[0],i=o[1],n=o[2];t[0]=r*e[0]+i*e[4]+n*e[8]+e[12];t[1]=r*e[1]+i*e[5]+n*e[9]+e[13];t[2]=r*e[2]+i*e[6]+n*e[10]+e[14];return t};goog.vec.Mat4.multVec3NoTranslate=function(e,o,t){var r=o[0],i=o[1],n=o[2];t[0]=r*e[0]+i*e[4]+n*e[8];t[1]=r*e[1]+i*e[5]+n*e[9];t[2]=r*e[2]+i*e[6]+n*e[10];return t};goog.vec.Mat4.multVec3Projective=function(e,o,t){var r=o[0],i=o[1],n=o[2];var a=1/(r*e[3]+i*e[7]+n*e[11]+e[15]);t[0]=(r*e[0]+i*e[4]+n*e[8]+e[12])*a;t[1]=(r*e[1]+i*e[5]+n*e[9]+e[13])*a;t[2]=(r*e[2]+i*e[6]+n*e[10]+e[14])*a;return t};goog.vec.Mat4.multVec4=function(e,o,t){var r=o[0],i=o[1],n=o[2],a=o[3];t[0]=r*e[0]+i*e[4]+n*e[8]+a*e[12];t[1]=r*e[1]+i*e[5]+n*e[9]+a*e[13];t[2]=r*e[2]+i*e[6]+n*e[10]+a*e[14];t[3]=r*e[3]+i*e[7]+n*e[11]+a*e[15];return t};goog.vec.Mat4.makeTranslate=function(e,o,t,r){goog.vec.Mat4.makeIdentity(e);return goog.vec.Mat4.setColumnValues(e,3,o,t,r,1)};goog.vec.Mat4.makeScale=function(e,o,t,r){goog.vec.Mat4.makeIdentity(e);return goog.vec.Mat4.setDiagonalValues(e,o,t,r,1)};goog.vec.Mat4.makeRotate=function(e,o,t,r,i){var n=Math.cos(o);var a=1-n;var l=Math.sin(o);return goog.vec.Mat4.setFromValues(e,t*t*a+n,t*r*a+i*l,t*i*a-r*l,0,t*r*a-i*l,r*r*a+n,r*i*a+t*l,0,t*i*a+r*l,r*i*a-t*l,i*i*a+n,0,0,0,0,1)};goog.vec.Mat4.makeRotateX=function(e,o){var t=Math.cos(o);var r=Math.sin(o);return goog.vec.Mat4.setFromValues(e,1,0,0,0,0,t,r,0,0,-r,t,0,0,0,0,1)};goog.vec.Mat4.makeRotateY=function(e,o){var t=Math.cos(o);var r=Math.sin(o);return goog.vec.Mat4.setFromValues(e,t,0,-r,0,0,1,0,0,r,0,t,0,0,0,0,1)};goog.vec.Mat4.makeRotateZ=function(e,o){var t=Math.cos(o);var r=Math.sin(o);return goog.vec.Mat4.setFromValues(e,t,r,0,0,-r,t,0,0,0,0,1,0,0,0,0,1)};goog.vec.Mat4.makeFrustum=function(e,o,t,r,i,n,a){var l=2*n/(t-o);var s=2*n/(i-r);var g=(t+o)/(t-o);var p=(i+r)/(i-r);var u=-(a+n)/(a-n);var c=-(2*a*n)/(a-n);return goog.vec.Mat4.setFromValues(e,l,0,0,0,0,s,0,0,g,p,u,-1,0,0,c,0)};goog.vec.Mat4.makePerspective=function(e,o,t,r,i){var n=o/2;var a=i-r;var l=Math.sin(n);if(a==0||l==0||t==0){return e}var s=Math.cos(n)/l;return goog.vec.Mat4.setFromValues(e,s/t,0,0,0,0,s,0,0,0,0,-(i+r)/a,-1,0,0,-(2*r*i)/a,0)};goog.vec.Mat4.makeOrtho=function(e,o,t,r,i,n,a){var l=2/(t-o);var s=2/(i-r);var g=-2/(a-n);var p=-(t+o)/(t-o);var u=-(i+r)/(i-r);var c=-(a+n)/(a-n);return goog.vec.Mat4.setFromValues(e,l,0,0,0,0,s,0,0,0,0,g,0,p,u,c,1)};goog.vec.Mat4.makeLookAt=function(e,o,t,r){var i=goog.vec.Mat4.tmpVec4_[0];goog.vec.Vec3.subtract(t,o,i);goog.vec.Vec3.normalize(i,i);i[3]=0;var n=goog.vec.Mat4.tmpVec4_[1];goog.vec.Vec3.cross(i,r,n);goog.vec.Vec3.normalize(n,n);n[3]=0;var a=goog.vec.Mat4.tmpVec4_[2];goog.vec.Vec3.cross(n,i,a);goog.vec.Vec3.normalize(a,a);a[3]=0;goog.vec.Vec3.negate(i,i);goog.vec.Mat4.setRow(e,0,n);goog.vec.Mat4.setRow(e,1,a);goog.vec.Mat4.setRow(e,2,i);goog.vec.Mat4.setRowValues(e,3,0,0,0,1);goog.vec.Mat4.translate(e,-o[0],-o[1],-o[2]);return e};goog.vec.Mat4.toLookAt=function(e,o,t,r){var i=goog.vec.Mat4.tmpMat4_[0];if(!goog.vec.Mat4.invert(e,i)){return false}if(o){o[0]=i[12];o[1]=i[13];o[2]=i[14]}if(t||r){if(!t){t=goog.vec.Mat4.tmpVec3_[0]}t[0]=-e[2];t[1]=-e[6];t[2]=-e[10];goog.vec.Vec3.normalize(t,t)}if(r){var n=goog.vec.Mat4.tmpVec3_[1];n[0]=e[0];n[1]=e[4];n[2]=e[8];goog.vec.Vec3.cross(n,t,r);goog.vec.Vec3.normalize(r,r)}return true};goog.vec.Mat4.makeEulerZXZ=function(e,o,t,r){var i=Math.cos(o);var n=Math.sin(o);var a=Math.cos(t);var l=Math.sin(t);var s=Math.cos(r);var g=Math.sin(r);e[0]=i*s-a*n*g;e[1]=a*i*g+s*n;e[2]=g*l;e[3]=0;e[4]=-i*g-s*a*n;e[5]=i*a*s-n*g;e[6]=s*l;e[7]=0;e[8]=l*n;e[9]=-i*l;e[10]=a;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e};goog.vec.Mat4.toEulerZXZ=function(e,o,t){var r=Math.sqrt(e[2]*e[2]+e[6]*e[6]);var i=t?-1:1;if(r>goog.vec.EPSILON){o[2]=Math.atan2(e[2]*i,e[6]*i);o[1]=Math.atan2(r*i,e[10]);o[0]=Math.atan2(e[8]*i,-e[9]*i)}else{o[0]=0;o[1]=Math.atan2(r*i,e[10]);o[2]=Math.atan2(e[1],e[0])}o[0]=(o[0]+Math.PI*2)%(Math.PI*2);o[2]=(o[2]+Math.PI*2)%(Math.PI*2);o[1]=(o[1]*i+Math.PI*2)%(Math.PI*2)*i;return o};goog.vec.Mat4.translate=function(e,o,t,r){return goog.vec.Mat4.setColumnValues(e,3,e[0]*o+e[4]*t+e[8]*r+e[12],e[1]*o+e[5]*t+e[9]*r+e[13],e[2]*o+e[6]*t+e[10]*r+e[14],e[3]*o+e[7]*t+e[11]*r+e[15])};goog.vec.Mat4.scale=function(e,o,t,r){return goog.vec.Mat4.setFromValues(e,e[0]*o,e[1]*o,e[2]*o,e[3]*o,e[4]*t,e[5]*t,e[6]*t,e[7]*t,e[8]*r,e[9]*r,e[10]*r,e[11]*r,e[12],e[13],e[14],e[15])};goog.vec.Mat4.rotate=function(e,o,t,r,i){var n=e[0],a=e[1],l=e[2],s=e[3];var g=e[4],p=e[5],u=e[6],c=e[7];var d=e[8],y=e[9],h=e[10],m=e[11];var f=e[12],v=e[13],_=e[14],E=e[15];var S=Math.cos(o);var T=Math.sin(o);var P=1-S;var x=t*t*P+S;var b=t*r*P+i*T;var M=t*i*P-r*T;var L=t*r*P-i*T;var R=r*r*P+S;var C=r*i*P+t*T;var A=t*i*P+r*T;var I=r*i*P-t*T;var O=i*i*P+S;return goog.vec.Mat4.setFromValues(e,n*x+g*b+d*M,a*x+p*b+y*M,l*x+u*b+h*M,s*x+c*b+m*M,n*L+g*R+d*C,a*L+p*R+y*C,l*L+u*R+h*C,s*L+c*R+m*C,n*A+g*I+d*O,a*A+p*I+y*O,l*A+u*I+h*O,s*A+c*I+m*O,f,v,_,E)};goog.vec.Mat4.rotateX=function(e,o){var t=e[4],r=e[5],i=e[6],n=e[7];var a=e[8],l=e[9],s=e[10],g=e[11];var p=Math.cos(o);var u=Math.sin(o);e[4]=t*p+a*u;e[5]=r*p+l*u;e[6]=i*p+s*u;e[7]=n*p+g*u;e[8]=t*-u+a*p;e[9]=r*-u+l*p;e[10]=i*-u+s*p;e[11]=n*-u+g*p;return e};goog.vec.Mat4.rotateY=function(e,o){var t=e[0],r=e[1],i=e[2],n=e[3];var a=e[8],l=e[9],s=e[10],g=e[11];var p=Math.cos(o);var u=Math.sin(o);e[0]=t*p+a*-u;e[1]=r*p+l*-u;e[2]=i*p+s*-u;e[3]=n*p+g*-u;e[8]=t*u+a*p;e[9]=r*u+l*p;e[10]=i*u+s*p;e[11]=n*u+g*p;return e};goog.vec.Mat4.rotateZ=function(e,o){var t=e[0],r=e[1],i=e[2],n=e[3];var a=e[4],l=e[5],s=e[6],g=e[7];var p=Math.cos(o);var u=Math.sin(o);e[0]=t*p+a*u;e[1]=r*p+l*u;e[2]=i*p+s*u;e[3]=n*p+g*u;e[4]=t*-u+a*p;e[5]=r*-u+l*p;e[6]=i*-u+s*p;e[7]=n*-u+g*p;return e};goog.vec.Mat4.getTranslation=function(e,o){o[0]=e[12];o[1]=e[13];o[2]=e[14];return o};goog.vec.Mat4.tmpVec3_=[goog.vec.Vec3.createFloat64(),goog.vec.Vec3.createFloat64()];goog.vec.Mat4.tmpVec4_=[goog.vec.Vec4.createFloat64(),goog.vec.Vec4.createFloat64(),goog.vec.Vec4.createFloat64()];goog.vec.Mat4.tmpMat4_=[goog.vec.Mat4.createFloat64()];goog.provide("ol.TransformFunction");ol.TransformFunction;goog.provide("ol.Extent");goog.provide("ol.extent");goog.provide("ol.extent.Corner");goog.provide("ol.extent.Relationship");goog.require("goog.asserts");goog.require("goog.vec.Mat4");goog.require("ol.Coordinate");goog.require("ol.Size");goog.require("ol.TransformFunction");ol.Extent;ol.extent.Corner={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};ol.extent.Relationship={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};ol.extent.boundingExtent=function(e){var o=ol.extent.createEmpty();for(var t=0,r=e.length;t<r;++t){ol.extent.extendCoordinate(o,e[t])}return o};ol.extent.boundingExtentXYs_=function(e,o,t){goog.asserts.assert(e.length>0,"xs length should be larger than 0");goog.asserts.assert(o.length>0,"ys length should be larger than 0");var r=Math.min.apply(null,e);var i=Math.min.apply(null,o);var n=Math.max.apply(null,e);var a=Math.max.apply(null,o);return ol.extent.createOrUpdate(r,i,n,a,t)};ol.extent.buffer=function(e,o,t){if(t){t[0]=e[0]-o;t[1]=e[1]-o;t[2]=e[2]+o;t[3]=e[3]+o;return t}else{return[e[0]-o,e[1]-o,e[2]+o,e[3]+o]}};ol.extent.clone=function(e,o){if(o){o[0]=e[0];o[1]=e[1];o[2]=e[2];o[3]=e[3];return o}else{return e.slice()}};ol.extent.closestSquaredDistanceXY=function(e,o,t){var r,i;if(o<e[0]){r=e[0]-o}else if(e[2]<o){r=o-e[2]}else{r=0}if(t<e[1]){i=e[1]-t}else if(e[3]<t){i=t-e[3]}else{i=0}return r*r+i*i};ol.extent.containsCoordinate=function(e,o){return ol.extent.containsXY(e,o[0],o[1])};ol.extent.containsExtent=function(e,o){return e[0]<=o[0]&&o[2]<=e[2]&&e[1]<=o[1]&&o[3]<=e[3]};ol.extent.containsXY=function(e,o,t){return e[0]<=o&&o<=e[2]&&e[1]<=t&&t<=e[3]};ol.extent.coordinateRelationship=function(e,o){var t=e[0];var r=e[1];var i=e[2];var n=e[3];var a=o[0];var l=o[1];var s=ol.extent.Relationship.UNKNOWN;if(a<t){s=s|ol.extent.Relationship.LEFT}else if(a>i){s=s|ol.extent.Relationship.RIGHT}if(l<r){s=s|ol.extent.Relationship.BELOW}else if(l>n){s=s|ol.extent.Relationship.ABOVE}if(s===ol.extent.Relationship.UNKNOWN){s=ol.extent.Relationship.INTERSECTING}return s};ol.extent.createEmpty=function(){return[Infinity,Infinity,-Infinity,-Infinity]};ol.extent.createOrUpdate=function(e,o,t,r,i){if(i){i[0]=e;i[1]=o;i[2]=t;i[3]=r;return i}else{return[e,o,t,r]}};ol.extent.createOrUpdateEmpty=function(e){return ol.extent.createOrUpdate(Infinity,Infinity,-Infinity,-Infinity,e)};ol.extent.createOrUpdateFromCoordinate=function(e,o){var t=e[0];var r=e[1];return ol.extent.createOrUpdate(t,r,t,r,o)};ol.extent.createOrUpdateFromCoordinates=function(e,o){var t=ol.extent.createOrUpdateEmpty(o);return ol.extent.extendCoordinates(t,e)};ol.extent.createOrUpdateFromFlatCoordinates=function(e,o,t,r,i){var n=ol.extent.createOrUpdateEmpty(i);return ol.extent.extendFlatCoordinates(n,e,o,t,r)};ol.extent.createOrUpdateFromRings=function(e,o){var t=ol.extent.createOrUpdateEmpty(o);return ol.extent.extendRings(t,e)};ol.extent.empty=function(e){e[0]=e[1]=Infinity;e[2]=e[3]=-Infinity;return e};ol.extent.equals=function(e,o){return e[0]==o[0]&&e[2]==o[2]&&e[1]==o[1]&&e[3]==o[3]};ol.extent.extend=function(e,o){if(o[0]<e[0]){e[0]=o[0]}if(o[2]>e[2]){e[2]=o[2]}if(o[1]<e[1]){e[1]=o[1]}if(o[3]>e[3]){e[3]=o[3]}return e};ol.extent.extendCoordinate=function(e,o){if(o[0]<e[0]){e[0]=o[0]}if(o[0]>e[2]){e[2]=o[0]}if(o[1]<e[1]){e[1]=o[1]}if(o[1]>e[3]){e[3]=o[1]}};ol.extent.extendCoordinates=function(e,o){var t,r;for(t=0,r=o.length;t<r;++t){ol.extent.extendCoordinate(e,o[t])}return e};ol.extent.extendFlatCoordinates=function(e,o,t,r,i){for(;t<r;t+=i){ol.extent.extendXY(e,o[t],o[t+1])}return e};ol.extent.extendRings=function(e,o){var t,r;for(t=0,r=o.length;t<r;++t){ol.extent.extendCoordinates(e,o[t])}return e};ol.extent.extendXY=function(e,o,t){e[0]=Math.min(e[0],o);e[1]=Math.min(e[1],t);e[2]=Math.max(e[2],o);e[3]=Math.max(e[3],t)};ol.extent.forEachCorner=function(e,o,t){var r;r=o.call(t,ol.extent.getBottomLeft(e));if(r){return r}r=o.call(t,ol.extent.getBottomRight(e));if(r){return r}r=o.call(t,ol.extent.getTopRight(e));if(r){return r}r=o.call(t,ol.extent.getTopLeft(e));if(r){return r}return false};ol.extent.getArea=function(e){var o=0;if(!ol.extent.isEmpty(e)){o=ol.extent.getWidth(e)*ol.extent.getHeight(e)}return o};ol.extent.getBottomLeft=function(e){return[e[0],e[1]]};ol.extent.getBottomRight=function(e){return[e[2],e[1]]};ol.extent.getCenter=function(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]};ol.extent.getCorner=function(e,o){var t;if(o===ol.extent.Corner.BOTTOM_LEFT){t=ol.extent.getBottomLeft(e)}else if(o===ol.extent.Corner.BOTTOM_RIGHT){t=ol.extent.getBottomRight(e)}else if(o===ol.extent.Corner.TOP_LEFT){t=ol.extent.getTopLeft(e)}else if(o===ol.extent.Corner.TOP_RIGHT){t=ol.extent.getTopRight(e)}else{goog.asserts.fail("Invalid corner: %s",o)}goog.asserts.assert(t,"coordinate should be defined");return t};ol.extent.getEnlargedArea=function(e,o){var t=Math.min(e[0],o[0]);var r=Math.min(e[1],o[1]);var i=Math.max(e[2],o[2]);var n=Math.max(e[3],o[3]);return(i-t)*(n-r)};ol.extent.getForViewAndSize=function(e,o,t,r,i){var n=o*r[0]/2;var a=o*r[1]/2;var l=Math.cos(t);var s=Math.sin(t);var g=n*l;var p=n*s;var u=a*l;var c=a*s;var d=e[0];var y=e[1];var h=d-g+c;var m=d-g-c;var f=d+g-c;var v=d+g+c;var _=y-p-u;var E=y-p+u;var S=y+p+u
;var T=y+p-u;return ol.extent.createOrUpdate(Math.min(h,m,f,v),Math.min(_,E,S,T),Math.max(h,m,f,v),Math.max(_,E,S,T),i)};ol.extent.getHeight=function(e){return e[3]-e[1]};ol.extent.getIntersectionArea=function(e,o){var t=ol.extent.getIntersection(e,o);return ol.extent.getArea(t)};ol.extent.getIntersection=function(e,o,t){var r=t?t:ol.extent.createEmpty();if(ol.extent.intersects(e,o)){if(e[0]>o[0]){r[0]=e[0]}else{r[0]=o[0]}if(e[1]>o[1]){r[1]=e[1]}else{r[1]=o[1]}if(e[2]<o[2]){r[2]=e[2]}else{r[2]=o[2]}if(e[3]<o[3]){r[3]=e[3]}else{r[3]=o[3]}}return r};ol.extent.getMargin=function(e){return ol.extent.getWidth(e)+ol.extent.getHeight(e)};ol.extent.getSize=function(e){return[e[2]-e[0],e[3]-e[1]]};ol.extent.getTopLeft=function(e){return[e[0],e[3]]};ol.extent.getTopRight=function(e){return[e[2],e[3]]};ol.extent.getWidth=function(e){return e[2]-e[0]};ol.extent.intersects=function(e,o){return e[0]<=o[2]&&e[2]>=o[0]&&e[1]<=o[3]&&e[3]>=o[1]};ol.extent.isEmpty=function(e){return e[2]<e[0]||e[3]<e[1]};ol.extent.isInfinite=function(e){return e[0]==-Infinity||e[1]==-Infinity||e[2]==Infinity||e[3]==Infinity};ol.extent.normalize=function(e,o){return[(o[0]-e[0])/(e[2]-e[0]),(o[1]-e[1])/(e[3]-e[1])]};ol.extent.returnOrUpdate=function(e,o){if(o){o[0]=e[0];o[1]=e[1];o[2]=e[2];o[3]=e[3];return o}else{return e}};ol.extent.scaleFromCenter=function(e,o){var t=(e[2]-e[0])/2*(o-1);var r=(e[3]-e[1])/2*(o-1);e[0]-=t;e[2]+=t;e[1]-=r;e[3]+=r};ol.extent.intersectsSegment=function(e,o,t){var r=false;var i=ol.extent.coordinateRelationship(e,o);var n=ol.extent.coordinateRelationship(e,t);if(i===ol.extent.Relationship.INTERSECTING||n===ol.extent.Relationship.INTERSECTING){r=true}else{var a=e[0];var l=e[1];var s=e[2];var g=e[3];var p=o[0];var u=o[1];var c=t[0];var d=t[1];var y=(d-u)/(c-p);var h,m;if(!!(n&ol.extent.Relationship.ABOVE)&&!(i&ol.extent.Relationship.ABOVE)){h=c-(d-g)/y;r=h>=a&&h<=s}if(!r&&!!(n&ol.extent.Relationship.RIGHT)&&!(i&ol.extent.Relationship.RIGHT)){m=d-(c-s)*y;r=m>=l&&m<=g}if(!r&&!!(n&ol.extent.Relationship.BELOW)&&!(i&ol.extent.Relationship.BELOW)){h=c-(d-l)/y;r=h>=a&&h<=s}if(!r&&!!(n&ol.extent.Relationship.LEFT)&&!(i&ol.extent.Relationship.LEFT)){m=d-(c-a)*y;r=m>=l&&m<=g}}return r};ol.extent.touches=function(e,o){var t=ol.extent.intersects(e,o);return t&&(e[0]==o[2]||e[2]==o[0]||e[1]==o[3]||e[3]==o[1])};ol.extent.applyTransform=function(e,o,t){var r=[e[0],e[1],e[0],e[3],e[2],e[1],e[2],e[3]];o(r,r,2);var i=[r[0],r[2],r[4],r[6]];var n=[r[1],r[3],r[5],r[7]];return ol.extent.boundingExtentXYs_(i,n,t)};ol.extent.transform2D=function(e,o,t){var r=t?t:[];var i=goog.vec.Mat4.getElement(o,0,0);var n=goog.vec.Mat4.getElement(o,1,0);var a=goog.vec.Mat4.getElement(o,0,1);var l=goog.vec.Mat4.getElement(o,1,1);var s=goog.vec.Mat4.getElement(o,0,3);var g=goog.vec.Mat4.getElement(o,1,3);var p=[0,2,0,2];var u=[1,1,3,3];var c=[];var d=[];var y,h,m;for(y=0;y<4;++y){h=e[p[y]];m=e[u[y]];c[y]=i*h+a*m+s;d[y]=n*h+l*m+g}r[0]=Math.min.apply(null,c);r[1]=Math.min.apply(null,d);r[2]=Math.max.apply(null,c);r[3]=Math.max.apply(null,d);return r};goog.provide("goog.functions");goog.functions.constant=function(e){return function(){return e}};goog.functions.FALSE=goog.functions.constant(false);goog.functions.TRUE=goog.functions.constant(true);goog.functions.NULL=goog.functions.constant(null);goog.functions.identity=function(e,o){return e};goog.functions.error=function(e){return function(){throw Error(e)}};goog.functions.fail=function(e){return function(){throw e}};goog.functions.lock=function(e,o){o=o||0;return function(){return e.apply(this,Array.prototype.slice.call(arguments,0,o))}};goog.functions.nth=function(e){return function(){return arguments[e]}};goog.functions.partialRight=function(e,o){var t=Array.prototype.slice.call(arguments,1);return function(){var o=Array.prototype.slice.call(arguments);o.push.apply(o,t);return e.apply(this,o)}};goog.functions.withReturnValue=function(e,o){return goog.functions.sequence(e,goog.functions.constant(o))};goog.functions.equalTo=function(e,o){return function(t){return o?e==t:e===t}};goog.functions.compose=function(e,o){var t=arguments;var r=t.length;return function(){var e;if(r){e=t[r-1].apply(this,arguments)}for(var o=r-2;o>=0;o--){e=t[o].call(this,e)}return e}};goog.functions.sequence=function(e){var o=arguments;var t=o.length;return function(){var e;for(var r=0;r<t;r++){e=o[r].apply(this,arguments)}return e}};goog.functions.and=function(e){var o=arguments;var t=o.length;return function(){for(var e=0;e<t;e++){if(!o[e].apply(this,arguments)){return false}}return true}};goog.functions.or=function(e){var o=arguments;var t=o.length;return function(){for(var e=0;e<t;e++){if(o[e].apply(this,arguments)){return true}}return false}};goog.functions.not=function(e){return function(){return!e.apply(this,arguments)}};goog.functions.create=function(e,o){var t=function(){};t.prototype=e.prototype;var r=new t;e.apply(r,Array.prototype.slice.call(arguments,1));return r};goog.define("goog.functions.CACHE_RETURN_VALUE",true);goog.functions.cacheReturnValue=function(e){var o=false;var t;return function(){if(!goog.functions.CACHE_RETURN_VALUE){return e()}if(!o){t=e();o=true}return t}};goog.functions.once=function(e){var o=e;return function(){if(o){var e=o;o=null;e()}}};goog.functions.debounce=function(e,o,t){if(t){e=goog.bind(e,t)}var r=null;return function(t){goog.global.clearTimeout(r);var i=arguments;r=goog.global.setTimeout(function(){e.apply(null,i)},o)}};goog.functions.throttle=function(e,o,t){if(t){e=goog.bind(e,t)}var r=null;var i=false;var n=[];var a=function(){r=null;if(i){i=false;l()}};var l=function(){r=goog.global.setTimeout(a,o);e.apply(null,n)};return function(e){n=arguments;if(!r){l()}else{i=true}}};goog.provide("ol.Sphere");goog.require("ol.math");ol.Sphere=function(e){this.radius=e};ol.Sphere.prototype.geodesicArea=function(e){var o=0,t=e.length;var r=e[t-1][0];var i=e[t-1][1];for(var n=0;n<t;n++){var a=e[n][0],l=e[n][1];o+=ol.math.toRadians(a-r)*(2+Math.sin(ol.math.toRadians(i))+Math.sin(ol.math.toRadians(l)));r=a;i=l}return o*this.radius*this.radius/2};ol.Sphere.prototype.haversineDistance=function(e,o){var t=ol.math.toRadians(e[1]);var r=ol.math.toRadians(o[1]);var i=(r-t)/2;var n=ol.math.toRadians(o[0]-e[0])/2;var a=Math.sin(i)*Math.sin(i)+Math.sin(n)*Math.sin(n)*Math.cos(t)*Math.cos(r);return 2*this.radius*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))};ol.Sphere.prototype.offset=function(e,o,t){var r=ol.math.toRadians(e[1]);var i=ol.math.toRadians(e[0]);var n=o/this.radius;var a=Math.asin(Math.sin(r)*Math.cos(n)+Math.cos(r)*Math.sin(n)*Math.cos(t));var l=i+Math.atan2(Math.sin(t)*Math.sin(n)*Math.cos(r),Math.cos(n)-Math.sin(r)*Math.sin(a));return[ol.math.toDegrees(l),ol.math.toDegrees(a)]};goog.provide("ol.sphere.NORMAL");goog.require("ol.Sphere");ol.sphere.NORMAL=new ol.Sphere(6370997);goog.provide("ol.proj");goog.provide("ol.proj.METERS_PER_UNIT");goog.provide("ol.proj.Projection");goog.provide("ol.proj.ProjectionLike");goog.provide("ol.proj.Units");goog.require("goog.asserts");goog.require("ol");goog.require("ol.Extent");goog.require("ol.TransformFunction");goog.require("ol.extent");goog.require("ol.object");goog.require("ol.sphere.NORMAL");ol.proj.ProjectionLike;ol.proj.Units={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"};ol.proj.METERS_PER_UNIT={};ol.proj.METERS_PER_UNIT[ol.proj.Units.DEGREES]=2*Math.PI*ol.sphere.NORMAL.radius/360;ol.proj.METERS_PER_UNIT[ol.proj.Units.FEET]=.3048;ol.proj.METERS_PER_UNIT[ol.proj.Units.METERS]=1;ol.proj.METERS_PER_UNIT[ol.proj.Units.USFEET]=1200/3937;ol.proj.Projection=function(e){this.code_=e.code;this.units_=e.units;this.extent_=e.extent!==undefined?e.extent:null;this.worldExtent_=e.worldExtent!==undefined?e.worldExtent:null;this.axisOrientation_=e.axisOrientation!==undefined?e.axisOrientation:"enu";this.global_=e.global!==undefined?e.global:false;this.canWrapX_=!!(this.global_&&this.extent_);this.getPointResolutionFunc_=e.getPointResolution!==undefined?e.getPointResolution:this.getPointResolution_;this.defaultTileGrid_=null;this.metersPerUnit_=e.metersPerUnit;var o=ol.proj.projections_;var t=e.code;goog.asserts.assert(t!==undefined,'Option "code" is required for constructing instance');if(ol.ENABLE_PROJ4JS){var r=ol.proj.proj4_||goog.global["proj4"];if(typeof r=="function"&&o[t]===undefined){var i=r.defs(t);if(i!==undefined){if(i.axis!==undefined&&e.axisOrientation===undefined){this.axisOrientation_=i.axis}if(e.metersPerUnit===undefined){this.metersPerUnit_=i.to_meter}if(e.units===undefined){this.units_=i.units}var n,a,l,s;for(n in o){a=r.defs(n);if(a!==undefined){l=ol.proj.get(n);if(a===i){ol.proj.addEquivalentProjections([l,this])}else{s=r(n,t);ol.proj.addCoordinateTransforms(l,this,s.forward,s.inverse)}}}}}}};ol.proj.Projection.prototype.canWrapX=function(){return this.canWrapX_};ol.proj.Projection.prototype.getCode=function(){return this.code_};ol.proj.Projection.prototype.getExtent=function(){return this.extent_};ol.proj.Projection.prototype.getUnits=function(){return this.units_};ol.proj.Projection.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||ol.proj.METERS_PER_UNIT[this.units_]};ol.proj.Projection.prototype.getWorldExtent=function(){return this.worldExtent_};ol.proj.Projection.prototype.getAxisOrientation=function(){return this.axisOrientation_};ol.proj.Projection.prototype.isGlobal=function(){return this.global_};ol.proj.Projection.prototype.setGlobal=function(e){this.global_=e;this.canWrapX_=!!(e&&this.extent_)};ol.proj.Projection.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_};ol.proj.Projection.prototype.setDefaultTileGrid=function(e){this.defaultTileGrid_=e};ol.proj.Projection.prototype.setExtent=function(e){this.extent_=e;this.canWrapX_=!!(this.global_&&e)};ol.proj.Projection.prototype.setWorldExtent=function(e){this.worldExtent_=e};ol.proj.Projection.prototype.setGetPointResolution=function(e){this.getPointResolutionFunc_=e};ol.proj.Projection.prototype.getPointResolution_=function(e,o){var t=this.getUnits();if(t==ol.proj.Units.DEGREES){return e}else{var r=ol.proj.getTransformFromProjections(this,ol.proj.get("EPSG:4326"));var i=[o[0]-e/2,o[1],o[0]+e/2,o[1],o[0],o[1]-e/2,o[0],o[1]+e/2];i=r(i,i,2);var n=ol.sphere.NORMAL.haversineDistance(i.slice(0,2),i.slice(2,4));var a=ol.sphere.NORMAL.haversineDistance(i.slice(4,6),i.slice(6,8));var l=(n+a)/2;var s=this.getMetersPerUnit();if(s!==undefined){l/=s}return l}};ol.proj.Projection.prototype.getPointResolution=function(e,o){return this.getPointResolutionFunc_(e,o)};ol.proj.projections_={};ol.proj.transforms_={};ol.proj.proj4_=null;if(ol.ENABLE_PROJ4JS){ol.proj.setProj4=function(e){goog.asserts.assert(typeof e=="function","proj4 argument should be a function");ol.proj.proj4_=e}}ol.proj.addEquivalentProjections=function(e){ol.proj.addProjections(e);e.forEach(function(o){e.forEach(function(e){if(o!==e){ol.proj.addTransform(o,e,ol.proj.cloneTransform)}})})};ol.proj.addEquivalentTransforms=function(e,o,t,r){e.forEach(function(e){o.forEach(function(o){ol.proj.addTransform(e,o,t);ol.proj.addTransform(o,e,r)})})};ol.proj.addProjection=function(e){ol.proj.projections_[e.getCode()]=e;ol.proj.addTransform(e,e,ol.proj.cloneTransform)};ol.proj.addProjections=function(e){var o=[];e.forEach(function(e){o.push(ol.proj.addProjection(e))})};ol.proj.clearAllProjections=function(){ol.proj.projections_={};ol.proj.transforms_={}};ol.proj.createProjection=function(e,o){if(!e){return ol.proj.get(o)}else if(typeof e==="string"){return ol.proj.get(e)}else{goog.asserts.assertInstanceof(e,ol.proj.Projection,"projection should be an ol.proj.Projection");return e}};ol.proj.addTransform=function(e,o,t){var r=e.getCode();var i=o.getCode();var n=ol.proj.transforms_;if(!(r in n)){n[r]={}}n[r][i]=t};ol.proj.addCoordinateTransforms=function(e,o,t,r){var i=ol.proj.get(e);var n=ol.proj.get(o);ol.proj.addTransform(i,n,ol.proj.createTransformFromCoordinateTransform(t));ol.proj.addTransform(n,i,ol.proj.createTransformFromCoordinateTransform(r))};ol.proj.createTransformFromCoordinateTransform=function(e){return function(o,t,r){var i=o.length;var n=r!==undefined?r:2;var a=t!==undefined?t:new Array(i);var l,s,g;for(s=0;s<i;s+=n){l=e([o[s],o[s+1]]);a[s]=l[0];a[s+1]=l[1];for(g=n-1;g>=2;--g){a[s+g]=o[s+g]}}return a}};ol.proj.removeTransform=function(e,o){var t=e.getCode();var r=o.getCode();var i=ol.proj.transforms_;goog.asserts.assert(t in i,"sourceCode should be in transforms");goog.asserts.assert(r in i[t],"destinationCode should be in transforms of sourceCode");var n=i[t][r];delete i[t][r];if(ol.object.isEmpty(i[t])){delete i[t]}return n};ol.proj.fromLonLat=function(e,o){return ol.proj.transform(e,"EPSG:4326",o!==undefined?o:"EPSG:3857")};ol.proj.toLonLat=function(e,o){return ol.proj.transform(e,o!==undefined?o:"EPSG:3857","EPSG:4326")};ol.proj.get=function(e){var o;if(e instanceof ol.proj.Projection){o=e}else if(typeof e==="string"){var t=e;o=ol.proj.projections_[t];if(ol.ENABLE_PROJ4JS){var r=ol.proj.proj4_||goog.global["proj4"];if(o===undefined&&typeof r=="function"&&r.defs(t)!==undefined){o=new ol.proj.Projection({code:t});ol.proj.addProjection(o)}}}else{o=null}return o};ol.proj.equivalent=function(e,o){if(e===o){return true}var t=e.getUnits()===o.getUnits();if(e.getCode()===o.getCode()){return t}else{var r=ol.proj.getTransformFromProjections(e,o);return r===ol.proj.cloneTransform&&t}};ol.proj.getTransform=function(e,o){var t=ol.proj.get(e);var r=ol.proj.get(o);return ol.proj.getTransformFromProjections(t,r)};ol.proj.getTransformFromProjections=function(e,o){var t=ol.proj.transforms_;var r=e.getCode();var i=o.getCode();var n;if(r in t&&i in t[r]){n=t[r][i]}if(n===undefined){goog.asserts.assert(n!==undefined,"transform should be defined");n=ol.proj.identityTransform}return n};ol.proj.identityTransform=function(e,o,t){if(o!==undefined&&e!==o){goog.asserts.fail("This should not be used internally.");for(var r=0,i=e.length;r<i;++r){o[r]=e[r]}e=o}return e};ol.proj.cloneTransform=function(e,o,t){var r;if(o!==undefined){for(var i=0,n=e.length;i<n;++i){o[i]=e[i]}r=o}else{r=e.slice()}return r};ol.proj.transform=function(e,o,t){var r=ol.proj.getTransform(o,t);return r(e,undefined,e.length)};ol.proj.transformExtent=function(e,o,t){var r=ol.proj.getTransform(o,t);return ol.extent.applyTransform(e,r)};ol.proj.transformWithProjections=function(e,o,t){var r=ol.proj.getTransformFromProjections(o,t);return r(e)};goog.provide("ol.geom.Geometry");goog.provide("ol.geom.GeometryLayout");goog.provide("ol.geom.GeometryType");goog.require("goog.asserts");goog.require("goog.functions");goog.require("ol.Object");goog.require("ol.extent");goog.require("ol.proj");goog.require("ol.proj.Units");ol.geom.GeometryType={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};ol.geom.GeometryLayout={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};ol.geom.Geometry=function(){goog.base(this);this.extent_=ol.extent.createEmpty();this.extentRevision_=-1;this.simplifiedGeometryCache={};this.simplifiedGeometryMaxMinSquaredTolerance=0;this.simplifiedGeometryRevision=0};goog.inherits(ol.geom.Geometry,ol.Object);ol.geom.Geometry.prototype.clone=goog.abstractMethod;ol.geom.Geometry.prototype.closestPointXY=goog.abstractMethod;ol.geom.Geometry.prototype.getClosestPoint=function(e,o){var t=o?o:[NaN,NaN];this.closestPointXY(e[0],e[1],t,Infinity);return t};ol.geom.Geometry.prototype.containsCoordinate=function(e){return this.containsXY(e[0],e[1])};ol.geom.Geometry.prototype.computeExtent=goog.abstractMethod;ol.geom.Geometry.prototype.containsXY=goog.functions.FALSE;ol.geom.Geometry.prototype.getExtent=function(e){if(this.extentRevision_!=this.getRevision()){this.extent_=this.computeExtent(this.extent_);this.extentRevision_=this.getRevision()}return ol.extent.returnOrUpdate(this.extent_,e)};ol.geom.Geometry.prototype.simplify=function(e){return this.getSimplifiedGeometry(e*e)};ol.geom.Geometry.prototype.getSimplifiedGeometry=goog.abstractMethod;ol.geom.Geometry.prototype.getType=goog.abstractMethod;ol.geom.Geometry.prototype.applyTransform=goog.abstractMethod;ol.geom.Geometry.prototype.intersectsExtent=goog.abstractMethod;ol.geom.Geometry.prototype.translate=goog.abstractMethod;ol.geom.Geometry.prototype.transform=function(e,o){goog.asserts.assert(ol.proj.get(e).getUnits()!==ol.proj.Units.TILE_PIXELS&&ol.proj.get(o).getUnits()!==ol.proj.Units.TILE_PIXELS,"cannot transform geometries with TILE_PIXELS units");this.applyTransform(ol.proj.getTransform(e,o));return this};goog.provide("ol.geom.flat.transform");goog.require("goog.vec.Mat4");ol.geom.flat.transform.transform2D=function(e,o,t,r,i,n){var a=goog.vec.Mat4.getElement(i,0,0);var l=goog.vec.Mat4.getElement(i,1,0);var s=goog.vec.Mat4.getElement(i,0,1);var g=goog.vec.Mat4.getElement(i,1,1);var p=goog.vec.Mat4.getElement(i,0,3);var u=goog.vec.Mat4.getElement(i,1,3);var c=n?n:[];var d=0;var y;for(y=o;y<t;y+=r){var h=e[y];var m=e[y+1];c[d++]=a*h+s*m+p;c[d++]=l*h+g*m+u}if(n&&c.length!=d){c.length=d}return c};ol.geom.flat.transform.translate=function(e,o,t,r,i,n,a){var l=a?a:[];var s=0;var g,p;for(g=o;g<t;g+=r){l[s++]=e[g]+i;l[s++]=e[g+1]+n;for(p=g+2;p<g+r;++p){l[s++]=e[p]}}if(a&&l.length!=s){l.length=s}return l};goog.provide("ol.geom.SimpleGeometry");goog.require("goog.asserts");goog.require("goog.functions");goog.require("ol.extent");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.flat.transform");goog.require("ol.object");ol.geom.SimpleGeometry=function(){goog.base(this);this.layout=ol.geom.GeometryLayout.XY;this.stride=2;this.flatCoordinates=null};goog.inherits(ol.geom.SimpleGeometry,ol.geom.Geometry);ol.geom.SimpleGeometry.getLayoutForStride_=function(e){if(e==2){return ol.geom.GeometryLayout.XY}else if(e==3){return ol.geom.GeometryLayout.XYZ}else if(e==4){return ol.geom.GeometryLayout.XYZM}else{goog.asserts.fail("unsupported stride: "+e)}};ol.geom.SimpleGeometry.getStrideForLayout=function(e){if(e==ol.geom.GeometryLayout.XY){return 2}else if(e==ol.geom.GeometryLayout.XYZ){return 3}else if(e==ol.geom.GeometryLayout.XYM){return 3}else if(e==ol.geom.GeometryLayout.XYZM){return 4}else{goog.asserts.fail("unsupported layout: "+e)}};ol.geom.SimpleGeometry.prototype.containsXY=goog.functions.FALSE;ol.geom.SimpleGeometry.prototype.computeExtent=function(e){return ol.extent.createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)};ol.geom.SimpleGeometry.prototype.getCoordinates=goog.abstractMethod;ol.geom.SimpleGeometry.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)};ol.geom.SimpleGeometry.prototype.getFlatCoordinates=function(){return this.flatCoordinates};ol.geom.SimpleGeometry.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)};ol.geom.SimpleGeometry.prototype.getLayout=function(){return this.layout};ol.geom.SimpleGeometry.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!=this.getRevision()){ol.object.clear(this.simplifiedGeometryCache);this.simplifiedGeometryMaxMinSquaredTolerance=0;this.simplifiedGeometryRevision=this.getRevision()}if(e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance){return this}var o=e.toString();if(this.simplifiedGeometryCache.hasOwnProperty(o)){return this.simplifiedGeometryCache[o]}else{var t=this.getSimplifiedGeometryInternal(e);var r=t.getFlatCoordinates();if(r.length<this.flatCoordinates.length){this.simplifiedGeometryCache[o]=t;return t}else{this.simplifiedGeometryMaxMinSquaredTolerance=e;return this}}};ol.geom.SimpleGeometry.prototype.getSimplifiedGeometryInternal=function(e){return this};ol.geom.SimpleGeometry.prototype.getStride=function(){return this.stride};ol.geom.SimpleGeometry.prototype.setFlatCoordinatesInternal=function(e,o){this.stride=ol.geom.SimpleGeometry.getStrideForLayout(e);this.layout=e;this.flatCoordinates=o};ol.geom.SimpleGeometry.prototype.setCoordinates=goog.abstractMethod;ol.geom.SimpleGeometry.prototype.setLayout=function(e,o,t){var r;if(e){r=ol.geom.SimpleGeometry.getStrideForLayout(e)}else{var i;for(i=0;i<t;++i){if(o.length===0){this.layout=ol.geom.GeometryLayout.XY;this.stride=2;return}else{o=o[0]}}r=o.length;e=ol.geom.SimpleGeometry.getLayoutForStride_(r)}this.layout=e;this.stride=r};ol.geom.SimpleGeometry.prototype.applyTransform=function(e){if(this.flatCoordinates){e(this.flatCoordinates,this.flatCoordinates,this.stride);this.changed()}};ol.geom.SimpleGeometry.prototype.translate=function(e,o){var t=this.getFlatCoordinates();if(t){var r=this.getStride();ol.geom.flat.transform.translate(t,0,t.length,r,e,o,t);this.changed()}};ol.geom.transformSimpleGeometry2D=function(e,o,t){var r=e.getFlatCoordinates();if(!r){return null}else{var i=e.getStride();return ol.geom.flat.transform.transform2D(r,0,r.length,i,o,t)}};goog.provide("ol.geom.flat.area");ol.geom.flat.area.linearRing=function(e,o,t,r){var i=0;var n=e[t-r];var a=e[t-r+1];for(;o<t;o+=r){var l=e[o];var s=e[o+1];i+=a*l-n*s;n=l;a=s}return i/2};ol.geom.flat.area.linearRings=function(e,o,t,r){var i=0;var n,a;for(n=0,a=t.length;n<a;++n){var l=t[n];i+=ol.geom.flat.area.linearRing(e,o,l,r);o=l}return i};ol.geom.flat.area.linearRingss=function(e,o,t,r){var i=0;var n,a;for(n=0,a=t.length;n<a;++n){var l=t[n];i+=ol.geom.flat.area.linearRings(e,o,l,r);o=l[l.length-1]}return i};goog.provide("ol.geom.flat.closest");goog.require("goog.asserts");goog.require("goog.math");goog.require("ol.math");ol.geom.flat.closest.point=function(e,o,t,r,i,n,a){var l=e[o];var s=e[o+1];var g=e[t]-l;var p=e[t+1]-s;var u,c;if(g===0&&p===0){c=o}else{var d=((i-l)*g+(n-s)*p)/(g*g+p*p);if(d>1){c=t}else if(d>0){for(u=0;u<r;++u){a[u]=goog.math.lerp(e[o+u],e[t+u],d)}a.length=r;return}else{c=o}}for(u=0;u<r;++u){a[u]=e[c+u]}a.length=r};ol.geom.flat.closest.getMaxSquaredDelta=function(e,o,t,r,i){var n=e[o];var a=e[o+1];for(o+=r;o<t;o+=r){var l=e[o];var s=e[o+1];var g=ol.math.squaredDistance(n,a,l,s);if(g>i){i=g}n=l;a=s}return i};ol.geom.flat.closest.getsMaxSquaredDelta=function(e,o,t,r,i){var n,a;for(n=0,a=t.length;n<a;++n){var l=t[n];i=ol.geom.flat.closest.getMaxSquaredDelta(e,o,l,r,i);o=l}return i};ol.geom.flat.closest.getssMaxSquaredDelta=function(e,o,t,r,i){var n,a;for(n=0,a=t.length;n<a;++n){var l=t[n];i=ol.geom.flat.closest.getsMaxSquaredDelta(e,o,l,r,i);o=l[l.length-1]}return i};ol.geom.flat.closest.getClosestPoint=function(e,o,t,r,i,n,a,l,s,g,p){if(o==t){return g}var u,c;if(i===0){c=ol.math.squaredDistance(a,l,e[o],e[o+1]);if(c<g){for(u=0;u<r;++u){s[u]=e[o+u]}s.length=r;return c}else{return g}}goog.asserts.assert(i>0,"maxDelta should be larger than 0");var d=p?p:[NaN,NaN];var y=o+r;while(y<t){ol.geom.flat.closest.point(e,y-r,y,r,a,l,d);c=ol.math.squaredDistance(a,l,d[0],d[1]);if(c<g){g=c;for(u=0;u<r;++u){s[u]=d[u]}s.length=r;y+=r}else{y+=r*Math.max((Math.sqrt(c)-Math.sqrt(g))/i|0,1)}}if(n){ol.geom.flat.closest.point(e,t-r,o,r,a,l,d);c=ol.math.squaredDistance(a,l,d[0],d[1]);if(c<g){g=c;for(u=0;u<r;++u){s[u]=d[u]}s.length=r}}return g};ol.geom.flat.closest.getsClosestPoint=function(e,o,t,r,i,n,a,l,s,g,p){var u=p?p:[NaN,NaN];var c,d;for(c=0,d=t.length;c<d;++c){var y=t[c];g=ol.geom.flat.closest.getClosestPoint(e,o,y,r,i,n,a,l,s,g,u);o=y}return g};ol.geom.flat.closest.getssClosestPoint=function(e,o,t,r,i,n,a,l,s,g,p){var u=p?p:[NaN,NaN];var c,d;for(c=0,d=t.length;c<d;++c){var y=t[c];g=ol.geom.flat.closest.getsClosestPoint(e,o,y,r,i,n,a,l,s,g,u);o=y[y.length-1]}return g};goog.provide("ol.geom.flat.deflate");goog.require("goog.asserts");ol.geom.flat.deflate.coordinate=function(e,o,t,r){goog.asserts.assert(t.length==r,"length of the coordinate array should match stride");var i,n;for(i=0,n=t.length;i<n;++i){e[o++]=t[i]}return o};ol.geom.flat.deflate.coordinates=function(e,o,t,r){var i,n;for(i=0,n=t.length;i<n;++i){var a=t[i];goog.asserts.assert(a.length==r,"length of coordinate array should match stride");var l;for(l=0;l<r;++l){e[o++]=a[l]}}return o};ol.geom.flat.deflate.coordinatess=function(e,o,t,r,i){var n=i?i:[];var a=0;var l,s;for(l=0,s=t.length;l<s;++l){var g=ol.geom.flat.deflate.coordinates(e,o,t[l],r);n[a++]=g;o=g}n.length=a;return n};ol.geom.flat.deflate.coordinatesss=function(e,o,t,r,i){var n=i?i:[];var a=0;var l,s;for(l=0,s=t.length;l<s;++l){var g=ol.geom.flat.deflate.coordinatess(e,o,t[l],r,n[a]);n[a++]=g;o=g[g.length-1]}n.length=a;return n};goog.provide("ol.geom.flat.inflate");ol.geom.flat.inflate.coordinates=function(e,o,t,r,i){var n=i!==undefined?i:[];var a=0;var l;for(l=o;l<t;l+=r){n[a++]=e.slice(l,l+r)}n.length=a;return n};ol.geom.flat.inflate.coordinatess=function(e,o,t,r,i){var n=i!==undefined?i:[];var a=0;var l,s;for(l=0,s=t.length;l<s;++l){var g=t[l];n[a++]=ol.geom.flat.inflate.coordinates(e,o,g,r,n[a]);o=g}n.length=a;return n};ol.geom.flat.inflate.coordinatesss=function(e,o,t,r,i){var n=i!==undefined?i:[];var a=0;var l,s;for(l=0,s=t.length;l<s;++l){var g=t[l];n[a++]=ol.geom.flat.inflate.coordinatess(e,o,g,r,n[a]);o=g[g.length-1]}n.length=a;return n};goog.provide("ol.geom.flat.simplify");goog.require("ol.math");ol.geom.flat.simplify.lineString=function(e,o,t,r,i,n,a){var l=a!==undefined?a:[];if(!n){t=ol.geom.flat.simplify.radialDistance(e,o,t,r,i,l,0);e=l;o=0;r=2}l.length=ol.geom.flat.simplify.douglasPeucker(e,o,t,r,i,l,0);return l};ol.geom.flat.simplify.douglasPeucker=function(e,o,t,r,i,n,a){var l=(t-o)/r;if(l<3){for(;o<t;o+=r){n[a++]=e[o];n[a++]=e[o+1]}return a}var s=new Array(l);s[0]=1;s[l-1]=1;var g=[o,t-r];var p=0;var u;while(g.length>0){var c=g.pop();var d=g.pop();var y=0;var h=e[d];var m=e[d+1];var f=e[c];var v=e[c+1];for(u=d+r;u<c;u+=r){var _=e[u];var E=e[u+1];var S=ol.math.squaredSegmentDistance(_,E,h,m,f,v);if(S>y){p=u;y=S}}if(y>i){s[(p-o)/r]=1;if(d+r<p){g.push(d,p)}if(p+r<c){g.push(p,c)}}}for(u=0;u<l;++u){if(s[u]){n[a++]=e[o+u*r];n[a++]=e[o+u*r+1]}}return a};ol.geom.flat.simplify.douglasPeuckers=function(e,o,t,r,i,n,a,l){var s,g;for(s=0,g=t.length;s<g;++s){var p=t[s];a=ol.geom.flat.simplify.douglasPeucker(e,o,p,r,i,n,a);l.push(a);o=p}return a};ol.geom.flat.simplify.douglasPeuckerss=function(e,o,t,r,i,n,a,l){var s,g;for(s=0,g=t.length;s<g;++s){var p=t[s];var u=[];a=ol.geom.flat.simplify.douglasPeuckers(e,o,p,r,i,n,a,u);l.push(u);o=p[p.length-1]}return a};ol.geom.flat.simplify.radialDistance=function(e,o,t,r,i,n,a){if(t<=o+r){for(;o<t;o+=r){n[a++]=e[o];n[a++]=e[o+1]}return a}var l=e[o];var s=e[o+1];n[a++]=l;n[a++]=s;var g=l;var p=s;for(o+=r;o<t;o+=r){g=e[o];p=e[o+1];if(ol.math.squaredDistance(l,s,g,p)>i){n[a++]=g;n[a++]=p;l=g;s=p}}if(g!=l||p!=s){n[a++]=g;n[a++]=p}return a};ol.geom.flat.simplify.snap=function(e,o){return o*Math.round(e/o)};ol.geom.flat.simplify.quantize=function(e,o,t,r,i,n,a){if(o==t){return a}var l=ol.geom.flat.simplify.snap(e[o],i);var s=ol.geom.flat.simplify.snap(e[o+1],i);o+=r;n[a++]=l;n[a++]=s;var g,p;do{g=ol.geom.flat.simplify.snap(e[o],i);p=ol.geom.flat.simplify.snap(e[o+1],i);o+=r;if(o==t){n[a++]=g;n[a++]=p;return a}}while(g==l&&p==s);while(o<t){var u,c;u=ol.geom.flat.simplify.snap(e[o],i);c=ol.geom.flat.simplify.snap(e[o+1],i);o+=r;if(u==g&&c==p){continue}var d=g-l;var y=p-s;var h=u-l;var m=c-s;if(d*m==y*h&&(d<0&&h<d||d==h||d>0&&h>d)&&(y<0&&m<y||y==m||y>0&&m>y)){g=u;p=c;continue}n[a++]=g;n[a++]=p;l=g;s=p;g=u;p=c}n[a++]=g;n[a++]=p;return a};ol.geom.flat.simplify.quantizes=function(e,o,t,r,i,n,a,l){var s,g;for(s=0,g=t.length;s<g;++s){var p=t[s];a=ol.geom.flat.simplify.quantize(e,o,p,r,i,n,a);l.push(a);o=p}return a};ol.geom.flat.simplify.quantizess=function(e,o,t,r,i,n,a,l){var s,g;for(s=0,g=t.length;s<g;++s){var p=t[s];var u=[];a=ol.geom.flat.simplify.quantizes(e,o,p,r,i,n,a,u);l.push(u);o=p[p.length-1]}return a};goog.provide("ol.geom.LinearRing");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.area");goog.require("ol.geom.flat.closest");goog.require("ol.geom.flat.deflate");goog.require("ol.geom.flat.inflate");goog.require("ol.geom.flat.simplify");ol.geom.LinearRing=function(e,o){goog.base(this);this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.setCoordinates(e,o)};goog.inherits(ol.geom.LinearRing,ol.geom.SimpleGeometry);ol.geom.LinearRing.prototype.clone=function(){var e=new ol.geom.LinearRing(null);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return e};ol.geom.LinearRing.prototype.closestPointXY=function(e,o,t,r){if(r<ol.extent.closestSquaredDistanceXY(this.getExtent(),e,o)){return r}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getMaxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return ol.geom.flat.closest.getClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,true,e,o,t,r)};ol.geom.LinearRing.prototype.getArea=function(){return ol.geom.flat.area.linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.LinearRing.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.LinearRing.prototype.getSimplifiedGeometryInternal=function(e){var o=[];o.length=ol.geom.flat.simplify.douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,o,0);var t=new ol.geom.LinearRing(null);t.setFlatCoordinates(ol.geom.GeometryLayout.XY,o);return t};ol.geom.LinearRing.prototype.getType=function(){return ol.geom.GeometryType.LINEAR_RING};ol.geom.LinearRing.prototype.setCoordinates=function(e,o){if(!e){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)}else{this.setLayout(o,e,1);if(!this.flatCoordinates){this.flatCoordinates=[]}this.flatCoordinates.length=ol.geom.flat.deflate.coordinates(this.flatCoordinates,0,e,this.stride);this.changed()}};ol.geom.LinearRing.prototype.setFlatCoordinates=function(e,o){this.setFlatCoordinatesInternal(e,o);this.changed()};goog.provide("ol.geom.Point");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.deflate");goog.require("ol.math");ol.geom.Point=function(e,o){goog.base(this);this.setCoordinates(e,o)};goog.inherits(ol.geom.Point,ol.geom.SimpleGeometry);ol.geom.Point.prototype.clone=function(){var e=new ol.geom.Point(null);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return e};ol.geom.Point.prototype.closestPointXY=function(e,o,t,r){var i=this.flatCoordinates;var n=ol.math.squaredDistance(e,o,i[0],i[1]);if(n<r){var a=this.stride;var l;for(l=0;l<a;++l){t[l]=i[l]}t.length=a;return n}else{return r}};ol.geom.Point.prototype.getCoordinates=function(){return!this.flatCoordinates?[]:this.flatCoordinates.slice()};ol.geom.Point.prototype.computeExtent=function(e){return ol.extent.createOrUpdateFromCoordinate(this.flatCoordinates,e)};ol.geom.Point.prototype.getType=function(){return ol.geom.GeometryType.POINT};ol.geom.Point.prototype.intersectsExtent=function(e){return ol.extent.containsXY(e,this.flatCoordinates[0],this.flatCoordinates[1])};ol.geom.Point.prototype.setCoordinates=function(e,o){if(!e){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)}else{this.setLayout(o,e,0);if(!this.flatCoordinates){this.flatCoordinates=[]}this.flatCoordinates.length=ol.geom.flat.deflate.coordinate(this.flatCoordinates,0,e,this.stride);this.changed()}};ol.geom.Point.prototype.setFlatCoordinates=function(e,o){this.setFlatCoordinatesInternal(e,o);this.changed()};goog.provide("ol.geom.flat.contains");goog.require("goog.asserts");goog.require("ol.extent");ol.geom.flat.contains.linearRingContainsExtent=function(e,o,t,r,i){var n=ol.extent.forEachCorner(i,function(i){return!ol.geom.flat.contains.linearRingContainsXY(e,o,t,r,i[0],i[1])})
;return!n};ol.geom.flat.contains.linearRingContainsXY=function(e,o,t,r,i,n){var a=false;var l=e[t-r];var s=e[t-r+1];for(;o<t;o+=r){var g=e[o];var p=e[o+1];var u=s>n!=p>n&&i<(g-l)*(n-s)/(p-s)+l;if(u){a=!a}l=g;s=p}return a};ol.geom.flat.contains.linearRingsContainsXY=function(e,o,t,r,i,n){goog.asserts.assert(t.length>0,"ends should not be an empty array");if(t.length===0){return false}if(!ol.geom.flat.contains.linearRingContainsXY(e,o,t[0],r,i,n)){return false}var a,l;for(a=1,l=t.length;a<l;++a){if(ol.geom.flat.contains.linearRingContainsXY(e,t[a-1],t[a],r,i,n)){return false}}return true};ol.geom.flat.contains.linearRingssContainsXY=function(e,o,t,r,i,n){goog.asserts.assert(t.length>0,"endss should not be an empty array");if(t.length===0){return false}var a,l;for(a=0,l=t.length;a<l;++a){var s=t[a];if(ol.geom.flat.contains.linearRingsContainsXY(e,o,s,r,i,n)){return true}o=s[s.length-1]}return false};goog.provide("ol.geom.flat.interiorpoint");goog.require("goog.asserts");goog.require("ol.array");goog.require("ol.geom.flat.contains");ol.geom.flat.interiorpoint.linearRings=function(e,o,t,r,i,n,a){var l,s,g,p,u,c,d;var y=i[n+1];var h=[];var m=t[0];p=e[m-r];c=e[m-r+1];for(l=o;l<m;l+=r){u=e[l];d=e[l+1];if(y<=c&&d<=y||c<=y&&y<=d){g=(y-c)/(d-c)*(u-p)+p;h.push(g)}p=u;c=d}var f=NaN;var v=-Infinity;h.sort(ol.array.numberSafeCompareFunction);p=h[0];for(l=1,s=h.length;l<s;++l){u=h[l];var _=Math.abs(u-p);if(_>v){g=(p+u)/2;if(ol.geom.flat.contains.linearRingsContainsXY(e,o,t,r,g,y)){f=g;v=_}}p=u}if(isNaN(f)){f=i[n]}if(a){a.push(f,y);return a}else{return[f,y]}};ol.geom.flat.interiorpoint.linearRingss=function(e,o,t,r,i){goog.asserts.assert(2*t.length==i.length,"endss.length times 2 should be flatCenters.length");var n=[];var a,l;for(a=0,l=t.length;a<l;++a){var s=t[a];n=ol.geom.flat.interiorpoint.linearRings(e,o,s,r,i,2*a,n);o=s[s.length-1]}return n};goog.provide("ol.geom.flat.segments");ol.geom.flat.segments.forEach=function(e,o,t,r,i,n){var a=[e[o],e[o+1]];var l=[];var s;for(;o+r<t;o+=r){l[0]=e[o+r];l[1]=e[o+r+1];s=i.call(n,a,l);if(s){return s}a[0]=l[0];a[1]=l[1]}return false};goog.provide("ol.geom.flat.intersectsextent");goog.require("goog.asserts");goog.require("ol.extent");goog.require("ol.geom.flat.contains");goog.require("ol.geom.flat.segments");ol.geom.flat.intersectsextent.lineString=function(e,o,t,r,i){var n=ol.extent.extendFlatCoordinates(ol.extent.createEmpty(),e,o,t,r);if(!ol.extent.intersects(i,n)){return false}if(ol.extent.containsExtent(i,n)){return true}if(n[0]>=i[0]&&n[2]<=i[2]){return true}if(n[1]>=i[1]&&n[3]<=i[3]){return true}return ol.geom.flat.segments.forEach(e,o,t,r,function(e,o){return ol.extent.intersectsSegment(i,e,o)})};ol.geom.flat.intersectsextent.lineStrings=function(e,o,t,r,i){var n,a;for(n=0,a=t.length;n<a;++n){if(ol.geom.flat.intersectsextent.lineString(e,o,t[n],r,i)){return true}o=t[n]}return false};ol.geom.flat.intersectsextent.linearRing=function(e,o,t,r,i){if(ol.geom.flat.intersectsextent.lineString(e,o,t,r,i)){return true}if(ol.geom.flat.contains.linearRingContainsXY(e,o,t,r,i[0],i[1])){return true}if(ol.geom.flat.contains.linearRingContainsXY(e,o,t,r,i[0],i[3])){return true}if(ol.geom.flat.contains.linearRingContainsXY(e,o,t,r,i[2],i[1])){return true}if(ol.geom.flat.contains.linearRingContainsXY(e,o,t,r,i[2],i[3])){return true}return false};ol.geom.flat.intersectsextent.linearRings=function(e,o,t,r,i){goog.asserts.assert(t.length>0,"ends should not be an empty array");if(!ol.geom.flat.intersectsextent.linearRing(e,o,t[0],r,i)){return false}if(t.length===1){return true}var n,a;for(n=1,a=t.length;n<a;++n){if(ol.geom.flat.contains.linearRingContainsExtent(e,t[n-1],t[n],r,i)){return false}}return true};ol.geom.flat.intersectsextent.linearRingss=function(e,o,t,r,i){goog.asserts.assert(t.length>0,"endss should not be an empty array");var n,a;for(n=0,a=t.length;n<a;++n){var l=t[n];if(ol.geom.flat.intersectsextent.linearRings(e,o,l,r,i)){return true}o=l[l.length-1]}return false};goog.provide("ol.geom.flat.reverse");ol.geom.flat.reverse.coordinates=function(e,o,t,r){while(o<t-r){var i;for(i=0;i<r;++i){var n=e[o+i];e[o+i]=e[t-r+i];e[t-r+i]=n}o+=r;t-=r}};goog.provide("ol.geom.flat.orient");goog.require("ol");goog.require("ol.geom.flat.reverse");ol.geom.flat.orient.linearRingIsClockwise=function(e,o,t,r){var i=0;var n=e[t-r];var a=e[t-r+1];for(;o<t;o+=r){var l=e[o];var s=e[o+1];i+=(l-n)*(s+a);n=l;a=s}return i>0};ol.geom.flat.orient.linearRingsAreOriented=function(e,o,t,r,i){var n=i!==undefined?i:false;var a,l;for(a=0,l=t.length;a<l;++a){var s=t[a];var g=ol.geom.flat.orient.linearRingIsClockwise(e,o,s,r);if(a===0){if(n&&g||!n&&!g){return false}}else{if(n&&!g||!n&&g){return false}}o=s}return true};ol.geom.flat.orient.linearRingssAreOriented=function(e,o,t,r,i){var n,a;for(n=0,a=t.length;n<a;++n){if(!ol.geom.flat.orient.linearRingsAreOriented(e,o,t[n],r,i)){return false}}return true};ol.geom.flat.orient.orientLinearRings=function(e,o,t,r,i){var n=i!==undefined?i:false;var a,l;for(a=0,l=t.length;a<l;++a){var s=t[a];var g=ol.geom.flat.orient.linearRingIsClockwise(e,o,s,r);var p=a===0?n&&g||!n&&!g:n&&!g||!n&&g;if(p){ol.geom.flat.reverse.coordinates(e,o,s,r)}o=s}return o};ol.geom.flat.orient.orientLinearRingss=function(e,o,t,r,i){var n,a;for(n=0,a=t.length;n<a;++n){o=ol.geom.flat.orient.orientLinearRings(e,o,t[n],r,i)}return o};goog.provide("ol.geom.Polygon");goog.require("goog.asserts");goog.require("goog.math");goog.require("ol");goog.require("ol.array");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LinearRing");goog.require("ol.geom.Point");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.area");goog.require("ol.geom.flat.closest");goog.require("ol.geom.flat.contains");goog.require("ol.geom.flat.deflate");goog.require("ol.geom.flat.inflate");goog.require("ol.geom.flat.interiorpoint");goog.require("ol.geom.flat.intersectsextent");goog.require("ol.geom.flat.orient");goog.require("ol.geom.flat.simplify");ol.geom.Polygon=function(e,o){goog.base(this);this.ends_=[];this.flatInteriorPointRevision_=-1;this.flatInteriorPoint_=null;this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.orientedRevision_=-1;this.orientedFlatCoordinates_=null;this.setCoordinates(e,o)};goog.inherits(ol.geom.Polygon,ol.geom.SimpleGeometry);ol.geom.Polygon.prototype.appendLinearRing=function(e){goog.asserts.assert(e.getLayout()==this.layout,"layout of linearRing should match layout");if(!this.flatCoordinates){this.flatCoordinates=e.getFlatCoordinates().slice()}else{ol.array.extend(this.flatCoordinates,e.getFlatCoordinates())}this.ends_.push(this.flatCoordinates.length);this.changed()};ol.geom.Polygon.prototype.clone=function(){var e=new ol.geom.Polygon(null);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice());return e};ol.geom.Polygon.prototype.closestPointXY=function(e,o,t,r){if(r<ol.extent.closestSquaredDistanceXY(this.getExtent(),e,o)){return r}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return ol.geom.flat.closest.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,true,e,o,t,r)};ol.geom.Polygon.prototype.containsXY=function(e,o){return ol.geom.flat.contains.linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,o)};ol.geom.Polygon.prototype.getArea=function(){return ol.geom.flat.area.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)};ol.geom.Polygon.prototype.getCoordinates=function(e){var o;if(e!==undefined){o=this.getOrientedFlatCoordinates().slice();ol.geom.flat.orient.orientLinearRings(o,0,this.ends_,this.stride,e)}else{o=this.flatCoordinates}return ol.geom.flat.inflate.coordinatess(o,0,this.ends_,this.stride)};ol.geom.Polygon.prototype.getEnds=function(){return this.ends_};ol.geom.Polygon.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var e=ol.extent.getCenter(this.getExtent());this.flatInteriorPoint_=ol.geom.flat.interiorpoint.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0);this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_};ol.geom.Polygon.prototype.getInteriorPoint=function(){return new ol.geom.Point(this.getFlatInteriorPoint())};ol.geom.Polygon.prototype.getLinearRingCount=function(){return this.ends_.length};ol.geom.Polygon.prototype.getLinearRing=function(e){goog.asserts.assert(0<=e&&e<this.ends_.length,"index should be in between 0 and and length of this.ends_");if(e<0||this.ends_.length<=e){return null}var o=new ol.geom.LinearRing(null);o.setFlatCoordinates(this.layout,this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]));return o};ol.geom.Polygon.prototype.getLinearRings=function(){var e=this.layout;var o=this.flatCoordinates;var t=this.ends_;var r=[];var i=0;var n,a;for(n=0,a=t.length;n<a;++n){var l=t[n];var s=new ol.geom.LinearRing(null);s.setFlatCoordinates(e,o.slice(i,l));r.push(s);i=l}return r};ol.geom.Polygon.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var e=this.flatCoordinates;if(ol.geom.flat.orient.linearRingsAreOriented(e,0,this.ends_,this.stride)){this.orientedFlatCoordinates_=e}else{this.orientedFlatCoordinates_=e.slice();this.orientedFlatCoordinates_.length=ol.geom.flat.orient.orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)}this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_};ol.geom.Polygon.prototype.getSimplifiedGeometryInternal=function(e){var o=[];var t=[];o.length=ol.geom.flat.simplify.quantizes(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),o,0,t);var r=new ol.geom.Polygon(null);r.setFlatCoordinates(ol.geom.GeometryLayout.XY,o,t);return r};ol.geom.Polygon.prototype.getType=function(){return ol.geom.GeometryType.POLYGON};ol.geom.Polygon.prototype.intersectsExtent=function(e){return ol.geom.flat.intersectsextent.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)};ol.geom.Polygon.prototype.setCoordinates=function(e,o){if(!e){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null,this.ends_)}else{this.setLayout(o,e,2);if(!this.flatCoordinates){this.flatCoordinates=[]}var t=ol.geom.flat.deflate.coordinatess(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=t.length===0?0:t[t.length-1];this.changed()}};ol.geom.Polygon.prototype.setFlatCoordinates=function(e,o,t){if(!o){goog.asserts.assert(t&&t.length===0,"ends must be an empty array")}else if(t.length===0){goog.asserts.assert(o.length===0,"flatCoordinates should be an empty array")}else{goog.asserts.assert(o.length==t[t.length-1],"the length of flatCoordinates should be the last entry of ends")}this.setFlatCoordinatesInternal(e,o);this.ends_=t;this.changed()};ol.geom.Polygon.circular=function(e,o,t,r){var i=r?r:32;var n=[];var a;for(a=0;a<i;++a){ol.array.extend(n,e.offset(o,t,2*Math.PI*a/i))}n.push(n[0],n[1]);var l=new ol.geom.Polygon(null);l.setFlatCoordinates(ol.geom.GeometryLayout.XY,n,[n.length]);return l};ol.geom.Polygon.fromExtent=function(e){var o=e[0];var t=e[1];var r=e[2];var i=e[3];var n=[o,t,o,i,r,i,r,t,o,t];var a=new ol.geom.Polygon(null);a.setFlatCoordinates(ol.geom.GeometryLayout.XY,n,[n.length]);return a};ol.geom.Polygon.fromCircle=function(e,o,t){var r=o?o:32;var i=e.getStride();var n=e.getLayout();var a=new ol.geom.Polygon(null,n);var l=i*(r+1);var s=new Array(l);for(var g=0;g<l;g++){s[g]=0}var p=[s.length];a.setFlatCoordinates(n,s,p);ol.geom.Polygon.makeRegular(a,e.getCenter(),e.getRadius(),t);return a};ol.geom.Polygon.makeRegular=function(e,o,t,r){var i=e.getFlatCoordinates();var n=e.getLayout();var a=e.getStride();var l=e.getEnds();goog.asserts.assert(l.length===1,"only 1 ring is supported");var s=i.length/a-1;var g=r?r:0;var p,u;for(var c=0;c<=s;++c){u=c*a;p=g+goog.math.modulo(c,s)*2*Math.PI/s;i[u]=o[0]+t*Math.cos(p);i[u+1]=o[1]+t*Math.sin(p)}e.setFlatCoordinates(n,i,l)};goog.provide("ol.View");goog.provide("ol.ViewHint");goog.provide("ol.ViewProperty");goog.require("goog.asserts");goog.require("ol");goog.require("ol.CenterConstraint");goog.require("ol.Constraints");goog.require("ol.Object");goog.require("ol.ResolutionConstraint");goog.require("ol.RotationConstraint");goog.require("ol.RotationConstraintType");goog.require("ol.Size");goog.require("ol.coordinate");goog.require("ol.extent");goog.require("ol.geom.Polygon");goog.require("ol.geom.SimpleGeometry");goog.require("ol.proj");goog.require("ol.proj.METERS_PER_UNIT");goog.require("ol.proj.Projection");goog.require("ol.proj.Units");ol.ViewProperty={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};ol.ViewHint={ANIMATING:0,INTERACTING:1};ol.View=function(e){goog.base(this);var o=e||{};this.hints_=[0,0];var t={};t[ol.ViewProperty.CENTER]=o.center!==undefined?o.center:null;this.projection_=ol.proj.createProjection(o.projection,"EPSG:3857");var r=ol.View.createResolutionConstraint_(o);this.maxResolution_=r.maxResolution;this.minResolution_=r.minResolution;this.minZoom_=r.minZoom;var i=ol.View.createCenterConstraint_(o);var n=r.constraint;var a=ol.View.createRotationConstraint_(o);this.constraints_=new ol.Constraints(i,n,a);if(o.resolution!==undefined){t[ol.ViewProperty.RESOLUTION]=o.resolution}else if(o.zoom!==undefined){t[ol.ViewProperty.RESOLUTION]=this.constrainResolution(this.maxResolution_,o.zoom-this.minZoom_)}t[ol.ViewProperty.ROTATION]=o.rotation!==undefined?o.rotation:0;this.setProperties(t)};goog.inherits(ol.View,ol.Object);ol.View.prototype.calculateCenterRotate=function(e,o){var t;var r=this.getCenter();if(r!==undefined){t=[r[0]-o[0],r[1]-o[1]];ol.coordinate.rotate(t,e-this.getRotation());ol.coordinate.add(t,o)}return t};ol.View.prototype.calculateCenterZoom=function(e,o){var t;var r=this.getCenter();var i=this.getResolution();if(r!==undefined&&i!==undefined){var n=o[0]-e*(o[0]-r[0])/i;var a=o[1]-e*(o[1]-r[1])/i;t=[n,a]}return t};ol.View.prototype.constrainCenter=function(e){return this.constraints_.center(e)};ol.View.prototype.constrainResolution=function(e,o,t){var r=o||0;var i=t||0;return this.constraints_.resolution(e,r,i)};ol.View.prototype.constrainRotation=function(e,o){var t=o||0;return this.constraints_.rotation(e,t)};ol.View.prototype.getCenter=function(){return this.get(ol.ViewProperty.CENTER)};ol.View.prototype.getHints=function(){return this.hints_.slice()};ol.View.prototype.calculateExtent=function(e){var o=this.getCenter();goog.asserts.assert(o,"The view center is not defined");var t=this.getResolution();goog.asserts.assert(t!==undefined,"The view resolution is not defined");var r=this.getRotation();goog.asserts.assert(r!==undefined,"The view rotation is not defined");return ol.extent.getForViewAndSize(o,t,r,e)};ol.View.prototype.getProjection=function(){return this.projection_};ol.View.prototype.getResolution=function(){return this.get(ol.ViewProperty.RESOLUTION)};ol.View.prototype.getResolutionForExtent=function(e,o){var t=ol.extent.getWidth(e)/o[0];var r=ol.extent.getHeight(e)/o[1];return Math.max(t,r)};ol.View.prototype.getResolutionForValueFunction=function(e){var o=e||2;var t=this.maxResolution_;var r=this.minResolution_;var i=Math.log(t/r)/Math.log(o);return function(e){var n=t/Math.pow(o,e*i);goog.asserts.assert(n>=r&&n<=t,"calculated resolution outside allowed bounds (%s <= %s <= %s)",r,n,t);return n}};ol.View.prototype.getRotation=function(){return this.get(ol.ViewProperty.ROTATION)};ol.View.prototype.getValueForResolutionFunction=function(e){var o=e||2;var t=this.maxResolution_;var r=this.minResolution_;var i=Math.log(t/r)/Math.log(o);return function(e){var r=Math.log(t/e)/Math.log(o)/i;goog.asserts.assert(r>=0&&r<=1,"calculated value (%s) ouside allowed range (0-1)",r);return r}};ol.View.prototype.getState=function(){goog.asserts.assert(this.isDef(),"the view was not defined (had no center and/or resolution)");var e=this.getCenter();var o=this.getProjection();var t=this.getResolution();var r=this.getRotation();return{center:[Math.round(e[0]/t)*t,Math.round(e[1]/t)*t],projection:o!==undefined?o:null,resolution:t,rotation:r}};ol.View.prototype.getZoom=function(){var e;var o=this.getResolution();if(o!==undefined){var t,r=0;do{t=this.constrainResolution(this.maxResolution_,r);if(t==o){e=r;break}++r}while(t>this.minResolution_)}return e!==undefined?this.minZoom_+e:e};ol.View.prototype.fit=function(e,o,t){if(!(e instanceof ol.geom.SimpleGeometry)){goog.asserts.assert(goog.isArray(e),"invalid extent or geometry");goog.asserts.assert(!ol.extent.isEmpty(e),"cannot fit empty extent");e=ol.geom.Polygon.fromExtent(e)}var r=t||{};var i=r.padding!==undefined?r.padding:[0,0,0,0];var n=r.constrainResolution!==undefined?r.constrainResolution:true;var a=r.nearest!==undefined?r.nearest:false;var l;if(r.minResolution!==undefined){l=r.minResolution}else if(r.maxZoom!==undefined){l=this.constrainResolution(this.maxResolution_,r.maxZoom-this.minZoom_,0)}else{l=0}var s=e.getFlatCoordinates();var g=this.getRotation();goog.asserts.assert(g!==undefined,"rotation was not defined");var p=Math.cos(-g);var u=Math.sin(-g);var c=+Infinity;var d=+Infinity;var y=-Infinity;var h=-Infinity;var m=e.getStride();for(var f=0,v=s.length;f<v;f+=m){var _=s[f]*p-s[f+1]*u;var E=s[f]*u+s[f+1]*p;c=Math.min(c,_);d=Math.min(d,E);y=Math.max(y,_);h=Math.max(h,E)}var S=this.getResolutionForExtent([c,d,y,h],[o[0]-i[1]-i[3],o[1]-i[0]-i[2]]);S=isNaN(S)?l:Math.max(S,l);if(n){var T=this.constrainResolution(S,0,0);if(!a&&T<S){T=this.constrainResolution(T,-1,0)}S=T}this.setResolution(S);u=-u;var P=(c+y)/2;var x=(d+h)/2;P+=(i[1]-i[3])/2*S;x+=(i[0]-i[2])/2*S;var b=P*p-x*u;var M=x*p+P*u;this.setCenter([b,M])};ol.View.prototype.centerOn=function(e,o,t){var r=this.getRotation();var i=Math.cos(-r);var n=Math.sin(-r);var a=e[0]*i-e[1]*n;var l=e[1]*i+e[0]*n;var s=this.getResolution();a+=(o[0]/2-t[0])*s;l+=(t[1]-o[1]/2)*s;n=-n;var g=a*i-l*n;var p=l*i+a*n;this.setCenter([g,p])};ol.View.prototype.isDef=function(){return!!this.getCenter()&&this.getResolution()!==undefined};ol.View.prototype.rotate=function(e,o){if(o!==undefined){var t=this.calculateCenterRotate(e,o);this.setCenter(t)}this.setRotation(e)};ol.View.prototype.setCenter=function(e){this.set(ol.ViewProperty.CENTER,e)};ol.View.prototype.setHint=function(e,o){goog.asserts.assert(0<=e&&e<this.hints_.length,"illegal hint (%s), must be between 0 and %s",e,this.hints_.length);this.hints_[e]+=o;goog.asserts.assert(this.hints_[e]>=0,"Hint at %s must be positive, was %s",e,this.hints_[e]);return this.hints_[e]};ol.View.prototype.setResolution=function(e){this.set(ol.ViewProperty.RESOLUTION,e)};ol.View.prototype.setRotation=function(e){this.set(ol.ViewProperty.ROTATION,e)};ol.View.prototype.setZoom=function(e){var o=this.constrainResolution(this.maxResolution_,e-this.minZoom_,0);this.setResolution(o)};ol.View.createCenterConstraint_=function(e){if(e.extent!==undefined){return ol.CenterConstraint.createExtent(e.extent)}else{return ol.CenterConstraint.none}};ol.View.createResolutionConstraint_=function(e){var o;var t;var r;var i=28;var n=2;var a=e.minZoom!==undefined?e.minZoom:ol.DEFAULT_MIN_ZOOM;var l=e.maxZoom!==undefined?e.maxZoom:i;var s=e.zoomFactor!==undefined?e.zoomFactor:n;if(e.resolutions!==undefined){var g=e.resolutions;t=g[0];r=g[g.length-1];o=ol.ResolutionConstraint.createSnapToResolutions(g)}else{var p=ol.proj.createProjection(e.projection,"EPSG:3857");var u=p.getExtent();var c=!u?360*ol.proj.METERS_PER_UNIT[ol.proj.Units.DEGREES]/p.getMetersPerUnit():Math.max(ol.extent.getWidth(u),ol.extent.getHeight(u));var d=c/ol.DEFAULT_TILE_SIZE/Math.pow(n,ol.DEFAULT_MIN_ZOOM);var y=d/Math.pow(n,i-ol.DEFAULT_MIN_ZOOM);t=e.maxResolution;if(t!==undefined){a=0}else{t=d/Math.pow(s,a)}r=e.minResolution;if(r===undefined){if(e.maxZoom!==undefined){if(e.maxResolution!==undefined){r=t/Math.pow(s,l)}else{r=d/Math.pow(s,l)}}else{r=y}}l=a+Math.floor(Math.log(t/r)/Math.log(s));r=t/Math.pow(s,l-a);o=ol.ResolutionConstraint.createSnapToPower(s,t,l-a)}return{constraint:o,maxResolution:t,minResolution:r,minZoom:a}};ol.View.createRotationConstraint_=function(e){var o=e.enableRotation!==undefined?e.enableRotation:true;if(o){var t=e.constrainRotation;if(t===undefined||t===true){return ol.RotationConstraint.createSnapToZero()}else if(t===false){return ol.RotationConstraint.none}else if(goog.isNumber(t)){return ol.RotationConstraint.createSnapToN(t)}else{goog.asserts.fail("illegal option for constrainRotation (%s)",t);return ol.RotationConstraint.none}}else{return ol.RotationConstraint.disable}};goog.provide("ol.easing");ol.easing.easeIn=function(e){return Math.pow(e,3)};ol.easing.easeOut=function(e){return 1-ol.easing.easeIn(1-e)};ol.easing.inAndOut=function(e){return 3*e*e-2*e*e*e};ol.easing.linear=function(e){return e};ol.easing.upAndDown=function(e){if(e<.5){return ol.easing.inAndOut(2*e)}else{return 1-ol.easing.inAndOut(2*(e-.5))}};goog.provide("ol.animation");goog.require("ol");goog.require("ol.PreRenderFunction");goog.require("ol.ViewHint");goog.require("ol.coordinate");goog.require("ol.easing");ol.animation.bounce=function(e){var o=e.resolution;var t=e.start?e.start:Date.now();var r=e.duration!==undefined?e.duration:1e3;var i=e.easing?e.easing:ol.easing.upAndDown;return function(e,n){if(n.time<t){n.animate=true;n.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else if(n.time<t+r){var a=i((n.time-t)/r);var l=o-n.viewState.resolution;n.animate=true;n.viewState.resolution+=a*l;n.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else{return false}}};ol.animation.pan=function(e){var o=e.source;var t=e.start?e.start:Date.now();var r=o[0];var i=o[1];var n=e.duration!==undefined?e.duration:1e3;var a=e.easing?e.easing:ol.easing.inAndOut;return function(e,o){if(o.time<t){o.animate=true;o.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else if(o.time<t+n){var l=1-a((o.time-t)/n);var s=r-o.viewState.center[0];var g=i-o.viewState.center[1];o.animate=true;o.viewState.center[0]+=l*s;o.viewState.center[1]+=l*g;o.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else{return false}}};ol.animation.rotate=function(e){var o=e.rotation?e.rotation:0;var t=e.start?e.start:Date.now();var r=e.duration!==undefined?e.duration:1e3;var i=e.easing?e.easing:ol.easing.inAndOut;var n=e.anchor?e.anchor:null;return function(e,a){if(a.time<t){a.animate=true;a.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else if(a.time<t+r){var l=1-i((a.time-t)/r);var s=(o-a.viewState.rotation)*l;a.animate=true;a.viewState.rotation+=s;if(n){var g=a.viewState.center;ol.coordinate.sub(g,n);ol.coordinate.rotate(g,s);ol.coordinate.add(g,n)}a.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else{return false}}};ol.animation.zoom=function(e){var o=e.resolution;var t=e.start?e.start:Date.now();var r=e.duration!==undefined?e.duration:1e3;var i=e.easing?e.easing:ol.easing.inAndOut;return function(e,n){if(n.time<t){n.animate=true;n.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else if(n.time<t+r){var a=1-i((n.time-t)/r);var l=o-n.viewState.resolution;n.animate=true;n.viewState.resolution+=a*l;n.viewHints[ol.ViewHint.ANIMATING]+=1;return true}else{return false}}};goog.provide("ol.TileCoord");goog.provide("ol.tilecoord");goog.require("goog.asserts");goog.require("ol.extent");ol.TileCoord;ol.QuadKeyCharCode={ZERO:"0".charCodeAt(0),ONE:"1".charCodeAt(0),TWO:"2".charCodeAt(0),THREE:"3".charCodeAt(0)};ol.tilecoord.createFromString=function(e){var o=e.split("/");goog.asserts.assert(o.length===3,'must provide a string in "z/x/y" format, got "%s"',e);return o.map(function(e){return parseInt(e,10)})};ol.tilecoord.createOrUpdate=function(e,o,t,r){if(r!==undefined){r[0]=e;r[1]=o;r[2]=t;return r}else{return[e,o,t]}};ol.tilecoord.getKeyZXY=function(e,o,t){return e+"/"+o+"/"+t};ol.tilecoord.hash=function(e){return(e[1]<<e[0])+e[2]};ol.tilecoord.quadKey=function(e){var o=e[0];var t=new Array(o);var r=1<<o-1;var i,n;for(i=0;i<o;++i){n=ol.QuadKeyCharCode.ZERO;if(e[1]&r){n+=1}if(e[2]&r){n+=2}t[i]=String.fromCharCode(n);r>>=1}return t.join("")};ol.tilecoord.wrapX=function(e,o,t){var r=e[0];var i=o.getTileCoordCenter(e);var n=ol.tilegrid.extentFromProjection(t);if(!ol.extent.containsCoordinate(n,i)){var a=ol.extent.getWidth(n);var l=Math.ceil((n[0]-i[0])/a);i[0]+=a*l;return o.getTileCoordForCoordAndZ(i,r)}else{return e}};ol.tilecoord.withinExtentAndZ=function(e,o){var t=e[0];var r=e[1];var i=e[2];if(o.getMinZoom()>t||t>o.getMaxZoom()){return false}var n=o.getExtent();var a;if(!n){a=o.getFullTileRange(t)}else{a=o.getTileRangeForExtentAndZ(n,t)}if(!a){return true}else{return a.containsXY(r,i)}};goog.provide("ol.TileRange");goog.require("goog.asserts");goog.require("ol.Size");goog.require("ol.TileCoord");ol.TileRange=function(e,o,t,r){this.minX=e;this.maxX=o;this.minY=t;this.maxY=r};ol.TileRange.boundingTileRange=function(e){var o=arguments[0];var t=o[0];var r=o[1];var i=o[2];var n=new ol.TileRange(r,r,i,i);var a,l,s,g,p,u;for(a=1,l=arguments.length;a<l;++a){s=arguments[a];u=s[0];g=s[1];p=s[2];goog.asserts.assert(u==t,"passed tilecoords all have the same Z-value");n.minX=Math.min(n.minX,g);n.maxX=Math.max(n.maxX,g);n.minY=Math.min(n.minY,p);n.maxY=Math.max(n.maxY,p)}return n};ol.TileRange.createOrUpdate=function(e,o,t,r,i){if(i!==undefined){i.minX=e;i.maxX=o;i.minY=t;i.maxY=r;return i}else{return new ol.TileRange(e,o,t,r)}};ol.TileRange.prototype.contains=function(e){return this.containsXY(e[1],e[2])};ol.TileRange.prototype.containsTileRange=function(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY};ol.TileRange.prototype.containsXY=function(e,o){return this.minX<=e&&e<=this.maxX&&this.minY<=o&&o<=this.maxY};ol.TileRange.prototype.equals=function(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY};ol.TileRange.prototype.extend=function(e){if(e.minX<this.minX){this.minX=e.minX}if(e.maxX>this.maxX){this.maxX=e.maxX}if(e.minY<this.minY){this.minY=e.minY}if(e.maxY>this.maxY){this.maxY=e.maxY}};ol.TileRange.prototype.getHeight=function(){return this.maxY-this.minY+1};ol.TileRange.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]};ol.TileRange.prototype.getWidth=function(){return this.maxX-this.minX+1};ol.TileRange.prototype.intersects=function(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY};goog.provide("ol.Attribution");goog.require("goog.math");goog.require("ol.TileRange");ol.Attribution=function(e){this.html_=e.html;this.tileRanges_=e.tileRanges?e.tileRanges:null};ol.Attribution.prototype.getHTML=function(){return this.html_};ol.Attribution.prototype.intersectsAnyTileRange=function(e,o,t){if(!this.tileRanges_){return true}var r,i,n,a;for(a in e){if(!(a in this.tileRanges_)){continue}n=e[a];var l;for(r=0,i=this.tileRanges_[a].length;r<i;++r){l=this.tileRanges_[a][r];if(l.intersects(n)){return true}var s=o.getTileRangeForExtentAndZ(ol.tilegrid.extentFromProjection(t),parseInt(a,10));var g=s.getWidth();if(n.minX<s.minX||n.maxX>s.maxX){if(l.intersects(new ol.TileRange(goog.math.modulo(n.minX,g),goog.math.modulo(n.maxX,g),n.minY,n.maxY))){return true}if(n.getWidth()>g&&l.intersects(s)){return true}}}}return false};goog.provide("ol.CanvasFunctionType");ol.CanvasFunctionType;goog.provide("ol.Collection");goog.provide("ol.CollectionEvent");goog.provide("ol.CollectionEventType");goog.require("ol.events.Event");goog.require("ol.Object");ol.CollectionEventType={ADD:"add",REMOVE:"remove"};ol.CollectionEvent=function(e,o,t){goog.base(this,e,t);this.element=o};goog.inherits(ol.CollectionEvent,ol.events.Event);ol.CollectionProperty={LENGTH:"length"};ol.Collection=function(e){goog.base(this);this.array_=e?e:[];this.updateLength_()};goog.inherits(ol.Collection,ol.Object);ol.Collection.prototype.clear=function(){while(this.getLength()>0){this.pop()}};ol.Collection.prototype.extend=function(e){var o,t;for(o=0,t=e.length;o<t;++o){this.push(e[o])}return this};ol.Collection.prototype.forEach=function(e,o){this.array_.forEach(e,o)};ol.Collection.prototype.getArray=function(){return this.array_};ol.Collection.prototype.item=function(e){return this.array_[e]};ol.Collection.prototype.getLength=function(){return this.get(ol.CollectionProperty.LENGTH)};ol.Collection.prototype.insertAt=function(e,o){this.array_.splice(e,0,o);this.updateLength_();this.dispatchEvent(new ol.CollectionEvent(ol.CollectionEventType.ADD,o,this))};ol.Collection.prototype.pop=function(){return this.removeAt(this.getLength()-1)};ol.Collection.prototype.push=function(e){var o=this.array_.length;this.insertAt(o,e);return o};ol.Collection.prototype.remove=function(e){var o=this.array_;var t,r;for(t=0,r=o.length;t<r;++t){if(o[t]===e){return this.removeAt(t)}}return undefined};ol.Collection.prototype.removeAt=function(e){var o=this.array_[e];this.array_.splice(e,1);this.updateLength_();this.dispatchEvent(new ol.CollectionEvent(ol.CollectionEventType.REMOVE,o,this));return o};ol.Collection.prototype.setAt=function(e,o){var t=this.getLength();if(e<t){var r=this.array_[e];this.array_[e]=o;this.dispatchEvent(new ol.CollectionEvent(ol.CollectionEventType.REMOVE,r,this));this.dispatchEvent(new ol.CollectionEvent(ol.CollectionEventType.ADD,o,this))}else{var i;for(i=t;i<e;++i){this.insertAt(i,undefined)}this.insertAt(e,o)}};ol.Collection.prototype.updateLength_=function(){this.set(ol.CollectionProperty.LENGTH,this.array_.length)};goog.provide("goog.color.names");goog.color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",
sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};goog.provide("goog.color");goog.provide("goog.color.Hsl");goog.provide("goog.color.Hsv");goog.provide("goog.color.Rgb");goog.require("goog.color.names");goog.require("goog.math");goog.color.Rgb;goog.color.Hsv;goog.color.Hsl;goog.color.parse=function(e){var o={};e=String(e);var t=goog.color.prependHashIfNecessaryHelper(e);if(goog.color.isValidHexColor_(t)){o.hex=goog.color.normalizeHex(t);o.type="hex";return o}else{var r=goog.color.isValidRgbColor_(e);if(r.length){o.hex=goog.color.rgbArrayToHex(r);o.type="rgb";return o}else if(goog.color.names){var i=goog.color.names[e.toLowerCase()];if(i){o.hex=i;o.type="named";return o}}}throw Error(e+" is not a valid color string")};goog.color.isValidColor=function(e){var o=goog.color.prependHashIfNecessaryHelper(e);return!!(goog.color.isValidHexColor_(o)||goog.color.isValidRgbColor_(e).length||goog.color.names&&goog.color.names[e.toLowerCase()])};goog.color.parseRgb=function(e){var o=goog.color.isValidRgbColor_(e);if(!o.length){throw Error(e+" is not a valid RGB color")}return o};goog.color.hexToRgbStyle=function(e){return goog.color.rgbStyle_(goog.color.hexToRgb(e))};goog.color.hexTripletRe_=/#(.)(.)(.)/;goog.color.normalizeHex=function(e){if(!goog.color.isValidHexColor_(e)){throw Error("'"+e+"' is not a valid hex color")}if(e.length==4){e=e.replace(goog.color.hexTripletRe_,"#$1$1$2$2$3$3")}return e.toLowerCase()};goog.color.hexToRgb=function(e){e=goog.color.normalizeHex(e);var o=parseInt(e.substr(1,2),16);var t=parseInt(e.substr(3,2),16);var r=parseInt(e.substr(5,2),16);return[o,t,r]};goog.color.rgbToHex=function(e,o,t){e=Number(e);o=Number(o);t=Number(t);if(e!=(e&255)||o!=(o&255)||t!=(t&255)){throw Error('"('+e+","+o+","+t+'") is not a valid RGB color')}var r=goog.color.prependZeroIfNecessaryHelper(e.toString(16));var i=goog.color.prependZeroIfNecessaryHelper(o.toString(16));var n=goog.color.prependZeroIfNecessaryHelper(t.toString(16));return"#"+r+i+n};goog.color.rgbArrayToHex=function(e){return goog.color.rgbToHex(e[0],e[1],e[2])};goog.color.rgbToHsl=function(e,o,t){var r=e/255;var i=o/255;var n=t/255;var a=Math.max(r,i,n);var l=Math.min(r,i,n);var s=0;var g=0;var p=.5*(a+l);if(a!=l){if(a==r){s=60*(i-n)/(a-l)}else if(a==i){s=60*(n-r)/(a-l)+120}else if(a==n){s=60*(r-i)/(a-l)+240}if(0<p&&p<=.5){g=(a-l)/(2*p)}else{g=(a-l)/(2-2*p)}}return[Math.round(s+360)%360,g,p]};goog.color.rgbArrayToHsl=function(e){return goog.color.rgbToHsl(e[0],e[1],e[2])};goog.color.hueToRgb_=function(e,o,t){if(t<0){t+=1}else if(t>1){t-=1}if(6*t<1){return e+(o-e)*6*t}else if(2*t<1){return o}else if(3*t<2){return e+(o-e)*(2/3-t)*6}return e};goog.color.hslToRgb=function(e,o,t){var r=0;var i=0;var n=0;var a=e/360;if(o==0){r=i=n=t*255}else{var l=0;var s=0;if(t<.5){s=t*(1+o)}else{s=t+o-o*t}l=2*t-s;r=255*goog.color.hueToRgb_(l,s,a+1/3);i=255*goog.color.hueToRgb_(l,s,a);n=255*goog.color.hueToRgb_(l,s,a-1/3)}return[Math.round(r),Math.round(i),Math.round(n)]};goog.color.hslArrayToRgb=function(e){return goog.color.hslToRgb(e[0],e[1],e[2])};goog.color.validHexColorRe_=/^#(?:[0-9a-f]{3}){1,2}$/i;goog.color.isValidHexColor_=function(e){return goog.color.validHexColorRe_.test(e)};goog.color.normalizedHexColorRe_=/^#[0-9a-f]{6}$/;goog.color.isNormalizedHexColor_=function(e){return goog.color.normalizedHexColorRe_.test(e)};goog.color.rgbColorRe_=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;goog.color.isValidRgbColor_=function(e){var o=e.match(goog.color.rgbColorRe_);if(o){var t=Number(o[1]);var r=Number(o[2]);var i=Number(o[3]);if(t>=0&&t<=255&&r>=0&&r<=255&&i>=0&&i<=255){return[t,r,i]}}return[]};goog.color.prependZeroIfNecessaryHelper=function(e){return e.length==1?"0"+e:e};goog.color.prependHashIfNecessaryHelper=function(e){return e.charAt(0)=="#"?e:"#"+e};goog.color.rgbStyle_=function(e){return"rgb("+e.join(",")+")"};goog.color.hsvToRgb=function(e,o,t){var r=0;var i=0;var n=0;if(o==0){r=t;i=t;n=t}else{var a=Math.floor(e/60);var l=e/60-a;var s=t*(1-o);var g=t*(1-o*l);var p=t*(1-o*(1-l));switch(a){case 1:r=g;i=t;n=s;break;case 2:r=s;i=t;n=p;break;case 3:r=s;i=g;n=t;break;case 4:r=p;i=s;n=t;break;case 5:r=t;i=s;n=g;break;case 6:case 0:r=t;i=p;n=s;break}}return[Math.floor(r),Math.floor(i),Math.floor(n)]};goog.color.rgbToHsv=function(e,o,t){var r=Math.max(Math.max(e,o),t);var i=Math.min(Math.min(e,o),t);var n;var a;var l=r;if(i==r){n=0;a=0}else{var s=r-i;a=s/r;if(e==r){n=(o-t)/s}else if(o==r){n=2+(t-e)/s}else{n=4+(e-o)/s}n*=60;if(n<0){n+=360}if(n>360){n-=360}}return[n,a,l]};goog.color.rgbArrayToHsv=function(e){return goog.color.rgbToHsv(e[0],e[1],e[2])};goog.color.hsvArrayToRgb=function(e){return goog.color.hsvToRgb(e[0],e[1],e[2])};goog.color.hexToHsl=function(e){var o=goog.color.hexToRgb(e);return goog.color.rgbToHsl(o[0],o[1],o[2])};goog.color.hslToHex=function(e,o,t){return goog.color.rgbArrayToHex(goog.color.hslToRgb(e,o,t))};goog.color.hslArrayToHex=function(e){return goog.color.rgbArrayToHex(goog.color.hslToRgb(e[0],e[1],e[2]))};goog.color.hexToHsv=function(e){return goog.color.rgbArrayToHsv(goog.color.hexToRgb(e))};goog.color.hsvToHex=function(e,o,t){return goog.color.rgbArrayToHex(goog.color.hsvToRgb(e,o,t))};goog.color.hsvArrayToHex=function(e){return goog.color.hsvToHex(e[0],e[1],e[2])};goog.color.hslDistance=function(e,o){var t,r;if(e[2]<=.5){t=e[1]*e[2]}else{t=e[1]*(1-e[2])}if(o[2]<=.5){r=o[1]*o[2]}else{r=o[1]*(1-o[2])}var i=e[0]/360;var n=o[0]/360;var a=(i-n)*2*Math.PI;return(e[2]-o[2])*(e[2]-o[2])+t*t+r*r-2*t*r*Math.cos(a)};goog.color.blend=function(e,o,t){t=goog.math.clamp(t,0,1);return[Math.round(t*e[0]+(1-t)*o[0]),Math.round(t*e[1]+(1-t)*o[1]),Math.round(t*e[2]+(1-t)*o[2])]};goog.color.darken=function(e,o){var t=[0,0,0];return goog.color.blend(t,e,o)};goog.color.lighten=function(e,o){var t=[255,255,255];return goog.color.blend(t,e,o)};goog.color.highContrast=function(e,o){var t=[];for(var r=0;r<o.length;r++){t.push({color:o[r],diff:goog.color.yiqBrightnessDiff_(o[r],e)+goog.color.colorDiff_(o[r],e)})}t.sort(function(e,o){return o.diff-e.diff});return t[0].color};goog.color.yiqBrightness_=function(e){return Math.round((e[0]*299+e[1]*587+e[2]*114)/1e3)};goog.color.yiqBrightnessDiff_=function(e,o){return Math.abs(goog.color.yiqBrightness_(e)-goog.color.yiqBrightness_(o))};goog.color.colorDiff_=function(e,o){return Math.abs(e[0]-o[0])+Math.abs(e[1]-o[1])+Math.abs(e[2]-o[2])};goog.provide("ol.Color");goog.provide("ol.color");goog.require("goog.asserts");goog.require("goog.color");goog.require("goog.color.names");goog.require("goog.vec.Mat4");goog.require("ol");goog.require("ol.math");ol.Color;ol.color.hexColorRe_=/^#(?:[0-9a-f]{3}){1,2}$/i;ol.color.rgbColorRe_=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;ol.color.rgbaColorRe_=/^(?:rgba)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|1|0\.\d{0,10})\)$/i;ol.color.blend=function(e,o,t){var r=t?t:[];var i=e[3];var n=o[3];if(i==1){r[0]=o[0]*n+e[0]*(1-n)+.5|0;r[1]=o[1]*n+e[1]*(1-n)+.5|0;r[2]=o[2]*n+e[2]*(1-n)+.5|0;r[3]=1}else if(n===0){r[0]=e[0];r[1]=e[1];r[2]=e[2];r[3]=i}else{var a=n+i*(1-n);if(a===0){r[0]=0;r[1]=0;r[2]=0;r[3]=0}else{r[0]=(o[0]*n+e[0]*i*(1-n))/a+.5|0;r[1]=(o[1]*n+e[1]*i*(1-n))/a+.5|0;r[2]=(o[2]*n+e[2]*i*(1-n))/a+.5|0;r[3]=a}}goog.asserts.assert(ol.color.isValid(r),"Output color of blend should be a valid color");return r};ol.color.asArray=function(e){if(goog.isArray(e)){return e}else{goog.asserts.assert(typeof e==="string","Color should be a string");return ol.color.fromString(e)}};ol.color.asString=function(e){if(typeof e==="string"){return e}else{goog.asserts.assert(goog.isArray(e),"Color should be an array");return ol.color.toString(e)}};ol.color.equals=function(e,o){return e===o||e[0]==o[0]&&e[1]==o[1]&&e[2]==o[2]&&e[3]==o[3]};ol.color.fromString=function(){var e=1024;var o={};var t=0;return function(r){var i;if(o.hasOwnProperty(r)){i=o[r]}else{if(t>=e){var n=0;var a;for(a in o){if((n++&3)===0){delete o[a];--t}}}i=ol.color.fromStringInternal_(r);o[r]=i;++t}return i}}();ol.color.fromStringInternal_=function(e){var o=false;if(ol.ENABLE_NAMED_COLORS&&goog.color.names.hasOwnProperty(e)){e=goog.color.names[e];o=true}var t,r,i,n,a,l;if(o||(l=ol.color.hexColorRe_.exec(e))){var s=e.length-1;goog.asserts.assert(s==3||s==6,"Color string length should be 3 or 6");var g=s==3?1:2;t=parseInt(e.substr(1+0*g,g),16);r=parseInt(e.substr(1+1*g,g),16);i=parseInt(e.substr(1+2*g,g),16);if(g==1){t=(t<<4)+t;r=(r<<4)+r;i=(i<<4)+i}n=1;a=[t,r,i,n];goog.asserts.assert(ol.color.isValid(a),"Color should be a valid color");return a}else if(l=ol.color.rgbaColorRe_.exec(e)){t=Number(l[1]);r=Number(l[2]);i=Number(l[3]);n=Number(l[4]);a=[t,r,i,n];return ol.color.normalize(a,a)}else if(l=ol.color.rgbColorRe_.exec(e)){t=Number(l[1]);r=Number(l[2]);i=Number(l[3]);a=[t,r,i,1];return ol.color.normalize(a,a)}else{goog.asserts.fail(e+" is not a valid color")}};ol.color.isValid=function(e){return 0<=e[0]&&e[0]<256&&0<=e[1]&&e[1]<256&&0<=e[2]&&e[2]<256&&0<=e[3]&&e[3]<=1};ol.color.normalize=function(e,o){var t=o||[];t[0]=ol.math.clamp(e[0]+.5|0,0,255);t[1]=ol.math.clamp(e[1]+.5|0,0,255);t[2]=ol.math.clamp(e[2]+.5|0,0,255);t[3]=ol.math.clamp(e[3],0,1);return t};ol.color.toString=function(e){var o=e[0];if(o!=(o|0)){o=o+.5|0}var t=e[1];if(t!=(t|0)){t=t+.5|0}var r=e[2];if(r!=(r|0)){r=r+.5|0}var i=e[3];return"rgba("+o+","+t+","+r+","+i+")"};ol.color.transform=function(e,o,t){var r=t?t:[];r=goog.vec.Mat4.multVec3(o,e,r);goog.asserts.assert(goog.isArray(r),"result should be an array");r[3]=e[3];return ol.color.normalize(r,r)};ol.color.stringOrColorEquals=function(e,o){if(e===o||e==o){return true}if(typeof e==="string"){e=ol.color.fromString(e)}if(typeof o==="string"){o=ol.color.fromString(o)}return ol.color.equals(e,o)};goog.provide("ol.ColorLike");goog.provide("ol.colorlike");goog.require("ol.color");ol.ColorLike;ol.colorlike.asColorLike=function(e){if(ol.colorlike.isColorLike(e)){return e}else{return ol.color.asString(e)}};ol.colorlike.isColorLike=function(e){return typeof e==="string"||e instanceof CanvasPattern||e instanceof CanvasGradient};goog.provide("goog.labs.userAgent.util");goog.require("goog.string");goog.labs.userAgent.util.getNativeUserAgentString_=function(){var e=goog.labs.userAgent.util.getNavigator_();if(e){var o=e.userAgent;if(o){return o}}return""};goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator};goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_();goog.labs.userAgent.util.setUserAgent=function(e){goog.labs.userAgent.util.userAgent_=e||goog.labs.userAgent.util.getNativeUserAgentString_()};goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_};goog.labs.userAgent.util.matchUserAgent=function(e){var o=goog.labs.userAgent.util.getUserAgent();return goog.string.contains(o,e)};goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(e){var o=goog.labs.userAgent.util.getUserAgent();return goog.string.caseInsensitiveContains(o,e)};goog.labs.userAgent.util.extractVersionTuples=function(e){var o=new RegExp("(\\w[\\w ]+)"+"/"+"([^\\s]+)"+"\\s*"+"(?:\\((.*?)\\))?","g");var t=[];var r;while(r=o.exec(e)){t.push([r[1],r[2],r[3]||undefined])}return t};goog.provide("goog.object");goog.object.forEach=function(e,o,t){for(var r in e){o.call(t,e[r],r,e)}};goog.object.filter=function(e,o,t){var r={};for(var i in e){if(o.call(t,e[i],i,e)){r[i]=e[i]}}return r};goog.object.map=function(e,o,t){var r={};for(var i in e){r[i]=o.call(t,e[i],i,e)}return r};goog.object.some=function(e,o,t){for(var r in e){if(o.call(t,e[r],r,e)){return true}}return false};goog.object.every=function(e,o,t){for(var r in e){if(!o.call(t,e[r],r,e)){return false}}return true};goog.object.getCount=function(e){var o=0;for(var t in e){o++}return o};goog.object.getAnyKey=function(e){for(var o in e){return o}};goog.object.getAnyValue=function(e){for(var o in e){return e[o]}};goog.object.contains=function(e,o){return goog.object.containsValue(e,o)};goog.object.getValues=function(e){var o=[];var t=0;for(var r in e){o[t++]=e[r]}return o};goog.object.getKeys=function(e){var o=[];var t=0;for(var r in e){o[t++]=r}return o};goog.object.getValueByKeys=function(e,o){var t=goog.isArrayLike(o);var r=t?o:arguments;for(var i=t?0:1;i<r.length;i++){e=e[r[i]];if(!goog.isDef(e)){break}}return e};goog.object.containsKey=function(e,o){return e!==null&&o in e};goog.object.containsValue=function(e,o){for(var t in e){if(e[t]==o){return true}}return false};goog.object.findKey=function(e,o,t){for(var r in e){if(o.call(t,e[r],r,e)){return r}}return undefined};goog.object.findValue=function(e,o,t){var r=goog.object.findKey(e,o,t);return r&&e[r]};goog.object.isEmpty=function(e){for(var o in e){return false}return true};goog.object.clear=function(e){for(var o in e){delete e[o]}};goog.object.remove=function(e,o){var t;if(t=o in e){delete e[o]}return t};goog.object.add=function(e,o,t){if(e!==null&&o in e){throw Error('The object already contains the key "'+o+'"')}goog.object.set(e,o,t)};goog.object.get=function(e,o,t){if(e!==null&&o in e){return e[o]}return t};goog.object.set=function(e,o,t){e[o]=t};goog.object.setIfUndefined=function(e,o,t){return o in e?e[o]:e[o]=t};goog.object.setWithReturnValueIfNotSet=function(e,o,t){if(o in e){return e[o]}var r=t();e[o]=r;return r};goog.object.equals=function(e,o){for(var t in e){if(!(t in o)||e[t]!==o[t]){return false}}for(var t in o){if(!(t in e)){return false}}return true};goog.object.clone=function(e){var o={};for(var t in e){o[t]=e[t]}return o};goog.object.unsafeClone=function(e){var o=goog.typeOf(e);if(o=="object"||o=="array"){if(goog.isFunction(e.clone)){return e.clone()}var t=o=="array"?[]:{};for(var r in e){t[r]=goog.object.unsafeClone(e[r])}return t}return e};goog.object.transpose=function(e){var o={};for(var t in e){o[e[t]]=t}return o};goog.object.PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];goog.object.extend=function(e,o){var t,r;for(var i=1;i<arguments.length;i++){r=arguments[i];for(t in r){e[t]=r[t]}for(var n=0;n<goog.object.PROTOTYPE_FIELDS_.length;n++){t=goog.object.PROTOTYPE_FIELDS_[n];if(Object.prototype.hasOwnProperty.call(r,t)){e[t]=r[t]}}}};goog.object.create=function(e){var o=arguments.length;if(o==1&&goog.isArray(arguments[0])){return goog.object.create.apply(null,arguments[0])}if(o%2){throw Error("Uneven number of arguments")}var t={};for(var r=0;r<o;r+=2){t[arguments[r]]=arguments[r+1]}return t};goog.object.createSet=function(e){var o=arguments.length;if(o==1&&goog.isArray(arguments[0])){return goog.object.createSet.apply(null,arguments[0])}var t={};for(var r=0;r<o;r++){t[arguments[r]]=true}return t};goog.object.createImmutableView=function(e){var o=e;if(Object.isFrozen&&!Object.isFrozen(e)){o=Object.create(e);Object.freeze(o)}return o};goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)};goog.provide("goog.labs.userAgent.browser");goog.require("goog.array");goog.require("goog.labs.userAgent.util");goog.require("goog.object");goog.require("goog.string");goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")||goog.labs.userAgent.util.matchUserAgent("OPR")};goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")};goog.labs.userAgent.browser.matchEdge_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")};goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")};goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdge_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))};goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")};goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")};goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchOpera_()&&!goog.labs.userAgent.browser.matchEdge_()};goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())};goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_;goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_;goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdge_;goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_;goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_;goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_;goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_;goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_;goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_;goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")};goog.labs.userAgent.browser.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE()){return goog.labs.userAgent.browser.getIEVersion_(e)}var o=goog.labs.userAgent.util.extractVersionTuples(e);var t={};goog.array.forEach(o,function(e){var o=e[0];var r=e[1];t[o]=r});var r=goog.partial(goog.object.containsKey,t);function i(e){var o=goog.array.find(e,r);return t[o]||""}if(goog.labs.userAgent.browser.isOpera()){return i(["Version","Opera","OPR"])}if(goog.labs.userAgent.browser.isEdge()){return i(["Edge"])}if(goog.labs.userAgent.browser.isChrome()){return i(["Chrome","CriOS"])}var n=o[2];return n&&n[1]||""};goog.labs.userAgent.browser.isVersionOrHigher=function(e){return goog.string.compareVersions(goog.labs.userAgent.browser.getVersion(),e)>=0};goog.labs.userAgent.browser.getIEVersion_=function(e){var o=/rv: *([\d\.]*)/.exec(e);if(o&&o[1]){return o[1]}var t="";var r=/MSIE +([\d\.]+)/.exec(e);if(r&&r[1]){var i=/Trident\/(\d.\d)/.exec(e);if(r[1]=="7.0"){if(i&&i[1]){switch(i[1]){case"4.0":t="8.0";break;case"5.0":t="9.0";break;case"6.0":t="10.0";break;case"7.0":t="11.0";break}}else{t="7.0"}}else{t=r[1]}}return t};goog.provide("goog.labs.userAgent.engine");goog.require("goog.array");goog.require("goog.labs.userAgent.util");goog.require("goog.string");goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")};goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")};goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")};goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()};goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()};goog.labs.userAgent.engine.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent();if(e){var o=goog.labs.userAgent.util.extractVersionTuples(e);var t=goog.labs.userAgent.engine.getEngineTuple_(o);if(t){if(t[0]=="Gecko"){return goog.labs.userAgent.engine.getVersionForKey_(o,"Firefox")}return t[1]}var r=o[0];var i;if(r&&(i=r[2])){var n=/Trident\/([^\s;]+)/.exec(i);if(n){return n[1]}}}return""};goog.labs.userAgent.engine.getEngineTuple_=function(e){if(!goog.labs.userAgent.engine.isEdge()){return e[1]}for(var o=0;o<e.length;o++){var t=e[o];if(t[0]=="Edge"){return t}}};goog.labs.userAgent.engine.isVersionOrHigher=function(e){return goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),e)>=0};goog.labs.userAgent.engine.getVersionForKey_=function(e,o){var t=goog.array.find(e,function(e){return o==e[0]});return t&&t[1]||""};goog.provide("goog.labs.userAgent.platform");goog.require("goog.labs.userAgent.util");goog.require("goog.string");goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")};goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")};goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")};goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")};goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()};goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")};goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")};goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")};goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")};goog.labs.userAgent.platform.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent();var o="",t;if(goog.labs.userAgent.platform.isWindows()){t=/Windows (?:NT|Phone) ([0-9.]+)/;var r=t.exec(e);if(r){o=r[1]}else{o="0.0"}}else if(goog.labs.userAgent.platform.isIos()){t=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/;var r=t.exec(e);o=r&&r[1].replace(/_/g,".")}else if(goog.labs.userAgent.platform.isMacintosh()){t=/Mac OS X ([0-9_.]+)/;var r=t.exec(e);o=r?r[1].replace(/_/g,"."):"10"}else if(goog.labs.userAgent.platform.isAndroid()){t=/Android\s+([^\);]+)(\)|;)/;var r=t.exec(e);o=r&&r[1]}else if(goog.labs.userAgent.platform.isChromeOS()){t=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/;var r=t.exec(e);o=r&&r[1]}return o||""};goog.labs.userAgent.platform.isVersionOrHigher=function(e){return goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),e)>=0};goog.provide("goog.userAgent");goog.require("goog.labs.userAgent.browser");goog.require("goog.labs.userAgent.engine");goog.require("goog.labs.userAgent.platform");goog.require("goog.labs.userAgent.util");goog.require("goog.string");goog.define("goog.userAgent.ASSUME_IE",false);goog.define("goog.userAgent.ASSUME_EDGE",false);goog.define("goog.userAgent.ASSUME_GECKO",false);goog.define("goog.userAgent.ASSUME_WEBKIT",false);goog.define("goog.userAgent.ASSUME_MOBILE_WEBKIT",false);goog.define("goog.userAgent.ASSUME_OPERA",false);goog.define("goog.userAgent.ASSUME_ANY_VERSION",false);goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA;goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()};goog.userAgent.getNavigator=function(){return goog.global["navigator"]||null};goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera();goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE();goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge();goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE;goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko();goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit();goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")};goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_();goog.userAgent.SAFARI=goog.userAgent.WEBKIT;goog.userAgent.determinePlatform_=function(){var e=goog.userAgent.getNavigator();return e&&e.platform||""};goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_();goog.define("goog.userAgent.ASSUME_MAC",false);goog.define("goog.userAgent.ASSUME_WINDOWS",false);goog.define("goog.userAgent.ASSUME_LINUX",false);goog.define("goog.userAgent.ASSUME_X11",false);goog.define("goog.userAgent.ASSUME_ANDROID",false);goog.define("goog.userAgent.ASSUME_IPHONE",false);goog.define("goog.userAgent.ASSUME_IPAD",false);goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD;goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh();goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows();goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()};goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_();goog.userAgent.isX11_=function(){var e=goog.userAgent.getNavigator();return!!e&&goog.string.contains(e["appVersion"]||"","X11")};goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_();goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid();goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone();goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad();goog.userAgent.operaVersion_=function(){var e=goog.global.opera.version;try{return e()}catch(o){return e}};goog.userAgent.determineVersion_=function(){if(goog.userAgent.OPERA&&goog.global["opera"]){return goog.userAgent.operaVersion_()}var e="";var o=goog.userAgent.getVersionRegexResult_();if(o){e=o?o[1]:""}if(goog.userAgent.IE){var t=goog.userAgent.getDocumentMode_();if(t!=null&&t>parseFloat(e)){return String(t)}}return e};goog.userAgent.getVersionRegexResult_=function(){var e=goog.userAgent.getUserAgentString();if(goog.userAgent.GECKO){return/rv\:([^\);]+)(\)|;)/.exec(e)}if(goog.userAgent.EDGE){return/Edge\/([\d\.]+)/.exec(e)}if(goog.userAgent.IE){return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e)}if(goog.userAgent.WEBKIT){return/WebKit\/(\S+)/.exec(e)}};goog.userAgent.getDocumentMode_=function(){var e=goog.global["document"];return e?e["documentMode"]:undefined};goog.userAgent.VERSION=goog.userAgent.determineVersion_();goog.userAgent.compare=function(e,o){return goog.string.compareVersions(e,o)};goog.userAgent.isVersionOrHigherCache_={};goog.userAgent.isVersionOrHigher=function(e){return goog.userAgent.ASSUME_ANY_VERSION||goog.userAgent.isVersionOrHigherCache_[e]||(goog.userAgent.isVersionOrHigherCache_[e]=goog.string.compareVersions(goog.userAgent.VERSION,e)>=0)};goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher;goog.userAgent.isDocumentModeOrHigher=function(e){return Number(goog.userAgent.DOCUMENT_MODE)>=e};goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher;goog.userAgent.DOCUMENT_MODE=function(){var e=goog.global["document"];var o=goog.userAgent.getDocumentMode_();if(!e||!goog.userAgent.IE){return undefined}return o||(e["compatMode"]=="CSS1Compat"?parseInt(goog.userAgent.VERSION,10):5)}();goog.provide("goog.dom.BrowserFeature");goog.require("goog.userAgent");goog.dom.BrowserFeature={CAN_ADD_NAME_OR_TYPE_ATTRIBUTES:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),CAN_USE_CHILDREN_ATTRIBUTE:!goog.userAgent.GECKO&&!goog.userAgent.IE||goog.userAgent.IE&&goog.userAgent.isDocumentModeOrHigher(9)||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9.1"),CAN_USE_INNER_TEXT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),CAN_USE_PARENT_ELEMENT_PROPERTY:goog.userAgent.IE||goog.userAgent.OPERA||goog.userAgent.WEBKIT,INNER_HTML_NEEDS_SCOPED_ELEMENT:goog.userAgent.IE,LEGACY_IE_RANGES:goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)};goog.provide("goog.dom.TagName");goog.dom.TagName={A:"A",ABBR:"ABBR",ACRONYM:"ACRONYM",ADDRESS:"ADDRESS",APPLET:"APPLET",AREA:"AREA",ARTICLE:"ARTICLE",ASIDE:"ASIDE",AUDIO:"AUDIO",B:"B",BASE:"BASE",BASEFONT:"BASEFONT",BDI:"BDI",BDO:"BDO",BIG:"BIG",BLOCKQUOTE:"BLOCKQUOTE",BODY:"BODY",BR:"BR",BUTTON:"BUTTON",CANVAS:"CANVAS",CAPTION:"CAPTION",CENTER:"CENTER",CITE:"CITE",CODE:"CODE",COL:"COL",COLGROUP:"COLGROUP",COMMAND:"COMMAND",DATA:"DATA",DATALIST:"DATALIST",DD:"DD",DEL:"DEL",DETAILS:"DETAILS",DFN:"DFN",DIALOG:"DIALOG",DIR:"DIR",DIV:"DIV",DL:"DL",DT:"DT",EM:"EM",EMBED:"EMBED",FIELDSET:"FIELDSET",FIGCAPTION:"FIGCAPTION",FIGURE:"FIGURE",FONT:"FONT",FOOTER:"FOOTER",FORM:"FORM",FRAME:"FRAME",FRAMESET:"FRAMESET",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",HEAD:"HEAD",HEADER:"HEADER",HGROUP:"HGROUP",HR:"HR",HTML:"HTML",I:"I",IFRAME:"IFRAME",IMG:"IMG",INPUT:"INPUT",INS:"INS",ISINDEX:"ISINDEX",KBD:"KBD",KEYGEN:"KEYGEN",LABEL:"LABEL",LEGEND:"LEGEND",LI:"LI",LINK:"LINK",MAP:"MAP",MARK:"MARK",MATH:"MATH",MENU:"MENU",META:"META",METER:"METER",NAV:"NAV",NOFRAMES:"NOFRAMES",NOSCRIPT:"NOSCRIPT",OBJECT:"OBJECT",OL:"OL",OPTGROUP:"OPTGROUP",OPTION:"OPTION",OUTPUT:"OUTPUT",P:"P",PARAM:"PARAM",PRE:"PRE",PROGRESS:"PROGRESS",Q:"Q",RP:"RP",RT:"RT",RUBY:"RUBY",S:"S",SAMP:"SAMP",SCRIPT:"SCRIPT",SECTION:"SECTION",SELECT:"SELECT",SMALL:"SMALL",SOURCE:"SOURCE",SPAN:"SPAN",STRIKE:"STRIKE",STRONG:"STRONG",STYLE:"STYLE",SUB:"SUB",SUMMARY:"SUMMARY",SUP:"SUP",SVG:"SVG",TABLE:"TABLE",TBODY:"TBODY",TD:"TD",TEMPLATE:"TEMPLATE",TEXTAREA:"TEXTAREA",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",TIME:"TIME",TITLE:"TITLE",TR:"TR",TRACK:"TRACK",TT:"TT",U:"U",UL:"UL",VAR:"VAR",VIDEO:"VIDEO",WBR:"WBR"};goog.provide("goog.dom.tags");goog.require("goog.object");goog.dom.tags.VOID_TAGS_=goog.object.createSet("area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr");goog.dom.tags.isVoidTag=function(e){return goog.dom.tags.VOID_TAGS_[e]===true};goog.provide("goog.string.TypedString");goog.string.TypedString=function(){};goog.string.TypedString.prototype.implementsGoogStringTypedString;goog.string.TypedString.prototype.getTypedStringValue;goog.provide("goog.string.Const");goog.require("goog.asserts");goog.require("goog.string.TypedString");goog.string.Const=function(){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_="";this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_};goog.string.Const.prototype.implementsGoogStringTypedString=true;goog.string.Const.prototype.getTypedStringValue=function(){
return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_};goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"};goog.string.Const.unwrap=function(e){if(e instanceof goog.string.Const&&e.constructor===goog.string.Const&&e.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_){return e.stringConstValueWithSecurityContract__googStringSecurityPrivate_}else{goog.asserts.fail("expected object of type Const, got '"+e+"'");return"type_error:Const"}};goog.string.Const.from=function(e){return goog.string.Const.create__googStringSecurityPrivate_(e)};goog.string.Const.TYPE_MARKER_={};goog.string.Const.create__googStringSecurityPrivate_=function(e){var o=new goog.string.Const;o.stringConstValueWithSecurityContract__googStringSecurityPrivate_=e;return o};goog.provide("goog.html.SafeStyle");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.string");goog.require("goog.string.Const");goog.require("goog.string.TypedString");goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="";this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.SafeStyle.prototype.implementsGoogStringTypedString=true;goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeStyle.fromConstant=function(e){var o=goog.string.Const.unwrap(e);if(o.length===0){return goog.html.SafeStyle.EMPTY}goog.html.SafeStyle.checkStyle_(o);goog.asserts.assert(goog.string.endsWith(o,";"),"Last character of style string is not ';': "+o);goog.asserts.assert(goog.string.contains(o,":"),"Style string must contain at least one ':', to "+'specify a "name: value" pair: '+o);return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(o)};goog.html.SafeStyle.checkStyle_=function(e){goog.asserts.assert(!/[<>]/.test(e),"Forbidden characters in style string: "+e)};goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_};if(goog.DEBUG){goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}}goog.html.SafeStyle.unwrap=function(e){if(e instanceof goog.html.SafeStyle&&e.constructor===goog.html.SafeStyle&&e.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_){return e.privateDoNotAccessOrElseSafeStyleWrappedValue_}else{goog.asserts.fail("expected object of type SafeStyle, got '"+e+"' of type "+goog.typeOf(e));return"type_error:SafeStyle"}};goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyle).initSecurityPrivateDoNotAccessOrElse_(e)};goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){this.privateDoNotAccessOrElseSafeStyleWrappedValue_=e;return this};goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse("");goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez";goog.html.SafeStyle.PropertyMap;goog.html.SafeStyle.create=function(e){var o="";for(var t in e){if(!/^[-_a-zA-Z0-9]+$/.test(t)){throw Error("Name allows only [-_a-zA-Z0-9], got: "+t)}var r=e[t];if(r==null){continue}if(r instanceof goog.string.Const){r=goog.string.Const.unwrap(r);goog.asserts.assert(!/[{;}]/.test(r),"Value does not allow [{;}].")}else if(!goog.html.SafeStyle.VALUE_RE_.test(r)){goog.asserts.fail("String value allows only [-,.\"'%_!# a-zA-Z0-9], rgb() and "+"rgba(), got: "+r);r=goog.html.SafeStyle.INNOCUOUS_STRING}else if(!goog.html.SafeStyle.hasBalancedQuotes_(r)){goog.asserts.fail("String value requires balanced quotes, got: "+r);r=goog.html.SafeStyle.INNOCUOUS_STRING}o+=t+":"+r+";"}if(!o){return goog.html.SafeStyle.EMPTY}goog.html.SafeStyle.checkStyle_(o);return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(o)};goog.html.SafeStyle.hasBalancedQuotes_=function(e){var o=true;var t=true;for(var r=0;r<e.length;r++){var i=e.charAt(r);if(i=="'"&&t){o=!o}else if(i=='"'&&o){t=!t}}return o&&t};goog.html.SafeStyle.VALUE_RE_=/^([-,."'%_!# a-zA-Z0-9]+|(?:rgb|hsl)a?\([0-9.%, ]+\))$/;goog.html.SafeStyle.concat=function(e){var o="";var t=function(e){if(goog.isArray(e)){goog.array.forEach(e,t)}else{o+=goog.html.SafeStyle.unwrap(e)}};goog.array.forEach(arguments,t);if(!o){return goog.html.SafeStyle.EMPTY}return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(o)};goog.provide("goog.html.SafeStyleSheet");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.string");goog.require("goog.string.Const");goog.require("goog.string.TypedString");goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="";this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=true;goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeStyleSheet.concat=function(e){var o="";var t=function(e){if(goog.isArray(e)){goog.array.forEach(e,t)}else{o+=goog.html.SafeStyleSheet.unwrap(e)}};goog.array.forEach(arguments,t);return goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(o)};goog.html.SafeStyleSheet.fromConstant=function(e){var o=goog.string.Const.unwrap(e);if(o.length===0){return goog.html.SafeStyleSheet.EMPTY}goog.asserts.assert(!goog.string.contains(o,"<"),"Forbidden '<' character in style sheet string: "+o);return goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(o)};goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_};if(goog.DEBUG){goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}}goog.html.SafeStyleSheet.unwrap=function(e){if(e instanceof goog.html.SafeStyleSheet&&e.constructor===goog.html.SafeStyleSheet&&e.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_){return e.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_}else{goog.asserts.fail("expected object of type SafeStyleSheet, got '"+e+"' of type "+goog.typeOf(e));return"type_error:SafeStyleSheet"}};goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyleSheet).initSecurityPrivateDoNotAccessOrElse_(e)};goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=e;return this};goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse("");goog.provide("goog.fs.url");goog.fs.url.createObjectUrl=function(e){return goog.fs.url.getUrlObject_().createObjectURL(e)};goog.fs.url.revokeObjectUrl=function(e){goog.fs.url.getUrlObject_().revokeObjectURL(e)};goog.fs.url.UrlObject_;goog.fs.url.getUrlObject_=function(){var e=goog.fs.url.findUrlObject_();if(e!=null){return e}else{throw Error("This browser doesn't seem to support blob URLs")}};goog.fs.url.findUrlObject_=function(){if(goog.isDef(goog.global.URL)&&goog.isDef(goog.global.URL.createObjectURL)){return goog.global.URL}else if(goog.isDef(goog.global.webkitURL)&&goog.isDef(goog.global.webkitURL.createObjectURL)){return goog.global.webkitURL}else if(goog.isDef(goog.global.createObjectURL)){return goog.global}else{return null}};goog.fs.url.browserSupportsObjectUrls=function(){return goog.fs.url.findUrlObject_()!=null};goog.provide("goog.i18n.bidi");goog.provide("goog.i18n.bidi.Dir");goog.provide("goog.i18n.bidi.DirectionalString");goog.provide("goog.i18n.bidi.Format");goog.define("goog.i18n.bidi.FORCE_RTL",false);goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||(goog.LOCALE.substring(0,2).toLowerCase()=="ar"||goog.LOCALE.substring(0,2).toLowerCase()=="fa"||goog.LOCALE.substring(0,2).toLowerCase()=="he"||goog.LOCALE.substring(0,2).toLowerCase()=="iw"||goog.LOCALE.substring(0,2).toLowerCase()=="ps"||goog.LOCALE.substring(0,2).toLowerCase()=="sd"||goog.LOCALE.substring(0,2).toLowerCase()=="ug"||goog.LOCALE.substring(0,2).toLowerCase()=="ur"||goog.LOCALE.substring(0,2).toLowerCase()=="yi")&&(goog.LOCALE.length==2||goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")||goog.LOCALE.length>=3&&goog.LOCALE.substring(0,3).toLowerCase()=="ckb"&&(goog.LOCALE.length==3||goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_");goog.i18n.bidi.Format={LRE:"‪",RLE:"‫",PDF:"‬",LRM:"‎",RLM:"‏"};goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0};goog.i18n.bidi.RIGHT="right";goog.i18n.bidi.LEFT="left";goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT;goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT;goog.i18n.bidi.toDir=function(e,o){if(typeof e=="number"){return e>0?goog.i18n.bidi.Dir.LTR:e<0?goog.i18n.bidi.Dir.RTL:o?null:goog.i18n.bidi.Dir.NEUTRAL}else if(e==null){return null}else{return e?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR}};goog.i18n.bidi.ltrChars_="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿"+"‎Ⰰ-﬜︀-﹯﻽-￿";goog.i18n.bidi.rtlChars_="֑-ۯۺ-߿‏יִ-﷿ﹰ-ﻼ";goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g;goog.i18n.bidi.stripHtmlIfNeeded_=function(e,o){return o?e.replace(goog.i18n.bidi.htmlSkipReg_,""):e};goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]");goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]");goog.i18n.bidi.hasAnyRtl=function(e,o){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,o))};goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl;goog.i18n.bidi.hasAnyLtr=function(e,o){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,o))};goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]");goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]");goog.i18n.bidi.isRtlChar=function(e){return goog.i18n.bidi.rtlRe_.test(e)};goog.i18n.bidi.isLtrChar=function(e){return goog.i18n.bidi.ltrRe_.test(e)};goog.i18n.bidi.isNeutralChar=function(e){return!goog.i18n.bidi.isLtrChar(e)&&!goog.i18n.bidi.isRtlChar(e)};goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]");goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]");goog.i18n.bidi.startsWithRtl=function(e,o){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,o))};goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl;goog.i18n.bidi.startsWithLtr=function(e,o){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,o))};goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr;goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/;goog.i18n.bidi.isNeutralText=function(e,o){e=goog.i18n.bidi.stripHtmlIfNeeded_(e,o);return goog.i18n.bidi.isRequiredLtrRe_.test(e)||!goog.i18n.bidi.hasAnyLtr(e)&&!goog.i18n.bidi.hasAnyRtl(e)};goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$");goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$");goog.i18n.bidi.endsWithLtr=function(e,o){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,o))};goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr;goog.i18n.bidi.endsWithRtl=function(e,o){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,o))};goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl;goog.i18n.bidi.rtlLocalesRe_=new RegExp("^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|"+".*[-_](Arab|Hebr|Thaa|Nkoo|Tfng))"+"(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)","i");goog.i18n.bidi.isRtlLanguage=function(e){return goog.i18n.bidi.rtlLocalesRe_.test(e)};goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g;goog.i18n.bidi.guardBracketInText=function(e,o){var t=o===undefined?goog.i18n.bidi.hasAnyRtl(e):o;var r=t?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM;return e.replace(goog.i18n.bidi.bracketGuardTextRe_,r+"$&"+r)};goog.i18n.bidi.enforceRtlInHtml=function(e){if(e.charAt(0)=="<"){return e.replace(/<\w+/,"$& dir=rtl")}return"\n<span dir=rtl>"+e+"</span>"};goog.i18n.bidi.enforceRtlInText=function(e){return goog.i18n.bidi.Format.RLE+e+goog.i18n.bidi.Format.PDF};goog.i18n.bidi.enforceLtrInHtml=function(e){if(e.charAt(0)=="<"){return e.replace(/<\w+/,"$& dir=ltr")}return"\n<span dir=ltr>"+e+"</span>"};goog.i18n.bidi.enforceLtrInText=function(e){return goog.i18n.bidi.Format.LRE+e+goog.i18n.bidi.Format.PDF};goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g;goog.i18n.bidi.leftRe_=/left/gi;goog.i18n.bidi.rightRe_=/right/gi;goog.i18n.bidi.tempRe_=/%%%%/g;goog.i18n.bidi.mirrorCSS=function(e){return e.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)};goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g;goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g;goog.i18n.bidi.normalizeHebrewQuote=function(e){return e.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1״").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1׳")};goog.i18n.bidi.wordSeparatorRe_=/\s+/;goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/;goog.i18n.bidi.rtlDetectionThreshold_=.4;goog.i18n.bidi.estimateDirection=function(e,o){var t=0;var r=0;var i=false;var n=goog.i18n.bidi.stripHtmlIfNeeded_(e,o).split(goog.i18n.bidi.wordSeparatorRe_);for(var a=0;a<n.length;a++){var l=n[a];if(goog.i18n.bidi.startsWithRtl(l)){t++;r++}else if(goog.i18n.bidi.isRequiredLtrRe_.test(l)){i=true}else if(goog.i18n.bidi.hasAnyLtr(l)){r++}else if(goog.i18n.bidi.hasNumeralsRe_.test(l)){i=true}}return r==0?i?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:t/r>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR};goog.i18n.bidi.detectRtlDirectionality=function(e,o){return goog.i18n.bidi.estimateDirection(e,o)==goog.i18n.bidi.Dir.RTL};goog.i18n.bidi.setElementDirAndAlign=function(e,o){if(e){o=goog.i18n.bidi.toDir(o);if(o){e.style.textAlign=o==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT;e.dir=o==goog.i18n.bidi.Dir.RTL?"rtl":"ltr"}}};goog.i18n.bidi.setElementDirByTextDirectionality=function(e,o){switch(goog.i18n.bidi.estimateDirection(o)){case goog.i18n.bidi.Dir.LTR:e.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:e.dir="rtl";break;default:e.removeAttribute("dir")}};goog.i18n.bidi.DirectionalString=function(){};goog.i18n.bidi.DirectionalString.prototype.implementsGoogI18nBidiDirectionalString;goog.i18n.bidi.DirectionalString.prototype.getDirection;goog.provide("goog.html.SafeUrl");goog.require("goog.asserts");goog.require("goog.fs.url");goog.require("goog.i18n.bidi.Dir");goog.require("goog.i18n.bidi.DirectionalString");goog.require("goog.string.Const");goog.require("goog.string.TypedString");goog.html.SafeUrl=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="";this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez";goog.html.SafeUrl.prototype.implementsGoogStringTypedString=true;goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_};goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=true;goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR};if(goog.DEBUG){goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}}goog.html.SafeUrl.unwrap=function(e){if(e instanceof goog.html.SafeUrl&&e.constructor===goog.html.SafeUrl&&e.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_){return e.privateDoNotAccessOrElseSafeHtmlWrappedValue_}else{goog.asserts.fail("expected object of type SafeUrl, got '"+e+"' of type "+goog.typeOf(e));return"type_error:SafeUrl"}};goog.html.SafeUrl.fromConstant=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))};goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm))$/i;goog.html.SafeUrl.fromBlob=function(e){var o=goog.html.SAFE_MIME_TYPE_PATTERN_.test(e.type)?goog.fs.url.createObjectUrl(e):goog.html.SafeUrl.INNOCUOUS_STRING;return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o)};goog.html.DATA_URL_PATTERN_=/^data:([^;,]*);base64,[a-z0-9+\/]+=*$/i;goog.html.SafeUrl.fromDataUrl=function(e){var o=e.match(goog.html.DATA_URL_PATTERN_);var t=o&&goog.html.SAFE_MIME_TYPE_PATTERN_.test(o[1]);return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t?e:goog.html.SafeUrl.INNOCUOUS_STRING)};goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^&:\/?#]*(?:[\/?#]|$))/i;goog.html.SafeUrl.sanitize=function(e){if(e instanceof goog.html.SafeUrl){return e}else if(e.implementsGoogStringTypedString){e=e.getTypedStringValue()}else{e=String(e)}if(!goog.html.SAFE_URL_PATTERN_.test(e)){e=goog.html.SafeUrl.INNOCUOUS_STRING}return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)};goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(e){var o=new goog.html.SafeUrl;o.privateDoNotAccessOrElseSafeHtmlWrappedValue_=e;return o};goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank");goog.provide("goog.html.TrustedResourceUrl");goog.require("goog.asserts");goog.require("goog.i18n.bidi.Dir");goog.require("goog.i18n.bidi.DirectionalString");goog.require("goog.string.Const");goog.require("goog.string.TypedString");goog.html.TrustedResourceUrl=function(){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_="";this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=true;goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_};goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=true;goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR};if(goog.DEBUG){goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}}goog.html.TrustedResourceUrl.unwrap=function(e){if(e instanceof goog.html.TrustedResourceUrl&&e.constructor===goog.html.TrustedResourceUrl&&e.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_){return e.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_}else{goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+e+"' of type "+goog.typeOf(e));return"type_error:TrustedResourceUrl"}};goog.html.TrustedResourceUrl.fromConstant=function(e){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))};goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(e){var o=new goog.html.TrustedResourceUrl;o.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=e;return o};goog.provide("goog.html.SafeHtml");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.TagName");goog.require("goog.dom.tags");goog.require("goog.html.SafeStyle");goog.require("goog.html.SafeStyleSheet");goog.require("goog.html.SafeUrl");goog.require("goog.html.TrustedResourceUrl");goog.require("goog.i18n.bidi.Dir");goog.require("goog.i18n.bidi.DirectionalString");goog.require("goog.labs.userAgent.browser");goog.require("goog.object");goog.require("goog.string");goog.require("goog.string.Const");goog.require("goog.string.TypedString");goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="";this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_;this.dir_=null};goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=true;goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_};goog.html.SafeHtml.prototype.implementsGoogStringTypedString=true;goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_};if(goog.DEBUG){goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}}goog.html.SafeHtml.unwrap=function(e){if(e instanceof goog.html.SafeHtml&&e.constructor===goog.html.SafeHtml&&e.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_){return e.privateDoNotAccessOrElseSafeHtmlWrappedValue_}else{goog.asserts.fail("expected object of type SafeHtml, got '"+e+"' of type "+goog.typeOf(e));return"type_error:SafeHtml"}};goog.html.SafeHtml.TextOrHtml_;goog.html.SafeHtml.htmlEscape=function(e){if(e instanceof goog.html.SafeHtml){return e}var o=null;if(e.implementsGoogI18nBidiDirectionalString){o=e.getDirection()}var t;if(e.implementsGoogStringTypedString){t=e.getTypedStringValue()}else{t=String(e)}return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.htmlEscape(t),o)};goog.html.SafeHtml.htmlEscapePreservingNewlines=function(e){if(e instanceof goog.html.SafeHtml){return e}var o=goog.html.SafeHtml.htmlEscape(e);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.newLineToBr(goog.html.SafeHtml.unwrap(o)),o.getDirection())};goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(e){if(e instanceof goog.html.SafeHtml){return e}var o=goog.html.SafeHtml.htmlEscape(e);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.whitespaceEscape(goog.html.SafeHtml.unwrap(o)),o.getDirection())};goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape;goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/;goog.html.SafeHtml.URL_ATTRIBUTES_=goog.object.createSet("action","cite","data","formaction","href","manifest","poster","src");goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_=goog.object.createSet(goog.dom.TagName.APPLET,goog.dom.TagName.BASE,goog.dom.TagName.EMBED,goog.dom.TagName.IFRAME,goog.dom.TagName.LINK,goog.dom.TagName.MATH,goog.dom.TagName.META,goog.dom.TagName.OBJECT,goog.dom.TagName.SCRIPT,goog.dom.TagName.STYLE,goog.dom.TagName.SVG,goog.dom.TagName.TEMPLATE);goog.html.SafeHtml.AttributeValue;goog.html.SafeHtml.create=function(e,o,t){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(e)){throw Error("Invalid tag name <"+e+">.")}if(e.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_){throw Error("Tag name <"+e+"> is not allowed for SafeHtml.")}return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(e,o,t)};goog.html.SafeHtml.createIframe=function(e,o,t,r){var i={};i["src"]=e||null;i["srcdoc"]=o||null;var n={sandbox:""};var a=goog.html.SafeHtml.combineAttributes(i,n,t);return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",a,r)};goog.html.SafeHtml.createStyle=function(e,o){var t={type:"text/css"};var r={};var i=goog.html.SafeHtml.combineAttributes(t,r,o);var n="";e=goog.array.concat(e);for(var a=0;a<e.length;a++){n+=goog.html.SafeStyleSheet.unwrap(e[a])}var l=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n,goog.i18n.bidi.Dir.NEUTRAL);return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",i,l)};goog.html.SafeHtml.createMetaRefresh=function(e,o){var t=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(e));if(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge()){if(goog.string.contains(t,";")){t="'"+t.replace(/'/g,"%27")+"'"}}var r={"http-equiv":"refresh",content:(o||0)+"; url="+t};return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",r)};goog.html.SafeHtml.getAttrNameAndValue_=function(e,o,t){if(t instanceof goog.string.Const){t=goog.string.Const.unwrap(t)}else if(o.toLowerCase()=="style"){t=goog.html.SafeHtml.getStyleValue_(t)}else if(/^on/i.test(o)){throw Error('Attribute "'+o+'" requires goog.string.Const value, "'+t+'" given.')}else if(o.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_){if(t instanceof goog.html.TrustedResourceUrl){t=goog.html.TrustedResourceUrl.unwrap(t)}else if(t instanceof goog.html.SafeUrl){t=goog.html.SafeUrl.unwrap(t)}else if(goog.isString(t)){t=goog.html.SafeUrl.sanitize(t).getTypedStringValue()}else{throw Error('Attribute "'+o+'" on tag "'+e+'" requires goog.html.SafeUrl, goog.string.Const, or string,'+' value "'+t+'" given.')}}if(t.implementsGoogStringTypedString){t=t.getTypedStringValue()}goog.asserts.assert(goog.isString(t)||goog.isNumber(t),"String or number value expected, got "+typeof t+" with value: "+t);return o+'="'+goog.string.htmlEscape(String(t))+'"'};goog.html.SafeHtml.getStyleValue_=function(e){if(!goog.isObject(e)){throw Error('The "style" attribute requires goog.html.SafeStyle or map '+"of style properties, "+typeof e+" given: "+e)}if(!(e instanceof goog.html.SafeStyle)){e=goog.html.SafeStyle.create(e)}return goog.html.SafeStyle.unwrap(e)};goog.html.SafeHtml.createWithDir=function(e,o,t,r){var i=goog.html.SafeHtml.create(o,t,r);i.dir_=e;return i};goog.html.SafeHtml.concat=function(e){var o=goog.i18n.bidi.Dir.NEUTRAL;var t="";var r=function(e){if(goog.isArray(e)){goog.array.forEach(e,r)}else{var i=goog.html.SafeHtml.htmlEscape(e);t+=goog.html.SafeHtml.unwrap(i);var n=i.getDirection();if(o==goog.i18n.bidi.Dir.NEUTRAL){o=n}else if(n!=goog.i18n.bidi.Dir.NEUTRAL&&o!=n){o=null}}};goog.array.forEach(arguments,r);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(t,o)};goog.html.SafeHtml.concatWithDir=function(e,o){var t=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));t.dir_=e;return t};goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(e,o){return(new goog.html.SafeHtml).initSecurityPrivateDoNotAccessOrElse_(e,o)};goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e,o){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=e;this.dir_=o;return this};goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(e,o,t){var r=null;var i="<"+e;if(o){for(var n in o){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(n)){throw Error('Invalid attribute name "'+n+'".')}var a=o[n];if(!goog.isDefAndNotNull(a)){continue}i+=" "+goog.html.SafeHtml.getAttrNameAndValue_(e,n,a)}}var l=t;if(!goog.isDefAndNotNull(l)){l=[]}else if(!goog.isArray(l)){l=[l]}if(goog.dom.tags.isVoidTag(e.toLowerCase())){goog.asserts.assert(!l.length,"Void tag <"+e+"> does not allow content.");i+=">"}else{var s=goog.html.SafeHtml.concat(l);i+=">"+goog.html.SafeHtml.unwrap(s)+"</"+e+">";r=s.getDirection()}var g=o&&o["dir"];if(g){if(/^(ltr|rtl|auto)$/i.test(g)){r=goog.i18n.bidi.Dir.NEUTRAL}else{r=null}}return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(i,r)};goog.html.SafeHtml.combineAttributes=function(e,o,t){var r={};var i;for(i in e){goog.asserts.assert(i.toLowerCase()==i,"Must be lower case");r[i]=e[i]}for(i in o){goog.asserts.assert(i.toLowerCase()==i,"Must be lower case");r[i]=o[i]}for(i in t){var n=i.toLowerCase();if(n in e){throw Error('Cannot override "'+n+'" attribute, got "'+i+'" with value "'+t[i]+'"')}if(n in o){delete r[n]}r[i]=t[i]}return r};goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL);goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL);goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL);goog.provide("goog.dom.safe");goog.provide("goog.dom.safe.InsertAdjacentHtmlPosition");goog.require("goog.asserts");goog.require("goog.html.SafeHtml");goog.require("goog.html.SafeUrl");goog.require("goog.html.TrustedResourceUrl");goog.require("goog.string");goog.require("goog.string.Const");goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"};goog.dom.safe.insertAdjacentHtml=function(e,o,t){e.insertAdjacentHTML(o,goog.html.SafeHtml.unwrap(t))};goog.dom.safe.setInnerHtml=function(e,o){e.innerHTML=goog.html.SafeHtml.unwrap(o)};goog.dom.safe.setOuterHtml=function(e,o){e.outerHTML=goog.html.SafeHtml.unwrap(o)};goog.dom.safe.documentWrite=function(e,o){e.write(goog.html.SafeHtml.unwrap(o))};goog.dom.safe.setAnchorHref=function(e,o){var t;if(o instanceof goog.html.SafeUrl){t=o}else{t=goog.html.SafeUrl.sanitize(o)}e.href=goog.html.SafeUrl.unwrap(t)};goog.dom.safe.setImageSrc=function(e,o){var t;if(o instanceof goog.html.SafeUrl){t=o}else{t=goog.html.SafeUrl.sanitize(o)}e.src=goog.html.SafeUrl.unwrap(t)};goog.dom.safe.setEmbedSrc=function(e,o){e.src=goog.html.TrustedResourceUrl.unwrap(o)};goog.dom.safe.setFrameSrc=function(e,o){e.src=goog.html.TrustedResourceUrl.unwrap(o)};goog.dom.safe.setIframeSrc=function(e,o){e.src=goog.html.TrustedResourceUrl.unwrap(o)};goog.dom.safe.setLinkHrefAndRel=function(e,o,t){e.rel=t;if(goog.string.caseInsensitiveContains(t,"stylesheet")){goog.asserts.assert(o instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"');e.href=goog.html.TrustedResourceUrl.unwrap(o)}else if(o instanceof goog.html.TrustedResourceUrl){e.href=goog.html.TrustedResourceUrl.unwrap(o)}else if(o instanceof goog.html.SafeUrl){e.href=goog.html.SafeUrl.unwrap(o)}else{e.href=goog.html.SafeUrl.sanitize(o).getTypedStringValue()}};goog.dom.safe.setObjectData=function(e,o){e.data=goog.html.TrustedResourceUrl.unwrap(o)};goog.dom.safe.setScriptSrc=function(e,o){e.src=goog.html.TrustedResourceUrl.unwrap(o)};goog.dom.safe.setLocationHref=function(e,o){var t;if(o instanceof goog.html.SafeUrl){t=o}else{t=goog.html.SafeUrl.sanitize(o)}e.href=goog.html.SafeUrl.unwrap(t)};goog.dom.safe.openInWindow=function(e,o,t,r,i){var n;if(e instanceof goog.html.SafeUrl){n=e}else{n=goog.html.SafeUrl.sanitize(e)}var a=o||window;return a.open(goog.html.SafeUrl.unwrap(n),t?goog.string.Const.unwrap(t):"",r,i)};goog.provide("goog.math.Coordinate");goog.require("goog.math");goog.math.Coordinate=function(e,o){this.x=goog.isDef(e)?e:0;this.y=goog.isDef(o)?o:0};goog.math.Coordinate.prototype.clone=function(){return new goog.math.Coordinate(this.x,this.y)};if(goog.DEBUG){goog.math.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"}}goog.math.Coordinate.equals=function(e,o){if(e==o){return true}if(!e||!o){return false}return e.x==o.x&&e.y==o.y};goog.math.Coordinate.distance=function(e,o){var t=e.x-o.x;var r=e.y-o.y;return Math.sqrt(t*t+r*r)};goog.math.Coordinate.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};goog.math.Coordinate.azimuth=function(e){return goog.math.angle(0,0,e.x,e.y)};goog.math.Coordinate.squaredDistance=function(e,o){var t=e.x-o.x;var r=e.y-o.y;return t*t+r*r};goog.math.Coordinate.difference=function(e,o){return new goog.math.Coordinate(e.x-o.x,e.y-o.y)};goog.math.Coordinate.sum=function(e,o){return new goog.math.Coordinate(e.x+o.x,e.y+o.y)};goog.math.Coordinate.prototype.ceil=function(){this.x=Math.ceil(this.x)
;this.y=Math.ceil(this.y);return this};goog.math.Coordinate.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};goog.math.Coordinate.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};goog.math.Coordinate.prototype.translate=function(e,o){if(e instanceof goog.math.Coordinate){this.x+=e.x;this.y+=e.y}else{this.x+=Number(e);if(goog.isNumber(o)){this.y+=o}}return this};goog.math.Coordinate.prototype.scale=function(e,o){var t=goog.isNumber(o)?o:e;this.x*=e;this.y*=t;return this};goog.math.Coordinate.prototype.rotateRadians=function(e,o){var t=o||new goog.math.Coordinate(0,0);var r=this.x;var i=this.y;var n=Math.cos(e);var a=Math.sin(e);this.x=(r-t.x)*n-(i-t.y)*a+t.x;this.y=(r-t.x)*a+(i-t.y)*n+t.y};goog.math.Coordinate.prototype.rotateDegrees=function(e,o){this.rotateRadians(goog.math.toRadians(e),o)};goog.provide("goog.math.Size");goog.math.Size=function(e,o){this.width=e;this.height=o};goog.math.Size.equals=function(e,o){if(e==o){return true}if(!e||!o){return false}return e.width==o.width&&e.height==o.height};goog.math.Size.prototype.clone=function(){return new goog.math.Size(this.width,this.height)};if(goog.DEBUG){goog.math.Size.prototype.toString=function(){return"("+this.width+" x "+this.height+")"}}goog.math.Size.prototype.getLongest=function(){return Math.max(this.width,this.height)};goog.math.Size.prototype.getShortest=function(){return Math.min(this.width,this.height)};goog.math.Size.prototype.area=function(){return this.width*this.height};goog.math.Size.prototype.perimeter=function(){return(this.width+this.height)*2};goog.math.Size.prototype.aspectRatio=function(){return this.width/this.height};goog.math.Size.prototype.isEmpty=function(){return!this.area()};goog.math.Size.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};goog.math.Size.prototype.fitsInside=function(e){return this.width<=e.width&&this.height<=e.height};goog.math.Size.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};goog.math.Size.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};goog.math.Size.prototype.scale=function(e,o){var t=goog.isNumber(o)?o:e;this.width*=e;this.height*=t;return this};goog.math.Size.prototype.scaleToCover=function(e){var o=this.aspectRatio()<=e.aspectRatio()?e.width/this.width:e.height/this.height;return this.scale(o)};goog.math.Size.prototype.scaleToFit=function(e){var o=this.aspectRatio()>e.aspectRatio()?e.width/this.width:e.height/this.height;return this.scale(o)};goog.provide("goog.dom");goog.provide("goog.dom.Appendable");goog.provide("goog.dom.DomHelper");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom.BrowserFeature");goog.require("goog.dom.NodeType");goog.require("goog.dom.TagName");goog.require("goog.dom.safe");goog.require("goog.html.SafeHtml");goog.require("goog.math.Coordinate");goog.require("goog.math.Size");goog.require("goog.object");goog.require("goog.string");goog.require("goog.string.Unicode");goog.require("goog.userAgent");goog.define("goog.dom.ASSUME_QUIRKS_MODE",false);goog.define("goog.dom.ASSUME_STANDARDS_MODE",false);goog.dom.COMPAT_MODE_KNOWN_=goog.dom.ASSUME_QUIRKS_MODE||goog.dom.ASSUME_STANDARDS_MODE;goog.dom.getDomHelper=function(e){return e?new goog.dom.DomHelper(goog.dom.getOwnerDocument(e)):goog.dom.defaultDomHelper_||(goog.dom.defaultDomHelper_=new goog.dom.DomHelper)};goog.dom.defaultDomHelper_;goog.dom.getDocument=function(){return document};goog.dom.getElement=function(e){return goog.dom.getElementHelper_(document,e)};goog.dom.getElementHelper_=function(e,o){return goog.isString(o)?e.getElementById(o):o};goog.dom.getRequiredElement=function(e){return goog.dom.getRequiredElementHelper_(document,e)};goog.dom.getRequiredElementHelper_=function(e,o){goog.asserts.assertString(o);var t=goog.dom.getElementHelper_(e,o);t=goog.asserts.assertElement(t,"No element found with id: "+o);return t};goog.dom.$=goog.dom.getElement;goog.dom.getElementsByTagNameAndClass=function(e,o,t){return goog.dom.getElementsByTagNameAndClass_(document,e,o,t)};goog.dom.getElementsByClass=function(e,o){var t=o||document;if(goog.dom.canUseQuerySelector_(t)){return t.querySelectorAll("."+e)}return goog.dom.getElementsByTagNameAndClass_(document,"*",e,o)};goog.dom.getElementByClass=function(e,o){var t=o||document;var r=null;if(t.getElementsByClassName){r=t.getElementsByClassName(e)[0]}else if(goog.dom.canUseQuerySelector_(t)){r=t.querySelector("."+e)}else{r=goog.dom.getElementsByTagNameAndClass_(document,"*",e,o)[0]}return r||null};goog.dom.getRequiredElementByClass=function(e,o){var t=goog.dom.getElementByClass(e,o);return goog.asserts.assert(t,"No element found with className: "+e)};goog.dom.canUseQuerySelector_=function(e){return!!(e.querySelectorAll&&e.querySelector)};goog.dom.getElementsByTagNameAndClass_=function(e,o,t,r){var i=r||e;var n=o&&o!="*"?o.toUpperCase():"";if(goog.dom.canUseQuerySelector_(i)&&(n||t)){var a=n+(t?"."+t:"");return i.querySelectorAll(a)}if(t&&i.getElementsByClassName){var l=i.getElementsByClassName(t);if(n){var s={};var g=0;for(var p=0,u;u=l[p];p++){if(n==u.nodeName){s[g++]=u}}s.length=g;return s}else{return l}}var l=i.getElementsByTagName(n||"*");if(t){var s={};var g=0;for(var p=0,u;u=l[p];p++){var c=u.className;if(typeof c.split=="function"&&goog.array.contains(c.split(/\s+/),t)){s[g++]=u}}s.length=g;return s}else{return l}};goog.dom.$$=goog.dom.getElementsByTagNameAndClass;goog.dom.setProperties=function(e,o){goog.object.forEach(o,function(o,t){if(t=="style"){e.style.cssText=o}else if(t=="class"){e.className=o}else if(t=="for"){e.htmlFor=o}else if(goog.dom.DIRECT_ATTRIBUTE_MAP_.hasOwnProperty(t)){e.setAttribute(goog.dom.DIRECT_ATTRIBUTE_MAP_[t],o)}else if(goog.string.startsWith(t,"aria-")||goog.string.startsWith(t,"data-")){e.setAttribute(t,o)}else{e[t]=o}})};goog.dom.DIRECT_ATTRIBUTE_MAP_={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};goog.dom.getViewportSize=function(e){return goog.dom.getViewportSize_(e||window)};goog.dom.getViewportSize_=function(e){var o=e.document;var t=goog.dom.isCss1CompatMode_(o)?o.documentElement:o.body;return new goog.math.Size(t.clientWidth,t.clientHeight)};goog.dom.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(window)};goog.dom.getDocumentHeightForWindow=function(e){return goog.dom.getDocumentHeight_(e)};goog.dom.getDocumentHeight_=function(e){var o=e.document;var t=0;if(o){var r=o.body;var i=o.documentElement;if(!(i&&r)){return 0}var n=goog.dom.getViewportSize_(e).height;if(goog.dom.isCss1CompatMode_(o)&&i.scrollHeight){t=i.scrollHeight!=n?i.scrollHeight:i.offsetHeight}else{var a=i.scrollHeight;var l=i.offsetHeight;if(i.clientHeight!=l){a=r.scrollHeight;l=r.offsetHeight}if(a>n){t=a>l?a:l}else{t=a<l?a:l}}}return t};goog.dom.getPageScroll=function(e){var o=e||goog.global||window;return goog.dom.getDomHelper(o.document).getDocumentScroll()};goog.dom.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(document)};goog.dom.getDocumentScroll_=function(e){var o=goog.dom.getDocumentScrollElement_(e);var t=goog.dom.getWindow_(e);if(goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("10")&&t.pageYOffset!=o.scrollTop){return new goog.math.Coordinate(o.scrollLeft,o.scrollTop)}return new goog.math.Coordinate(t.pageXOffset||o.scrollLeft,t.pageYOffset||o.scrollTop)};goog.dom.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(document)};goog.dom.getDocumentScrollElement_=function(e){if(e.scrollingElement){return e.scrollingElement}if(!goog.userAgent.WEBKIT&&goog.dom.isCss1CompatMode_(e)){return e.documentElement}return e.body||e.documentElement};goog.dom.getWindow=function(e){return e?goog.dom.getWindow_(e):window};goog.dom.getWindow_=function(e){return e.parentWindow||e.defaultView};goog.dom.createDom=function(e,o,t){return goog.dom.createDom_(document,arguments)};goog.dom.createDom_=function(e,o){var t=o[0];var r=o[1];if(!goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES&&r&&(r.name||r.type)){var i=["<",t];if(r.name){i.push(' name="',goog.string.htmlEscape(r.name),'"')}if(r.type){i.push(' type="',goog.string.htmlEscape(r.type),'"');var n={};goog.object.extend(n,r);delete n["type"];r=n}i.push(">");t=i.join("")}var a=e.createElement(t);if(r){if(goog.isString(r)){a.className=r}else if(goog.isArray(r)){a.className=r.join(" ")}else{goog.dom.setProperties(a,r)}}if(o.length>2){goog.dom.append_(e,a,o,2)}return a};goog.dom.append_=function(e,o,t,r){function i(t){if(t){o.appendChild(goog.isString(t)?e.createTextNode(t):t)}}for(var n=r;n<t.length;n++){var a=t[n];if(goog.isArrayLike(a)&&!goog.dom.isNodeLike(a)){goog.array.forEach(goog.dom.isNodeList(a)?goog.array.toArray(a):a,i)}else{i(a)}}};goog.dom.$dom=goog.dom.createDom;goog.dom.createElement=function(e){return document.createElement(e)};goog.dom.createTextNode=function(e){return document.createTextNode(String(e))};goog.dom.createTable=function(e,o,t){return goog.dom.createTable_(document,e,o,!!t)};goog.dom.createTable_=function(e,o,t,r){var i=e.createElement(goog.dom.TagName.TABLE);var n=i.appendChild(e.createElement(goog.dom.TagName.TBODY));for(var a=0;a<o;a++){var l=e.createElement(goog.dom.TagName.TR);for(var s=0;s<t;s++){var g=e.createElement(goog.dom.TagName.TD);if(r){goog.dom.setTextContent(g,goog.string.Unicode.NBSP)}l.appendChild(g)}n.appendChild(l)}return i};goog.dom.safeHtmlToNode=function(e){return goog.dom.safeHtmlToNode_(document,e)};goog.dom.safeHtmlToNode_=function(e,o){var t=e.createElement(goog.dom.TagName.DIV);if(goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT){goog.dom.safe.setInnerHtml(t,goog.html.SafeHtml.concat(goog.html.SafeHtml.BR,o));t.removeChild(t.firstChild)}else{goog.dom.safe.setInnerHtml(t,o)}return goog.dom.childrenToNode_(e,t)};goog.dom.htmlToDocumentFragment=function(e){return goog.dom.htmlToDocumentFragment_(document,e)};goog.dom.htmlToDocumentFragment_=function(e,o){var t=e.createElement(goog.dom.TagName.DIV);if(goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT){t.innerHTML="<br>"+o;t.removeChild(t.firstChild)}else{t.innerHTML=o}return goog.dom.childrenToNode_(e,t)};goog.dom.childrenToNode_=function(e,o){if(o.childNodes.length==1){return o.removeChild(o.firstChild)}else{var t=e.createDocumentFragment();while(o.firstChild){t.appendChild(o.firstChild)}return t}};goog.dom.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(document)};goog.dom.isCss1CompatMode_=function(e){if(goog.dom.COMPAT_MODE_KNOWN_){return goog.dom.ASSUME_STANDARDS_MODE}return e.compatMode=="CSS1Compat"};goog.dom.canHaveChildren=function(e){if(e.nodeType!=goog.dom.NodeType.ELEMENT){return false}switch(e.tagName){case goog.dom.TagName.APPLET:case goog.dom.TagName.AREA:case goog.dom.TagName.BASE:case goog.dom.TagName.BR:case goog.dom.TagName.COL:case goog.dom.TagName.COMMAND:case goog.dom.TagName.EMBED:case goog.dom.TagName.FRAME:case goog.dom.TagName.HR:case goog.dom.TagName.IMG:case goog.dom.TagName.INPUT:case goog.dom.TagName.IFRAME:case goog.dom.TagName.ISINDEX:case goog.dom.TagName.KEYGEN:case goog.dom.TagName.LINK:case goog.dom.TagName.NOFRAMES:case goog.dom.TagName.NOSCRIPT:case goog.dom.TagName.META:case goog.dom.TagName.OBJECT:case goog.dom.TagName.PARAM:case goog.dom.TagName.SCRIPT:case goog.dom.TagName.SOURCE:case goog.dom.TagName.STYLE:case goog.dom.TagName.TRACK:case goog.dom.TagName.WBR:return false}return true};goog.dom.appendChild=function(e,o){e.appendChild(o)};goog.dom.append=function(e,o){goog.dom.append_(goog.dom.getOwnerDocument(e),e,arguments,1)};goog.dom.removeChildren=function(e){var o;while(o=e.firstChild){e.removeChild(o)}};goog.dom.insertSiblingBefore=function(e,o){if(o.parentNode){o.parentNode.insertBefore(e,o)}};goog.dom.insertSiblingAfter=function(e,o){if(o.parentNode){o.parentNode.insertBefore(e,o.nextSibling)}};goog.dom.insertChildAt=function(e,o,t){e.insertBefore(o,e.childNodes[t]||null)};goog.dom.removeNode=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null};goog.dom.replaceNode=function(e,o){var t=o.parentNode;if(t){t.replaceChild(e,o)}};goog.dom.flattenElement=function(e){var o,t=e.parentNode;if(t&&t.nodeType!=goog.dom.NodeType.DOCUMENT_FRAGMENT){if(e.removeNode){return e.removeNode(false)}else{while(o=e.firstChild){t.insertBefore(o,e)}return goog.dom.removeNode(e)}}};goog.dom.getChildren=function(e){if(goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE&&e.children!=undefined){return e.children}return goog.array.filter(e.childNodes,function(e){return e.nodeType==goog.dom.NodeType.ELEMENT})};goog.dom.getFirstElementChild=function(e){if(goog.isDef(e.firstElementChild)){return e.firstElementChild}return goog.dom.getNextElementNode_(e.firstChild,true)};goog.dom.getLastElementChild=function(e){if(goog.isDef(e.lastElementChild)){return e.lastElementChild}return goog.dom.getNextElementNode_(e.lastChild,false)};goog.dom.getNextElementSibling=function(e){if(goog.isDef(e.nextElementSibling)){return e.nextElementSibling}return goog.dom.getNextElementNode_(e.nextSibling,true)};goog.dom.getPreviousElementSibling=function(e){if(goog.isDef(e.previousElementSibling)){return e.previousElementSibling}return goog.dom.getNextElementNode_(e.previousSibling,false)};goog.dom.getNextElementNode_=function(e,o){while(e&&e.nodeType!=goog.dom.NodeType.ELEMENT){e=o?e.nextSibling:e.previousSibling}return e};goog.dom.getNextNode=function(e){if(!e){return null}if(e.firstChild){return e.firstChild}while(e&&!e.nextSibling){e=e.parentNode}return e?e.nextSibling:null};goog.dom.getPreviousNode=function(e){if(!e){return null}if(!e.previousSibling){return e.parentNode}e=e.previousSibling;while(e&&e.lastChild){e=e.lastChild}return e};goog.dom.isNodeLike=function(e){return goog.isObject(e)&&e.nodeType>0};goog.dom.isElement=function(e){return goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT};goog.dom.isWindow=function(e){return goog.isObject(e)&&e["window"]==e};goog.dom.getParentElement=function(e){var o;if(goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY){var t=goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("9")&&!goog.userAgent.isVersionOrHigher("10");if(!(t&&goog.global["SVGElement"]&&e instanceof goog.global["SVGElement"])){o=e.parentElement;if(o){return o}}}o=e.parentNode;return goog.dom.isElement(o)?o:null};goog.dom.contains=function(e,o){if(!e||!o){return false}if(e.contains&&o.nodeType==goog.dom.NodeType.ELEMENT){return e==o||e.contains(o)}if(typeof e.compareDocumentPosition!="undefined"){return e==o||Boolean(e.compareDocumentPosition(o)&16)}while(o&&e!=o){o=o.parentNode}return o==e};goog.dom.compareNodeOrder=function(e,o){if(e==o){return 0}if(e.compareDocumentPosition){return e.compareDocumentPosition(o)&2?1:-1}if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){if(e.nodeType==goog.dom.NodeType.DOCUMENT){return-1}if(o.nodeType==goog.dom.NodeType.DOCUMENT){return 1}}if("sourceIndex"in e||e.parentNode&&"sourceIndex"in e.parentNode){var t=e.nodeType==goog.dom.NodeType.ELEMENT;var r=o.nodeType==goog.dom.NodeType.ELEMENT;if(t&&r){return e.sourceIndex-o.sourceIndex}else{var i=e.parentNode;var n=o.parentNode;if(i==n){return goog.dom.compareSiblingOrder_(e,o)}if(!t&&goog.dom.contains(i,o)){return-1*goog.dom.compareParentsDescendantNodeIe_(e,o)}if(!r&&goog.dom.contains(n,e)){return goog.dom.compareParentsDescendantNodeIe_(o,e)}return(t?e.sourceIndex:i.sourceIndex)-(r?o.sourceIndex:n.sourceIndex)}}var a=goog.dom.getOwnerDocument(e);var l,s;l=a.createRange();l.selectNode(e);l.collapse(true);s=a.createRange();s.selectNode(o);s.collapse(true);return l.compareBoundaryPoints(goog.global["Range"].START_TO_END,s)};goog.dom.compareParentsDescendantNodeIe_=function(e,o){var t=e.parentNode;if(t==o){return-1}var r=o;while(r.parentNode!=t){r=r.parentNode}return goog.dom.compareSiblingOrder_(r,e)};goog.dom.compareSiblingOrder_=function(e,o){var t=o;while(t=t.previousSibling){if(t==e){return-1}}return 1};goog.dom.findCommonAncestor=function(e){var o,t=arguments.length;if(!t){return null}else if(t==1){return arguments[0]}var r=[];var i=Infinity;for(o=0;o<t;o++){var n=[];var a=arguments[o];while(a){n.unshift(a);a=a.parentNode}r.push(n);i=Math.min(i,n.length)}var l=null;for(o=0;o<i;o++){var s=r[0][o];for(var g=1;g<t;g++){if(s!=r[g][o]){return l}}l=s}return l};goog.dom.getOwnerDocument=function(e){goog.asserts.assert(e,"Node cannot be null or undefined.");return e.nodeType==goog.dom.NodeType.DOCUMENT?e:e.ownerDocument||e.document};goog.dom.getFrameContentDocument=function(e){return e.contentDocument||e.contentWindow.document};goog.dom.getFrameContentWindow=function(e){try{return e.contentWindow||(e.contentDocument?goog.dom.getWindow(e.contentDocument):null)}catch(e){}return null};goog.dom.setTextContent=function(e,o){goog.asserts.assert(e!=null,"goog.dom.setTextContent expects a non-null value for node");if("textContent"in e){e.textContent=o}else if(e.nodeType==goog.dom.NodeType.TEXT){e.data=o}else if(e.firstChild&&e.firstChild.nodeType==goog.dom.NodeType.TEXT){while(e.lastChild!=e.firstChild){e.removeChild(e.lastChild)}e.firstChild.data=o}else{goog.dom.removeChildren(e);var t=goog.dom.getOwnerDocument(e);e.appendChild(t.createTextNode(String(o)))}};goog.dom.getOuterHtml=function(e){goog.asserts.assert(e!==null,"goog.dom.getOuterHtml expects a non-null value for element");if("outerHTML"in e){return e.outerHTML}else{var o=goog.dom.getOwnerDocument(e);var t=o.createElement(goog.dom.TagName.DIV);t.appendChild(e.cloneNode(true));return t.innerHTML}};goog.dom.findNode=function(e,o){var t=[];var r=goog.dom.findNodes_(e,o,t,true);return r?t[0]:undefined};goog.dom.findNodes=function(e,o){var t=[];goog.dom.findNodes_(e,o,t,false);return t};goog.dom.findNodes_=function(e,o,t,r){if(e!=null){var i=e.firstChild;while(i){if(o(i)){t.push(i);if(r){return true}}if(goog.dom.findNodes_(i,o,t,r)){return true}i=i.nextSibling}}return false};goog.dom.TAGS_TO_IGNORE_={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1};goog.dom.PREDEFINED_TAG_VALUES_={IMG:" ",BR:"\n"};goog.dom.isFocusableTabIndex=function(e){return goog.dom.hasSpecifiedTabIndex_(e)&&goog.dom.isTabIndexFocusable_(e)};goog.dom.setFocusableTabIndex=function(e,o){if(o){e.tabIndex=0}else{e.tabIndex=-1;e.removeAttribute("tabIndex")}};goog.dom.isFocusable=function(e){var o;if(goog.dom.nativelySupportsFocus_(e)){o=!e.disabled&&(!goog.dom.hasSpecifiedTabIndex_(e)||goog.dom.isTabIndexFocusable_(e))}else{o=goog.dom.isFocusableTabIndex(e)}return o&&goog.userAgent.IE?goog.dom.hasNonZeroBoundingRect_(e):o};goog.dom.hasSpecifiedTabIndex_=function(e){var o=e.getAttributeNode("tabindex");return goog.isDefAndNotNull(o)&&o.specified};goog.dom.isTabIndexFocusable_=function(e){var o=e.tabIndex;return goog.isNumber(o)&&o>=0&&o<32768};goog.dom.nativelySupportsFocus_=function(e){return e.tagName==goog.dom.TagName.A||e.tagName==goog.dom.TagName.INPUT||e.tagName==goog.dom.TagName.TEXTAREA||e.tagName==goog.dom.TagName.SELECT||e.tagName==goog.dom.TagName.BUTTON};goog.dom.hasNonZeroBoundingRect_=function(e){var o;if(!goog.isFunction(e["getBoundingClientRect"])||goog.userAgent.IE&&e.parentElement==null){o={height:e.offsetHeight,width:e.offsetWidth}}else{o=e.getBoundingClientRect()}return goog.isDefAndNotNull(o)&&o.height>0&&o.width>0};goog.dom.getTextContent=function(e){var o;if(goog.dom.BrowserFeature.CAN_USE_INNER_TEXT&&e!==null&&"innerText"in e){o=goog.string.canonicalizeNewlines(e.innerText)}else{var t=[];goog.dom.getTextContent_(e,t,true);o=t.join("")}o=o.replace(/ \xAD /g," ").replace(/\xAD/g,"");o=o.replace(/\u200B/g,"");if(!goog.dom.BrowserFeature.CAN_USE_INNER_TEXT){o=o.replace(/ +/g," ")}if(o!=" "){o=o.replace(/^\s*/,"")}return o};goog.dom.getRawTextContent=function(e){var o=[];goog.dom.getTextContent_(e,o,false);return o.join("")};goog.dom.getTextContent_=function(e,o,t){if(e.nodeName in goog.dom.TAGS_TO_IGNORE_){}else if(e.nodeType==goog.dom.NodeType.TEXT){if(t){o.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,""))}else{o.push(e.nodeValue)}}else if(e.nodeName in goog.dom.PREDEFINED_TAG_VALUES_){o.push(goog.dom.PREDEFINED_TAG_VALUES_[e.nodeName])}else{var r=e.firstChild;while(r){goog.dom.getTextContent_(r,o,t);r=r.nextSibling}}};goog.dom.getNodeTextLength=function(e){return goog.dom.getTextContent(e).length};goog.dom.getNodeTextOffset=function(e,o){var t=o||goog.dom.getOwnerDocument(e).body;var r=[];while(e&&e!=t){var i=e;while(i=i.previousSibling){r.unshift(goog.dom.getTextContent(i))}e=e.parentNode}return goog.string.trimLeft(r.join("")).replace(/ +/g," ").length};goog.dom.getNodeAtOffset=function(e,o,t){var r=[e],i=0,n=null;while(r.length>0&&i<o){n=r.pop();if(n.nodeName in goog.dom.TAGS_TO_IGNORE_){}else if(n.nodeType==goog.dom.NodeType.TEXT){var a=n.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," ");i+=a.length}else if(n.nodeName in goog.dom.PREDEFINED_TAG_VALUES_){i+=goog.dom.PREDEFINED_TAG_VALUES_[n.nodeName].length}else{for(var l=n.childNodes.length-1;l>=0;l--){r.push(n.childNodes[l])}}}if(goog.isObject(t)){t.remainder=n?n.nodeValue.length+o-i-1:0;t.node=n}return n};goog.dom.isNodeList=function(e){if(e&&typeof e.length=="number"){if(goog.isObject(e)){return typeof e.item=="function"||typeof e.item=="string"}else if(goog.isFunction(e)){return typeof e.item=="function"}}return false};goog.dom.getAncestorByTagNameAndClass=function(e,o,t,r){if(!o&&!t){return null}var i=o?o.toUpperCase():null;return goog.dom.getAncestor(e,function(e){return(!i||e.nodeName==i)&&(!t||goog.isString(e.className)&&goog.array.contains(e.className.split(/\s+/),t))},true,r)};goog.dom.getAncestorByClass=function(e,o,t){return goog.dom.getAncestorByTagNameAndClass(e,null,o,t)};goog.dom.getAncestor=function(e,o,t,r){if(!t){e=e.parentNode}var i=0;while(e&&(r==null||i<=r)){goog.asserts.assert(e.name!="parentNode");if(o(e)){return e}e=e.parentNode;i++}return null};goog.dom.getActiveElement=function(e){try{return e&&e.activeElement}catch(e){}return null};goog.dom.getPixelRatio=function(){var e=goog.dom.getWindow();if(goog.isDef(e.devicePixelRatio)){return e.devicePixelRatio}else if(e.matchMedia){return goog.dom.matchesPixelRatio_(.75)||goog.dom.matchesPixelRatio_(1.5)||goog.dom.matchesPixelRatio_(2)||goog.dom.matchesPixelRatio_(3)||1}return 1};goog.dom.matchesPixelRatio_=function(e){var o=goog.dom.getWindow();var t="(-webkit-min-device-pixel-ratio: "+e+"),"+"(min--moz-device-pixel-ratio: "+e+"),"+"(min-resolution: "+e+"dppx)";return o.matchMedia(t).matches?e:0};goog.dom.DomHelper=function(e){this.document_=e||goog.global.document||document};goog.dom.DomHelper.prototype.getDomHelper=goog.dom.getDomHelper;goog.dom.DomHelper.prototype.setDocument=function(e){this.document_=e};goog.dom.DomHelper.prototype.getDocument=function(){return this.document_};goog.dom.DomHelper.prototype.getElement=function(e){return goog.dom.getElementHelper_(this.document_,e)};goog.dom.DomHelper.prototype.getRequiredElement=function(e){return goog.dom.getRequiredElementHelper_(this.document_,e)};goog.dom.DomHelper.prototype.$=goog.dom.DomHelper.prototype.getElement;goog.dom.DomHelper.prototype.getElementsByTagNameAndClass=function(e,o,t){return goog.dom.getElementsByTagNameAndClass_(this.document_,e,o,t)};goog.dom.DomHelper.prototype.getElementsByClass=function(e,o){var t=o||this.document_;return goog.dom.getElementsByClass(e,t)};goog.dom.DomHelper.prototype.getElementByClass=function(e,o){var t=o||this.document_;return goog.dom.getElementByClass(e,t)};goog.dom.DomHelper.prototype.getRequiredElementByClass=function(e,o){var t=o||this.document_;return goog.dom.getRequiredElementByClass(e,t)};goog.dom.DomHelper.prototype.$$=goog.dom.DomHelper.prototype.getElementsByTagNameAndClass;goog.dom.DomHelper.prototype.setProperties=goog.dom.setProperties;goog.dom.DomHelper.prototype.getViewportSize=function(e){return goog.dom.getViewportSize(e||this.getWindow())};goog.dom.DomHelper.prototype.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(this.getWindow())};goog.dom.Appendable;goog.dom.DomHelper.prototype.createDom=function(e,o,t){return goog.dom.createDom_(this.document_,arguments)};goog.dom.DomHelper.prototype.$dom=goog.dom.DomHelper.prototype.createDom;goog.dom.DomHelper.prototype.createElement=function(e){return this.document_.createElement(e)};goog.dom.DomHelper.prototype.createTextNode=function(e){return this.document_.createTextNode(String(e))};goog.dom.DomHelper.prototype.createTable=function(e,o,t){return goog.dom.createTable_(this.document_,e,o,!!t)};goog.dom.DomHelper.prototype.safeHtmlToNode=function(e){return goog.dom.safeHtmlToNode_(this.document_,e)};goog.dom.DomHelper.prototype.htmlToDocumentFragment=function(e){return goog.dom.htmlToDocumentFragment_(this.document_,e)};goog.dom.DomHelper.prototype.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(this.document_)};goog.dom.DomHelper.prototype.getWindow=function(){return goog.dom.getWindow_(this.document_)};goog.dom.DomHelper.prototype.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(this.document_)};goog.dom.DomHelper.prototype.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(this.document_)};goog.dom.DomHelper.prototype.getActiveElement=function(e){return goog.dom.getActiveElement(e||this.document_)};goog.dom.DomHelper.prototype.appendChild=goog.dom.appendChild;goog.dom.DomHelper.prototype.append=goog.dom.append;goog.dom.DomHelper.prototype.canHaveChildren=goog.dom.canHaveChildren;goog.dom.DomHelper.prototype.removeChildren=goog.dom.removeChildren;goog.dom.DomHelper.prototype.insertSiblingBefore=goog.dom.insertSiblingBefore;goog.dom.DomHelper.prototype.insertSiblingAfter=goog.dom.insertSiblingAfter;goog.dom.DomHelper.prototype.insertChildAt=goog.dom.insertChildAt;goog.dom.DomHelper.prototype.removeNode=goog.dom.removeNode;goog.dom.DomHelper.prototype.replaceNode=goog.dom.replaceNode;goog.dom.DomHelper.prototype.flattenElement=goog.dom.flattenElement;goog.dom.DomHelper.prototype.getChildren=goog.dom.getChildren;goog.dom.DomHelper.prototype.getFirstElementChild=goog.dom.getFirstElementChild;goog.dom.DomHelper.prototype.getLastElementChild=goog.dom.getLastElementChild;goog.dom.DomHelper.prototype.getNextElementSibling=goog.dom.getNextElementSibling;goog.dom.DomHelper.prototype.getPreviousElementSibling=goog.dom.getPreviousElementSibling;goog.dom.DomHelper.prototype.getNextNode=goog.dom.getNextNode;goog.dom.DomHelper.prototype.getPreviousNode=goog.dom.getPreviousNode;goog.dom.DomHelper.prototype.isNodeLike=goog.dom.isNodeLike;goog.dom.DomHelper.prototype.isElement=goog.dom.isElement;goog.dom.DomHelper.prototype.isWindow=goog.dom.isWindow;goog.dom.DomHelper.prototype.getParentElement=goog.dom.getParentElement;goog.dom.DomHelper.prototype.contains=goog.dom.contains;goog.dom.DomHelper.prototype.compareNodeOrder=goog.dom.compareNodeOrder;goog.dom.DomHelper.prototype.findCommonAncestor=goog.dom.findCommonAncestor;goog.dom.DomHelper.prototype.getOwnerDocument=goog.dom.getOwnerDocument;goog.dom.DomHelper.prototype.getFrameContentDocument=goog.dom.getFrameContentDocument;goog.dom.DomHelper.prototype.getFrameContentWindow=goog.dom.getFrameContentWindow;goog.dom.DomHelper.prototype.setTextContent=goog.dom.setTextContent;goog.dom.DomHelper.prototype.getOuterHtml=goog.dom.getOuterHtml;goog.dom.DomHelper.prototype.findNode=goog.dom.findNode;goog.dom.DomHelper.prototype.findNodes=goog.dom.findNodes;goog.dom.DomHelper.prototype.isFocusableTabIndex=goog.dom.isFocusableTabIndex;goog.dom.DomHelper.prototype.setFocusableTabIndex=goog.dom.setFocusableTabIndex;goog.dom.DomHelper.prototype.isFocusable=goog.dom.isFocusable;goog.dom.DomHelper.prototype.getTextContent=goog.dom.getTextContent;goog.dom.DomHelper.prototype.getNodeTextLength=goog.dom.getNodeTextLength;goog.dom.DomHelper.prototype.getNodeTextOffset=goog.dom.getNodeTextOffset;goog.dom.DomHelper.prototype.getNodeAtOffset=goog.dom.getNodeAtOffset;goog.dom.DomHelper.prototype.isNodeList=goog.dom.isNodeList;goog.dom.DomHelper.prototype.getAncestorByTagNameAndClass=goog.dom.getAncestorByTagNameAndClass;goog.dom.DomHelper.prototype.getAncestorByClass=goog.dom.getAncestorByClass;goog.dom.DomHelper.prototype.getAncestor=goog.dom.getAncestor;goog.provide("goog.dom.classlist");goog.require("goog.array");goog.define("goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST",false);goog.dom.classlist.get=function(e){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList){return e.classList}var o=e.className;return goog.isString(o)&&o.match(/\S+/g)||[]};goog.dom.classlist.set=function(e,o){e.className=o};goog.dom.classlist.contains=function(e,o){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList){return e.classList.contains(o)}return goog.array.contains(goog.dom.classlist.get(e),o)};goog.dom.classlist.add=function(e,o){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList){e.classList.add(o);return}if(!goog.dom.classlist.contains(e,o)){e.className+=e.className.length>0?" "+o:o}};goog.dom.classlist.addAll=function(e,o){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList){goog.array.forEach(o,function(o){goog.dom.classlist.add(e,o)});return}var t={};goog.array.forEach(goog.dom.classlist.get(e),function(e){t[e]=true});goog.array.forEach(o,function(e){t[e]=true});e.className="";for(var r in t){e.className+=e.className.length>0?" "+r:r}};goog.dom.classlist.remove=function(e,o){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList){e.classList.remove(o);return}if(goog.dom.classlist.contains(e,o)){e.className=goog.array.filter(goog.dom.classlist.get(e),function(e){return e!=o}).join(" ")}};goog.dom.classlist.removeAll=function(e,o){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList){goog.array.forEach(o,function(o){goog.dom.classlist.remove(e,o)});return}e.className=goog.array.filter(goog.dom.classlist.get(e),function(e){return!goog.array.contains(o,e)}).join(" ")};goog.dom.classlist.enable=function(e,o,t){if(t){goog.dom.classlist.add(e,o)}else{goog.dom.classlist.remove(e,o)}};goog.dom.classlist.enableAll=function(e,o,t){var r=t?goog.dom.classlist.addAll:goog.dom.classlist.removeAll;r(e,o)};goog.dom.classlist.swap=function(e,o,t){if(goog.dom.classlist.contains(e,o)){goog.dom.classlist.remove(e,o);goog.dom.classlist.add(e,t);return true}return false};goog.dom.classlist.toggle=function(e,o){var t=!goog.dom.classlist.contains(e,o);goog.dom.classlist.enable(e,o,t);return t};goog.dom.classlist.addRemove=function(e,o,t){goog.dom.classlist.remove(e,o);goog.dom.classlist.add(e,t)};goog.provide("goog.dom.vendor");goog.require("goog.string");goog.require("goog.userAgent");goog.dom.vendor.getVendorJsPrefix=function(){if(goog.userAgent.WEBKIT){return"Webkit"}else if(goog.userAgent.GECKO){return"Moz"}else if(goog.userAgent.IE){return"ms"}else if(goog.userAgent.OPERA){return"O"}return null};goog.dom.vendor.getVendorPrefix=function(){if(goog.userAgent.WEBKIT){return"-webkit"}else if(goog.userAgent.GECKO){return"-moz"}else if(goog.userAgent.IE){return"-ms"}else if(goog.userAgent.OPERA){return"-o"}return null};goog.dom.vendor.getPrefixedPropertyName=function(e,o){if(o&&e in o){return e}var t=goog.dom.vendor.getVendorJsPrefix();if(t){t=t.toLowerCase();var r=t+goog.string.toTitleCase(e);return!goog.isDef(o)||r in o?r:null}return null};goog.dom.vendor.getPrefixedEventType=function(e){var o=goog.dom.vendor.getVendorJsPrefix()||"";return(o+e).toLowerCase()};goog.provide("goog.math.Box");goog.require("goog.asserts");goog.require("goog.math.Coordinate");goog.math.Box=function(e,o,t,r){this.top=e;this.right=o;this.bottom=t;this.left=r};goog.math.Box.boundingBox=function(e){var o=new goog.math.Box(arguments[0].y,arguments[0].x,arguments[0].y,arguments[0].x);for(var t=1;t<arguments.length;t++){o.expandToIncludeCoordinate(arguments[t])}return o};goog.math.Box.prototype.getWidth=function(){
return this.right-this.left};goog.math.Box.prototype.getHeight=function(){return this.bottom-this.top};goog.math.Box.prototype.clone=function(){return new goog.math.Box(this.top,this.right,this.bottom,this.left)};if(goog.DEBUG){goog.math.Box.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"}}goog.math.Box.prototype.contains=function(e){return goog.math.Box.contains(this,e)};goog.math.Box.prototype.expand=function(e,o,t,r){if(goog.isObject(e)){this.top-=e.top;this.right+=e.right;this.bottom+=e.bottom;this.left-=e.left}else{this.top-=e;this.right+=Number(o);this.bottom+=Number(t);this.left-=Number(r)}return this};goog.math.Box.prototype.expandToInclude=function(e){this.left=Math.min(this.left,e.left);this.top=Math.min(this.top,e.top);this.right=Math.max(this.right,e.right);this.bottom=Math.max(this.bottom,e.bottom)};goog.math.Box.prototype.expandToIncludeCoordinate=function(e){this.top=Math.min(this.top,e.y);this.right=Math.max(this.right,e.x);this.bottom=Math.max(this.bottom,e.y);this.left=Math.min(this.left,e.x)};goog.math.Box.equals=function(e,o){if(e==o){return true}if(!e||!o){return false}return e.top==o.top&&e.right==o.right&&e.bottom==o.bottom&&e.left==o.left};goog.math.Box.contains=function(e,o){if(!e||!o){return false}if(o instanceof goog.math.Box){return o.left>=e.left&&o.right<=e.right&&o.top>=e.top&&o.bottom<=e.bottom}return o.x>=e.left&&o.x<=e.right&&o.y>=e.top&&o.y<=e.bottom};goog.math.Box.relativePositionX=function(e,o){if(o.x<e.left){return o.x-e.left}else if(o.x>e.right){return o.x-e.right}return 0};goog.math.Box.relativePositionY=function(e,o){if(o.y<e.top){return o.y-e.top}else if(o.y>e.bottom){return o.y-e.bottom}return 0};goog.math.Box.distance=function(e,o){var t=goog.math.Box.relativePositionX(e,o);var r=goog.math.Box.relativePositionY(e,o);return Math.sqrt(t*t+r*r)};goog.math.Box.intersects=function(e,o){return e.left<=o.right&&o.left<=e.right&&e.top<=o.bottom&&o.top<=e.bottom};goog.math.Box.intersectsWithPadding=function(e,o,t){return e.left<=o.right+t&&o.left<=e.right+t&&e.top<=o.bottom+t&&o.top<=e.bottom+t};goog.math.Box.prototype.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};goog.math.Box.prototype.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};goog.math.Box.prototype.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};goog.math.Box.prototype.translate=function(e,o){if(e instanceof goog.math.Coordinate){this.left+=e.x;this.right+=e.x;this.top+=e.y;this.bottom+=e.y}else{goog.asserts.assertNumber(e);this.left+=e;this.right+=e;if(goog.isNumber(o)){this.top+=o;this.bottom+=o}}return this};goog.math.Box.prototype.scale=function(e,o){var t=goog.isNumber(o)?o:e;this.left*=e;this.right*=e;this.top*=t;this.bottom*=t;return this};goog.provide("goog.math.Rect");goog.require("goog.asserts");goog.require("goog.math.Box");goog.require("goog.math.Coordinate");goog.require("goog.math.Size");goog.math.Rect=function(e,o,t,r){this.left=e;this.top=o;this.width=t;this.height=r};goog.math.Rect.prototype.clone=function(){return new goog.math.Rect(this.left,this.top,this.width,this.height)};goog.math.Rect.prototype.toBox=function(){var e=this.left+this.width;var o=this.top+this.height;return new goog.math.Box(this.top,e,o,this.left)};goog.math.Rect.createFromPositionAndSize=function(e,o){return new goog.math.Rect(e.x,e.y,o.width,o.height)};goog.math.Rect.createFromBox=function(e){return new goog.math.Rect(e.left,e.top,e.right-e.left,e.bottom-e.top)};if(goog.DEBUG){goog.math.Rect.prototype.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"}}goog.math.Rect.equals=function(e,o){if(e==o){return true}if(!e||!o){return false}return e.left==o.left&&e.width==o.width&&e.top==o.top&&e.height==o.height};goog.math.Rect.prototype.intersection=function(e){var o=Math.max(this.left,e.left);var t=Math.min(this.left+this.width,e.left+e.width);if(o<=t){var r=Math.max(this.top,e.top);var i=Math.min(this.top+this.height,e.top+e.height);if(r<=i){this.left=o;this.top=r;this.width=t-o;this.height=i-r;return true}}return false};goog.math.Rect.intersection=function(e,o){var t=Math.max(e.left,o.left);var r=Math.min(e.left+e.width,o.left+o.width);if(t<=r){var i=Math.max(e.top,o.top);var n=Math.min(e.top+e.height,o.top+o.height);if(i<=n){return new goog.math.Rect(t,i,r-t,n-i)}}return null};goog.math.Rect.intersects=function(e,o){return e.left<=o.left+o.width&&o.left<=e.left+e.width&&e.top<=o.top+o.height&&o.top<=e.top+e.height};goog.math.Rect.prototype.intersects=function(e){return goog.math.Rect.intersects(this,e)};goog.math.Rect.difference=function(e,o){var t=goog.math.Rect.intersection(e,o);if(!t||!t.height||!t.width){return[e.clone()]}var r=[];var i=e.top;var n=e.height;var a=e.left+e.width;var l=e.top+e.height;var s=o.left+o.width;var g=o.top+o.height;if(o.top>e.top){r.push(new goog.math.Rect(e.left,e.top,e.width,o.top-e.top));i=o.top;n-=o.top-e.top}if(g<l){r.push(new goog.math.Rect(e.left,g,e.width,l-g));n=g-i}if(o.left>e.left){r.push(new goog.math.Rect(e.left,i,o.left-e.left,n))}if(s<a){r.push(new goog.math.Rect(s,i,a-s,n))}return r};goog.math.Rect.prototype.difference=function(e){return goog.math.Rect.difference(this,e)};goog.math.Rect.prototype.boundingRect=function(e){var o=Math.max(this.left+this.width,e.left+e.width);var t=Math.max(this.top+this.height,e.top+e.height);this.left=Math.min(this.left,e.left);this.top=Math.min(this.top,e.top);this.width=o-this.left;this.height=t-this.top};goog.math.Rect.boundingRect=function(e,o){if(!e||!o){return null}var t=e.clone();t.boundingRect(o);return t};goog.math.Rect.prototype.contains=function(e){if(e instanceof goog.math.Rect){return this.left<=e.left&&this.left+this.width>=e.left+e.width&&this.top<=e.top&&this.top+this.height>=e.top+e.height}else{return e.x>=this.left&&e.x<=this.left+this.width&&e.y>=this.top&&e.y<=this.top+this.height}};goog.math.Rect.prototype.squaredDistance=function(e){var o=e.x<this.left?this.left-e.x:Math.max(e.x-(this.left+this.width),0);var t=e.y<this.top?this.top-e.y:Math.max(e.y-(this.top+this.height),0);return o*o+t*t};goog.math.Rect.prototype.distance=function(e){return Math.sqrt(this.squaredDistance(e))};goog.math.Rect.prototype.getSize=function(){return new goog.math.Size(this.width,this.height)};goog.math.Rect.prototype.getTopLeft=function(){return new goog.math.Coordinate(this.left,this.top)};goog.math.Rect.prototype.getCenter=function(){return new goog.math.Coordinate(this.left+this.width/2,this.top+this.height/2)};goog.math.Rect.prototype.getBottomRight=function(){return new goog.math.Coordinate(this.left+this.width,this.top+this.height)};goog.math.Rect.prototype.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};goog.math.Rect.prototype.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};goog.math.Rect.prototype.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};goog.math.Rect.prototype.translate=function(e,o){if(e instanceof goog.math.Coordinate){this.left+=e.x;this.top+=e.y}else{this.left+=goog.asserts.assertNumber(e);if(goog.isNumber(o)){this.top+=o}}return this};goog.math.Rect.prototype.scale=function(e,o){var t=goog.isNumber(o)?o:e;this.left*=e;this.width*=e;this.top*=t;this.height*=t;return this};goog.provide("goog.reflect");goog.reflect.object=function(e,o){return o};goog.reflect.sinkValue=function(e){goog.reflect.sinkValue[" "](e);return e};goog.reflect.sinkValue[" "]=goog.nullFunction;goog.reflect.canAccessProperty=function(e,o){try{goog.reflect.sinkValue(e[o]);return true}catch(e){}return false};goog.provide("goog.style");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.NodeType");goog.require("goog.dom.TagName");goog.require("goog.dom.vendor");goog.require("goog.math.Box");goog.require("goog.math.Coordinate");goog.require("goog.math.Rect");goog.require("goog.math.Size");goog.require("goog.object");goog.require("goog.reflect");goog.require("goog.string");goog.require("goog.userAgent");goog.forwardDeclare("goog.events.BrowserEvent");goog.forwardDeclare("goog.events.Event");goog.style.setStyle=function(e,o,t){if(goog.isString(o)){goog.style.setStyle_(e,t,o)}else{for(var r in o){goog.style.setStyle_(e,o[r],r)}}};goog.style.setStyle_=function(e,o,t){var r=goog.style.getVendorJsStyleName_(e,t);if(r){e.style[r]=o}};goog.style.styleNameCache_={};goog.style.getVendorJsStyleName_=function(e,o){var t=goog.style.styleNameCache_[o];if(!t){var r=goog.string.toCamelCase(o);t=r;if(e.style[r]===undefined){var i=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(r);if(e.style[i]!==undefined){t=i}}goog.style.styleNameCache_[o]=t}return t};goog.style.getVendorStyleName_=function(e,o){var t=goog.string.toCamelCase(o);if(e.style[t]===undefined){var r=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(t);if(e.style[r]!==undefined){return goog.dom.vendor.getVendorPrefix()+"-"+o}}return o};goog.style.getStyle=function(e,o){var t=e.style[goog.string.toCamelCase(o)];if(typeof t!=="undefined"){return t}return e.style[goog.style.getVendorJsStyleName_(e,o)]||""};goog.style.getComputedStyle=function(e,o){var t=goog.dom.getOwnerDocument(e);if(t.defaultView&&t.defaultView.getComputedStyle){var r=t.defaultView.getComputedStyle(e,null);if(r){return r[o]||r.getPropertyValue(o)||""}}return""};goog.style.getCascadedStyle=function(e,o){return e.currentStyle?e.currentStyle[o]:null};goog.style.getStyle_=function(e,o){return goog.style.getComputedStyle(e,o)||goog.style.getCascadedStyle(e,o)||e.style&&e.style[o]};goog.style.getComputedBoxSizing=function(e){return goog.style.getStyle_(e,"boxSizing")||goog.style.getStyle_(e,"MozBoxSizing")||goog.style.getStyle_(e,"WebkitBoxSizing")||null};goog.style.getComputedPosition=function(e){return goog.style.getStyle_(e,"position")};goog.style.getBackgroundColor=function(e){return goog.style.getStyle_(e,"backgroundColor")};goog.style.getComputedOverflowX=function(e){return goog.style.getStyle_(e,"overflowX")};goog.style.getComputedOverflowY=function(e){return goog.style.getStyle_(e,"overflowY")};goog.style.getComputedZIndex=function(e){return goog.style.getStyle_(e,"zIndex")};goog.style.getComputedTextAlign=function(e){return goog.style.getStyle_(e,"textAlign")};goog.style.getComputedCursor=function(e){return goog.style.getStyle_(e,"cursor")};goog.style.getComputedTransform=function(e){var o=goog.style.getVendorStyleName_(e,"transform");return goog.style.getStyle_(e,o)||goog.style.getStyle_(e,"transform")};goog.style.setPosition=function(e,o,t){var r,i;if(o instanceof goog.math.Coordinate){r=o.x;i=o.y}else{r=o;i=t}e.style.left=goog.style.getPixelStyleValue_(r,false);e.style.top=goog.style.getPixelStyleValue_(i,false)};goog.style.getPosition=function(e){return new goog.math.Coordinate(e.offsetLeft,e.offsetTop)};goog.style.getClientViewportElement=function(e){var o;if(e){o=goog.dom.getOwnerDocument(e)}else{o=goog.dom.getDocument()}if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)&&!goog.dom.getDomHelper(o).isCss1CompatMode()){return o.body}return o.documentElement};goog.style.getViewportPageOffset=function(e){var o=e.body;var t=e.documentElement;var r=o.scrollLeft||t.scrollLeft;var i=o.scrollTop||t.scrollTop;return new goog.math.Coordinate(r,i)};goog.style.getBoundingClientRect_=function(e){var o;try{o=e.getBoundingClientRect()}catch(e){return{left:0,top:0,right:0,bottom:0}}if(goog.userAgent.IE&&e.ownerDocument.body){var t=e.ownerDocument;o.left-=t.documentElement.clientLeft+t.body.clientLeft;o.top-=t.documentElement.clientTop+t.body.clientTop}return o};goog.style.getOffsetParent=function(e){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(8)){goog.asserts.assert(e&&"offsetParent"in e);return e.offsetParent}var o=goog.dom.getOwnerDocument(e);var t=goog.style.getStyle_(e,"position");var r=t=="fixed"||t=="absolute";for(var i=e.parentNode;i&&i!=o;i=i.parentNode){if(i.nodeType==goog.dom.NodeType.DOCUMENT_FRAGMENT&&i.host){i=i.host}t=goog.style.getStyle_(i,"position");r=r&&t=="static"&&i!=o.documentElement&&i!=o.body;if(!r&&(i.scrollWidth>i.clientWidth||i.scrollHeight>i.clientHeight||t=="fixed"||t=="absolute"||t=="relative")){return i}}return null};goog.style.getVisibleRectForElement=function(e){var o=new goog.math.Box(0,Infinity,Infinity,0);var t=goog.dom.getDomHelper(e);var r=t.getDocument().body;var i=t.getDocument().documentElement;var n=t.getDocumentScrollElement();for(var a=e;a=goog.style.getOffsetParent(a);){if((!goog.userAgent.IE||a.clientWidth!=0)&&(!goog.userAgent.WEBKIT||a.clientHeight!=0||a!=r)&&(a!=r&&a!=i&&goog.style.getStyle_(a,"overflow")!="visible")){var l=goog.style.getPageOffset(a);var s=goog.style.getClientLeftTop(a);l.x+=s.x;l.y+=s.y;o.top=Math.max(o.top,l.y);o.right=Math.min(o.right,l.x+a.clientWidth);o.bottom=Math.min(o.bottom,l.y+a.clientHeight);o.left=Math.max(o.left,l.x)}}var g=n.scrollLeft,p=n.scrollTop;o.left=Math.max(o.left,g);o.top=Math.max(o.top,p);var u=t.getViewportSize();o.right=Math.min(o.right,g+u.width);o.bottom=Math.min(o.bottom,p+u.height);return o.top>=0&&o.left>=0&&o.bottom>o.top&&o.right>o.left?o:null};goog.style.getContainerOffsetToScrollInto=function(e,o,t){var r=o||goog.dom.getDocumentScrollElement();var i=goog.style.getPageOffset(e);var n=goog.style.getPageOffset(r);var a=goog.style.getBorderBox(r);if(r==goog.dom.getDocumentScrollElement()){var l=i.x-r.scrollLeft;var s=i.y-r.scrollTop;if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(10)){l+=a.left;s+=a.top}}else{var l=i.x-n.x-a.left;var s=i.y-n.y-a.top}var g=r.clientWidth-e.offsetWidth;var p=r.clientHeight-e.offsetHeight;var u=r.scrollLeft;var c=r.scrollTop;if(t){u+=l-g/2;c+=s-p/2}else{u+=Math.min(l,Math.max(l-g,0));c+=Math.min(s,Math.max(s-p,0))}return new goog.math.Coordinate(u,c)};goog.style.scrollIntoContainerView=function(e,o,t){var r=o||goog.dom.getDocumentScrollElement();var i=goog.style.getContainerOffsetToScrollInto(e,r,t);r.scrollLeft=i.x;r.scrollTop=i.y};goog.style.getClientLeftTop=function(e){return new goog.math.Coordinate(e.clientLeft,e.clientTop)};goog.style.getPageOffset=function(e){var o=goog.dom.getOwnerDocument(e);goog.asserts.assertObject(e,"Parameter is required");var t=new goog.math.Coordinate(0,0);var r=goog.style.getClientViewportElement(o);if(e==r){return t}var i=goog.style.getBoundingClientRect_(e);var n=goog.dom.getDomHelper(o).getDocumentScroll();t.x=i.left+n.x;t.y=i.top+n.y;return t};goog.style.getPageOffsetLeft=function(e){return goog.style.getPageOffset(e).x};goog.style.getPageOffsetTop=function(e){return goog.style.getPageOffset(e).y};goog.style.getFramedPageOffset=function(e,o){var t=new goog.math.Coordinate(0,0);var r=goog.dom.getWindow(goog.dom.getOwnerDocument(e));if(!goog.reflect.canAccessProperty(r,"parent")){return t}var i=e;do{var n=r==o?goog.style.getPageOffset(i):goog.style.getClientPositionForElement_(goog.asserts.assert(i));t.x+=n.x;t.y+=n.y}while(r&&r!=o&&r!=r.parent&&(i=r.frameElement)&&(r=r.parent));return t};goog.style.translateRectForAnotherFrame=function(e,o,t){if(o.getDocument()!=t.getDocument()){var r=o.getDocument().body;var i=goog.style.getFramedPageOffset(r,t.getWindow());i=goog.math.Coordinate.difference(i,goog.style.getPageOffset(r));if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)&&!o.isCss1CompatMode()){i=goog.math.Coordinate.difference(i,o.getDocumentScroll())}e.left+=i.x;e.top+=i.y}};goog.style.getRelativePosition=function(e,o){var t=goog.style.getClientPosition(e);var r=goog.style.getClientPosition(o);return new goog.math.Coordinate(t.x-r.x,t.y-r.y)};goog.style.getClientPositionForElement_=function(e){var o=goog.style.getBoundingClientRect_(e);return new goog.math.Coordinate(o.left,o.top)};goog.style.getClientPosition=function(e){goog.asserts.assert(e);if(e.nodeType==goog.dom.NodeType.ELEMENT){return goog.style.getClientPositionForElement_(e)}else{var o=e.changedTouches?e.changedTouches[0]:e;return new goog.math.Coordinate(o.clientX,o.clientY)}};goog.style.setPageOffset=function(e,o,t){var r=goog.style.getPageOffset(e);if(o instanceof goog.math.Coordinate){t=o.y;o=o.x}var i=goog.asserts.assertNumber(o)-r.x;var n=Number(t)-r.y;goog.style.setPosition(e,e.offsetLeft+i,e.offsetTop+n)};goog.style.setSize=function(e,o,t){var r;if(o instanceof goog.math.Size){r=o.height;o=o.width}else{if(t==undefined){throw Error("missing height argument")}r=t}goog.style.setWidth(e,o);goog.style.setHeight(e,r)};goog.style.getPixelStyleValue_=function(e,o){if(typeof e=="number"){e=(o?Math.round(e):e)+"px"}return e};goog.style.setHeight=function(e,o){e.style.height=goog.style.getPixelStyleValue_(o,true)};goog.style.setWidth=function(e,o){e.style.width=goog.style.getPixelStyleValue_(o,true)};goog.style.getSize=function(e){return goog.style.evaluateWithTemporaryDisplay_(goog.style.getSizeWithDisplay_,e)};goog.style.evaluateWithTemporaryDisplay_=function(e,o){if(goog.style.getStyle_(o,"display")!="none"){return e(o)}var t=o.style;var r=t.display;var i=t.visibility;var n=t.position;t.visibility="hidden";t.position="absolute";t.display="inline";var a=e(o);t.display=r;t.position=n;t.visibility=i;return a};goog.style.getSizeWithDisplay_=function(e){var o=e.offsetWidth;var t=e.offsetHeight;var r=goog.userAgent.WEBKIT&&!o&&!t;if((!goog.isDef(o)||r)&&e.getBoundingClientRect){var i=goog.style.getBoundingClientRect_(e);return new goog.math.Size(i.right-i.left,i.bottom-i.top)}return new goog.math.Size(o,t)};goog.style.getTransformedSize=function(e){if(!e.getBoundingClientRect){return null}var o=goog.style.evaluateWithTemporaryDisplay_(goog.style.getBoundingClientRect_,e);return new goog.math.Size(o.right-o.left,o.bottom-o.top)};goog.style.getBounds=function(e){var o=goog.style.getPageOffset(e);var t=goog.style.getSize(e);return new goog.math.Rect(o.x,o.y,t.width,t.height)};goog.style.toCamelCase=function(e){return goog.string.toCamelCase(String(e))};goog.style.toSelectorCase=function(e){return goog.string.toSelectorCase(e)};goog.style.getOpacity=function(e){goog.asserts.assert(e);var o=e.style;var t="";if("opacity"in o){t=o.opacity}else if("MozOpacity"in o){t=o.MozOpacity}else if("filter"in o){var r=o.filter.match(/alpha\(opacity=([\d.]+)\)/);if(r){t=String(r[1]/100)}}return t==""?t:Number(t)};goog.style.setOpacity=function(e,o){goog.asserts.assert(e);var t=e.style;if("opacity"in t){t.opacity=o}else if("MozOpacity"in t){t.MozOpacity=o}else if("filter"in t){if(o===""){t.filter=""}else{t.filter="alpha(opacity="+Number(o)*100+")"}}};goog.style.setTransparentBackgroundImage=function(e,o){var t=e.style;if(goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")){t.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader("+'src="'+o+'", sizingMethod="crop")'}else{t.backgroundImage="url("+o+")";t.backgroundPosition="top left";t.backgroundRepeat="no-repeat"}};goog.style.clearTransparentBackgroundImage=function(e){var o=e.style;if("filter"in o){o.filter=""}else{o.backgroundImage="none"}};goog.style.showElement=function(e,o){goog.style.setElementShown(e,o)};goog.style.setElementShown=function(e,o){e.style.display=o?"":"none"};goog.style.isElementShown=function(e){return e.style.display!="none"};goog.style.installStyles=function(e,o){var t=goog.dom.getDomHelper(o);var r=null;var i=t.getDocument();if(goog.userAgent.IE&&i.createStyleSheet){r=i.createStyleSheet();goog.style.setStyles(r,e)}else{var n=t.getElementsByTagNameAndClass(goog.dom.TagName.HEAD)[0];if(!n){var a=t.getElementsByTagNameAndClass(goog.dom.TagName.BODY)[0];n=t.createDom(goog.dom.TagName.HEAD);a.parentNode.insertBefore(n,a)}r=t.createDom(goog.dom.TagName.STYLE);goog.style.setStyles(r,e);t.appendChild(n,r)}return r};goog.style.uninstallStyles=function(e){var o=e.ownerNode||e.owningElement||e;goog.dom.removeNode(o)};goog.style.setStyles=function(e,o){if(goog.userAgent.IE&&goog.isDef(e.cssText)){e.cssText=o}else{e.innerHTML=o}};goog.style.setPreWrap=function(e){var o=e.style;if(goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")){o.whiteSpace="pre";o.wordWrap="break-word"}else if(goog.userAgent.GECKO){o.whiteSpace="-moz-pre-wrap"}else{o.whiteSpace="pre-wrap"}};goog.style.setInlineBlock=function(e){var o=e.style;o.position="relative";if(goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")){o.zoom="1";o.display="inline"}else{o.display="inline-block"}};goog.style.isRightToLeft=function(e){return"rtl"==goog.style.getStyle_(e,"direction")};goog.style.unselectableStyle_=goog.userAgent.GECKO?"MozUserSelect":goog.userAgent.WEBKIT||goog.userAgent.EDGE?"WebkitUserSelect":null;goog.style.isUnselectable=function(e){if(goog.style.unselectableStyle_){return e.style[goog.style.unselectableStyle_].toLowerCase()=="none"}else if(goog.userAgent.IE||goog.userAgent.OPERA){return e.getAttribute("unselectable")=="on"}return false};goog.style.setUnselectable=function(e,o,t){var r=!t?e.getElementsByTagName("*"):null;var i=goog.style.unselectableStyle_;if(i){var n=o?"none":"";if(e.style){e.style[i]=n}if(r){for(var a=0,l;l=r[a];a++){if(l.style){l.style[i]=n}}}}else if(goog.userAgent.IE||goog.userAgent.OPERA){var n=o?"on":"";e.setAttribute("unselectable",n);if(r){for(var a=0,l;l=r[a];a++){l.setAttribute("unselectable",n)}}}};goog.style.getBorderBoxSize=function(e){return new goog.math.Size(e.offsetWidth,e.offsetHeight)};goog.style.setBorderBoxSize=function(e,o){var t=goog.dom.getOwnerDocument(e);var r=goog.dom.getDomHelper(t).isCss1CompatMode();if(goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("10")&&(!r||!goog.userAgent.isVersionOrHigher("8"))){var i=e.style;if(r){var n=goog.style.getPaddingBox(e);var a=goog.style.getBorderBox(e);i.pixelWidth=o.width-a.left-n.left-n.right-a.right;i.pixelHeight=o.height-a.top-n.top-n.bottom-a.bottom}else{i.pixelWidth=o.width;i.pixelHeight=o.height}}else{goog.style.setBoxSizingSize_(e,o,"border-box")}};goog.style.getContentBoxSize=function(e){var o=goog.dom.getOwnerDocument(e);var t=goog.userAgent.IE&&e.currentStyle;if(t&&goog.dom.getDomHelper(o).isCss1CompatMode()&&t.width!="auto"&&t.height!="auto"&&!t.boxSizing){var r=goog.style.getIePixelValue_(e,t.width,"width","pixelWidth");var i=goog.style.getIePixelValue_(e,t.height,"height","pixelHeight");return new goog.math.Size(r,i)}else{var n=goog.style.getBorderBoxSize(e);var a=goog.style.getPaddingBox(e);var l=goog.style.getBorderBox(e);return new goog.math.Size(n.width-l.left-a.left-a.right-l.right,n.height-l.top-a.top-a.bottom-l.bottom)}};goog.style.setContentBoxSize=function(e,o){var t=goog.dom.getOwnerDocument(e);var r=goog.dom.getDomHelper(t).isCss1CompatMode();if(goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("10")&&(!r||!goog.userAgent.isVersionOrHigher("8"))){var i=e.style;if(r){i.pixelWidth=o.width;i.pixelHeight=o.height}else{var n=goog.style.getPaddingBox(e);var a=goog.style.getBorderBox(e);i.pixelWidth=o.width+a.left+n.left+n.right+a.right;i.pixelHeight=o.height+a.top+n.top+n.bottom+a.bottom}}else{goog.style.setBoxSizingSize_(e,o,"content-box")}};goog.style.setBoxSizingSize_=function(e,o,t){var r=e.style;if(goog.userAgent.GECKO){r.MozBoxSizing=t}else if(goog.userAgent.WEBKIT){r.WebkitBoxSizing=t}else{r.boxSizing=t}r.width=Math.max(o.width,0)+"px";r.height=Math.max(o.height,0)+"px"};goog.style.getIePixelValue_=function(e,o,t,r){if(/^\d+px?$/.test(o)){return parseInt(o,10)}else{var i=e.style[t];var n=e.runtimeStyle[t];e.runtimeStyle[t]=e.currentStyle[t];e.style[t]=o;var a=e.style[r];e.style[t]=i;e.runtimeStyle[t]=n;return a}};goog.style.getIePixelDistance_=function(e,o){var t=goog.style.getCascadedStyle(e,o);return t?goog.style.getIePixelValue_(e,t,"left","pixelLeft"):0};goog.style.getBox_=function(e,o){if(goog.userAgent.IE){var t=goog.style.getIePixelDistance_(e,o+"Left");var r=goog.style.getIePixelDistance_(e,o+"Right");var i=goog.style.getIePixelDistance_(e,o+"Top");var n=goog.style.getIePixelDistance_(e,o+"Bottom");return new goog.math.Box(i,r,n,t)}else{var t=goog.style.getComputedStyle(e,o+"Left");var r=goog.style.getComputedStyle(e,o+"Right");var i=goog.style.getComputedStyle(e,o+"Top");var n=goog.style.getComputedStyle(e,o+"Bottom");return new goog.math.Box(parseFloat(i),parseFloat(r),parseFloat(n),parseFloat(t))}};goog.style.getPaddingBox=function(e){return goog.style.getBox_(e,"padding")};goog.style.getMarginBox=function(e){return goog.style.getBox_(e,"margin")};goog.style.ieBorderWidthKeywords_={thin:2,medium:4,thick:6};goog.style.getIePixelBorder_=function(e,o){if(goog.style.getCascadedStyle(e,o+"Style")=="none"){return 0}var t=goog.style.getCascadedStyle(e,o+"Width");if(t in goog.style.ieBorderWidthKeywords_){return goog.style.ieBorderWidthKeywords_[t]}return goog.style.getIePixelValue_(e,t,"left","pixelLeft")};goog.style.getBorderBox=function(e){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){var o=goog.style.getIePixelBorder_(e,"borderLeft");var t=goog.style.getIePixelBorder_(e,"borderRight");var r=goog.style.getIePixelBorder_(e,"borderTop");var i=goog.style.getIePixelBorder_(e,"borderBottom");return new goog.math.Box(r,t,i,o)}else{var o=goog.style.getComputedStyle(e,"borderLeftWidth");var t=goog.style.getComputedStyle(e,"borderRightWidth");var r=goog.style.getComputedStyle(e,"borderTopWidth");var i=goog.style.getComputedStyle(e,"borderBottomWidth");return new goog.math.Box(parseFloat(r),parseFloat(t),parseFloat(i),parseFloat(o))}};goog.style.getFontFamily=function(e){var o=goog.dom.getOwnerDocument(e);var t="";if(o.body.createTextRange&&goog.dom.contains(o,e)){var r=o.body.createTextRange();r.moveToElementText(e);try{t=r.queryCommandValue("FontName")}catch(e){t=""}}if(!t){t=goog.style.getStyle_(e,"fontFamily")}var i=t.split(",");if(i.length>1)t=i[0];return goog.string.stripQuotes(t,"\"'")};goog.style.lengthUnitRegex_=/[^\d]+$/;goog.style.getLengthUnits=function(e){var o=e.match(goog.style.lengthUnitRegex_);return o&&o[0]||null};goog.style.ABSOLUTE_CSS_LENGTH_UNITS_={cm:1,in:1,mm:1,pc:1,pt:1};goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_={em:1,ex:1};goog.style.getFontSize=function(e){var o=goog.style.getStyle_(e,"fontSize");var t=goog.style.getLengthUnits(o);if(o&&"px"==t){return parseInt(o,10)}if(goog.userAgent.IE){if(String(t)in goog.style.ABSOLUTE_CSS_LENGTH_UNITS_){return goog.style.getIePixelValue_(e,o,"left","pixelLeft")}else if(e.parentNode&&e.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&String(t)in goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_){var r=e.parentNode;var i=goog.style.getStyle_(r,"fontSize");return goog.style.getIePixelValue_(r,o==i?"1em":o,"left","pixelLeft")}}var n=goog.dom.createDom(goog.dom.TagName.SPAN,{style:"visibility:hidden;position:absolute;"+"line-height:0;padding:0;margin:0;border:0;height:1em;"});goog.dom.appendChild(e,n);o=n.offsetHeight;goog.dom.removeNode(n);return o};goog.style.parseStyleAttribute=function(e){var o={};goog.array.forEach(e.split(/\s*;\s*/),function(e){var t=e.match(/\s*([\w-]+)\s*\:(.+)/);if(t){var r=t[1];var i=goog.string.trim(t[2]);o[goog.string.toCamelCase(r.toLowerCase())]=i}});return o};goog.style.toStyleAttribute=function(e){var o=[];goog.object.forEach(e,function(e,t){o.push(goog.string.toSelectorCase(t),":",e,";")});return o.join("")};goog.style.setFloat=function(e,o){e.style[goog.userAgent.IE?"styleFloat":"cssFloat"]=o};goog.style.getFloat=function(e){return e.style[goog.userAgent.IE?"styleFloat":"cssFloat"]||""};goog.style.getScrollbarWidth=function(e){var o=goog.dom.createElement(goog.dom.TagName.DIV);if(e){o.className=e}o.style.cssText="overflow:auto;"+"position:absolute;top:0;width:100px;height:100px";var t=goog.dom.createElement(goog.dom.TagName.DIV);goog.style.setSize(t,"200px","200px");o.appendChild(t);goog.dom.appendChild(goog.dom.getDocument().body,o);var r=o.offsetWidth-o.clientWidth;goog.dom.removeNode(o);return r};goog.style.MATRIX_TRANSLATION_REGEX_=new RegExp("matrix\\([0-9\\.\\-]+, [0-9\\.\\-]+, "+"[0-9\\.\\-]+, [0-9\\.\\-]+, "+"([0-9\\.\\-]+)p?x?, ([0-9\\.\\-]+)p?x?\\)");goog.style.getCssTranslation=function(e){var o=goog.style.getComputedTransform(e);if(!o){return new goog.math.Coordinate(0,0)}var t=o.match(goog.style.MATRIX_TRANSLATION_REGEX_);if(!t){return new goog.math.Coordinate(0,0)}return new goog.math.Coordinate(parseFloat(t[1]),parseFloat(t[2]))};goog.provide("ol.MapEvent");goog.provide("ol.MapEventType");goog.require("ol.events.Event");ol.MapEventType={POSTRENDER:"postrender",MOVEEND:"moveend"};ol.MapEvent=function(e,o,t){goog.base(this,e);this.map=o;this.frameState=t!==undefined?t:null};goog.inherits(ol.MapEvent,ol.events.Event);goog.provide("ol.control.Control");goog.require("goog.dom");goog.require("ol.events");goog.require("ol");goog.require("ol.MapEventType");goog.require("ol.Object");ol.control.Control=function(e){goog.base(this);this.element=e.element?e.element:null;this.target_=null;this.map_=null;this.listenerKeys=[];this.render=e.render?e.render:ol.nullFunction;if(e.target){this.setTarget(e.target)}};goog.inherits(ol.control.Control,ol.Object);ol.control.Control.prototype.disposeInternal=function(){goog.dom.removeNode(this.element);goog.base(this,"disposeInternal")};ol.control.Control.prototype.getMap=function(){return this.map_};ol.control.Control.prototype.setMap=function(e){if(this.map_){goog.dom.removeNode(this.element)}for(var o=0,t=this.listenerKeys.length;o<t;++o){ol.events.unlistenByKey(this.listenerKeys[o])}this.listenerKeys.length=0;this.map_=e;if(this.map_){var r=this.target_?this.target_:e.getOverlayContainerStopEvent();r.appendChild(this.element);if(this.render!==ol.nullFunction){this.listenerKeys.push(ol.events.listen(e,ol.MapEventType.POSTRENDER,this.render,this))}e.render()}};ol.control.Control.prototype.setTarget=function(e){this.target_=goog.dom.getElement(e)};goog.provide("ol.css");ol.css.CLASS_HIDDEN="ol-hidden";ol.css.CLASS_UNSELECTABLE="ol-unselectable";ol.css.CLASS_UNSUPPORTED="ol-unsupported";ol.css.CLASS_CONTROL="ol-control";goog.provide("ol.structs.LRUCache");goog.require("goog.asserts");goog.require("ol.object");ol.structs.LRUCache=function(){this.count_=0;this.entries_={};this.oldest_=null;this.newest_=null};ol.structs.LRUCache.prototype.assertValid=function(){if(this.count_===0){goog.asserts.assert(ol.object.isEmpty(this.entries_),"entries must be an empty object (count = 0)");goog.asserts.assert(!this.oldest_,"oldest must be null (count = 0)");goog.asserts.assert(!this.newest_,"newest must be null (count = 0)")}else{goog.asserts.assert(Object.keys(this.entries_).length==this.count_,"number of entries matches count");goog.asserts.assert(this.oldest_,"we have an oldest entry");goog.asserts.assert(!this.oldest_.older,"no entry is older than oldest");goog.asserts.assert(this.newest_,"we have a newest entry");goog.asserts.assert(!this.newest_.newer,"no entry is newer than newest");var e,o;var t=null;e=0;for(o=this.oldest_;o;o=o.newer){goog.asserts.assert(o.older===t,"entry.older links to correct older");t=o;++e}goog.asserts.assert(e==this.count_,"iterated correct amount of times");var r=null;e=0;for(o=this.newest_;o;o=o.older){goog.asserts.assert(o.newer===r,"entry.newer links to correct newer");r=o;++e}goog.asserts.assert(e==this.count_,"iterated correct amount of times")}};ol.structs.LRUCache.prototype.clear=function(){this.count_=0;this.entries_={};this.oldest_=null;this.newest_=null};ol.structs.LRUCache.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)};ol.structs.LRUCache.prototype.forEach=function(e,o){var t=this.oldest_;while(t){e.call(o,t.value_,t.key_,this);t=t.newer}}
;ol.structs.LRUCache.prototype.get=function(e){var o=this.entries_[e];goog.asserts.assert(o!==undefined,"an entry exists for key %s",e);if(o===this.newest_){return o.value_}else if(o===this.oldest_){this.oldest_=this.oldest_.newer;this.oldest_.older=null}else{o.newer.older=o.older;o.older.newer=o.newer}o.newer=null;o.older=this.newest_;this.newest_.newer=o;this.newest_=o;return o.value_};ol.structs.LRUCache.prototype.getCount=function(){return this.count_};ol.structs.LRUCache.prototype.getKeys=function(){var e=new Array(this.count_);var o=0;var t;for(t=this.newest_;t;t=t.older){e[o++]=t.key_}goog.asserts.assert(o==this.count_,"iterated correct number of times");return e};ol.structs.LRUCache.prototype.getValues=function(){var e=new Array(this.count_);var o=0;var t;for(t=this.newest_;t;t=t.older){e[o++]=t.value_}goog.asserts.assert(o==this.count_,"iterated correct number of times");return e};ol.structs.LRUCache.prototype.peekLast=function(){goog.asserts.assert(this.oldest_,"oldest must not be null");return this.oldest_.value_};ol.structs.LRUCache.prototype.peekLastKey=function(){goog.asserts.assert(this.oldest_,"oldest must not be null");return this.oldest_.key_};ol.structs.LRUCache.prototype.pop=function(){goog.asserts.assert(this.oldest_,"oldest must not be null");goog.asserts.assert(this.newest_,"newest must not be null");var e=this.oldest_;goog.asserts.assert(e.key_ in this.entries_,"oldest is indexed in entries");delete this.entries_[e.key_];if(e.newer){e.newer.older=null}this.oldest_=e.newer;if(!this.oldest_){this.newest_=null}--this.count_;return e.value_};ol.structs.LRUCache.prototype.replace=function(e,o){this.get(e);this.entries_[e].value_=o};ol.structs.LRUCache.prototype.set=function(e,o){goog.asserts.assert(!(e in{}),'key is not a standard property of objects (e.g. "__proto__")');goog.asserts.assert(!(e in this.entries_),"key is not used already");var t={key_:e,newer:null,older:this.newest_,value_:o};if(!this.newest_){this.oldest_=t}else{this.newest_.newer=t}this.newest_=t;this.entries_[e]=t;++this.count_};ol.structs.LRUCacheEntry;goog.provide("ol.TileCache");goog.require("ol");goog.require("ol.TileRange");goog.require("ol.structs.LRUCache");goog.require("ol.tilecoord");ol.TileCache=function(e){goog.base(this);this.highWaterMark_=e!==undefined?e:ol.DEFAULT_TILE_CACHE_HIGH_WATER_MARK};goog.inherits(ol.TileCache,ol.structs.LRUCache);ol.TileCache.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark_};ol.TileCache.prototype.expireCache=function(e){var o,t;while(this.canExpireCache()){o=this.peekLast();t=o.tileCoord[0].toString();if(t in e&&e[t].contains(o.tileCoord)){break}else{this.pop().dispose()}}};ol.TileCache.prototype.pruneTileRange=function(e){var o=this.getCount(),t;while(o--){t=this.peekLastKey();if(e.contains(ol.tilecoord.createFromString(t))){this.pop().dispose()}else{this.get(t)}}};goog.provide("ol.Tile");goog.provide("ol.TileState");goog.require("ol.events");goog.require("ol.events.EventTarget");goog.require("ol.events.EventType");goog.require("ol.TileCoord");ol.TileState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};ol.Tile=function(e,o){goog.base(this);this.tileCoord=e;this.state=o;this.interimTile=null;this.key=""};goog.inherits(ol.Tile,ol.events.EventTarget);ol.Tile.prototype.changed=function(){this.dispatchEvent(ol.events.EventType.CHANGE)};ol.Tile.prototype.getImage=goog.abstractMethod;ol.Tile.prototype.getKey=function(){return goog.getUid(this).toString()};ol.Tile.prototype.getTileCoord=function(){return this.tileCoord};ol.Tile.prototype.getState=function(){return this.state};ol.Tile.prototype.load=goog.abstractMethod;goog.provide("ol.source.Source");goog.provide("ol.source.State");goog.require("ol");goog.require("ol.Attribution");goog.require("ol.Object");goog.require("ol.proj");ol.source.State={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"};ol.source.SourceOptions;ol.source.Source=function(e){goog.base(this);this.projection_=ol.proj.get(e.projection);this.attributions_=e.attributions!==undefined?e.attributions:null;this.logo_=e.logo;this.state_=e.state!==undefined?e.state:ol.source.State.READY;this.wrapX_=e.wrapX!==undefined?e.wrapX:false};goog.inherits(ol.source.Source,ol.Object);ol.source.Source.prototype.forEachFeatureAtCoordinate=ol.nullFunction;ol.source.Source.prototype.getAttributions=function(){return this.attributions_};ol.source.Source.prototype.getLogo=function(){return this.logo_};ol.source.Source.prototype.getProjection=function(){return this.projection_};ol.source.Source.prototype.getResolutions=goog.abstractMethod;ol.source.Source.prototype.getState=function(){return this.state_};ol.source.Source.prototype.getWrapX=function(){return this.wrapX_};ol.source.Source.prototype.refresh=function(){this.changed()};ol.source.Source.prototype.setAttributions=function(e){this.attributions_=e;this.changed()};ol.source.Source.prototype.setLogo=function(e){this.logo_=e};ol.source.Source.prototype.setState=function(e){this.state_=e;this.changed()};ol.source.Source.prototype.setProjection=function(e){this.projection_=e};goog.provide("ol.tilegrid.TileGrid");goog.require("goog.asserts");goog.require("ol");goog.require("ol.Coordinate");goog.require("ol.TileCoord");goog.require("ol.TileRange");goog.require("ol.array");goog.require("ol.extent");goog.require("ol.extent.Corner");goog.require("ol.math");goog.require("ol.object");goog.require("ol.proj");goog.require("ol.proj.METERS_PER_UNIT");goog.require("ol.proj.Projection");goog.require("ol.proj.Units");goog.require("ol.size");goog.require("ol.tilecoord");ol.tilegrid.TileGrid=function(e){this.minZoom=e.minZoom!==undefined?e.minZoom:0;this.resolutions_=e.resolutions;goog.asserts.assert(ol.array.isSorted(this.resolutions_,function(e,o){return o-e},true),"resolutions must be sorted in descending order");this.maxZoom=this.resolutions_.length-1;this.origin_=e.origin!==undefined?e.origin:null;this.origins_=null;if(e.origins!==undefined){this.origins_=e.origins;goog.asserts.assert(this.origins_.length==this.resolutions_.length,"number of origins and resolutions must be equal")}var o=e.extent;if(o!==undefined&&!this.origin_&&!this.origins_){this.origin_=ol.extent.getTopLeft(o)}goog.asserts.assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"either origin or origins must be configured, never both");this.tileSizes_=null;if(e.tileSizes!==undefined){this.tileSizes_=e.tileSizes;goog.asserts.assert(this.tileSizes_.length==this.resolutions_.length,"number of tileSizes and resolutions must be equal")}this.tileSize_=e.tileSize!==undefined?e.tileSize:!this.tileSizes_?ol.DEFAULT_TILE_SIZE:null;goog.asserts.assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"either tileSize or tileSizes must be configured, never both");this.extent_=o!==undefined?o:null;this.fullTileRanges_=null;if(e.sizes!==undefined){goog.asserts.assert(e.sizes.length==this.resolutions_.length,"number of sizes and resolutions must be equal");this.fullTileRanges_=e.sizes.map(function(e,t){goog.asserts.assert(e[0]!==0,"width must not be 0");goog.asserts.assert(e[1]!==0,"height must not be 0");var r=new ol.TileRange(Math.min(0,e[0]),Math.max(e[0]-1,-1),Math.min(0,e[1]),Math.max(e[1]-1,-1));if(this.minZoom<=t&&t<=this.maxZoom&&o!==undefined){goog.asserts.assert(r.containsTileRange(this.getTileRangeForExtentAndZ(o,t)),"extent tile range must not exceed tilegrid width and height")}return r},this)}else if(o){this.calculateTileRanges_(o)}this.tmpSize_=[0,0]};ol.tilegrid.TileGrid.tmpTileCoord_=[0,0,0];ol.tilegrid.TileGrid.prototype.forEachTileCoordParentTileRange=function(e,o,t,r,i){var n=this.getTileCoordExtent(e,i);var a=e[0]-1;while(a>=this.minZoom){if(o.call(t,a,this.getTileRangeForExtentAndZ(n,a,r))){return true}--a}return false};ol.tilegrid.TileGrid.prototype.getExtent=function(){return this.extent_};ol.tilegrid.TileGrid.prototype.getMaxZoom=function(){return this.maxZoom};ol.tilegrid.TileGrid.prototype.getMinZoom=function(){return this.minZoom};ol.tilegrid.TileGrid.prototype.getOrigin=function(e){if(this.origin_){return this.origin_}else{goog.asserts.assert(this.origins_,"origins cannot be null if origin is null");goog.asserts.assert(this.minZoom<=e&&e<=this.maxZoom,"given z is not in allowed range (%s <= %s <= %s)",this.minZoom,e,this.maxZoom);return this.origins_[e]}};ol.tilegrid.TileGrid.prototype.getResolution=function(e){goog.asserts.assert(this.minZoom<=e&&e<=this.maxZoom,"given z is not in allowed range (%s <= %s <= %s)",this.minZoom,e,this.maxZoom);return this.resolutions_[e]};ol.tilegrid.TileGrid.prototype.getResolutions=function(){return this.resolutions_};ol.tilegrid.TileGrid.prototype.getTileCoordChildTileRange=function(e,o,t){if(e[0]<this.maxZoom){var r=this.getTileCoordExtent(e,t);return this.getTileRangeForExtentAndZ(r,e[0]+1,o)}else{return null}};ol.tilegrid.TileGrid.prototype.getTileRangeExtent=function(e,o,t){var r=this.getOrigin(e);var i=this.getResolution(e);var n=ol.size.toSize(this.getTileSize(e),this.tmpSize_);var a=r[0]+o.minX*n[0]*i;var l=r[0]+(o.maxX+1)*n[0]*i;var s=r[1]+o.minY*n[1]*i;var g=r[1]+(o.maxY+1)*n[1]*i;return ol.extent.createOrUpdate(a,s,l,g,t)};ol.tilegrid.TileGrid.prototype.getTileRangeForExtentAndResolution=function(e,o,t){var r=ol.tilegrid.TileGrid.tmpTileCoord_;this.getTileCoordForXYAndResolution_(e[0],e[1],o,false,r);var i=r[1];var n=r[2];this.getTileCoordForXYAndResolution_(e[2],e[3],o,true,r);return ol.TileRange.createOrUpdate(i,r[1],n,r[2],t)};ol.tilegrid.TileGrid.prototype.getTileRangeForExtentAndZ=function(e,o,t){var r=this.getResolution(o);return this.getTileRangeForExtentAndResolution(e,r,t)};ol.tilegrid.TileGrid.prototype.getTileCoordCenter=function(e){var o=this.getOrigin(e[0]);var t=this.getResolution(e[0]);var r=ol.size.toSize(this.getTileSize(e[0]),this.tmpSize_);return[o[0]+(e[1]+.5)*r[0]*t,o[1]+(e[2]+.5)*r[1]*t]};ol.tilegrid.TileGrid.prototype.getTileCoordExtent=function(e,o){var t=this.getOrigin(e[0]);var r=this.getResolution(e[0]);var i=ol.size.toSize(this.getTileSize(e[0]),this.tmpSize_);var n=t[0]+e[1]*i[0]*r;var a=t[1]+e[2]*i[1]*r;var l=n+i[0]*r;var s=a+i[1]*r;return ol.extent.createOrUpdate(n,a,l,s,o)};ol.tilegrid.TileGrid.prototype.getTileCoordForCoordAndResolution=function(e,o,t){return this.getTileCoordForXYAndResolution_(e[0],e[1],o,false,t)};ol.tilegrid.TileGrid.prototype.getTileCoordForXYAndResolution_=function(e,o,t,r,i){var n=this.getZForResolution(t);var a=t/this.getResolution(n);var l=this.getOrigin(n);var s=ol.size.toSize(this.getTileSize(n),this.tmpSize_);var g=r?.5:0;var p=r?0:.5;var u=Math.floor((e-l[0])/t+g);var c=Math.floor((o-l[1])/t+p);var d=a*u/s[0];var y=a*c/s[1];if(r){d=Math.ceil(d)-1;y=Math.ceil(y)-1}else{d=Math.floor(d);y=Math.floor(y)}return ol.tilecoord.createOrUpdate(n,d,y,i)};ol.tilegrid.TileGrid.prototype.getTileCoordForCoordAndZ=function(e,o,t){var r=this.getResolution(o);return this.getTileCoordForXYAndResolution_(e[0],e[1],r,false,t)};ol.tilegrid.TileGrid.prototype.getTileCoordResolution=function(e){goog.asserts.assert(this.minZoom<=e[0]&&e[0]<=this.maxZoom,"z of given tilecoord is not in allowed range (%s <= %s <= %s",this.minZoom,e[0],this.maxZoom);return this.resolutions_[e[0]]};ol.tilegrid.TileGrid.prototype.getTileSize=function(e){if(this.tileSize_){return this.tileSize_}else{goog.asserts.assert(this.tileSizes_,"tileSizes cannot be null if tileSize is null");goog.asserts.assert(this.minZoom<=e&&e<=this.maxZoom,"z is not in allowed range (%s <= %s <= %s",this.minZoom,e,this.maxZoom);return this.tileSizes_[e]}};ol.tilegrid.TileGrid.prototype.getFullTileRange=function(e){if(!this.fullTileRanges_){return null}else{goog.asserts.assert(this.minZoom<=e&&e<=this.maxZoom,"z is not in allowed range (%s <= %s <= %s",this.minZoom,e,this.maxZoom);return this.fullTileRanges_[e]}};ol.tilegrid.TileGrid.prototype.getZForResolution=function(e){var o=ol.array.linearFindNearest(this.resolutions_,e,0);return ol.math.clamp(o,this.minZoom,this.maxZoom)};ol.tilegrid.TileGrid.prototype.calculateTileRanges_=function(e){var o=this.resolutions_.length;var t=new Array(o);for(var r=this.minZoom;r<o;++r){t[r]=this.getTileRangeForExtentAndZ(e,r)}this.fullTileRanges_=t};ol.tilegrid.getForProjection=function(e){var o=e.getDefaultTileGrid();if(!o){o=ol.tilegrid.createForProjection(e);e.setDefaultTileGrid(o)}return o};ol.tilegrid.createForExtent=function(e,o,t,r){var i=r!==undefined?r:ol.extent.Corner.TOP_LEFT;var n=ol.tilegrid.resolutionsFromExtent(e,o,t);return new ol.tilegrid.TileGrid({extent:e,origin:ol.extent.getCorner(e,i),resolutions:n,tileSize:t})};ol.tilegrid.createXYZ=function(e){var o={};ol.object.assign(o,e!==undefined?e:{});if(o.extent===undefined){o.extent=ol.proj.get("EPSG:3857").getExtent()}o.resolutions=ol.tilegrid.resolutionsFromExtent(o.extent,o.maxZoom,o.tileSize);delete o.maxZoom;return new ol.tilegrid.TileGrid(o)};ol.tilegrid.resolutionsFromExtent=function(e,o,t){var r=o!==undefined?o:ol.DEFAULT_MAX_ZOOM;var i=ol.extent.getHeight(e);var n=ol.extent.getWidth(e);var a=ol.size.toSize(t!==undefined?t:ol.DEFAULT_TILE_SIZE);var l=Math.max(n/a[0],i/a[1]);var s=r+1;var g=new Array(s);for(var p=0;p<s;++p){g[p]=l/Math.pow(2,p)}return g};ol.tilegrid.createForProjection=function(e,o,t,r){var i=ol.tilegrid.extentFromProjection(e);return ol.tilegrid.createForExtent(i,o,t,r)};ol.tilegrid.extentFromProjection=function(e){e=ol.proj.get(e);var o=e.getExtent();if(!o){var t=180*ol.proj.METERS_PER_UNIT[ol.proj.Units.DEGREES]/e.getMetersPerUnit();o=ol.extent.createOrUpdate(-t,-t,t,t)}return o};goog.provide("ol.source.Tile");goog.provide("ol.source.TileEvent");goog.provide("ol.source.TileOptions");goog.require("goog.asserts");goog.require("ol.events.Event");goog.require("ol");goog.require("ol.Attribution");goog.require("ol.Extent");goog.require("ol.TileCache");goog.require("ol.TileRange");goog.require("ol.TileState");goog.require("ol.proj");goog.require("ol.size");goog.require("ol.source.Source");goog.require("ol.tilecoord");goog.require("ol.tilegrid.TileGrid");ol.source.TileOptions;ol.source.Tile=function(e){goog.base(this,{attributions:e.attributions,extent:e.extent,logo:e.logo,projection:e.projection,state:e.state,wrapX:e.wrapX});this.opaque_=e.opaque!==undefined?e.opaque:false;this.tilePixelRatio_=e.tilePixelRatio!==undefined?e.tilePixelRatio:1;this.tileGrid=e.tileGrid!==undefined?e.tileGrid:null;this.tileCache=new ol.TileCache(e.cacheSize);this.tmpSize=[0,0]};goog.inherits(ol.source.Tile,ol.source.Source);ol.source.Tile.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()};ol.source.Tile.prototype.expireCache=function(e,o){var t=this.getTileCacheForProjection(e);if(t){t.expireCache(o)}};ol.source.Tile.prototype.forEachLoadedTile=function(e,o,t,r){var i=this.getTileCacheForProjection(e);if(!i){return false}var n=true;var a,l,s;for(var g=t.minX;g<=t.maxX;++g){for(var p=t.minY;p<=t.maxY;++p){l=this.getKeyZXY(o,g,p);s=false;if(i.containsKey(l)){a=i.get(l);s=a.getState()===ol.TileState.LOADED;if(s){s=r(a)!==false}}if(!s){n=false}}}return n};ol.source.Tile.prototype.getGutter=function(e){return 0};ol.source.Tile.prototype.getKeyParams=function(){return""};ol.source.Tile.prototype.getKeyZXY=ol.tilecoord.getKeyZXY;ol.source.Tile.prototype.getOpaque=function(e){return this.opaque_};ol.source.Tile.prototype.getResolutions=function(){return this.tileGrid.getResolutions()};ol.source.Tile.prototype.getTile=goog.abstractMethod;ol.source.Tile.prototype.getTileGrid=function(){return this.tileGrid};ol.source.Tile.prototype.getTileGridForProjection=function(e){if(!this.tileGrid){return ol.tilegrid.getForProjection(e)}else{return this.tileGrid}};ol.source.Tile.prototype.getTileCacheForProjection=function(e){var o=this.getProjection();if(o&&!ol.proj.equivalent(o,e)){return null}else{return this.tileCache}};ol.source.Tile.prototype.getTilePixelRatio=function(e){return this.tilePixelRatio_};ol.source.Tile.prototype.getTilePixelSize=function(e,o,t){var r=this.getTileGridForProjection(t);var i=this.getTilePixelRatio(o);var n=ol.size.toSize(r.getTileSize(e),this.tmpSize);if(i==1){return n}else{return ol.size.scale(n,i,this.tmpSize)}};ol.source.Tile.prototype.getTileCoordForTileUrlFunction=function(e,o){var t=o!==undefined?o:this.getProjection();var r=this.getTileGridForProjection(t);goog.asserts.assert(r,"tile grid needed");if(this.getWrapX()&&t.isGlobal()){e=ol.tilecoord.wrapX(e,r,t)}return ol.tilecoord.withinExtentAndZ(e,r)?e:null};ol.source.Tile.prototype.refresh=function(){this.tileCache.clear();this.changed()};ol.source.Tile.prototype.useTile=ol.nullFunction;ol.source.TileEvent=function(e,o){goog.base(this,e);this.tile=o};goog.inherits(ol.source.TileEvent,ol.events.Event);ol.source.TileEventType={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};goog.provide("ol.control.Attribution");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.classlist");goog.require("goog.style");goog.require("ol");goog.require("ol.Attribution");goog.require("ol.control.Control");goog.require("ol.css");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol.object");goog.require("ol.source.Tile");ol.control.Attribution=function(e){var o=e?e:{};this.ulElement_=document.createElement("UL");this.logoLi_=document.createElement("LI");this.ulElement_.appendChild(this.logoLi_);goog.style.setElementShown(this.logoLi_,false);this.collapsed_=o.collapsed!==undefined?o.collapsed:true;this.collapsible_=o.collapsible!==undefined?o.collapsible:true;if(!this.collapsible_){this.collapsed_=false}var t=o.className!==undefined?o.className:"ol-attribution";var r=o.tipLabel!==undefined?o.tipLabel:"Attributions";var i=o.collapseLabel!==undefined?o.collapseLabel:"»";this.collapseLabel_=typeof i==="string"?goog.dom.createDom("SPAN",{},i):i;var n=o.label!==undefined?o.label:"i";this.label_=typeof n==="string"?goog.dom.createDom("SPAN",{},n):n;var a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;var l=goog.dom.createDom("BUTTON",{type:"button",title:r},a);ol.events.listen(l,ol.events.EventType.CLICK,this.handleClick_,this);var s=t+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible");var g=goog.dom.createDom("DIV",s,this.ulElement_,l);var p=o.render?o.render:ol.control.Attribution.render;goog.base(this,{element:g,render:p,target:o.target});this.renderedVisible_=true;this.attributionElements_={};this.attributionElementRenderedVisible_={};this.logoElements_={}};goog.inherits(ol.control.Attribution,ol.control.Control);ol.control.Attribution.prototype.getSourceAttributions=function(e){var o,t,r,i,n,a,l,s,g,p;var u;var c=e.layerStatesArray;var d=ol.object.assign({},e.attributions);var y={};var h=e.viewState.projection;goog.asserts.assert(h,"projection of viewState required");for(o=0,t=c.length;o<t;o++){a=c[o].layer.getSource();if(!a){continue}p=goog.getUid(a).toString();g=a.getAttributions();if(!g){continue}for(r=0,i=g.length;r<i;r++){l=g[r];s=goog.getUid(l).toString();if(s in d){continue}n=e.usedTiles[p];if(n){goog.asserts.assertInstanceof(a,ol.source.Tile,"source should be an ol.source.Tile");var m=a.getTileGridForProjection(h);goog.asserts.assert(m,"tileGrid required for projection");u=l.intersectsAnyTileRange(n,m,h)}else{u=false}if(u){if(s in y){delete y[s]}d[s]=l}else{y[s]=l}}}return[d,y]};ol.control.Attribution.render=function(e){this.updateElement_(e.frameState)};ol.control.Attribution.prototype.updateElement_=function(e){if(!e){if(this.renderedVisible_){goog.style.setElementShown(this.element,false);this.renderedVisible_=false}return}var o=this.getSourceAttributions(e);var t=o[0];var r=o[1];var i,n;for(n in this.attributionElements_){if(n in t){if(!this.attributionElementRenderedVisible_[n]){goog.style.setElementShown(this.attributionElements_[n],true);this.attributionElementRenderedVisible_[n]=true}delete t[n]}else if(n in r){if(this.attributionElementRenderedVisible_[n]){goog.style.setElementShown(this.attributionElements_[n],false);delete this.attributionElementRenderedVisible_[n]}delete r[n]}else{goog.dom.removeNode(this.attributionElements_[n]);delete this.attributionElements_[n];delete this.attributionElementRenderedVisible_[n]}}for(n in t){i=document.createElement("LI");i.innerHTML=t[n].getHTML();this.ulElement_.appendChild(i);this.attributionElements_[n]=i;this.attributionElementRenderedVisible_[n]=true}for(n in r){i=document.createElement("LI");i.innerHTML=r[n].getHTML();goog.style.setElementShown(i,false);this.ulElement_.appendChild(i);this.attributionElements_[n]=i}var a=!ol.object.isEmpty(this.attributionElementRenderedVisible_)||!ol.object.isEmpty(e.logos);if(this.renderedVisible_!=a){goog.style.setElementShown(this.element,a);this.renderedVisible_=a}if(a&&ol.object.isEmpty(this.attributionElementRenderedVisible_)){goog.dom.classlist.add(this.element,"ol-logo-only")}else{goog.dom.classlist.remove(this.element,"ol-logo-only")}this.insertLogos_(e)};ol.control.Attribution.prototype.insertLogos_=function(e){var o;var t=e.logos;var r=this.logoElements_;for(o in r){if(!(o in t)){goog.dom.removeNode(r[o]);delete r[o]}}var i,n,a;for(a in t){if(!(a in r)){i=new Image;i.src=a;var l=t[a];if(l===""){n=i}else{n=goog.dom.createDom("A",{href:l});n.appendChild(i)}this.logoLi_.appendChild(n);r[a]=n}}goog.style.setElementShown(this.logoLi_,!ol.object.isEmpty(t))};ol.control.Attribution.prototype.handleClick_=function(e){e.preventDefault();this.handleToggle_()};ol.control.Attribution.prototype.handleToggle_=function(){goog.dom.classlist.toggle(this.element,"ol-collapsed");if(this.collapsed_){goog.dom.replaceNode(this.collapseLabel_,this.label_)}else{goog.dom.replaceNode(this.label_,this.collapseLabel_)}this.collapsed_=!this.collapsed_};ol.control.Attribution.prototype.getCollapsible=function(){return this.collapsible_};ol.control.Attribution.prototype.setCollapsible=function(e){if(this.collapsible_===e){return}this.collapsible_=e;goog.dom.classlist.toggle(this.element,"ol-uncollapsible");if(!e&&this.collapsed_){this.handleToggle_()}};ol.control.Attribution.prototype.setCollapsed=function(e){if(!this.collapsible_||this.collapsed_===e){return}this.handleToggle_()};ol.control.Attribution.prototype.getCollapsed=function(){return this.collapsed_};goog.provide("ol.control.Rotate");goog.require("goog.dom");goog.require("goog.dom.classlist");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol");goog.require("ol.animation");goog.require("ol.control.Control");goog.require("ol.css");goog.require("ol.easing");ol.control.Rotate=function(e){var o=e?e:{};var t=o.className!==undefined?o.className:"ol-rotate";var r=o.label!==undefined?o.label:"⇧";this.label_=null;if(typeof r==="string"){this.label_=goog.dom.createDom("SPAN","ol-compass",r)}else{this.label_=r;goog.dom.classlist.add(this.label_,"ol-compass")}var i=o.tipLabel?o.tipLabel:"Reset rotation";var n=goog.dom.createDom("BUTTON",{class:t+"-reset",type:"button",title:i},this.label_);ol.events.listen(n,ol.events.EventType.CLICK,ol.control.Rotate.prototype.handleClick_,this);var a=t+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL;var l=goog.dom.createDom("DIV",a,n);var s=o.render?o.render:ol.control.Rotate.render;this.callResetNorth_=o.resetNorth?o.resetNorth:undefined;goog.base(this,{element:l,render:s,target:o.target});this.duration_=o.duration!==undefined?o.duration:250;this.autoHide_=o.autoHide!==undefined?o.autoHide:true;this.rotation_=undefined;if(this.autoHide_){goog.dom.classlist.add(this.element,ol.css.CLASS_HIDDEN)}};goog.inherits(ol.control.Rotate,ol.control.Control);ol.control.Rotate.prototype.handleClick_=function(e){e.preventDefault();if(this.callResetNorth_!==undefined){this.callResetNorth_()}else{this.resetNorth_()}};ol.control.Rotate.prototype.resetNorth_=function(){var e=this.getMap();var o=e.getView();if(!o){return}var t=o.getRotation();if(t!==undefined){if(this.duration_>0){t=t%(2*Math.PI);if(t<-Math.PI){t+=2*Math.PI}if(t>Math.PI){t-=2*Math.PI}e.beforeRender(ol.animation.rotate({rotation:t,duration:this.duration_,easing:ol.easing.easeOut}))}o.setRotation(0)}};ol.control.Rotate.render=function(e){var o=e.frameState;if(!o){return}var t=o.viewState.rotation;if(t!=this.rotation_){var r="rotate("+t+"rad)";if(this.autoHide_){goog.dom.classlist.enable(this.element,ol.css.CLASS_HIDDEN,t===0)}this.label_.style.msTransform=r;this.label_.style.webkitTransform=r;this.label_.style.transform=r}this.rotation_=t};goog.provide("ol.control.Zoom");goog.require("goog.dom");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol.animation");goog.require("ol.control.Control");goog.require("ol.css");goog.require("ol.easing");ol.control.Zoom=function(e){var o=e?e:{};var t=o.className!==undefined?o.className:"ol-zoom";var r=o.delta!==undefined?o.delta:1;var i=o.zoomInLabel!==undefined?o.zoomInLabel:"+";var n=o.zoomOutLabel!==undefined?o.zoomOutLabel:"−";var a=o.zoomInTipLabel!==undefined?o.zoomInTipLabel:"Zoom in";var l=o.zoomOutTipLabel!==undefined?o.zoomOutTipLabel:"Zoom out";var s=goog.dom.createDom("BUTTON",{class:t+"-in",type:"button",title:a},i);ol.events.listen(s,ol.events.EventType.CLICK,goog.partial(ol.control.Zoom.prototype.handleClick_,r),this);var g=goog.dom.createDom("BUTTON",{class:t+"-out",type:"button",title:l},n);ol.events.listen(g,ol.events.EventType.CLICK,goog.partial(ol.control.Zoom.prototype.handleClick_,-r),this);var p=t+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL;var u=goog.dom.createDom("DIV",p,s,g);goog.base(this,{element:u,target:o.target});this.duration_=o.duration!==undefined?o.duration:250};goog.inherits(ol.control.Zoom,ol.control.Control);ol.control.Zoom.prototype.handleClick_=function(e,o){o.preventDefault();this.zoomByDelta_(e)};ol.control.Zoom.prototype.zoomByDelta_=function(e){var o=this.getMap();var t=o.getView();if(!t){return}var r=t.getResolution();if(r){if(this.duration_>0){o.beforeRender(ol.animation.zoom({resolution:r,duration:this.duration_,easing:ol.easing.easeOut}))}var i=t.constrainResolution(r,e);t.setResolution(i)}};goog.provide("ol.control");goog.require("ol");goog.require("ol.Collection");goog.require("ol.control.Attribution");goog.require("ol.control.Rotate");goog.require("ol.control.Zoom");ol.control.defaults=function(e){var o=e?e:{};var t=new ol.Collection;var r=o.zoom!==undefined?o.zoom:true;if(r){t.push(new ol.control.Zoom(o.zoomOptions))}var i=o.rotate!==undefined?o.rotate:true;if(i){t.push(new ol.control.Rotate(o.rotateOptions))}var n=o.attribution!==undefined?o.attribution:true;if(n){t.push(new ol.control.Attribution(o.attributionOptions))}return t};goog.provide("goog.dom.fullscreen");goog.provide("goog.dom.fullscreen.EventType");goog.require("goog.dom");goog.require("goog.userAgent");goog.dom.fullscreen.EventType={CHANGE:function(){if(goog.userAgent.WEBKIT){return"webkitfullscreenchange"}if(goog.userAgent.GECKO){return"mozfullscreenchange"}if(goog.userAgent.IE){return"MSFullscreenChange"}return"fullscreenchange"}()};goog.dom.fullscreen.isSupported=function(e){var o=goog.dom.fullscreen.getDocument_(e);var t=o.body;return!!(t.webkitRequestFullscreen||t.mozRequestFullScreen&&o.mozFullScreenEnabled||t.msRequestFullscreen&&o.msFullscreenEnabled||t.requestFullscreen&&o.fullscreenEnabled)};goog.dom.fullscreen.requestFullScreen=function(e){if(e.webkitRequestFullscreen){e.webkitRequestFullscreen()}else if(e.mozRequestFullScreen){e.mozRequestFullScreen()}else if(e.msRequestFullscreen){e.msRequestFullscreen()}else if(e.requestFullscreen){e.requestFullscreen()}};goog.dom.fullscreen.requestFullScreenWithKeys=function(e){if(e.mozRequestFullScreenWithKeys){e.mozRequestFullScreenWithKeys()}else if(e.webkitRequestFullscreen){e.webkitRequestFullscreen()}else{goog.dom.fullscreen.requestFullScreen(e)}};goog.dom.fullscreen.exitFullScreen=function(e){var o=goog.dom.fullscreen.getDocument_(e);if(o.webkitCancelFullScreen){o.webkitCancelFullScreen()}else if(o.mozCancelFullScreen){o.mozCancelFullScreen()}else if(o.msExitFullscreen){o.msExitFullscreen()}else if(o.exitFullscreen){o.exitFullscreen()}};goog.dom.fullscreen.isFullScreen=function(e){var o=goog.dom.fullscreen.getDocument_(e);return!!(o.webkitIsFullScreen||o.mozFullScreen||o.msFullscreenElement||o.fullscreenElement)};goog.dom.fullscreen.getFullScreenElement=function(e){var o=goog.dom.fullscreen.getDocument_(e);var t=[o.webkitFullscreenElement,o.mozFullScreenElement,o.msFullscreenElement,o.fullscreenElement];for(var r=0;r<t.length;r++){if(t[r]!=null){return t[r]}}return null};goog.dom.fullscreen.getDocument_=function(e){return e?e.getDocument():goog.dom.getDomHelper().getDocument()};goog.provide("ol.control.FullScreen");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.classlist");goog.require("goog.dom.fullscreen");goog.require("goog.dom.fullscreen.EventType");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol");goog.require("ol.control.Control");goog.require("ol.css");ol.control.FullScreen=function(e){var o=e?e:{};this.cssClassName_=o.className!==undefined?o.className:"ol-full-screen";var t=o.label!==undefined?o.label:"⤢";this.labelNode_=typeof t==="string"?document.createTextNode(t):t;var r=o.labelActive!==undefined?o.labelActive:"×";this.labelActiveNode_=typeof r==="string"?document.createTextNode(r):r;var i=o.tipLabel?o.tipLabel:"Toggle full-screen";var n=goog.dom.createDom("BUTTON",{class:this.cssClassName_+"-"+goog.dom.fullscreen.isFullScreen(),type:"button",title:i},this.labelNode_);ol.events.listen(n,ol.events.EventType.CLICK,this.handleClick_,this);ol.events.listen(goog.global.document,goog.dom.fullscreen.EventType.CHANGE,this.handleFullScreenChange_,this);var a=this.cssClassName_+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL+" "+(!goog.dom.fullscreen.isSupported()?ol.css.CLASS_UNSUPPORTED:"");var l=goog.dom.createDom("DIV",a,n);goog.base(this,{element:l,target:o.target});this.keys_=o.keys!==undefined?o.keys:false;this.source_=o.source};goog.inherits(ol.control.FullScreen,ol.control.Control);ol.control.FullScreen.prototype.handleClick_=function(e){e.preventDefault();this.handleFullScreen_()};ol.control.FullScreen.prototype.handleFullScreen_=function(){if(!goog.dom.fullscreen.isSupported()){return}var e=this.getMap();if(!e){return}if(goog.dom.fullscreen.isFullScreen()){goog.dom.fullscreen.exitFullScreen()}else{var o=this.source_?goog.dom.getElement(this.source_):e.getTargetElement();goog.asserts.assert(o,"element should be defined");if(this.keys_){goog.dom.fullscreen.requestFullScreenWithKeys(o)}else{goog.dom.fullscreen.requestFullScreen(o)}}};ol.control.FullScreen.prototype.handleFullScreenChange_=function(){var e=this.cssClassName_+"-true";var o=this.cssClassName_+"-false";var t=this.element.firstElementChild;var r=this.getMap();if(goog.dom.fullscreen.isFullScreen()){goog.dom.classlist.swap(t,o,e);goog.dom.replaceNode(this.labelActiveNode_,this.labelNode_)}else{goog.dom.classlist.swap(t,e,o);goog.dom.replaceNode(this.labelNode_,this.labelActiveNode_)}if(r){r.updateSize()}};goog.provide("ol.Pixel");ol.Pixel;goog.provide("ol.control.MousePosition");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol.CoordinateFormatType");goog.require("ol.Object");goog.require("ol.Pixel");goog.require("ol.TransformFunction");goog.require("ol.control.Control");goog.require("ol.proj");goog.require("ol.proj.Projection");ol.control.MousePositionProperty={PROJECTION:"projection",COORDINATE_FORMAT:"coordinateFormat"};ol.control.MousePosition=function(e){var o=e?e:{};var t=document.createElement("DIV");t.className=o.className!==undefined?o.className:"ol-mouse-position";var r=o.render?o.render:ol.control.MousePosition.render;goog.base(this,{element:t,render:r,target:o.target});ol.events.listen(this,ol.Object.getChangeEventType(ol.control.MousePositionProperty.PROJECTION),this.handleProjectionChanged_,this);if(o.coordinateFormat){this.setCoordinateFormat(o.coordinateFormat)}if(o.projection){
this.setProjection(ol.proj.get(o.projection))}this.undefinedHTML_=o.undefinedHTML!==undefined?o.undefinedHTML:"";this.renderedHTML_=t.innerHTML;this.mapProjection_=null;this.transform_=null;this.lastMouseMovePixel_=null};goog.inherits(ol.control.MousePosition,ol.control.Control);ol.control.MousePosition.render=function(e){var o=e.frameState;if(!o){this.mapProjection_=null}else{if(this.mapProjection_!=o.viewState.projection){this.mapProjection_=o.viewState.projection;this.transform_=null}}this.updateHTML_(this.lastMouseMovePixel_)};ol.control.MousePosition.prototype.handleProjectionChanged_=function(){this.transform_=null};ol.control.MousePosition.prototype.getCoordinateFormat=function(){return this.get(ol.control.MousePositionProperty.COORDINATE_FORMAT)};ol.control.MousePosition.prototype.getProjection=function(){return this.get(ol.control.MousePositionProperty.PROJECTION)};ol.control.MousePosition.prototype.handleMouseMove=function(e){var o=this.getMap();this.lastMouseMovePixel_=o.getEventPixel(e);this.updateHTML_(this.lastMouseMovePixel_)};ol.control.MousePosition.prototype.handleMouseOut=function(e){this.updateHTML_(null);this.lastMouseMovePixel_=null};ol.control.MousePosition.prototype.setMap=function(e){goog.base(this,"setMap",e);if(e){var o=e.getViewport();this.listenerKeys.push(ol.events.listen(o,ol.events.EventType.MOUSEMOVE,this.handleMouseMove,this),ol.events.listen(o,ol.events.EventType.MOUSEOUT,this.handleMouseOut,this))}};ol.control.MousePosition.prototype.setCoordinateFormat=function(e){this.set(ol.control.MousePositionProperty.COORDINATE_FORMAT,e)};ol.control.MousePosition.prototype.setProjection=function(e){this.set(ol.control.MousePositionProperty.PROJECTION,e)};ol.control.MousePosition.prototype.updateHTML_=function(e){var o=this.undefinedHTML_;if(e&&this.mapProjection_){if(!this.transform_){var t=this.getProjection();if(t){this.transform_=ol.proj.getTransformFromProjections(this.mapProjection_,t)}else{this.transform_=ol.proj.identityTransform}}var r=this.getMap();var i=r.getCoordinateFromPixel(e);if(i){this.transform_(i,i);var n=this.getCoordinateFormat();if(n){o=n(i)}else{o=i.toString()}}}if(!this.renderedHTML_||o!=this.renderedHTML_){this.element.innerHTML=o;this.renderedHTML_=o}};goog.provide("goog.debug.EntryPointMonitor");goog.provide("goog.debug.entryPointRegistry");goog.require("goog.asserts");goog.debug.EntryPointMonitor=function(){};goog.debug.EntryPointMonitor.prototype.wrap;goog.debug.EntryPointMonitor.prototype.unwrap;goog.debug.entryPointRegistry.refList_=[];goog.debug.entryPointRegistry.monitors_=[];goog.debug.entryPointRegistry.monitorsMayExist_=false;goog.debug.entryPointRegistry.register=function(e){goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=e;if(goog.debug.entryPointRegistry.monitorsMayExist_){var o=goog.debug.entryPointRegistry.monitors_;for(var t=0;t<o.length;t++){e(goog.bind(o[t].wrap,o[t]))}}};goog.debug.entryPointRegistry.monitorAll=function(e){goog.debug.entryPointRegistry.monitorsMayExist_=true;var o=goog.bind(e.wrap,e);for(var t=0;t<goog.debug.entryPointRegistry.refList_.length;t++){goog.debug.entryPointRegistry.refList_[t](o)}goog.debug.entryPointRegistry.monitors_.push(e)};goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(e){var o=goog.debug.entryPointRegistry.monitors_;goog.asserts.assert(e==o[o.length-1],"Only the most recent monitor can be unwrapped.");var t=goog.bind(e.unwrap,e);for(var r=0;r<goog.debug.entryPointRegistry.refList_.length;r++){goog.debug.entryPointRegistry.refList_[r](t)}o.length--};goog.provide("goog.async.nextTick");goog.provide("goog.async.throwException");goog.require("goog.debug.entryPointRegistry");goog.require("goog.dom.TagName");goog.require("goog.functions");goog.require("goog.labs.userAgent.browser");goog.require("goog.labs.userAgent.engine");goog.async.throwException=function(e){goog.global.setTimeout(function(){throw e},0)};goog.async.nextTick=function(e,o,t){var r=e;if(o){r=goog.bind(e,o)}r=goog.async.nextTick.wrapCallback_(r);if(goog.isFunction(goog.global.setImmediate)&&(t||goog.async.nextTick.useSetImmediate_())){goog.global.setImmediate(r);return}if(!goog.async.nextTick.setImmediate_){goog.async.nextTick.setImmediate_=goog.async.nextTick.getSetImmediateEmulator_()}goog.async.nextTick.setImmediate_(r)};goog.async.nextTick.useSetImmediate_=function(){if(!goog.global.Window||!goog.global.Window.prototype){return true}if(goog.labs.userAgent.browser.isEdge()||goog.global.Window.prototype.setImmediate!=goog.global.setImmediate){return true}return false};goog.async.nextTick.setImmediate_;goog.async.nextTick.getSetImmediateEmulator_=function(){var e=goog.global["MessageChannel"];if(typeof e==="undefined"&&typeof window!=="undefined"&&window.postMessage&&window.addEventListener&&!goog.labs.userAgent.engine.isPresto()){e=function(){var e=document.createElement(goog.dom.TagName.IFRAME);e.style.display="none";e.src="";document.documentElement.appendChild(e);var o=e.contentWindow;var t=o.document;t.open();t.write("");t.close();var r="callImmediate"+Math.random();var i=o.location.protocol=="file:"?"*":o.location.protocol+"//"+o.location.host;var n=goog.bind(function(e){if(i!="*"&&e.origin!=i||e.data!=r){return}this["port1"].onmessage()},this);o.addEventListener("message",n,false);this["port1"]={};this["port2"]={postMessage:function(){o.postMessage(r,i)}}}}if(typeof e!=="undefined"&&!goog.labs.userAgent.browser.isIE()){var o=new e;var t={};var r=t;o["port1"].onmessage=function(){if(goog.isDef(t.next)){t=t.next;var e=t.cb;t.cb=null;e()}};return function(e){r.next={cb:e};r=r.next;o["port2"].postMessage(0)}}if(typeof document!=="undefined"&&"onreadystatechange"in document.createElement(goog.dom.TagName.SCRIPT)){return function(e){var o=document.createElement(goog.dom.TagName.SCRIPT);o.onreadystatechange=function(){o.onreadystatechange=null;o.parentNode.removeChild(o);o=null;e();e=null};document.documentElement.appendChild(o)}}return function(e){goog.global.setTimeout(e,0)}};goog.async.nextTick.wrapCallback_=goog.functions.identity;goog.debug.entryPointRegistry.register(function(e){goog.async.nextTick.wrapCallback_=e});goog.provide("goog.html.SafeScript");goog.require("goog.asserts");goog.require("goog.string.Const");goog.require("goog.string.TypedString");goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="";this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.SafeScript.prototype.implementsGoogStringTypedString=true;goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeScript.fromConstant=function(e){var o=goog.string.Const.unwrap(e);if(o.length===0){return goog.html.SafeScript.EMPTY}return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(o)};goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_};if(goog.DEBUG){goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}}goog.html.SafeScript.unwrap=function(e){if(e instanceof goog.html.SafeScript&&e.constructor===goog.html.SafeScript&&e.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_){return e.privateDoNotAccessOrElseSafeScriptWrappedValue_}else{goog.asserts.fail("expected object of type SafeScript, got '"+e+"' of type "+goog.typeOf(e));return"type_error:SafeScript"}};goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeScript).initSecurityPrivateDoNotAccessOrElse_(e)};goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){this.privateDoNotAccessOrElseSafeScriptWrappedValue_=e;return this};goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("");goog.provide("goog.html.uncheckedconversions");goog.require("goog.asserts");goog.require("goog.html.SafeHtml");goog.require("goog.html.SafeScript");goog.require("goog.html.SafeStyle");goog.require("goog.html.SafeStyleSheet");goog.require("goog.html.SafeUrl");goog.require("goog.html.TrustedResourceUrl");goog.require("goog.string");goog.require("goog.string.Const");goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(e,o,t){goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification");goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification");return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(o,t||null)};goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(e,o){goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification");goog.asserts.assert(!goog.string.isEmpty(goog.string.Const.unwrap(e)),"must provide non-empty justification");return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(o)};goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(e,o){goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification");goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification");return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(o)};goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(e,o){goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification");goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification");return goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(o)};goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(e,o){goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification");goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification");return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o)};goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(e,o){goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification");goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification");return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(o)};goog.provide("goog.structs");goog.require("goog.array");goog.require("goog.object");goog.structs.getCount=function(e){if(e.getCount&&typeof e.getCount=="function"){return e.getCount()}if(goog.isArrayLike(e)||goog.isString(e)){return e.length}return goog.object.getCount(e)};goog.structs.getValues=function(e){if(e.getValues&&typeof e.getValues=="function"){return e.getValues()}if(goog.isString(e)){return e.split("")}if(goog.isArrayLike(e)){var o=[];var t=e.length;for(var r=0;r<t;r++){o.push(e[r])}return o}return goog.object.getValues(e)};goog.structs.getKeys=function(e){if(e.getKeys&&typeof e.getKeys=="function"){return e.getKeys()}if(e.getValues&&typeof e.getValues=="function"){return undefined}if(goog.isArrayLike(e)||goog.isString(e)){var o=[];var t=e.length;for(var r=0;r<t;r++){o.push(r)}return o}return goog.object.getKeys(e)};goog.structs.contains=function(e,o){if(e.contains&&typeof e.contains=="function"){return e.contains(o)}if(e.containsValue&&typeof e.containsValue=="function"){return e.containsValue(o)}if(goog.isArrayLike(e)||goog.isString(e)){return goog.array.contains(e,o)}return goog.object.containsValue(e,o)};goog.structs.isEmpty=function(e){if(e.isEmpty&&typeof e.isEmpty=="function"){return e.isEmpty()}if(goog.isArrayLike(e)||goog.isString(e)){return goog.array.isEmpty(e)}return goog.object.isEmpty(e)};goog.structs.clear=function(e){if(e.clear&&typeof e.clear=="function"){e.clear()}else if(goog.isArrayLike(e)){goog.array.clear(e)}else{goog.object.clear(e)}};goog.structs.forEach=function(e,o,t){if(e.forEach&&typeof e.forEach=="function"){e.forEach(o,t)}else if(goog.isArrayLike(e)||goog.isString(e)){goog.array.forEach(e,o,t)}else{var r=goog.structs.getKeys(e);var i=goog.structs.getValues(e);var n=i.length;for(var a=0;a<n;a++){o.call(t,i[a],r&&r[a],e)}}};goog.structs.filter=function(e,o,t){if(typeof e.filter=="function"){return e.filter(o,t)}if(goog.isArrayLike(e)||goog.isString(e)){return goog.array.filter(e,o,t)}var r;var i=goog.structs.getKeys(e);var n=goog.structs.getValues(e);var a=n.length;if(i){r={};for(var l=0;l<a;l++){if(o.call(t,n[l],i[l],e)){r[i[l]]=n[l]}}}else{r=[];for(var l=0;l<a;l++){if(o.call(t,n[l],undefined,e)){r.push(n[l])}}}return r};goog.structs.map=function(e,o,t){if(typeof e.map=="function"){return e.map(o,t)}if(goog.isArrayLike(e)||goog.isString(e)){return goog.array.map(e,o,t)}var r;var i=goog.structs.getKeys(e);var n=goog.structs.getValues(e);var a=n.length;if(i){r={};for(var l=0;l<a;l++){r[i[l]]=o.call(t,n[l],i[l],e)}}else{r=[];for(var l=0;l<a;l++){r[l]=o.call(t,n[l],undefined,e)}}return r};goog.structs.some=function(e,o,t){if(typeof e.some=="function"){return e.some(o,t)}if(goog.isArrayLike(e)||goog.isString(e)){return goog.array.some(e,o,t)}var r=goog.structs.getKeys(e);var i=goog.structs.getValues(e);var n=i.length;for(var a=0;a<n;a++){if(o.call(t,i[a],r&&r[a],e)){return true}}return false};goog.structs.every=function(e,o,t){if(typeof e.every=="function"){return e.every(o,t)}if(goog.isArrayLike(e)||goog.isString(e)){return goog.array.every(e,o,t)}var r=goog.structs.getKeys(e);var i=goog.structs.getValues(e);var n=i.length;for(var a=0;a<n;a++){if(!o.call(t,i[a],r&&r[a],e)){return false}}return true};goog.provide("goog.structs.Collection");goog.structs.Collection=function(){};goog.structs.Collection.prototype.add;goog.structs.Collection.prototype.remove;goog.structs.Collection.prototype.contains;goog.structs.Collection.prototype.getCount;goog.provide("goog.iter");goog.provide("goog.iter.Iterable");goog.provide("goog.iter.Iterator");goog.provide("goog.iter.StopIteration");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.functions");goog.require("goog.math");goog.iter.Iterable;goog.iter.StopIteration="StopIteration"in goog.global?goog.global["StopIteration"]:{message:"StopIteration",stack:""};goog.iter.Iterator=function(){};goog.iter.Iterator.prototype.next=function(){throw goog.iter.StopIteration};goog.iter.Iterator.prototype.__iterator__=function(e){return this};goog.iter.toIterator=function(e){if(e instanceof goog.iter.Iterator){return e}if(typeof e.__iterator__=="function"){return e.__iterator__(false)}if(goog.isArrayLike(e)){var o=0;var t=new goog.iter.Iterator;t.next=function(){while(true){if(o>=e.length){throw goog.iter.StopIteration}if(!(o in e)){o++;continue}return e[o++]}};return t}throw Error("Not implemented")};goog.iter.forEach=function(e,o,t){if(goog.isArrayLike(e)){try{goog.array.forEach(e,o,t)}catch(e){if(e!==goog.iter.StopIteration){throw e}}}else{e=goog.iter.toIterator(e);try{while(true){o.call(t,e.next(),undefined,e)}}catch(e){if(e!==goog.iter.StopIteration){throw e}}}};goog.iter.filter=function(e,o,t){var r=goog.iter.toIterator(e);var i=new goog.iter.Iterator;i.next=function(){while(true){var e=r.next();if(o.call(t,e,undefined,r)){return e}}};return i};goog.iter.filterFalse=function(e,o,t){return goog.iter.filter(e,goog.functions.not(o),t)};goog.iter.range=function(e,o,t){var r=0;var i=e;var n=t||1;if(arguments.length>1){r=e;i=o}if(n==0){throw Error("Range step argument must not be zero")}var a=new goog.iter.Iterator;a.next=function(){if(n>0&&r>=i||n<0&&r<=i){throw goog.iter.StopIteration}var e=r;r+=n;return e};return a};goog.iter.join=function(e,o){return goog.iter.toArray(e).join(o)};goog.iter.map=function(e,o,t){var r=goog.iter.toIterator(e);var i=new goog.iter.Iterator;i.next=function(){var e=r.next();return o.call(t,e,undefined,r)};return i};goog.iter.reduce=function(e,o,t,r){var i=t;goog.iter.forEach(e,function(e){i=o.call(r,i,e)});return i};goog.iter.some=function(e,o,t){e=goog.iter.toIterator(e);try{while(true){if(o.call(t,e.next(),undefined,e)){return true}}}catch(e){if(e!==goog.iter.StopIteration){throw e}}return false};goog.iter.every=function(e,o,t){e=goog.iter.toIterator(e);try{while(true){if(!o.call(t,e.next(),undefined,e)){return false}}}catch(e){if(e!==goog.iter.StopIteration){throw e}}return true};goog.iter.chain=function(e){return goog.iter.chainFromIterable(arguments)};goog.iter.chainFromIterable=function(e){var o=goog.iter.toIterator(e);var t=new goog.iter.Iterator;var r=null;t.next=function(){while(true){if(r==null){var e=o.next();r=goog.iter.toIterator(e)}try{return r.next()}catch(e){if(e!==goog.iter.StopIteration){throw e}r=null}}};return t};goog.iter.dropWhile=function(e,o,t){var r=goog.iter.toIterator(e);var i=new goog.iter.Iterator;var n=true;i.next=function(){while(true){var e=r.next();if(n&&o.call(t,e,undefined,r)){continue}else{n=false}return e}};return i};goog.iter.takeWhile=function(e,o,t){var r=goog.iter.toIterator(e);var i=new goog.iter.Iterator;i.next=function(){var e=r.next();if(o.call(t,e,undefined,r)){return e}throw goog.iter.StopIteration};return i};goog.iter.toArray=function(e){if(goog.isArrayLike(e)){return goog.array.toArray(e)}e=goog.iter.toIterator(e);var o=[];goog.iter.forEach(e,function(e){o.push(e)});return o};goog.iter.equals=function(e,o,t){var r={};var i=goog.iter.zipLongest(r,e,o);var n=t||goog.array.defaultCompareEquality;return goog.iter.every(i,function(e){return n(e[0],e[1])})};goog.iter.nextOrValue=function(e,o){try{return goog.iter.toIterator(e).next()}catch(e){if(e!=goog.iter.StopIteration){throw e}return o}};goog.iter.product=function(e){var o=goog.array.some(arguments,function(e){return!e.length});if(o||!arguments.length){return new goog.iter.Iterator}var t=new goog.iter.Iterator;var r=arguments;var i=goog.array.repeat(0,r.length);t.next=function(){if(i){var e=goog.array.map(i,function(e,o){return r[o][e]});for(var o=i.length-1;o>=0;o--){goog.asserts.assert(i);if(i[o]<r[o].length-1){i[o]++;break}if(o==0){i=null;break}i[o]=0}return e}throw goog.iter.StopIteration};return t};goog.iter.cycle=function(e){var o=goog.iter.toIterator(e);var t=[];var r=0;var i=new goog.iter.Iterator;var n=false;i.next=function(){var e=null;if(!n){try{e=o.next();t.push(e);return e}catch(e){if(e!=goog.iter.StopIteration||goog.array.isEmpty(t)){throw e}n=true}}e=t[r];r=(r+1)%t.length;return e};return i};goog.iter.count=function(e,o){var t=e||0;var r=goog.isDef(o)?o:1;var i=new goog.iter.Iterator;i.next=function(){var e=t;t+=r;return e};return i};goog.iter.repeat=function(e){var o=new goog.iter.Iterator;o.next=goog.functions.constant(e);return o};goog.iter.accumulate=function(e){var o=goog.iter.toIterator(e);var t=0;var r=new goog.iter.Iterator;r.next=function(){t+=o.next();return t};return r};goog.iter.zip=function(e){var o=arguments;var t=new goog.iter.Iterator;if(o.length>0){var r=goog.array.map(o,goog.iter.toIterator);t.next=function(){var e=goog.array.map(r,function(e){return e.next()});return e}}return t};goog.iter.zipLongest=function(e,o){var t=goog.array.slice(arguments,1);var r=new goog.iter.Iterator;if(t.length>0){var i=goog.array.map(t,goog.iter.toIterator);r.next=function(){var o=false;var t=goog.array.map(i,function(t){var r;try{r=t.next();o=true}catch(o){if(o!==goog.iter.StopIteration){throw o}r=e}return r});if(!o){throw goog.iter.StopIteration}return t}}return r};goog.iter.compress=function(e,o){var t=goog.iter.toIterator(o);return goog.iter.filter(e,function(){return!!t.next()})};goog.iter.GroupByIterator_=function(e,o){this.iterator=goog.iter.toIterator(e);this.keyFunc=o||goog.functions.identity;this.targetKey;this.currentKey;this.currentValue};goog.inherits(goog.iter.GroupByIterator_,goog.iter.Iterator);goog.iter.GroupByIterator_.prototype.next=function(){while(this.currentKey==this.targetKey){this.currentValue=this.iterator.next();this.currentKey=this.keyFunc(this.currentValue)}this.targetKey=this.currentKey;return[this.currentKey,this.groupItems_(this.targetKey)]};goog.iter.GroupByIterator_.prototype.groupItems_=function(e){var o=[];while(this.currentKey==e){o.push(this.currentValue);try{this.currentValue=this.iterator.next()}catch(e){if(e!==goog.iter.StopIteration){throw e}break}this.currentKey=this.keyFunc(this.currentValue)}return o};goog.iter.groupBy=function(e,o){return new goog.iter.GroupByIterator_(e,o)};goog.iter.starMap=function(e,o,t){var r=goog.iter.toIterator(e);var i=new goog.iter.Iterator;i.next=function(){var e=goog.iter.toArray(r.next());return o.apply(t,goog.array.concat(e,undefined,r))};return i};goog.iter.tee=function(e,o){var t=goog.iter.toIterator(e);var r=goog.isNumber(o)?o:2;var i=goog.array.map(goog.array.range(r),function(){return[]});var n=function(){var e=t.next();goog.array.forEach(i,function(o){o.push(e)})};var a=function(e){var o=new goog.iter.Iterator;o.next=function(){if(goog.array.isEmpty(e)){n()}goog.asserts.assert(!goog.array.isEmpty(e));return e.shift()};return o};return goog.array.map(i,a)};goog.iter.enumerate=function(e,o){return goog.iter.zip(goog.iter.count(o),e)};goog.iter.limit=function(e,o){goog.asserts.assert(goog.math.isInt(o)&&o>=0);var t=goog.iter.toIterator(e);var r=new goog.iter.Iterator;var i=o;r.next=function(){if(i-- >0){return t.next()}throw goog.iter.StopIteration};return r};goog.iter.consume=function(e,o){goog.asserts.assert(goog.math.isInt(o)&&o>=0);var t=goog.iter.toIterator(e);while(o-- >0){goog.iter.nextOrValue(t,null)}return t};goog.iter.slice=function(e,o,t){goog.asserts.assert(goog.math.isInt(o)&&o>=0);var r=goog.iter.consume(e,o);if(goog.isNumber(t)){goog.asserts.assert(goog.math.isInt(t)&&t>=o);r=goog.iter.limit(r,t-o)}return r};goog.iter.hasDuplicates_=function(e){var o=[];goog.array.removeDuplicates(e,o);return e.length!=o.length};goog.iter.permutations=function(e,o){var t=goog.iter.toArray(e);var r=goog.isNumber(o)?o:t.length;var i=goog.array.repeat(t,r);var n=goog.iter.product.apply(undefined,i);return goog.iter.filter(n,function(e){return!goog.iter.hasDuplicates_(e)})};goog.iter.combinations=function(e,o){var t=goog.iter.toArray(e);var r=goog.iter.range(t.length);var i=goog.iter.permutations(r,o);var n=goog.iter.filter(i,function(e){return goog.array.isSorted(e)});var a=new goog.iter.Iterator;function l(e){return t[e]}a.next=function(){return goog.array.map(n.next(),l)};return a};goog.iter.combinationsWithReplacement=function(e,o){var t=goog.iter.toArray(e);var r=goog.array.range(t.length);var i=goog.array.repeat(r,o);var n=goog.iter.product.apply(undefined,i);var a=goog.iter.filter(n,function(e){return goog.array.isSorted(e)});var l=new goog.iter.Iterator;function s(e){return t[e]}l.next=function(){return goog.array.map(a.next(),s)};return l};goog.provide("goog.structs.Map");goog.require("goog.iter.Iterator");goog.require("goog.iter.StopIteration");goog.require("goog.object");goog.structs.Map=function(e,o){this.map_={};this.keys_=[];this.count_=0;this.version_=0;var t=arguments.length;if(t>1){if(t%2){throw Error("Uneven number of arguments")}for(var r=0;r<t;r+=2){this.set(arguments[r],arguments[r+1])}}else if(e){this.addAll(e)}};goog.structs.Map.prototype.getCount=function(){return this.count_};goog.structs.Map.prototype.getValues=function(){this.cleanupKeysArray_();var e=[];for(var o=0;o<this.keys_.length;o++){var t=this.keys_[o];e.push(this.map_[t])}return e};goog.structs.Map.prototype.getKeys=function(){this.cleanupKeysArray_();return this.keys_.concat()};goog.structs.Map.prototype.containsKey=function(e){return goog.structs.Map.hasKey_(this.map_,e)};goog.structs.Map.prototype.containsValue=function(e){for(var o=0;o<this.keys_.length;o++){var t=this.keys_[o];if(goog.structs.Map.hasKey_(this.map_,t)&&this.map_[t]==e){return true}}return false};goog.structs.Map.prototype.equals=function(e,o){if(this===e){return true}if(this.count_!=e.getCount()){return false}var t=o||goog.structs.Map.defaultEquals;this.cleanupKeysArray_();for(var r,i=0;r=this.keys_[i];i++){if(!t(this.get(r),e.get(r))){return false}}return true};goog.structs.Map.defaultEquals=function(e,o){return e===o};goog.structs.Map.prototype.isEmpty=function(){return this.count_==0};goog.structs.Map.prototype.clear=function(){this.map_={};this.keys_.length=0;this.count_=0;this.version_=0};goog.structs.Map.prototype.remove=function(e){if(goog.structs.Map.hasKey_(this.map_,e)){delete this.map_[e];this.count_--;this.version_++;if(this.keys_.length>2*this.count_){this.cleanupKeysArray_()}return true}return false};goog.structs.Map.prototype.cleanupKeysArray_=function(){if(this.count_!=this.keys_.length){var e=0;var o=0;while(e<this.keys_.length){var t=this.keys_[e];if(goog.structs.Map.hasKey_(this.map_,t)){this.keys_[o++]=t}e++}this.keys_.length=o}if(this.count_!=this.keys_.length){var r={};var e=0;var o=0;while(e<this.keys_.length){var t=this.keys_[e];if(!goog.structs.Map.hasKey_(r,t)){this.keys_[o++]=t;r[t]=1}e++}this.keys_.length=o}};goog.structs.Map.prototype.get=function(e,o){if(goog.structs.Map.hasKey_(this.map_,e)){return this.map_[e]}return o};goog.structs.Map.prototype.set=function(e,o){if(!goog.structs.Map.hasKey_(this.map_,e)){this.count_++;this.keys_.push(e);this.version_++}this.map_[e]=o};goog.structs.Map.prototype.addAll=function(e){var o,t;if(e instanceof goog.structs.Map){o=e.getKeys();t=e.getValues()}else{o=goog.object.getKeys(e);t=goog.object.getValues(e)}for(var r=0;r<o.length;r++){this.set(o[r],t[r])}};goog.structs.Map.prototype.forEach=function(e,o){var t=this.getKeys();for(var r=0;r<t.length;r++){var i=t[r];var n=this.get(i);e.call(o,n,i,this)}};goog.structs.Map.prototype.clone=function(){return new goog.structs.Map(this)};goog.structs.Map.prototype.transpose=function(){var e=new goog.structs.Map;for(var o=0;o<this.keys_.length;o++){var t=this.keys_[o];var r=this.map_[t];e.set(r,t)}return e};goog.structs.Map.prototype.toObject=function(){this.cleanupKeysArray_();var e={};for(var o=0;o<this.keys_.length;o++){var t=this.keys_[o];e[t]=this.map_[t]}return e};goog.structs.Map.prototype.getKeyIterator=function(){return this.__iterator__(true)};goog.structs.Map.prototype.getValueIterator=function(){return this.__iterator__(false)};goog.structs.Map.prototype.__iterator__=function(e){this.cleanupKeysArray_();var o=0;var t=this.version_;var r=this;var i=new goog.iter.Iterator;i.next=function(){if(t!=r.version_){throw Error("The map has changed since the iterator was created")}if(o>=r.keys_.length){throw goog.iter.StopIteration}var i=r.keys_[o++];return e?i:r.map_[i]};return i};goog.structs.Map.hasKey_=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)};goog.provide("goog.structs.Set");goog.require("goog.structs");goog.require("goog.structs.Collection");goog.require("goog.structs.Map");goog.structs.Set=function(e){this.map_=new goog.structs.Map;if(e){this.addAll(e)}};goog.structs.Set.getKey_=function(e){var o=typeof e;if(o=="object"&&e||o=="function"){return"o"+goog.getUid(e)}else{return o.substr(0,1)+e}};goog.structs.Set.prototype.getCount=function(){return this.map_.getCount()};goog.structs.Set.prototype.add=function(e){this.map_.set(goog.structs.Set.getKey_(e),e)};goog.structs.Set.prototype.addAll=function(e){var o=goog.structs.getValues(e);var t=o.length;for(var r=0;r<t;r++){this.add(o[r])}};goog.structs.Set.prototype.removeAll=function(e){var o=goog.structs.getValues(e);var t=o.length;for(var r=0;r<t;r++){this.remove(o[r])}};goog.structs.Set.prototype.remove=function(e){return this.map_.remove(goog.structs.Set.getKey_(e))};goog.structs.Set.prototype.clear=function(){this.map_.clear()};goog.structs.Set.prototype.isEmpty=function(){return this.map_.isEmpty()};goog.structs.Set.prototype.contains=function(e){return this.map_.containsKey(goog.structs.Set.getKey_(e))};goog.structs.Set.prototype.containsAll=function(e){return goog.structs.every(e,this.contains,this)};goog.structs.Set.prototype.intersection=function(e){var o=new goog.structs.Set;var t=goog.structs.getValues(e);for(var r=0;r<t.length;r++){var i=t[r];if(this.contains(i)){o.add(i)}}return o};goog.structs.Set.prototype.difference=function(e){var o=this.clone();o.removeAll(e);return o};goog.structs.Set.prototype.getValues=function(){return this.map_.getValues()};goog.structs.Set.prototype.clone=function(){return new goog.structs.Set(this)};goog.structs.Set.prototype.equals=function(e){return this.getCount()==goog.structs.getCount(e)&&this.isSubsetOf(e)};goog.structs.Set.prototype.isSubsetOf=function(e){var o=goog.structs.getCount(e);if(this.getCount()>o){return false}if(!(e instanceof goog.structs.Set)&&o>5){e=new goog.structs.Set(e)}return goog.structs.every(this,function(o){return goog.structs.contains(e,o)})};goog.structs.Set.prototype.__iterator__=function(e){return this.map_.__iterator__(false)};goog.provide("goog.debug");goog.require("goog.array");goog.require("goog.html.SafeHtml");goog.require("goog.html.SafeUrl");goog.require("goog.html.uncheckedconversions");goog.require("goog.string.Const");goog.require("goog.structs.Set");goog.require("goog.userAgent");goog.define("goog.debug.LOGGING_ENABLED",goog.DEBUG);goog.define("goog.debug.FORCE_SLOPPY_STACKS",false);goog.debug.catchErrors=function(e,o,t){var r=t||goog.global;var i=r.onerror;var n=!!o;if(goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("535.3")){n=!n}r.onerror=function(o,t,r,a,l){if(i){i(o,t,r,a,l)}e({message:o,fileName:t,line:r,col:a,error:l});return n}};goog.debug.expose=function(e,o){if(typeof e=="undefined"){return"undefined"}if(e==null){return"NULL"}var t=[];for(var r in e){if(!o&&goog.isFunction(e[r])){continue}var i=r+" = ";try{i+=e[r]}catch(e){i+="*** "+e+" ***"}t.push(i)}return t.join("\n")};goog.debug.deepExpose=function(e,o){var t=[];var r=function(e,i,n){var a=i+"  ";var l=new goog.structs.Set(n);var s=function(e){return e.replace(/\n/g,"\n"+i)};try{if(!goog.isDef(e)){t.push("undefined")}else if(goog.isNull(e)){t.push("NULL")}else if(goog.isString(e)){t.push('"'+s(e)+'"')}else if(goog.isFunction(e)){t.push(s(String(e)))}else if(goog.isObject(e)){if(l.contains(e)){t.push("*** reference loop detected ***")}else{l.add(e);t.push("{");for(var g in e){if(!o&&goog.isFunction(e[g])){continue}t.push("\n");t.push(a);t.push(g+" = ");r(e[g],a,l)}t.push("\n"+i+"}")}}else{t.push(e)}}catch(e){t.push("*** "+e+" ***")}};r(e,"",new goog.structs.Set);return t.join("")};goog.debug.exposeArray=function(e){var o=[];for(var t=0;t<e.length;t++){if(goog.isArray(e[t])){o.push(goog.debug.exposeArray(e[t]))}else{o.push(e[t])}}return"[ "+o.join(", ")+" ]"};goog.debug.exposeException=function(e,o){var t=goog.debug.exposeExceptionAsHtml(e,o);return goog.html.SafeHtml.unwrap(t)};goog.debug.exposeExceptionAsHtml=function(e,o){try{var t=goog.debug.normalizeErrorObject(e);var r=goog.debug.createViewSourceUrl_(t.fileName);var i=goog.html.SafeHtml.concat(goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces("Message: "+t.message+"\nUrl: "),goog.html.SafeHtml.create("a",{href:r,target:"_new"},t.fileName),goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces("\nLine: "+t.lineNumber+"\n\nBrowser stack:\n"+t.stack+"-> "+"[end]\n\nJS stack traversal:\n"+goog.debug.getStacktrace(o)+"-> "));return i}catch(e){return goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces("Exception trying to expose exception! You win, we lose. "+e)}};goog.debug.createViewSourceUrl_=function(e){if(!goog.isDefAndNotNull(e)){e=""}if(!/^https?:\/\//i.test(e)){return goog.html.SafeUrl.fromConstant(goog.string.Const.from("sanitizedviewsrc"))}var o=goog.html.SafeUrl.sanitize(e);return goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("view-source scheme plus HTTP/HTTPS URL"),"view-source:"+goog.html.SafeUrl.unwrap(o))};goog.debug.normalizeErrorObject=function(e){var o=goog.getObjectByName("window.location.href");if(goog.isString(e)){return{message:e,name:"Unknown error",
lineNumber:"Not available",fileName:o,stack:"Not available"}}var t,r;var i=false;try{t=e.lineNumber||e.line||"Not available"}catch(e){t="Not available";i=true}try{r=e.fileName||e.filename||e.sourceURL||goog.global["$googDebugFname"]||o}catch(e){r="Not available";i=true}if(i||!e.lineNumber||!e.fileName||!e.stack||!e.message||!e.name){return{message:e.message||"Not available",name:e.name||"UnknownError",lineNumber:t,fileName:r,stack:e.stack||"Not available"}}return e};goog.debug.enhanceError=function(e,o){var t;if(typeof e=="string"){t=Error(e);if(Error.captureStackTrace){Error.captureStackTrace(t,goog.debug.enhanceError)}}else{t=e}if(!t.stack){t.stack=goog.debug.getStacktrace(goog.debug.enhanceError)}if(o){var r=0;while(t["message"+r]){++r}t["message"+r]=String(o)}return t};goog.debug.getStacktraceSimple=function(e){if(!goog.debug.FORCE_SLOPPY_STACKS){var o=goog.debug.getNativeStackTrace_(goog.debug.getStacktraceSimple);if(o){return o}}var t=[];var r=arguments.callee.caller;var i=0;while(r&&(!e||i<e)){t.push(goog.debug.getFunctionName(r));t.push("()\n");try{r=r.caller}catch(e){t.push("[exception trying to get caller]\n");break}i++;if(i>=goog.debug.MAX_STACK_DEPTH){t.push("[...long stack...]");break}}if(e&&i>=e){t.push("[...reached max depth limit...]")}else{t.push("[end]")}return t.join("")};goog.debug.MAX_STACK_DEPTH=50;goog.debug.getNativeStackTrace_=function(e){var o=new Error;if(Error.captureStackTrace){Error.captureStackTrace(o,e);return String(o.stack)}else{try{throw o}catch(e){o=e}var t=o.stack;if(t){return String(t)}}return null};goog.debug.getStacktrace=function(e){var o;if(!goog.debug.FORCE_SLOPPY_STACKS){var t=e||goog.debug.getStacktrace;o=goog.debug.getNativeStackTrace_(t)}if(!o){o=goog.debug.getStacktraceHelper_(e||arguments.callee.caller,[])}return o};goog.debug.getStacktraceHelper_=function(e,o){var t=[];if(goog.array.contains(o,e)){t.push("[...circular reference...]")}else if(e&&o.length<goog.debug.MAX_STACK_DEPTH){t.push(goog.debug.getFunctionName(e)+"(");var r=e.arguments;for(var i=0;r&&i<r.length;i++){if(i>0){t.push(", ")}var n;var a=r[i];switch(typeof a){case"object":n=a?"object":"null";break;case"string":n=a;break;case"number":n=String(a);break;case"boolean":n=a?"true":"false";break;case"function":n=goog.debug.getFunctionName(a);n=n?n:"[fn]";break;case"undefined":default:n=typeof a;break}if(n.length>40){n=n.substr(0,40)+"..."}t.push(n)}o.push(e);t.push(")\n");try{t.push(goog.debug.getStacktraceHelper_(e.caller,o))}catch(e){t.push("[exception trying to get caller]\n")}}else if(e){t.push("[...long stack...]")}else{t.push("[end]")}return t.join("")};goog.debug.setFunctionResolver=function(e){goog.debug.fnNameResolver_=e};goog.debug.getFunctionName=function(e){if(goog.debug.fnNameCache_[e]){return goog.debug.fnNameCache_[e]}if(goog.debug.fnNameResolver_){var o=goog.debug.fnNameResolver_(e);if(o){goog.debug.fnNameCache_[e]=o;return o}}var t=String(e);if(!goog.debug.fnNameCache_[t]){var r=/function ([^\(]+)/.exec(t);if(r){var i=r[1];goog.debug.fnNameCache_[t]=i}else{goog.debug.fnNameCache_[t]="[Anonymous]"}}return goog.debug.fnNameCache_[t]};goog.debug.makeWhitespaceVisible=function(e){return e.replace(/ /g,"[_]").replace(/\f/g,"[f]").replace(/\n/g,"[n]\n").replace(/\r/g,"[r]").replace(/\t/g,"[t]")};goog.debug.runtimeType=function(e){if(e instanceof Function){return e.displayName||e.name||"unknown type name"}else if(e instanceof Object){return e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}else{return e===null?"null":typeof e}};goog.debug.fnNameCache_={};goog.debug.fnNameResolver_;goog.provide("goog.debug.LogRecord");goog.debug.LogRecord=function(e,o,t,r,i){this.reset(e,o,t,r,i)};goog.debug.LogRecord.prototype.time_;goog.debug.LogRecord.prototype.level_;goog.debug.LogRecord.prototype.msg_;goog.debug.LogRecord.prototype.loggerName_;goog.debug.LogRecord.prototype.sequenceNumber_=0;goog.debug.LogRecord.prototype.exception_=null;goog.define("goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS",true);goog.debug.LogRecord.nextSequenceNumber_=0;goog.debug.LogRecord.prototype.reset=function(e,o,t,r,i){if(goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS){this.sequenceNumber_=typeof i=="number"?i:goog.debug.LogRecord.nextSequenceNumber_++}this.time_=r||goog.now();this.level_=e;this.msg_=o;this.loggerName_=t;delete this.exception_};goog.debug.LogRecord.prototype.getLoggerName=function(){return this.loggerName_};goog.debug.LogRecord.prototype.getException=function(){return this.exception_};goog.debug.LogRecord.prototype.setException=function(e){this.exception_=e};goog.debug.LogRecord.prototype.setLoggerName=function(e){this.loggerName_=e};goog.debug.LogRecord.prototype.getLevel=function(){return this.level_};goog.debug.LogRecord.prototype.setLevel=function(e){this.level_=e};goog.debug.LogRecord.prototype.getMessage=function(){return this.msg_};goog.debug.LogRecord.prototype.setMessage=function(e){this.msg_=e};goog.debug.LogRecord.prototype.getMillis=function(){return this.time_};goog.debug.LogRecord.prototype.setMillis=function(e){this.time_=e};goog.debug.LogRecord.prototype.getSequenceNumber=function(){return this.sequenceNumber_};goog.provide("goog.debug.LogBuffer");goog.require("goog.asserts");goog.require("goog.debug.LogRecord");goog.debug.LogBuffer=function(){goog.asserts.assert(goog.debug.LogBuffer.isBufferingEnabled(),"Cannot use goog.debug.LogBuffer without defining "+"goog.debug.LogBuffer.CAPACITY.");this.clear()};goog.debug.LogBuffer.getInstance=function(){if(!goog.debug.LogBuffer.instance_){goog.debug.LogBuffer.instance_=new goog.debug.LogBuffer}return goog.debug.LogBuffer.instance_};goog.define("goog.debug.LogBuffer.CAPACITY",0);goog.debug.LogBuffer.prototype.buffer_;goog.debug.LogBuffer.prototype.curIndex_;goog.debug.LogBuffer.prototype.isFull_;goog.debug.LogBuffer.prototype.addRecord=function(e,o,t){var r=(this.curIndex_+1)%goog.debug.LogBuffer.CAPACITY;this.curIndex_=r;if(this.isFull_){var i=this.buffer_[r];i.reset(e,o,t);return i}this.isFull_=r==goog.debug.LogBuffer.CAPACITY-1;return this.buffer_[r]=new goog.debug.LogRecord(e,o,t)};goog.debug.LogBuffer.isBufferingEnabled=function(){return goog.debug.LogBuffer.CAPACITY>0};goog.debug.LogBuffer.prototype.clear=function(){this.buffer_=new Array(goog.debug.LogBuffer.CAPACITY);this.curIndex_=-1;this.isFull_=false};goog.debug.LogBuffer.prototype.forEachRecord=function(e){var o=this.buffer_;if(!o[0]){return}var t=this.curIndex_;var r=this.isFull_?t:-1;do{r=(r+1)%goog.debug.LogBuffer.CAPACITY;e(o[r])}while(r!=t)};goog.provide("goog.debug.LogManager");goog.provide("goog.debug.Loggable");goog.provide("goog.debug.Logger");goog.provide("goog.debug.Logger.Level");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.debug");goog.require("goog.debug.LogBuffer");goog.require("goog.debug.LogRecord");goog.debug.Loggable;goog.debug.Logger=function(e){this.name_=e;this.parent_=null;this.level_=null;this.children_=null;this.handlers_=null};goog.debug.Logger.ROOT_LOGGER_NAME="";goog.define("goog.debug.Logger.ENABLE_HIERARCHY",true);if(!goog.debug.Logger.ENABLE_HIERARCHY){goog.debug.Logger.rootHandlers_=[];goog.debug.Logger.rootLevel_}goog.debug.Logger.Level=function(e,o){this.name=e;this.value=o};goog.debug.Logger.Level.prototype.toString=function(){return this.name};goog.debug.Logger.Level.OFF=new goog.debug.Logger.Level("OFF",Infinity);goog.debug.Logger.Level.SHOUT=new goog.debug.Logger.Level("SHOUT",1200);goog.debug.Logger.Level.SEVERE=new goog.debug.Logger.Level("SEVERE",1e3);goog.debug.Logger.Level.WARNING=new goog.debug.Logger.Level("WARNING",900);goog.debug.Logger.Level.INFO=new goog.debug.Logger.Level("INFO",800);goog.debug.Logger.Level.CONFIG=new goog.debug.Logger.Level("CONFIG",700);goog.debug.Logger.Level.FINE=new goog.debug.Logger.Level("FINE",500);goog.debug.Logger.Level.FINER=new goog.debug.Logger.Level("FINER",400);goog.debug.Logger.Level.FINEST=new goog.debug.Logger.Level("FINEST",300);goog.debug.Logger.Level.ALL=new goog.debug.Logger.Level("ALL",0);goog.debug.Logger.Level.PREDEFINED_LEVELS=[goog.debug.Logger.Level.OFF,goog.debug.Logger.Level.SHOUT,goog.debug.Logger.Level.SEVERE,goog.debug.Logger.Level.WARNING,goog.debug.Logger.Level.INFO,goog.debug.Logger.Level.CONFIG,goog.debug.Logger.Level.FINE,goog.debug.Logger.Level.FINER,goog.debug.Logger.Level.FINEST,goog.debug.Logger.Level.ALL];goog.debug.Logger.Level.predefinedLevelsCache_=null;goog.debug.Logger.Level.createPredefinedLevelsCache_=function(){goog.debug.Logger.Level.predefinedLevelsCache_={};for(var e=0,o;o=goog.debug.Logger.Level.PREDEFINED_LEVELS[e];e++){goog.debug.Logger.Level.predefinedLevelsCache_[o.value]=o;goog.debug.Logger.Level.predefinedLevelsCache_[o.name]=o}};goog.debug.Logger.Level.getPredefinedLevel=function(e){if(!goog.debug.Logger.Level.predefinedLevelsCache_){goog.debug.Logger.Level.createPredefinedLevelsCache_()}return goog.debug.Logger.Level.predefinedLevelsCache_[e]||null};goog.debug.Logger.Level.getPredefinedLevelByValue=function(e){if(!goog.debug.Logger.Level.predefinedLevelsCache_){goog.debug.Logger.Level.createPredefinedLevelsCache_()}if(e in goog.debug.Logger.Level.predefinedLevelsCache_){return goog.debug.Logger.Level.predefinedLevelsCache_[e]}for(var o=0;o<goog.debug.Logger.Level.PREDEFINED_LEVELS.length;++o){var t=goog.debug.Logger.Level.PREDEFINED_LEVELS[o];if(t.value<=e){return t}}return null};goog.debug.Logger.getLogger=function(e){return goog.debug.LogManager.getLogger(e)};goog.debug.Logger.logToProfilers=function(e){if(goog.global["console"]){if(goog.global["console"]["timeStamp"]){goog.global["console"]["timeStamp"](e)}else if(goog.global["console"]["markTimeline"]){goog.global["console"]["markTimeline"](e)}}if(goog.global["msWriteProfilerMark"]){goog.global["msWriteProfilerMark"](e)}};goog.debug.Logger.prototype.getName=function(){return this.name_};goog.debug.Logger.prototype.addHandler=function(e){if(goog.debug.LOGGING_ENABLED){if(goog.debug.Logger.ENABLE_HIERARCHY){if(!this.handlers_){this.handlers_=[]}this.handlers_.push(e)}else{goog.asserts.assert(!this.name_,"Cannot call addHandler on a non-root logger when "+"goog.debug.Logger.ENABLE_HIERARCHY is false.");goog.debug.Logger.rootHandlers_.push(e)}}};goog.debug.Logger.prototype.removeHandler=function(e){if(goog.debug.LOGGING_ENABLED){var o=goog.debug.Logger.ENABLE_HIERARCHY?this.handlers_:goog.debug.Logger.rootHandlers_;return!!o&&goog.array.remove(o,e)}else{return false}};goog.debug.Logger.prototype.getParent=function(){return this.parent_};goog.debug.Logger.prototype.getChildren=function(){if(!this.children_){this.children_={}}return this.children_};goog.debug.Logger.prototype.setLevel=function(e){if(goog.debug.LOGGING_ENABLED){if(goog.debug.Logger.ENABLE_HIERARCHY){this.level_=e}else{goog.asserts.assert(!this.name_,"Cannot call setLevel() on a non-root logger when "+"goog.debug.Logger.ENABLE_HIERARCHY is false.");goog.debug.Logger.rootLevel_=e}}};goog.debug.Logger.prototype.getLevel=function(){return goog.debug.LOGGING_ENABLED?this.level_:goog.debug.Logger.Level.OFF};goog.debug.Logger.prototype.getEffectiveLevel=function(){if(!goog.debug.LOGGING_ENABLED){return goog.debug.Logger.Level.OFF}if(!goog.debug.Logger.ENABLE_HIERARCHY){return goog.debug.Logger.rootLevel_}if(this.level_){return this.level_}if(this.parent_){return this.parent_.getEffectiveLevel()}goog.asserts.fail("Root logger has no level set.");return null};goog.debug.Logger.prototype.isLoggable=function(e){return goog.debug.LOGGING_ENABLED&&e.value>=this.getEffectiveLevel().value};goog.debug.Logger.prototype.log=function(e,o,t){if(goog.debug.LOGGING_ENABLED&&this.isLoggable(e)){if(goog.isFunction(o)){o=o()}this.doLogRecord_(this.getLogRecord(e,o,t))}};goog.debug.Logger.prototype.getLogRecord=function(e,o,t){if(goog.debug.LogBuffer.isBufferingEnabled()){var r=goog.debug.LogBuffer.getInstance().addRecord(e,o,this.name_)}else{r=new goog.debug.LogRecord(e,String(o),this.name_)}if(t){r.setException(t)}return r};goog.debug.Logger.prototype.shout=function(e,o){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.SHOUT,e,o)}};goog.debug.Logger.prototype.severe=function(e,o){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.SEVERE,e,o)}};goog.debug.Logger.prototype.warning=function(e,o){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.WARNING,e,o)}};goog.debug.Logger.prototype.info=function(e,o){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.INFO,e,o)}};goog.debug.Logger.prototype.config=function(e,o){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.CONFIG,e,o)}};goog.debug.Logger.prototype.fine=function(e,o){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.FINE,e,o)}};goog.debug.Logger.prototype.finer=function(e,o){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.FINER,e,o)}};goog.debug.Logger.prototype.finest=function(e,o){if(goog.debug.LOGGING_ENABLED){this.log(goog.debug.Logger.Level.FINEST,e,o)}};goog.debug.Logger.prototype.logRecord=function(e){if(goog.debug.LOGGING_ENABLED&&this.isLoggable(e.getLevel())){this.doLogRecord_(e)}};goog.debug.Logger.prototype.doLogRecord_=function(e){goog.debug.Logger.logToProfilers("log:"+e.getMessage());if(goog.debug.Logger.ENABLE_HIERARCHY){var o=this;while(o){o.callPublish_(e);o=o.getParent()}}else{for(var t=0,r;r=goog.debug.Logger.rootHandlers_[t++];){r(e)}}};goog.debug.Logger.prototype.callPublish_=function(e){if(this.handlers_){for(var o=0,t;t=this.handlers_[o];o++){t(e)}}};goog.debug.Logger.prototype.setParent_=function(e){this.parent_=e};goog.debug.Logger.prototype.addChild_=function(e,o){this.getChildren()[e]=o};goog.debug.LogManager={};goog.debug.LogManager.loggers_={};goog.debug.LogManager.rootLogger_=null;goog.debug.LogManager.initialize=function(){if(!goog.debug.LogManager.rootLogger_){goog.debug.LogManager.rootLogger_=new goog.debug.Logger(goog.debug.Logger.ROOT_LOGGER_NAME);goog.debug.LogManager.loggers_[goog.debug.Logger.ROOT_LOGGER_NAME]=goog.debug.LogManager.rootLogger_;goog.debug.LogManager.rootLogger_.setLevel(goog.debug.Logger.Level.CONFIG)}};goog.debug.LogManager.getLoggers=function(){return goog.debug.LogManager.loggers_};goog.debug.LogManager.getRoot=function(){goog.debug.LogManager.initialize();return goog.debug.LogManager.rootLogger_};goog.debug.LogManager.getLogger=function(e){goog.debug.LogManager.initialize();var o=goog.debug.LogManager.loggers_[e];return o||goog.debug.LogManager.createLogger_(e)};goog.debug.LogManager.createFunctionForCatchErrors=function(e){return function(o){var t=e||goog.debug.LogManager.getRoot();t.severe("Error: "+o.message+" ("+o.fileName+" @ Line: "+o.line+")")}};goog.debug.LogManager.createLogger_=function(e){var o=new goog.debug.Logger(e);if(goog.debug.Logger.ENABLE_HIERARCHY){var t=e.lastIndexOf(".");var r=e.substr(0,t);var i=e.substr(t+1);var n=goog.debug.LogManager.getLogger(r);n.addChild_(i,o);o.setParent_(n)}goog.debug.LogManager.loggers_[e]=o;return o};goog.provide("goog.debug.RelativeTimeProvider");goog.debug.RelativeTimeProvider=function(){this.relativeTimeStart_=goog.now()};goog.debug.RelativeTimeProvider.defaultInstance_=new goog.debug.RelativeTimeProvider;goog.debug.RelativeTimeProvider.prototype.set=function(e){this.relativeTimeStart_=e};goog.debug.RelativeTimeProvider.prototype.reset=function(){this.set(goog.now())};goog.debug.RelativeTimeProvider.prototype.get=function(){return this.relativeTimeStart_};goog.debug.RelativeTimeProvider.getDefaultInstance=function(){return goog.debug.RelativeTimeProvider.defaultInstance_};goog.provide("goog.debug.Formatter");goog.provide("goog.debug.HtmlFormatter");goog.provide("goog.debug.TextFormatter");goog.require("goog.debug");goog.require("goog.debug.Logger");goog.require("goog.debug.RelativeTimeProvider");goog.require("goog.html.SafeHtml");goog.debug.Formatter=function(e){this.prefix_=e||"";this.startTimeProvider_=goog.debug.RelativeTimeProvider.getDefaultInstance()};goog.debug.Formatter.prototype.appendNewline=true;goog.debug.Formatter.prototype.showAbsoluteTime=true;goog.debug.Formatter.prototype.showRelativeTime=true;goog.debug.Formatter.prototype.showLoggerName=true;goog.debug.Formatter.prototype.showExceptionText=false;goog.debug.Formatter.prototype.showSeverityLevel=false;goog.debug.Formatter.prototype.formatRecord=goog.abstractMethod;goog.debug.Formatter.prototype.formatRecordAsHtml=goog.abstractMethod;goog.debug.Formatter.prototype.setStartTimeProvider=function(e){this.startTimeProvider_=e};goog.debug.Formatter.prototype.getStartTimeProvider=function(){return this.startTimeProvider_};goog.debug.Formatter.prototype.resetRelativeTimeStart=function(){this.startTimeProvider_.reset()};goog.debug.Formatter.getDateTimeStamp_=function(e){var o=new Date(e.getMillis());return goog.debug.Formatter.getTwoDigitString_(o.getFullYear()-2e3)+goog.debug.Formatter.getTwoDigitString_(o.getMonth()+1)+goog.debug.Formatter.getTwoDigitString_(o.getDate())+" "+goog.debug.Formatter.getTwoDigitString_(o.getHours())+":"+goog.debug.Formatter.getTwoDigitString_(o.getMinutes())+":"+goog.debug.Formatter.getTwoDigitString_(o.getSeconds())+"."+goog.debug.Formatter.getTwoDigitString_(Math.floor(o.getMilliseconds()/10))};goog.debug.Formatter.getTwoDigitString_=function(e){if(e<10){return"0"+e}return String(e)};goog.debug.Formatter.getRelativeTime_=function(e,o){var t=e.getMillis()-o;var r=t/1e3;var i=r.toFixed(3);var n=0;if(r<1){n=2}else{while(r<100){n++;r*=10}}while(n-- >0){i=" "+i}return i};goog.debug.HtmlFormatter=function(e){goog.debug.Formatter.call(this,e)};goog.inherits(goog.debug.HtmlFormatter,goog.debug.Formatter);goog.debug.HtmlFormatter.prototype.showExceptionText=true;goog.debug.HtmlFormatter.prototype.formatRecord=function(e){if(!e){return""}return this.formatRecordAsHtml(e).getTypedStringValue()};goog.debug.HtmlFormatter.prototype.formatRecordAsHtml=function(e){if(!e){return goog.html.SafeHtml.EMPTY}var o;switch(e.getLevel().value){case goog.debug.Logger.Level.SHOUT.value:o="dbg-sh";break;case goog.debug.Logger.Level.SEVERE.value:o="dbg-sev";break;case goog.debug.Logger.Level.WARNING.value:o="dbg-w";break;case goog.debug.Logger.Level.INFO.value:o="dbg-i";break;case goog.debug.Logger.Level.FINE.value:default:o="dbg-f";break}var t=[];t.push(this.prefix_," ");if(this.showAbsoluteTime){t.push("[",goog.debug.Formatter.getDateTimeStamp_(e),"] ")}if(this.showRelativeTime){t.push("[",goog.debug.Formatter.getRelativeTime_(e,this.startTimeProvider_.get()),"s] ")}if(this.showLoggerName){t.push("[",e.getLoggerName(),"] ")}if(this.showSeverityLevel){t.push("[",e.getLevel().name,"] ")}var r=goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces(t.join(""));var i=goog.html.SafeHtml.EMPTY;if(this.showExceptionText&&e.getException()){i=goog.html.SafeHtml.concat(goog.html.SafeHtml.BR,goog.debug.exposeExceptionAsHtml(e.getException()))}var n=goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces(e.getMessage());var a=goog.html.SafeHtml.create("span",{class:o},goog.html.SafeHtml.concat(n,i));var l;if(this.appendNewline){l=goog.html.SafeHtml.concat(r,a,goog.html.SafeHtml.BR)}else{l=goog.html.SafeHtml.concat(r,a)}return l};goog.debug.TextFormatter=function(e){goog.debug.Formatter.call(this,e)};goog.inherits(goog.debug.TextFormatter,goog.debug.Formatter);goog.debug.TextFormatter.prototype.formatRecord=function(e){var o=[];o.push(this.prefix_," ");if(this.showAbsoluteTime){o.push("[",goog.debug.Formatter.getDateTimeStamp_(e),"] ")}if(this.showRelativeTime){o.push("[",goog.debug.Formatter.getRelativeTime_(e,this.startTimeProvider_.get()),"s] ")}if(this.showLoggerName){o.push("[",e.getLoggerName(),"] ")}if(this.showSeverityLevel){o.push("[",e.getLevel().name,"] ")}o.push(e.getMessage());if(this.showExceptionText){var t=e.getException();if(t){var r=t instanceof Error?t.message:t.toString();o.push("\n",r)}}if(this.appendNewline){o.push("\n")}return o.join("")};goog.debug.TextFormatter.prototype.formatRecordAsHtml=function(e){return goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces(goog.debug.TextFormatter.prototype.formatRecord(e))};goog.provide("goog.debug.Console");goog.require("goog.debug.LogManager");goog.require("goog.debug.Logger");goog.require("goog.debug.TextFormatter");goog.debug.Console=function(){this.publishHandler_=goog.bind(this.addLogRecord,this);this.formatter_=new goog.debug.TextFormatter;this.formatter_.showAbsoluteTime=false;this.formatter_.showExceptionText=false;this.formatter_.appendNewline=false;this.isCapturing_=false;this.logBuffer_="";this.filteredLoggers_={}};goog.debug.Console.prototype.getFormatter=function(){return this.formatter_};goog.debug.Console.prototype.setCapturing=function(e){if(e==this.isCapturing_){return}var o=goog.debug.LogManager.getRoot();if(e){o.addHandler(this.publishHandler_)}else{o.removeHandler(this.publishHandler_);this.logBuffer=""}this.isCapturing_=e};goog.debug.Console.prototype.addLogRecord=function(e){if(this.filteredLoggers_[e.getLoggerName()]){return}var o=this.formatter_.formatRecord(e);var t=goog.debug.Console.console_;if(t){switch(e.getLevel()){case goog.debug.Logger.Level.SHOUT:goog.debug.Console.logToConsole_(t,"info",o);break;case goog.debug.Logger.Level.SEVERE:goog.debug.Console.logToConsole_(t,"error",o);break;case goog.debug.Logger.Level.WARNING:goog.debug.Console.logToConsole_(t,"warn",o);break;default:goog.debug.Console.logToConsole_(t,"debug",o);break}}else{this.logBuffer_+=o}};goog.debug.Console.prototype.addFilter=function(e){this.filteredLoggers_[e]=true};goog.debug.Console.prototype.removeFilter=function(e){delete this.filteredLoggers_[e]};goog.debug.Console.instance=null;goog.debug.Console.console_=goog.global["console"];goog.debug.Console.setConsole=function(e){goog.debug.Console.console_=e};goog.debug.Console.autoInstall=function(){if(!goog.debug.Console.instance){goog.debug.Console.instance=new goog.debug.Console}if(goog.global.location&&goog.global.location.href.indexOf("Debug=true")!=-1){goog.debug.Console.instance.setCapturing(true)}};goog.debug.Console.show=function(){alert(goog.debug.Console.instance.logBuffer_)};goog.debug.Console.logToConsole_=function(e,o,t){if(e[o]){e[o](t)}else{e.log(t)}};goog.provide("goog.log");goog.provide("goog.log.Level");goog.provide("goog.log.LogRecord");goog.provide("goog.log.Logger");goog.require("goog.debug");goog.require("goog.debug.LogManager");goog.require("goog.debug.LogRecord");goog.require("goog.debug.Logger");goog.define("goog.log.ENABLED",goog.debug.LOGGING_ENABLED);goog.log.ROOT_LOGGER_NAME=goog.debug.Logger.ROOT_LOGGER_NAME;goog.log.Logger=goog.debug.Logger;goog.log.Level=goog.debug.Logger.Level;goog.log.LogRecord=goog.debug.LogRecord;goog.log.getLogger=function(e,o){if(goog.log.ENABLED){var t=goog.debug.LogManager.getLogger(e);if(o&&t){t.setLevel(o)}return t}else{return null}};goog.log.addHandler=function(e,o){if(goog.log.ENABLED&&e){e.addHandler(o)}};goog.log.removeHandler=function(e,o){if(goog.log.ENABLED&&e){return e.removeHandler(o)}else{return false}};goog.log.log=function(e,o,t,r){if(goog.log.ENABLED&&e){e.log(o,t,r)}};goog.log.error=function(e,o,t){if(goog.log.ENABLED&&e){e.severe(o,t)}};goog.log.warning=function(e,o,t){if(goog.log.ENABLED&&e){e.warning(o,t)}};goog.log.info=function(e,o,t){if(goog.log.ENABLED&&e){e.info(o,t)}};goog.log.fine=function(e,o,t){if(goog.log.ENABLED&&e){e.fine(o,t)}};goog.provide("ol.pointer.PointerEvent");goog.require("ol.events");goog.require("ol.events.Event");ol.pointer.PointerEvent=function(e,o,t){goog.base(this,e);this.originalEvent=o;var r=t?t:{};this.buttons=this.getButtons_(r);this.pressure=this.getPressure_(r,this.buttons);this.bubbles="bubbles"in r?r["bubbles"]:false;this.cancelable="cancelable"in r?r["cancelable"]:false;this.view="view"in r?r["view"]:null;this.detail="detail"in r?r["detail"]:null;this.screenX="screenX"in r?r["screenX"]:0;this.screenY="screenY"in r?r["screenY"]:0;this.clientX="clientX"in r?r["clientX"]:0;this.clientY="clientY"in r?r["clientY"]:0;this.ctrlKey="ctrlKey"in r?r["ctrlKey"]:false;this.altKey="altKey"in r?r["altKey"]:false;this.shiftKey="shiftKey"in r?r["shiftKey"]:false;this.metaKey="metaKey"in r?r["metaKey"]:false;this.button="button"in r?r["button"]:0;this.relatedTarget="relatedTarget"in r?r["relatedTarget"]:null;this.pointerId="pointerId"in r?r["pointerId"]:0;this.width="width"in r?r["width"]:0;this.height="height"in r?r["height"]:0;this.tiltX="tiltX"in r?r["tiltX"]:0;this.tiltY="tiltY"in r?r["tiltY"]:0;this.pointerType="pointerType"in r?r["pointerType"]:"";this.hwTimestamp="hwTimestamp"in r?r["hwTimestamp"]:0;this.isPrimary="isPrimary"in r?r["isPrimary"]:false;if(o.preventDefault){this.preventDefault=function(){o.preventDefault()}}};goog.inherits(ol.pointer.PointerEvent,ol.events.Event);ol.pointer.PointerEvent.prototype.getButtons_=function(e){var o;if(e.buttons||ol.pointer.PointerEvent.HAS_BUTTONS){o=e.buttons}else{switch(e.which){case 1:o=1;break;case 2:o=4;break;case 3:o=2;break;default:o=0}}return o};ol.pointer.PointerEvent.prototype.getPressure_=function(e,o){var t=0;if(e.pressure){t=e.pressure}else{t=o?.5:0}return t};ol.pointer.PointerEvent.HAS_BUTTONS=false;(function(){try{var e=new MouseEvent("click",{buttons:1});ol.pointer.PointerEvent.HAS_BUTTONS=e.buttons===1}catch(e){}})();goog.provide("ol.dom");goog.provide("ol.dom.BrowserFeature");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.userAgent");goog.require("goog.vec.Mat4");goog.require("ol");ol.dom.createCanvasContext2D=function(e,o){var t=document.createElement("CANVAS");if(e){t.width=e}if(o){t.height=o}return t.getContext("2d")};ol.dom.canUseCssTransform=function(){var e;return function(){if(e===undefined){goog.asserts.assert(document.body,"document.body should not be null");if(!goog.global.getComputedStyle){e=false}else{var o=document.createElement("P"),t,r={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.appendChild(o);for(var i in r){if(i in o.style){o.style[i]="translate(1px,1px)";t=goog.global.getComputedStyle(o).getPropertyValue(r[i])}}goog.dom.removeNode(o);e=t&&t!=="none"}}return e}}();ol.dom.canUseCssTransform3D=function(){var e;return function(){if(e===undefined){goog.asserts.assert(document.body,"document.body should not be null");if(!goog.global.getComputedStyle){e=false}else{var o=document.createElement("P"),t,r={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.appendChild(o);for(var i in r){if(i in o.style){o.style[i]="translate3d(1px,1px,1px)";t=goog.global.getComputedStyle(o).getPropertyValue(r[i])}}goog.dom.removeNode(o);e=t&&t!=="none"}}return e}}();ol.dom.setTransform=function(e,o){var t=e.style;t.WebkitTransform=o;t.MozTransform=o;t.OTransform=o;t.msTransform=o;t.transform=o;if(goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("9.0")){e.style.transformOrigin="0 0"}};ol.dom.transformElement2D=function(e,o,t){var r;if(ol.dom.canUseCssTransform3D()){var i;if(t!==undefined){var n=new Array(16);for(r=0;r<16;++r){n[r]=o[r].toFixed(t)}i=n.join(",")}else{i=o.join(",")}ol.dom.setTransform(e,"matrix3d("+i+")")}else if(ol.dom.canUseCssTransform()){var a=[goog.vec.Mat4.getElement(o,0,0),goog.vec.Mat4.getElement(o,1,0),goog.vec.Mat4.getElement(o,0,1),goog.vec.Mat4.getElement(o,1,1),goog.vec.Mat4.getElement(o,0,3),goog.vec.Mat4.getElement(o,1,3)];var l;if(t!==undefined){var s=new Array(6);for(r=0;r<6;++r){s[r]=a[r].toFixed(t)}l=s.join(",")}else{l=a.join(",")}ol.dom.setTransform(e,"matrix("+l+")")}else{e.style.left=Math.round(goog.vec.Mat4.getElement(o,0,3))+"px";e.style.top=Math.round(goog.vec.Mat4.getElement(o,1,3))+"px"}};ol.dom.outerWidth=function(e){var o=e.offsetWidth;var t=e.currentStyle||window.getComputedStyle(e);o+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10);return o};ol.dom.outerHeight=function(e){var o=e.offsetHeight;var t=e.currentStyle||window.getComputedStyle(e);o+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10);return o};goog.provide("ol.webgl");goog.provide("ol.webgl.WebGLContextEventType");ol.webgl.CONTEXT_IDS_=["experimental-webgl","webgl","webkit-3d","moz-webgl"];ol.webgl.WebGLContextEventType={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};ol.webgl.getContext=function(e,o){var t,r,i=ol.webgl.CONTEXT_IDS_.length;for(r=0;r<i;++r){try{t=e.getContext(ol.webgl.CONTEXT_IDS_[r],o);if(t){return t}}catch(e){}}return null};goog.provide("ol.has");goog.require("ol");goog.require("ol.dom");goog.require("ol.webgl");var ua=typeof navigator!=="undefined"?navigator.userAgent.toLowerCase():"";ol.has.FIREFOX=ua.indexOf("firefox")!==-1;ol.has.SAFARI=ua.indexOf("safari")!==-1&&ua.indexOf("chrom")===-1;ol.has.MAC=ua.indexOf("macintosh")!==-1;ol.has.DEVICE_PIXEL_RATIO=goog.global.devicePixelRatio||1;ol.has.CANVAS_LINE_DASH=false;ol.has.CANVAS=ol.ENABLE_CANVAS&&function(){if(!("HTMLCanvasElement"in goog.global)){return false}try{var e=ol.dom.createCanvasContext2D();if(!e){return false}else{if(e.setLineDash!==undefined){ol.has.CANVAS_LINE_DASH=true}return true}}catch(e){return false}}();ol.has.DEVICE_ORIENTATION="DeviceOrientationEvent"in goog.global;ol.has.DOM=ol.ENABLE_DOM;ol.has.GEOLOCATION="geolocation"in goog.global.navigator;ol.has.TOUCH=ol.ASSUME_TOUCH||"ontouchstart"in goog.global;ol.has.POINTER="PointerEvent"in goog.global;ol.has.MSPOINTER=!!goog.global.navigator.msPointerEnabled;ol.has.WEBGL;(function(){if(ol.ENABLE_WEBGL){var e=false;var o;var t=[];if("WebGLRenderingContext"in goog.global){try{var r=document.createElement("CANVAS");var i=ol.webgl.getContext(r,{failIfMajorPerformanceCaveat:true});if(i){e=true;o=i.getParameter(i.MAX_TEXTURE_SIZE);t=i.getSupportedExtensions()}}catch(e){}}ol.has.WEBGL=e;ol.WEBGL_EXTENSIONS=t;ol.WEBGL_MAX_TEXTURE_SIZE=o}})();goog.provide("ol.pointer.EventSource");ol.pointer.EventSource=function(e,o){this.dispatcher=e;this.mapping_=o};ol.pointer.EventSource.prototype.getEvents=function(){return Object.keys(this.mapping_)};ol.pointer.EventSource.prototype.getMapping=function(){return this.mapping_};ol.pointer.EventSource.prototype.getHandlerForEvent=function(e){return this.mapping_[e]};goog.provide("ol.pointer.MouseSource");goog.require("ol.pointer.EventSource");ol.pointer.MouseSource=function(e){var o={mousedown:this.mousedown,mousemove:this.mousemove,mouseup:this.mouseup,mouseover:this.mouseover,mouseout:this.mouseout};goog.base(this,e,o);this.pointerMap=e.pointerMap;this.lastTouches=[]};goog.inherits(ol.pointer.MouseSource,ol.pointer.EventSource);ol.pointer.MouseSource.POINTER_ID=1;ol.pointer.MouseSource.POINTER_TYPE="mouse";ol.pointer.MouseSource.DEDUP_DIST=25;ol.pointer.MouseSource.prototype.isEventSimulatedFromTouch_=function(e){var o=this.lastTouches;var t=e.clientX,r=e.clientY;for(var i=0,n=o.length,a;i<n&&(a=o[i]);i++){var l=Math.abs(t-a[0]),s=Math.abs(r-a[1]);if(l<=ol.pointer.MouseSource.DEDUP_DIST&&s<=ol.pointer.MouseSource.DEDUP_DIST){return true}}return false};ol.pointer.MouseSource.prepareEvent=function(e,o){var t=o.cloneEvent(e,e);var r=t.preventDefault;t.preventDefault=function(){e.preventDefault();r()};t.pointerId=ol.pointer.MouseSource.POINTER_ID;t.isPrimary=true;t.pointerType=ol.pointer.MouseSource.POINTER_TYPE;return t};ol.pointer.MouseSource.prototype.mousedown=function(e){if(!this.isEventSimulatedFromTouch_(e)){if(ol.pointer.MouseSource.POINTER_ID.toString()in this.pointerMap){this.cancel(e)}var o=ol.pointer.MouseSource.prepareEvent(e,this.dispatcher);this.pointerMap[ol.pointer.MouseSource.POINTER_ID.toString()]=e;this.dispatcher.down(o,e)}};ol.pointer.MouseSource.prototype.mousemove=function(e){if(!this.isEventSimulatedFromTouch_(e)){var o=ol.pointer.MouseSource.prepareEvent(e,this.dispatcher);this.dispatcher.move(o,e)}};ol.pointer.MouseSource.prototype.mouseup=function(e){if(!this.isEventSimulatedFromTouch_(e)){var o=this.pointerMap[ol.pointer.MouseSource.POINTER_ID.toString()];if(o&&o.button===e.button){var t=ol.pointer.MouseSource.prepareEvent(e,this.dispatcher)
;this.dispatcher.up(t,e);this.cleanupMouse()}}};ol.pointer.MouseSource.prototype.mouseover=function(e){if(!this.isEventSimulatedFromTouch_(e)){var o=ol.pointer.MouseSource.prepareEvent(e,this.dispatcher);this.dispatcher.enterOver(o,e)}};ol.pointer.MouseSource.prototype.mouseout=function(e){if(!this.isEventSimulatedFromTouch_(e)){var o=ol.pointer.MouseSource.prepareEvent(e,this.dispatcher);this.dispatcher.leaveOut(o,e)}};ol.pointer.MouseSource.prototype.cancel=function(e){var o=ol.pointer.MouseSource.prepareEvent(e,this.dispatcher);this.dispatcher.cancel(o,e);this.cleanupMouse()};ol.pointer.MouseSource.prototype.cleanupMouse=function(){delete this.pointerMap[ol.pointer.MouseSource.POINTER_ID.toString()]};goog.provide("ol.pointer.MsSource");goog.require("ol.pointer.EventSource");ol.pointer.MsSource=function(e){var o={MSPointerDown:this.msPointerDown,MSPointerMove:this.msPointerMove,MSPointerUp:this.msPointerUp,MSPointerOut:this.msPointerOut,MSPointerOver:this.msPointerOver,MSPointerCancel:this.msPointerCancel,MSGotPointerCapture:this.msGotPointerCapture,MSLostPointerCapture:this.msLostPointerCapture};goog.base(this,e,o);this.pointerMap=e.pointerMap;this.POINTER_TYPES=["","unavailable","touch","pen","mouse"]};goog.inherits(ol.pointer.MsSource,ol.pointer.EventSource);ol.pointer.MsSource.prototype.prepareEvent_=function(e){var o=e;if(goog.isNumber(e.pointerType)){o=this.dispatcher.cloneEvent(e,e);o.pointerType=this.POINTER_TYPES[e.pointerType]}return o};ol.pointer.MsSource.prototype.cleanup=function(e){delete this.pointerMap[e.toString()]};ol.pointer.MsSource.prototype.msPointerDown=function(e){this.pointerMap[e.pointerId.toString()]=e;var o=this.prepareEvent_(e);this.dispatcher.down(o,e)};ol.pointer.MsSource.prototype.msPointerMove=function(e){var o=this.prepareEvent_(e);this.dispatcher.move(o,e)};ol.pointer.MsSource.prototype.msPointerUp=function(e){var o=this.prepareEvent_(e);this.dispatcher.up(o,e);this.cleanup(e.pointerId)};ol.pointer.MsSource.prototype.msPointerOut=function(e){var o=this.prepareEvent_(e);this.dispatcher.leaveOut(o,e)};ol.pointer.MsSource.prototype.msPointerOver=function(e){var o=this.prepareEvent_(e);this.dispatcher.enterOver(o,e)};ol.pointer.MsSource.prototype.msPointerCancel=function(e){var o=this.prepareEvent_(e);this.dispatcher.cancel(o,e);this.cleanup(e.pointerId)};ol.pointer.MsSource.prototype.msLostPointerCapture=function(e){var o=this.dispatcher.makeEvent("lostpointercapture",e,e);this.dispatcher.dispatchEvent(o)};ol.pointer.MsSource.prototype.msGotPointerCapture=function(e){var o=this.dispatcher.makeEvent("gotpointercapture",e,e);this.dispatcher.dispatchEvent(o)};goog.provide("ol.pointer.NativeSource");goog.require("ol.pointer.EventSource");ol.pointer.NativeSource=function(e){var o={pointerdown:this.pointerDown,pointermove:this.pointerMove,pointerup:this.pointerUp,pointerout:this.pointerOut,pointerover:this.pointerOver,pointercancel:this.pointerCancel,gotpointercapture:this.gotPointerCapture,lostpointercapture:this.lostPointerCapture};goog.base(this,e,o)};goog.inherits(ol.pointer.NativeSource,ol.pointer.EventSource);ol.pointer.NativeSource.prototype.pointerDown=function(e){this.dispatcher.fireNativeEvent(e)};ol.pointer.NativeSource.prototype.pointerMove=function(e){this.dispatcher.fireNativeEvent(e)};ol.pointer.NativeSource.prototype.pointerUp=function(e){this.dispatcher.fireNativeEvent(e)};ol.pointer.NativeSource.prototype.pointerOut=function(e){this.dispatcher.fireNativeEvent(e)};ol.pointer.NativeSource.prototype.pointerOver=function(e){this.dispatcher.fireNativeEvent(e)};ol.pointer.NativeSource.prototype.pointerCancel=function(e){this.dispatcher.fireNativeEvent(e)};ol.pointer.NativeSource.prototype.lostPointerCapture=function(e){this.dispatcher.fireNativeEvent(e)};ol.pointer.NativeSource.prototype.gotPointerCapture=function(e){this.dispatcher.fireNativeEvent(e)};goog.provide("ol.pointer.TouchSource");goog.require("ol");goog.require("ol.array");goog.require("ol.pointer.EventSource");goog.require("ol.pointer.MouseSource");ol.pointer.TouchSource=function(e,o){var t={touchstart:this.touchstart,touchmove:this.touchmove,touchend:this.touchend,touchcancel:this.touchcancel};goog.base(this,e,t);this.pointerMap=e.pointerMap;this.mouseSource=o;this.firstTouchId_=undefined;this.clickCount_=0;this.resetId_=undefined};goog.inherits(ol.pointer.TouchSource,ol.pointer.EventSource);ol.pointer.TouchSource.DEDUP_TIMEOUT=2500;ol.pointer.TouchSource.CLICK_COUNT_TIMEOUT=200;ol.pointer.TouchSource.POINTER_TYPE="touch";ol.pointer.TouchSource.prototype.isPrimaryTouch_=function(e){return this.firstTouchId_===e.identifier};ol.pointer.TouchSource.prototype.setPrimaryTouch_=function(e){var o=Object.keys(this.pointerMap).length;if(o===0||o===1&&ol.pointer.MouseSource.POINTER_ID.toString()in this.pointerMap){this.firstTouchId_=e.identifier;this.cancelResetClickCount_()}};ol.pointer.TouchSource.prototype.removePrimaryPointer_=function(e){if(e.isPrimary){this.firstTouchId_=undefined;this.resetClickCount_()}};ol.pointer.TouchSource.prototype.resetClickCount_=function(){this.resetId_=goog.global.setTimeout(this.resetClickCountHandler_.bind(this),ol.pointer.TouchSource.CLICK_COUNT_TIMEOUT)};ol.pointer.TouchSource.prototype.resetClickCountHandler_=function(){this.clickCount_=0;this.resetId_=undefined};ol.pointer.TouchSource.prototype.cancelResetClickCount_=function(){if(this.resetId_!==undefined){goog.global.clearTimeout(this.resetId_)}};ol.pointer.TouchSource.prototype.touchToPointer_=function(e,o){var t=this.dispatcher.cloneEvent(e,o);t.pointerId=o.identifier+2;t.bubbles=true;t.cancelable=true;t.detail=this.clickCount_;t.button=0;t.buttons=1;t.width=o.webkitRadiusX||o.radiusX||0;t.height=o.webkitRadiusY||o.radiusY||0;t.pressure=o.webkitForce||o.force||.5;t.isPrimary=this.isPrimaryTouch_(o);t.pointerType=ol.pointer.TouchSource.POINTER_TYPE;t.clientX=o.clientX;t.clientY=o.clientY;t.screenX=o.screenX;t.screenY=o.screenY;return t};ol.pointer.TouchSource.prototype.processTouches_=function(e,o){var t=Array.prototype.slice.call(e.changedTouches);var r=t.length;function i(){e.preventDefault()}var n,a;for(n=0;n<r;++n){a=this.touchToPointer_(e,t[n]);a.preventDefault=i;o.call(this,e,a)}};ol.pointer.TouchSource.prototype.findTouch_=function(e,o){var t=e.length;var r;for(var i=0;i<t;i++){r=e[i];if(r.identifier===o){return true}}return false};ol.pointer.TouchSource.prototype.vacuumTouches_=function(e){var o=e.touches;var t=Object.keys(this.pointerMap);var r=t.length;if(r>=o.length){var i=[];var n,a,l;for(n=0;n<r;++n){a=t[n];l=this.pointerMap[a];if(a!=ol.pointer.MouseSource.POINTER_ID&&!this.findTouch_(o,a-2)){i.push(l.out)}}for(n=0;n<i.length;++n){this.cancelOut_(e,i[n])}}};ol.pointer.TouchSource.prototype.touchstart=function(e){this.vacuumTouches_(e);this.setPrimaryTouch_(e.changedTouches[0]);this.dedupSynthMouse_(e);this.clickCount_++;this.processTouches_(e,this.overDown_)};ol.pointer.TouchSource.prototype.overDown_=function(e,o){this.pointerMap[o.pointerId]={target:o.target,out:o,outTarget:o.target};this.dispatcher.over(o,e);this.dispatcher.enter(o,e);this.dispatcher.down(o,e)};ol.pointer.TouchSource.prototype.touchmove=function(e){e.preventDefault();this.processTouches_(e,this.moveOverOut_)};ol.pointer.TouchSource.prototype.moveOverOut_=function(e,o){var t=o;var r=this.pointerMap[t.pointerId];if(!r){return}var i=r.out;var n=r.outTarget;this.dispatcher.move(t,e);if(i&&n!==t.target){i.relatedTarget=t.target;t.relatedTarget=n;i.target=n;if(t.target){this.dispatcher.leaveOut(i,e);this.dispatcher.enterOver(t,e)}else{t.target=n;t.relatedTarget=null;this.cancelOut_(e,t)}}r.out=t;r.outTarget=t.target};ol.pointer.TouchSource.prototype.touchend=function(e){this.dedupSynthMouse_(e);this.processTouches_(e,this.upOut_)};ol.pointer.TouchSource.prototype.upOut_=function(e,o){this.dispatcher.up(o,e);this.dispatcher.out(o,e);this.dispatcher.leave(o,e);this.cleanUpPointer_(o)};ol.pointer.TouchSource.prototype.touchcancel=function(e){this.processTouches_(e,this.cancelOut_)};ol.pointer.TouchSource.prototype.cancelOut_=function(e,o){this.dispatcher.cancel(o,e);this.dispatcher.out(o,e);this.dispatcher.leave(o,e);this.cleanUpPointer_(o)};ol.pointer.TouchSource.prototype.cleanUpPointer_=function(e){delete this.pointerMap[e.pointerId];this.removePrimaryPointer_(e)};ol.pointer.TouchSource.prototype.dedupSynthMouse_=function(e){var o=this.mouseSource.lastTouches;var t=e.changedTouches[0];if(this.isPrimaryTouch_(t)){var r=[t.clientX,t.clientY];o.push(r);goog.global.setTimeout(function(){ol.array.remove(o,r)},ol.pointer.TouchSource.DEDUP_TIMEOUT)}};goog.provide("ol.pointer.PointerEventHandler");goog.require("goog.dom");goog.require("ol.events");goog.require("ol.events.EventTarget");goog.require("ol.has");goog.require("ol.pointer.MouseSource");goog.require("ol.pointer.MsSource");goog.require("ol.pointer.NativeSource");goog.require("ol.pointer.PointerEvent");goog.require("ol.pointer.TouchSource");ol.pointer.PointerEventHandler=function(e){goog.base(this);this.element_=e;this.pointerMap={};this.eventMap_={};this.eventSourceList_=[];this.registerSources()};goog.inherits(ol.pointer.PointerEventHandler,ol.events.EventTarget);ol.pointer.PointerEventHandler.prototype.registerSources=function(){if(ol.has.POINTER){this.registerSource("native",new ol.pointer.NativeSource(this))}else if(ol.has.MSPOINTER){this.registerSource("ms",new ol.pointer.MsSource(this))}else{var e=new ol.pointer.MouseSource(this);this.registerSource("mouse",e);if(ol.has.TOUCH){this.registerSource("touch",new ol.pointer.TouchSource(this,e))}}this.register_()};ol.pointer.PointerEventHandler.prototype.registerSource=function(e,o){var t=o;var r=t.getEvents();if(r){r.forEach(function(e){var o=t.getHandlerForEvent(e);if(o){this.eventMap_[e]=o.bind(t)}},this);this.eventSourceList_.push(t)}};ol.pointer.PointerEventHandler.prototype.register_=function(){var e=this.eventSourceList_.length;var o;for(var t=0;t<e;t++){o=this.eventSourceList_[t];this.addEvents_(o.getEvents())}};ol.pointer.PointerEventHandler.prototype.unregister_=function(){var e=this.eventSourceList_.length;var o;for(var t=0;t<e;t++){o=this.eventSourceList_[t];this.removeEvents_(o.getEvents())}};ol.pointer.PointerEventHandler.prototype.eventHandler_=function(e){var o=e.type;var t=this.eventMap_[o];if(t){t(e)}};ol.pointer.PointerEventHandler.prototype.addEvents_=function(e){e.forEach(function(e){ol.events.listen(this.element_,e,this.eventHandler_,this)},this)};ol.pointer.PointerEventHandler.prototype.removeEvents_=function(e){e.forEach(function(e){ol.events.unlisten(this.element_,e,this.eventHandler_,this)},this)};ol.pointer.PointerEventHandler.prototype.cloneEvent=function(e,o){var t={},r;for(var i=0,n=ol.pointer.CLONE_PROPS.length;i<n;i++){r=ol.pointer.CLONE_PROPS[i][0];t[r]=e[r]||o[r]||ol.pointer.CLONE_PROPS[i][1]}return t};ol.pointer.PointerEventHandler.prototype.down=function(e,o){this.fireEvent(ol.pointer.EventType.POINTERDOWN,e,o)};ol.pointer.PointerEventHandler.prototype.move=function(e,o){this.fireEvent(ol.pointer.EventType.POINTERMOVE,e,o)};ol.pointer.PointerEventHandler.prototype.up=function(e,o){this.fireEvent(ol.pointer.EventType.POINTERUP,e,o)};ol.pointer.PointerEventHandler.prototype.enter=function(e,o){e.bubbles=false;this.fireEvent(ol.pointer.EventType.POINTERENTER,e,o)};ol.pointer.PointerEventHandler.prototype.leave=function(e,o){e.bubbles=false;this.fireEvent(ol.pointer.EventType.POINTERLEAVE,e,o)};ol.pointer.PointerEventHandler.prototype.over=function(e,o){e.bubbles=true;this.fireEvent(ol.pointer.EventType.POINTEROVER,e,o)};ol.pointer.PointerEventHandler.prototype.out=function(e,o){e.bubbles=true;this.fireEvent(ol.pointer.EventType.POINTEROUT,e,o)};ol.pointer.PointerEventHandler.prototype.cancel=function(e,o){this.fireEvent(ol.pointer.EventType.POINTERCANCEL,e,o)};ol.pointer.PointerEventHandler.prototype.leaveOut=function(e,o){this.out(e,o);if(!this.contains_(e.target,e.relatedTarget)){this.leave(e,o)}};ol.pointer.PointerEventHandler.prototype.enterOver=function(e,o){this.over(e,o);if(!this.contains_(e.target,e.relatedTarget)){this.enter(e,o)}};ol.pointer.PointerEventHandler.prototype.contains_=function(e,o){if(!o){return false}return goog.dom.contains(e,o)};ol.pointer.PointerEventHandler.prototype.makeEvent=function(e,o,t){return new ol.pointer.PointerEvent(e,t,o)};ol.pointer.PointerEventHandler.prototype.fireEvent=function(e,o,t){var r=this.makeEvent(e,o,t);this.dispatchEvent(r)};ol.pointer.PointerEventHandler.prototype.fireNativeEvent=function(e){var o=this.makeEvent(e.type,e,e);this.dispatchEvent(o)};ol.pointer.PointerEventHandler.prototype.wrapMouseEvent=function(e,o){var t=this.makeEvent(e,ol.pointer.MouseSource.prepareEvent(o,this),o);return t};ol.pointer.PointerEventHandler.prototype.disposeInternal=function(){this.unregister_();goog.base(this,"disposeInternal")};ol.pointer.EventType={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};ol.pointer.CLONE_PROPS=[["bubbles",false],["cancelable",false],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",false],["altKey",false],["shiftKey",false],["metaKey",false],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",false],["type",""],["target",null],["currentTarget",null],["which",0]];goog.provide("ol.MapBrowserEvent");goog.provide("ol.MapBrowserEvent.EventType");goog.provide("ol.MapBrowserEventHandler");goog.provide("ol.MapBrowserPointerEvent");goog.require("goog.asserts");goog.require("ol");goog.require("ol.Coordinate");goog.require("ol.MapEvent");goog.require("ol.Pixel");goog.require("ol.events");goog.require("ol.events.EventTarget");goog.require("ol.events.EventType");goog.require("ol.pointer.PointerEvent");goog.require("ol.pointer.PointerEventHandler");ol.MapBrowserEvent=function(e,o,t,r,i){goog.base(this,e,o,i);this.originalEvent=t;this.pixel=o.getEventPixel(t);this.coordinate=o.getCoordinateFromPixel(this.pixel);this.dragging=r!==undefined?r:false};goog.inherits(ol.MapBrowserEvent,ol.MapEvent);ol.MapBrowserEvent.prototype.preventDefault=function(){goog.base(this,"preventDefault");this.originalEvent.preventDefault()};ol.MapBrowserEvent.prototype.stopPropagation=function(){goog.base(this,"stopPropagation");this.originalEvent.stopPropagation()};ol.MapBrowserPointerEvent=function(e,o,t,r,i){goog.base(this,e,o,t.originalEvent,r,i);this.pointerEvent=t};goog.inherits(ol.MapBrowserPointerEvent,ol.MapBrowserEvent);ol.MapBrowserEventHandler=function(e){goog.base(this);this.map_=e;this.clickTimeoutId_=0;this.dragging_=false;this.dragListenerKeys_=[];this.down_=null;var o=this.map_.getViewport();this.activePointers_=0;this.trackedTouches_={};this.pointerEventHandler_=new ol.pointer.PointerEventHandler(o);this.documentPointerEventHandler_=null;this.pointerdownListenerKey_=ol.events.listen(this.pointerEventHandler_,ol.pointer.EventType.POINTERDOWN,this.handlePointerDown_,this);this.relayedListenerKey_=ol.events.listen(this.pointerEventHandler_,ol.pointer.EventType.POINTERMOVE,this.relayEvent_,this)};goog.inherits(ol.MapBrowserEventHandler,ol.events.EventTarget);ol.MapBrowserEventHandler.prototype.emulateClick_=function(e){var o;o=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.CLICK,this.map_,e);this.dispatchEvent(o);if(this.clickTimeoutId_!==0){goog.global.clearTimeout(this.clickTimeoutId_);this.clickTimeoutId_=0;o=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.DBLCLICK,this.map_,e);this.dispatchEvent(o)}else{this.clickTimeoutId_=goog.global.setTimeout(function(){this.clickTimeoutId_=0;var o=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.SINGLECLICK,this.map_,e);this.dispatchEvent(o)}.bind(this),250)}};ol.MapBrowserEventHandler.prototype.updateActivePointers_=function(e){var o=e;if(o.type==ol.MapBrowserEvent.EventType.POINTERUP||o.type==ol.MapBrowserEvent.EventType.POINTERCANCEL){delete this.trackedTouches_[o.pointerId]}else if(o.type==ol.MapBrowserEvent.EventType.POINTERDOWN){this.trackedTouches_[o.pointerId]=true}this.activePointers_=Object.keys(this.trackedTouches_).length};ol.MapBrowserEventHandler.prototype.handlePointerUp_=function(e){this.updateActivePointers_(e);var o=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.POINTERUP,this.map_,e);this.dispatchEvent(o);if(!this.dragging_&&this.isMouseActionButton_(e)){goog.asserts.assert(this.down_,"this.down_ must be truthy");this.emulateClick_(this.down_)}goog.asserts.assert(this.activePointers_>=0,"this.activePointers_ should be equal to or larger than 0");if(this.activePointers_===0){this.dragListenerKeys_.forEach(ol.events.unlistenByKey);this.dragListenerKeys_.length=0;this.dragging_=false;this.down_=null;goog.dispose(this.documentPointerEventHandler_);this.documentPointerEventHandler_=null}};ol.MapBrowserEventHandler.prototype.isMouseActionButton_=function(e){return e.button===0};ol.MapBrowserEventHandler.prototype.handlePointerDown_=function(e){this.updateActivePointers_(e);var o=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.POINTERDOWN,this.map_,e);this.dispatchEvent(o);this.down_=e;if(this.dragListenerKeys_.length===0){this.documentPointerEventHandler_=new ol.pointer.PointerEventHandler(document);this.dragListenerKeys_.push(ol.events.listen(this.documentPointerEventHandler_,ol.MapBrowserEvent.EventType.POINTERMOVE,this.handlePointerMove_,this),ol.events.listen(this.documentPointerEventHandler_,ol.MapBrowserEvent.EventType.POINTERUP,this.handlePointerUp_,this),ol.events.listen(this.pointerEventHandler_,ol.MapBrowserEvent.EventType.POINTERCANCEL,this.handlePointerUp_,this))}};ol.MapBrowserEventHandler.prototype.handlePointerMove_=function(e){if(this.isMoving_(e)){this.dragging_=true;var o=new ol.MapBrowserPointerEvent(ol.MapBrowserEvent.EventType.POINTERDRAG,this.map_,e,this.dragging_);this.dispatchEvent(o)}e.preventDefault()};ol.MapBrowserEventHandler.prototype.relayEvent_=function(e){var o=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new ol.MapBrowserPointerEvent(e.type,this.map_,e,o))};ol.MapBrowserEventHandler.prototype.isMoving_=function(e){return e.clientX!=this.down_.clientX||e.clientY!=this.down_.clientY};ol.MapBrowserEventHandler.prototype.disposeInternal=function(){if(this.relayedListenerKey_){ol.events.unlistenByKey(this.relayedListenerKey_);this.relayedListenerKey_=null}if(this.pointerdownListenerKey_){ol.events.unlistenByKey(this.pointerdownListenerKey_);this.pointerdownListenerKey_=null}this.dragListenerKeys_.forEach(ol.events.unlistenByKey);this.dragListenerKeys_.length=0;if(this.documentPointerEventHandler_){goog.dispose(this.documentPointerEventHandler_);this.documentPointerEventHandler_=null}if(this.pointerEventHandler_){goog.dispose(this.pointerEventHandler_);this.pointerEventHandler_=null}goog.base(this,"disposeInternal")};ol.MapBrowserEvent.EventType={SINGLECLICK:"singleclick",CLICK:ol.events.EventType.CLICK,DBLCLICK:ol.events.EventType.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};goog.provide("ol.layer.Base");goog.provide("ol.layer.LayerProperty");goog.provide("ol.layer.LayerState");goog.require("ol");goog.require("ol.Object");goog.require("ol.math");goog.require("ol.object");goog.require("ol.source.State");ol.layer.LayerProperty={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"};ol.layer.LayerState;ol.layer.Base=function(e){goog.base(this);var o=ol.object.assign({},e);o[ol.layer.LayerProperty.OPACITY]=e.opacity!==undefined?e.opacity:1;o[ol.layer.LayerProperty.VISIBLE]=e.visible!==undefined?e.visible:true;o[ol.layer.LayerProperty.Z_INDEX]=e.zIndex!==undefined?e.zIndex:0;o[ol.layer.LayerProperty.MAX_RESOLUTION]=e.maxResolution!==undefined?e.maxResolution:Infinity;o[ol.layer.LayerProperty.MIN_RESOLUTION]=e.minResolution!==undefined?e.minResolution:0;this.setProperties(o)};goog.inherits(ol.layer.Base,ol.Object);ol.layer.Base.prototype.getLayerState=function(){var e=this.getOpacity();var o=this.getSourceState();var t=this.getVisible();var r=this.getExtent();var i=this.getZIndex();var n=this.getMaxResolution();var a=this.getMinResolution();return{layer:this,opacity:ol.math.clamp(e,0,1),sourceState:o,visible:t,managed:true,extent:r,zIndex:i,maxResolution:n,minResolution:Math.max(a,0)}};ol.layer.Base.prototype.getLayersArray=goog.abstractMethod;ol.layer.Base.prototype.getLayerStatesArray=goog.abstractMethod;ol.layer.Base.prototype.getExtent=function(){return this.get(ol.layer.LayerProperty.EXTENT)};ol.layer.Base.prototype.getMaxResolution=function(){return this.get(ol.layer.LayerProperty.MAX_RESOLUTION)};ol.layer.Base.prototype.getMinResolution=function(){return this.get(ol.layer.LayerProperty.MIN_RESOLUTION)};ol.layer.Base.prototype.getOpacity=function(){return this.get(ol.layer.LayerProperty.OPACITY)};ol.layer.Base.prototype.getSourceState=goog.abstractMethod;ol.layer.Base.prototype.getVisible=function(){return this.get(ol.layer.LayerProperty.VISIBLE)};ol.layer.Base.prototype.getZIndex=function(){return this.get(ol.layer.LayerProperty.Z_INDEX)};ol.layer.Base.prototype.setExtent=function(e){this.set(ol.layer.LayerProperty.EXTENT,e)};ol.layer.Base.prototype.setMaxResolution=function(e){this.set(ol.layer.LayerProperty.MAX_RESOLUTION,e)};ol.layer.Base.prototype.setMinResolution=function(e){this.set(ol.layer.LayerProperty.MIN_RESOLUTION,e)};ol.layer.Base.prototype.setOpacity=function(e){this.set(ol.layer.LayerProperty.OPACITY,e)};ol.layer.Base.prototype.setVisible=function(e){this.set(ol.layer.LayerProperty.VISIBLE,e)};ol.layer.Base.prototype.setZIndex=function(e){this.set(ol.layer.LayerProperty.Z_INDEX,e)};goog.provide("ol.render.VectorContext");ol.render.VectorContext=function(){};ol.render.VectorContext.prototype.drawAsync=goog.abstractMethod;ol.render.VectorContext.prototype.drawCircleGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawFeature=goog.abstractMethod;ol.render.VectorContext.prototype.drawGeometryCollectionGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawLineStringGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawMultiLineStringGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawMultiPointGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawMultiPolygonGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawPointGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawPolygonGeometry=goog.abstractMethod;ol.render.VectorContext.prototype.drawText=goog.abstractMethod;ol.render.VectorContext.prototype.setFillStrokeStyle=goog.abstractMethod;ol.render.VectorContext.prototype.setImageStyle=goog.abstractMethod;ol.render.VectorContext.prototype.setTextStyle=goog.abstractMethod;goog.provide("ol.render.Event");goog.provide("ol.render.EventType");goog.require("ol.events.Event");goog.require("ol.render.VectorContext");ol.render.EventType={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render"};ol.render.Event=function(e,o,t,r,i,n){goog.base(this,e,o);this.vectorContext=t;this.frameState=r;this.context=i;this.glContext=n};goog.inherits(ol.render.Event,ol.events.Event);goog.provide("ol.layer.Layer");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol");goog.require("ol.Object");goog.require("ol.layer.Base");goog.require("ol.layer.LayerProperty");goog.require("ol.object");goog.require("ol.render.EventType");goog.require("ol.source.State");ol.layer.Layer=function(e){var o=ol.object.assign({},e);delete o.source;goog.base(this,o);this.mapPrecomposeKey_=null;this.mapRenderKey_=null;this.sourceChangeKey_=null;if(e.map){this.setMap(e.map)}ol.events.listen(this,ol.Object.getChangeEventType(ol.layer.LayerProperty.SOURCE),this.handleSourcePropertyChange_,this);var t=e.source?e.source:null;this.setSource(t)};goog.inherits(ol.layer.Layer,ol.layer.Base);ol.layer.Layer.visibleAtResolution=function(e,o){return e.visible&&o>=e.minResolution&&o<e.maxResolution};ol.layer.Layer.prototype.getLayersArray=function(e){var o=e?e:[];o.push(this);return o};ol.layer.Layer.prototype.getLayerStatesArray=function(e){var o=e?e:[];o.push(this.getLayerState());return o};ol.layer.Layer.prototype.getSource=function(){var e=this.get(ol.layer.LayerProperty.SOURCE);return e||null};ol.layer.Layer.prototype.getSourceState=function(){var e=this.getSource();return!e?ol.source.State.UNDEFINED:e.getState()};ol.layer.Layer.prototype.handleSourceChange_=function(){this.changed()};ol.layer.Layer.prototype.handleSourcePropertyChange_=function(){if(this.sourceChangeKey_){ol.events.unlistenByKey(this.sourceChangeKey_);this.sourceChangeKey_=null}var e=this.getSource();if(e){this.sourceChangeKey_=ol.events.listen(e,ol.events.EventType.CHANGE,this.handleSourceChange_,this)}this.changed()};ol.layer.Layer.prototype.setMap=function(e){if(this.mapPrecomposeKey_){ol.events.unlistenByKey(this.mapPrecomposeKey_);this.mapPrecomposeKey_=null}if(!e){this.changed()}if(this.mapRenderKey_){ol.events.unlistenByKey(this.mapRenderKey_);this.mapRenderKey_=null}if(e){this.mapPrecomposeKey_=ol.events.listen(e,ol.render.EventType.PRECOMPOSE,function(e){var o=this.getLayerState();o.managed=false;o.zIndex=Infinity;e.frameState.layerStatesArray.push(o);e.frameState.layerStates[goog.getUid(this)]=o},this);this.mapRenderKey_=ol.events.listen(this,ol.events.EventType.CHANGE,e.render,e);this.changed()}};ol.layer.Layer.prototype.setSource=function(e){this.set(ol.layer.LayerProperty.SOURCE,e)};goog.provide("ol.ImageBase");goog.provide("ol.ImageState");goog.require("goog.asserts");goog.require("ol.events.EventTarget");goog.require("ol.events.EventType");goog.require("ol.Attribution");goog.require("ol.Extent");ol.ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3};ol.ImageBase=function(e,o,t,r,i){goog.base(this);this.attributions_=i;this.extent=e;this.pixelRatio_=t;this.resolution=o;this.state=r};goog.inherits(ol.ImageBase,ol.events.EventTarget);ol.ImageBase.prototype.changed=function(){this.dispatchEvent(ol.events.EventType.CHANGE)};ol.ImageBase.prototype.getAttributions=function(){return this.attributions_};ol.ImageBase.prototype.getExtent=function(){return this.extent};ol.ImageBase.prototype.getImage=goog.abstractMethod;ol.ImageBase.prototype.getPixelRatio=function(){return this.pixelRatio_};ol.ImageBase.prototype.getResolution=function(){goog.asserts.assert(this.resolution!==undefined,"resolution not yet set");return this.resolution};ol.ImageBase.prototype.getState=function(){return this.state};ol.ImageBase.prototype.load=goog.abstractMethod;goog.provide("ol.vec.Mat4");goog.provide("ol.vec.Mat4.Number");goog.require("goog.vec.Mat4");ol.vec.Mat4.Number;ol.vec.Mat4.makeTransform2D=function(e,o,t,r,i,n,a,l){goog.vec.Mat4.makeIdentity(e);if(o!==0||t!==0){goog.vec.Mat4.translate(e,o,t,0)}if(r!=1||i!=1){goog.vec.Mat4.scale(e,r,i,1)}if(n!==0){goog.vec.Mat4.rotateZ(e,n)}if(a!==0||l!==0){goog.vec.Mat4.translate(e,a,l,0)}return e};ol.vec.Mat4.equals2D=function(e,o){return goog.vec.Mat4.getElement(e,0,0)==goog.vec.Mat4.getElement(o,0,0)&&goog.vec.Mat4.getElement(e,1,0)==goog.vec.Mat4.getElement(o,1,0)&&goog.vec.Mat4.getElement(e,0,1)==goog.vec.Mat4.getElement(o,0,1)&&goog.vec.Mat4.getElement(e,1,1)==goog.vec.Mat4.getElement(o,1,1)&&goog.vec.Mat4.getElement(e,0,3)==goog.vec.Mat4.getElement(o,0,3)&&goog.vec.Mat4.getElement(e,1,3)==goog.vec.Mat4.getElement(o,1,3)};ol.vec.Mat4.multVec2=function(e,o,t){var r=goog.vec.Mat4.getElement(e,0,0);var i=goog.vec.Mat4.getElement(e,1,0);var n=goog.vec.Mat4.getElement(e,0,1);var a=goog.vec.Mat4.getElement(e,1,1);var l=goog.vec.Mat4.getElement(e,0,3);var s=goog.vec.Mat4.getElement(e,1,3);var g=o[0],p=o[1];t[0]=r*g+n*p+l;t[1]=i*g+a*p+s;return t};goog.provide("ol.renderer.Layer");goog.require("goog.asserts");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("goog.functions");goog.require("ol");goog.require("ol.ImageState");goog.require("ol.Observable");goog.require("ol.TileRange");goog.require("ol.TileState");goog.require("ol.layer.Layer");goog.require("ol.source.Source");goog.require("ol.source.State");goog.require("ol.source.Tile");goog.require("ol.vec.Mat4");ol.renderer.Layer=function(e){goog.base(this);this.layer_=e};goog.inherits(ol.renderer.Layer,ol.Observable);ol.renderer.Layer.prototype.forEachFeatureAtCoordinate=ol.nullFunction;ol.renderer.Layer.prototype.forEachLayerAtPixel=function(e,o,t,r){var i=e.slice();ol.vec.Mat4.multVec2(o.pixelToCoordinateMatrix,i,i);var n=this.forEachFeatureAtCoordinate(i,o,goog.functions.TRUE,this);if(n){return t.call(r,this.layer_)}else{return undefined}};ol.renderer.Layer.prototype.hasFeatureAtCoordinate=goog.functions.FALSE;ol.renderer.Layer.prototype.createLoadedTileFinder=function(e,o,t){return function(r,i){function n(e){if(!t[r]){t[r]={}}t[r][e.tileCoord.toString()]=e}return e.forEachLoadedTile(o,r,i,n)}};ol.renderer.Layer.prototype.getLayer=function(){return this.layer_};ol.renderer.Layer.prototype.handleImageChange_=function(e){var o=e.target;if(o.getState()===ol.ImageState.LOADED){this.renderIfReadyAndVisible()}};ol.renderer.Layer.prototype.loadImage=function(e){var o=e.getState();if(o!=ol.ImageState.LOADED&&o!=ol.ImageState.ERROR){goog.asserts.assert(o==ol.ImageState.IDLE||o==ol.ImageState.LOADING,'imageState is "idle" or "loading"');ol.events.listen(e,ol.events.EventType.CHANGE,this.handleImageChange_,this)}if(o==ol.ImageState.IDLE){e.load();o=e.getState();goog.asserts.assert(o==ol.ImageState.LOADING||o==ol.ImageState.LOADED,'imageState is "loading" or "loaded"')}return o==ol.ImageState.LOADED};ol.renderer.Layer.prototype.renderIfReadyAndVisible=function(){var e=this.getLayer();if(e.getVisible()&&e.getSourceState()==ol.source.State.READY){this.changed()}};ol.renderer.Layer.prototype.scheduleExpireCache=function(e,o){if(o.canExpireCache()){e.postRenderFunctions.push(goog.partial(function(e,o,t){var r=goog.getUid(e).toString();e.expireCache(t.viewState.projection,t.usedTiles[r])},o))}};ol.renderer.Layer.prototype.updateAttributions=function(e,o){if(o){var t,r,i;for(r=0,i=o.length;r<i;++r){t=o[r];e[goog.getUid(t).toString()]=t}}};ol.renderer.Layer.prototype.updateLogos=function(e,o){var t=o.getLogo();if(t!==undefined){if(typeof t==="string"){e.logos[t]=""}else if(goog.isObject(t)){goog.asserts.assertString(t.href,"logo.href is a string");goog.asserts.assertString(t.src,"logo.src is a string");e.logos[t.src]=t.href}}};ol.renderer.Layer.prototype.updateUsedTiles=function(e,o,t,r){var i=goog.getUid(o).toString();var n=t.toString();if(i in e){if(n in e[i]){e[i][n].extend(r)}else{e[i][n]=r}}else{e[i]={};e[i][n]=r}};ol.renderer.Layer.prototype.snapCenterToPixel=function(e,o,t){return[o*(Math.round(e[0]/o)+t[0]%2/2),o*(Math.round(e[1]/o)+t[1]%2/2)]};ol.renderer.Layer.prototype.manageTilePyramid=function(e,o,t,r,i,n,a,l,s,g){var p=goog.getUid(o).toString();if(!(p in e.wantedTiles)){e.wantedTiles[p]={}}var u=e.wantedTiles[p];var c=e.tileQueue;var d=t.getMinZoom();var y,h,m,f,v,_;for(_=a;_>=d;--_){h=t.getTileRangeForExtentAndZ(n,_,h);m=t.getResolution(_);for(f=h.minX;f<=h.maxX;++f){for(v=h.minY;v<=h.maxY;++v){if(a-_<=l){y=o.getTile(_,f,v,r,i);if(y.getState()==ol.TileState.IDLE){u[y.tileCoord.toString()]=true;if(!c.isKeyQueued(y.getKey())){c.enqueue([y,p,t.getTileCoordCenter(y.tileCoord),m])}}if(s!==undefined){s.call(g,y)}}else{o.useTile(_,f,v,i)}}}}};goog.provide("ol.style.Image");goog.provide("ol.style.ImageState");ol.style.ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3};ol.style.ImageOptions;ol.style.Image=function(e){this.opacity_=e.opacity;this.rotateWithView_=e.rotateWithView;this.rotation_=e.rotation;this.scale_=e.scale;this.snapToPixel_=e.snapToPixel}
;ol.style.Image.prototype.getOpacity=function(){return this.opacity_};ol.style.Image.prototype.getRotateWithView=function(){return this.rotateWithView_};ol.style.Image.prototype.getRotation=function(){return this.rotation_};ol.style.Image.prototype.getScale=function(){return this.scale_};ol.style.Image.prototype.getSnapToPixel=function(){return this.snapToPixel_};ol.style.Image.prototype.getAnchor=goog.abstractMethod;ol.style.Image.prototype.getImage=goog.abstractMethod;ol.style.Image.prototype.getHitDetectionImage=goog.abstractMethod;ol.style.Image.prototype.getImageState=goog.abstractMethod;ol.style.Image.prototype.getImageSize=goog.abstractMethod;ol.style.Image.prototype.getHitDetectionImageSize=goog.abstractMethod;ol.style.Image.prototype.getOrigin=goog.abstractMethod;ol.style.Image.prototype.getSize=goog.abstractMethod;ol.style.Image.prototype.setOpacity=function(e){this.opacity_=e};ol.style.Image.prototype.setRotateWithView=function(e){this.rotateWithView_=e};ol.style.Image.prototype.setRotation=function(e){this.rotation_=e};ol.style.Image.prototype.setScale=function(e){this.scale_=e};ol.style.Image.prototype.setSnapToPixel=function(e){this.snapToPixel_=e};ol.style.Image.prototype.listenImageChange=goog.abstractMethod;ol.style.Image.prototype.load=goog.abstractMethod;ol.style.Image.prototype.unlistenImageChange=goog.abstractMethod;goog.provide("ol.style.Icon");goog.provide("ol.style.IconAnchorUnits");goog.provide("ol.style.IconImageCache");goog.provide("ol.style.IconOrigin");goog.require("goog.asserts");goog.require("ol.events");goog.require("ol.events.EventTarget");goog.require("ol.events.EventType");goog.require("ol.color");goog.require("ol.dom");goog.require("ol.style.Image");goog.require("ol.style.ImageState");ol.style.IconAnchorUnits={FRACTION:"fraction",PIXELS:"pixels"};ol.style.IconOrigin={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};ol.style.Icon=function(e){var o=e||{};this.anchor_=o.anchor!==undefined?o.anchor:[.5,.5];this.normalizedAnchor_=null;this.anchorOrigin_=o.anchorOrigin!==undefined?o.anchorOrigin:ol.style.IconOrigin.TOP_LEFT;this.anchorXUnits_=o.anchorXUnits!==undefined?o.anchorXUnits:ol.style.IconAnchorUnits.FRACTION;this.anchorYUnits_=o.anchorYUnits!==undefined?o.anchorYUnits:ol.style.IconAnchorUnits.FRACTION;var t=o.crossOrigin!==undefined?o.crossOrigin:null;var r=o.img!==undefined?o.img:null;var i=o.imgSize!==undefined?o.imgSize:null;var n=o.src;goog.asserts.assert(!(n!==undefined&&r),"image and src can not provided at the same time");goog.asserts.assert(n===undefined||n!==undefined&&!i,"imgSize should not be set when src is provided");goog.asserts.assert(!r||r&&i,"imgSize must be set when image is provided");if((n===undefined||n.length===0)&&r){n=r.src||goog.getUid(r).toString()}goog.asserts.assert(n!==undefined&&n.length>0,"must provide a defined and non-empty src or image");var a=o.src!==undefined?ol.style.ImageState.IDLE:ol.style.ImageState.LOADED;var l=o.color!==undefined?ol.color.asArray(o.color):null;this.iconImage_=ol.style.IconImage_.get(r,n,i,t,a,l);this.offset_=o.offset!==undefined?o.offset:[0,0];this.offsetOrigin_=o.offsetOrigin!==undefined?o.offsetOrigin:ol.style.IconOrigin.TOP_LEFT;this.origin_=null;this.size_=o.size!==undefined?o.size:null;var s=o.opacity!==undefined?o.opacity:1;var g=o.rotateWithView!==undefined?o.rotateWithView:false;var p=o.rotation!==undefined?o.rotation:0;var u=o.scale!==undefined?o.scale:1;var c=o.snapToPixel!==undefined?o.snapToPixel:true;goog.base(this,{opacity:s,rotation:p,scale:u,snapToPixel:c,rotateWithView:g})};goog.inherits(ol.style.Icon,ol.style.Image);ol.style.Icon.prototype.getAnchor=function(){if(this.normalizedAnchor_){return this.normalizedAnchor_}var e=this.anchor_;var o=this.getSize();if(this.anchorXUnits_==ol.style.IconAnchorUnits.FRACTION||this.anchorYUnits_==ol.style.IconAnchorUnits.FRACTION){if(!o){return null}e=this.anchor_.slice();if(this.anchorXUnits_==ol.style.IconAnchorUnits.FRACTION){e[0]*=o[0]}if(this.anchorYUnits_==ol.style.IconAnchorUnits.FRACTION){e[1]*=o[1]}}if(this.anchorOrigin_!=ol.style.IconOrigin.TOP_LEFT){if(!o){return null}if(e===this.anchor_){e=this.anchor_.slice()}if(this.anchorOrigin_==ol.style.IconOrigin.TOP_RIGHT||this.anchorOrigin_==ol.style.IconOrigin.BOTTOM_RIGHT){e[0]=-e[0]+o[0]}if(this.anchorOrigin_==ol.style.IconOrigin.BOTTOM_LEFT||this.anchorOrigin_==ol.style.IconOrigin.BOTTOM_RIGHT){e[1]=-e[1]+o[1]}}this.normalizedAnchor_=e;return this.normalizedAnchor_};ol.style.Icon.prototype.getImage=function(e){return this.iconImage_.getImage(e)};ol.style.Icon.prototype.getImageSize=function(){return this.iconImage_.getSize()};ol.style.Icon.prototype.getHitDetectionImageSize=function(){return this.getImageSize()};ol.style.Icon.prototype.getImageState=function(){return this.iconImage_.getImageState()};ol.style.Icon.prototype.getHitDetectionImage=function(e){return this.iconImage_.getHitDetectionImage(e)};ol.style.Icon.prototype.getOrigin=function(){if(this.origin_){return this.origin_}var e=this.offset_;if(this.offsetOrigin_!=ol.style.IconOrigin.TOP_LEFT){var o=this.getSize();var t=this.iconImage_.getSize();if(!o||!t){return null}e=e.slice();if(this.offsetOrigin_==ol.style.IconOrigin.TOP_RIGHT||this.offsetOrigin_==ol.style.IconOrigin.BOTTOM_RIGHT){e[0]=t[0]-o[0]-e[0]}if(this.offsetOrigin_==ol.style.IconOrigin.BOTTOM_LEFT||this.offsetOrigin_==ol.style.IconOrigin.BOTTOM_RIGHT){e[1]=t[1]-o[1]-e[1]}}this.origin_=e;return this.origin_};ol.style.Icon.prototype.getSrc=function(){return this.iconImage_.getSrc()};ol.style.Icon.prototype.getSize=function(){return!this.size_?this.iconImage_.getSize():this.size_};ol.style.Icon.prototype.listenImageChange=function(e,o){return ol.events.listen(this.iconImage_,ol.events.EventType.CHANGE,e,o)};ol.style.Icon.prototype.load=function(){this.iconImage_.load()};ol.style.Icon.prototype.unlistenImageChange=function(e,o){ol.events.unlisten(this.iconImage_,ol.events.EventType.CHANGE,e,o)};ol.style.IconImage_=function(e,o,t,r,i,n){goog.base(this);this.hitDetectionImage_=null;this.image_=!e?new Image:e;if(r!==null){this.image_.crossOrigin=r}this.canvas_=n?document.createElement("CANVAS"):null;this.color_=n;this.imageListenerKeys_=null;this.imageState_=i;this.size_=t;this.src_=o;this.tainting_=false;if(this.imageState_==ol.style.ImageState.LOADED){this.determineTainting_()}};goog.inherits(ol.style.IconImage_,ol.events.EventTarget);ol.style.IconImage_.get=function(e,o,t,r,i,n){var a=ol.style.IconImageCache.getInstance();var l=a.get(o,r,n);if(!l){l=new ol.style.IconImage_(e,o,t,r,i,n);a.set(o,r,n,l)}return l};ol.style.IconImage_.prototype.determineTainting_=function(){var e=ol.dom.createCanvasContext2D(1,1);try{e.drawImage(this.image_,0,0);e.getImageData(0,0,1,1)}catch(e){this.tainting_=true}};ol.style.IconImage_.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(ol.events.EventType.CHANGE)};ol.style.IconImage_.prototype.handleImageError_=function(){this.imageState_=ol.style.ImageState.ERROR;this.unlistenImage_();this.dispatchChangeEvent_()};ol.style.IconImage_.prototype.handleImageLoad_=function(){this.imageState_=ol.style.ImageState.LOADED;this.size_=[this.image_.width,this.image_.height];this.unlistenImage_();this.determineTainting_();this.replaceColor_();this.dispatchChangeEvent_()};ol.style.IconImage_.prototype.getImage=function(e){return this.canvas_?this.canvas_:this.image_};ol.style.IconImage_.prototype.getImageState=function(){return this.imageState_};ol.style.IconImage_.prototype.getHitDetectionImage=function(e){if(!this.hitDetectionImage_){if(this.tainting_){var o=this.size_[0];var t=this.size_[1];var r=ol.dom.createCanvasContext2D(o,t);r.fillRect(0,0,o,t);this.hitDetectionImage_=r.canvas}else{this.hitDetectionImage_=this.image_}}return this.hitDetectionImage_};ol.style.IconImage_.prototype.getSize=function(){return this.size_};ol.style.IconImage_.prototype.getSrc=function(){return this.src_};ol.style.IconImage_.prototype.load=function(){if(this.imageState_==ol.style.ImageState.IDLE){goog.asserts.assert(this.src_!==undefined,"this.src_ must not be undefined");goog.asserts.assert(!this.imageListenerKeys_,"no listener keys existing");this.imageState_=ol.style.ImageState.LOADING;this.imageListenerKeys_=[ol.events.listenOnce(this.image_,ol.events.EventType.ERROR,this.handleImageError_,this),ol.events.listenOnce(this.image_,ol.events.EventType.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(e){this.handleImageError_()}}};ol.style.IconImage_.prototype.replaceColor_=function(){if(this.tainting_||this.color_===null){return}goog.asserts.assert(this.canvas_!==null,"this.canvas_ must not be null");this.canvas_.width=this.image_.width;this.canvas_.height=this.image_.height;var e=this.canvas_.getContext("2d");e.drawImage(this.image_,0,0);var o=e.getImageData(0,0,this.image_.width,this.image_.height);var t=o.data;var r=this.color_[0]/255;var i=this.color_[1]/255;var n=this.color_[2]/255;for(var a=0,l=t.length;a<l;a+=4){t[a]*=r;t[a+1]*=i;t[a+2]*=n}e.putImageData(o,0,0)};ol.style.IconImage_.prototype.unlistenImage_=function(){goog.asserts.assert(this.imageListenerKeys_,"we must have listeners registered");this.imageListenerKeys_.forEach(ol.events.unlistenByKey);this.imageListenerKeys_=null};ol.style.IconImageCache=function(){this.cache_={};this.cacheSize_=0;this.maxCacheSize_=32};goog.addSingletonGetter(ol.style.IconImageCache);ol.style.IconImageCache.getKey=function(e,o,t){goog.asserts.assert(o!==undefined,"argument crossOrigin must be defined");var r=t?ol.color.asString(t):"null";return o+":"+e+":"+r};ol.style.IconImageCache.prototype.clear=function(){this.cache_={};this.cacheSize_=0};ol.style.IconImageCache.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var e=0;var o,t;for(o in this.cache_){t=this.cache_[o];if((e++&3)===0&&!t.hasListener()){delete this.cache_[o];--this.cacheSize_}}}};ol.style.IconImageCache.prototype.get=function(e,o,t){var r=ol.style.IconImageCache.getKey(e,o,t);return r in this.cache_?this.cache_[r]:null};ol.style.IconImageCache.prototype.set=function(e,o,t,r){var i=ol.style.IconImageCache.getKey(e,o,t);this.cache_[i]=r;++this.cacheSize_};goog.provide("ol.RendererType");goog.provide("ol.renderer.Map");goog.require("goog.Disposable");goog.require("goog.asserts");goog.require("goog.dispose");goog.require("goog.functions");goog.require("goog.vec.Mat4");goog.require("ol");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol.extent");goog.require("ol.layer.Layer");goog.require("ol.renderer.Layer");goog.require("ol.style.IconImageCache");goog.require("ol.vec.Mat4");ol.RendererType={CANVAS:"canvas",DOM:"dom",WEBGL:"webgl"};ol.renderer.Map=function(e,o){goog.base(this);this.map_=o;this.layerRenderers_={};this.layerRendererListeners_={}};goog.inherits(ol.renderer.Map,goog.Disposable);ol.renderer.Map.prototype.calculateMatrices2D=function(e){var o=e.viewState;var t=e.coordinateToPixelMatrix;goog.asserts.assert(t,"frameState has a coordinateToPixelMatrix");ol.vec.Mat4.makeTransform2D(t,e.size[0]/2,e.size[1]/2,1/o.resolution,-1/o.resolution,-o.rotation,-o.center[0],-o.center[1]);var r=goog.vec.Mat4.invert(t,e.pixelToCoordinateMatrix);goog.asserts.assert(r,"matrix could be inverted")};ol.renderer.Map.prototype.createLayerRenderer=goog.abstractMethod;ol.renderer.Map.prototype.disposeInternal=function(){for(var e in this.layerRenderers_){goog.dispose(this.layerRenderers_[e])}goog.base(this,"disposeInternal")};ol.renderer.Map.expireIconCache_=function(e,o){ol.style.IconImageCache.getInstance().expire()};ol.renderer.Map.prototype.forEachFeatureAtCoordinate=function(e,o,t,r,i,n){var a;var l=o.viewState;var s=l.resolution;function g(e,i){goog.asserts.assert(e!==undefined,"received a feature");var n=goog.getUid(e).toString();var a=o.layerStates[goog.getUid(i)].managed;if(!(n in o.skippedFeatureUids&&!a)){return t.call(r,e,a?i:null)}}var p=l.projection;var u=e;if(p.canWrapX()){var c=p.getExtent();var d=ol.extent.getWidth(c);var y=e[0];if(y<c[0]||y>c[2]){var h=Math.ceil((c[0]-y)/d);u=[y+d*h,e[1]]}}var m=o.layerStatesArray;var f=m.length;var v;for(v=f-1;v>=0;--v){var _=m[v];var E=_.layer;if(ol.layer.Layer.visibleAtResolution(_,s)&&i.call(n,E)){var S=this.getLayerRenderer(E);if(E.getSource()){a=S.forEachFeatureAtCoordinate(E.getSource().getWrapX()?u:e,o,g,r)}if(a){return a}}}return undefined};ol.renderer.Map.prototype.forEachLayerAtPixel=function(e,o,t,r,i,n){var a;var l=o.viewState;var s=l.resolution;var g=o.layerStatesArray;var p=g.length;var u;for(u=p-1;u>=0;--u){var c=g[u];var d=c.layer;if(ol.layer.Layer.visibleAtResolution(c,s)&&i.call(n,d)){var y=this.getLayerRenderer(d);a=y.forEachLayerAtPixel(e,o,t,r);if(a){return a}}}return undefined};ol.renderer.Map.prototype.hasFeatureAtCoordinate=function(e,o,t,r){var i=this.forEachFeatureAtCoordinate(e,o,goog.functions.TRUE,this,t,r);return i!==undefined};ol.renderer.Map.prototype.getLayerRenderer=function(e){var o=goog.getUid(e).toString();if(o in this.layerRenderers_){return this.layerRenderers_[o]}else{var t=this.createLayerRenderer(e);this.layerRenderers_[o]=t;this.layerRendererListeners_[o]=ol.events.listen(t,ol.events.EventType.CHANGE,this.handleLayerRendererChange_,this);return t}};ol.renderer.Map.prototype.getLayerRendererByKey=function(e){goog.asserts.assert(e in this.layerRenderers_,"given layerKey (%s) exists in layerRenderers",e);return this.layerRenderers_[e]};ol.renderer.Map.prototype.getLayerRenderers=function(){return this.layerRenderers_};ol.renderer.Map.prototype.getMap=function(){return this.map_};ol.renderer.Map.prototype.getType=goog.abstractMethod;ol.renderer.Map.prototype.handleLayerRendererChange_=function(){this.map_.render()};ol.renderer.Map.prototype.removeLayerRendererByKey_=function(e){goog.asserts.assert(e in this.layerRenderers_,"given layerKey (%s) exists in layerRenderers",e);var o=this.layerRenderers_[e];delete this.layerRenderers_[e];goog.asserts.assert(e in this.layerRendererListeners_,"given layerKey (%s) exists in layerRendererListeners",e);ol.events.unlistenByKey(this.layerRendererListeners_[e]);delete this.layerRendererListeners_[e];return o};ol.renderer.Map.prototype.renderFrame=ol.nullFunction;ol.renderer.Map.prototype.removeUnusedLayerRenderers_=function(e,o){var t;for(t in this.layerRenderers_){if(!o||!(t in o.layerStates)){goog.dispose(this.removeLayerRendererByKey_(t))}}};ol.renderer.Map.prototype.scheduleExpireIconCache=function(e){e.postRenderFunctions.push(ol.renderer.Map.expireIconCache_)};ol.renderer.Map.prototype.scheduleRemoveUnusedLayerRenderers=function(e){var o;for(o in this.layerRenderers_){if(!(o in e.layerStates)){e.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this));return}}};ol.renderer.Map.sortByZIndex=function(e,o){return e.zIndex-o.zIndex};goog.provide("ol.structs.PriorityQueue");goog.require("goog.asserts");goog.require("ol.object");ol.structs.PriorityQueue=function(e,o){this.priorityFunction_=e;this.keyFunction_=o;this.elements_=[];this.priorities_=[];this.queuedElements_={}};ol.structs.PriorityQueue.DROP=Infinity;ol.structs.PriorityQueue.prototype.assertValid=function(){var e=this.elements_;var o=this.priorities_;var t=e.length;goog.asserts.assert(o.length==t);var r,i;for(r=0;r<(t>>1)-1;++r){i=o[r];goog.asserts.assert(i<=o[this.getLeftChildIndex_(r)],"priority smaller than or equal to priority of left child (%s <= %s)",i,o[this.getLeftChildIndex_(r)]);goog.asserts.assert(i<=o[this.getRightChildIndex_(r)],"priority smaller than or equal to priority of right child (%s <= %s)",i,o[this.getRightChildIndex_(r)])}};ol.structs.PriorityQueue.prototype.clear=function(){this.elements_.length=0;this.priorities_.length=0;ol.object.clear(this.queuedElements_)};ol.structs.PriorityQueue.prototype.dequeue=function(){var e=this.elements_;goog.asserts.assert(e.length>0,"must have elements in order to be able to dequeue");var o=this.priorities_;var t=e[0];if(e.length==1){e.length=0;o.length=0}else{e[0]=e.pop();o[0]=o.pop();this.siftUp_(0)}var r=this.keyFunction_(t);goog.asserts.assert(r in this.queuedElements_,"key %s is not listed as queued",r);delete this.queuedElements_[r];return t};ol.structs.PriorityQueue.prototype.enqueue=function(e){goog.asserts.assert(!(this.keyFunction_(e)in this.queuedElements_),"key %s is already listed as queued",this.keyFunction_(e));var o=this.priorityFunction_(e);if(o!=ol.structs.PriorityQueue.DROP){this.elements_.push(e);this.priorities_.push(o);this.queuedElements_[this.keyFunction_(e)]=true;this.siftDown_(0,this.elements_.length-1);return true}return false};ol.structs.PriorityQueue.prototype.getCount=function(){return this.elements_.length};ol.structs.PriorityQueue.prototype.getLeftChildIndex_=function(e){return e*2+1};ol.structs.PriorityQueue.prototype.getRightChildIndex_=function(e){return e*2+2};ol.structs.PriorityQueue.prototype.getParentIndex_=function(e){return e-1>>1};ol.structs.PriorityQueue.prototype.heapify_=function(){var e;for(e=(this.elements_.length>>1)-1;e>=0;e--){this.siftUp_(e)}};ol.structs.PriorityQueue.prototype.isEmpty=function(){return this.elements_.length===0};ol.structs.PriorityQueue.prototype.isKeyQueued=function(e){return e in this.queuedElements_};ol.structs.PriorityQueue.prototype.isQueued=function(e){return this.isKeyQueued(this.keyFunction_(e))};ol.structs.PriorityQueue.prototype.siftUp_=function(e){var o=this.elements_;var t=this.priorities_;var r=o.length;var i=o[e];var n=t[e];var a=e;while(e<r>>1){var l=this.getLeftChildIndex_(e);var s=this.getRightChildIndex_(e);var g=s<r&&t[s]<t[l]?s:l;o[e]=o[g];t[e]=t[g];e=g}o[e]=i;t[e]=n;this.siftDown_(a,e)};ol.structs.PriorityQueue.prototype.siftDown_=function(e,o){var t=this.elements_;var r=this.priorities_;var i=t[o];var n=r[o];while(o>e){var a=this.getParentIndex_(o);if(r[a]>n){t[o]=t[a];r[o]=r[a];o=a}else{break}}t[o]=i;r[o]=n};ol.structs.PriorityQueue.prototype.reprioritize=function(){var e=this.priorityFunction_;var o=this.elements_;var t=this.priorities_;var r=0;var i=o.length;var n,a,l;for(a=0;a<i;++a){n=o[a];l=e(n);if(l==ol.structs.PriorityQueue.DROP){delete this.queuedElements_[this.keyFunction_(n)]}else{t[r]=l;o[r++]=n}}o.length=r;t.length=r;this.heapify_()};goog.provide("ol.TilePriorityFunction");goog.provide("ol.TileQueue");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol.Coordinate");goog.require("ol.TileState");goog.require("ol.structs.PriorityQueue");ol.TilePriorityFunction;ol.TileQueue=function(e,o){goog.base(this,function(o){return e.apply(null,o)},function(e){return e[0].getKey()});this.tileChangeCallback_=o;this.tilesLoading_=0;this.tilesLoadingKeys_={}};goog.inherits(ol.TileQueue,ol.structs.PriorityQueue);ol.TileQueue.prototype.enqueue=function(e){var o=goog.base(this,"enqueue",e);if(o){var t=e[0];ol.events.listen(t,ol.events.EventType.CHANGE,this.handleTileChange,this)}return o};ol.TileQueue.prototype.getTilesLoading=function(){return this.tilesLoading_};ol.TileQueue.prototype.handleTileChange=function(e){var o=e.target;var t=o.getState();if(t===ol.TileState.LOADED||t===ol.TileState.ERROR||t===ol.TileState.EMPTY){ol.events.unlisten(o,ol.events.EventType.CHANGE,this.handleTileChange,this);var r=o.getKey();if(r in this.tilesLoadingKeys_){delete this.tilesLoadingKeys_[r];--this.tilesLoading_}this.tileChangeCallback_()}};ol.TileQueue.prototype.loadMoreTiles=function(e,o){var t=0;var r;while(this.tilesLoading_<e&&t<o&&this.getCount()>0){r=this.dequeue()[0];if(r.getState()===ol.TileState.IDLE){this.tilesLoadingKeys_[r.getKey()]=true;++this.tilesLoading_;++t;r.load()}}};goog.provide("ol.Kinetic");goog.require("ol.Coordinate");goog.require("ol.PreRenderFunction");goog.require("ol.animation");ol.Kinetic=function(e,o,t){this.decay_=e;this.minVelocity_=o;this.delay_=t;this.points_=[];this.angle_=0;this.initialVelocity_=0};ol.Kinetic.prototype.begin=function(){this.points_.length=0;this.angle_=0;this.initialVelocity_=0};ol.Kinetic.prototype.update=function(e,o){this.points_.push(e,o,Date.now())};ol.Kinetic.prototype.end=function(){if(this.points_.length<6){return false}var e=Date.now()-this.delay_;var o=this.points_.length-3;if(this.points_[o+2]<e){return false}var t=o-3;while(t>0&&this.points_[t+2]>e){t-=3}var r=this.points_[o+2]-this.points_[t+2];var i=this.points_[o]-this.points_[t];var n=this.points_[o+1]-this.points_[t+1];this.angle_=Math.atan2(n,i);this.initialVelocity_=Math.sqrt(i*i+n*n)/r;return this.initialVelocity_>this.minVelocity_};ol.Kinetic.prototype.pan=function(e){var o=this.decay_;var t=this.initialVelocity_;var r=this.minVelocity_-t;var i=this.getDuration_();var n=function(e){return t*(Math.exp(o*e*i)-1)/r};return ol.animation.pan({source:e,duration:i,easing:n})};ol.Kinetic.prototype.getDuration_=function(){return Math.log(this.minVelocity_/this.initialVelocity_)/this.decay_};ol.Kinetic.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_};ol.Kinetic.prototype.getAngle=function(){return this.angle_};goog.provide("ol.interaction.Interaction");goog.provide("ol.interaction.InteractionProperty");goog.require("ol");goog.require("ol.MapBrowserEvent");goog.require("ol.Object");goog.require("ol.animation");goog.require("ol.easing");ol.interaction.InteractionProperty={ACTIVE:"active"};ol.interaction.Interaction=function(e){goog.base(this);this.map_=null;this.setActive(true);this.handleEvent=e.handleEvent};goog.inherits(ol.interaction.Interaction,ol.Object);ol.interaction.Interaction.prototype.getActive=function(){return this.get(ol.interaction.InteractionProperty.ACTIVE)};ol.interaction.Interaction.prototype.getMap=function(){return this.map_};ol.interaction.Interaction.prototype.setActive=function(e){this.set(ol.interaction.InteractionProperty.ACTIVE,e)};ol.interaction.Interaction.prototype.setMap=function(e){this.map_=e};ol.interaction.Interaction.pan=function(e,o,t,r){var i=o.getCenter();if(i){if(r&&r>0){e.beforeRender(ol.animation.pan({source:i,duration:r,easing:ol.easing.linear}))}var n=o.constrainCenter([i[0]+t[0],i[1]+t[1]]);o.setCenter(n)}};ol.interaction.Interaction.rotate=function(e,o,t,r,i){t=o.constrainRotation(t,0);ol.interaction.Interaction.rotateWithoutConstraints(e,o,t,r,i)};ol.interaction.Interaction.rotateWithoutConstraints=function(e,o,t,r,i){if(t!==undefined){var n=o.getRotation();var a=o.getCenter();if(n!==undefined&&a&&i&&i>0){e.beforeRender(ol.animation.rotate({rotation:n,duration:i,easing:ol.easing.easeOut}));if(r){e.beforeRender(ol.animation.pan({source:a,duration:i,easing:ol.easing.easeOut}))}}o.rotate(t,r)}};ol.interaction.Interaction.zoom=function(e,o,t,r,i,n){t=o.constrainResolution(t,0,n);ol.interaction.Interaction.zoomWithoutConstraints(e,o,t,r,i)};ol.interaction.Interaction.zoomByDelta=function(e,o,t,r,i){var n=o.getResolution();var a=o.constrainResolution(n,t,0);ol.interaction.Interaction.zoomWithoutConstraints(e,o,a,r,i)};ol.interaction.Interaction.zoomWithoutConstraints=function(e,o,t,r,i){if(t){var n=o.getResolution();var a=o.getCenter();if(n!==undefined&&a&&t!==n&&i&&i>0){e.beforeRender(ol.animation.zoom({resolution:n,duration:i,easing:ol.easing.easeOut}));if(r){e.beforeRender(ol.animation.pan({source:a,duration:i,easing:ol.easing.easeOut}))}}if(r){var l=o.calculateCenterZoom(t,r);o.setCenter(l)}o.setResolution(t)}};goog.provide("ol.interaction.DoubleClickZoom");goog.require("goog.asserts");goog.require("ol.MapBrowserEvent");goog.require("ol.MapBrowserEvent.EventType");goog.require("ol.interaction.Interaction");ol.interaction.DoubleClickZoom=function(e){var o=e?e:{};this.delta_=o.delta?o.delta:1;goog.base(this,{handleEvent:ol.interaction.DoubleClickZoom.handleEvent});this.duration_=o.duration!==undefined?o.duration:250};goog.inherits(ol.interaction.DoubleClickZoom,ol.interaction.Interaction);ol.interaction.DoubleClickZoom.handleEvent=function(e){var o=false;var t=e.originalEvent;if(e.type==ol.MapBrowserEvent.EventType.DBLCLICK){var r=e.map;var i=e.coordinate;var n=t.shiftKey?-this.delta_:this.delta_;var a=r.getView();goog.asserts.assert(a,"map must have a view");ol.interaction.Interaction.zoomByDelta(r,a,n,i,this.duration_);e.preventDefault();o=true}return!o};goog.provide("ol.events.ConditionType");goog.provide("ol.events.condition");goog.require("goog.asserts");goog.require("goog.functions");goog.require("ol.MapBrowserEvent.EventType");goog.require("ol.MapBrowserPointerEvent");ol.events.ConditionType;ol.events.condition.altKeyOnly=function(e){var o=e.originalEvent;return o.altKey&&!(o.metaKey||o.ctrlKey)&&!o.shiftKey};ol.events.condition.altShiftKeysOnly=function(e){var o=e.originalEvent;return o.altKey&&!(o.metaKey||o.ctrlKey)&&o.shiftKey};ol.events.condition.always=goog.functions.TRUE;ol.events.condition.click=function(e){return e.type==ol.MapBrowserEvent.EventType.CLICK};ol.events.condition.mouseActionButton=function(e){var o=e.originalEvent;return o.button==0&&!(goog.userAgent.WEBKIT&&ol.has.MAC&&o.ctrlKey)};ol.events.condition.never=goog.functions.FALSE;ol.events.condition.pointerMove=function(e){return e.type=="pointermove"};ol.events.condition.singleClick=function(e){return e.type==ol.MapBrowserEvent.EventType.SINGLECLICK};ol.events.condition.doubleClick=function(e){return e.type==ol.MapBrowserEvent.EventType.DBLCLICK};ol.events.condition.noModifierKeys=function(e){var o=e.originalEvent;return!o.altKey&&!(o.metaKey||o.ctrlKey)&&!o.shiftKey};ol.events.condition.platformModifierKeyOnly=function(e){var o=e.originalEvent;return!o.altKey&&(ol.has.MAC?o.metaKey:o.ctrlKey)&&!o.shiftKey};ol.events.condition.shiftKeyOnly=function(e){var o=e.originalEvent;return!o.altKey&&!(o.metaKey||o.ctrlKey)&&o.shiftKey};ol.events.condition.targetNotEditable=function(e){var o=e.originalEvent.target;goog.asserts.assertInstanceof(o,Element,"target should be an Element");var t=o.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"};ol.events.condition.mouseOnly=function(e){return e.pointerEvent.pointerType=="mouse"};goog.provide("ol.interaction.Pointer");goog.require("goog.functions");goog.require("ol");goog.require("ol.MapBrowserEvent.EventType");goog.require("ol.MapBrowserPointerEvent");goog.require("ol.Pixel");goog.require("ol.interaction.Interaction");goog.require("ol.object");ol.interaction.Pointer=function(e){var o=e?e:{};var t=o.handleEvent?o.handleEvent:ol.interaction.Pointer.handleEvent;goog.base(this,{handleEvent:t});this.handleDownEvent_=o.handleDownEvent?o.handleDownEvent:ol.interaction.Pointer.handleDownEvent;this.handleDragEvent_=o.handleDragEvent?o.handleDragEvent:ol.interaction.Pointer.handleDragEvent;this.handleMoveEvent_=o.handleMoveEvent?o.handleMoveEvent:ol.interaction.Pointer.handleMoveEvent;this.handleUpEvent_=o.handleUpEvent?o.handleUpEvent:ol.interaction.Pointer.handleUpEvent;this.handlingDownUpSequence=false;this.trackedPointers_={};this.targetPointers=[]};goog.inherits(ol.interaction.Pointer,ol.interaction.Interaction);ol.interaction.Pointer.centroid=function(e){var o=e.length;var t=0;var r=0;for(var i=0;i<o;i++){t+=e[i].clientX;r+=e[i].clientY}return[t/o,r/o]};ol.interaction.Pointer.prototype.isPointerDraggingEvent_=function(e){var o=e.type;return o===ol.MapBrowserEvent.EventType.POINTERDOWN||o===ol.MapBrowserEvent.EventType.POINTERDRAG||o===ol.MapBrowserEvent.EventType.POINTERUP};ol.interaction.Pointer.prototype.updateTrackedPointers_=function(e){if(this.isPointerDraggingEvent_(e)){var o=e.pointerEvent;if(e.type==ol.MapBrowserEvent.EventType.POINTERUP){delete this.trackedPointers_[o.pointerId]}else if(e.type==ol.MapBrowserEvent.EventType.POINTERDOWN){this.trackedPointers_[o.pointerId]=o}else if(o.pointerId in this.trackedPointers_){this.trackedPointers_[o.pointerId]=o}this.targetPointers=ol.object.getValues(this.trackedPointers_)}};ol.interaction.Pointer.handleDragEvent=ol.nullFunction;ol.interaction.Pointer.handleUpEvent=goog.functions.FALSE;ol.interaction.Pointer.handleDownEvent=goog.functions.FALSE;ol.interaction.Pointer.handleMoveEvent=ol.nullFunction;ol.interaction.Pointer.handleEvent=function(e){if(!(e instanceof ol.MapBrowserPointerEvent)){return true}var o=false;this.updateTrackedPointers_(e);if(this.handlingDownUpSequence){if(e.type==ol.MapBrowserEvent.EventType.POINTERDRAG){this.handleDragEvent_(e)}else if(e.type==ol.MapBrowserEvent.EventType.POINTERUP){this.handlingDownUpSequence=this.handleUpEvent_(e)}}if(e.type==ol.MapBrowserEvent.EventType.POINTERDOWN){var t=this.handleDownEvent_(e);this.handlingDownUpSequence=t;o=this.shouldStopEvent(t)}else if(e.type==ol.MapBrowserEvent.EventType.POINTERMOVE){this.handleMoveEvent_(e)}return!o};ol.interaction.Pointer.prototype.shouldStopEvent=goog.functions.identity;goog.provide("ol.interaction.DragPan");goog.require("goog.asserts");goog.require("ol.Kinetic");goog.require("ol.Pixel");goog.require("ol.PreRenderFunction");goog.require("ol.ViewHint");goog.require("ol.coordinate");goog.require("ol.events.condition");goog.require("ol.interaction.Pointer");ol.interaction.DragPan=function(e){goog.base(this,{handleDownEvent:ol.interaction.DragPan.handleDownEvent_,handleDragEvent:ol.interaction.DragPan.handleDragEvent_,handleUpEvent:ol.interaction.DragPan.handleUpEvent_});var o=e?e:{};this.kinetic_=o.kinetic;this.kineticPreRenderFn_=null;this.lastCentroid=null;this.condition_=o.condition?o.condition:ol.events.condition.noModifierKeys;this.noKinetic_=false};goog.inherits(ol.interaction.DragPan,ol.interaction.Pointer);ol.interaction.DragPan.handleDragEvent_=function(e){goog.asserts.assert(this.targetPointers.length>=1,"the length of this.targetPointers should be more than 1");var o=ol.interaction.Pointer.centroid(this.targetPointers);if(this.kinetic_){this.kinetic_.update(o[0],o[1])}if(this.lastCentroid){var t=this.lastCentroid[0]-o[0];var r=o[1]-this.lastCentroid[1];var i=e.map;var n=i.getView();var a=n.getState();var l=[t,r];ol.coordinate.scale(l,a.resolution);ol.coordinate.rotate(l,a.rotation);ol.coordinate.add(l,a.center);l=n.constrainCenter(l);i.render();n.setCenter(l)}this.lastCentroid=o};ol.interaction.DragPan.handleUpEvent_=function(e){var o=e.map;var t=o.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var r=this.kinetic_.getDistance();var i=this.kinetic_.getAngle();var n=t.getCenter();goog.asserts.assert(n!==undefined,"center should be defined");this.kineticPreRenderFn_=this.kinetic_.pan(n);o.beforeRender(this.kineticPreRenderFn_);var a=o.getPixelFromCoordinate(n);var l=o.getCoordinateFromPixel([a[0]-r*Math.cos(i),a[1]-r*Math.sin(i)]);l=t.constrainCenter(l);t.setCenter(l)}t.setHint(ol.ViewHint.INTERACTING,-1);o.render();return false}else{this.lastCentroid=null;return true}};ol.interaction.DragPan.handleDownEvent_=function(e){if(this.targetPointers.length>0&&this.condition_(e)){var o=e.map;var t=o.getView();this.lastCentroid=null;if(!this.handlingDownUpSequence){t.setHint(ol.ViewHint.INTERACTING,1)}o.render();if(this.kineticPreRenderFn_&&o.removePreRenderFunction(this.kineticPreRenderFn_)){t.setCenter(e.frameState.viewState.center);this.kineticPreRenderFn_=null}if(this.kinetic_){this.kinetic_.begin()}this.noKinetic_=this.targetPointers.length>1;return true}else{return false}};ol.interaction.DragPan.prototype.shouldStopEvent=goog.functions.FALSE;goog.provide("ol.interaction.DragRotate");goog.require("ol");goog.require("ol.ViewHint");goog.require("ol.events.ConditionType");goog.require("ol.events.condition");goog.require("ol.interaction.Interaction");goog.require("ol.interaction.Pointer");ol.interaction.DragRotate=function(e){var o=e?e:{};goog.base(this,{handleDownEvent:ol.interaction.DragRotate.handleDownEvent_,handleDragEvent:ol.interaction.DragRotate.handleDragEvent_,handleUpEvent:ol.interaction.DragRotate.handleUpEvent_});this.condition_=o.condition?o.condition:ol.events.condition.altShiftKeysOnly;this.lastAngle_=undefined;this.duration_=o.duration!==undefined?o.duration:250};goog.inherits(ol.interaction.DragRotate,ol.interaction.Pointer);ol.interaction.DragRotate.handleDragEvent_=function(e){if(!ol.events.condition.mouseOnly(e)){return}var o=e.map;var t=o.getSize();var r=e.pixel
;var i=Math.atan2(t[1]/2-r[1],r[0]-t[0]/2);if(this.lastAngle_!==undefined){var n=i-this.lastAngle_;var a=o.getView();var l=a.getRotation();o.render();ol.interaction.Interaction.rotateWithoutConstraints(o,a,l-n)}this.lastAngle_=i};ol.interaction.DragRotate.handleUpEvent_=function(e){if(!ol.events.condition.mouseOnly(e)){return true}var o=e.map;var t=o.getView();t.setHint(ol.ViewHint.INTERACTING,-1);var r=t.getRotation();ol.interaction.Interaction.rotate(o,t,r,undefined,this.duration_);return false};ol.interaction.DragRotate.handleDownEvent_=function(e){if(!ol.events.condition.mouseOnly(e)){return false}if(ol.events.condition.mouseActionButton(e)&&this.condition_(e)){var o=e.map;o.getView().setHint(ol.ViewHint.INTERACTING,1);o.render();this.lastAngle_=undefined;return true}else{return false}};ol.interaction.DragRotate.prototype.shouldStopEvent=goog.functions.FALSE;goog.provide("ol.render.Box");goog.require("goog.Disposable");goog.require("goog.asserts");goog.require("ol.geom.Polygon");ol.render.Box=function(e){this.geometry_=null;this.element_=document.createElement("div");this.element_.style.position="absolute";this.element_.className="ol-box "+e;this.map_=null;this.startPixel_=null;this.endPixel_=null};goog.inherits(ol.render.Box,goog.Disposable);ol.render.Box.prototype.disposeInternal=function(){this.setMap(null);goog.base(this,"disposeInternal")};ol.render.Box.prototype.render_=function(){var e=this.startPixel_;var o=this.endPixel_;goog.asserts.assert(e,"this.startPixel_ must be truthy");goog.asserts.assert(o,"this.endPixel_ must be truthy");var t="px";var r=this.element_.style;r.left=Math.min(e[0],o[0])+t;r.top=Math.min(e[1],o[1])+t;r.width=Math.abs(o[0]-e[0])+t;r.height=Math.abs(o[1]-e[1])+t};ol.render.Box.prototype.setMap=function(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var o=this.element_.style;o.left=o.top=o.width=o.height="inherit"}this.map_=e;if(this.map_){this.map_.getOverlayContainer().appendChild(this.element_)}};ol.render.Box.prototype.setPixels=function(e,o){this.startPixel_=e;this.endPixel_=o;this.createOrUpdateGeometry();this.render_()};ol.render.Box.prototype.createOrUpdateGeometry=function(){goog.asserts.assert(this.startPixel_,"this.startPixel_ must be truthy");goog.asserts.assert(this.endPixel_,"this.endPixel_ must be truthy");goog.asserts.assert(this.map_,"this.map_ must be truthy");var e=this.startPixel_;var o=this.endPixel_;var t=[e,[e[0],o[1]],o,[o[0],e[1]]];var r=t.map(this.map_.getCoordinateFromPixel,this.map_);r[4]=r[0].slice();if(!this.geometry_){this.geometry_=new ol.geom.Polygon([r])}else{this.geometry_.setCoordinates([r])}};ol.render.Box.prototype.getGeometry=function(){return this.geometry_};goog.provide("ol.DragBoxEvent");goog.provide("ol.interaction.DragBox");goog.require("ol.events.Event");goog.require("ol");goog.require("ol.events.ConditionType");goog.require("ol.events.condition");goog.require("ol.interaction.Pointer");goog.require("ol.render.Box");ol.DRAG_BOX_HYSTERESIS_PIXELS_SQUARED=ol.DRAG_BOX_HYSTERESIS_PIXELS*ol.DRAG_BOX_HYSTERESIS_PIXELS;ol.DragBoxEventType={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"};ol.DragBoxEvent=function(e,o,t){goog.base(this,e);this.coordinate=o;this.mapBrowserEvent=t};goog.inherits(ol.DragBoxEvent,ol.events.Event);ol.interaction.DragBoxEndConditionType;ol.interaction.DragBox=function(e){goog.base(this,{handleDownEvent:ol.interaction.DragBox.handleDownEvent_,handleDragEvent:ol.interaction.DragBox.handleDragEvent_,handleUpEvent:ol.interaction.DragBox.handleUpEvent_});var o=e?e:{};this.box_=new ol.render.Box(o.className||"ol-dragbox");this.startPixel_=null;this.condition_=o.condition?o.condition:ol.events.condition.always;this.boxEndCondition_=o.boxEndCondition?o.boxEndCondition:ol.interaction.DragBox.defaultBoxEndCondition};goog.inherits(ol.interaction.DragBox,ol.interaction.Pointer);ol.interaction.DragBox.defaultBoxEndCondition=function(e,o,t){var r=t[0]-o[0];var i=t[1]-o[1];return r*r+i*i>=ol.DRAG_BOX_HYSTERESIS_PIXELS_SQUARED};ol.interaction.DragBox.handleDragEvent_=function(e){if(!ol.events.condition.mouseOnly(e)){return}this.box_.setPixels(this.startPixel_,e.pixel);this.dispatchEvent(new ol.DragBoxEvent(ol.DragBoxEventType.BOXDRAG,e.coordinate,e))};ol.interaction.DragBox.prototype.getGeometry=function(){return this.box_.getGeometry()};ol.interaction.DragBox.prototype.onBoxEnd=ol.nullFunction;ol.interaction.DragBox.handleUpEvent_=function(e){if(!ol.events.condition.mouseOnly(e)){return true}this.box_.setMap(null);if(this.boxEndCondition_(e,this.startPixel_,e.pixel)){this.onBoxEnd(e);this.dispatchEvent(new ol.DragBoxEvent(ol.DragBoxEventType.BOXEND,e.coordinate,e))}return false};ol.interaction.DragBox.handleDownEvent_=function(e){if(!ol.events.condition.mouseOnly(e)){return false}if(ol.events.condition.mouseActionButton(e)&&this.condition_(e)){this.startPixel_=e.pixel;this.box_.setMap(e.map);this.box_.setPixels(this.startPixel_,this.startPixel_);this.dispatchEvent(new ol.DragBoxEvent(ol.DragBoxEventType.BOXSTART,e.coordinate,e));return true}else{return false}};goog.provide("ol.interaction.DragZoom");goog.require("goog.asserts");goog.require("ol.animation");goog.require("ol.easing");goog.require("ol.events.condition");goog.require("ol.extent");goog.require("ol.interaction.DragBox");ol.interaction.DragZoom=function(e){var o=e?e:{};var t=o.condition?o.condition:ol.events.condition.shiftKeyOnly;this.duration_=o.duration!==undefined?o.duration:200;goog.base(this,{condition:t,className:o.className||"ol-dragzoom"})};goog.inherits(ol.interaction.DragZoom,ol.interaction.DragBox);ol.interaction.DragZoom.prototype.onBoxEnd=function(){var e=this.getMap();var o=e.getView();goog.asserts.assert(o,"map must have view");var t=e.getSize();goog.asserts.assert(t!==undefined,"size should be defined");var r=this.getGeometry().getExtent();var i=o.constrainResolution(o.getResolutionForExtent(r,t));var n=o.getResolution();goog.asserts.assert(n!==undefined,"res should be defined");var a=o.getCenter();goog.asserts.assert(a!==undefined,"center should be defined");e.beforeRender(ol.animation.zoom({resolution:n,duration:this.duration_,easing:ol.easing.easeOut}));e.beforeRender(ol.animation.pan({source:a,duration:this.duration_,easing:ol.easing.easeOut}));o.setCenter(ol.extent.getCenter(r));o.setResolution(i)};goog.provide("ol.interaction.KeyboardPan");goog.require("goog.asserts");goog.require("goog.functions");goog.require("ol");goog.require("ol.coordinate");goog.require("ol.events.ConditionType");goog.require("ol.events.EventType");goog.require("ol.events.KeyCode");goog.require("ol.events.condition");goog.require("ol.interaction.Interaction");ol.interaction.KeyboardPan=function(e){goog.base(this,{handleEvent:ol.interaction.KeyboardPan.handleEvent});var o=e||{};this.condition_=o.condition!==undefined?o.condition:goog.functions.and(ol.events.condition.noModifierKeys,ol.events.condition.targetNotEditable);this.duration_=o.duration!==undefined?o.duration:100;this.pixelDelta_=o.pixelDelta!==undefined?o.pixelDelta:128};goog.inherits(ol.interaction.KeyboardPan,ol.interaction.Interaction);ol.interaction.KeyboardPan.handleEvent=function(e){var o=false;if(e.type==ol.events.EventType.KEYDOWN){var t=e.originalEvent;var r=t.keyCode;if(this.condition_(e)&&(r==ol.events.KeyCode.DOWN||r==ol.events.KeyCode.LEFT||r==ol.events.KeyCode.RIGHT||r==ol.events.KeyCode.UP)){var i=e.map;var n=i.getView();goog.asserts.assert(n,"map must have view");var a=n.getResolution()*this.pixelDelta_;var l=0,s=0;if(r==ol.events.KeyCode.DOWN){s=-a}else if(r==ol.events.KeyCode.LEFT){l=-a}else if(r==ol.events.KeyCode.RIGHT){l=a}else{s=a}var g=[l,s];ol.coordinate.rotate(g,n.getRotation());ol.interaction.Interaction.pan(i,n,g,this.duration_);e.preventDefault();o=true}}return!o};goog.provide("ol.interaction.KeyboardZoom");goog.require("goog.asserts");goog.require("ol.events.ConditionType");goog.require("ol.events.EventType");goog.require("ol.events.condition");goog.require("ol.interaction.Interaction");ol.interaction.KeyboardZoom=function(e){goog.base(this,{handleEvent:ol.interaction.KeyboardZoom.handleEvent});var o=e?e:{};this.condition_=o.condition?o.condition:ol.events.condition.targetNotEditable;this.delta_=o.delta?o.delta:1;this.duration_=o.duration!==undefined?o.duration:100};goog.inherits(ol.interaction.KeyboardZoom,ol.interaction.Interaction);ol.interaction.KeyboardZoom.handleEvent=function(e){var o=false;if(e.type==ol.events.EventType.KEYDOWN||e.type==ol.events.EventType.KEYPRESS){var t=e.originalEvent;var r=t.charCode;if(this.condition_(e)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){var i=e.map;var n=r=="+".charCodeAt(0)?this.delta_:-this.delta_;i.render();var a=i.getView();goog.asserts.assert(a,"map must have view");ol.interaction.Interaction.zoomByDelta(i,a,n,undefined,this.duration_);e.preventDefault();o=true}}return!o};goog.provide("ol.interaction.MouseWheelZoom");goog.require("goog.asserts");goog.require("ol");goog.require("ol.Coordinate");goog.require("ol.events.EventType");goog.require("ol.interaction.Interaction");goog.require("ol.math");ol.interaction.MouseWheelZoom=function(e){goog.base(this,{handleEvent:ol.interaction.MouseWheelZoom.handleEvent});var o=e||{};this.delta_=0;this.duration_=o.duration!==undefined?o.duration:250;this.useAnchor_=o.useAnchor!==undefined?o.useAnchor:true;this.lastAnchor_=null;this.startTime_=undefined;this.timeoutId_=undefined};goog.inherits(ol.interaction.MouseWheelZoom,ol.interaction.Interaction);ol.interaction.MouseWheelZoom.handleEvent=function(e){var o=false;if(e.type==ol.events.EventType.WHEEL||e.type==ol.events.EventType.MOUSEWHEEL){var t=e.map;var r=e.originalEvent;if(this.useAnchor_){this.lastAnchor_=e.coordinate}var i;if(e.type==ol.events.EventType.WHEEL){i=r.deltaY;if(ol.has.FIREFOX&&r.deltaMode===goog.global.WheelEvent.DOM_DELTA_PIXEL){i/=ol.has.DEVICE_PIXEL_RATIO}if(r.deltaMode===goog.global.WheelEvent.DOM_DELTA_LINE){i*=40}}else if(e.type==ol.events.EventType.MOUSEWHEEL){i=-r.wheelDeltaY;if(ol.has.SAFARI){i/=3}}this.delta_+=i;if(this.startTime_===undefined){this.startTime_=Date.now()}var n=ol.MOUSEWHEELZOOM_TIMEOUT_DURATION;var a=Math.max(n-(Date.now()-this.startTime_),0);goog.global.clearTimeout(this.timeoutId_);this.timeoutId_=goog.global.setTimeout(this.doZoom_.bind(this,t),a);e.preventDefault();o=true}return!o};ol.interaction.MouseWheelZoom.prototype.doZoom_=function(e){var o=ol.MOUSEWHEELZOOM_MAXDELTA;var t=ol.math.clamp(this.delta_,-o,o);var r=e.getView();goog.asserts.assert(r,"map must have view");e.render();ol.interaction.Interaction.zoomByDelta(e,r,-t,this.lastAnchor_,this.duration_);this.delta_=0;this.lastAnchor_=null;this.startTime_=undefined;this.timeoutId_=undefined};ol.interaction.MouseWheelZoom.prototype.setMouseAnchor=function(e){this.useAnchor_=e;if(!e){this.lastAnchor_=null}};goog.provide("ol.interaction.PinchRotate");goog.require("goog.asserts");goog.require("goog.functions");goog.require("ol");goog.require("ol.Coordinate");goog.require("ol.ViewHint");goog.require("ol.interaction.Interaction");goog.require("ol.interaction.Pointer");ol.interaction.PinchRotate=function(e){goog.base(this,{handleDownEvent:ol.interaction.PinchRotate.handleDownEvent_,handleDragEvent:ol.interaction.PinchRotate.handleDragEvent_,handleUpEvent:ol.interaction.PinchRotate.handleUpEvent_});var o=e||{};this.anchor_=null;this.lastAngle_=undefined;this.rotating_=false;this.rotationDelta_=0;this.threshold_=o.threshold!==undefined?o.threshold:.3;this.duration_=o.duration!==undefined?o.duration:250};goog.inherits(ol.interaction.PinchRotate,ol.interaction.Pointer);ol.interaction.PinchRotate.handleDragEvent_=function(e){goog.asserts.assert(this.targetPointers.length>=2,"length of this.targetPointers should be greater than or equal to 2");var o=0;var t=this.targetPointers[0];var r=this.targetPointers[1];var i=Math.atan2(r.clientY-t.clientY,r.clientX-t.clientX);if(this.lastAngle_!==undefined){var n=i-this.lastAngle_;this.rotationDelta_+=n;if(!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_){this.rotating_=true}o=n}this.lastAngle_=i;var a=e.map;var l=a.getViewport().getBoundingClientRect();var s=ol.interaction.Pointer.centroid(this.targetPointers);s[0]-=l.left;s[1]-=l.top;this.anchor_=a.getCoordinateFromPixel(s);if(this.rotating_){var g=a.getView();var p=g.getRotation();a.render();ol.interaction.Interaction.rotateWithoutConstraints(a,g,p+o,this.anchor_)}};ol.interaction.PinchRotate.handleUpEvent_=function(e){if(this.targetPointers.length<2){var o=e.map;var t=o.getView();t.setHint(ol.ViewHint.INTERACTING,-1);if(this.rotating_){var r=t.getRotation();ol.interaction.Interaction.rotate(o,t,r,this.anchor_,this.duration_)}return false}else{return true}};ol.interaction.PinchRotate.handleDownEvent_=function(e){if(this.targetPointers.length>=2){var o=e.map;this.anchor_=null;this.lastAngle_=undefined;this.rotating_=false;this.rotationDelta_=0;if(!this.handlingDownUpSequence){o.getView().setHint(ol.ViewHint.INTERACTING,1)}o.render();return true}else{return false}};ol.interaction.PinchRotate.prototype.shouldStopEvent=goog.functions.FALSE;goog.provide("ol.interaction.PinchZoom");goog.require("goog.asserts");goog.require("goog.functions");goog.require("ol");goog.require("ol.Coordinate");goog.require("ol.ViewHint");goog.require("ol.interaction.Interaction");goog.require("ol.interaction.Pointer");ol.interaction.PinchZoom=function(e){goog.base(this,{handleDownEvent:ol.interaction.PinchZoom.handleDownEvent_,handleDragEvent:ol.interaction.PinchZoom.handleDragEvent_,handleUpEvent:ol.interaction.PinchZoom.handleUpEvent_});var o=e?e:{};this.anchor_=null;this.duration_=o.duration!==undefined?o.duration:400;this.lastDistance_=undefined;this.lastScaleDelta_=1};goog.inherits(ol.interaction.PinchZoom,ol.interaction.Pointer);ol.interaction.PinchZoom.handleDragEvent_=function(e){goog.asserts.assert(this.targetPointers.length>=2,"length of this.targetPointers should be 2 or more");var o=1;var t=this.targetPointers[0];var r=this.targetPointers[1];var i=t.clientX-r.clientX;var n=t.clientY-r.clientY;var a=Math.sqrt(i*i+n*n);if(this.lastDistance_!==undefined){o=this.lastDistance_/a}this.lastDistance_=a;if(o!=1){this.lastScaleDelta_=o}var l=e.map;var s=l.getView();var g=s.getResolution();var p=l.getViewport().getBoundingClientRect();var u=ol.interaction.Pointer.centroid(this.targetPointers);u[0]-=p.left;u[1]-=p.top;this.anchor_=l.getCoordinateFromPixel(u);l.render();ol.interaction.Interaction.zoomWithoutConstraints(l,s,g*o,this.anchor_)};ol.interaction.PinchZoom.handleUpEvent_=function(e){if(this.targetPointers.length<2){var o=e.map;var t=o.getView();t.setHint(ol.ViewHint.INTERACTING,-1);var r=t.getResolution();var i=this.lastScaleDelta_-1;ol.interaction.Interaction.zoom(o,t,r,this.anchor_,this.duration_,i);return false}else{return true}};ol.interaction.PinchZoom.handleDownEvent_=function(e){if(this.targetPointers.length>=2){var o=e.map;this.anchor_=null;this.lastDistance_=undefined;this.lastScaleDelta_=1;if(!this.handlingDownUpSequence){o.getView().setHint(ol.ViewHint.INTERACTING,1)}o.render();return true}else{return false}};ol.interaction.PinchZoom.prototype.shouldStopEvent=goog.functions.FALSE;goog.provide("ol.interaction");goog.require("ol");goog.require("ol.Collection");goog.require("ol.Kinetic");goog.require("ol.interaction.DoubleClickZoom");goog.require("ol.interaction.DragPan");goog.require("ol.interaction.DragRotate");goog.require("ol.interaction.DragZoom");goog.require("ol.interaction.KeyboardPan");goog.require("ol.interaction.KeyboardZoom");goog.require("ol.interaction.MouseWheelZoom");goog.require("ol.interaction.PinchRotate");goog.require("ol.interaction.PinchZoom");ol.interaction.defaults=function(e){var o=e?e:{};var t=new ol.Collection;var r=new ol.Kinetic(-.005,.05,100);var i=o.altShiftDragRotate!==undefined?o.altShiftDragRotate:true;if(i){t.push(new ol.interaction.DragRotate)}var n=o.doubleClickZoom!==undefined?o.doubleClickZoom:true;if(n){t.push(new ol.interaction.DoubleClickZoom({delta:o.zoomDelta,duration:o.zoomDuration}))}var a=o.dragPan!==undefined?o.dragPan:true;if(a){t.push(new ol.interaction.DragPan({kinetic:r}))}var l=o.pinchRotate!==undefined?o.pinchRotate:true;if(l){t.push(new ol.interaction.PinchRotate)}var s=o.pinchZoom!==undefined?o.pinchZoom:true;if(s){t.push(new ol.interaction.PinchZoom({duration:o.zoomDuration}))}var g=o.keyboard!==undefined?o.keyboard:true;if(g){t.push(new ol.interaction.KeyboardPan);t.push(new ol.interaction.KeyboardZoom({delta:o.zoomDelta,duration:o.zoomDuration}))}var p=o.mouseWheelZoom!==undefined?o.mouseWheelZoom:true;if(p){t.push(new ol.interaction.MouseWheelZoom({duration:o.zoomDuration}))}var u=o.shiftDragZoom!==undefined?o.shiftDragZoom:true;if(u){t.push(new ol.interaction.DragZoom({duration:o.zoomDuration}))}return t};goog.provide("ol.layer.Group");goog.require("goog.asserts");goog.require("ol.Collection");goog.require("ol.CollectionEvent");goog.require("ol.CollectionEventType");goog.require("ol.Object");goog.require("ol.ObjectEventType");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol.extent");goog.require("ol.layer.Base");goog.require("ol.object");goog.require("ol.source.State");ol.layer.GroupProperty={LAYERS:"layers"};ol.layer.Group=function(e){var o=e||{};var t=ol.object.assign({},o);delete t.layers;var r=o.layers;goog.base(this,t);this.layersListenerKeys_=[];this.listenerKeys_={};ol.events.listen(this,ol.Object.getChangeEventType(ol.layer.GroupProperty.LAYERS),this.handleLayersChanged_,this);if(r){if(goog.isArray(r)){r=new ol.Collection(r.slice())}else{goog.asserts.assertInstanceof(r,ol.Collection,"layers should be an ol.Collection");r=r}}else{r=new ol.Collection}this.setLayers(r)};goog.inherits(ol.layer.Group,ol.layer.Base);ol.layer.Group.prototype.handleLayerChange_=function(){if(this.getVisible()){this.changed()}};ol.layer.Group.prototype.handleLayersChanged_=function(e){this.layersListenerKeys_.forEach(ol.events.unlistenByKey);this.layersListenerKeys_.length=0;var o=this.getLayers();this.layersListenerKeys_.push(ol.events.listen(o,ol.CollectionEventType.ADD,this.handleLayersAdd_,this),ol.events.listen(o,ol.CollectionEventType.REMOVE,this.handleLayersRemove_,this));for(var t in this.listenerKeys_){this.listenerKeys_[t].forEach(ol.events.unlistenByKey)}ol.object.clear(this.listenerKeys_);var r=o.getArray();var i,n,a;for(i=0,n=r.length;i<n;i++){a=r[i];this.listenerKeys_[goog.getUid(a).toString()]=[ol.events.listen(a,ol.ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,this),ol.events.listen(a,ol.events.EventType.CHANGE,this.handleLayerChange_,this)]}this.changed()};ol.layer.Group.prototype.handleLayersAdd_=function(e){var o=e.element;var t=goog.getUid(o).toString();goog.asserts.assert(!(t in this.listenerKeys_),"listeners already registered");this.listenerKeys_[t]=[ol.events.listen(o,ol.ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,this),ol.events.listen(o,ol.events.EventType.CHANGE,this.handleLayerChange_,this)];this.changed()};ol.layer.Group.prototype.handleLayersRemove_=function(e){var o=e.element;var t=goog.getUid(o).toString();goog.asserts.assert(t in this.listenerKeys_,"no listeners to unregister");this.listenerKeys_[t].forEach(ol.events.unlistenByKey);delete this.listenerKeys_[t];this.changed()};ol.layer.Group.prototype.getLayers=function(){return this.get(ol.layer.GroupProperty.LAYERS)};ol.layer.Group.prototype.setLayers=function(e){this.set(ol.layer.GroupProperty.LAYERS,e)};ol.layer.Group.prototype.getLayersArray=function(e){var o=e!==undefined?e:[];this.getLayers().forEach(function(e){e.getLayersArray(o)});return o};ol.layer.Group.prototype.getLayerStatesArray=function(e){var o=e!==undefined?e:[];var t=o.length;this.getLayers().forEach(function(e){e.getLayerStatesArray(o)});var r=this.getLayerState();var i,n,a;for(i=t,n=o.length;i<n;i++){a=o[i];a.opacity*=r.opacity;a.visible=a.visible&&r.visible;a.maxResolution=Math.min(a.maxResolution,r.maxResolution);a.minResolution=Math.max(a.minResolution,r.minResolution);if(r.extent!==undefined){if(a.extent!==undefined){a.extent=ol.extent.getIntersection(a.extent,r.extent)}else{a.extent=r.extent}}}return o};ol.layer.Group.prototype.getSourceState=function(){return ol.source.State.READY};goog.provide("ol.proj.EPSG3857");goog.require("goog.asserts");goog.require("ol.math");goog.require("ol.proj");goog.require("ol.proj.Projection");goog.require("ol.proj.Units");ol.proj.EPSG3857_=function(e){goog.base(this,{code:e,units:ol.proj.Units.METERS,extent:ol.proj.EPSG3857.EXTENT,global:true,worldExtent:ol.proj.EPSG3857.WORLD_EXTENT})};goog.inherits(ol.proj.EPSG3857_,ol.proj.Projection);ol.proj.EPSG3857_.prototype.getPointResolution=function(e,o){return e/ol.math.cosh(o[1]/ol.proj.EPSG3857.RADIUS)};ol.proj.EPSG3857.RADIUS=6378137;ol.proj.EPSG3857.HALF_SIZE=Math.PI*ol.proj.EPSG3857.RADIUS;ol.proj.EPSG3857.EXTENT=[-ol.proj.EPSG3857.HALF_SIZE,-ol.proj.EPSG3857.HALF_SIZE,ol.proj.EPSG3857.HALF_SIZE,ol.proj.EPSG3857.HALF_SIZE];ol.proj.EPSG3857.WORLD_EXTENT=[-180,-85,180,85];ol.proj.EPSG3857.CODES=["EPSG:3857","EPSG:102100","EPSG:102113","EPSG:900913","urn:ogc:def:crs:EPSG:6.18:3:3857","urn:ogc:def:crs:EPSG::3857","http://www.opengis.net/gml/srs/epsg.xml#3857"];ol.proj.EPSG3857.PROJECTIONS=ol.proj.EPSG3857.CODES.map(function(e){return new ol.proj.EPSG3857_(e)});ol.proj.EPSG3857.fromEPSG4326=function(e,o,t){var r=e.length,i=t>1?t:2,n=o;if(n===undefined){if(i>2){n=e.slice()}else{n=new Array(r)}}goog.asserts.assert(n.length%i===0,"modulus of output.length with dimension should be 0");for(var a=0;a<r;a+=i){n[a]=ol.proj.EPSG3857.RADIUS*Math.PI*e[a]/180;n[a+1]=ol.proj.EPSG3857.RADIUS*Math.log(Math.tan(Math.PI*(e[a+1]+90)/360))}return n};ol.proj.EPSG3857.toEPSG4326=function(e,o,t){var r=e.length,i=t>1?t:2,n=o;if(n===undefined){if(i>2){n=e.slice()}else{n=new Array(r)}}goog.asserts.assert(n.length%i===0,"modulus of output.length with dimension should be 0");for(var a=0;a<r;a+=i){n[a]=180*e[a]/(ol.proj.EPSG3857.RADIUS*Math.PI);n[a+1]=360*Math.atan(Math.exp(e[a+1]/ol.proj.EPSG3857.RADIUS))/Math.PI-90}return n};goog.provide("ol.sphere.WGS84");goog.require("ol.Sphere");ol.sphere.WGS84=new ol.Sphere(6378137);goog.provide("ol.proj.EPSG4326");goog.require("ol.proj");goog.require("ol.proj.Projection");goog.require("ol.proj.Units");goog.require("ol.sphere.WGS84");ol.proj.EPSG4326_=function(e,o){goog.base(this,{code:e,units:ol.proj.Units.DEGREES,extent:ol.proj.EPSG4326.EXTENT,axisOrientation:o,global:true,metersPerUnit:ol.proj.EPSG4326.METERS_PER_UNIT,worldExtent:ol.proj.EPSG4326.EXTENT})};goog.inherits(ol.proj.EPSG4326_,ol.proj.Projection);ol.proj.EPSG4326_.prototype.getPointResolution=function(e,o){return e};ol.proj.EPSG4326.EXTENT=[-180,-90,180,90];ol.proj.EPSG4326.METERS_PER_UNIT=Math.PI*ol.sphere.WGS84.radius/180;ol.proj.EPSG4326.PROJECTIONS=[new ol.proj.EPSG4326_("CRS:84"),new ol.proj.EPSG4326_("EPSG:4326","neu"),new ol.proj.EPSG4326_("urn:ogc:def:crs:EPSG::4326","neu"),new ol.proj.EPSG4326_("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new ol.proj.EPSG4326_("urn:ogc:def:crs:OGC:1.3:CRS84"),new ol.proj.EPSG4326_("urn:ogc:def:crs:OGC:2:84"),new ol.proj.EPSG4326_("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ol.proj.EPSG4326_("urn:x-ogc:def:crs:EPSG:4326","neu")];goog.provide("ol.proj.common");goog.require("ol.proj");goog.require("ol.proj.EPSG3857");goog.require("ol.proj.EPSG4326");ol.proj.common.add=function(){ol.proj.addEquivalentProjections(ol.proj.EPSG3857.PROJECTIONS);ol.proj.addEquivalentProjections(ol.proj.EPSG4326.PROJECTIONS);ol.proj.addEquivalentTransforms(ol.proj.EPSG4326.PROJECTIONS,ol.proj.EPSG3857.PROJECTIONS,ol.proj.EPSG3857.fromEPSG4326,ol.proj.EPSG3857.toEPSG4326)};goog.provide("ol.layer.Image");goog.require("ol.layer.Layer");ol.layer.Image=function(e){var o=e?e:{};goog.base(this,o)};goog.inherits(ol.layer.Image,ol.layer.Layer);ol.layer.Image.prototype.getSource;goog.provide("ol.layer.Tile");goog.require("ol");goog.require("ol.layer.Layer");goog.require("ol.object");ol.layer.TileProperty={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};ol.layer.Tile=function(e){var o=e?e:{};var t=ol.object.assign({},o);delete t.preload;delete t.useInterimTilesOnError;goog.base(this,t);this.setPreload(o.preload!==undefined?o.preload:0);this.setUseInterimTilesOnError(o.useInterimTilesOnError!==undefined?o.useInterimTilesOnError:true)};goog.inherits(ol.layer.Tile,ol.layer.Layer);ol.layer.Tile.prototype.getPreload=function(){return this.get(ol.layer.TileProperty.PRELOAD)};ol.layer.Tile.prototype.getSource;ol.layer.Tile.prototype.setPreload=function(e){this.set(ol.layer.TileProperty.PRELOAD,e)};ol.layer.Tile.prototype.getUseInterimTilesOnError=function(){return this.get(ol.layer.TileProperty.USE_INTERIM_TILES_ON_ERROR)};ol.layer.Tile.prototype.setUseInterimTilesOnError=function(e){this.set(ol.layer.TileProperty.USE_INTERIM_TILES_ON_ERROR,e)};goog.provide("ol.render.canvas");ol.render.canvas.FillState;ol.render.canvas.StrokeState;ol.render.canvas.TextState;ol.render.canvas.defaultFont="10px sans-serif";ol.render.canvas.defaultFillStyle=[0,0,0,1];ol.render.canvas.defaultLineCap="round";ol.render.canvas.defaultLineDash=[];ol.render.canvas.defaultLineJoin="round";ol.render.canvas.defaultMiterLimit=10;ol.render.canvas.defaultStrokeStyle=[0,0,0,1];ol.render.canvas.defaultTextAlign="center";ol.render.canvas.defaultTextBaseline="middle";ol.render.canvas.defaultLineWidth=1;ol.render.canvas.rotateAtOffset=function(e,o,t,r){if(o!==0){e.translate(t,r);e.rotate(o);e.translate(-t,-r)}};goog.provide("ol.style.Fill");goog.require("ol.ColorLike");goog.require("ol.color");ol.style.Fill=function(e){var o=e||{};this.color_=o.color!==undefined?o.color:null;this.checksum_=undefined};ol.style.Fill.prototype.getColor=function(){return this.color_};ol.style.Fill.prototype.setColor=function(e){this.color_=e;this.checksum_=undefined};ol.style.Fill.prototype.getChecksum=function(){if(this.checksum_===undefined){if(this.color_ instanceof CanvasPattern||this.color_ instanceof CanvasGradient){this.checksum_=goog.getUid(this.color_).toString()}else{this.checksum_="f"+(this.color_?ol.color.asString(this.color_):"-")}}return this.checksum_};goog.provide("goog.crypt");goog.require("goog.array");goog.require("goog.asserts");goog.crypt.stringToByteArray=function(e){var o=[],t=0;for(var r=0;r<e.length;r++){var i=e.charCodeAt(r);while(i>255){o[t++]=i&255;i>>=8}o[t++]=i}return o};goog.crypt.byteArrayToString=function(e){var o=8192;if(e.length<=o){return String.fromCharCode.apply(null,e)}var t="";for(var r=0;r<e.length;r+=o){var i=goog.array.slice(e,r,r+o);t+=String.fromCharCode.apply(null,i)}return t};goog.crypt.byteArrayToHex=function(e){return goog.array.map(e,function(e){var o=e.toString(16);return o.length>1?o:"0"+o}).join("")};goog.crypt.hexToByteArray=function(e){goog.asserts.assert(e.length%2==0,"Key string length must be multiple of 2");var o=[];for(var t=0;t<e.length;t+=2){o.push(parseInt(e.substring(t,t+2),16))}return o};goog.crypt.stringToUtf8ByteArray=function(e){var o=[],t=0;for(var r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i<128){o[t++]=i}else if(i<2048){o[t++]=i>>6|192;o[t++]=i&63|128}else if((i&64512)==55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)==56320){i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023);o[t++]=i>>18|240;o[t++]=i>>12&63|128;o[t++]=i>>6&63|128;o[t++]=i&63|128}else{o[t++]=i>>12|224;o[t++]=i>>6&63|128;o[t++]=i&63|128}}return o};goog.crypt.utf8ByteArrayToString=function(e){var o=[],t=0,r=0;while(t<e.length){var i=e[t++];if(i<128){o[r++]=String.fromCharCode(i)}else if(i>191&&i<224){var n=e[t++];o[r++]=String.fromCharCode((i&31)<<6|n&63)}else if(i>239&&i<365){var n=e[t++];var a=e[t++];var l=e[t++];var s=((i&7)<<18|(n&63)<<12|(a&63)<<6|l&63)-65536;o[r++]=String.fromCharCode(55296+(s>>10));o[r++]=String.fromCharCode(56320+(s&1023))}else{var n=e[t++];var a=e[t++];o[r++]=String.fromCharCode((i&15)<<12|(n&63)<<6|a&63)}}return o.join("")};goog.crypt.xorByteArray=function(e,o){goog.asserts.assert(e.length==o.length,"XOR array lengths must match");var t=[];for(var r=0;r<e.length;r++){t.push(e[r]^o[r])}return t};goog.provide("goog.crypt.Hash");goog.crypt.Hash=function(){this.blockSize=-1};goog.crypt.Hash.prototype.reset=goog.abstractMethod;goog.crypt.Hash.prototype.update=goog.abstractMethod;goog.crypt.Hash.prototype.digest=goog.abstractMethod;goog.provide("goog.crypt.Md5");goog.require("goog.crypt.Hash");goog.crypt.Md5=function(){goog.crypt.Md5.base(this,"constructor");this.blockSize=512/8;this.chain_=new Array(4);this.block_=new Array(this.blockSize);this.blockLength_=0;this.totalLength_=0;this.reset()};goog.inherits(goog.crypt.Md5,goog.crypt.Hash);goog.crypt.Md5.prototype.reset=function(){this.chain_[0]=1732584193;this.chain_[1]=4023233417;this.chain_[2]=2562383102;this.chain_[3]=271733878;this.blockLength_=0;this.totalLength_=0};goog.crypt.Md5.prototype.compress_=function(e,o){if(!o){o=0}var t=new Array(16);if(goog.isString(e)){for(var r=0;r<16;++r){t[r]=e.charCodeAt(o++)|e.charCodeAt(o++)<<8|e.charCodeAt(o++)<<16|e.charCodeAt(o++)<<24}}else{for(var r=0;r<16;++r){t[r]=e[o++]|e[o++]<<8|e[o++]<<16|e[o++]<<24}}var i=this.chain_[0];var n=this.chain_[1];var a=this.chain_[2];var l=this.chain_[3];var s=0;s=i+(l^n&(a^l))+t[0]+3614090360&4294967295;i=n+(s<<7&4294967295|s>>>25);s=l+(a^i&(n^a))+t[1]+3905402710&4294967295;l=i+(s<<12&4294967295|s>>>20);s=a+(n^l&(i^n))+t[2]+606105819&4294967295;a=l+(s<<17&4294967295|s>>>15);s=n+(i^a&(l^i))+t[3]+3250441966&4294967295;n=a+(s<<22&4294967295|s>>>10);s=i+(l^n&(a^l))+t[4]+4118548399&4294967295;i=n+(s<<7&4294967295|s>>>25);s=l+(a^i&(n^a))+t[5]+1200080426&4294967295;l=i+(s<<12&4294967295|s>>>20);s=a+(n^l&(i^n))+t[6]+2821735955&4294967295;a=l+(s<<17&4294967295|s>>>15);s=n+(i^a&(l^i))+t[7]+4249261313&4294967295;n=a+(s<<22&4294967295|s>>>10);s=i+(l^n&(a^l))+t[8]+1770035416&4294967295;i=n+(s<<7&4294967295|s>>>25);s=l+(a^i&(n^a))+t[9]+2336552879&4294967295;l=i+(s<<12&4294967295|s>>>20);s=a+(n^l&(i^n))+t[10]+4294925233&4294967295;a=l+(s<<17&4294967295|s>>>15);s=n+(i^a&(l^i))+t[11]+2304563134&4294967295;n=a+(s<<22&4294967295|s>>>10);s=i+(l^n&(a^l))+t[12]+1804603682&4294967295;i=n+(s<<7&4294967295|s>>>25);s=l+(a^i&(n^a))+t[13]+4254626195&4294967295;l=i+(s<<12&4294967295|s>>>20);s=a+(n^l&(i^n))+t[14]+2792965006&4294967295;a=l+(s<<17&4294967295|s>>>15);s=n+(i^a&(l^i))+t[15]+1236535329&4294967295;n=a+(s<<22&4294967295|s>>>10);s=i+(a^l&(n^a))+t[1]+4129170786&4294967295;i=n+(s<<5&4294967295|s>>>27);s=l+(n^a&(i^n))+t[6]+3225465664&4294967295;l=i+(s<<9&4294967295|s>>>23);s=a+(i^n&(l^i))+t[11]+643717713&4294967295;a=l+(s<<14&4294967295|s>>>18);s=n+(l^i&(a^l))+t[0]+3921069994&4294967295;n=a+(s<<20&4294967295|s>>>12);s=i+(a^l&(n^a))+t[5]+3593408605&4294967295;i=n+(s<<5&4294967295|s>>>27);s=l+(n^a&(i^n))+t[10]+38016083&4294967295;l=i+(s<<9&4294967295|s>>>23);s=a+(i^n&(l^i))+t[15]+3634488961&4294967295;a=l+(s<<14&4294967295|s>>>18);s=n+(l^i&(a^l))+t[4]+3889429448&4294967295;n=a+(s<<20&4294967295|s>>>12);s=i+(a^l&(n^a))+t[9]+568446438&4294967295;i=n+(s<<5&4294967295|s>>>27);s=l+(n^a&(i^n))+t[14]+3275163606&4294967295;l=i+(s<<9&4294967295|s>>>23);s=a+(i^n&(l^i))+t[3]+4107603335&4294967295;a=l+(s<<14&4294967295|s>>>18);s=n+(l^i&(a^l))+t[8]+1163531501&4294967295;n=a+(s<<20&4294967295|s>>>12);s=i+(a^l&(n^a))+t[13]+2850285829&4294967295;i=n+(s<<5&4294967295|s>>>27);s=l+(n^a&(i^n))+t[2]+4243563512&4294967295;l=i+(s<<9&4294967295|s>>>23);s=a+(i^n&(l^i))+t[7]+1735328473&4294967295;a=l+(s<<14&4294967295|s>>>18);s=n+(l^i&(a^l))+t[12]+2368359562&4294967295;n=a+(s<<20&4294967295|s>>>12);s=i+(n^a^l)+t[5]+4294588738&4294967295;i=n+(s<<4&4294967295|s>>>28);s=l+(i^n^a)+t[8]+2272392833&4294967295;l=i+(s<<11&4294967295|s>>>21);s=a+(l^i^n)+t[11]+1839030562&4294967295;a=l+(s<<16&4294967295|s>>>16);s=n+(a^l^i)+t[14]+4259657740&4294967295;n=a+(s<<23&4294967295|s>>>9);s=i+(n^a^l)+t[1]+2763975236&4294967295;i=n+(s<<4&4294967295|s>>>28);s=l+(i^n^a)+t[4]+1272893353&4294967295;l=i+(s<<11&4294967295|s>>>21);s=a+(l^i^n)+t[7]+4139469664&4294967295;a=l+(s<<16&4294967295|s>>>16)
;s=n+(a^l^i)+t[10]+3200236656&4294967295;n=a+(s<<23&4294967295|s>>>9);s=i+(n^a^l)+t[13]+681279174&4294967295;i=n+(s<<4&4294967295|s>>>28);s=l+(i^n^a)+t[0]+3936430074&4294967295;l=i+(s<<11&4294967295|s>>>21);s=a+(l^i^n)+t[3]+3572445317&4294967295;a=l+(s<<16&4294967295|s>>>16);s=n+(a^l^i)+t[6]+76029189&4294967295;n=a+(s<<23&4294967295|s>>>9);s=i+(n^a^l)+t[9]+3654602809&4294967295;i=n+(s<<4&4294967295|s>>>28);s=l+(i^n^a)+t[12]+3873151461&4294967295;l=i+(s<<11&4294967295|s>>>21);s=a+(l^i^n)+t[15]+530742520&4294967295;a=l+(s<<16&4294967295|s>>>16);s=n+(a^l^i)+t[2]+3299628645&4294967295;n=a+(s<<23&4294967295|s>>>9);s=i+(a^(n|~l))+t[0]+4096336452&4294967295;i=n+(s<<6&4294967295|s>>>26);s=l+(n^(i|~a))+t[7]+1126891415&4294967295;l=i+(s<<10&4294967295|s>>>22);s=a+(i^(l|~n))+t[14]+2878612391&4294967295;a=l+(s<<15&4294967295|s>>>17);s=n+(l^(a|~i))+t[5]+4237533241&4294967295;n=a+(s<<21&4294967295|s>>>11);s=i+(a^(n|~l))+t[12]+1700485571&4294967295;i=n+(s<<6&4294967295|s>>>26);s=l+(n^(i|~a))+t[3]+2399980690&4294967295;l=i+(s<<10&4294967295|s>>>22);s=a+(i^(l|~n))+t[10]+4293915773&4294967295;a=l+(s<<15&4294967295|s>>>17);s=n+(l^(a|~i))+t[1]+2240044497&4294967295;n=a+(s<<21&4294967295|s>>>11);s=i+(a^(n|~l))+t[8]+1873313359&4294967295;i=n+(s<<6&4294967295|s>>>26);s=l+(n^(i|~a))+t[15]+4264355552&4294967295;l=i+(s<<10&4294967295|s>>>22);s=a+(i^(l|~n))+t[6]+2734768916&4294967295;a=l+(s<<15&4294967295|s>>>17);s=n+(l^(a|~i))+t[13]+1309151649&4294967295;n=a+(s<<21&4294967295|s>>>11);s=i+(a^(n|~l))+t[4]+4149444226&4294967295;i=n+(s<<6&4294967295|s>>>26);s=l+(n^(i|~a))+t[11]+3174756917&4294967295;l=i+(s<<10&4294967295|s>>>22);s=a+(i^(l|~n))+t[2]+718787259&4294967295;a=l+(s<<15&4294967295|s>>>17);s=n+(l^(a|~i))+t[9]+3951481745&4294967295;n=a+(s<<21&4294967295|s>>>11);this.chain_[0]=this.chain_[0]+i&4294967295;this.chain_[1]=this.chain_[1]+n&4294967295;this.chain_[2]=this.chain_[2]+a&4294967295;this.chain_[3]=this.chain_[3]+l&4294967295};goog.crypt.Md5.prototype.update=function(e,o){if(!goog.isDef(o)){o=e.length}var t=o-this.blockSize;var r=this.block_;var i=this.blockLength_;var n=0;while(n<o){if(i==0){while(n<=t){this.compress_(e,n);n+=this.blockSize}}if(goog.isString(e)){while(n<o){r[i++]=e.charCodeAt(n++);if(i==this.blockSize){this.compress_(r);i=0;break}}}else{while(n<o){r[i++]=e[n++];if(i==this.blockSize){this.compress_(r);i=0;break}}}}this.blockLength_=i;this.totalLength_+=o};goog.crypt.Md5.prototype.digest=function(){var e=new Array((this.blockLength_<56?this.blockSize:this.blockSize*2)-this.blockLength_);e[0]=128;for(var o=1;o<e.length-8;++o){e[o]=0}var t=this.totalLength_*8;for(var o=e.length-8;o<e.length;++o){e[o]=t&255;t/=256}this.update(e);var r=new Array(16);var i=0;for(var o=0;o<4;++o){for(var n=0;n<32;n+=8){r[i++]=this.chain_[o]>>>n&255}}return r};goog.provide("ol.style.Stroke");goog.require("goog.crypt");goog.require("goog.crypt.Md5");goog.require("ol.color");ol.style.Stroke=function(e){var o=e||{};this.color_=o.color!==undefined?o.color:null;this.lineCap_=o.lineCap;this.lineDash_=o.lineDash!==undefined?o.lineDash:null;this.lineJoin_=o.lineJoin;this.miterLimit_=o.miterLimit;this.width_=o.width;this.checksum_=undefined};ol.style.Stroke.prototype.getColor=function(){return this.color_};ol.style.Stroke.prototype.getLineCap=function(){return this.lineCap_};ol.style.Stroke.prototype.getLineDash=function(){return this.lineDash_};ol.style.Stroke.prototype.getLineJoin=function(){return this.lineJoin_};ol.style.Stroke.prototype.getMiterLimit=function(){return this.miterLimit_};ol.style.Stroke.prototype.getWidth=function(){return this.width_};ol.style.Stroke.prototype.setColor=function(e){this.color_=e;this.checksum_=undefined};ol.style.Stroke.prototype.setLineCap=function(e){this.lineCap_=e;this.checksum_=undefined};ol.style.Stroke.prototype.setLineDash=function(e){this.lineDash_=e;this.checksum_=undefined};ol.style.Stroke.prototype.setLineJoin=function(e){this.lineJoin_=e;this.checksum_=undefined};ol.style.Stroke.prototype.setMiterLimit=function(e){this.miterLimit_=e;this.checksum_=undefined};ol.style.Stroke.prototype.setWidth=function(e){this.width_=e;this.checksum_=undefined};ol.style.Stroke.prototype.getChecksum=function(){if(this.checksum_===undefined){var e="s"+(this.color_?ol.color.asString(this.color_):"-")+","+(this.lineCap_!==undefined?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(this.lineJoin_!==undefined?this.lineJoin_:"-")+","+(this.miterLimit_!==undefined?this.miterLimit_.toString():"-")+","+(this.width_!==undefined?this.width_.toString():"-");var o=new goog.crypt.Md5;o.update(e);this.checksum_=goog.crypt.byteArrayToString(o.digest())}return this.checksum_};goog.provide("ol.style.Circle");goog.require("goog.asserts");goog.require("ol");goog.require("ol.color");goog.require("ol.colorlike");goog.require("ol.has");goog.require("ol.render.canvas");goog.require("ol.style.Fill");goog.require("ol.style.Image");goog.require("ol.style.ImageState");goog.require("ol.style.Stroke");ol.style.Circle=function(e){var o=e||{};this.checksums_=null;this.canvas_=null;this.hitDetectionCanvas_=null;this.fill_=o.fill!==undefined?o.fill:null;this.stroke_=o.stroke!==undefined?o.stroke:null;this.radius_=o.radius;this.origin_=[0,0];this.anchor_=null;this.size_=null;this.imageSize_=null;this.hitDetectionImageSize_=null;this.render_(o.atlasManager);var t=o.snapToPixel!==undefined?o.snapToPixel:true;goog.base(this,{opacity:1,rotateWithView:false,rotation:0,scale:1,snapToPixel:t})};goog.inherits(ol.style.Circle,ol.style.Image);ol.style.Circle.prototype.getAnchor=function(){return this.anchor_};ol.style.Circle.prototype.getFill=function(){return this.fill_};ol.style.Circle.prototype.getHitDetectionImage=function(e){return this.hitDetectionCanvas_};ol.style.Circle.prototype.getImage=function(e){return this.canvas_};ol.style.Circle.prototype.getImageState=function(){return ol.style.ImageState.LOADED};ol.style.Circle.prototype.getImageSize=function(){return this.imageSize_};ol.style.Circle.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_};ol.style.Circle.prototype.getOrigin=function(){return this.origin_};ol.style.Circle.prototype.getRadius=function(){return this.radius_};ol.style.Circle.prototype.getSize=function(){return this.size_};ol.style.Circle.prototype.getStroke=function(){return this.stroke_};ol.style.Circle.prototype.listenImageChange=ol.nullFunction;ol.style.Circle.prototype.load=ol.nullFunction;ol.style.Circle.prototype.unlistenImageChange=ol.nullFunction;ol.style.Circle.RenderOptions;ol.style.Circle.prototype.render_=function(e){var o;var t=null;var r;var i=0;if(this.stroke_){r=ol.color.asString(this.stroke_.getColor());i=this.stroke_.getWidth();if(i===undefined){i=ol.render.canvas.defaultLineWidth}t=this.stroke_.getLineDash();if(!ol.has.CANVAS_LINE_DASH){t=null}}var n=2*(this.radius_+i)+1;var a={strokeStyle:r,strokeWidth:i,size:n,lineDash:t};if(e===undefined){this.canvas_=document.createElement("CANVAS");this.canvas_.height=n;this.canvas_.width=n;n=this.canvas_.width;o=n;var l=this.canvas_.getContext("2d");this.draw_(a,l,0,0);this.createHitDetectionCanvas_(a)}else{n=Math.round(n);var s=!this.fill_;var g;if(s){g=this.drawHitDetectionCanvas_.bind(this,a)}var p=this.getChecksum();var u=e.add(p,n,n,this.draw_.bind(this,a),g);goog.asserts.assert(u,"circle radius is too large");this.canvas_=u.image;this.origin_=[u.offsetX,u.offsetY];o=u.image.width;if(s){this.hitDetectionCanvas_=u.hitImage;this.hitDetectionImageSize_=[u.hitImage.width,u.hitImage.height]}else{this.hitDetectionCanvas_=this.canvas_;this.hitDetectionImageSize_=[o,o]}}this.anchor_=[n/2,n/2];this.size_=[n,n];this.imageSize_=[o,o]};ol.style.Circle.prototype.draw_=function(e,o,t,r){o.setTransform(1,0,0,1,0,0);o.translate(t,r);o.beginPath();o.arc(e.size/2,e.size/2,this.radius_,0,2*Math.PI,true);if(this.fill_){o.fillStyle=ol.colorlike.asColorLike(this.fill_.getColor());o.fill()}if(this.stroke_){o.strokeStyle=e.strokeStyle;o.lineWidth=e.strokeWidth;if(e.lineDash){o.setLineDash(e.lineDash)}o.stroke()}o.closePath()};ol.style.Circle.prototype.createHitDetectionCanvas_=function(e){this.hitDetectionImageSize_=[e.size,e.size];if(this.fill_){this.hitDetectionCanvas_=this.canvas_;return}this.hitDetectionCanvas_=document.createElement("CANVAS");var o=this.hitDetectionCanvas_;o.height=e.size;o.width=e.size;var t=o.getContext("2d");this.drawHitDetectionCanvas_(e,t,0,0)};ol.style.Circle.prototype.drawHitDetectionCanvas_=function(e,o,t,r){o.setTransform(1,0,0,1,0,0);o.translate(t,r);o.beginPath();o.arc(e.size/2,e.size/2,this.radius_,0,2*Math.PI,true);o.fillStyle=ol.color.asString(ol.render.canvas.defaultFillStyle);o.fill();if(this.stroke_){o.strokeStyle=e.strokeStyle;o.lineWidth=e.strokeWidth;if(e.lineDash){o.setLineDash(e.lineDash)}o.stroke()}o.closePath()};ol.style.Circle.prototype.getChecksum=function(){var e=this.stroke_?this.stroke_.getChecksum():"-";var o=this.fill_?this.fill_.getChecksum():"-";var t=!this.checksums_||(e!=this.checksums_[1]||o!=this.checksums_[2]||this.radius_!=this.checksums_[3]);if(t){var r="c"+e+o+(this.radius_!==undefined?this.radius_.toString():"-");this.checksums_=[r,e,o,this.radius_]}return this.checksums_[0]};goog.provide("ol.style.GeometryFunction");goog.provide("ol.style.Style");goog.provide("ol.style.StyleFunction");goog.provide("ol.style.defaultGeometryFunction");goog.require("goog.asserts");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryType");goog.require("ol.style.Circle");goog.require("ol.style.Fill");goog.require("ol.style.Image");goog.require("ol.style.Stroke");ol.style.Style=function(e){var o=e||{};this.geometry_=null;this.geometryFunction_=ol.style.defaultGeometryFunction;if(o.geometry!==undefined){this.setGeometry(o.geometry)}this.fill_=o.fill!==undefined?o.fill:null;this.image_=o.image!==undefined?o.image:null;this.stroke_=o.stroke!==undefined?o.stroke:null;this.text_=o.text!==undefined?o.text:null;this.zIndex_=o.zIndex};ol.style.Style.prototype.getGeometry=function(){return this.geometry_};ol.style.Style.prototype.getGeometryFunction=function(){return this.geometryFunction_};ol.style.Style.prototype.getFill=function(){return this.fill_};ol.style.Style.prototype.getImage=function(){return this.image_};ol.style.Style.prototype.getStroke=function(){return this.stroke_};ol.style.Style.prototype.getText=function(){return this.text_};ol.style.Style.prototype.getZIndex=function(){return this.zIndex_};ol.style.Style.prototype.setGeometry=function(e){if(goog.isFunction(e)){this.geometryFunction_=e}else if(typeof e==="string"){this.geometryFunction_=function(o){var t=o.get(e);if(t){goog.asserts.assertInstanceof(t,ol.geom.Geometry,"feature geometry must be an ol.geom.Geometry instance")}return t}}else if(!e){this.geometryFunction_=ol.style.defaultGeometryFunction}else if(e!==undefined){goog.asserts.assertInstanceof(e,ol.geom.Geometry,"geometry must be an ol.geom.Geometry instance");this.geometryFunction_=function(){return e}}this.geometry_=e};ol.style.Style.prototype.setZIndex=function(e){this.zIndex_=e};ol.style.StyleFunction;ol.style.createStyleFunction=function(e){var o;if(goog.isFunction(e)){o=e}else{var t;if(goog.isArray(e)){t=e}else{goog.asserts.assertInstanceof(e,ol.style.Style,"obj geometry must be an ol.style.Style instance");t=[e]}o=function(){return t}}return o};ol.style.defaultStyle_=null;ol.style.defaultStyleFunction=function(e,o){if(!ol.style.defaultStyle_){var t=new ol.style.Fill({color:"rgba(255,255,255,0.4)"});var r=new ol.style.Stroke({color:"#3399CC",width:1.25});ol.style.defaultStyle_=[new ol.style.Style({image:new ol.style.Circle({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return ol.style.defaultStyle_};ol.style.createDefaultEditingStyles=function(){var e={};var o=[255,255,255,1];var t=[0,153,255,1];var r=3;e[ol.geom.GeometryType.POLYGON]=[new ol.style.Style({fill:new ol.style.Fill({color:[255,255,255,.5]})})];e[ol.geom.GeometryType.MULTI_POLYGON]=e[ol.geom.GeometryType.POLYGON];e[ol.geom.GeometryType.LINE_STRING]=[new ol.style.Style({stroke:new ol.style.Stroke({color:o,width:r+2})}),new ol.style.Style({stroke:new ol.style.Stroke({color:t,width:r})})];e[ol.geom.GeometryType.MULTI_LINE_STRING]=e[ol.geom.GeometryType.LINE_STRING];e[ol.geom.GeometryType.CIRCLE]=e[ol.geom.GeometryType.POLYGON].concat(e[ol.geom.GeometryType.LINE_STRING]);e[ol.geom.GeometryType.POINT]=[new ol.style.Style({image:new ol.style.Circle({radius:r*2,fill:new ol.style.Fill({color:t}),stroke:new ol.style.Stroke({color:o,width:r/2})}),zIndex:Infinity})];e[ol.geom.GeometryType.MULTI_POINT]=e[ol.geom.GeometryType.POINT];e[ol.geom.GeometryType.GEOMETRY_COLLECTION]=e[ol.geom.GeometryType.POLYGON].concat(e[ol.geom.GeometryType.LINE_STRING],e[ol.geom.GeometryType.POINT]);return e};ol.style.GeometryFunction;ol.style.defaultGeometryFunction=function(e){goog.asserts.assert(e,"feature must not be null");return e.getGeometry()};goog.provide("ol.layer.Vector");goog.require("goog.asserts");goog.require("ol");goog.require("ol.layer.Layer");goog.require("ol.object");goog.require("ol.style.Style");ol.layer.VectorProperty={RENDER_ORDER:"renderOrder"};ol.layer.Vector=function(e){var o=e?e:{};goog.asserts.assert(o.renderOrder===undefined||!o.renderOrder||goog.isFunction(o.renderOrder),"renderOrder must be a comparator function");var t=ol.object.assign({},o);delete t.style;delete t.renderBuffer;delete t.updateWhileAnimating;delete t.updateWhileInteracting;goog.base(this,t);this.renderBuffer_=o.renderBuffer!==undefined?o.renderBuffer:100;this.style_=null;this.styleFunction_=undefined;this.setStyle(o.style);this.updateWhileAnimating_=o.updateWhileAnimating!==undefined?o.updateWhileAnimating:false;this.updateWhileInteracting_=o.updateWhileInteracting!==undefined?o.updateWhileInteracting:false};goog.inherits(ol.layer.Vector,ol.layer.Layer);ol.layer.Vector.prototype.getRenderBuffer=function(){return this.renderBuffer_};ol.layer.Vector.prototype.getRenderOrder=function(){return this.get(ol.layer.VectorProperty.RENDER_ORDER)};ol.layer.Vector.prototype.getSource;ol.layer.Vector.prototype.getStyle=function(){return this.style_};ol.layer.Vector.prototype.getStyleFunction=function(){return this.styleFunction_};ol.layer.Vector.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_};ol.layer.Vector.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_};ol.layer.Vector.prototype.setRenderOrder=function(e){goog.asserts.assert(e===undefined||!e||goog.isFunction(e),"renderOrder must be a comparator function");this.set(ol.layer.VectorProperty.RENDER_ORDER,e)};ol.layer.Vector.prototype.setStyle=function(e){this.style_=e!==undefined?e:ol.style.defaultStyleFunction;this.styleFunction_=e===null?undefined:ol.style.createStyleFunction(this.style_);this.changed()};goog.provide("ol.layer.VectorTile");goog.require("ol.layer.Vector");goog.require("ol.object");ol.layer.VectorTileProperty={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};ol.layer.VectorTile=function(e){var o=e?e:{};var t=ol.object.assign({},o);delete t.preload;delete t.useInterimTilesOnError;goog.base(this,t);this.setPreload(o.preload?o.preload:0);this.setUseInterimTilesOnError(o.useInterimTilesOnError?o.useInterimTilesOnError:true)};goog.inherits(ol.layer.VectorTile,ol.layer.Vector);ol.layer.VectorTile.prototype.getPreload=function(){return this.get(ol.layer.VectorTileProperty.PRELOAD)};ol.layer.VectorTile.prototype.getUseInterimTilesOnError=function(){return this.get(ol.layer.VectorTileProperty.USE_INTERIM_TILES_ON_ERROR)};ol.layer.VectorTile.prototype.setPreload=function(e){this.set(ol.layer.TileProperty.PRELOAD,e)};ol.layer.VectorTile.prototype.setUseInterimTilesOnError=function(e){this.set(ol.layer.TileProperty.USE_INTERIM_TILES_ON_ERROR,e)};goog.provide("ol.render.canvas.Immediate");goog.require("goog.asserts");goog.require("goog.vec.Mat4");goog.require("ol.array");goog.require("ol.color");goog.require("ol.colorlike");goog.require("ol.extent");goog.require("ol.geom.flat.transform");goog.require("ol.has");goog.require("ol.render.VectorContext");goog.require("ol.render.canvas");goog.require("ol.vec.Mat4");ol.render.canvas.Immediate=function(e,o,t,r,i){this.callbacksByZIndex_={};this.context_=e;this.pixelRatio_=o;this.extent_=t;this.transform_=r;this.viewRotation_=i;this.contextFillState_=null;this.contextStrokeState_=null;this.contextTextState_=null;this.fillState_=null;this.strokeState_=null;this.image_=null;this.imageAnchorX_=0;this.imageAnchorY_=0;this.imageHeight_=0;this.imageOpacity_=0;this.imageOriginX_=0;this.imageOriginY_=0;this.imageRotateWithView_=false;this.imageRotation_=0;this.imageScale_=0;this.imageSnapToPixel_=false;this.imageWidth_=0;this.text_="";this.textOffsetX_=0;this.textOffsetY_=0;this.textRotation_=0;this.textScale_=0;this.textFillState_=null;this.textStrokeState_=null;this.textState_=null;this.pixelCoordinates_=[];this.tmpLocalTransform_=goog.vec.Mat4.createNumber()};ol.render.canvas.Immediate.prototype.drawImages_=function(e,o,t,r){if(!this.image_){return}goog.asserts.assert(o===0,"offset should be 0");goog.asserts.assert(t==e.length,"end should be equal to the length of flatCoordinates");var i=ol.geom.flat.transform.transform2D(e,o,t,2,this.transform_,this.pixelCoordinates_);var n=this.context_;var a=this.tmpLocalTransform_;var l=n.globalAlpha;if(this.imageOpacity_!=1){n.globalAlpha=l*this.imageOpacity_}var s=this.imageRotation_;if(this.imageRotateWithView_){s+=this.viewRotation_}var g,p;for(g=0,p=i.length;g<p;g+=2){var u=i[g]-this.imageAnchorX_;var c=i[g+1]-this.imageAnchorY_;if(this.imageSnapToPixel_){u=Math.round(u);c=Math.round(c)}if(s!==0||this.imageScale_!=1){var d=u+this.imageAnchorX_;var y=c+this.imageAnchorY_;ol.vec.Mat4.makeTransform2D(a,d,y,this.imageScale_,this.imageScale_,s,-d,-y);n.setTransform(goog.vec.Mat4.getElement(a,0,0),goog.vec.Mat4.getElement(a,1,0),goog.vec.Mat4.getElement(a,0,1),goog.vec.Mat4.getElement(a,1,1),goog.vec.Mat4.getElement(a,0,3),goog.vec.Mat4.getElement(a,1,3))}n.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,u,c,this.imageWidth_,this.imageHeight_)}if(s!==0||this.imageScale_!=1){n.setTransform(1,0,0,1,0,0)}if(this.imageOpacity_!=1){n.globalAlpha=l}};ol.render.canvas.Immediate.prototype.drawText_=function(e,o,t,r){if(!this.textState_||this.text_===""){return}if(this.textFillState_){this.setContextFillState_(this.textFillState_)}if(this.textStrokeState_){this.setContextStrokeState_(this.textStrokeState_)}this.setContextTextState_(this.textState_);goog.asserts.assert(o===0,"offset should be 0");goog.asserts.assert(t==e.length,"end should be equal to the length of flatCoordinates");var i=ol.geom.flat.transform.transform2D(e,o,t,r,this.transform_,this.pixelCoordinates_);var n=this.context_;for(;o<t;o+=r){var a=i[o]+this.textOffsetX_;var l=i[o+1]+this.textOffsetY_;if(this.textRotation_!==0||this.textScale_!=1){var s=ol.vec.Mat4.makeTransform2D(this.tmpLocalTransform_,a,l,this.textScale_,this.textScale_,this.textRotation_,-a,-l);n.setTransform(goog.vec.Mat4.getElement(s,0,0),goog.vec.Mat4.getElement(s,1,0),goog.vec.Mat4.getElement(s,0,1),goog.vec.Mat4.getElement(s,1,1),goog.vec.Mat4.getElement(s,0,3),goog.vec.Mat4.getElement(s,1,3))}if(this.textStrokeState_){n.strokeText(this.text_,a,l)}if(this.textFillState_){n.fillText(this.text_,a,l)}}if(this.textRotation_!==0||this.textScale_!=1){n.setTransform(1,0,0,1,0,0)}};ol.render.canvas.Immediate.prototype.moveToLineTo_=function(e,o,t,r,i){var n=this.context_;var a=ol.geom.flat.transform.transform2D(e,o,t,r,this.transform_,this.pixelCoordinates_);n.moveTo(a[0],a[1]);var l;for(l=2;l<a.length;l+=2){n.lineTo(a[l],a[l+1])}if(i){n.lineTo(a[0],a[1])}return t};ol.render.canvas.Immediate.prototype.drawRings_=function(e,o,t,r){var i=this.context_;var n,a;for(n=0,a=t.length;n<a;++n){o=this.moveToLineTo_(e,o,t[n],r,true);i.closePath()}return o};ol.render.canvas.Immediate.prototype.drawAsync=function(e,o){var t=e.toString();var r=this.callbacksByZIndex_[t];if(r!==undefined){r.push(o)}else{this.callbacksByZIndex_[t]=[o]}};ol.render.canvas.Immediate.prototype.drawCircleGeometry=function(e){if(!ol.extent.intersects(this.extent_,e.getExtent())){return}if(this.fillState_||this.strokeState_){if(this.fillState_){this.setContextFillState_(this.fillState_)}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_)}var o=ol.geom.transformSimpleGeometry2D(e,this.transform_,this.pixelCoordinates_);var t=o[2]-o[0];var r=o[3]-o[1];var i=Math.sqrt(t*t+r*r);var n=this.context_;n.beginPath();n.arc(o[0],o[1],i,0,2*Math.PI);if(this.fillState_){n.fill()}if(this.strokeState_){n.stroke()}}if(this.text_!==""){this.drawText_(e.getCenter(),0,2,2)}};ol.render.canvas.Immediate.prototype.drawFeature=function(e,o){var t=o.getGeometryFunction()(e);if(!t||!ol.extent.intersects(this.extent_,t.getExtent())){return}var r=o.getZIndex();if(r===undefined){r=0}this.drawAsync(r,function(e){e.setFillStrokeStyle(o.getFill(),o.getStroke());e.setImageStyle(o.getImage());e.setTextStyle(o.getText());var r=ol.render.canvas.Immediate.GEOMETRY_RENDERERS_[t.getType()];goog.asserts.assert(r!==undefined,"renderGeometry should be defined");r.call(e,t,null)})};ol.render.canvas.Immediate.prototype.drawGeometryCollectionGeometry=function(e,o){var t=e.getGeometriesArray();var r,i;for(r=0,i=t.length;r<i;++r){var n=t[r];var a=ol.render.canvas.Immediate.GEOMETRY_RENDERERS_[n.getType()];goog.asserts.assert(a!==undefined,"geometryRenderer should be defined");a.call(this,n,o)}};ol.render.canvas.Immediate.prototype.drawPointGeometry=function(e){var o=e.getFlatCoordinates();var t=e.getStride();if(this.image_){this.drawImages_(o,0,o.length,t)}if(this.text_!==""){this.drawText_(o,0,o.length,t)}};ol.render.canvas.Immediate.prototype.drawMultiPointGeometry=function(e){var o=e.getFlatCoordinates();var t=e.getStride();if(this.image_){this.drawImages_(o,0,o.length,t)}if(this.text_!==""){this.drawText_(o,0,o.length,t)}};ol.render.canvas.Immediate.prototype.drawLineStringGeometry=function(e){if(!ol.extent.intersects(this.extent_,e.getExtent())){return}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var o=this.context_;var t=e.getFlatCoordinates();o.beginPath();this.moveToLineTo_(t,0,t.length,e.getStride(),false);o.stroke()}if(this.text_!==""){var r=e.getFlatMidpoint();this.drawText_(r,0,2,2)}};ol.render.canvas.Immediate.prototype.drawMultiLineStringGeometry=function(e){var o=e.getExtent();if(!ol.extent.intersects(this.extent_,o)){return}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var t=this.context_;var r=e.getFlatCoordinates();var i=0;var n=e.getEnds();var a=e.getStride();t.beginPath();var l,s;for(l=0,s=n.length;l<s;++l){i=this.moveToLineTo_(r,i,n[l],a,false)}t.stroke()}if(this.text_!==""){var g=e.getFlatMidpoints();this.drawText_(g,0,g.length,2)}};ol.render.canvas.Immediate.prototype.drawPolygonGeometry=function(e){if(!ol.extent.intersects(this.extent_,e.getExtent())){return}if(this.strokeState_||this.fillState_){if(this.fillState_){this.setContextFillState_(this.fillState_)}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_)}var o=this.context_;o.beginPath();this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride());if(this.fillState_){o.fill()}if(this.strokeState_){o.stroke()}}if(this.text_!==""){var t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}};ol.render.canvas.Immediate.prototype.drawMultiPolygonGeometry=function(e){if(!ol.extent.intersects(this.extent_,e.getExtent())){return}if(this.strokeState_||this.fillState_){if(this.fillState_){this.setContextFillState_(this.fillState_)}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_)}var o=this.context_;var t=e.getOrientedFlatCoordinates();var r=0;var i=e.getEndss();var n=e.getStride();var a,l;for(a=0,l=i.length;a<l;++a){var s=i[a];o.beginPath();r=this.drawRings_(t,r,s,n);if(this.fillState_){o.fill()}if(this.strokeState_){o.stroke()}}}if(this.text_!==""){var g=e.getFlatInteriorPoints();this.drawText_(g,0,g.length,2)}};ol.render.canvas.Immediate.prototype.drawText=goog.abstractMethod;ol.render.canvas.Immediate.prototype.flush=function(){var e=Object.keys(this.callbacksByZIndex_).map(Number);e.sort(ol.array.numberSafeCompareFunction);var o,t,r,i,n;for(o=0,t=e.length;o<t;++o){r=this.callbacksByZIndex_[e[o].toString()];for(i=0,n=r.length;i<n;++i){r[i](this)}}};ol.render.canvas.Immediate.prototype.setContextFillState_=function(e){var o=this.context_;var t=this.contextFillState_;if(!t){o.fillStyle=e.fillStyle;this.contextFillState_={fillStyle:e.fillStyle}}else{if(t.fillStyle!=e.fillStyle){t.fillStyle=o.fillStyle=e.fillStyle}}};ol.render.canvas.Immediate.prototype.setContextStrokeState_=function(e){var o=this.context_;var t=this.contextStrokeState_;if(!t){o.lineCap=e.lineCap;if(ol.has.CANVAS_LINE_DASH){o.setLineDash(e.lineDash)}o.lineJoin=e.lineJoin;o.lineWidth=e.lineWidth;o.miterLimit=e.miterLimit;o.strokeStyle=e.strokeStyle;this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle}}else{if(t.lineCap!=e.lineCap){t.lineCap=o.lineCap=e.lineCap}if(ol.has.CANVAS_LINE_DASH){if(!ol.array.equals(t.lineDash,e.lineDash)){o.setLineDash(t.lineDash=e.lineDash)}}if(t.lineJoin!=e.lineJoin){t.lineJoin=o.lineJoin=e.lineJoin}if(t.lineWidth!=e.lineWidth){t.lineWidth=o.lineWidth=e.lineWidth}if(t.miterLimit!=e.miterLimit){t.miterLimit=o.miterLimit=e.miterLimit}if(t.strokeStyle!=e.strokeStyle){t.strokeStyle=o.strokeStyle=e.strokeStyle}}};ol.render.canvas.Immediate.prototype.setContextTextState_=function(e){var o=this.context_;var t=this.contextTextState_;if(!t){o.font=e.font;o.textAlign=e.textAlign;o.textBaseline=e.textBaseline;this.contextTextState_={font:e.font,textAlign:e.textAlign,textBaseline:e.textBaseline}}else{if(t.font!=e.font){t.font=o.font=e.font}if(t.textAlign!=e.textAlign){t.textAlign=o.textAlign=e.textAlign}if(t.textBaseline!=e.textBaseline){t.textBaseline=o.textBaseline=e.textBaseline}}};ol.render.canvas.Immediate.prototype.setFillStrokeStyle=function(e,o){if(!e){this.fillState_=null}else{var t=e.getColor();this.fillState_={fillStyle:ol.colorlike.asColorLike(t?t:ol.render.canvas.defaultFillStyle)}}if(!o){this.strokeState_=null}else{var r=o.getColor();var i=o.getLineCap();var n=o.getLineDash();var a=o.getLineJoin();var l=o.getWidth();var s=o.getMiterLimit();this.strokeState_={lineCap:i!==undefined?i:ol.render.canvas.defaultLineCap,lineDash:n?n:ol.render.canvas.defaultLineDash,lineJoin:a!==undefined?a:ol.render.canvas.defaultLineJoin,lineWidth:this.pixelRatio_*(l!==undefined?l:ol.render.canvas.defaultLineWidth),miterLimit:s!==undefined?s:ol.render.canvas.defaultMiterLimit,strokeStyle:ol.color.asString(r?r:ol.render.canvas.defaultStrokeStyle)}}};ol.render.canvas.Immediate.prototype.setImageStyle=function(e){if(!e){this.image_=null}else{var o=e.getAnchor();var t=e.getImage(1);var r=e.getOrigin();var i=e.getSize();goog.asserts.assert(o,"imageAnchor must be truthy");goog.asserts.assert(t,"imageImage must be truthy");goog.asserts.assert(r,"imageOrigin must be truthy");goog.asserts.assert(i,"imageSize must be truthy");this.imageAnchorX_=o[0];this.imageAnchorY_=o[1];this.imageHeight_=i[1];this.image_=t;this.imageOpacity_=e.getOpacity();this.imageOriginX_=r[0];this.imageOriginY_=r[1];this.imageRotateWithView_=e.getRotateWithView();this.imageRotation_=e.getRotation();this.imageScale_=e.getScale();this.imageSnapToPixel_=e.getSnapToPixel();this.imageWidth_=i[0]}};ol.render.canvas.Immediate.prototype.setTextStyle=function(e){if(!e){this.text_=""}else{var o=e.getFill();if(!o){this.textFillState_=null}else{var t=o.getColor();this.textFillState_={fillStyle:ol.colorlike.asColorLike(t?t:ol.render.canvas.defaultFillStyle)}}var r=e.getStroke();if(!r){this.textStrokeState_=null}else{var i=r.getColor();var n=r.getLineCap();var a=r.getLineDash();var l=r.getLineJoin();var s=r.getWidth();var g=r.getMiterLimit();this.textStrokeState_={lineCap:n!==undefined?n:ol.render.canvas.defaultLineCap,lineDash:a?a:ol.render.canvas.defaultLineDash,lineJoin:l!==undefined?l:ol.render.canvas.defaultLineJoin,lineWidth:s!==undefined?s:ol.render.canvas.defaultLineWidth,miterLimit:g!==undefined?g:ol.render.canvas.defaultMiterLimit,strokeStyle:ol.color.asString(i?i:ol.render.canvas.defaultStrokeStyle)}}var p=e.getFont();var u=e.getOffsetX();var c=e.getOffsetY();var d=e.getRotation();var y=e.getScale();var h=e.getText();var m=e.getTextAlign();var f=e.getTextBaseline();this.textState_={font:p!==undefined?p:ol.render.canvas.defaultFont,textAlign:m!==undefined?m:ol.render.canvas.defaultTextAlign,textBaseline:f!==undefined?f:ol.render.canvas.defaultTextBaseline};this.text_=h!==undefined?h:"";this.textOffsetX_=u!==undefined?this.pixelRatio_*u:0;this.textOffsetY_=c!==undefined?this.pixelRatio_*c:0;this.textRotation_=d!==undefined?d:0;this.textScale_=this.pixelRatio_*(y!==undefined?y:1)}};ol.render.canvas.Immediate.GEOMETRY_RENDERERS_={Point:ol.render.canvas.Immediate.prototype.drawPointGeometry,LineString:ol.render.canvas.Immediate.prototype.drawLineStringGeometry,Polygon:ol.render.canvas.Immediate.prototype.drawPolygonGeometry,MultiPoint:ol.render.canvas.Immediate.prototype.drawMultiPointGeometry,MultiLineString:ol.render.canvas.Immediate.prototype.drawMultiLineStringGeometry,MultiPolygon:ol.render.canvas.Immediate.prototype.drawMultiPolygonGeometry,GeometryCollection:ol.render.canvas.Immediate.prototype.drawGeometryCollectionGeometry,Circle:ol.render.canvas.Immediate.prototype.drawCircleGeometry};goog.provide("ol.renderer.canvas.Layer");goog.require("goog.asserts");goog.require("goog.vec.Mat4");goog.require("ol.extent");goog.require("ol.layer.Layer");goog.require("ol.render.Event");goog.require("ol.render.EventType");goog.require("ol.render.canvas");goog.require("ol.render.canvas.Immediate");goog.require("ol.renderer.Layer");goog.require("ol.vec.Mat4");ol.renderer.canvas.Layer=function(e){goog.base(this,e);this.transform_=goog.vec.Mat4.createNumber()};goog.inherits(ol.renderer.canvas.Layer,ol.renderer.Layer);ol.renderer.canvas.Layer.prototype.composeFrame=function(e,o,t){this.dispatchPreComposeEvent(t,e);var r=this.getImage();if(r){var i=o.extent;var n=i!==undefined;if(n){goog.asserts.assert(i!==undefined,"layerState extent is defined");var a=e.pixelRatio;var l=e.size[0]*a;var s=e.size[1]*a;var g=e.viewState.rotation;var p=ol.extent.getTopLeft(i);var u=ol.extent.getTopRight(i);var c=ol.extent.getBottomRight(i);var d=ol.extent.getBottomLeft(i);ol.vec.Mat4.multVec2(e.coordinateToPixelMatrix,p,p);ol.vec.Mat4.multVec2(e.coordinateToPixelMatrix,u,u);ol.vec.Mat4.multVec2(e.coordinateToPixelMatrix,c,c);ol.vec.Mat4.multVec2(e.coordinateToPixelMatrix,d,d);t.save();ol.render.canvas.rotateAtOffset(t,-g,l/2,s/2);t.beginPath();t.moveTo(p[0]*a,p[1]*a);t.lineTo(u[0]*a,u[1]*a);t.lineTo(c[0]*a,c[1]*a);t.lineTo(d[0]*a,d[1]*a);t.clip();ol.render.canvas.rotateAtOffset(t,g,l/2,s/2)}var y=this.getImageTransform();var h=t.globalAlpha;t.globalAlpha=o.opacity;var m=goog.vec.Mat4.getElement(y,0,3);var f=goog.vec.Mat4.getElement(y,1,3);var v=r.width*goog.vec.Mat4.getElement(y,0,0);var _=r.height*goog.vec.Mat4.getElement(y,1,1);t.drawImage(r,0,0,+r.width,+r.height,Math.round(m),Math.round(f),Math.round(v),Math.round(_));t.globalAlpha=h;if(n){t.restore()}}this.dispatchPostComposeEvent(t,e)};ol.renderer.canvas.Layer.prototype.dispatchComposeEvent_=function(e,o,t,r){var i=this.getLayer();if(i.hasListener(e)){var n=t.size[0]*t.pixelRatio;var a=t.size[1]*t.pixelRatio;var l=t.viewState.rotation;ol.render.canvas.rotateAtOffset(o,-l,n/2,a/2);var s=r!==undefined?r:this.getTransform(t,0);var g=new ol.render.canvas.Immediate(o,t.pixelRatio,t.extent,s,t.viewState.rotation);var p=new ol.render.Event(e,i,g,t,o,null);i.dispatchEvent(p);g.flush();ol.render.canvas.rotateAtOffset(o,l,n/2,a/2)}};ol.renderer.canvas.Layer.prototype.dispatchPostComposeEvent=function(e,o,t){this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,e,o,t)}
;ol.renderer.canvas.Layer.prototype.dispatchPreComposeEvent=function(e,o,t){this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,e,o,t)};ol.renderer.canvas.Layer.prototype.dispatchRenderEvent=function(e,o,t){this.dispatchComposeEvent_(ol.render.EventType.RENDER,e,o,t)};ol.renderer.canvas.Layer.prototype.getImage=goog.abstractMethod;ol.renderer.canvas.Layer.prototype.getImageTransform=goog.abstractMethod;ol.renderer.canvas.Layer.prototype.getTransform=function(e,o){var t=e.viewState;var r=e.pixelRatio;return ol.vec.Mat4.makeTransform2D(this.transform_,r*e.size[0]/2,r*e.size[1]/2,r/t.resolution,-r/t.resolution,-t.rotation,-t.center[0]+o,-t.center[1])};ol.renderer.canvas.Layer.prototype.prepareFrame=goog.abstractMethod;ol.renderer.canvas.Layer.prototype.getPixelOnCanvas=function(e,o){var t=[0,0];ol.vec.Mat4.multVec2(o,e,t);return t};goog.provide("ol.render.IReplayGroup");goog.require("ol.render.VectorContext");ol.render.ReplayType={IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};ol.render.REPLAY_ORDER=[ol.render.ReplayType.POLYGON,ol.render.ReplayType.LINE_STRING,ol.render.ReplayType.IMAGE,ol.render.ReplayType.TEXT];ol.render.IReplayGroup=function(){};ol.render.IReplayGroup.prototype.getReplay=function(e,o){};ol.render.IReplayGroup.prototype.isEmpty=function(){};goog.provide("ol.render.canvas.ImageReplay");goog.provide("ol.render.canvas.LineStringReplay");goog.provide("ol.render.canvas.PolygonReplay");goog.provide("ol.render.canvas.Replay");goog.provide("ol.render.canvas.ReplayGroup");goog.provide("ol.render.canvas.TextReplay");goog.require("goog.asserts");goog.require("goog.vec.Mat4");goog.require("ol");goog.require("ol.array");goog.require("ol.color");goog.require("ol.colorlike");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.extent.Relationship");goog.require("ol.geom.flat.simplify");goog.require("ol.geom.flat.transform");goog.require("ol.has");goog.require("ol.object");goog.require("ol.render.IReplayGroup");goog.require("ol.render.VectorContext");goog.require("ol.render.canvas");goog.require("ol.vec.Mat4");ol.render.canvas.Instruction={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,DRAW_IMAGE:4,DRAW_TEXT:5,END_GEOMETRY:6,FILL:7,MOVE_TO_LINE_TO:8,SET_FILL_STYLE:9,SET_STROKE_STYLE:10,SET_TEXT_STYLE:11,STROKE:12};ol.render.canvas.Replay=function(e,o,t){goog.base(this);this.tolerance=e;this.maxExtent=o;this.bufferedMaxExtent_=null;this.maxLineWidth=0;this.resolution=t;this.beginGeometryInstruction1_=null;this.beginGeometryInstruction2_=null;this.instructions=[];this.coordinates=[];this.renderedTransform_=goog.vec.Mat4.createNumber();this.hitDetectionInstructions=[];this.pixelCoordinates_=[];this.tmpLocalTransform_=goog.vec.Mat4.createNumber();this.tmpLocalTransformInv_=goog.vec.Mat4.createNumber()};goog.inherits(ol.render.canvas.Replay,ol.render.VectorContext);ol.render.canvas.Replay.prototype.appendFlatCoordinates=function(e,o,t,r,i){var n=this.coordinates.length;var a=this.getBufferedMaxExtent();var l=[e[o],e[o+1]];var s=[NaN,NaN];var g=true;var p,u,c;for(p=o+r;p<t;p+=r){s[0]=e[p];s[1]=e[p+1];c=ol.extent.coordinateRelationship(a,s);if(c!==u){if(g){this.coordinates[n++]=l[0];this.coordinates[n++]=l[1]}this.coordinates[n++]=s[0];this.coordinates[n++]=s[1];g=false}else if(c===ol.extent.Relationship.INTERSECTING){this.coordinates[n++]=s[0];this.coordinates[n++]=s[1];g=false}else{g=true}l[0]=s[0];l[1]=s[1];u=c}if(p===o+r){this.coordinates[n++]=l[0];this.coordinates[n++]=l[1]}if(i){this.coordinates[n++]=e[o];this.coordinates[n++]=e[o+1]}return n};ol.render.canvas.Replay.prototype.beginGeometry=function(e,o){this.beginGeometryInstruction1_=[ol.render.canvas.Instruction.BEGIN_GEOMETRY,o,0];this.instructions.push(this.beginGeometryInstruction1_);this.beginGeometryInstruction2_=[ol.render.canvas.Instruction.BEGIN_GEOMETRY,o,0];this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)};ol.render.canvas.Replay.prototype.replay_=function(e,o,t,r,i,n,a,l){var s;if(ol.vec.Mat4.equals2D(t,this.renderedTransform_)){s=this.pixelCoordinates_}else{s=ol.geom.flat.transform.transform2D(this.coordinates,0,this.coordinates.length,2,t,this.pixelCoordinates_);goog.vec.Mat4.setFromArray(this.renderedTransform_,t);goog.asserts.assert(s===this.pixelCoordinates_,"pixelCoordinates should be the same as this.pixelCoordinates_")}var g=!ol.object.isEmpty(i);var p=0;var u=n.length;var c=0;var d;var y=this.tmpLocalTransform_;var h=this.tmpLocalTransformInv_;var m,f,v,_;while(p<u){var E=n[p];var S=E[0];var T,P,x,b,M,L;switch(S){case ol.render.canvas.Instruction.BEGIN_GEOMETRY:T=E[1];if(g&&i[goog.getUid(T).toString()]||!T.getGeometry()){p=E[2]}else if(l!==undefined&&!ol.extent.intersects(l,T.getGeometry().getExtent())){p=E[2]}else{++p}break;case ol.render.canvas.Instruction.BEGIN_PATH:e.beginPath();++p;break;case ol.render.canvas.Instruction.CIRCLE:goog.asserts.assert(goog.isNumber(E[1]),"second instruction should be a number");c=E[1];var R=s[c];var C=s[c+1];var A=s[c+2];var I=s[c+3];var O=A-R;var N=I-C;var w=Math.sqrt(O*O+N*N);e.arc(R,C,w,0,2*Math.PI,true);++p;break;case ol.render.canvas.Instruction.CLOSE_PATH:e.closePath();++p;break;case ol.render.canvas.Instruction.DRAW_IMAGE:goog.asserts.assert(goog.isNumber(E[1]),"second instruction should be a number");c=E[1];goog.asserts.assert(goog.isNumber(E[2]),"third instruction should be a number");d=E[2];var D=E[3];var F=E[4]*o;var G=E[5]*o;var U=E[6];var q=E[7];var k=E[8];var V=E[9];var B=E[10];var j=E[11];var W=E[12];var K=E[13];var z=E[14];if(B){j+=r}for(;c<d;c+=2){M=s[c]-F;L=s[c+1]-G;if(K){M=Math.round(M);L=Math.round(L)}if(W!=1||j!==0){var H=M+F;var X=L+G;ol.vec.Mat4.makeTransform2D(y,H,X,W,W,j,-H,-X);e.transform(goog.vec.Mat4.getElement(y,0,0),goog.vec.Mat4.getElement(y,1,0),goog.vec.Mat4.getElement(y,0,1),goog.vec.Mat4.getElement(y,1,1),goog.vec.Mat4.getElement(y,0,3),goog.vec.Mat4.getElement(y,1,3))}var Y=e.globalAlpha;if(q!=1){e.globalAlpha=Y*q}var Z=z+k>D.width?D.width-k:z;var J=U+V>D.height?D.height-V:U;e.drawImage(D,k,V,Z,J,M,L,Z*o,J*o);if(q!=1){e.globalAlpha=Y}if(W!=1||j!==0){goog.vec.Mat4.invert(y,h);e.transform(goog.vec.Mat4.getElement(h,0,0),goog.vec.Mat4.getElement(h,1,0),goog.vec.Mat4.getElement(h,0,1),goog.vec.Mat4.getElement(h,1,1),goog.vec.Mat4.getElement(h,0,3),goog.vec.Mat4.getElement(h,1,3))}}++p;break;case ol.render.canvas.Instruction.DRAW_TEXT:goog.asserts.assert(goog.isNumber(E[1]),"2nd instruction should be a number");c=E[1];goog.asserts.assert(goog.isNumber(E[2]),"3rd instruction should be a number");d=E[2];goog.asserts.assert(typeof E[3]==="string","4th instruction should be a string");b=E[3];goog.asserts.assert(goog.isNumber(E[4]),"5th instruction should be a number");var Q=E[4]*o;goog.asserts.assert(goog.isNumber(E[5]),"6th instruction should be a number");var $=E[5]*o;goog.asserts.assert(goog.isNumber(E[6]),"7th instruction should be a number");j=E[6];goog.asserts.assert(goog.isNumber(E[7]),"8th instruction should be a number");W=E[7]*o;goog.asserts.assert(typeof E[8]==="boolean","9th instruction should be a boolean");P=E[8];goog.asserts.assert(typeof E[9]==="boolean","10th instruction should be a boolean");x=E[9];for(;c<d;c+=2){M=s[c]+Q;L=s[c+1]+$;if(W!=1||j!==0){ol.vec.Mat4.makeTransform2D(y,M,L,W,W,j,-M,-L);e.transform(goog.vec.Mat4.getElement(y,0,0),goog.vec.Mat4.getElement(y,1,0),goog.vec.Mat4.getElement(y,0,1),goog.vec.Mat4.getElement(y,1,1),goog.vec.Mat4.getElement(y,0,3),goog.vec.Mat4.getElement(y,1,3))}var ee=b.split("\n");var oe=ee.length;var te,re;if(oe>1){te=Math.round(e.measureText("M").width*1.5);re=L-(oe-1)/2*te}else{te=0;re=L}for(var ie=0;ie<oe;ie++){var ne=ee[ie];if(x){e.strokeText(ne,M,re)}if(P){e.fillText(ne,M,re)}re=re+te}if(W!=1||j!==0){goog.vec.Mat4.invert(y,h);e.transform(goog.vec.Mat4.getElement(h,0,0),goog.vec.Mat4.getElement(h,1,0),goog.vec.Mat4.getElement(h,0,1),goog.vec.Mat4.getElement(h,1,1),goog.vec.Mat4.getElement(h,0,3),goog.vec.Mat4.getElement(h,1,3))}}++p;break;case ol.render.canvas.Instruction.END_GEOMETRY:if(a!==undefined){T=E[1];var ae=a(T);if(ae){return ae}}++p;break;case ol.render.canvas.Instruction.FILL:e.fill();++p;break;case ol.render.canvas.Instruction.MOVE_TO_LINE_TO:goog.asserts.assert(goog.isNumber(E[1]),"2nd instruction should be a number");c=E[1];goog.asserts.assert(goog.isNumber(E[2]),"3rd instruction should be a number");d=E[2];M=s[c];L=s[c+1];v=M+.5|0;_=L+.5|0;if(v!==m||_!==f){e.moveTo(M,L);m=v;f=_}for(c+=2;c<d;c+=2){M=s[c];L=s[c+1];v=M+.5|0;_=L+.5|0;if(v!==m||_!==f){e.lineTo(M,L);m=v;f=_}}++p;break;case ol.render.canvas.Instruction.SET_FILL_STYLE:goog.asserts.assert(ol.colorlike.isColorLike(E[1]),"2nd instruction should be a string, "+"CanvasPattern, or CanvasGradient");e.fillStyle=E[1];++p;break;case ol.render.canvas.Instruction.SET_STROKE_STYLE:goog.asserts.assert(typeof E[1]==="string","2nd instruction should be a string");goog.asserts.assert(goog.isNumber(E[2]),"3rd instruction should be a number");goog.asserts.assert(typeof E[3]==="string","4rd instruction should be a string");goog.asserts.assert(typeof E[4]==="string","5th instruction should be a string");goog.asserts.assert(goog.isNumber(E[5]),"6th instruction should be a number");goog.asserts.assert(E[6],"7th instruction should not be null");var le=E[7]!==undefined?E[7]:true;var se=E[2];e.strokeStyle=E[1];e.lineWidth=le?se*o:se;e.lineCap=E[3];e.lineJoin=E[4];e.miterLimit=E[5];if(ol.has.CANVAS_LINE_DASH){e.setLineDash(E[6])}m=NaN;f=NaN;++p;break;case ol.render.canvas.Instruction.SET_TEXT_STYLE:goog.asserts.assert(typeof E[1]==="string","2nd instruction should be a string");goog.asserts.assert(typeof E[2]==="string","3rd instruction should be a string");goog.asserts.assert(typeof E[3]==="string","4th instruction should be a string");e.font=E[1];e.textAlign=E[2];e.textBaseline=E[3];++p;break;case ol.render.canvas.Instruction.STROKE:e.stroke();++p;break;default:goog.asserts.fail("Unknown canvas render instruction");++p;break}}goog.asserts.assert(p==n.length,"all instructions should be consumed");return undefined};ol.render.canvas.Replay.prototype.replay=function(e,o,t,r,i){var n=this.instructions;this.replay_(e,o,t,r,i,n,undefined)};ol.render.canvas.Replay.prototype.replayHitDetection=function(e,o,t,r,i,n){var a=this.hitDetectionInstructions;return this.replay_(e,1,o,t,r,a,i,n)};ol.render.canvas.Replay.prototype.reverseHitDetectionInstructions_=function(){var e=this.hitDetectionInstructions;e.reverse();var o;var t=e.length;var r;var i;var n=-1;for(o=0;o<t;++o){r=e[o];i=r[0];if(i==ol.render.canvas.Instruction.END_GEOMETRY){goog.asserts.assert(n==-1,"begin should be -1");n=o}else if(i==ol.render.canvas.Instruction.BEGIN_GEOMETRY){r[2]=o;goog.asserts.assert(n>=0,"begin should be larger than or equal to 0");ol.array.reverseSubArray(this.hitDetectionInstructions,n,o);n=-1}}};ol.render.canvas.Replay.prototype.endGeometry=function(e,o){goog.asserts.assert(this.beginGeometryInstruction1_,"this.beginGeometryInstruction1_ should not be null");this.beginGeometryInstruction1_[2]=this.instructions.length;this.beginGeometryInstruction1_=null;goog.asserts.assert(this.beginGeometryInstruction2_,"this.beginGeometryInstruction2_ should not be null");this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length;this.beginGeometryInstruction2_=null;var t=[ol.render.canvas.Instruction.END_GEOMETRY,o];this.instructions.push(t);this.hitDetectionInstructions.push(t)};ol.render.canvas.Replay.prototype.finish=ol.nullFunction;ol.render.canvas.Replay.prototype.getBufferedMaxExtent=function(){return this.maxExtent};ol.render.canvas.ImageReplay=function(e,o,t){goog.base(this,e,o,t);this.hitDetectionImage_=null;this.image_=null;this.anchorX_=undefined;this.anchorY_=undefined;this.height_=undefined;this.opacity_=undefined;this.originX_=undefined;this.originY_=undefined;this.rotateWithView_=undefined;this.rotation_=undefined;this.scale_=undefined;this.snapToPixel_=undefined;this.width_=undefined};goog.inherits(ol.render.canvas.ImageReplay,ol.render.canvas.Replay);ol.render.canvas.ImageReplay.prototype.drawCoordinates_=function(e,o,t,r){return this.appendFlatCoordinates(e,o,t,r,false)};ol.render.canvas.ImageReplay.prototype.drawPointGeometry=function(e,o){if(!this.image_){return}goog.asserts.assert(this.anchorX_!==undefined,"this.anchorX_ should be defined");goog.asserts.assert(this.anchorY_!==undefined,"this.anchorY_ should be defined");goog.asserts.assert(this.height_!==undefined,"this.height_ should be defined");goog.asserts.assert(this.opacity_!==undefined,"this.opacity_ should be defined");goog.asserts.assert(this.originX_!==undefined,"this.originX_ should be defined");goog.asserts.assert(this.originY_!==undefined,"this.originY_ should be defined");goog.asserts.assert(this.rotateWithView_!==undefined,"this.rotateWithView_ should be defined");goog.asserts.assert(this.rotation_!==undefined,"this.rotation_ should be defined");goog.asserts.assert(this.scale_!==undefined,"this.scale_ should be defined");goog.asserts.assert(this.width_!==undefined,"this.width_ should be defined");this.beginGeometry(e,o);var t=e.getFlatCoordinates();var r=e.getStride();var i=this.coordinates.length;var n=this.drawCoordinates_(t,0,t.length,r);this.instructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,i,n,this.image_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,i,n,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]);this.endGeometry(e,o)};ol.render.canvas.ImageReplay.prototype.drawMultiPointGeometry=function(e,o){if(!this.image_){return}goog.asserts.assert(this.anchorX_!==undefined,"this.anchorX_ should be defined");goog.asserts.assert(this.anchorY_!==undefined,"this.anchorY_ should be defined");goog.asserts.assert(this.height_!==undefined,"this.height_ should be defined");goog.asserts.assert(this.opacity_!==undefined,"this.opacity_ should be defined");goog.asserts.assert(this.originX_!==undefined,"this.originX_ should be defined");goog.asserts.assert(this.originY_!==undefined,"this.originY_ should be defined");goog.asserts.assert(this.rotateWithView_!==undefined,"this.rotateWithView_ should be defined");goog.asserts.assert(this.rotation_!==undefined,"this.rotation_ should be defined");goog.asserts.assert(this.scale_!==undefined,"this.scale_ should be defined");goog.asserts.assert(this.width_!==undefined,"this.width_ should be defined");this.beginGeometry(e,o);var t=e.getFlatCoordinates();var r=e.getStride();var i=this.coordinates.length;var n=this.drawCoordinates_(t,0,t.length,r);this.instructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,i,n,this.image_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,i,n,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]);this.endGeometry(e,o)};ol.render.canvas.ImageReplay.prototype.finish=function(){this.reverseHitDetectionInstructions_();this.anchorX_=undefined;this.anchorY_=undefined;this.hitDetectionImage_=null;this.image_=null;this.height_=undefined;this.scale_=undefined;this.opacity_=undefined;this.originX_=undefined;this.originY_=undefined;this.rotateWithView_=undefined;this.rotation_=undefined;this.snapToPixel_=undefined;this.width_=undefined};ol.render.canvas.ImageReplay.prototype.setImageStyle=function(e){goog.asserts.assert(e,"imageStyle should not be null");var o=e.getAnchor();goog.asserts.assert(o,"anchor should not be null");var t=e.getSize();goog.asserts.assert(t,"size should not be null");var r=e.getHitDetectionImage(1);goog.asserts.assert(r,"hitDetectionImage should not be null");var i=e.getImage(1);goog.asserts.assert(i,"image should not be null");var n=e.getOrigin();goog.asserts.assert(n,"origin should not be null");this.anchorX_=o[0];this.anchorY_=o[1];this.hitDetectionImage_=r;this.image_=i;this.height_=t[1];this.opacity_=e.getOpacity();this.originX_=n[0];this.originY_=n[1];this.rotateWithView_=e.getRotateWithView();this.rotation_=e.getRotation();this.scale_=e.getScale();this.snapToPixel_=e.getSnapToPixel();this.width_=t[0]};ol.render.canvas.LineStringReplay=function(e,o,t){goog.base(this,e,o,t);this.state_={currentStrokeStyle:undefined,currentLineCap:undefined,currentLineDash:null,currentLineJoin:undefined,currentLineWidth:undefined,currentMiterLimit:undefined,lastStroke:0,strokeStyle:undefined,lineCap:undefined,lineDash:null,lineJoin:undefined,lineWidth:undefined,miterLimit:undefined}};goog.inherits(ol.render.canvas.LineStringReplay,ol.render.canvas.Replay);ol.render.canvas.LineStringReplay.prototype.drawFlatCoordinates_=function(e,o,t,r){var i=this.coordinates.length;var n=this.appendFlatCoordinates(e,o,t,r,false);var a=[ol.render.canvas.Instruction.MOVE_TO_LINE_TO,i,n];this.instructions.push(a);this.hitDetectionInstructions.push(a);return t};ol.render.canvas.LineStringReplay.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_){this.bufferedMaxExtent_=ol.extent.clone(this.maxExtent);if(this.maxLineWidth>0){var e=this.resolution*(this.maxLineWidth+1)/2;ol.extent.buffer(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}}return this.bufferedMaxExtent_};ol.render.canvas.LineStringReplay.prototype.setStrokeStyle_=function(){var e=this.state_;var o=e.strokeStyle;var t=e.lineCap;var r=e.lineDash;var i=e.lineJoin;var n=e.lineWidth;var a=e.miterLimit;goog.asserts.assert(o!==undefined,"strokeStyle should be defined");goog.asserts.assert(t!==undefined,"lineCap should be defined");goog.asserts.assert(r,"lineDash should not be null");goog.asserts.assert(i!==undefined,"lineJoin should be defined");goog.asserts.assert(n!==undefined,"lineWidth should be defined");goog.asserts.assert(a!==undefined,"miterLimit should be defined");if(e.currentStrokeStyle!=o||e.currentLineCap!=t||!ol.array.equals(e.currentLineDash,r)||e.currentLineJoin!=i||e.currentLineWidth!=n||e.currentMiterLimit!=a){if(e.lastStroke!=this.coordinates.length){this.instructions.push([ol.render.canvas.Instruction.STROKE]);e.lastStroke=this.coordinates.length}this.instructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,o,n,t,i,a,r],[ol.render.canvas.Instruction.BEGIN_PATH]);e.currentStrokeStyle=o;e.currentLineCap=t;e.currentLineDash=r;e.currentLineJoin=i;e.currentLineWidth=n;e.currentMiterLimit=a}};ol.render.canvas.LineStringReplay.prototype.drawLineStringGeometry=function(e,o){var t=this.state_;goog.asserts.assert(t,"state should not be null");var r=t.strokeStyle;var i=t.lineWidth;if(r===undefined||i===undefined){return}this.setStrokeStyle_();this.beginGeometry(e,o);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth,t.lineCap,t.lineJoin,t.miterLimit,t.lineDash],[ol.render.canvas.Instruction.BEGIN_PATH]);var n=e.getFlatCoordinates();var a=e.getStride();this.drawFlatCoordinates_(n,0,n.length,a);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.STROKE]);this.endGeometry(e,o)};ol.render.canvas.LineStringReplay.prototype.drawMultiLineStringGeometry=function(e,o){var t=this.state_;goog.asserts.assert(t,"state should not be null");var r=t.strokeStyle;var i=t.lineWidth;if(r===undefined||i===undefined){return}this.setStrokeStyle_();this.beginGeometry(e,o);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth,t.lineCap,t.lineJoin,t.miterLimit,t.lineDash],[ol.render.canvas.Instruction.BEGIN_PATH]);var n=e.getEnds();var a=e.getFlatCoordinates();var l=e.getStride();var s=0;var g,p;for(g=0,p=n.length;g<p;++g){s=this.drawFlatCoordinates_(a,s,n[g],l)}this.hitDetectionInstructions.push([ol.render.canvas.Instruction.STROKE]);this.endGeometry(e,o)};ol.render.canvas.LineStringReplay.prototype.finish=function(){var e=this.state_;goog.asserts.assert(e,"state should not be null");if(e.lastStroke!=this.coordinates.length){this.instructions.push([ol.render.canvas.Instruction.STROKE])}this.reverseHitDetectionInstructions_();this.state_=null};ol.render.canvas.LineStringReplay.prototype.setFillStrokeStyle=function(e,o){goog.asserts.assert(this.state_,"this.state_ should not be null");goog.asserts.assert(!e,"fillStyle should be null");goog.asserts.assert(o,"strokeStyle should not be null");var t=o.getColor();this.state_.strokeStyle=ol.color.asString(t?t:ol.render.canvas.defaultStrokeStyle);var r=o.getLineCap();this.state_.lineCap=r!==undefined?r:ol.render.canvas.defaultLineCap;var i=o.getLineDash();this.state_.lineDash=i?i:ol.render.canvas.defaultLineDash;var n=o.getLineJoin();this.state_.lineJoin=n!==undefined?n:ol.render.canvas.defaultLineJoin;var a=o.getWidth();this.state_.lineWidth=a!==undefined?a:ol.render.canvas.defaultLineWidth;var l=o.getMiterLimit();this.state_.miterLimit=l!==undefined?l:ol.render.canvas.defaultMiterLimit;if(this.state_.lineWidth>this.maxLineWidth){this.maxLineWidth=this.state_.lineWidth;this.bufferedMaxExtent_=null}};ol.render.canvas.PolygonReplay=function(e,o,t){goog.base(this,e,o,t);this.state_={currentFillStyle:undefined,currentStrokeStyle:undefined,currentLineCap:undefined,currentLineDash:null,currentLineJoin:undefined,currentLineWidth:undefined,currentMiterLimit:undefined,fillStyle:undefined,strokeStyle:undefined,lineCap:undefined,lineDash:null,lineJoin:undefined,lineWidth:undefined,miterLimit:undefined}};goog.inherits(ol.render.canvas.PolygonReplay,ol.render.canvas.Replay);ol.render.canvas.PolygonReplay.prototype.drawFlatCoordinatess_=function(e,o,t,r){var i=this.state_;var n=[ol.render.canvas.Instruction.BEGIN_PATH];this.instructions.push(n);this.hitDetectionInstructions.push(n);var a,l;for(a=0,l=t.length;a<l;++a){var s=t[a];var g=this.coordinates.length;var p=this.appendFlatCoordinates(e,o,s,r,true);var u=[ol.render.canvas.Instruction.MOVE_TO_LINE_TO,g,p];var c=[ol.render.canvas.Instruction.CLOSE_PATH];this.instructions.push(u,c);this.hitDetectionInstructions.push(u,c);o=s}var d=[ol.render.canvas.Instruction.FILL];this.hitDetectionInstructions.push(d);if(i.fillStyle!==undefined){this.instructions.push(d)}if(i.strokeStyle!==undefined){goog.asserts.assert(i.lineWidth!==undefined,"state.lineWidth should be defined");var y=[ol.render.canvas.Instruction.STROKE];this.instructions.push(y);this.hitDetectionInstructions.push(y)}return o};ol.render.canvas.PolygonReplay.prototype.drawCircleGeometry=function(e,o){var t=this.state_;goog.asserts.assert(t,"state should not be null");var r=t.fillStyle;var i=t.strokeStyle;if(r===undefined&&i===undefined){return}if(i!==undefined){goog.asserts.assert(t.lineWidth!==undefined,"state.lineWidth should be defined")}this.setFillStrokeStyles_();this.beginGeometry(e,o);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_FILL_STYLE,ol.color.asString(ol.render.canvas.defaultFillStyle)]);if(t.strokeStyle!==undefined){this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth,t.lineCap,t.lineJoin,t.miterLimit,t.lineDash])}var n=e.getFlatCoordinates();var a=e.getStride();var l=this.coordinates.length;this.appendFlatCoordinates(n,0,n.length,a,false);var s=[ol.render.canvas.Instruction.BEGIN_PATH];var g=[ol.render.canvas.Instruction.CIRCLE,l];this.instructions.push(s,g);this.hitDetectionInstructions.push(s,g);var p=[ol.render.canvas.Instruction.FILL];this.hitDetectionInstructions.push(p);if(t.fillStyle!==undefined){this.instructions.push(p)}if(t.strokeStyle!==undefined){goog.asserts.assert(t.lineWidth!==undefined,"state.lineWidth should be defined");var u=[ol.render.canvas.Instruction.STROKE];this.instructions.push(u);this.hitDetectionInstructions.push(u)}this.endGeometry(e,o)};ol.render.canvas.PolygonReplay.prototype.drawPolygonGeometry=function(e,o){var t=this.state_;goog.asserts.assert(t,"state should not be null");var r=t.fillStyle;var i=t.strokeStyle;if(r===undefined&&i===undefined){return}if(i!==undefined){goog.asserts.assert(t.lineWidth!==undefined,"state.lineWidth should be defined")}this.setFillStrokeStyles_();this.beginGeometry(e,o);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_FILL_STYLE,ol.color.asString(ol.render.canvas.defaultFillStyle)]);if(t.strokeStyle!==undefined){this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth,t.lineCap,t.lineJoin,t.miterLimit,t.lineDash])}var n=e.getEnds();var a=e.getOrientedFlatCoordinates();var l=e.getStride();this.drawFlatCoordinatess_(a,0,n,l);this.endGeometry(e,o)};ol.render.canvas.PolygonReplay.prototype.drawMultiPolygonGeometry=function(e,o){var t=this.state_;goog.asserts.assert(t,"state should not be null");var r=t.fillStyle;var i=t.strokeStyle;if(r===undefined&&i===undefined){return}if(i!==undefined){goog.asserts.assert(t.lineWidth!==undefined,"state.lineWidth should be defined")}this.setFillStrokeStyles_();this.beginGeometry(e,o);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_FILL_STYLE,ol.color.asString(ol.render.canvas.defaultFillStyle)]);if(t.strokeStyle!==undefined){this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth,t.lineCap,t.lineJoin,t.miterLimit,t.lineDash])}var n=e.getEndss();var a=e.getOrientedFlatCoordinates();var l=e.getStride();var s=0;var g,p;for(g=0,p=n.length;g<p;++g){s=this.drawFlatCoordinatess_(a,s,n[g],l)}this.endGeometry(e,o)};ol.render.canvas.PolygonReplay.prototype.finish=function(){goog.asserts.assert(this.state_,"this.state_ should not be null");this.reverseHitDetectionInstructions_();this.state_=null;var e=this.tolerance;if(e!==0){var o=this.coordinates;var t,r;for(t=0,r=o.length;t<r;++t){o[t]=ol.geom.flat.simplify.snap(o[t],e)}}};ol.render.canvas.PolygonReplay.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_){this.bufferedMaxExtent_=ol.extent.clone(this.maxExtent);if(this.maxLineWidth>0){var e=this.resolution*(this.maxLineWidth+1)/2;ol.extent.buffer(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}}return this.bufferedMaxExtent_};ol.render.canvas.PolygonReplay.prototype.setFillStrokeStyle=function(e,o){goog.asserts.assert(this.state_,"this.state_ should not be null");goog.asserts.assert(e||o,"fillStyle or strokeStyle should not be null");var t=this.state_;if(e){var r=e.getColor();t.fillStyle=ol.colorlike.asColorLike(r?r:ol.render.canvas.defaultFillStyle)}else{t.fillStyle=undefined}if(o){var i=o.getColor();t.strokeStyle=ol.color.asString(i?i:ol.render.canvas.defaultStrokeStyle);var n=o.getLineCap();t.lineCap=n!==undefined?n:ol.render.canvas.defaultLineCap;var a=o.getLineDash();t.lineDash=a?a.slice():ol.render.canvas.defaultLineDash;var l=o.getLineJoin();t.lineJoin=l!==undefined?l:ol.render.canvas.defaultLineJoin;var s=o.getWidth();t.lineWidth=s!==undefined?s:ol.render.canvas.defaultLineWidth;var g=o.getMiterLimit();t.miterLimit=g!==undefined?g:ol.render.canvas.defaultMiterLimit;if(t.lineWidth>this.maxLineWidth){this.maxLineWidth=t.lineWidth;this.bufferedMaxExtent_=null}}else{t.strokeStyle=undefined;t.lineCap=undefined;t.lineDash=null;t.lineJoin=undefined;t.lineWidth=undefined;t.miterLimit=undefined}};ol.render.canvas.PolygonReplay.prototype.setFillStrokeStyles_=function(){var e=this.state_;var o=e.fillStyle;var t=e.strokeStyle;var r=e.lineCap;var i=e.lineDash;var n=e.lineJoin;var a=e.lineWidth;var l=e.miterLimit;if(o!==undefined&&e.currentFillStyle!=o){this.instructions.push([ol.render.canvas.Instruction.SET_FILL_STYLE,o]);e.currentFillStyle=e.fillStyle}if(t!==undefined){goog.asserts.assert(r!==undefined,"lineCap should be defined");goog.asserts.assert(i,"lineDash should not be null");goog.asserts.assert(n!==undefined,"lineJoin should be defined");goog.asserts.assert(a!==undefined,"lineWidth should be defined");goog.asserts.assert(l!==undefined,"miterLimit should be defined");if(e.currentStrokeStyle!=t||e.currentLineCap!=r||e.currentLineDash!=i||e.currentLineJoin!=n||e.currentLineWidth!=a||e.currentMiterLimit!=l){this.instructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,t,a,r,n,l,i]);e.currentStrokeStyle=t;e.currentLineCap=r;e.currentLineDash=i;e.currentLineJoin=n;e.currentLineWidth=a;e.currentMiterLimit=l}}};ol.render.canvas.TextReplay=function(e,o,t){goog.base(this,e,o,t);this.replayFillState_=null;this.replayStrokeState_=null;this.replayTextState_=null;this.text_="";this.textOffsetX_=0;this.textOffsetY_=0;this.textRotation_=0;this.textScale_=0;this.textFillState_=null;this.textStrokeState_=null;this.textState_=null};goog.inherits(ol.render.canvas.TextReplay,ol.render.canvas.Replay);ol.render.canvas.TextReplay.prototype.drawText=function(e,o,t,r,i,n){if(this.text_===""||!this.textState_||!this.textFillState_&&!this.textStrokeState_){return}if(this.textFillState_){this.setReplayFillState_(this.textFillState_)}if(this.textStrokeState_){this.setReplayStrokeState_(this.textStrokeState_)}this.setReplayTextState_(this.textState_);this.beginGeometry(i,n);var a=this.coordinates.length;var l=this.appendFlatCoordinates(e,o,t,r,false);var s=!!this.textFillState_;var g=!!this.textStrokeState_;var p=[ol.render.canvas.Instruction.DRAW_TEXT,a,l,this.text_,this.textOffsetX_,this.textOffsetY_,this.textRotation_,this.textScale_,s,g];this.instructions.push(p);this.hitDetectionInstructions.push(p);this.endGeometry(i,n)};ol.render.canvas.TextReplay.prototype.setReplayFillState_=function(e){var o=this.replayFillState_;if(o&&o.fillStyle==e.fillStyle){return}var t=[ol.render.canvas.Instruction.SET_FILL_STYLE,e.fillStyle];this.instructions.push(t);this.hitDetectionInstructions.push(t);if(!o){this.replayFillState_={fillStyle:e.fillStyle}}else{o.fillStyle=e.fillStyle}};ol.render.canvas.TextReplay.prototype.setReplayStrokeState_=function(e){var o=this.replayStrokeState_;if(o&&o.lineCap==e.lineCap&&o.lineDash==e.lineDash&&o.lineJoin==e.lineJoin&&o.lineWidth==e.lineWidth&&o.miterLimit==e.miterLimit&&o.strokeStyle==e.strokeStyle){return}var t=[ol.render.canvas.Instruction.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,false];this.instructions.push(t);this.hitDetectionInstructions.push(t);if(!o){this.replayStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle}}else{o.lineCap=e.lineCap;o.lineDash=e.lineDash;o.lineJoin=e.lineJoin;o.lineWidth=e.lineWidth;o.miterLimit=e.miterLimit;o.strokeStyle=e.strokeStyle}};ol.render.canvas.TextReplay.prototype.setReplayTextState_=function(e){var o=this.replayTextState_;if(o&&o.font==e.font&&o.textAlign==e.textAlign&&o.textBaseline==e.textBaseline){return}var t=[ol.render.canvas.Instruction.SET_TEXT_STYLE,e.font,e.textAlign,e.textBaseline];this.instructions.push(t);this.hitDetectionInstructions.push(t);if(!o){this.replayTextState_={font:e.font,textAlign:e.textAlign,textBaseline:e.textBaseline}}else{o.font=e.font;o.textAlign=e.textAlign;o.textBaseline=e.textBaseline}};ol.render.canvas.TextReplay.prototype.setTextStyle=function(e){if(!e){this.text_=""}else{var o=e.getFill();if(!o){this.textFillState_=null}else{var t=o.getColor();var r=ol.colorlike.asColorLike(t?t:ol.render.canvas.defaultFillStyle);if(!this.textFillState_){this.textFillState_={fillStyle:r}}else{var i=this.textFillState_;i.fillStyle=r}}var n=e.getStroke();if(!n){this.textStrokeState_=null}else{var a=n.getColor();var l=n.getLineCap();var s=n.getLineDash();var g=n.getLineJoin();var p=n.getWidth();var u=n.getMiterLimit();var c=l!==undefined?l:ol.render.canvas.defaultLineCap;var d=s?s.slice():ol.render.canvas.defaultLineDash;var y=g!==undefined?g:ol.render.canvas.defaultLineJoin;var h=p!==undefined?p:ol.render.canvas.defaultLineWidth
;var m=u!==undefined?u:ol.render.canvas.defaultMiterLimit;var f=ol.color.asString(a?a:ol.render.canvas.defaultStrokeStyle);if(!this.textStrokeState_){this.textStrokeState_={lineCap:c,lineDash:d,lineJoin:y,lineWidth:h,miterLimit:m,strokeStyle:f}}else{var v=this.textStrokeState_;v.lineCap=c;v.lineDash=d;v.lineJoin=y;v.lineWidth=h;v.miterLimit=m;v.strokeStyle=f}}var _=e.getFont();var E=e.getOffsetX();var S=e.getOffsetY();var T=e.getRotation();var P=e.getScale();var x=e.getText();var b=e.getTextAlign();var M=e.getTextBaseline();var L=_!==undefined?_:ol.render.canvas.defaultFont;var R=b!==undefined?b:ol.render.canvas.defaultTextAlign;var C=M!==undefined?M:ol.render.canvas.defaultTextBaseline;if(!this.textState_){this.textState_={font:L,textAlign:R,textBaseline:C}}else{var A=this.textState_;A.font=L;A.textAlign=R;A.textBaseline=C}this.text_=x!==undefined?x:"";this.textOffsetX_=E!==undefined?E:0;this.textOffsetY_=S!==undefined?S:0;this.textRotation_=T!==undefined?T:0;this.textScale_=P!==undefined?P:1}};ol.render.canvas.ReplayGroup=function(e,o,t,r){this.tolerance_=e;this.maxExtent_=o;this.resolution_=t;this.renderBuffer_=r;this.replaysByZIndex_={};this.hitDetectionContext_=ol.dom.createCanvasContext2D(1,1);this.hitDetectionTransform_=goog.vec.Mat4.createNumber()};ol.render.canvas.ReplayGroup.prototype.finish=function(){var e;for(e in this.replaysByZIndex_){var o=this.replaysByZIndex_[e];var t;for(t in o){o[t].finish()}}};ol.render.canvas.ReplayGroup.prototype.forEachFeatureAtCoordinate=function(e,o,t,r,i){var n=this.hitDetectionTransform_;ol.vec.Mat4.makeTransform2D(n,.5,.5,1/o,-1/o,-t,-e[0],-e[1]);var a=this.hitDetectionContext_;a.clearRect(0,0,1,1);var l;if(this.renderBuffer_!==undefined){l=ol.extent.createEmpty();ol.extent.extendCoordinate(l,e);ol.extent.buffer(l,o*this.renderBuffer_,l)}return this.replayHitDetection_(a,n,t,r,function(e){var o=a.getImageData(0,0,1,1).data;if(o[3]>0){var t=i(e);if(t){return t}a.clearRect(0,0,1,1)}},l)};ol.render.canvas.ReplayGroup.prototype.getReplay=function(e,o){var t=e!==undefined?e.toString():"0";var r=this.replaysByZIndex_[t];if(r===undefined){r={};this.replaysByZIndex_[t]=r}var i=r[o];if(i===undefined){var n=ol.render.canvas.BATCH_CONSTRUCTORS_[o];goog.asserts.assert(n!==undefined,o+" constructor missing from ol.render.canvas.BATCH_CONSTRUCTORS_");i=new n(this.tolerance_,this.maxExtent_,this.resolution_);r[o]=i}return i};ol.render.canvas.ReplayGroup.prototype.isEmpty=function(){return ol.object.isEmpty(this.replaysByZIndex_)};ol.render.canvas.ReplayGroup.prototype.replay=function(e,o,t,r,i,n){var a=Object.keys(this.replaysByZIndex_).map(Number);a.sort(ol.array.numberSafeCompareFunction);if(n!==false){var l=this.maxExtent_;var s=l[0];var g=l[1];var p=l[2];var u=l[3];var c=[s,g,s,u,p,u,p,g];ol.geom.flat.transform.transform2D(c,0,8,2,t,c);e.save();e.beginPath();e.moveTo(c[0],c[1]);e.lineTo(c[2],c[3]);e.lineTo(c[4],c[5]);e.lineTo(c[6],c[7]);e.closePath();e.clip()}var d,y,h,m,f,v;for(d=0,y=a.length;d<y;++d){f=this.replaysByZIndex_[a[d].toString()];for(h=0,m=ol.render.REPLAY_ORDER.length;h<m;++h){v=f[ol.render.REPLAY_ORDER[h]];if(v!==undefined){v.replay(e,o,t,r,i)}}}e.restore()};ol.render.canvas.ReplayGroup.prototype.replayHitDetection_=function(e,o,t,r,i,n){var a=Object.keys(this.replaysByZIndex_).map(Number);a.sort(function(e,o){return o-e});var l,s,g,p,u,c;for(l=0,s=a.length;l<s;++l){p=this.replaysByZIndex_[a[l].toString()];for(g=ol.render.REPLAY_ORDER.length-1;g>=0;--g){u=p[ol.render.REPLAY_ORDER[g]];if(u!==undefined){c=u.replayHitDetection(e,o,t,r,i,n);if(c){return c}}}}return undefined};ol.render.canvas.BATCH_CONSTRUCTORS_={Image:ol.render.canvas.ImageReplay,LineString:ol.render.canvas.LineStringReplay,Polygon:ol.render.canvas.PolygonReplay,Text:ol.render.canvas.TextReplay};goog.provide("ol.render.Feature");goog.require("goog.asserts");goog.require("ol.extent");goog.require("ol.geom.GeometryType");ol.render.Feature=function(e,o,t,r){this.extent_;goog.asserts.assert(e===ol.geom.GeometryType.POINT||e===ol.geom.GeometryType.MULTI_POINT||e===ol.geom.GeometryType.LINE_STRING||e===ol.geom.GeometryType.MULTI_LINE_STRING||e===ol.geom.GeometryType.POLYGON,"Need a Point, MultiPoint, LineString, MultiLineString or Polygon type");this.type_=e;this.flatCoordinates_=o;this.ends_=t;this.properties_=r};ol.render.Feature.prototype.get=function(e){return this.properties_[e]};ol.render.Feature.prototype.getEnds=function(){return this.ends_};ol.render.Feature.prototype.getExtent=function(){if(!this.extent_){this.extent_=this.type_===ol.geom.GeometryType.POINT?ol.extent.createOrUpdateFromCoordinate(this.flatCoordinates_):ol.extent.createOrUpdateFromFlatCoordinates(this.flatCoordinates_,0,this.flatCoordinates_.length,2)}return this.extent_};ol.render.Feature.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_};ol.render.Feature.prototype.getFlatCoordinates=ol.render.Feature.prototype.getOrientedFlatCoordinates;ol.render.Feature.prototype.getGeometry=function(){return this};ol.render.Feature.prototype.getProperties=function(){return this.properties_};ol.render.Feature.prototype.getSimplifiedGeometry=ol.render.Feature.prototype.getGeometry;ol.render.Feature.prototype.getStride=function(){return 2};ol.render.Feature.prototype.getStyleFunction=ol.nullFunction;ol.render.Feature.prototype.getType=function(){return this.type_};goog.provide("ol.renderer.vector");goog.require("goog.asserts");goog.require("ol.render.Feature");goog.require("ol.render.IReplayGroup");goog.require("ol.style.ImageState");goog.require("ol.style.Style");ol.renderer.vector.defaultOrder=function(e,o){return goog.getUid(e)-goog.getUid(o)};ol.renderer.vector.getSquaredTolerance=function(e,o){var t=ol.renderer.vector.getTolerance(e,o);return t*t};ol.renderer.vector.getTolerance=function(e,o){return ol.SIMPLIFY_TOLERANCE*e/o};ol.renderer.vector.renderCircleGeometry_=function(e,o,t,r){var i=t.getFill();var n=t.getStroke();if(i||n){var a=e.getReplay(t.getZIndex(),ol.render.ReplayType.POLYGON);a.setFillStrokeStyle(i,n);a.drawCircleGeometry(o,r)}var l=t.getText();if(l){var s=e.getReplay(t.getZIndex(),ol.render.ReplayType.TEXT);s.setTextStyle(l);s.drawText(o.getCenter(),0,2,2,o,r)}};ol.renderer.vector.renderFeature=function(e,o,t,r,i,n){var a=false;var l,s;l=t.getImage();if(l){s=l.getImageState();if(s==ol.style.ImageState.LOADED||s==ol.style.ImageState.ERROR){l.unlistenImageChange(i,n)}else{if(s==ol.style.ImageState.IDLE){l.load()}s=l.getImageState();goog.asserts.assert(s==ol.style.ImageState.LOADING,"imageState should be LOADING");l.listenImageChange(i,n);a=true}}ol.renderer.vector.renderFeature_(e,o,t,r);return a};ol.renderer.vector.renderFeature_=function(e,o,t,r){var i=t.getGeometryFunction()(o);if(!i){return}var n=i.getSimplifiedGeometry(r);var a=ol.renderer.vector.GEOMETRY_RENDERERS_[n.getType()];goog.asserts.assert(a!==undefined,"geometryRenderer should be defined");a(e,n,t,o)};ol.renderer.vector.renderGeometryCollectionGeometry_=function(e,o,t,r){var i=o.getGeometriesArray();var n,a;for(n=0,a=i.length;n<a;++n){var l=ol.renderer.vector.GEOMETRY_RENDERERS_[i[n].getType()];goog.asserts.assert(l!==undefined,"geometryRenderer should be defined");l(e,i[n],t,r)}};ol.renderer.vector.renderLineStringGeometry_=function(e,o,t,r){var i=t.getStroke();if(i){var n=e.getReplay(t.getZIndex(),ol.render.ReplayType.LINE_STRING);n.setFillStrokeStyle(null,i);n.drawLineStringGeometry(o,r)}var a=t.getText();if(a){var l=e.getReplay(t.getZIndex(),ol.render.ReplayType.TEXT);l.setTextStyle(a);l.drawText(o.getFlatMidpoint(),0,2,2,o,r)}};ol.renderer.vector.renderMultiLineStringGeometry_=function(e,o,t,r){var i=t.getStroke();if(i){var n=e.getReplay(t.getZIndex(),ol.render.ReplayType.LINE_STRING);n.setFillStrokeStyle(null,i);n.drawMultiLineStringGeometry(o,r)}var a=t.getText();if(a){var l=e.getReplay(t.getZIndex(),ol.render.ReplayType.TEXT);l.setTextStyle(a);var s=o.getFlatMidpoints();l.drawText(s,0,s.length,2,o,r)}};ol.renderer.vector.renderMultiPolygonGeometry_=function(e,o,t,r){var i=t.getFill();var n=t.getStroke();if(n||i){var a=e.getReplay(t.getZIndex(),ol.render.ReplayType.POLYGON);a.setFillStrokeStyle(i,n);a.drawMultiPolygonGeometry(o,r)}var l=t.getText();if(l){var s=e.getReplay(t.getZIndex(),ol.render.ReplayType.TEXT);s.setTextStyle(l);var g=o.getFlatInteriorPoints();s.drawText(g,0,g.length,2,o,r)}};ol.renderer.vector.renderPointGeometry_=function(e,o,t,r){var i=t.getImage();if(i){if(i.getImageState()!=ol.style.ImageState.LOADED){return}var n=e.getReplay(t.getZIndex(),ol.render.ReplayType.IMAGE);n.setImageStyle(i);n.drawPointGeometry(o,r)}var a=t.getText();if(a){var l=e.getReplay(t.getZIndex(),ol.render.ReplayType.TEXT);l.setTextStyle(a);l.drawText(o.getFlatCoordinates(),0,2,2,o,r)}};ol.renderer.vector.renderMultiPointGeometry_=function(e,o,t,r){var i=t.getImage();if(i){if(i.getImageState()!=ol.style.ImageState.LOADED){return}var n=e.getReplay(t.getZIndex(),ol.render.ReplayType.IMAGE);n.setImageStyle(i);n.drawMultiPointGeometry(o,r)}var a=t.getText();if(a){var l=e.getReplay(t.getZIndex(),ol.render.ReplayType.TEXT);l.setTextStyle(a);var s=o.getFlatCoordinates();l.drawText(s,0,s.length,o.getStride(),o,r)}};ol.renderer.vector.renderPolygonGeometry_=function(e,o,t,r){var i=t.getFill();var n=t.getStroke();if(i||n){var a=e.getReplay(t.getZIndex(),ol.render.ReplayType.POLYGON);a.setFillStrokeStyle(i,n);a.drawPolygonGeometry(o,r)}var l=t.getText();if(l){var s=e.getReplay(t.getZIndex(),ol.render.ReplayType.TEXT);s.setTextStyle(l);s.drawText(o.getFlatInteriorPoint(),0,2,2,o,r)}};ol.renderer.vector.GEOMETRY_RENDERERS_={Point:ol.renderer.vector.renderPointGeometry_,LineString:ol.renderer.vector.renderLineStringGeometry_,Polygon:ol.renderer.vector.renderPolygonGeometry_,MultiPoint:ol.renderer.vector.renderMultiPointGeometry_,MultiLineString:ol.renderer.vector.renderMultiLineStringGeometry_,MultiPolygon:ol.renderer.vector.renderMultiPolygonGeometry_,GeometryCollection:ol.renderer.vector.renderGeometryCollectionGeometry_,Circle:ol.renderer.vector.renderCircleGeometry_};goog.provide("ol.ImageCanvas");goog.require("goog.asserts");goog.require("ol.ImageBase");goog.require("ol.ImageState");ol.ImageCanvas=function(e,o,t,r,i,n){this.loader_=n!==undefined?n:null;var a=n!==undefined?ol.ImageState.IDLE:ol.ImageState.LOADED;goog.base(this,e,o,t,a,r);this.canvas_=i;this.error_=null};goog.inherits(ol.ImageCanvas,ol.ImageBase);ol.ImageCanvas.prototype.getError=function(){return this.error_};ol.ImageCanvas.prototype.handleLoad_=function(e){if(e){this.error_=e;this.state=ol.ImageState.ERROR}else{this.state=ol.ImageState.LOADED}this.changed()};ol.ImageCanvas.prototype.load=function(){if(this.state==ol.ImageState.IDLE){goog.asserts.assert(this.loader_,"this.loader_ must be set");this.state=ol.ImageState.LOADING;this.changed();this.loader_(this.handleLoad_.bind(this))}};ol.ImageCanvas.prototype.getImage=function(e){return this.canvas_};ol.ImageCanvasLoader;goog.provide("ol.reproj");goog.require("goog.labs.userAgent.browser");goog.require("goog.labs.userAgent.platform");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.math");goog.require("ol.proj");ol.reproj.browserAntialiasesClip_=!goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.platform.isIos();ol.reproj.calculateSourceResolution=function(e,o,t,r){var i=ol.proj.transform(t,o,e);var n=o.getPointResolution(r,t);var a=o.getMetersPerUnit();if(a!==undefined){n*=a}var l=e.getMetersPerUnit();if(l!==undefined){n/=l}var s=e.getPointResolution(n,i)/n;if(isFinite(s)&&s>0){n/=s}return n};ol.reproj.enlargeClipPoint_=function(e,o,t,r){var i=t-e,n=r-o;var a=Math.sqrt(i*i+n*n);return[Math.round(t+i/a),Math.round(r+n/a)]};ol.reproj.render=function(e,o,t,r,i,n,a,l,s,g,p){var u=ol.dom.createCanvasContext2D(Math.round(t*e),Math.round(t*o));if(s.length===0){return u.canvas}u.scale(t,t);var c=ol.extent.createEmpty();s.forEach(function(e,o,t){ol.extent.extend(c,e.extent)});var d=ol.extent.getWidth(c);var y=ol.extent.getHeight(c);var h=ol.dom.createCanvasContext2D(Math.round(t*d/r),Math.round(t*y/r));var m=t/r;s.forEach(function(e,o,t){var r=e.extent[0]-c[0];var i=-(e.extent[3]-c[3]);var n=ol.extent.getWidth(e.extent);var a=ol.extent.getHeight(e.extent);h.drawImage(e.image,g,g,e.image.width-2*g,e.image.height-2*g,r*m,i*m,n*m,a*m)});var f=ol.extent.getTopLeft(a);l.getTriangles().forEach(function(e,o,i){var a=e.source,l=e.target;var s=a[0][0],g=a[0][1],p=a[1][0],d=a[1][1],y=a[2][0],m=a[2][1];var v=(l[0][0]-f[0])/n,_=-(l[0][1]-f[1])/n;var E=(l[1][0]-f[0])/n,S=-(l[1][1]-f[1])/n;var T=(l[2][0]-f[0])/n,P=-(l[2][1]-f[1])/n;var x=s,b=g;s=0;g=0;p-=x;d-=b;y-=x;m-=b;var M=[[p,d,0,0,E-v],[y,m,0,0,T-v],[0,0,p,d,S-_],[0,0,y,m,P-_]];var L=ol.math.solveLinearSystem(M);if(!L){return}u.save();u.beginPath();if(ol.reproj.browserAntialiasesClip_){var R=(v+E+T)/3,C=(_+S+P)/3;var A=ol.reproj.enlargeClipPoint_(R,C,v,_);var I=ol.reproj.enlargeClipPoint_(R,C,E,S);var O=ol.reproj.enlargeClipPoint_(R,C,T,P);u.moveTo(A[0],A[1]);u.lineTo(I[0],I[1]);u.lineTo(O[0],O[1])}else{u.moveTo(v,_);u.lineTo(E,S);u.lineTo(T,P)}u.closePath();u.clip();u.transform(L[0],L[2],L[1],L[3],v,_);u.translate(c[0]-x,c[3]-b);u.scale(r/t,-r/t);u.drawImage(h.canvas,0,0);u.restore()});if(p){u.save();u.strokeStyle="black";u.lineWidth=1;l.getTriangles().forEach(function(e,o,t){var r=e.target;var i=(r[0][0]-f[0])/n,a=-(r[0][1]-f[1])/n;var l=(r[1][0]-f[0])/n,s=-(r[1][1]-f[1])/n;var g=(r[2][0]-f[0])/n,p=-(r[2][1]-f[1])/n;u.beginPath();u.moveTo(i,a);u.lineTo(l,s);u.lineTo(g,p);u.closePath();u.stroke()});u.restore()}return u.canvas};goog.provide("ol.reproj.Triangulation");goog.require("goog.asserts");goog.require("goog.math");goog.require("ol.extent");goog.require("ol.proj");ol.reproj.Triangle;ol.reproj.Triangulation=function(e,o,t,r,i){this.sourceProj_=e;this.targetProj_=o;var n={};var a=ol.proj.getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(e){var o=e[0]+"/"+e[1];if(!n[o]){n[o]=a(e)}return n[o]};this.maxSourceExtent_=r;this.errorThresholdSquared_=i*i;this.triangles_=[];this.wrapsXInSource_=false;this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&ol.extent.getWidth(r)==ol.extent.getWidth(this.sourceProj_.getExtent());this.sourceWorldWidth_=this.sourceProj_.getExtent()?ol.extent.getWidth(this.sourceProj_.getExtent()):null;this.targetWorldWidth_=this.targetProj_.getExtent()?ol.extent.getWidth(this.targetProj_.getExtent()):null;var l=ol.extent.getTopLeft(t);var s=ol.extent.getTopRight(t);var g=ol.extent.getBottomRight(t);var p=ol.extent.getBottomLeft(t);var u=this.transformInv_(l);var c=this.transformInv_(s);var d=this.transformInv_(g);var y=this.transformInv_(p);this.addQuad_(l,s,g,p,u,c,d,y,ol.RASTER_REPROJECTION_MAX_SUBDIVISION);if(this.wrapsXInSource_){goog.asserts.assert(this.sourceWorldWidth_!==null);var h=Infinity;this.triangles_.forEach(function(e,o,t){h=Math.min(h,e.source[0][0],e.source[1][0],e.source[2][0])});this.triangles_.forEach(function(e){if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-h>this.sourceWorldWidth_/2){var o=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];if(o[0][0]-h>this.sourceWorldWidth_/2){o[0][0]-=this.sourceWorldWidth_}if(o[1][0]-h>this.sourceWorldWidth_/2){o[1][0]-=this.sourceWorldWidth_}if(o[2][0]-h>this.sourceWorldWidth_/2){o[2][0]-=this.sourceWorldWidth_}var t=Math.min(o[0][0],o[1][0],o[2][0]);var r=Math.max(o[0][0],o[1][0],o[2][0]);if(r-t<this.sourceWorldWidth_/2){e.source=o}}},this)}n={}};ol.reproj.Triangulation.prototype.addTriangle_=function(e,o,t,r,i,n){this.triangles_.push({source:[r,i,n],target:[e,o,t]})};ol.reproj.Triangulation.prototype.addQuad_=function(e,o,t,r,i,n,a,l,s){var g=ol.extent.boundingExtent([i,n,a,l]);var p=this.sourceWorldWidth_?ol.extent.getWidth(g)/this.sourceWorldWidth_:null;var u=this.sourceProj_.canWrapX()&&p>.5&&p<1;var c=false;if(s>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var d=ol.extent.boundingExtent([e,o,t,r]);var y=ol.extent.getWidth(d)/this.targetWorldWidth_;c|=y>ol.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH}if(!u&&this.sourceProj_.isGlobal()&&p){c|=p>ol.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH}}if(!c&&this.maxSourceExtent_){if(!ol.extent.intersects(g,this.maxSourceExtent_)){return}}if(!c){if(!isFinite(i[0])||!isFinite(i[1])||!isFinite(n[0])||!isFinite(n[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1])){if(s>0){c=true}else{return}}}if(s>0){if(!c){var h=[(e[0]+t[0])/2,(e[1]+t[1])/2];var m=this.transformInv_(h);var f;if(u){goog.asserts.assert(this.sourceWorldWidth_);var v=(goog.math.modulo(i[0],this.sourceWorldWidth_)+goog.math.modulo(a[0],this.sourceWorldWidth_))/2;f=v-goog.math.modulo(m[0],this.sourceWorldWidth_)}else{f=(i[0]+a[0])/2-m[0]}var _=(i[1]+a[1])/2-m[1];var E=f*f+_*_;c=E>this.errorThresholdSquared_}if(c){if(Math.abs(e[0]-t[0])<=Math.abs(e[1]-t[1])){var S=[(o[0]+t[0])/2,(o[1]+t[1])/2];var T=this.transformInv_(S);var P=[(r[0]+e[0])/2,(r[1]+e[1])/2];var x=this.transformInv_(P);this.addQuad_(e,o,S,P,i,n,T,x,s-1);this.addQuad_(P,S,t,r,x,T,a,l,s-1)}else{var b=[(e[0]+o[0])/2,(e[1]+o[1])/2];var M=this.transformInv_(b);var L=[(t[0]+r[0])/2,(t[1]+r[1])/2];var R=this.transformInv_(L);this.addQuad_(e,b,L,r,i,M,R,l,s-1);this.addQuad_(b,o,t,L,M,n,a,R,s-1)}return}}if(u){if(!this.canWrapXInSource_){return}this.wrapsXInSource_=true}this.addTriangle_(e,t,r,i,a,l);this.addTriangle_(e,o,t,i,n,a)};ol.reproj.Triangulation.prototype.calculateSourceExtent=function(){var e=ol.extent.createEmpty();this.triangles_.forEach(function(o,t,r){var i=o.source;ol.extent.extendCoordinate(e,i[0]);ol.extent.extendCoordinate(e,i[1]);ol.extent.extendCoordinate(e,i[2])});return e};ol.reproj.Triangulation.prototype.getTriangles=function(){return this.triangles_};goog.provide("ol.reproj.Image");goog.provide("ol.reproj.ImageFunctionType");goog.require("goog.asserts");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol.ImageBase");goog.require("ol.ImageState");goog.require("ol.extent");goog.require("ol.proj");goog.require("ol.reproj");goog.require("ol.reproj.Triangulation");ol.reproj.ImageFunctionType;ol.reproj.Image=function(e,o,t,r,i,n){this.targetProj_=o;this.maxSourceExtent_=e.getExtent();var a=o.getExtent();var l=a?ol.extent.getIntersection(t,a):t;var s=ol.extent.getCenter(l);var g=ol.reproj.calculateSourceResolution(e,o,s,r);var p=ol.DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD;this.triangulation_=new ol.reproj.Triangulation(e,o,l,this.maxSourceExtent_,g*p);this.targetResolution_=r;this.targetExtent_=t;var u=this.triangulation_.calculateSourceExtent();this.sourceImage_=n(u,g,i);this.sourcePixelRatio_=this.sourceImage_?this.sourceImage_.getPixelRatio():1;this.canvas_=null;this.sourceListenerKey_=null;var c=ol.ImageState.LOADED;var d=[];if(this.sourceImage_){c=ol.ImageState.IDLE;d=this.sourceImage_.getAttributions()}goog.base(this,t,r,this.sourcePixelRatio_,c,d)};goog.inherits(ol.reproj.Image,ol.ImageBase);ol.reproj.Image.prototype.disposeInternal=function(){if(this.state==ol.ImageState.LOADING){this.unlistenSource_()}goog.base(this,"disposeInternal")};ol.reproj.Image.prototype.getImage=function(e){return this.canvas_};ol.reproj.Image.prototype.getProjection=function(){return this.targetProj_};ol.reproj.Image.prototype.reproject_=function(){var e=this.sourceImage_.getState();if(e==ol.ImageState.LOADED){var o=ol.extent.getWidth(this.targetExtent_)/this.targetResolution_;var t=ol.extent.getHeight(this.targetExtent_)/this.targetResolution_;this.canvas_=ol.reproj.render(o,t,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=e;this.changed()};ol.reproj.Image.prototype.load=function(){if(this.state==ol.ImageState.IDLE){this.state=ol.ImageState.LOADING;this.changed();var e=this.sourceImage_.getState();if(e==ol.ImageState.LOADED||e==ol.ImageState.ERROR){this.reproject_()}else{this.sourceListenerKey_=ol.events.listen(this.sourceImage_,ol.events.EventType.CHANGE,function(e){var o=this.sourceImage_.getState();if(o==ol.ImageState.LOADED||o==ol.ImageState.ERROR){this.unlistenSource_();this.reproject_()}},this);this.sourceImage_.load()}}};ol.reproj.Image.prototype.unlistenSource_=function(){goog.asserts.assert(this.sourceListenerKey_,"this.sourceListenerKey_ should not be null");ol.events.unlistenByKey(this.sourceListenerKey_);this.sourceListenerKey_=null};goog.provide("ol.source.Image");goog.provide("ol.source.ImageEvent");goog.require("goog.asserts");goog.require("ol.events.Event");goog.require("ol.Attribution");goog.require("ol.ImageState");goog.require("ol.array");goog.require("ol.extent");goog.require("ol.proj");goog.require("ol.reproj.Image");goog.require("ol.source.Source");ol.source.ImageOptions;ol.source.Image=function(e){goog.base(this,{attributions:e.attributions,extent:e.extent,logo:e.logo,projection:e.projection,state:e.state});this.resolutions_=e.resolutions!==undefined?e.resolutions:null;goog.asserts.assert(!this.resolutions_||ol.array.isSorted(this.resolutions_,function(e,o){return o-e},true),"resolutions must be null or sorted in descending order");this.reprojectedImage_=null;this.reprojectedRevision_=0};goog.inherits(ol.source.Image,ol.source.Source);ol.source.Image.prototype.getResolutions=function(){return this.resolutions_};ol.source.Image.prototype.findNearestResolution=function(e){if(this.resolutions_){var o=ol.array.linearFindNearest(this.resolutions_,e,0);e=this.resolutions_[o]}return e};ol.source.Image.prototype.getImage=function(e,o,t,r){var i=this.getProjection();if(!ol.ENABLE_RASTER_REPROJECTION||!i||!r||ol.proj.equivalent(i,r)){if(i){r=i}return this.getImageInternal(e,o,t,r)}else{if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&ol.proj.equivalent(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==o&&this.reprojectedImage_.getPixelRatio()==t&&ol.extent.equals(this.reprojectedImage_.getExtent(),e)){return this.reprojectedImage_}this.reprojectedImage_.dispose();this.reprojectedImage_=null}this.reprojectedImage_=new ol.reproj.Image(i,r,e,o,t,function(e,o,t){return this.getImageInternal(e,o,t,i)}.bind(this));this.reprojectedRevision_=this.getRevision();return this.reprojectedImage_}};ol.source.Image.prototype.getImageInternal=goog.abstractMethod;ol.source.Image.prototype.handleImageChange=function(e){var o=e.target;switch(o.getState()){case ol.ImageState.LOADING:this.dispatchEvent(new ol.source.ImageEvent(ol.source.ImageEventType.IMAGELOADSTART,o));break;case ol.ImageState.LOADED:this.dispatchEvent(new ol.source.ImageEvent(ol.source.ImageEventType.IMAGELOADEND,o));break;case ol.ImageState.ERROR:this.dispatchEvent(new ol.source.ImageEvent(ol.source.ImageEventType.IMAGELOADERROR,o));break;default:}};ol.source.Image.defaultImageLoadFunction=function(e,o){e.getImage().src=o};ol.source.ImageEvent=function(e,o){goog.base(this,e);this.image=o};goog.inherits(ol.source.ImageEvent,ol.events.Event);ol.source.ImageEventType={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};goog.provide("ol.source.ImageCanvas");goog.require("ol.CanvasFunctionType");goog.require("ol.ImageCanvas");goog.require("ol.extent");goog.require("ol.source.Image");ol.source.ImageCanvas=function(e){goog.base(this,{attributions:e.attributions,logo:e.logo,projection:e.projection,resolutions:e.resolutions,state:e.state});this.canvasFunction_=e.canvasFunction;this.canvas_=null;this.renderedRevision_=0;this.ratio_=e.ratio!==undefined?e.ratio:1.5};goog.inherits(ol.source.ImageCanvas,ol.source.Image);ol.source.ImageCanvas.prototype.getImageInternal=function(e,o,t,r){o=this.findNearestResolution(o);var i=this.canvas_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==o&&i.getPixelRatio()==t&&ol.extent.containsExtent(i.getExtent(),e)){return i}e=e.slice();ol.extent.scaleFromCenter(e,this.ratio_);var n=ol.extent.getWidth(e)/o;var a=ol.extent.getHeight(e)/o;var l=[n*t,a*t];var s=this.canvasFunction_(e,o,t,l,r);if(s){i=new ol.ImageCanvas(e,o,t,this.getAttributions(),s)}this.canvas_=i;this.renderedRevision_=this.getRevision();return i};goog.provide("ol.Feature");goog.provide("ol.FeatureStyleFunction");goog.require("goog.asserts");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol");goog.require("ol.Object");goog.require("ol.geom.Geometry");goog.require("ol.style.Style");ol.Feature=function(e){goog.base(this);this.id_=undefined;this.geometryName_="geometry";this.style_=null;this.styleFunction_=undefined;this.geometryChangeKey_=null;ol.events.listen(this,ol.Object.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this);if(e!==undefined){if(e instanceof ol.geom.Geometry||!e){var o=e;this.setGeometry(o)}else{goog.asserts.assert(goog.isObject(e),"opt_geometryOrProperties should be an Object");var t=e;this.setProperties(t)}}};goog.inherits(ol.Feature,ol.Object);ol.Feature.prototype.clone=function(){var e=new ol.Feature(this.getProperties());e.setGeometryName(this.getGeometryName());var o=this.getGeometry();if(o){e.setGeometry(o.clone())}var t=this.getStyle();if(t){e.setStyle(t)}return e};ol.Feature.prototype.getGeometry=function(){return this.get(this.geometryName_)};ol.Feature.prototype.getId=function(){return this.id_};ol.Feature.prototype.getGeometryName=function(){return this.geometryName_};ol.Feature.prototype.getStyle=function(){return this.style_};ol.Feature.prototype.getStyleFunction=function(){return this.styleFunction_};ol.Feature.prototype.handleGeometryChange_=function(){this.changed()};ol.Feature.prototype.handleGeometryChanged_=function(){if(this.geometryChangeKey_){ol.events.unlistenByKey(this.geometryChangeKey_);this.geometryChangeKey_=null}var e=this.getGeometry();if(e){this.geometryChangeKey_=ol.events.listen(e,ol.events.EventType.CHANGE,this.handleGeometryChange_,this)}this.changed()};ol.Feature.prototype.setGeometry=function(e){this.set(this.geometryName_,e)};ol.Feature.prototype.setStyle=function(e){this.style_=e;this.styleFunction_=!e?undefined:ol.Feature.createStyleFunction(e);this.changed()};ol.Feature.prototype.setId=function(e){this.id_=e;this.changed()};ol.Feature.prototype.setGeometryName=function(e){ol.events.unlisten(this,ol.Object.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this);this.geometryName_=e;ol.events.listen(this,ol.Object.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this);this.handleGeometryChanged_()};ol.FeatureStyleFunction;ol.Feature.createStyleFunction=function(e){var o;if(goog.isFunction(e)){o=e}else{var t;if(goog.isArray(e)){t=e}else{goog.asserts.assertInstanceof(e,ol.style.Style,"obj should be an ol.style.Style");t=[e]}o=function(){return t}}return o};goog.provide("ol.TileLoadFunctionType");ol.TileLoadFunctionType;goog.provide("ol.VectorTile");goog.require("ol.Tile");goog.require("ol.TileCoord");goog.require("ol.TileLoadFunctionType");goog.require("ol.TileState");goog.require("ol.dom");goog.require("ol.proj.Projection");ol.TileReplayState;ol.VectorTile=function(e,o,t,r,i){goog.base(this,e,o);this.context_=ol.dom.createCanvasContext2D();this.format_=r;this.features_=null;this.loader_;this.projection_;this.replayState_={dirty:false,renderedRenderOrder:null,renderedRevision:-1,replayGroup:null};this.tileLoadFunction_=i;this.url_=t};goog.inherits(ol.VectorTile,ol.Tile);ol.VectorTile.prototype.getContext=function(){return this.context_};ol.VectorTile.prototype.disposeInternal=function(){goog.base(this,"disposeInternal")};ol.VectorTile.prototype.getFormat=function(){return this.format_};ol.VectorTile.prototype.getFeatures=function(){return this.features_};ol.VectorTile.prototype.getReplayState=function(){return this.replayState_};ol.VectorTile.prototype.getKey=function(){return this.url_};ol.VectorTile.prototype.getProjection=function(){return this.projection_};ol.VectorTile.prototype.load=function(){if(this.state==ol.TileState.IDLE){this.setState(ol.TileState.LOADING);this.tileLoadFunction_(this,this.url_);this.loader_(null,NaN,null)}};ol.VectorTile.prototype.setFeatures=function(e){this.features_=e;this.setState(ol.TileState.LOADED)};ol.VectorTile.prototype.setProjection=function(e){this.projection_=e};ol.VectorTile.prototype.setState=function(e){this.state=e;this.changed()};ol.VectorTile.prototype.setLoader=function(e){this.loader_=e};goog.provide("ol.format.FormatType");ol.format.FormatType={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"};goog.provide("goog.dom.xml");goog.require("goog.dom");goog.require("goog.dom.NodeType");goog.require("goog.userAgent");goog.dom.xml.MAX_XML_SIZE_KB=2*1024;goog.dom.xml.MAX_ELEMENT_DEPTH=256;goog.dom.xml.hasActiveXObjectSupport_=function(){if(!goog.userAgent.IE){return false}try{new ActiveXObject("MSXML2.DOMDocument");return true}catch(e){return false}};goog.dom.xml.ACTIVEX_SUPPORT=goog.userAgent.IE&&goog.dom.xml.hasActiveXObjectSupport_();goog.dom.xml.createDocument=function(e,o,t){if(o&&!e){throw Error("Can't create document with namespace and no root tag")}if(document.implementation&&document.implementation.createDocument&&!(goog.dom.xml.ACTIVEX_SUPPORT&&t)){return document.implementation.createDocument(o||"",e||"",null)}else if(goog.dom.xml.ACTIVEX_SUPPORT){var r=goog.dom.xml.createMsXmlDocument_();if(r){if(e){r.appendChild(r.createNode(goog.dom.NodeType.ELEMENT,e,o||""))}return r}}throw Error("Your browser does not support creating new documents")};goog.dom.xml.loadXml=function(e,o){if(typeof DOMParser!="undefined"&&!(goog.dom.xml.ACTIVEX_SUPPORT&&o)){return(new DOMParser).parseFromString(e,"application/xml")}else if(goog.dom.xml.ACTIVEX_SUPPORT){var t=goog.dom.xml.createMsXmlDocument_();t.loadXML(e);return t}throw Error("Your browser does not support loading xml documents")};goog.dom.xml.serialize=function(e){var o=e.xml;if(o){return o}if(typeof XMLSerializer!="undefined"){return(new XMLSerializer).serializeToString(e)}throw Error("Your browser does not support serializing XML documents")};goog.dom.xml.selectSingleNode=function(e,o){if(typeof e.selectSingleNode!="undefined"){var t=goog.dom.getOwnerDocument(e);if(typeof t.setProperty!="undefined"){t.setProperty("SelectionLanguage","XPath")}return e.selectSingleNode(o)}else if(document.implementation.hasFeature("XPath","3.0")){var t=goog.dom.getOwnerDocument(e);var r=t.createNSResolver(t.documentElement);var i=t.evaluate(o,e,r,XPathResult.FIRST_ORDERED_NODE_TYPE,null);return i.singleNodeValue}return null};goog.dom.xml.selectNodes=function(e,o){if(typeof e.selectNodes!="undefined"){var t=goog.dom.getOwnerDocument(e);if(typeof t.setProperty!="undefined"){t.setProperty("SelectionLanguage","XPath")}return e.selectNodes(o)}else if(document.implementation.hasFeature("XPath","3.0")){var t=goog.dom.getOwnerDocument(e);var r=t.createNSResolver(t.documentElement);var i=t.evaluate(o,e,r,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);var n=[];var a=i.snapshotLength;for(var l=0;l<a;l++){n.push(i.snapshotItem(l))}return n}else{return[]}};goog.dom.xml.setAttributes=function(e,o){for(var t in o){if(o.hasOwnProperty(t)){e.setAttribute(t,o[t])}}};goog.dom.xml.createMsXmlDocument_=function(){var e=new ActiveXObject("MSXML2.DOMDocument");if(e){e.resolveExternals=false;e.validateOnParse=false;try{e.setProperty("ProhibitDTD",true);e.setProperty("MaxXMLSize",goog.dom.xml.MAX_XML_SIZE_KB);e.setProperty("MaxElementDepth",goog.dom.xml.MAX_ELEMENT_DEPTH)}catch(e){}}return e};goog.provide("ol.xml");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.dom.xml");goog.require("goog.userAgent");goog.require("ol.array");ol.xml.NodeStackItem;ol.xml.Parser;ol.xml.Serializer;ol.xml.DOCUMENT=goog.dom.xml.createDocument();ol.xml.createElementNS_=function(e,o){return ol.xml.DOCUMENT.createElementNS(e,o)};ol.xml.createElementNSActiveX_=function(e,o){if(!e){e=""}return ol.xml.DOCUMENT.createNode(1,o,e)}
;ol.xml.createElementNS=document.implementation&&document.implementation.createDocument?ol.xml.createElementNS_:ol.xml.createElementNSActiveX_;ol.xml.getAllTextContent=function(e,o){return ol.xml.getAllTextContent_(e,o,[]).join("")};ol.xml.getAllTextContent_=function(e,o,t){if(e.nodeType==goog.dom.NodeType.CDATA_SECTION||e.nodeType==goog.dom.NodeType.TEXT){if(o){t.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,""))}else{t.push(e.nodeValue)}}else{var r;for(r=e.firstChild;r;r=r.nextSibling){ol.xml.getAllTextContent_(r,o,t)}}return t};ol.xml.getLocalName_=function(e){return e.localName};ol.xml.getLocalNameIE_=function(e){var o=e.localName;if(o!==undefined){return o}var t=e.baseName;goog.asserts.assert(t,"Failed to get localName/baseName of node %s",e);return t};ol.xml.getLocalName=goog.userAgent.IE?ol.xml.getLocalNameIE_:ol.xml.getLocalName_;ol.xml.isDocument_=function(e){return e instanceof Document};ol.xml.isDocumentIE_=function(e){return goog.isObject(e)&&e.nodeType==goog.dom.NodeType.DOCUMENT};ol.xml.isDocument=goog.userAgent.IE?ol.xml.isDocumentIE_:ol.xml.isDocument_;ol.xml.isNode_=function(e){return e instanceof Node};ol.xml.isNodeIE_=function(e){return goog.isObject(e)&&e.nodeType!==undefined};ol.xml.isNode=goog.userAgent.IE?ol.xml.isNodeIE_:ol.xml.isNode_;ol.xml.getAttributeNS_=function(e,o,t){return e.getAttributeNS(o,t)||""};ol.xml.getAttributeNSActiveX_=function(e,o,t){var r="";var i=ol.xml.getAttributeNodeNS(e,o,t);if(i!==undefined){r=i.nodeValue}return r};ol.xml.getAttributeNS=document.implementation&&document.implementation.createDocument?ol.xml.getAttributeNS_:ol.xml.getAttributeNSActiveX_;ol.xml.getAttributeNodeNS_=function(e,o,t){return e.getAttributeNodeNS(o,t)};ol.xml.getAttributeNodeNSActiveX_=function(e,o,t){var r=null;var i=e.attributes;var n,a;for(var l=0,s=i.length;l<s;++l){n=i[l];if(n.namespaceURI==o){a=n.prefix?n.prefix+":"+t:t;if(a==n.nodeName){r=n;break}}}return r};ol.xml.getAttributeNodeNS=document.implementation&&document.implementation.createDocument?ol.xml.getAttributeNodeNS_:ol.xml.getAttributeNodeNSActiveX_;ol.xml.setAttributeNS_=function(e,o,t,r){e.setAttributeNS(o,t,r)};ol.xml.setAttributeNSActiveX_=function(e,o,t,r){if(o){var i=e.ownerDocument.createNode(2,t,o);i.nodeValue=r;e.setAttributeNode(i)}else{e.setAttribute(t,r)}};ol.xml.setAttributeNS=document.implementation&&document.implementation.createDocument?ol.xml.setAttributeNS_:ol.xml.setAttributeNSActiveX_;ol.xml.parse=function(e){return(new DOMParser).parseFromString(e,"application/xml")};ol.xml.makeArrayExtender=function(e,o){return function(t,r){var i=e.call(o,t,r);if(i!==undefined){goog.asserts.assert(goog.isArray(i),"valueReader function is expected to return an array of values");var n=r[r.length-1];goog.asserts.assert(goog.isArray(n),"objectStack is supposed to be an array of arrays");ol.array.extend(n,i)}}};ol.xml.makeArrayPusher=function(e,o){return function(t,r){var i=e.call(o!==undefined?o:this,t,r);if(i!==undefined){var n=r[r.length-1];goog.asserts.assert(goog.isArray(n),"objectStack is supposed to be an array of arrays");n.push(i)}}};ol.xml.makeReplacer=function(e,o){return function(t,r){var i=e.call(o!==undefined?o:this,t,r);if(i!==undefined){r[r.length-1]=i}}};ol.xml.makeObjectPropertyPusher=function(e,o,t){goog.asserts.assert(e!==undefined,"undefined valueReader, expected function(this: T, Node, Array.<*>)");return function(r,i){var n=e.call(t!==undefined?t:this,r,i);if(n!==undefined){var a=i[i.length-1];var l=o!==undefined?o:r.localName;goog.asserts.assert(goog.isObject(a),"entity from stack was not an object");var s;if(l in a){s=a[l]}else{s=a[l]=[]}s.push(n)}}};ol.xml.makeObjectPropertySetter=function(e,o,t){goog.asserts.assert(e!==undefined,"undefined valueReader, expected function(this: T, Node, Array.<*>)");return function(r,i){var n=e.call(t!==undefined?t:this,r,i);if(n!==undefined){var a=i[i.length-1];var l=o!==undefined?o:r.localName;goog.asserts.assert(goog.isObject(a),"entity from stack was not an object");a[l]=n}}};ol.xml.makeChildAppender=function(e,o){return function(t,r,i){e.call(o!==undefined?o:this,t,r,i);var n=i[i.length-1];goog.asserts.assert(goog.isObject(n),"entity from stack was not an object");var a=n.node;goog.asserts.assert(ol.xml.isNode(a)||ol.xml.isDocument(a),"expected parentNode %s to be a Node or a Document",a);a.appendChild(t)}};ol.xml.makeArraySerializer=function(e,o){var t,r;return function(o,i,n){if(t===undefined){t={};var a={};a[o.localName]=e;t[o.namespaceURI]=a;r=ol.xml.makeSimpleNodeFactory(o.localName)}ol.xml.serialize(t,r,i,n)}};ol.xml.makeSimpleNodeFactory=function(e,o){var t=e;return function(e,r,i){var n=r[r.length-1];var a=n.node;goog.asserts.assert(ol.xml.isNode(a)||ol.xml.isDocument(a),"expected node %s to be a Node or a Document",a);var l=t;if(l===undefined){l=i}var s=o;if(o===undefined){s=a.namespaceURI}goog.asserts.assert(l!==undefined,"nodeName was undefined");return ol.xml.createElementNS(s,l)}};ol.xml.OBJECT_PROPERTY_NODE_FACTORY=ol.xml.makeSimpleNodeFactory();ol.xml.makeSequence=function(e,o){var t=o.length;var r=new Array(t);for(var i=0;i<t;++i){r[i]=e[o[i]]}return r};ol.xml.makeStructureNS=function(e,o,t){var r=t!==undefined?t:{};var i,n;for(i=0,n=e.length;i<n;++i){r[e[i]]=o}return r};ol.xml.parseNode=function(e,o,t,r){var i;for(i=o.firstElementChild;i;i=i.nextElementSibling){var n=e[i.namespaceURI];if(n!==undefined){var a=n[i.localName];if(a!==undefined){a.call(r,i,t)}}}};ol.xml.pushParseAndPop=function(e,o,t,r,i){r.push(e);ol.xml.parseNode(o,t,r,i);return r.pop()};ol.xml.serialize=function(e,o,t,r,i,n){var a=(i!==undefined?i:t).length;var l,s;for(var g=0;g<a;++g){l=t[g];if(l!==undefined){s=o.call(n,l,r,i!==undefined?i[g]:undefined);if(s!==undefined){e[s.namespaceURI][s.localName].call(n,s,l,r)}}}};ol.xml.pushSerializeAndPop=function(e,o,t,r,i,n,a){i.push(e);ol.xml.serialize(o,t,r,i,n,a);return i.pop()};goog.provide("ol.FeatureLoader");goog.provide("ol.FeatureUrlFunction");goog.provide("ol.featureloader");goog.require("goog.asserts");goog.require("ol.TileState");goog.require("ol.VectorTile");goog.require("ol.format.FormatType");goog.require("ol.proj");goog.require("ol.proj.Projection");goog.require("ol.xml");ol.FeatureLoader;ol.FeatureUrlFunction;ol.featureloader.loadFeaturesXhr=function(e,o,t,r){return function(i,n,a){var l=new XMLHttpRequest;l.open("GET",goog.isFunction(e)?e(i,n,a):e,true);if(o.getType()==ol.format.FormatType.ARRAY_BUFFER){l.responseType="arraybuffer"}l.onload=function(e){if(l.status>=200&&l.status<300){var i=o.getType();var n;if(i==ol.format.FormatType.JSON||i==ol.format.FormatType.TEXT){n=l.responseText}else if(i==ol.format.FormatType.XML){n=l.responseXML;if(!n){n=ol.xml.parse(l.responseText)}}else if(i==ol.format.FormatType.ARRAY_BUFFER){n=l.response}else{goog.asserts.fail("unexpected format type")}if(n){t.call(this,o.readFeatures(n,{featureProjection:a}),o.readProjection(n))}else{goog.asserts.fail("undefined or null source")}}else{r.call(this)}}.bind(this);l.send()}};ol.featureloader.tile=function(e,o){return ol.featureloader.loadFeaturesXhr(e,o,function(e,o){this.setProjection(o);this.setFeatures(e)},function(){this.setState(ol.TileState.ERROR)})};ol.featureloader.xhr=function(e,o){return ol.featureloader.loadFeaturesXhr(e,o,function(e,o){this.addFeatures(e)},ol.nullFunction)};goog.provide("ol.LoadingStrategy");goog.provide("ol.loadingstrategy");goog.require("ol.TileCoord");ol.LoadingStrategy;ol.loadingstrategy.all=function(e,o){return[[-Infinity,-Infinity,Infinity,Infinity]]};ol.loadingstrategy.bbox=function(e,o){return[e]};ol.loadingstrategy.tile=function(e){return function(o,t){var r=e.getZForResolution(t);var i=e.getTileRangeForExtentAndZ(o,r);var n=[];var a=[r,0,0];for(a[1]=i.minX;a[1]<=i.maxX;++a[1]){for(a[2]=i.minY;a[2]<=i.maxY;++a[2]){n.push(e.getTileCoordExtent(a))}}return n}};goog.provide("ol.ext.rbush");ol.ext.rbush;(function(){var e={};var o={exports:e};var t;(function(){"use strict";function e(o,t){if(!(this instanceof e))return new e(o,t);this._maxEntries=Math.max(4,o||9);this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4));if(t){this._initFormat(t)}this.clear()}e.prototype={all:function(){return this._all(this.data,[])},search:function(e){var o=this.data,t=[],r=this.toBBox;if(!y(e,o.bbox))return t;var i=[],n,a,l,s;while(o){for(n=0,a=o.children.length;n<a;n++){l=o.children[n];s=o.leaf?r(l):l.bbox;if(y(e,s)){if(o.leaf)t.push(l);else if(d(e,s))this._all(l,t);else i.push(l)}}o=i.pop()}return t},collides:function(e){var o=this.data,t=this.toBBox;if(!y(e,o.bbox))return false;var r=[],i,n,a,l;while(o){for(i=0,n=o.children.length;i<n;i++){a=o.children[i];l=o.leaf?t(a):a.bbox;if(y(e,l)){if(o.leaf||d(e,l))return true;r.push(a)}}o=r.pop()}return false},load:function(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(var o=0,t=e.length;o<t;o++){this.insert(e[o])}return this}var r=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length){this.data=r}else if(this.data.height===r.height){this._splitRoot(this.data,r)}else{if(this.data.height<r.height){var i=this.data;this.data=r;r=i}this._insert(r,this.data.height-r.height-1,true)}return this},insert:function(e){if(e)this._insert(e,this.data.height-1);return this},clear:function(){this.data={children:[],height:1,bbox:n(),leaf:true};return this},remove:function(e){if(!e)return this;var o=this.data,t=this.toBBox(e),r=[],i=[],n,a,l,s;while(o||r.length){if(!o){o=r.pop();a=r[r.length-1];n=i.pop();s=true}if(o.leaf){l=o.children.indexOf(e);if(l!==-1){o.children.splice(l,1);r.push(o);this._condense(r);return this}}if(!s&&!o.leaf&&d(o.bbox,t)){r.push(o);i.push(n);n=0;a=o;o=o.children[0]}else if(a){n++;o=a.children[n];s=false}else o=null}return this},toBBox:function(e){return e},compareMinX:function(e,o){return e[0]-o[0]},compareMinY:function(e,o){return e[1]-o[1]},toJSON:function(){return this.data},fromJSON:function(e){this.data=e;return this},_all:function(e,o){var t=[];while(e){if(e.leaf)o.push.apply(o,e.children);else t.push.apply(t,e.children);e=t.pop()}return o},_build:function(e,o,t,i){var n=t-o+1,a=this._maxEntries,l;if(n<=a){l={children:e.slice(o,t+1),height:1,bbox:null,leaf:true};r(l,this.toBBox);return l}if(!i){i=Math.ceil(Math.log(n)/Math.log(a));a=Math.ceil(n/Math.pow(a,i-1))}l={children:[],height:i,bbox:null,leaf:false};var s=Math.ceil(n/a),g=s*Math.ceil(Math.sqrt(a)),p,u,c,d;h(e,o,t,g,this.compareMinX);for(p=o;p<=t;p+=g){c=Math.min(p+g-1,t);h(e,p,c,s,this.compareMinY);for(u=p;u<=c;u+=s){d=Math.min(u+s-1,c);l.children.push(this._build(e,u,d,i-1))}}r(l,this.toBBox);return l},_chooseSubtree:function(e,o,t,r){var i,n,a,l,s,p,c,d;while(true){r.push(o);if(o.leaf||r.length-1===t)break;c=d=Infinity;for(i=0,n=o.children.length;i<n;i++){a=o.children[i];s=g(a.bbox);p=u(e,a.bbox)-s;if(p<d){d=p;c=s<c?s:c;l=a}else if(p===d){if(s<c){c=s;l=a}}}o=l}return o},_insert:function(e,o,t){var r=this.toBBox,i=t?e.bbox:r(e),n=[];var l=this._chooseSubtree(i,this.data,o,n);l.children.push(e);a(l.bbox,i);while(o>=0){if(n[o].children.length>this._maxEntries){this._split(n,o);o--}else break}this._adjustParentBBoxes(i,n,o)},_split:function(e,o){var t=e[o],i=t.children.length,n=this._minEntries;this._chooseSplitAxis(t,n,i);var a=this._chooseSplitIndex(t,n,i);var l={children:t.children.splice(a,t.children.length-a),height:t.height,bbox:null,leaf:false};if(t.leaf)l.leaf=true;r(t,this.toBBox);r(l,this.toBBox);if(o)e[o-1].children.push(l);else this._splitRoot(t,l)},_splitRoot:function(e,o){this.data={children:[e,o],height:e.height+1,bbox:null,leaf:false};r(this.data,this.toBBox)},_chooseSplitIndex:function(e,o,t){var r,n,a,l,s,p,u,d;p=u=Infinity;for(r=o;r<=t-o;r++){n=i(e,0,r,this.toBBox);a=i(e,r,t,this.toBBox);l=c(n,a);s=g(n)+g(a);if(l<p){p=l;d=r;u=s<u?s:u}else if(l===p){if(s<u){u=s;d=r}}}return d},_chooseSplitAxis:function(e,o,t){var r=e.leaf?this.compareMinX:l,i=e.leaf?this.compareMinY:s,n=this._allDistMargin(e,o,t,r),a=this._allDistMargin(e,o,t,i);if(n<a)e.children.sort(r)},_allDistMargin:function(e,o,t,r){e.children.sort(r);var n=this.toBBox,l=i(e,0,o,n),s=i(e,t-o,t,n),g=p(l)+p(s),u,c;for(u=o;u<t-o;u++){c=e.children[u];a(l,e.leaf?n(c):c.bbox);g+=p(l)}for(u=t-o-1;u>=o;u--){c=e.children[u];a(s,e.leaf?n(c):c.bbox);g+=p(s)}return g},_adjustParentBBoxes:function(e,o,t){for(var r=t;r>=0;r--){a(o[r].bbox,e)}},_condense:function(e){for(var o=e.length-1,t;o>=0;o--){if(e[o].children.length===0){if(o>0){t=e[o-1].children;t.splice(t.indexOf(e[o]),1)}else this.clear()}else r(e[o],this.toBBox)}},_initFormat:function(e){var o=["return a"," - b",";"];this.compareMinX=new Function("a","b",o.join(e[0]));this.compareMinY=new Function("a","b",o.join(e[1]));this.toBBox=new Function("a","return [a"+e.join(", a")+"];")}};function r(e,o){e.bbox=i(e,0,e.children.length,o)}function i(e,o,t,r){var i=n();for(var l=o,s;l<t;l++){s=e.children[l];a(i,e.leaf?r(s):s.bbox)}return i}function n(){return[Infinity,Infinity,-Infinity,-Infinity]}function a(e,o){e[0]=Math.min(e[0],o[0]);e[1]=Math.min(e[1],o[1]);e[2]=Math.max(e[2],o[2]);e[3]=Math.max(e[3],o[3]);return e}function l(e,o){return e.bbox[0]-o.bbox[0]}function s(e,o){return e.bbox[1]-o.bbox[1]}function g(e){return(e[2]-e[0])*(e[3]-e[1])}function p(e){return e[2]-e[0]+(e[3]-e[1])}function u(e,o){return(Math.max(o[2],e[2])-Math.min(o[0],e[0]))*(Math.max(o[3],e[3])-Math.min(o[1],e[1]))}function c(e,o){var t=Math.max(e[0],o[0]),r=Math.max(e[1],o[1]),i=Math.min(e[2],o[2]),n=Math.min(e[3],o[3]);return Math.max(0,i-t)*Math.max(0,n-r)}function d(e,o){return e[0]<=o[0]&&e[1]<=o[1]&&o[2]<=e[2]&&o[3]<=e[3]}function y(e,o){return o[0]<=e[2]&&o[1]<=e[3]&&o[2]>=e[0]&&o[3]>=e[1]}function h(e,o,t,r,i){var n=[o,t],a;while(n.length){t=n.pop();o=n.pop();if(t-o<=r)continue;a=o+Math.ceil((t-o)/r/2)*r;m(e,o,t,a,i);n.push(o,a,a,t)}}function m(e,o,t,r,i){var n,a,l,s,g,p,u,c,d;while(t>o){if(t-o>600){n=t-o+1;a=r-o+1;l=Math.log(n);s=.5*Math.exp(2*l/3);g=.5*Math.sqrt(l*s*(n-s)/n)*(a-n/2<0?-1:1);p=Math.max(o,Math.floor(r-a*s/n+g));u=Math.min(t,Math.floor(r+(n-a)*s/n+g));m(e,p,u,r,i)}c=e[r];a=o;d=t;f(e,o,r);if(i(e[t],c)>0)f(e,o,t);while(a<d){f(e,a,d);a++;d--;while(i(e[a],c)<0)a++;while(i(e[d],c)>0)d--}if(i(e[o],c)===0)f(e,o,d);else{d++;f(e,d,t)}if(d<=r)o=d+1;if(r<=d)t=d-1}}function f(e,o,t){var r=e[o];e[o]=e[t];e[t]=r}if(typeof t==="function"&&t.amd)t("rbush",function(){return e});else if(typeof o!=="undefined")o.exports=e;else if(typeof self!=="undefined")self.rbush=e;else window.rbush=e})();ol.ext.rbush=o.exports})();goog.provide("ol.structs.RBush");goog.require("goog.asserts");goog.require("ol.ext.rbush");goog.require("ol.extent");goog.require("ol.object");ol.structs.RBush=function(e){this.rbush_=ol.ext.rbush(e);this.items_={};if(goog.DEBUG){this.readers_=0}};ol.structs.RBush.prototype.insert=function(e,o){if(goog.DEBUG&&this.readers_){throw new Error("Can not insert value while reading")}var t=[e[0],e[1],e[2],e[3],o];this.rbush_.insert(t);goog.asserts.assert(!(goog.getUid(o)in this.items_),"uid (%s) of value (%s) already exists",goog.getUid(o),o);this.items_[goog.getUid(o)]=t};ol.structs.RBush.prototype.load=function(e,o){if(goog.DEBUG&&this.readers_){throw new Error("Can not insert values while reading")}goog.asserts.assert(e.length===o.length,"extens and values must have same length (%s === %s)",e.length,o.length);var t=new Array(o.length);for(var r=0,i=o.length;r<i;r++){var n=e[r];var a=o[r];var l=[n[0],n[1],n[2],n[3],a];t[r]=l;goog.asserts.assert(!(goog.getUid(a)in this.items_),"uid (%s) of value (%s) already exists",goog.getUid(a),a);this.items_[goog.getUid(a)]=l}this.rbush_.load(t)};ol.structs.RBush.prototype.remove=function(e){if(goog.DEBUG&&this.readers_){throw new Error("Can not remove value while reading")}var o=goog.getUid(e);goog.asserts.assert(o in this.items_,"uid (%s) of value (%s) does not exist",o,e);var t=this.items_[o];delete this.items_[o];return this.rbush_.remove(t)!==null};ol.structs.RBush.prototype.update=function(e,o){var t=goog.getUid(o);goog.asserts.assert(t in this.items_,"uid (%s) of value (%s) does not exist",t,o);var r=this.items_[t];if(!ol.extent.equals(r.slice(0,4),e)){if(goog.DEBUG&&this.readers_){throw new Error("Can not update extent while reading")}this.remove(o);this.insert(e,o)}};ol.structs.RBush.prototype.getAll=function(){var e=this.rbush_.all();return e.map(function(e){return e[4]})};ol.structs.RBush.prototype.getInExtent=function(e){var o=this.rbush_.search(e);return o.map(function(e){return e[4]})};ol.structs.RBush.prototype.forEach=function(e,o){if(goog.DEBUG){++this.readers_;try{return this.forEach_(this.getAll(),e,o)}finally{--this.readers_}}else{return this.forEach_(this.getAll(),e,o)}};ol.structs.RBush.prototype.forEachInExtent=function(e,o,t){if(goog.DEBUG){++this.readers_;try{return this.forEach_(this.getInExtent(e),o,t)}finally{--this.readers_}}else{return this.forEach_(this.getInExtent(e),o,t)}};ol.structs.RBush.prototype.forEach_=function(e,o,t){var r;for(var i=0,n=e.length;i<n;i++){r=o.call(t,e[i]);if(r){return r}}return r};ol.structs.RBush.prototype.isEmpty=function(){return ol.object.isEmpty(this.items_)};ol.structs.RBush.prototype.clear=function(){this.rbush_.clear();this.items_={}};ol.structs.RBush.prototype.getExtent=function(e){return this.rbush_.data.bbox};goog.provide("ol.source.Vector");goog.provide("ol.source.VectorEvent");goog.provide("ol.source.VectorEventType");goog.require("goog.asserts");goog.require("ol");goog.require("ol.Collection");goog.require("ol.CollectionEventType");goog.require("ol.Extent");goog.require("ol.Feature");goog.require("ol.FeatureLoader");goog.require("ol.LoadingStrategy");goog.require("ol.ObjectEventType");goog.require("ol.array");goog.require("ol.events");goog.require("ol.events.Event");goog.require("ol.events.EventType");goog.require("ol.extent");goog.require("ol.featureloader");goog.require("ol.loadingstrategy");goog.require("ol.object");goog.require("ol.proj");goog.require("ol.source.Source");goog.require("ol.source.State");goog.require("ol.structs.RBush");ol.source.VectorEventType={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"};ol.source.Vector=function(e){var o=e||{};goog.base(this,{attributions:o.attributions,logo:o.logo,projection:undefined,state:ol.source.State.READY,wrapX:o.wrapX!==undefined?o.wrapX:true});this.loader_=ol.nullFunction;if(o.loader!==undefined){this.loader_=o.loader}else if(o.url!==undefined){goog.asserts.assert(o.format!==undefined,"format must be set when url is set");this.loader_=ol.featureloader.xhr(o.url,o.format)}this.strategy_=o.strategy!==undefined?o.strategy:ol.loadingstrategy.all;var t=o.useSpatialIndex!==undefined?o.useSpatialIndex:true;this.featuresRtree_=t?new ol.structs.RBush:null;this.loadedExtentsRtree_=new ol.structs.RBush;this.nullGeometryFeatures_={};this.idIndex_={};this.undefIdIndex_={};this.featureChangeKeys_={};this.featuresCollection_=null;var r,i;if(o.features instanceof ol.Collection){r=o.features;i=r.getArray()}else if(goog.isArray(o.features)){i=o.features}if(!t&&r===undefined){r=new ol.Collection(i)}if(i!==undefined){this.addFeaturesInternal(i)}if(r!==undefined){this.bindFeaturesCollection_(r)}};goog.inherits(ol.source.Vector,ol.source.Source);ol.source.Vector.prototype.addFeature=function(e){this.addFeatureInternal(e);this.changed()};ol.source.Vector.prototype.addFeatureInternal=function(e){var o=goog.getUid(e).toString();if(!this.addToIndex_(o,e)){return}this.setupChangeEvents_(o,e);var t=e.getGeometry();if(t){var r=t.getExtent();if(this.featuresRtree_){this.featuresRtree_.insert(r,e)}}else{this.nullGeometryFeatures_[o]=e}this.dispatchEvent(new ol.source.VectorEvent(ol.source.VectorEventType.ADDFEATURE,e))};ol.source.Vector.prototype.setupChangeEvents_=function(e,o){goog.asserts.assert(!(e in this.featureChangeKeys_),"key (%s) not yet registered in featureChangeKey",e);this.featureChangeKeys_[e]=[ol.events.listen(o,ol.events.EventType.CHANGE,this.handleFeatureChange_,this),ol.events.listen(o,ol.ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_,this)]};ol.source.Vector.prototype.addToIndex_=function(e,o){var t=true;var r=o.getId();if(r!==undefined){if(!(r.toString()in this.idIndex_)){this.idIndex_[r.toString()]=o}else{t=false}}else{goog.asserts.assert(!(e in this.undefIdIndex_),"Feature already added to the source");this.undefIdIndex_[e]=o}return t};ol.source.Vector.prototype.addFeatures=function(e){this.addFeaturesInternal(e);this.changed()};ol.source.Vector.prototype.addFeaturesInternal=function(e){var o,t,r,i;var n=[];var a=[];var l=[];for(t=0,r=e.length;t<r;t++){i=e[t];o=goog.getUid(i).toString();if(this.addToIndex_(o,i)){a.push(i)}}for(t=0,r=a.length;t<r;t++){i=a[t];o=goog.getUid(i).toString();this.setupChangeEvents_(o,i);var s=i.getGeometry();if(s){var g=s.getExtent();n.push(g);l.push(i)}else{this.nullGeometryFeatures_[o]=i}}if(this.featuresRtree_){this.featuresRtree_.load(n,l)}for(t=0,r=a.length;t<r;t++){this.dispatchEvent(new ol.source.VectorEvent(ol.source.VectorEventType.ADDFEATURE,a[t]))}};ol.source.Vector.prototype.bindFeaturesCollection_=function(e){goog.asserts.assert(!this.featuresCollection_,"bindFeaturesCollection can only be called once");var o=false;ol.events.listen(this,ol.source.VectorEventType.ADDFEATURE,function(t){if(!o){o=true;e.push(t.feature);o=false}});ol.events.listen(this,ol.source.VectorEventType.REMOVEFEATURE,function(t){if(!o){o=true;e.remove(t.feature);o=false}});ol.events.listen(e,ol.CollectionEventType.ADD,function(e){if(!o){var t=e.element;goog.asserts.assertInstanceof(t,ol.Feature);o=true;this.addFeature(t);o=false}},this);ol.events.listen(e,ol.CollectionEventType.REMOVE,function(e){if(!o){var t=e.element;goog.asserts.assertInstanceof(t,ol.Feature);o=true;this.removeFeature(t);o=false}},this);this.featuresCollection_=e};ol.source.Vector.prototype.clear=function(e){if(e){for(var o in this.featureChangeKeys_){var t=this.featureChangeKeys_[o];t.forEach(ol.events.unlistenByKey)}if(!this.featuresCollection_){this.featureChangeKeys_={};this.idIndex_={};this.undefIdIndex_={}}}else{if(this.featuresRtree_){this.featuresRtree_.forEach(this.removeFeatureInternal,this);for(var r in this.nullGeometryFeatures_){this.removeFeatureInternal(this.nullGeometryFeatures_[r])}}}if(this.featuresCollection_){this.featuresCollection_.clear()}goog.asserts.assert(ol.object.isEmpty(this.featureChangeKeys_),"featureChangeKeys is an empty object now");goog.asserts.assert(ol.object.isEmpty(this.idIndex_),"idIndex is an empty object now");goog.asserts.assert(ol.object.isEmpty(this.undefIdIndex_),"undefIdIndex is an empty object now");if(this.featuresRtree_){this.featuresRtree_.clear()}this.loadedExtentsRtree_.clear();this.nullGeometryFeatures_={};var i=new ol.source.VectorEvent(ol.source.VectorEventType.CLEAR);this.dispatchEvent(i);this.changed()};ol.source.Vector.prototype.forEachFeature=function(e,o){if(this.featuresRtree_){return this.featuresRtree_.forEach(e,o)}else if(this.featuresCollection_){return this.featuresCollection_.forEach(e,o)}};ol.source.Vector.prototype.forEachFeatureAtCoordinateDirect=function(e,o,t){var r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(r){var i=r.getGeometry();goog.asserts.assert(i,"feature geometry is defined and not null");if(i.containsCoordinate(e)){return o.call(t,r)}else{return undefined}})};ol.source.Vector.prototype.forEachFeatureInExtent=function(e,o,t){if(this.featuresRtree_){return this.featuresRtree_.forEachInExtent(e,o,t)}else if(this.featuresCollection_){return this.featuresCollection_.forEach(o,t)}};ol.source.Vector.prototype.forEachFeatureIntersectingExtent=function(e,o,t){return this.forEachFeatureInExtent(e,function(r){var i=r.getGeometry();goog.asserts.assert(i,"feature geometry is defined and not null");if(i.intersectsExtent(e)){var n=o.call(t,r);if(n){return n}}})};ol.source.Vector.prototype.getFeaturesCollection=function(){return this.featuresCollection_};ol.source.Vector.prototype.getFeatures=function(){var e;if(this.featuresCollection_){e=this.featuresCollection_.getArray()}else if(this.featuresRtree_){e=this.featuresRtree_.getAll();if(!ol.object.isEmpty(this.nullGeometryFeatures_)){ol.array.extend(e,ol.object.getValues(this.nullGeometryFeatures_))}}goog.asserts.assert(e!==undefined,"Neither featuresRtree_ nor featuresCollection_ are available");return e};ol.source.Vector.prototype.getFeaturesAtCoordinate=function(e){var o=[];this.forEachFeatureAtCoordinateDirect(e,function(e){o.push(e)});return o};ol.source.Vector.prototype.getFeaturesInExtent=function(e){goog.asserts.assert(this.featuresRtree_,"getFeaturesInExtent does not work when useSpatialIndex is set to false");return this.featuresRtree_.getInExtent(e)};ol.source.Vector.prototype.getClosestFeatureToCoordinate=function(e){var o=e[0];var t=e[1];var r=null;var i=[NaN,NaN];var n=Infinity;var a=[-Infinity,-Infinity,Infinity,Infinity];goog.asserts.assert(this.featuresRtree_,"getClosestFeatureToCoordinate does not work with useSpatialIndex set "+"to false");this.featuresRtree_.forEachInExtent(a,function(e){var l=e.getGeometry();goog.asserts.assert(l,"feature geometry is defined and not null");var s=n;n=l.closestPointXY(o,t,i,n);if(n<s){r=e;var g=Math.sqrt(n);a[0]=o-g;a[1]=t-g;a[2]=o+g;a[3]=t+g}});return r};ol.source.Vector.prototype.getExtent=function(){goog.asserts.assert(this.featuresRtree_,"getExtent does not work when useSpatialIndex is set to false");return this.featuresRtree_.getExtent()};ol.source.Vector.prototype.getFeatureById=function(e){var o=this.idIndex_[e.toString()];return o!==undefined?o:null};ol.source.Vector.prototype.handleFeatureChange_=function(e){var o=e.target;var t=goog.getUid(o).toString();var r=o.getGeometry();if(!r){if(!(t in this.nullGeometryFeatures_)){if(this.featuresRtree_){this.featuresRtree_.remove(o)}this.nullGeometryFeatures_[t]=o}}else{var i=r.getExtent();if(t in this.nullGeometryFeatures_){delete this.nullGeometryFeatures_[t];if(this.featuresRtree_){this.featuresRtree_.insert(i,o)}}else{if(this.featuresRtree_){this.featuresRtree_.update(i,o)}}}var n=o.getId();var a;if(n!==undefined){var l=n.toString();if(t in this.undefIdIndex_){delete this.undefIdIndex_[t];this.idIndex_[l]=o}else{if(this.idIndex_[l]!==o){a=this.removeFromIdIndex_(o);goog.asserts.assert(a,"Expected feature to be removed from index");this.idIndex_[l]=o}}}else{if(!(t in this.undefIdIndex_)){a=this.removeFromIdIndex_(o);goog.asserts.assert(a,"Expected feature to be removed from index");this.undefIdIndex_[t]=o}else{goog.asserts.assert(this.undefIdIndex_[t]===o,"feature keyed under %s in undefIdKeys",t)}}this.changed();this.dispatchEvent(new ol.source.VectorEvent(ol.source.VectorEventType.CHANGEFEATURE,o))};ol.source.Vector.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&ol.object.isEmpty(this.nullGeometryFeatures_)};ol.source.Vector.prototype.loadFeatures=function(e,o,t){var r=this.loadedExtentsRtree_;var i=this.strategy_(e,o);var n,a;for(n=0,a=i.length;n<a;++n){var l=i[n];var s=r.forEachInExtent(l,function(e){return ol.extent.containsExtent(e.extent,l)});if(!s){this.loader_.call(this,l,o,t);r.insert(l,{extent:l.slice()})}}};ol.source.Vector.prototype.removeFeature=function(e){var o=goog.getUid(e).toString();if(o in this.nullGeometryFeatures_){delete this.nullGeometryFeatures_[o]}else{if(this.featuresRtree_){this.featuresRtree_.remove(e)}}this.removeFeatureInternal(e);this.changed()};ol.source.Vector.prototype.removeFeatureInternal=function(e){var o=goog.getUid(e).toString();goog.asserts.assert(o in this.featureChangeKeys_,"featureKey exists in featureChangeKeys");this.featureChangeKeys_[o].forEach(ol.events.unlistenByKey);delete this.featureChangeKeys_[o];var t=e.getId();if(t!==undefined){delete this.idIndex_[t.toString()]}else{delete this.undefIdIndex_[o]}this.dispatchEvent(new ol.source.VectorEvent(ol.source.VectorEventType.REMOVEFEATURE,e))};ol.source.Vector.prototype.removeFromIdIndex_=function(e){var o=false;for(var t in this.idIndex_){if(this.idIndex_[t]===e){delete this.idIndex_[t];o=true;break}}return o};ol.source.VectorEvent=function(e,o){goog.base(this,e);this.feature=o};goog.inherits(ol.source.VectorEvent,ol.events.Event);goog.provide("ol.source.ImageVector");goog.require("goog.asserts");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("goog.vec.Mat4");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.render.canvas.ReplayGroup");goog.require("ol.renderer.vector");goog.require("ol.source.ImageCanvas");goog.require("ol.source.Vector");goog.require("ol.style.Style");goog.require("ol.vec.Mat4");ol.source.ImageVector=function(e){this.source_=e.source;this.transform_=goog.vec.Mat4.createNumber();this.canvasContext_=ol.dom.createCanvasContext2D();this.canvasSize_=[0,0];this.replayGroup_=null;goog.base(this,{attributions:e.attributions,canvasFunction:this.canvasFunctionInternal_.bind(this),logo:e.logo,projection:e.projection,ratio:e.ratio,resolutions:e.resolutions,state:this.source_.getState()});this.style_=null;this.styleFunction_=undefined;this.setStyle(e.style);ol.events.listen(this.source_,ol.events.EventType.CHANGE,this.handleSourceChange_,this)};goog.inherits(ol.source.ImageVector,ol.source.ImageCanvas);ol.source.ImageVector.prototype.canvasFunctionInternal_=function(e,o,t,r,i){var n=new ol.render.canvas.ReplayGroup(ol.renderer.vector.getTolerance(o,t),e,o);this.source_.loadFeatures(e,o,i);var a=false;this.source_.forEachFeatureInExtent(e,function(e){a=a||this.renderFeature_(e,o,t,n)},this);n.finish();if(a){return null}if(this.canvasSize_[0]!=r[0]||this.canvasSize_[1]!=r[1]){this.canvasContext_.canvas.width=r[0];this.canvasContext_.canvas.height=r[1];this.canvasSize_[0]=r[0];this.canvasSize_[1]=r[1]}else{this.canvasContext_.clearRect(0,0,r[0],r[1])}var l=this.getTransform_(ol.extent.getCenter(e),o,t,r);n.replay(this.canvasContext_,t,l,0,{});this.replayGroup_=n;return this.canvasContext_.canvas};ol.source.ImageVector.prototype.forEachFeatureAtCoordinate=function(e,o,t,r,i){if(!this.replayGroup_){return undefined}else{var n={};return this.replayGroup_.forEachFeatureAtCoordinate(e,o,0,r,function(e){goog.asserts.assert(e!==undefined,"passed a feature");var o=goog.getUid(e).toString();if(!(o in n)){n[o]=true;return i(e)}})}};ol.source.ImageVector.prototype.getSource=function(){return this.source_};ol.source.ImageVector.prototype.getStyle=function(){return this.style_};ol.source.ImageVector.prototype.getStyleFunction=function(){return this.styleFunction_};ol.source.ImageVector.prototype.getTransform_=function(e,o,t,r){return ol.vec.Mat4.makeTransform2D(this.transform_,r[0]/2,r[1]/2,t/o,-t/o,0,-e[0],-e[1])};ol.source.ImageVector.prototype.handleImageChange_=function(e){this.changed()};ol.source.ImageVector.prototype.handleSourceChange_=function(){this.setState(this.source_.getState())};ol.source.ImageVector.prototype.renderFeature_=function(e,o,t,r){var i;var n=e.getStyleFunction();if(n){i=n.call(e,o)}else if(this.styleFunction_){i=this.styleFunction_(e,o)}if(!i){return false}var a,l,s=false;if(!goog.isArray(i)){i=[i]}for(a=0,l=i.length;a<l;++a){s=ol.renderer.vector.renderFeature(r,e,i[a],ol.renderer.vector.getSquaredTolerance(o,t),this.handleImageChange_,this)||s}return s};ol.source.ImageVector.prototype.setStyle=function(e){this.style_=e!==undefined?e:ol.style.defaultStyleFunction;this.styleFunction_=!e?undefined:ol.style.createStyleFunction(this.style_);this.changed()};goog.provide("ol.renderer.canvas.ImageLayer");goog.require("goog.asserts");goog.require("goog.functions");goog.require("goog.vec.Mat4");goog.require("ol.ImageBase");goog.require("ol.ViewHint");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.layer.Image");goog.require("ol.proj");goog.require("ol.renderer.canvas.Layer");goog.require("ol.source.ImageVector");goog.require("ol.vec.Mat4");ol.renderer.canvas.ImageLayer=function(e){goog.base(this,e);this.image_=null;this.imageTransform_=goog.vec.Mat4.createNumber();this.imageTransformInv_=null;this.hitCanvasContext_=null};goog.inherits(ol.renderer.canvas.ImageLayer,ol.renderer.canvas.Layer)
;ol.renderer.canvas.ImageLayer.prototype.forEachFeatureAtCoordinate=function(e,o,t,r){var i=this.getLayer();var n=i.getSource();var a=o.viewState.resolution;var l=o.viewState.rotation;var s=o.skippedFeatureUids;return n.forEachFeatureAtCoordinate(e,a,l,s,function(e){return t.call(r,e,i)})};ol.renderer.canvas.ImageLayer.prototype.forEachLayerAtPixel=function(e,o,t,r){if(!this.getImage()){return undefined}if(this.getLayer().getSource()instanceof ol.source.ImageVector){var i=e.slice();ol.vec.Mat4.multVec2(o.pixelToCoordinateMatrix,i,i);var n=this.forEachFeatureAtCoordinate(i,o,goog.functions.TRUE,this);if(n){return t.call(r,this.getLayer())}else{return undefined}}else{if(!this.imageTransformInv_){this.imageTransformInv_=goog.vec.Mat4.createNumber();goog.vec.Mat4.invert(this.imageTransform_,this.imageTransformInv_)}var a=this.getPixelOnCanvas(e,this.imageTransformInv_);if(!this.hitCanvasContext_){this.hitCanvasContext_=ol.dom.createCanvasContext2D(1,1)}this.hitCanvasContext_.clearRect(0,0,1,1);this.hitCanvasContext_.drawImage(this.getImage(),a[0],a[1],1,1,0,0,1,1);var l=this.hitCanvasContext_.getImageData(0,0,1,1).data;if(l[3]>0){return t.call(r,this.getLayer())}else{return undefined}}};ol.renderer.canvas.ImageLayer.prototype.getImage=function(){return!this.image_?null:this.image_.getImage()};ol.renderer.canvas.ImageLayer.prototype.getImageTransform=function(){return this.imageTransform_};ol.renderer.canvas.ImageLayer.prototype.prepareFrame=function(e,o){var t=e.pixelRatio;var r=e.viewState;var i=r.center;var n=r.resolution;var a;var l=this.getLayer();goog.asserts.assertInstanceof(l,ol.layer.Image,"layer is an instance of ol.layer.Image");var s=l.getSource();var g=e.viewHints;var p=e.extent;if(o.extent!==undefined){p=ol.extent.getIntersection(p,o.extent)}if(!g[ol.ViewHint.ANIMATING]&&!g[ol.ViewHint.INTERACTING]&&!ol.extent.isEmpty(p)){var u=r.projection;if(!ol.ENABLE_RASTER_REPROJECTION){var c=s.getProjection();if(c){goog.asserts.assert(ol.proj.equivalent(u,c),"projection and sourceProjection are equivalent");u=c}}a=s.getImage(p,n,t,u);if(a){var d=this.loadImage(a);if(d){this.image_=a}}}if(this.image_){a=this.image_;var y=a.getExtent();var h=a.getResolution();var m=a.getPixelRatio();var f=t*h/(n*m);ol.vec.Mat4.makeTransform2D(this.imageTransform_,t*e.size[0]/2,t*e.size[1]/2,f,f,0,m*(y[0]-i[0])/h,m*(i[1]-y[3])/h);this.imageTransformInv_=null;this.updateAttributions(e.attributions,a.getAttributions());this.updateLogos(e,s)}return!!this.image_};goog.provide("ol.renderer.canvas.TileLayer");goog.require("goog.asserts");goog.require("ol.TileRange");goog.require("ol.TileState");goog.require("ol.array");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.layer.Tile");goog.require("ol.object");goog.require("ol.render.EventType");goog.require("ol.renderer.canvas.Layer");goog.require("ol.source.Tile");ol.renderer.canvas.TileLayer=function(e){goog.base(this,e);this.clipTileCoords_={};this.context_=ol.dom.createCanvasContext2D();this.renderedTiles_=null;this.tmpExtent_=ol.extent.createEmpty()};goog.inherits(ol.renderer.canvas.TileLayer,ol.renderer.canvas.Layer);ol.renderer.canvas.TileLayer.prototype.composeFrame=function(e,o,t){var r=e.pixelRatio;var i=e.viewState;var n=i.center;var a=i.projection;var l=i.resolution;var s=e.size;var g=r/l;var p=this.getLayer();var u=p.getSource();goog.asserts.assertInstanceof(u,ol.source.Tile,"source is an ol.source.Tile");var c=u.getGutter(a);var d=this.getTransform(e,0);this.dispatchPreComposeEvent(t,e,d);var y;if(p.hasListener(ol.render.EventType.RENDER)){this.context_.canvas.width=t.canvas.width;this.context_.canvas.height=t.canvas.height;y=this.context_}else{y=t}var h=Math.round(r*s[0]/2);var m=Math.round(r*s[1]/2);var f=y.globalAlpha;y.globalAlpha=o.opacity;var v=u.getTileGridForProjection(a);var _=this.renderedTiles_;var E,S,T,P,x,b;var M,L,R,C,A,I,O,N,w,D,F,G;var U,q,k;for(A=0,I=_.length;A<I;++A){F=_[A];G=v.getTileCoordExtent(F.getTileCoord(),this.tmpExtent_);R=F.getTileCoord()[0];D=ol.extent.getBottomLeft(v.getTileCoordExtent(v.getTileCoordForCoordAndZ(n,R)));k=Math.round(ol.extent.getWidth(G)*g);C=Math.round(ol.extent.getHeight(G)*g);w=Math.round((G[0]-D[0])*g/k)*k+h+Math.round((D[0]-n[0])*g);q=Math.round((D[1]-G[3])*g/C)*C+m+Math.round((n[1]-D[1])*g);b=this.clipTileCoords_[F.tileCoord.toString()];if(b){y.save();y.beginPath();y.moveTo(w+k,q);y.lineTo(w,q);y.lineTo(w,q+C);y.lineTo(w+k,q+C);y.closePath();for(O=0,N=b.length;O<N;++O){x=b[O];E=v.getTileCoordExtent(x);P=ol.extent.getBottomLeft(v.getTileCoordExtent(v.getTileCoordForCoordAndZ(n,x[0])));L=Math.round(ol.extent.getWidth(E)*g);S=Math.round(ol.extent.getHeight(E)*g);T=Math.round((E[0]-P[0])*g/L)*L+h+Math.round((P[0]-n[0])*g);M=Math.round((P[1]-E[3])*g/S)*S+m+Math.round((n[1]-P[1])*g);y.moveTo(T,M+S);y.lineTo(T,M);y.lineTo(T+L,M);y.lineTo(T+L,M+S);y.closePath()}y.clip()}U=u.getTilePixelSize(R,r,a);y.drawImage(F.getImage(),c,c,U[0],U[1],w,q,k,C);if(b){y.restore()}}if(y!=t){this.dispatchRenderEvent(y,e,d);t.drawImage(y.canvas,0,0)}y.globalAlpha=f;this.dispatchPostComposeEvent(t,e,d)};ol.renderer.canvas.TileLayer.prototype.prepareFrame=function(e,o){var t=e.pixelRatio;var r=e.viewState;var i=r.projection;var n=this.getLayer();goog.asserts.assertInstanceof(n,ol.layer.Tile,"layer is an instance of ol.layer.Tile");var a=n.getSource();var l=a.getTileGridForProjection(i);var s=l.getZForResolution(r.resolution);var g=l.getResolution(s);var p=r.center;var u;if(g==r.resolution){p=this.snapCenterToPixel(p,g,e.size);u=ol.extent.getForViewAndSize(p,g,r.rotation,e.size)}else{u=e.extent}if(o.extent!==undefined){u=ol.extent.getIntersection(u,o.extent)}if(ol.extent.isEmpty(u)){return false}var c=l.getTileRangeForExtentAndResolution(u,g);var d={};d[s]={};var y=this.createLoadedTileFinder(a,i,d);var h=n.getUseInterimTilesOnError();var m=ol.extent.createEmpty();var f=new ol.TileRange(0,0,0,0);var v,_,E,S,T;var P=function(e){var o=e.getState();return o==ol.TileState.LOADED||o==ol.TileState.EMPTY||o==ol.TileState.ERROR&&!h};for(S=c.minX;S<=c.maxX;++S){for(T=c.minY;T<=c.maxY;++T){E=a.getTile(s,S,T,t,i);if(!P(E)&&E.interimTile){E=E.interimTile}goog.asserts.assert(E);if(P(E)){d[s][E.tileCoord.toString()]=E;continue}_=l.forEachTileCoordParentTileRange(E.tileCoord,y,null,f,m);if(!_){v=l.getTileCoordChildTileRange(E.tileCoord,f,m);if(v){y(s+1,v)}}}}var x=Object.keys(d).map(Number);x.sort(ol.array.numberSafeCompareFunction);var b=[];var M,L,R,C,A;for(M=0,L=x.length;M<L;++M){R=x[M];A=d[R];for(C in A){E=A[C];if(E.getState()==ol.TileState.LOADED){b.push(E)}}}this.renderedTiles_=b;ol.object.clear(this.clipTileCoords_);if(!(a.getOpaque(i)&&o.opacity==1)){var I=this.clipTileCoords_;var O;for(M=b.length-1;M>=0;--M){O=b[M].getTileCoord();l.forEachTileCoordParentTileRange(O,function(e,o){var t=d[e];if(t){var r,i;for(r in t){i=t[r];if(o.contains(i.getTileCoord())&&i.getState()==ol.TileState.LOADED){if(!(r in I)){I[r]=[]}I[r].push(O);return true}}}return false},this,f,m)}}this.updateUsedTiles(e.usedTiles,a,s,c);this.manageTilePyramid(e,a,l,t,i,u,s,n.getPreload());this.scheduleExpireCache(e,a);this.updateLogos(e,a);return true};ol.renderer.canvas.TileLayer.prototype.forEachLayerAtPixel=function(e,o,t,r){var i=this.context_.canvas;var n=o.size;i.width=n[0];i.height=n[1];this.composeFrame(o,this.getLayer().getLayerState(),this.context_);var a=this.context_.getImageData(e[0],e[1],1,1).data;if(a[3]>0){return t.call(r,this.getLayer())}else{return undefined}};goog.provide("ol.renderer.canvas.VectorLayer");goog.require("goog.asserts");goog.require("ol.events");goog.require("ol.ViewHint");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.layer.Vector");goog.require("ol.render.EventType");goog.require("ol.render.canvas");goog.require("ol.render.canvas.ReplayGroup");goog.require("ol.renderer.canvas.Layer");goog.require("ol.renderer.vector");goog.require("ol.source.Vector");ol.renderer.canvas.VectorLayer=function(e){goog.base(this,e);this.dirty_=false;this.renderedRevision_=-1;this.renderedResolution_=NaN;this.renderedExtent_=ol.extent.createEmpty();this.renderedRenderOrder_=null;this.replayGroup_=null;this.context_=ol.dom.createCanvasContext2D()};goog.inherits(ol.renderer.canvas.VectorLayer,ol.renderer.canvas.Layer);ol.renderer.canvas.VectorLayer.prototype.composeFrame=function(e,o,t){var r=e.extent;var i=e.pixelRatio;var n=o.managed?e.skippedFeatureUids:{};var a=e.viewState;var l=a.projection;var s=a.rotation;var g=l.getExtent();var p=this.getLayer().getSource();goog.asserts.assertInstanceof(p,ol.source.Vector);var u=this.getTransform(e,0);this.dispatchPreComposeEvent(t,e,u);var c=this.replayGroup_;if(c&&!c.isEmpty()){var d=this.getLayer();var y;if(d.hasListener(ol.render.EventType.RENDER)){this.context_.canvas.width=t.canvas.width;this.context_.canvas.height=t.canvas.height;y=this.context_}else{y=t}var h=y.globalAlpha;y.globalAlpha=o.opacity;var m=e.size[0]*i;var f=e.size[1]*i;ol.render.canvas.rotateAtOffset(y,-s,m/2,f/2);c.replay(y,i,u,s,n);if(p.getWrapX()&&l.canWrapX()&&!ol.extent.containsExtent(g,r)){var v=r[0];var _=ol.extent.getWidth(g);var E=0;var S;while(v<g[0]){--E;S=_*E;u=this.getTransform(e,S);c.replay(y,i,u,s,n);v+=_}E=0;v=r[2];while(v>g[2]){++E;S=_*E;u=this.getTransform(e,S);c.replay(y,i,u,s,n);v-=_}u=this.getTransform(e,0)}ol.render.canvas.rotateAtOffset(y,s,m/2,f/2);if(y!=t){this.dispatchRenderEvent(y,e,u);t.drawImage(y.canvas,0,0)}y.globalAlpha=h}this.dispatchPostComposeEvent(t,e,u)};ol.renderer.canvas.VectorLayer.prototype.forEachFeatureAtCoordinate=function(e,o,t,r){if(!this.replayGroup_){return undefined}else{var i=o.viewState.resolution;var n=o.viewState.rotation;var a=this.getLayer();var l={};return this.replayGroup_.forEachFeatureAtCoordinate(e,i,n,{},function(e){goog.asserts.assert(e!==undefined,"received a feature");var o=goog.getUid(e).toString();if(!(o in l)){l[o]=true;return t.call(r,e,a)}})}};ol.renderer.canvas.VectorLayer.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()};ol.renderer.canvas.VectorLayer.prototype.prepareFrame=function(e,o){var t=this.getLayer();goog.asserts.assertInstanceof(t,ol.layer.Vector,"layer is an instance of ol.layer.Vector");var r=t.getSource();this.updateAttributions(e.attributions,r.getAttributions());this.updateLogos(e,r);var i=e.viewHints[ol.ViewHint.ANIMATING];var n=e.viewHints[ol.ViewHint.INTERACTING];var a=t.getUpdateWhileAnimating();var l=t.getUpdateWhileInteracting();if(!this.dirty_&&(!a&&i)||!l&&n){return true}var s=e.extent;var g=e.viewState;var p=g.projection;var u=g.resolution;var c=e.pixelRatio;var d=t.getRevision();var y=t.getRenderBuffer();var h=t.getRenderOrder();if(h===undefined){h=ol.renderer.vector.defaultOrder}var m=ol.extent.buffer(s,y*u);var f=g.projection.getExtent();if(r.getWrapX()&&g.projection.canWrapX()&&!ol.extent.containsExtent(f,e.extent)){var v=ol.extent.getWidth(f);var _=Math.max(ol.extent.getWidth(m)/2,v);m[0]=f[0]-_;m[2]=f[2]+_}if(!this.dirty_&&this.renderedResolution_==u&&this.renderedRevision_==d&&this.renderedRenderOrder_==h&&ol.extent.containsExtent(this.renderedExtent_,m)){return true}goog.dispose(this.replayGroup_);this.replayGroup_=null;this.dirty_=false;var E=new ol.render.canvas.ReplayGroup(ol.renderer.vector.getTolerance(u,c),m,u,t.getRenderBuffer());r.loadFeatures(m,u,p);var S=function(e){var o;var r=e.getStyleFunction();if(r){o=r.call(e,u)}else{r=t.getStyleFunction();if(r){o=r(e,u)}}if(o){var i=this.renderFeature(e,u,c,o,E);this.dirty_=this.dirty_||i}};if(h){var T=[];r.forEachFeatureInExtent(m,function(e){T.push(e)},this);T.sort(h);T.forEach(S,this)}else{r.forEachFeatureInExtent(m,S,this)}E.finish();this.renderedResolution_=u;this.renderedRevision_=d;this.renderedRenderOrder_=h;this.renderedExtent_=m;this.replayGroup_=E;return true};ol.renderer.canvas.VectorLayer.prototype.renderFeature=function(e,o,t,r,i){if(!r){return false}var n=false;if(goog.isArray(r)){for(var a=0,l=r.length;a<l;++a){n=ol.renderer.vector.renderFeature(i,e,r[a],ol.renderer.vector.getSquaredTolerance(o,t),this.handleStyleImageChange_,this)||n}}else{n=ol.renderer.vector.renderFeature(i,e,r,ol.renderer.vector.getSquaredTolerance(o,t),this.handleStyleImageChange_,this)||n}return n};goog.provide("ol.TileUrlFunction");goog.provide("ol.TileUrlFunctionType");goog.require("goog.asserts");goog.require("goog.math");goog.require("ol.TileCoord");goog.require("ol.tilecoord");ol.TileUrlFunctionType;ol.TileCoordTransformType;ol.TileUrlFunction.createFromTemplate=function(e,o){var t=/\{z\}/g;var r=/\{x\}/g;var i=/\{y\}/g;var n=/\{-y\}/g;return function(a,l,s){if(!a){return undefined}else{return e.replace(t,a[0].toString()).replace(r,a[1].toString()).replace(i,function(){var e=-a[2]-1;return e.toString()}).replace(n,function(){var e=a[0];var t=o.getFullTileRange(e);goog.asserts.assert(t,"The {-y} template requires a tile grid with extent");var r=t.getHeight()+a[2];return r.toString()})}}};ol.TileUrlFunction.createFromTemplates=function(e,o){var t=e.length;var r=new Array(t);for(var i=0;i<t;++i){r[i]=ol.TileUrlFunction.createFromTemplate(e[i],o)}return ol.TileUrlFunction.createFromTileUrlFunctions(r)};ol.TileUrlFunction.createFromTileUrlFunctions=function(e){goog.asserts.assert(e.length>0,"Length of tile url functions should be greater than 0");if(e.length===1){return e[0]}return function(o,t,r){if(!o){return undefined}else{var i=ol.tilecoord.hash(o);var n=goog.math.modulo(i,e.length);return e[n](o,t,r)}}};ol.TileUrlFunction.nullTileUrlFunction=function(e,o,t){return undefined};ol.TileUrlFunction.expandUrl=function(e){var o=[];var t=/\{(\d)-(\d)\}/.exec(e)||/\{([a-z])-([a-z])\}/.exec(e);if(t){var r=t[1].charCodeAt(0);var i=t[2].charCodeAt(0);var n;for(n=r;n<=i;++n){o.push(e.replace(t[0],String.fromCharCode(n)))}}else{o.push(e)}return o};goog.provide("ol.source.UrlTile");goog.require("ol.events");goog.require("ol.TileLoadFunctionType");goog.require("ol.TileState");goog.require("ol.TileUrlFunction");goog.require("ol.TileUrlFunctionType");goog.require("ol.proj");goog.require("ol.source.Tile");goog.require("ol.source.TileEvent");ol.source.UrlTileOptions;ol.source.UrlTile=function(e){goog.base(this,{attributions:e.attributions,cacheSize:e.cacheSize,extent:e.extent,logo:e.logo,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX});this.tileLoadFunction=e.tileLoadFunction;this.tileUrlFunction=this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):ol.TileUrlFunction.nullTileUrlFunction;this.urls=null;if(e.urls){this.setUrls(e.urls)}else if(e.url){this.setUrl(e.url)}if(e.tileUrlFunction){this.setTileUrlFunction(e.tileUrlFunction)}};goog.inherits(ol.source.UrlTile,ol.source.Tile);ol.source.UrlTile.prototype.fixedTileUrlFunction;ol.source.UrlTile.prototype.getTileLoadFunction=function(){return this.tileLoadFunction};ol.source.UrlTile.prototype.getTileUrlFunction=function(){return this.tileUrlFunction};ol.source.UrlTile.prototype.getUrls=function(){return this.urls};ol.source.UrlTile.prototype.handleTileChange=function(e){var o=e.target;switch(o.getState()){case ol.TileState.LOADING:this.dispatchEvent(new ol.source.TileEvent(ol.source.TileEventType.TILELOADSTART,o));break;case ol.TileState.LOADED:this.dispatchEvent(new ol.source.TileEvent(ol.source.TileEventType.TILELOADEND,o));break;case ol.TileState.ERROR:this.dispatchEvent(new ol.source.TileEvent(ol.source.TileEventType.TILELOADERROR,o));break;default:}};ol.source.UrlTile.prototype.setTileLoadFunction=function(e){this.tileCache.clear();this.tileLoadFunction=e;this.changed()};ol.source.UrlTile.prototype.setTileUrlFunction=function(e){this.tileCache.clear();this.tileUrlFunction=e;this.changed()};ol.source.UrlTile.prototype.setUrl=function(e){var o=this.urls=ol.TileUrlFunction.expandUrl(e);this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):ol.TileUrlFunction.createFromTemplates(o,this.tileGrid))};ol.source.UrlTile.prototype.setUrls=function(e){this.urls=e;this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):ol.TileUrlFunction.createFromTemplates(e,this.tileGrid))};ol.source.UrlTile.prototype.useTile=function(e,o,t){var r=this.getKeyZXY(e,o,t);if(this.tileCache.containsKey(r)){this.tileCache.get(r)}};goog.provide("ol.source.VectorTile");goog.require("ol.TileState");goog.require("ol.VectorTile");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol.featureloader");goog.require("ol.source.UrlTile");ol.source.VectorTile=function(e){goog.base(this,{attributions:e.attributions,cacheSize:ol.DEFAULT_TILE_CACHE_HIGH_WATER_MARK/16,extent:e.extent,logo:e.logo,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:ol.source.VectorTile.defaultTileLoadFunction,tileUrlFunction:e.tileUrlFunction,tilePixelRatio:e.tilePixelRatio,url:e.url,urls:e.urls,wrapX:e.wrapX===undefined?true:e.wrapX});this.format_=e.format?e.format:null;this.tileClass=e.tileClass?e.tileClass:ol.VectorTile};goog.inherits(ol.source.VectorTile,ol.source.UrlTile);ol.source.VectorTile.prototype.getTile=function(e,o,t,r,i){var n=this.getKeyZXY(e,o,t);if(this.tileCache.containsKey(n)){return this.tileCache.get(n)}else{var a=[e,o,t];var l=this.getTileCoordForTileUrlFunction(a,i);var s=l?this.tileUrlFunction(l,r,i):undefined;var g=new this.tileClass(a,s!==undefined?ol.TileState.IDLE:ol.TileState.EMPTY,s!==undefined?s:"",this.format_,this.tileLoadFunction);ol.events.listen(g,ol.events.EventType.CHANGE,this.handleTileChange,this);this.tileCache.set(n,g);return g}};ol.source.VectorTile.defaultTileLoadFunction=function(e,o){e.setLoader(ol.featureloader.tile(o,e.getFormat()))};goog.provide("ol.renderer.canvas.VectorTileLayer");goog.require("goog.asserts");goog.require("ol.events");goog.require("goog.vec.Mat4");goog.require("ol.Feature");goog.require("ol.TileRange");goog.require("ol.TileState");goog.require("ol.VectorTile");goog.require("ol.ViewHint");goog.require("ol.array");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.geom.flat.transform");goog.require("ol.layer.VectorTile");goog.require("ol.proj");goog.require("ol.proj.Units");goog.require("ol.render.EventType");goog.require("ol.render.canvas.ReplayGroup");goog.require("ol.renderer.canvas.Layer");goog.require("ol.renderer.vector");goog.require("ol.size");goog.require("ol.source.VectorTile");goog.require("ol.vec.Mat4");ol.renderer.canvas.VectorTileLayer=function(e){goog.base(this,e);this.context_=ol.dom.createCanvasContext2D();this.dirty_=false;this.renderedTiles_=[];this.tmpExtent_=ol.extent.createEmpty();this.tmpSize_=[NaN,NaN];this.tmpTransform_=goog.vec.Mat4.createNumber()};goog.inherits(ol.renderer.canvas.VectorTileLayer,ol.renderer.canvas.Layer);ol.renderer.canvas.VectorTileLayer.prototype.composeFrame=function(e,o,t){var r=e.pixelRatio;var i=o.managed?e.skippedFeatureUids:{};var n=e.viewState;var a=n.center;var l=n.projection;var s=n.resolution;var g=n.rotation;var p=e.size;var u=r/s;var c=this.getLayer();var d=c.getSource();goog.asserts.assertInstanceof(d,ol.source.VectorTile,"Source is an ol.source.VectorTile");var y=d.getTilePixelRatio(r);var h=this.getTransform(e,0);this.dispatchPreComposeEvent(t,e,h);var m;if(c.hasListener(ol.render.EventType.RENDER)){this.context_.canvas.width=t.canvas.width;this.context_.canvas.height=t.canvas.height;m=this.context_}else{m=t}var f=m.globalAlpha;m.globalAlpha=o.opacity;var v=this.renderedTiles_;var _=d.getTileGrid();var E,S,T,P,x,b,M,L;var R,C,A,I,O,N;var w,D,F,G;var U,q,k,V;for(T=0,P=v.length;T<P;++T){O=v[T];A=O.getReplayState();D=_.getTileCoordExtent(O.getTileCoord(),this.tmpExtent_);E=O.getTileCoord()[0];q=ol.size.toSize(_.getTileSize(E),this.tmpSize_);C=O.getProjection().getUnits()==ol.proj.Units.TILE_PIXELS;U=_.getResolution(E);F=U/y;I=U/s;M=Math.round(r*p[0]/2);L=Math.round(r*p[1]/2);V=q[0]*r*I;S=q[1]*r*I;var B=q[0]*r;if(V<B/4||V>B*4){if(C){R=ol.extent.getTopLeft(D);k=ol.vec.Mat4.makeTransform2D(this.tmpTransform_,M,L,u*F,u*F,g,(R[0]-a[0])/F,(a[1]-R[1])/F)}else{k=h}A.replayGroup.replay(m,r,k,g,i)}else{G=d.getTilePixelSize(E,r,l);if(C){k=ol.vec.Mat4.makeTransform2D(this.tmpTransform_,0,0,u*F,u*F,g,-G[0]/2,-G[1]/2)}else{N=ol.extent.getCenter(D);k=ol.vec.Mat4.makeTransform2D(this.tmpTransform_,0,0,u,-u,-g,-N[0],-N[1])}w=O.getContext();if(A.resolution!==s||A.rotation!==g){A.resolution=s;A.rotation=g;w.canvas.width=V+.5;w.canvas.height=S+.5;w.translate(V/2,S/2);w.rotate(-g);A.replayGroup.replay(w,r,k,g,i,false)}b=ol.vec.Mat4.makeTransform2D(this.tmpTransform_,0,0,u,-u,0,-a[0],-a[1]);x=ol.geom.flat.transform.transform2D(ol.extent.getTopLeft(D),0,1,2,b);m.drawImage(w.canvas,Math.round(x[0]+M),Math.round(x[1])+L)}}if(m!=t){this.dispatchRenderEvent(m,e,h);t.drawImage(m.canvas,0,0)}m.globalAlpha=f;this.dispatchPostComposeEvent(t,e,h)};ol.renderer.canvas.VectorTileLayer.prototype.createReplayGroup=function(e,o,t,r){var i=o.getRevision();var n=o.getRenderOrder()||null;var a=e.getReplayState();if(!a.dirty&&a.renderedRevision==i&&a.renderedRenderOrder==n){return}goog.dispose(a.replayGroup);a.replayGroup=null;a.dirty=false;var l=o.getSource();goog.asserts.assertInstanceof(l,ol.source.VectorTile,"Source is an ol.source.VectorTile");var s=l.getTileGrid();var g=e.getTileCoord();var p=e.getProjection();var u=p.getUnits()==ol.proj.Units.TILE_PIXELS;var c,d;if(u){var y=l.getTilePixelSize(g[0],t,e.getProjection());c=[0,0,y[0],y[1]]}else{c=s.getTileCoordExtent(g);if(!ol.proj.equivalent(r,p)){d=true;e.setProjection(r)}}var h=s.getResolution(g[0]);var m=u?l.getTilePixelRatio(t):h;a.dirty=false;var f=new ol.render.canvas.ReplayGroup(0,c,m,o.getRenderBuffer());var v=ol.renderer.vector.getSquaredTolerance(m,t);function _(e){var t;var r=e.getStyleFunction();if(r){goog.asserts.assertInstanceof(e,ol.Feature,"Got an ol.Feature");t=r.call(e,h)}else{r=o.getStyleFunction();if(r){t=r(e,h)}}if(t){if(!goog.isArray(t)){t=[t]}var i=this.renderFeature(e,v,t,f);this.dirty_=this.dirty_||i;a.dirty=a.dirty||i}}var E=e.getFeatures();if(n&&n!==a.renderedRenderOrder){E.sort(n)}var S;for(var T=0,P=E.length;T<P;++T){S=E[T];if(d){S.getGeometry().transform(p,r)}_.call(this,S)}f.finish();a.renderedRevision=i;a.renderedRenderOrder=n;a.replayGroup=f;a.resolution=NaN};ol.renderer.canvas.VectorTileLayer.prototype.forEachFeatureAtCoordinate=function(e,o,t,r){var i=o.pixelRatio;var n=o.viewState.resolution;var a=o.viewState.rotation;var l=this.getLayer();var s={};var g=this.renderedTiles_;var p=l.getSource();goog.asserts.assertInstanceof(p,ol.source.VectorTile,"Source is an ol.source.VectorTile");var u=p.getTileGrid();var c,d;var y,h,m,f;var v,_,E,S,T;for(y=0,h=g.length;y<h;++y){v=g[y];_=v.getTileCoord();E=p.getTileGrid().getTileCoordExtent(_,this.tmpExtent_);if(!ol.extent.containsCoordinate(E,e)){continue}if(v.getProjection().getUnits()===ol.proj.Units.TILE_PIXELS){m=ol.extent.getTopLeft(E);S=p.getTilePixelRatio(i);T=u.getResolution(_[0])/S;d=[(e[0]-m[0])/T,(m[1]-e[1])/T];n=S}else{d=e}f=v.getReplayState().replayGroup;c=c||f.forEachFeatureAtCoordinate(d,n,a,{},function(e){goog.asserts.assert(e,"received a feature");var o=goog.getUid(e).toString();if(!(o in s)){s[o]=true;return t.call(r,e,l)}})}return c};ol.renderer.canvas.VectorTileLayer.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()};ol.renderer.canvas.VectorTileLayer.prototype.prepareFrame=function(e,o){var t=this.getLayer();goog.asserts.assertInstanceof(t,ol.layer.VectorTile,"layer is an instance of ol.layer.VectorTile");var r=t.getSource();goog.asserts.assertInstanceof(r,ol.source.VectorTile,"Source is an ol.source.VectorTile");this.updateAttributions(e.attributions,r.getAttributions());this.updateLogos(e,r);var i=e.viewHints[ol.ViewHint.ANIMATING];var n=e.viewHints[ol.ViewHint.INTERACTING];var a=t.getUpdateWhileAnimating();var l=t.getUpdateWhileInteracting();if(!this.dirty_&&(!a&&i)||!l&&n){return true}var s=e.extent;if(o.extent){s=ol.extent.getIntersection(s,o.extent)}if(ol.extent.isEmpty(s)){return false}var g=e.viewState;var p=g.projection;var u=g.resolution;var c=e.pixelRatio;var d=r.getTileGrid();var y=d.getResolutions();var h=y.length-1;while(h>0&&y[h]<u){--h}var m=d.getTileRangeForExtentAndZ(s,h);this.updateUsedTiles(e.usedTiles,r,h,m);this.manageTilePyramid(e,r,d,c,p,s,h,t.getPreload());this.scheduleExpireCache(e,r);var f={};f[h]={};var v=this.createLoadedTileFinder(r,p,f);var _=t.getUseInterimTilesOnError();var E=this.tmpExtent_;var S=new ol.TileRange(0,0,0,0);var T,P,x,b,M,L;for(M=m.minX;M<=m.maxX;++M){for(L=m.minY;L<=m.maxY;++L){x=r.getTile(h,M,L,c,p);goog.asserts.assertInstanceof(x,ol.VectorTile,"Tile is an ol.VectorTile");b=x.getState();if(b==ol.TileState.LOADED||b==ol.TileState.EMPTY||b==ol.TileState.ERROR&&!_){f[h][x.tileCoord.toString()]=x;continue}P=d.forEachTileCoordParentTileRange(x.tileCoord,v,null,S,E);if(!P){T=d.getTileCoordChildTileRange(x.tileCoord,S,E);if(T){v(h+1,T)}}}}this.dirty_=false;var R=Object.keys(f).map(Number);R.sort(ol.array.numberSafeCompareFunction);var C=[];var A,I,O,N,w;for(A=0,I=R.length;A<I;++A){O=R[A];w=f[O];for(N in w){x=w[N];if(x.getState()==ol.TileState.LOADED){C.push(x);this.createReplayGroup(x,t,c,p)}}}this.renderedTiles_=C;return true};ol.renderer.canvas.VectorTileLayer.prototype.renderFeature=function(e,o,t,r){if(!t){return false}var i=false;if(goog.isArray(t)){for(var n=0,a=t.length;n<a;++n){i=ol.renderer.vector.renderFeature(r,e,t[n],o,this.handleStyleImageChange_,this)||i}}else{i=ol.renderer.vector.renderFeature(r,e,t,o,this.handleStyleImageChange_,this)||i}return i};goog.provide("ol.renderer.canvas.Map");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.style");goog.require("goog.vec.Mat4");goog.require("ol");goog.require("ol.RendererType");goog.require("ol.array");goog.require("ol.css");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.layer.Image");goog.require("ol.layer.Layer");goog.require("ol.layer.Tile");goog.require("ol.layer.Vector");goog.require("ol.layer.VectorTile");goog.require("ol.render.Event");goog.require("ol.render.EventType");goog.require("ol.render.canvas.Immediate");goog.require("ol.renderer.Map");goog.require("ol.renderer.canvas.ImageLayer");goog.require("ol.renderer.canvas.Layer");goog.require("ol.renderer.canvas.TileLayer");goog.require("ol.renderer.canvas.VectorLayer");goog.require("ol.renderer.canvas.VectorTileLayer");goog.require("ol.source.State");goog.require("ol.vec.Mat4");ol.renderer.canvas.Map=function(e,o){goog.base(this,e,o);this.context_=ol.dom.createCanvasContext2D();this.renderContext_=ol.dom.createCanvasContext2D();this.canvas_=this.context_.canvas;this.canvas_.style.width="100%";this.canvas_.style.height="100%";this.canvas_.className=ol.css.CLASS_UNSELECTABLE;goog.dom.insertChildAt(e,this.canvas_,0);this.renderCanvas_=this.renderContext_.canvas;this.pixelCenter_=[0,0];this.pixelExtent_=ol.extent.createEmpty();this.renderedVisible_=true;this.transform_=goog.vec.Mat4.createNumber()};goog.inherits(ol.renderer.canvas.Map,ol.renderer.Map);ol.renderer.canvas.Map.prototype.createLayerRenderer=function(e){if(ol.ENABLE_IMAGE&&e instanceof ol.layer.Image){return new ol.renderer.canvas.ImageLayer(e)}else if(ol.ENABLE_TILE&&e instanceof ol.layer.Tile){return new ol.renderer.canvas.TileLayer(e)}else if(ol.ENABLE_VECTOR_TILE&&e instanceof ol.layer.VectorTile){return new ol.renderer.canvas.VectorTileLayer(e)}else if(ol.ENABLE_VECTOR&&e instanceof ol.layer.Vector){return new ol.renderer.canvas.VectorLayer(e)}else{goog.asserts.fail("unexpected layer configuration");return null}};ol.renderer.canvas.Map.prototype.dispatchComposeEvent_=function(e,o){var t=this.getMap();var r=this.context_;if(t.hasListener(e)){var i=o.extent;var n=o.pixelRatio;var a=o.viewState;var l=a.rotation;var s=this.getTransform(o);var g=new ol.render.canvas.Immediate(r,n,i,s,l);var p=new ol.render.Event(e,t,g,o,r,null);t.dispatchEvent(p);g.flush()}};ol.renderer.canvas.Map.prototype.getTransform=function(e){var o=e.pixelRatio;var t=e.viewState;var r=t.resolution;return ol.vec.Mat4.makeTransform2D(this.transform_,this.canvas_.width/2,this.canvas_.height/2,o/r,-o/r,-t.rotation,-t.center[0],-t.center[1])};ol.renderer.canvas.Map.prototype.getType=function(){return ol.RendererType.CANVAS};ol.renderer.canvas.Map.prototype.renderFrame=function(e){if(!e){if(this.renderedVisible_){goog.style.setElementShown(this.canvas_,false);this.renderedVisible_=false}return}var o;var t=e.pixelRatio;var r=e.size[0]*t;var i=e.size[1]*t;this.canvas_.width=r;this.canvas_.height=i;var n=e.viewState.rotation;var a;if(n){o=this.renderContext_;a=ol.extent.getForViewAndSize(this.pixelCenter_,t,n,e.size,this.pixelExtent_);var l=ol.extent.getWidth(a);var s=ol.extent.getHeight(a);this.renderCanvas_.width=l+.5;this.renderCanvas_.height=s+.5;this.renderContext_.translate(Math.round((l-r)/2),Math.round((s-i)/2))}else{o=this.context_}this.calculateMatrices2D(e);this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,e);var g=e.layerStatesArray;ol.array.stableSort(g,ol.renderer.Map.sortByZIndex);var p=e.viewState.resolution;var u,c,d,y,h;for(u=0,c=g.length;u<c;++u){h=g[u];d=h.layer;y=this.getLayerRenderer(d);goog.asserts.assertInstanceof(y,ol.renderer.canvas.Layer,"layerRenderer is an instance of ol.renderer.canvas.Layer");if(!ol.layer.Layer.visibleAtResolution(h,p)||h.sourceState!=ol.source.State.READY){continue}if(y.prepareFrame(e,h)){y.composeFrame(e,h,o)}}if(n){this.context_.translate(r/2,i/2);this.context_.rotate(n);this.context_.drawImage(this.renderCanvas_,Math.round(a[0]),Math.round(a[1]));this.context_.rotate(-n);this.context_.translate(-r/2,-i/2)}this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,e);if(!this.renderedVisible_){goog.style.setElementShown(this.canvas_,true);this.renderedVisible_=true}this.scheduleRemoveUnusedLayerRenderers(e);this.scheduleExpireIconCache(e)};goog.provide("ol.renderer.dom.Layer");goog.require("ol");goog.require("ol.layer.Layer");goog.require("ol.renderer.Layer");ol.renderer.dom.Layer=function(e,o){goog.base(this,e);this.target=o};goog.inherits(ol.renderer.dom.Layer,ol.renderer.Layer);ol.renderer.dom.Layer.prototype.clearFrame=ol.nullFunction;ol.renderer.dom.Layer.prototype.composeFrame=ol.nullFunction;ol.renderer.dom.Layer.prototype.getTarget=function(){return this.target};ol.renderer.dom.Layer.prototype.prepareFrame=goog.abstractMethod;goog.provide("ol.renderer.dom.ImageLayer");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.vec.Mat4");goog.require("ol.ImageBase");goog.require("ol.ViewHint");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.layer.Image");goog.require("ol.proj");goog.require("ol.renderer.dom.Layer");goog.require("ol.vec.Mat4");ol.renderer.dom.ImageLayer=function(e){var o=document.createElement("DIV");o.style.position="absolute";goog.base(this,e,o);this.image_=null;this.transform_=goog.vec.Mat4.createNumberIdentity()};goog.inherits(ol.renderer.dom.ImageLayer,ol.renderer.dom.Layer);ol.renderer.dom.ImageLayer.prototype.forEachFeatureAtCoordinate=function(e,o,t,r){var i=this.getLayer();var n=i.getSource();var a=o.viewState.resolution;var l=o.viewState.rotation;var s=o.skippedFeatureUids;return n.forEachFeatureAtCoordinate(e,a,l,s,function(e){return t.call(r,e,i)})};ol.renderer.dom.ImageLayer.prototype.clearFrame=function(){goog.dom.removeChildren(this.target);this.image_=null};ol.renderer.dom.ImageLayer.prototype.prepareFrame=function(e,o){var t=e.viewState;var r=t.center;var i=t.resolution;var n=t.rotation;var a=this.image_;var l=this.getLayer();goog.asserts.assertInstanceof(l,ol.layer.Image,"layer is an instance of ol.layer.Image");var s=l.getSource();var g=e.viewHints;var p=e.extent;if(o.extent!==undefined){p=ol.extent.getIntersection(p,o.extent)}if(!g[ol.ViewHint.ANIMATING]&&!g[ol.ViewHint.INTERACTING]&&!ol.extent.isEmpty(p)){var u=t.projection;if(!ol.ENABLE_RASTER_REPROJECTION){var c=s.getProjection();if(c){goog.asserts.assert(ol.proj.equivalent(u,c),"projection and sourceProjection are equivalent");u=c}}
var d=s.getImage(p,i,e.pixelRatio,u);if(d){var y=this.loadImage(d);if(y){a=d}}}if(a){var h=a.getExtent();var m=a.getResolution();var f=goog.vec.Mat4.createNumber();ol.vec.Mat4.makeTransform2D(f,e.size[0]/2,e.size[1]/2,m/i,m/i,n,(h[0]-r[0])/m,(r[1]-h[3])/m);if(a!=this.image_){var v=a.getImage(this);v.style.maxWidth="none";v.style.position="absolute";goog.dom.removeChildren(this.target);this.target.appendChild(v);this.image_=a}this.setTransform_(f);this.updateAttributions(e.attributions,a.getAttributions());this.updateLogos(e,s)}return true};ol.renderer.dom.ImageLayer.prototype.setTransform_=function(e){if(!ol.vec.Mat4.equals2D(e,this.transform_)){ol.dom.transformElement2D(this.target,e,6);goog.vec.Mat4.setFromArray(this.transform_,e)}};goog.provide("ol.renderer.dom.TileLayer");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.style");goog.require("goog.vec.Mat4");goog.require("ol");goog.require("ol.Coordinate");goog.require("ol.TileCoord");goog.require("ol.TileRange");goog.require("ol.TileState");goog.require("ol.ViewHint");goog.require("ol.array");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.layer.Tile");goog.require("ol.renderer.dom.Layer");goog.require("ol.size");goog.require("ol.tilegrid.TileGrid");goog.require("ol.vec.Mat4");ol.renderer.dom.TileLayer=function(e){var o=document.createElement("DIV");o.style.position="absolute";goog.base(this,e,o);this.renderedVisible_=true;this.renderedOpacity_=1;this.renderedRevision_=0;this.tileLayerZs_={}};goog.inherits(ol.renderer.dom.TileLayer,ol.renderer.dom.Layer);ol.renderer.dom.TileLayer.prototype.clearFrame=function(){goog.dom.removeChildren(this.target);this.renderedRevision_=0};ol.renderer.dom.TileLayer.prototype.prepareFrame=function(e,o){if(!o.visible){if(this.renderedVisible_){goog.style.setElementShown(this.target,false);this.renderedVisible_=false}return true}var t=e.pixelRatio;var r=e.viewState;var i=r.projection;var n=this.getLayer();goog.asserts.assertInstanceof(n,ol.layer.Tile,"layer is an instance of ol.layer.Tile");var a=n.getSource();var l=a.getTileGridForProjection(i);var s=a.getGutter(i);var g=l.getZForResolution(r.resolution);var p=l.getResolution(g);var u=r.center;var c;if(p==r.resolution){u=this.snapCenterToPixel(u,p,e.size);c=ol.extent.getForViewAndSize(u,p,r.rotation,e.size)}else{c=e.extent}if(o.extent!==undefined){c=ol.extent.getIntersection(c,o.extent)}var d=l.getTileRangeForExtentAndResolution(c,p);var y={};y[g]={};var h=this.createLoadedTileFinder(a,i,y);var m=n.getUseInterimTilesOnError();var f=ol.extent.createEmpty();var v=new ol.TileRange(0,0,0,0);var _,E,S,T,P,x,b;for(x=d.minX;x<=d.maxX;++x){for(b=d.minY;b<=d.maxY;++b){T=a.getTile(g,x,b,t,i);P=T.getState();E=P==ol.TileState.LOADED||P==ol.TileState.EMPTY||P==ol.TileState.ERROR&&!m;if(!E&&T.interimTile){T=T.interimTile}goog.asserts.assert(T);P=T.getState();if(P==ol.TileState.LOADED){y[g][T.tileCoord.toString()]=T;continue}else if(P==ol.TileState.EMPTY||P==ol.TileState.ERROR&&!m){continue}S=l.forEachTileCoordParentTileRange(T.tileCoord,h,null,v,f);if(!S){_=l.getTileCoordChildTileRange(T.tileCoord,v,f);if(_){h(g+1,_)}}}}var M,L;if(this.renderedRevision_!=a.getRevision()){for(L in this.tileLayerZs_){M=this.tileLayerZs_[+L];goog.dom.removeNode(M.target)}this.tileLayerZs_={};this.renderedRevision_=a.getRevision()}var R=Object.keys(y).map(Number);R.sort(ol.array.numberSafeCompareFunction);var C={};var A,I,O,N,w;for(A=0,I=R.length;A<I;++A){L=R[A];if(L in this.tileLayerZs_){M=this.tileLayerZs_[L]}else{N=l.getTileCoordForCoordAndZ(u,L);M=new ol.renderer.dom.TileLayerZ_(l,N);C[L]=true;this.tileLayerZs_[L]=M}w=y[L];for(O in w){M.addTile(w[O],s)}M.finalizeAddTiles()}var D=Object.keys(this.tileLayerZs_).map(Number);D.sort(ol.array.numberSafeCompareFunction);var F,G,U,q,k;var V=goog.vec.Mat4.createNumber();for(F=0,G=D.length;F<G;++F){L=D[F];M=this.tileLayerZs_[L];if(!(L in y)){goog.dom.removeNode(M.target);delete this.tileLayerZs_[L];continue}k=M.getResolution();q=M.getOrigin();ol.vec.Mat4.makeTransform2D(V,e.size[0]/2,e.size[1]/2,k/r.resolution,k/r.resolution,r.rotation,(q[0]-u[0])/k,(u[1]-q[1])/k);M.setTransform(V);if(L in C){for(U=L-1;U>=0;--U){if(U in this.tileLayerZs_){goog.dom.insertSiblingAfter(M.target,this.tileLayerZs_[U].target);break}}if(U<0){goog.dom.insertChildAt(this.target,M.target,0)}}else{if(!e.viewHints[ol.ViewHint.ANIMATING]&&!e.viewHints[ol.ViewHint.INTERACTING]){M.removeTilesOutsideExtent(c,v)}}}if(o.opacity!=this.renderedOpacity_){this.target.style.opacity=o.opacity;this.renderedOpacity_=o.opacity}if(o.visible&&!this.renderedVisible_){goog.style.setElementShown(this.target,true);this.renderedVisible_=true}this.updateUsedTiles(e.usedTiles,a,g,d);this.manageTilePyramid(e,a,l,t,i,c,g,n.getPreload());this.scheduleExpireCache(e,a);this.updateLogos(e,a);return true};ol.renderer.dom.TileLayerZ_=function(e,o){this.target=document.createElement("DIV");this.target.style.position="absolute";this.target.style.width="100%";this.target.style.height="100%";this.tileGrid_=e;this.tileCoordOrigin_=o;this.origin_=ol.extent.getTopLeft(e.getTileCoordExtent(o));this.resolution_=e.getResolution(o[0]);this.tiles_={};this.documentFragment_=null;this.transform_=goog.vec.Mat4.createNumberIdentity();this.tmpSize_=[0,0]};ol.renderer.dom.TileLayerZ_.prototype.addTile=function(e,o){var t=e.tileCoord;var r=t[0];var i=t[1];var n=t[2];goog.asserts.assert(r==this.tileCoordOrigin_[0],"tileCoordZ matches z of tileCoordOrigin");var a=t.toString();if(a in this.tiles_){return}var l=ol.size.toSize(this.tileGrid_.getTileSize(r),this.tmpSize_);var s=e.getImage(this);var g=s.style;g.maxWidth="none";var p;var u;if(o>0){p=document.createElement("DIV");u=p.style;u.overflow="hidden";u.width=l[0]+"px";u.height=l[1]+"px";g.position="absolute";g.left=-o+"px";g.top=-o+"px";g.width=l[0]+2*o+"px";g.height=l[1]+2*o+"px";p.appendChild(s)}else{g.width=l[0]+"px";g.height=l[1]+"px";p=s;u=g}u.position="absolute";u.left=(i-this.tileCoordOrigin_[1])*l[0]+"px";u.top=(this.tileCoordOrigin_[2]-n)*l[1]+"px";if(!this.documentFragment_){this.documentFragment_=document.createDocumentFragment()}this.documentFragment_.appendChild(p);this.tiles_[a]=e};ol.renderer.dom.TileLayerZ_.prototype.finalizeAddTiles=function(){if(this.documentFragment_){this.target.appendChild(this.documentFragment_);this.documentFragment_=null}};ol.renderer.dom.TileLayerZ_.prototype.getOrigin=function(){return this.origin_};ol.renderer.dom.TileLayerZ_.prototype.getResolution=function(){return this.resolution_};ol.renderer.dom.TileLayerZ_.prototype.removeTilesOutsideExtent=function(e,o){var t=this.tileGrid_.getTileRangeForExtentAndZ(e,this.tileCoordOrigin_[0],o);var r=[];var i,n;for(n in this.tiles_){i=this.tiles_[n];if(!t.contains(i.tileCoord)){r.push(i)}}var a,l;for(a=0,l=r.length;a<l;++a){i=r[a];n=i.tileCoord.toString();goog.dom.removeNode(i.getImage(this));delete this.tiles_[n]}};ol.renderer.dom.TileLayerZ_.prototype.setTransform=function(e){if(!ol.vec.Mat4.equals2D(e,this.transform_)){ol.dom.transformElement2D(this.target,e,6);goog.vec.Mat4.setFromArray(this.transform_,e)}};goog.provide("ol.renderer.dom.VectorLayer");goog.require("goog.asserts");goog.require("ol.events");goog.require("goog.vec.Mat4");goog.require("ol.ViewHint");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.layer.Vector");goog.require("ol.render.Event");goog.require("ol.render.EventType");goog.require("ol.render.canvas.Immediate");goog.require("ol.render.canvas.ReplayGroup");goog.require("ol.renderer.dom.Layer");goog.require("ol.renderer.vector");goog.require("ol.vec.Mat4");ol.renderer.dom.VectorLayer=function(e){this.context_=ol.dom.createCanvasContext2D();var o=this.context_.canvas;o.style.maxWidth="none";o.style.position="absolute";goog.base(this,e,o);this.dirty_=false;this.renderedRevision_=-1;this.renderedResolution_=NaN;this.renderedExtent_=ol.extent.createEmpty();this.renderedRenderOrder_=null;this.replayGroup_=null;this.transform_=goog.vec.Mat4.createNumber();this.elementTransform_=goog.vec.Mat4.createNumber()};goog.inherits(ol.renderer.dom.VectorLayer,ol.renderer.dom.Layer);ol.renderer.dom.VectorLayer.prototype.clearFrame=function(){var e=this.context_.canvas;e.width=e.width;this.renderedRevision_=0};ol.renderer.dom.VectorLayer.prototype.composeFrame=function(e,o){var t=this.getLayer();goog.asserts.assertInstanceof(t,ol.layer.Vector,"layer is an instance of ol.layer.Vector");var r=e.viewState;var i=r.center;var n=r.rotation;var a=r.resolution;var l=e.pixelRatio;var s=e.size[0];var g=e.size[1];var p=s*l;var u=g*l;var c=ol.vec.Mat4.makeTransform2D(this.transform_,l*s/2,l*g/2,l/a,-l/a,-n,-i[0],-i[1]);var d=this.context_;d.canvas.width=p;d.canvas.height=u;var y=ol.vec.Mat4.makeTransform2D(this.elementTransform_,0,0,1/l,1/l,0,-(p-s)/2*l,-(u-g)/2*l);ol.dom.transformElement2D(d.canvas,y,6);this.dispatchEvent_(ol.render.EventType.PRECOMPOSE,e,c);var h=this.replayGroup_;if(h&&!h.isEmpty()){d.globalAlpha=o.opacity;h.replay(d,l,c,n,o.managed?e.skippedFeatureUids:{});this.dispatchEvent_(ol.render.EventType.RENDER,e,c)}this.dispatchEvent_(ol.render.EventType.POSTCOMPOSE,e,c)};ol.renderer.dom.VectorLayer.prototype.dispatchEvent_=function(e,o,t){var r=this.context_;var i=this.getLayer();if(i.hasListener(e)){var n=new ol.render.canvas.Immediate(r,o.pixelRatio,o.extent,t,o.viewState.rotation);var a=new ol.render.Event(e,i,n,o,r,null);i.dispatchEvent(a);n.flush()}};ol.renderer.dom.VectorLayer.prototype.forEachFeatureAtCoordinate=function(e,o,t,r){if(!this.replayGroup_){return undefined}else{var i=o.viewState.resolution;var n=o.viewState.rotation;var a=this.getLayer();var l={};return this.replayGroup_.forEachFeatureAtCoordinate(e,i,n,{},function(e){goog.asserts.assert(e!==undefined,"received a feature");var o=goog.getUid(e).toString();if(!(o in l)){l[o]=true;return t.call(r,e,a)}})}};ol.renderer.dom.VectorLayer.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()};ol.renderer.dom.VectorLayer.prototype.prepareFrame=function(e,o){var t=this.getLayer();goog.asserts.assertInstanceof(t,ol.layer.Vector,"layer is an instance of ol.layer.Vector");var r=t.getSource();this.updateAttributions(e.attributions,r.getAttributions());this.updateLogos(e,r);var i=e.viewHints[ol.ViewHint.ANIMATING];var n=e.viewHints[ol.ViewHint.INTERACTING];var a=t.getUpdateWhileAnimating();var l=t.getUpdateWhileInteracting();if(!this.dirty_&&(!a&&i)||!l&&n){return true}var s=e.extent;var g=e.viewState;var p=g.projection;var u=g.resolution;var c=e.pixelRatio;var d=t.getRevision();var y=t.getRenderBuffer();var h=t.getRenderOrder();if(h===undefined){h=ol.renderer.vector.defaultOrder}var m=ol.extent.buffer(s,y*u);if(!this.dirty_&&this.renderedResolution_==u&&this.renderedRevision_==d&&this.renderedRenderOrder_==h&&ol.extent.containsExtent(this.renderedExtent_,m)){return true}goog.dispose(this.replayGroup_);this.replayGroup_=null;this.dirty_=false;var f=new ol.render.canvas.ReplayGroup(ol.renderer.vector.getTolerance(u,c),m,u,t.getRenderBuffer());r.loadFeatures(m,u,p);var v=function(e){var o;var r=e.getStyleFunction();if(r){o=r.call(e,u)}else{r=t.getStyleFunction();if(r){o=r(e,u)}}if(o){var i=this.renderFeature(e,u,c,o,f);this.dirty_=this.dirty_||i}};if(h){var _=[];r.forEachFeatureInExtent(m,function(e){_.push(e)},this);_.sort(h);_.forEach(v,this)}else{r.forEachFeatureInExtent(m,v,this)}f.finish();this.renderedResolution_=u;this.renderedRevision_=d;this.renderedRenderOrder_=h;this.renderedExtent_=m;this.replayGroup_=f;return true};ol.renderer.dom.VectorLayer.prototype.renderFeature=function(e,o,t,r,i){if(!r){return false}var n=false;if(goog.isArray(r)){for(var a=0,l=r.length;a<l;++a){n=ol.renderer.vector.renderFeature(i,e,r[a],ol.renderer.vector.getSquaredTolerance(o,t),this.handleStyleImageChange_,this)||n}}else{n=ol.renderer.vector.renderFeature(i,e,r,ol.renderer.vector.getSquaredTolerance(o,t),this.handleStyleImageChange_,this)||n}return n};goog.provide("ol.renderer.dom.Map");goog.require("goog.asserts");goog.require("goog.dom");goog.require("ol.events");goog.require("ol.events.Event");goog.require("ol.events.EventType");goog.require("goog.style");goog.require("goog.vec.Mat4");goog.require("ol");goog.require("ol.RendererType");goog.require("ol.array");goog.require("ol.css");goog.require("ol.dom");goog.require("ol.layer.Image");goog.require("ol.layer.Layer");goog.require("ol.layer.Tile");goog.require("ol.layer.Vector");goog.require("ol.render.Event");goog.require("ol.render.EventType");goog.require("ol.render.canvas.Immediate");goog.require("ol.renderer.Map");goog.require("ol.renderer.dom.ImageLayer");goog.require("ol.renderer.dom.Layer");goog.require("ol.renderer.dom.TileLayer");goog.require("ol.renderer.dom.VectorLayer");goog.require("ol.source.State");goog.require("ol.vec.Mat4");ol.renderer.dom.Map=function(e,o){goog.base(this,e,o);this.context_=ol.dom.createCanvasContext2D();var t=this.context_.canvas;t.style.position="absolute";t.style.width="100%";t.style.height="100%";t.className=ol.css.CLASS_UNSELECTABLE;goog.dom.insertChildAt(e,t,0);this.transform_=goog.vec.Mat4.createNumber();this.layersPane_=document.createElement("DIV");this.layersPane_.className=ol.css.CLASS_UNSELECTABLE;var r=this.layersPane_.style;r.position="absolute";r.width="100%";r.height="100%";ol.events.listen(this.layersPane_,ol.events.EventType.TOUCHSTART,ol.events.Event.preventDefault);goog.dom.insertChildAt(e,this.layersPane_,0);this.renderedVisible_=true};goog.inherits(ol.renderer.dom.Map,ol.renderer.Map);ol.renderer.dom.Map.prototype.disposeInternal=function(){goog.dom.removeNode(this.layersPane_);goog.base(this,"disposeInternal")};ol.renderer.dom.Map.prototype.createLayerRenderer=function(e){var o;if(ol.ENABLE_IMAGE&&e instanceof ol.layer.Image){o=new ol.renderer.dom.ImageLayer(e)}else if(ol.ENABLE_TILE&&e instanceof ol.layer.Tile){o=new ol.renderer.dom.TileLayer(e)}else if(ol.ENABLE_VECTOR&&e instanceof ol.layer.Vector){o=new ol.renderer.dom.VectorLayer(e)}else{goog.asserts.fail("unexpected layer configuration");return null}return o};ol.renderer.dom.Map.prototype.dispatchComposeEvent_=function(e,o){var t=this.getMap();if(t.hasListener(e)){var r=o.extent;var i=o.pixelRatio;var n=o.viewState;var a=n.rotation;var l=this.context_;var s=l.canvas;ol.vec.Mat4.makeTransform2D(this.transform_,s.width/2,s.height/2,i/n.resolution,-i/n.resolution,-n.rotation,-n.center[0],-n.center[1]);var g=new ol.render.canvas.Immediate(l,i,r,this.transform_,a);var p=new ol.render.Event(e,t,g,o,l,null);t.dispatchEvent(p);g.flush()}};ol.renderer.dom.Map.prototype.getType=function(){return ol.RendererType.DOM};ol.renderer.dom.Map.prototype.renderFrame=function(e){if(!e){if(this.renderedVisible_){goog.style.setElementShown(this.layersPane_,false);this.renderedVisible_=false}return}var o=this.getMap();if(o.hasListener(ol.render.EventType.PRECOMPOSE)||o.hasListener(ol.render.EventType.POSTCOMPOSE)){var t=this.context_.canvas;var r=e.pixelRatio;t.width=e.size[0]*r;t.height=e.size[1]*r}this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,e);var i=e.layerStatesArray;ol.array.stableSort(i,ol.renderer.Map.sortByZIndex);var n=e.viewState.resolution;var a,l,s,g,p;for(a=0,l=i.length;a<l;++a){p=i[a];s=p.layer;g=this.getLayerRenderer(s);goog.asserts.assertInstanceof(g,ol.renderer.dom.Layer,"renderer is an instance of ol.renderer.dom.Layer");goog.dom.insertChildAt(this.layersPane_,g.getTarget(),a);if(ol.layer.Layer.visibleAtResolution(p,n)&&p.sourceState==ol.source.State.READY){if(g.prepareFrame(e,p)){g.composeFrame(e,p)}}else{g.clearFrame()}}var u=e.layerStates;var c;for(c in this.getLayerRenderers()){if(!(c in u)){g=this.getLayerRendererByKey(c);goog.asserts.assertInstanceof(g,ol.renderer.dom.Layer,"renderer is an instance of ol.renderer.dom.Layer");goog.dom.removeNode(g.getTarget())}}if(!this.renderedVisible_){goog.style.setElementShown(this.layersPane_,true);this.renderedVisible_=true}this.calculateMatrices2D(e);this.scheduleRemoveUnusedLayerRenderers(e);this.scheduleExpireIconCache(e);this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,e)};goog.provide("goog.webgl");goog.webgl.DEPTH_BUFFER_BIT=256;goog.webgl.STENCIL_BUFFER_BIT=1024;goog.webgl.COLOR_BUFFER_BIT=16384;goog.webgl.POINTS=0;goog.webgl.LINES=1;goog.webgl.LINE_LOOP=2;goog.webgl.LINE_STRIP=3;goog.webgl.TRIANGLES=4;goog.webgl.TRIANGLE_STRIP=5;goog.webgl.TRIANGLE_FAN=6;goog.webgl.ZERO=0;goog.webgl.ONE=1;goog.webgl.SRC_COLOR=768;goog.webgl.ONE_MINUS_SRC_COLOR=769;goog.webgl.SRC_ALPHA=770;goog.webgl.ONE_MINUS_SRC_ALPHA=771;goog.webgl.DST_ALPHA=772;goog.webgl.ONE_MINUS_DST_ALPHA=773;goog.webgl.DST_COLOR=774;goog.webgl.ONE_MINUS_DST_COLOR=775;goog.webgl.SRC_ALPHA_SATURATE=776;goog.webgl.FUNC_ADD=32774;goog.webgl.BLEND_EQUATION=32777;goog.webgl.BLEND_EQUATION_RGB=32777;goog.webgl.BLEND_EQUATION_ALPHA=34877;goog.webgl.FUNC_SUBTRACT=32778;goog.webgl.FUNC_REVERSE_SUBTRACT=32779;goog.webgl.BLEND_DST_RGB=32968;goog.webgl.BLEND_SRC_RGB=32969;goog.webgl.BLEND_DST_ALPHA=32970;goog.webgl.BLEND_SRC_ALPHA=32971;goog.webgl.CONSTANT_COLOR=32769;goog.webgl.ONE_MINUS_CONSTANT_COLOR=32770;goog.webgl.CONSTANT_ALPHA=32771;goog.webgl.ONE_MINUS_CONSTANT_ALPHA=32772;goog.webgl.BLEND_COLOR=32773;goog.webgl.ARRAY_BUFFER=34962;goog.webgl.ELEMENT_ARRAY_BUFFER=34963;goog.webgl.ARRAY_BUFFER_BINDING=34964;goog.webgl.ELEMENT_ARRAY_BUFFER_BINDING=34965;goog.webgl.STREAM_DRAW=35040;goog.webgl.STATIC_DRAW=35044;goog.webgl.DYNAMIC_DRAW=35048;goog.webgl.BUFFER_SIZE=34660;goog.webgl.BUFFER_USAGE=34661;goog.webgl.CURRENT_VERTEX_ATTRIB=34342;goog.webgl.FRONT=1028;goog.webgl.BACK=1029;goog.webgl.FRONT_AND_BACK=1032;goog.webgl.CULL_FACE=2884;goog.webgl.BLEND=3042;goog.webgl.DITHER=3024;goog.webgl.STENCIL_TEST=2960;goog.webgl.DEPTH_TEST=2929;goog.webgl.SCISSOR_TEST=3089;goog.webgl.POLYGON_OFFSET_FILL=32823;goog.webgl.SAMPLE_ALPHA_TO_COVERAGE=32926;goog.webgl.SAMPLE_COVERAGE=32928;goog.webgl.NO_ERROR=0;goog.webgl.INVALID_ENUM=1280;goog.webgl.INVALID_VALUE=1281;goog.webgl.INVALID_OPERATION=1282;goog.webgl.OUT_OF_MEMORY=1285;goog.webgl.CW=2304;goog.webgl.CCW=2305;goog.webgl.LINE_WIDTH=2849;goog.webgl.ALIASED_POINT_SIZE_RANGE=33901;goog.webgl.ALIASED_LINE_WIDTH_RANGE=33902;goog.webgl.CULL_FACE_MODE=2885;goog.webgl.FRONT_FACE=2886;goog.webgl.DEPTH_RANGE=2928;goog.webgl.DEPTH_WRITEMASK=2930;goog.webgl.DEPTH_CLEAR_VALUE=2931;goog.webgl.DEPTH_FUNC=2932;goog.webgl.STENCIL_CLEAR_VALUE=2961;goog.webgl.STENCIL_FUNC=2962;goog.webgl.STENCIL_FAIL=2964;goog.webgl.STENCIL_PASS_DEPTH_FAIL=2965;goog.webgl.STENCIL_PASS_DEPTH_PASS=2966;goog.webgl.STENCIL_REF=2967;goog.webgl.STENCIL_VALUE_MASK=2963;goog.webgl.STENCIL_WRITEMASK=2968;goog.webgl.STENCIL_BACK_FUNC=34816;goog.webgl.STENCIL_BACK_FAIL=34817;goog.webgl.STENCIL_BACK_PASS_DEPTH_FAIL=34818;goog.webgl.STENCIL_BACK_PASS_DEPTH_PASS=34819;goog.webgl.STENCIL_BACK_REF=36003;goog.webgl.STENCIL_BACK_VALUE_MASK=36004;goog.webgl.STENCIL_BACK_WRITEMASK=36005;goog.webgl.VIEWPORT=2978;goog.webgl.SCISSOR_BOX=3088;goog.webgl.COLOR_CLEAR_VALUE=3106;goog.webgl.COLOR_WRITEMASK=3107;goog.webgl.UNPACK_ALIGNMENT=3317;goog.webgl.PACK_ALIGNMENT=3333;goog.webgl.MAX_TEXTURE_SIZE=3379;goog.webgl.MAX_VIEWPORT_DIMS=3386;goog.webgl.SUBPIXEL_BITS=3408;goog.webgl.RED_BITS=3410;goog.webgl.GREEN_BITS=3411;goog.webgl.BLUE_BITS=3412;goog.webgl.ALPHA_BITS=3413;goog.webgl.DEPTH_BITS=3414;goog.webgl.STENCIL_BITS=3415;goog.webgl.POLYGON_OFFSET_UNITS=10752;goog.webgl.POLYGON_OFFSET_FACTOR=32824;goog.webgl.TEXTURE_BINDING_2D=32873;goog.webgl.SAMPLE_BUFFERS=32936;goog.webgl.SAMPLES=32937;goog.webgl.SAMPLE_COVERAGE_VALUE=32938;goog.webgl.SAMPLE_COVERAGE_INVERT=32939;goog.webgl.COMPRESSED_TEXTURE_FORMATS=34467;goog.webgl.DONT_CARE=4352;goog.webgl.FASTEST=4353;goog.webgl.NICEST=4354;goog.webgl.GENERATE_MIPMAP_HINT=33170;goog.webgl.BYTE=5120;goog.webgl.UNSIGNED_BYTE=5121;goog.webgl.SHORT=5122;goog.webgl.UNSIGNED_SHORT=5123;goog.webgl.INT=5124;goog.webgl.UNSIGNED_INT=5125;goog.webgl.FLOAT=5126;goog.webgl.DEPTH_COMPONENT=6402;goog.webgl.ALPHA=6406;goog.webgl.RGB=6407;goog.webgl.RGBA=6408;goog.webgl.LUMINANCE=6409;goog.webgl.LUMINANCE_ALPHA=6410;goog.webgl.UNSIGNED_SHORT_4_4_4_4=32819;goog.webgl.UNSIGNED_SHORT_5_5_5_1=32820;goog.webgl.UNSIGNED_SHORT_5_6_5=33635;goog.webgl.FRAGMENT_SHADER=35632;goog.webgl.VERTEX_SHADER=35633;goog.webgl.MAX_VERTEX_ATTRIBS=34921;goog.webgl.MAX_VERTEX_UNIFORM_VECTORS=36347;goog.webgl.MAX_VARYING_VECTORS=36348;goog.webgl.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661;goog.webgl.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660;goog.webgl.MAX_TEXTURE_IMAGE_UNITS=34930;goog.webgl.MAX_FRAGMENT_UNIFORM_VECTORS=36349;goog.webgl.SHADER_TYPE=35663;goog.webgl.DELETE_STATUS=35712;goog.webgl.LINK_STATUS=35714;goog.webgl.VALIDATE_STATUS=35715;goog.webgl.ATTACHED_SHADERS=35717;goog.webgl.ACTIVE_UNIFORMS=35718;goog.webgl.ACTIVE_ATTRIBUTES=35721;goog.webgl.SHADING_LANGUAGE_VERSION=35724;goog.webgl.CURRENT_PROGRAM=35725;goog.webgl.NEVER=512;goog.webgl.LESS=513;goog.webgl.EQUAL=514;goog.webgl.LEQUAL=515;goog.webgl.GREATER=516;goog.webgl.NOTEQUAL=517;goog.webgl.GEQUAL=518;goog.webgl.ALWAYS=519;goog.webgl.KEEP=7680;goog.webgl.REPLACE=7681;goog.webgl.INCR=7682;goog.webgl.DECR=7683;goog.webgl.INVERT=5386;goog.webgl.INCR_WRAP=34055;goog.webgl.DECR_WRAP=34056;goog.webgl.VENDOR=7936;goog.webgl.RENDERER=7937;goog.webgl.VERSION=7938;goog.webgl.NEAREST=9728;goog.webgl.LINEAR=9729;goog.webgl.NEAREST_MIPMAP_NEAREST=9984;goog.webgl.LINEAR_MIPMAP_NEAREST=9985;goog.webgl.NEAREST_MIPMAP_LINEAR=9986;goog.webgl.LINEAR_MIPMAP_LINEAR=9987;goog.webgl.TEXTURE_MAG_FILTER=10240;goog.webgl.TEXTURE_MIN_FILTER=10241;goog.webgl.TEXTURE_WRAP_S=10242;goog.webgl.TEXTURE_WRAP_T=10243;goog.webgl.TEXTURE_2D=3553;goog.webgl.TEXTURE=5890;goog.webgl.TEXTURE_CUBE_MAP=34067;goog.webgl.TEXTURE_BINDING_CUBE_MAP=34068;goog.webgl.TEXTURE_CUBE_MAP_POSITIVE_X=34069;goog.webgl.TEXTURE_CUBE_MAP_NEGATIVE_X=34070;goog.webgl.TEXTURE_CUBE_MAP_POSITIVE_Y=34071;goog.webgl.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072;goog.webgl.TEXTURE_CUBE_MAP_POSITIVE_Z=34073;goog.webgl.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074;goog.webgl.MAX_CUBE_MAP_TEXTURE_SIZE=34076;goog.webgl.TEXTURE0=33984;goog.webgl.TEXTURE1=33985;goog.webgl.TEXTURE2=33986;goog.webgl.TEXTURE3=33987;goog.webgl.TEXTURE4=33988;goog.webgl.TEXTURE5=33989;goog.webgl.TEXTURE6=33990;goog.webgl.TEXTURE7=33991;goog.webgl.TEXTURE8=33992;goog.webgl.TEXTURE9=33993;goog.webgl.TEXTURE10=33994;goog.webgl.TEXTURE11=33995;goog.webgl.TEXTURE12=33996;goog.webgl.TEXTURE13=33997;goog.webgl.TEXTURE14=33998;goog.webgl.TEXTURE15=33999;goog.webgl.TEXTURE16=34e3;goog.webgl.TEXTURE17=34001;goog.webgl.TEXTURE18=34002;goog.webgl.TEXTURE19=34003;goog.webgl.TEXTURE20=34004;goog.webgl.TEXTURE21=34005;goog.webgl.TEXTURE22=34006;goog.webgl.TEXTURE23=34007;goog.webgl.TEXTURE24=34008;goog.webgl.TEXTURE25=34009;goog.webgl.TEXTURE26=34010;goog.webgl.TEXTURE27=34011;goog.webgl.TEXTURE28=34012;goog.webgl.TEXTURE29=34013;goog.webgl.TEXTURE30=34014;goog.webgl.TEXTURE31=34015;goog.webgl.ACTIVE_TEXTURE=34016;goog.webgl.REPEAT=10497;goog.webgl.CLAMP_TO_EDGE=33071;goog.webgl.MIRRORED_REPEAT=33648;goog.webgl.FLOAT_VEC2=35664;goog.webgl.FLOAT_VEC3=35665;goog.webgl.FLOAT_VEC4=35666;goog.webgl.INT_VEC2=35667;goog.webgl.INT_VEC3=35668;goog.webgl.INT_VEC4=35669;goog.webgl.BOOL=35670;goog.webgl.BOOL_VEC2=35671;goog.webgl.BOOL_VEC3=35672;goog.webgl.BOOL_VEC4=35673;goog.webgl.FLOAT_MAT2=35674;goog.webgl.FLOAT_MAT3=35675;goog.webgl.FLOAT_MAT4=35676;goog.webgl.SAMPLER_2D=35678;goog.webgl.SAMPLER_CUBE=35680;goog.webgl.VERTEX_ATTRIB_ARRAY_ENABLED=34338;goog.webgl.VERTEX_ATTRIB_ARRAY_SIZE=34339;goog.webgl.VERTEX_ATTRIB_ARRAY_STRIDE=34340;goog.webgl.VERTEX_ATTRIB_ARRAY_TYPE=34341;goog.webgl.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922;goog.webgl.VERTEX_ATTRIB_ARRAY_POINTER=34373;goog.webgl.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975;goog.webgl.COMPILE_STATUS=35713;goog.webgl.LOW_FLOAT=36336;goog.webgl.MEDIUM_FLOAT=36337;goog.webgl.HIGH_FLOAT=36338;goog.webgl.LOW_INT=36339;goog.webgl.MEDIUM_INT=36340;goog.webgl.HIGH_INT=36341;goog.webgl.FRAMEBUFFER=36160;goog.webgl.RENDERBUFFER=36161;goog.webgl.RGBA4=32854;goog.webgl.RGB5_A1=32855;goog.webgl.RGB565=36194;goog.webgl.DEPTH_COMPONENT16=33189;goog.webgl.STENCIL_INDEX=6401;goog.webgl.STENCIL_INDEX8=36168;goog.webgl.DEPTH_STENCIL=34041;goog.webgl.RENDERBUFFER_WIDTH=36162;goog.webgl.RENDERBUFFER_HEIGHT=36163;goog.webgl.RENDERBUFFER_INTERNAL_FORMAT=36164;goog.webgl.RENDERBUFFER_RED_SIZE=36176;goog.webgl.RENDERBUFFER_GREEN_SIZE=36177;goog.webgl.RENDERBUFFER_BLUE_SIZE=36178;goog.webgl.RENDERBUFFER_ALPHA_SIZE=36179;goog.webgl.RENDERBUFFER_DEPTH_SIZE=36180;goog.webgl.RENDERBUFFER_STENCIL_SIZE=36181;goog.webgl.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048;goog.webgl.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049;goog.webgl.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050;goog.webgl.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051;goog.webgl.COLOR_ATTACHMENT0=36064;goog.webgl.DEPTH_ATTACHMENT=36096;goog.webgl.STENCIL_ATTACHMENT=36128;goog.webgl.DEPTH_STENCIL_ATTACHMENT=33306;goog.webgl.NONE=0;goog.webgl.FRAMEBUFFER_COMPLETE=36053;goog.webgl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054;goog.webgl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055;goog.webgl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057;goog.webgl.FRAMEBUFFER_UNSUPPORTED=36061;goog.webgl.FRAMEBUFFER_BINDING=36006;goog.webgl.RENDERBUFFER_BINDING=36007;goog.webgl.MAX_RENDERBUFFER_SIZE=34024;goog.webgl.INVALID_FRAMEBUFFER_OPERATION=1286;goog.webgl.UNPACK_FLIP_Y_WEBGL=37440;goog.webgl.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441;goog.webgl.CONTEXT_LOST_WEBGL=37442;goog.webgl.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443;goog.webgl.BROWSER_DEFAULT_WEBGL=37444;goog.webgl.HALF_FLOAT_OES=36193;goog.webgl.FRAGMENT_SHADER_DERIVATIVE_HINT_OES=35723;goog.webgl.VERTEX_ARRAY_BINDING_OES=34229;goog.webgl.UNMASKED_VENDOR_WEBGL=37445;goog.webgl.UNMASKED_RENDERER_WEBGL=37446;goog.webgl.COMPRESSED_RGB_S3TC_DXT1_EXT=33776;goog.webgl.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777;goog.webgl.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778;goog.webgl.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779;goog.webgl.TEXTURE_MAX_ANISOTROPY_EXT=34046;goog.webgl.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047;goog.provide("ol.webgl.Fragment");goog.provide("ol.webgl.Shader");goog.provide("ol.webgl.Vertex");goog.provide("ol.webgl.shader");goog.require("goog.functions");goog.require("goog.webgl");goog.require("ol.webgl");ol.webgl.Shader=function(e){this.source_=e};ol.webgl.Shader.prototype.getType=goog.abstractMethod;ol.webgl.Shader.prototype.getSource=function(){return this.source_};ol.webgl.Shader.prototype.isAnimated=goog.functions.FALSE;ol.webgl.shader.Fragment=function(e){goog.base(this,e)};goog.inherits(ol.webgl.shader.Fragment,ol.webgl.Shader);ol.webgl.shader.Fragment.prototype.getType=function(){return goog.webgl.FRAGMENT_SHADER};ol.webgl.shader.Vertex=function(e){goog.base(this,e)};goog.inherits(ol.webgl.shader.Vertex,ol.webgl.Shader);ol.webgl.shader.Vertex.prototype.getType=function(){return goog.webgl.VERTEX_SHADER};goog.provide("ol.render.webgl.imagereplay.shader.Default");goog.provide("ol.render.webgl.imagereplay.shader.Default.Locations");goog.provide("ol.render.webgl.imagereplay.shader.DefaultFragment");goog.provide("ol.render.webgl.imagereplay.shader.DefaultVertex");goog.require("ol.webgl.shader");ol.render.webgl.imagereplay.shader.DefaultFragment=function(){goog.base(this,ol.render.webgl.imagereplay.shader.DefaultFragment.SOURCE)};goog.inherits(ol.render.webgl.imagereplay.shader.DefaultFragment,ol.webgl.shader.Fragment);goog.addSingletonGetter(ol.render.webgl.imagereplay.shader.DefaultFragment);ol.render.webgl.imagereplay.shader.DefaultFragment.DEBUG_SOURCE="precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n";ol.render.webgl.imagereplay.shader.DefaultFragment.OPTIMIZED_SOURCE="precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}";ol.render.webgl.imagereplay.shader.DefaultFragment.SOURCE=goog.DEBUG?ol.render.webgl.imagereplay.shader.DefaultFragment.DEBUG_SOURCE:ol.render.webgl.imagereplay.shader.DefaultFragment.OPTIMIZED_SOURCE;ol.render.webgl.imagereplay.shader.DefaultVertex=function(){goog.base(this,ol.render.webgl.imagereplay.shader.DefaultVertex.SOURCE)};goog.inherits(ol.render.webgl.imagereplay.shader.DefaultVertex,ol.webgl.shader.Vertex);goog.addSingletonGetter(ol.render.webgl.imagereplay.shader.DefaultVertex);ol.render.webgl.imagereplay.shader.DefaultVertex.DEBUG_SOURCE="varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0., 0.);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n";ol.render.webgl.imagereplay.shader.DefaultVertex.OPTIMIZED_SOURCE="varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.,0.);gl_Position=h*vec4(c,0.,1.)+offsets;a=d;b=f;}";ol.render.webgl.imagereplay.shader.DefaultVertex.SOURCE=goog.DEBUG?ol.render.webgl.imagereplay.shader.DefaultVertex.DEBUG_SOURCE:ol.render.webgl.imagereplay.shader.DefaultVertex.OPTIMIZED_SOURCE;ol.render.webgl.imagereplay.shader.Default.Locations=function(e,o){this.u_image=e.getUniformLocation(o,goog.DEBUG?"u_image":"l");this.u_offsetRotateMatrix=e.getUniformLocation(o,goog.DEBUG?"u_offsetRotateMatrix":"j");this.u_offsetScaleMatrix=e.getUniformLocation(o,goog.DEBUG?"u_offsetScaleMatrix":"i");this.u_opacity=e.getUniformLocation(o,goog.DEBUG?"u_opacity":"k");this.u_projectionMatrix=e.getUniformLocation(o,goog.DEBUG?"u_projectionMatrix":"h");this.a_offsets=e.getAttribLocation(o,goog.DEBUG?"a_offsets":"e");this.a_opacity=e.getAttribLocation(o,goog.DEBUG?"a_opacity":"f");this.a_position=e.getAttribLocation(o,goog.DEBUG?"a_position":"c");this.a_rotateWithView=e.getAttribLocation(o,goog.DEBUG?"a_rotateWithView":"g");this.a_texCoord=e.getAttribLocation(o,goog.DEBUG?"a_texCoord":"d")};goog.provide("ol.webgl.Buffer");goog.require("goog.webgl");goog.require("ol");ol.webgl.BufferUsage={STATIC_DRAW:goog.webgl.STATIC_DRAW,STREAM_DRAW:goog.webgl.STREAM_DRAW,DYNAMIC_DRAW:goog.webgl.DYNAMIC_DRAW};ol.webgl.Buffer=function(e,o){this.arr_=e!==undefined?e:[];this.usage_=o!==undefined?o:ol.webgl.BufferUsage.STATIC_DRAW};ol.webgl.Buffer.prototype.getArray=function(){return this.arr_};ol.webgl.Buffer.prototype.getUsage=function(){return this.usage_};goog.provide("ol.webgl.Context");goog.require("goog.asserts");goog.require("goog.log");goog.require("ol");goog.require("ol.array");goog.require("ol.events");goog.require("ol.object");goog.require("ol.webgl.Buffer");goog.require("ol.webgl.WebGLContextEventType");ol.webgl.BufferCacheEntry;ol.webgl.Context=function(e,o){this.canvas_=e;this.gl_=o;this.bufferCache_={};this.shaderCache_={};this.programCache_={};this.currentProgram_=null;this.hitDetectionFramebuffer_=null;this.hitDetectionTexture_=null;this.hitDetectionRenderbuffer_=null;this.hasOESElementIndexUint=ol.array.includes(ol.WEBGL_EXTENSIONS,"OES_element_index_uint");if(this.hasOESElementIndexUint){var t=o.getExtension("OES_element_index_uint")
;goog.asserts.assert(t,'Failed to get extension "OES_element_index_uint"')}ol.events.listen(this.canvas_,ol.webgl.WebGLContextEventType.LOST,this.handleWebGLContextLost,this);ol.events.listen(this.canvas_,ol.webgl.WebGLContextEventType.RESTORED,this.handleWebGLContextRestored,this)};ol.webgl.Context.prototype.bindBuffer=function(e,o){var t=this.getGL();var r=o.getArray();var i=String(goog.getUid(o));if(i in this.bufferCache_){var n=this.bufferCache_[i];t.bindBuffer(e,n.buffer)}else{var a=t.createBuffer();t.bindBuffer(e,a);goog.asserts.assert(e==goog.webgl.ARRAY_BUFFER||e==goog.webgl.ELEMENT_ARRAY_BUFFER,"target is supposed to be an ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER");var l;if(e==goog.webgl.ARRAY_BUFFER){l=new Float32Array(r)}else if(e==goog.webgl.ELEMENT_ARRAY_BUFFER){l=this.hasOESElementIndexUint?new Uint32Array(r):new Uint16Array(r)}else{goog.asserts.fail()}t.bufferData(e,l,o.getUsage());this.bufferCache_[i]={buf:o,buffer:a}}};ol.webgl.Context.prototype.deleteBuffer=function(e){var o=this.getGL();var t=String(goog.getUid(e));goog.asserts.assert(t in this.bufferCache_,"attempted to delete uncached buffer");var r=this.bufferCache_[t];if(!o.isContextLost()){o.deleteBuffer(r.buffer)}delete this.bufferCache_[t]};ol.webgl.Context.prototype.disposeInternal=function(){var e=this.getGL();if(!e.isContextLost()){var o;for(o in this.bufferCache_){e.deleteBuffer(this.bufferCache_[o].buffer)}for(o in this.programCache_){e.deleteProgram(this.programCache_[o])}for(o in this.shaderCache_){e.deleteShader(this.shaderCache_[o])}e.deleteFramebuffer(this.hitDetectionFramebuffer_);e.deleteRenderbuffer(this.hitDetectionRenderbuffer_);e.deleteTexture(this.hitDetectionTexture_)}};ol.webgl.Context.prototype.getCanvas=function(){return this.canvas_};ol.webgl.Context.prototype.getGL=function(){return this.gl_};ol.webgl.Context.prototype.getHitDetectionFramebuffer=function(){if(!this.hitDetectionFramebuffer_){this.initHitDetectionFramebuffer_()}return this.hitDetectionFramebuffer_};ol.webgl.Context.prototype.getShader=function(e){var o=String(goog.getUid(e));if(o in this.shaderCache_){return this.shaderCache_[o]}else{var t=this.getGL();var r=t.createShader(e.getType());t.shaderSource(r,e.getSource());t.compileShader(r);if(goog.DEBUG){if(!t.getShaderParameter(r,goog.webgl.COMPILE_STATUS)&&!t.isContextLost()){goog.log.error(this.logger_,t.getShaderInfoLog(r))}}goog.asserts.assert(t.getShaderParameter(r,goog.webgl.COMPILE_STATUS)||t.isContextLost(),"illegal state, shader not compiled or context lost");this.shaderCache_[o]=r;return r}};ol.webgl.Context.prototype.getProgram=function(e,o){var t=goog.getUid(e)+"/"+goog.getUid(o);if(t in this.programCache_){return this.programCache_[t]}else{var r=this.getGL();var i=r.createProgram();r.attachShader(i,this.getShader(e));r.attachShader(i,this.getShader(o));r.linkProgram(i);if(goog.DEBUG){if(!r.getProgramParameter(i,goog.webgl.LINK_STATUS)&&!r.isContextLost()){goog.log.error(this.logger_,r.getProgramInfoLog(i))}}goog.asserts.assert(r.getProgramParameter(i,goog.webgl.LINK_STATUS)||r.isContextLost(),"illegal state, shader not linked or context lost");this.programCache_[t]=i;return i}};ol.webgl.Context.prototype.handleWebGLContextLost=function(){ol.object.clear(this.bufferCache_);ol.object.clear(this.shaderCache_);ol.object.clear(this.programCache_);this.currentProgram_=null;this.hitDetectionFramebuffer_=null;this.hitDetectionTexture_=null;this.hitDetectionRenderbuffer_=null};ol.webgl.Context.prototype.handleWebGLContextRestored=function(){};ol.webgl.Context.prototype.initHitDetectionFramebuffer_=function(){var e=this.gl_;var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o);var t=ol.webgl.Context.createEmptyTexture(e,1,1);var r=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,r);e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,1,1);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,r);e.bindTexture(e.TEXTURE_2D,null);e.bindRenderbuffer(e.RENDERBUFFER,null);e.bindFramebuffer(e.FRAMEBUFFER,null);this.hitDetectionFramebuffer_=o;this.hitDetectionTexture_=t;this.hitDetectionRenderbuffer_=r};ol.webgl.Context.prototype.useProgram=function(e){if(e==this.currentProgram_){return false}else{var o=this.getGL();o.useProgram(e);this.currentProgram_=e;return true}};ol.webgl.Context.prototype.logger_=goog.log.getLogger("ol.webgl.Context");ol.webgl.Context.createTexture_=function(e,o,t){var r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR);if(o!==undefined){e.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_WRAP_S,o)}if(t!==undefined){e.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_WRAP_T,t)}return r};ol.webgl.Context.createEmptyTexture=function(e,o,t,r,i){var n=ol.webgl.Context.createTexture_(e,r,i);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,o,t,0,e.RGBA,e.UNSIGNED_BYTE,null);return n};ol.webgl.Context.createTexture=function(e,o,t,r){var i=ol.webgl.Context.createTexture_(e,t,r);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,o);return i};goog.provide("ol.render.webgl.ImageReplay");goog.provide("ol.render.webgl.ReplayGroup");goog.require("goog.asserts");goog.require("goog.functions");goog.require("goog.vec.Mat4");goog.require("ol.extent");goog.require("ol.object");goog.require("ol.render.IReplayGroup");goog.require("ol.render.VectorContext");goog.require("ol.render.webgl.imagereplay.shader.Default");goog.require("ol.render.webgl.imagereplay.shader.Default.Locations");goog.require("ol.render.webgl.imagereplay.shader.DefaultFragment");goog.require("ol.render.webgl.imagereplay.shader.DefaultVertex");goog.require("ol.vec.Mat4");goog.require("ol.webgl.Buffer");goog.require("ol.webgl.Context");ol.render.webgl.ImageReplay=function(e,o){goog.base(this);this.anchorX_=undefined;this.anchorY_=undefined;this.origin_=ol.extent.getCenter(o);this.groupIndices_=[];this.hitDetectionGroupIndices_=[];this.height_=undefined;this.images_=[];this.hitDetectionImages_=[];this.imageHeight_=undefined;this.imageWidth_=undefined;this.indices_=[];this.indicesBuffer_=null;this.defaultLocations_=null;this.opacity_=undefined;this.offsetRotateMatrix_=goog.vec.Mat4.createNumberIdentity();this.offsetScaleMatrix_=goog.vec.Mat4.createNumberIdentity();this.originX_=undefined;this.originY_=undefined;this.projectionMatrix_=goog.vec.Mat4.createNumberIdentity();this.rotateWithView_=undefined;this.rotation_=undefined;this.scale_=undefined;this.textures_=[];this.hitDetectionTextures_=[];this.vertices_=[];this.verticesBuffer_=null;this.startIndices_=[];this.startIndicesFeature_=[];this.width_=undefined};goog.inherits(ol.render.webgl.ImageReplay,ol.render.VectorContext);ol.render.webgl.ImageReplay.prototype.getDeleteResourcesFunction=function(e){goog.asserts.assert(this.verticesBuffer_,"verticesBuffer must not be null");goog.asserts.assert(this.indicesBuffer_,"indicesBuffer must not be null");var o=this.verticesBuffer_;var t=this.indicesBuffer_;var r=this.textures_;var i=this.hitDetectionTextures_;var n=e.getGL();return function(){if(!n.isContextLost()){var a,l;for(a=0,l=r.length;a<l;++a){n.deleteTexture(r[a])}for(a=0,l=i.length;a<l;++a){n.deleteTexture(i[a])}}e.deleteBuffer(o);e.deleteBuffer(t)}};ol.render.webgl.ImageReplay.prototype.drawAsync=goog.abstractMethod;ol.render.webgl.ImageReplay.prototype.drawCoordinates_=function(e,o,t,r){goog.asserts.assert(this.anchorX_!==undefined,"anchorX is defined");goog.asserts.assert(this.anchorY_!==undefined,"anchorY is defined");goog.asserts.assert(this.height_!==undefined,"height is defined");goog.asserts.assert(this.imageHeight_!==undefined,"imageHeight is defined");goog.asserts.assert(this.imageWidth_!==undefined,"imageWidth is defined");goog.asserts.assert(this.opacity_!==undefined,"opacity is defined");goog.asserts.assert(this.originX_!==undefined,"originX is defined");goog.asserts.assert(this.originY_!==undefined,"originY is defined");goog.asserts.assert(this.rotateWithView_!==undefined,"rotateWithView is defined");goog.asserts.assert(this.rotation_!==undefined,"rotation is defined");goog.asserts.assert(this.scale_!==undefined,"scale is defined");goog.asserts.assert(this.width_!==undefined,"width is defined");var i=this.anchorX_;var n=this.anchorY_;var a=this.height_;var l=this.imageHeight_;var s=this.imageWidth_;var g=this.opacity_;var p=this.originX_;var u=this.originY_;var c=this.rotateWithView_?1:0;var d=this.rotation_;var y=this.scale_;var h=this.width_;var m=Math.cos(d);var f=Math.sin(d);var v=this.indices_.length;var _=this.vertices_.length;var E,S,T,P,x,b;for(E=o;E<t;E+=r){x=e[E]-this.origin_[0];b=e[E+1]-this.origin_[1];S=_/8;T=-y*i;P=-y*(a-n);this.vertices_[_++]=x;this.vertices_[_++]=b;this.vertices_[_++]=T*m-P*f;this.vertices_[_++]=T*f+P*m;this.vertices_[_++]=p/s;this.vertices_[_++]=(u+a)/l;this.vertices_[_++]=g;this.vertices_[_++]=c;T=y*(h-i);P=-y*(a-n);this.vertices_[_++]=x;this.vertices_[_++]=b;this.vertices_[_++]=T*m-P*f;this.vertices_[_++]=T*f+P*m;this.vertices_[_++]=(p+h)/s;this.vertices_[_++]=(u+a)/l;this.vertices_[_++]=g;this.vertices_[_++]=c;T=y*(h-i);P=y*n;this.vertices_[_++]=x;this.vertices_[_++]=b;this.vertices_[_++]=T*m-P*f;this.vertices_[_++]=T*f+P*m;this.vertices_[_++]=(p+h)/s;this.vertices_[_++]=u/l;this.vertices_[_++]=g;this.vertices_[_++]=c;T=-y*i;P=y*n;this.vertices_[_++]=x;this.vertices_[_++]=b;this.vertices_[_++]=T*m-P*f;this.vertices_[_++]=T*f+P*m;this.vertices_[_++]=p/s;this.vertices_[_++]=u/l;this.vertices_[_++]=g;this.vertices_[_++]=c;this.indices_[v++]=S;this.indices_[v++]=S+1;this.indices_[v++]=S+2;this.indices_[v++]=S;this.indices_[v++]=S+2;this.indices_[v++]=S+3}return _};ol.render.webgl.ImageReplay.prototype.drawMultiPointGeometry=function(e,o){this.startIndices_.push(this.indices_.length);this.startIndicesFeature_.push(o);var t=e.getFlatCoordinates();var r=e.getStride();this.drawCoordinates_(t,0,t.length,r)};ol.render.webgl.ImageReplay.prototype.drawPointGeometry=function(e,o){this.startIndices_.push(this.indices_.length);this.startIndicesFeature_.push(o);var t=e.getFlatCoordinates();var r=e.getStride();this.drawCoordinates_(t,0,t.length,r)};ol.render.webgl.ImageReplay.prototype.finish=function(e){var o=e.getGL();this.groupIndices_.push(this.indices_.length);goog.asserts.assert(this.images_.length===this.groupIndices_.length,"number of images and groupIndices match");this.hitDetectionGroupIndices_.push(this.indices_.length);goog.asserts.assert(this.hitDetectionImages_.length===this.hitDetectionGroupIndices_.length,"number of hitDetectionImages and hitDetectionGroupIndices match");this.verticesBuffer_=new ol.webgl.Buffer(this.vertices_);e.bindBuffer(goog.webgl.ARRAY_BUFFER,this.verticesBuffer_);var t=this.indices_;var r=e.hasOESElementIndexUint?32:16;goog.asserts.assert(t[t.length-1]<Math.pow(2,r),'Too large element index detected [%s] (OES_element_index_uint "%s")',t[t.length-1],e.hasOESElementIndexUint);this.indicesBuffer_=new ol.webgl.Buffer(t);e.bindBuffer(goog.webgl.ELEMENT_ARRAY_BUFFER,this.indicesBuffer_);var i={};this.createTextures_(this.textures_,this.images_,i,o);goog.asserts.assert(this.textures_.length===this.groupIndices_.length,"number of textures and groupIndices match");this.createTextures_(this.hitDetectionTextures_,this.hitDetectionImages_,i,o);goog.asserts.assert(this.hitDetectionTextures_.length===this.hitDetectionGroupIndices_.length,"number of hitDetectionTextures and hitDetectionGroupIndices match");this.anchorX_=undefined;this.anchorY_=undefined;this.height_=undefined;this.images_=null;this.hitDetectionImages_=null;this.imageHeight_=undefined;this.imageWidth_=undefined;this.indices_=null;this.opacity_=undefined;this.originX_=undefined;this.originY_=undefined;this.rotateWithView_=undefined;this.rotation_=undefined;this.scale_=undefined;this.vertices_=null;this.width_=undefined};ol.render.webgl.ImageReplay.prototype.createTextures_=function(e,o,t,r){goog.asserts.assert(e.length===0,"upon creation, textures is empty");var i,n,a,l;var s=o.length;for(l=0;l<s;++l){n=o[l];a=goog.getUid(n).toString();if(a in t){i=t[a]}else{i=ol.webgl.Context.createTexture(r,n,goog.webgl.CLAMP_TO_EDGE,goog.webgl.CLAMP_TO_EDGE);t[a]=i}e[l]=i}};ol.render.webgl.ImageReplay.prototype.replay=function(e,o,t,r,i,n,a,l,s,g,p){var u=e.getGL();goog.asserts.assert(this.verticesBuffer_,"verticesBuffer must not be null");e.bindBuffer(goog.webgl.ARRAY_BUFFER,this.verticesBuffer_);goog.asserts.assert(this.indicesBuffer_,"indecesBuffer must not be null");e.bindBuffer(goog.webgl.ELEMENT_ARRAY_BUFFER,this.indicesBuffer_);var c=ol.render.webgl.imagereplay.shader.DefaultFragment.getInstance();var d=ol.render.webgl.imagereplay.shader.DefaultVertex.getInstance();var y=e.getProgram(c,d);var h;if(!this.defaultLocations_){h=new ol.render.webgl.imagereplay.shader.Default.Locations(u,y);this.defaultLocations_=h}else{h=this.defaultLocations_}e.useProgram(y);u.enableVertexAttribArray(h.a_position);u.vertexAttribPointer(h.a_position,2,goog.webgl.FLOAT,false,32,0);u.enableVertexAttribArray(h.a_offsets);u.vertexAttribPointer(h.a_offsets,2,goog.webgl.FLOAT,false,32,8);u.enableVertexAttribArray(h.a_texCoord);u.vertexAttribPointer(h.a_texCoord,2,goog.webgl.FLOAT,false,32,16);u.enableVertexAttribArray(h.a_opacity);u.vertexAttribPointer(h.a_opacity,1,goog.webgl.FLOAT,false,32,24);u.enableVertexAttribArray(h.a_rotateWithView);u.vertexAttribPointer(h.a_rotateWithView,1,goog.webgl.FLOAT,false,32,28);var m=this.projectionMatrix_;ol.vec.Mat4.makeTransform2D(m,0,0,2/(t*i[0]),2/(t*i[1]),-r,-(o[0]-this.origin_[0]),-(o[1]-this.origin_[1]));var f=this.offsetScaleMatrix_;goog.vec.Mat4.makeScale(f,2/i[0],2/i[1],1);var v=this.offsetRotateMatrix_;goog.vec.Mat4.makeIdentity(v);if(r!==0){goog.vec.Mat4.rotateZ(v,-r)}u.uniformMatrix4fv(h.u_projectionMatrix,false,m);u.uniformMatrix4fv(h.u_offsetScaleMatrix,false,f);u.uniformMatrix4fv(h.u_offsetRotateMatrix,false,v);u.uniform1f(h.u_opacity,a);var _;if(s===undefined){this.drawReplay_(u,e,l,this.textures_,this.groupIndices_)}else{_=this.drawHitDetectionReplay_(u,e,l,s,g,p)}u.disableVertexAttribArray(h.a_position);u.disableVertexAttribArray(h.a_offsets);u.disableVertexAttribArray(h.a_texCoord);u.disableVertexAttribArray(h.a_opacity);u.disableVertexAttribArray(h.a_rotateWithView);return _};ol.render.webgl.ImageReplay.prototype.drawReplay_=function(e,o,t,r,i){goog.asserts.assert(r.length===i.length,"number of textures and groupIndeces match");var n=o.hasOESElementIndexUint?goog.webgl.UNSIGNED_INT:goog.webgl.UNSIGNED_SHORT;var a=o.hasOESElementIndexUint?4:2;if(!ol.object.isEmpty(t)){this.drawReplaySkipping_(e,t,r,i,n,a)}else{var l,s,g;for(l=0,s=r.length,g=0;l<s;++l){e.bindTexture(goog.webgl.TEXTURE_2D,r[l]);var p=i[l];this.drawElements_(e,g,p,n,a);g=p}}};ol.render.webgl.ImageReplay.prototype.drawReplaySkipping_=function(e,o,t,r,i,n){var a=0;var l,s;for(l=0,s=t.length;l<s;++l){e.bindTexture(goog.webgl.TEXTURE_2D,t[l]);var g=l>0?r[l-1]:0;var p=r[l];var u=g;var c=g;while(a<this.startIndices_.length&&this.startIndices_[a]<=p){var d=this.startIndicesFeature_[a];var y=goog.getUid(d).toString();if(o[y]!==undefined){if(u!==c){this.drawElements_(e,u,c,i,n)}u=a===this.startIndices_.length-1?p:this.startIndices_[a+1];c=u}else{c=a===this.startIndices_.length-1?p:this.startIndices_[a+1]}a++}if(u!==c){this.drawElements_(e,u,c,i,n)}}};ol.render.webgl.ImageReplay.prototype.drawElements_=function(e,o,t,r,i){var n=t-o;var a=o*i;e.drawElements(goog.webgl.TRIANGLES,n,r,a)};ol.render.webgl.ImageReplay.prototype.drawHitDetectionReplay_=function(e,o,t,r,i,n){if(!i){return this.drawHitDetectionReplayAll_(e,o,t,r)}else{return this.drawHitDetectionReplayOneByOne_(e,o,t,r,n)}};ol.render.webgl.ImageReplay.prototype.drawHitDetectionReplayAll_=function(e,o,t,r){e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);this.drawReplay_(e,o,t,this.hitDetectionTextures_,this.hitDetectionGroupIndices_);var i=r(null);if(i){return i}else{return undefined}};ol.render.webgl.ImageReplay.prototype.drawHitDetectionReplayOneByOne_=function(e,o,t,r,i){goog.asserts.assert(this.hitDetectionTextures_.length===this.hitDetectionGroupIndices_.length,"number of hitDetectionTextures and hitDetectionGroupIndices match");var n=o.hasOESElementIndexUint?goog.webgl.UNSIGNED_INT:goog.webgl.UNSIGNED_SHORT;var a=o.hasOESElementIndexUint?4:2;var l,s,g,p,u,c;var d=this.startIndices_.length-1;for(l=this.hitDetectionTextures_.length-1;l>=0;--l){e.bindTexture(goog.webgl.TEXTURE_2D,this.hitDetectionTextures_[l]);s=l>0?this.hitDetectionGroupIndices_[l-1]:0;p=this.hitDetectionGroupIndices_[l];while(d>=0&&this.startIndices_[d]>=s){g=this.startIndices_[d];u=this.startIndicesFeature_[d];c=goog.getUid(u).toString();if(t[c]===undefined&&u.getGeometry()&&(i===undefined||ol.extent.intersects(i,u.getGeometry().getExtent()))){e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);this.drawElements_(e,g,p,n,a);var y=r(u);if(y){return y}}p=g;d--}}return undefined};ol.render.webgl.ImageReplay.prototype.setFillStrokeStyle=goog.abstractMethod;ol.render.webgl.ImageReplay.prototype.setImageStyle=function(e){var o=e.getAnchor();var t=e.getImage(1);var r=e.getImageSize();var i=e.getHitDetectionImage(1);var n=e.getHitDetectionImageSize();var a=e.getOpacity();var l=e.getOrigin();var s=e.getRotateWithView();var g=e.getRotation();var p=e.getSize();var u=e.getScale();goog.asserts.assert(o,"imageStyle anchor is not null");goog.asserts.assert(t,"imageStyle image is not null");goog.asserts.assert(r,"imageStyle imageSize is not null");goog.asserts.assert(i,"imageStyle hitDetectionImage is not null");goog.asserts.assert(n,"imageStyle hitDetectionImageSize is not null");goog.asserts.assert(a!==undefined,"imageStyle opacity is defined");goog.asserts.assert(l,"imageStyle origin is not null");goog.asserts.assert(s!==undefined,"imageStyle rotateWithView is defined");goog.asserts.assert(g!==undefined,"imageStyle rotation is defined");goog.asserts.assert(p,"imageStyle size is not null");goog.asserts.assert(u!==undefined,"imageStyle scale is defined");var c;if(this.images_.length===0){this.images_.push(t)}else{c=this.images_[this.images_.length-1];if(goog.getUid(c)!=goog.getUid(t)){this.groupIndices_.push(this.indices_.length);goog.asserts.assert(this.groupIndices_.length===this.images_.length,"number of groupIndices and images match");this.images_.push(t)}}if(this.hitDetectionImages_.length===0){this.hitDetectionImages_.push(i)}else{c=this.hitDetectionImages_[this.hitDetectionImages_.length-1];if(goog.getUid(c)!=goog.getUid(i)){this.hitDetectionGroupIndices_.push(this.indices_.length);goog.asserts.assert(this.hitDetectionGroupIndices_.length===this.hitDetectionImages_.length,"number of hitDetectionGroupIndices and hitDetectionImages match");this.hitDetectionImages_.push(i)}}this.anchorX_=o[0];this.anchorY_=o[1];this.height_=p[1];this.imageHeight_=r[1];this.imageWidth_=r[0];this.opacity_=a;this.originX_=l[0];this.originY_=l[1];this.rotation_=g;this.rotateWithView_=s;this.scale_=u;this.width_=p[0]};ol.render.webgl.ReplayGroup=function(e,o,t){this.maxExtent_=o;this.tolerance_=e;this.renderBuffer_=t;this.replays_={}};ol.render.webgl.ReplayGroup.prototype.getDeleteResourcesFunction=function(e){var o=[];var t;for(t in this.replays_){o.push(this.replays_[t].getDeleteResourcesFunction(e))}return goog.functions.sequence.apply(null,o)};ol.render.webgl.ReplayGroup.prototype.finish=function(e){var o;for(o in this.replays_){this.replays_[o].finish(e)}};ol.render.webgl.ReplayGroup.prototype.getReplay=function(e,o){var t=this.replays_[o];if(t===undefined){var r=ol.render.webgl.BATCH_CONSTRUCTORS_[o];goog.asserts.assert(r!==undefined,o+" constructor missing from ol.render.webgl.BATCH_CONSTRUCTORS_");t=new r(this.tolerance_,this.maxExtent_);this.replays_[o]=t}return t};ol.render.webgl.ReplayGroup.prototype.isEmpty=function(){return ol.object.isEmpty(this.replays_)};ol.render.webgl.ReplayGroup.prototype.replay=function(e,o,t,r,i,n,a,l){var s,g,p;for(s=0,g=ol.render.REPLAY_ORDER.length;s<g;++s){p=this.replays_[ol.render.REPLAY_ORDER[s]];if(p!==undefined){p.replay(e,o,t,r,i,n,a,l,undefined,false)}}};ol.render.webgl.ReplayGroup.prototype.replayHitDetection_=function(e,o,t,r,i,n,a,l,s,g,p){var u,c,d;for(u=ol.render.REPLAY_ORDER.length-1;u>=0;--u){c=this.replays_[ol.render.REPLAY_ORDER[u]];if(c!==undefined){d=c.replay(e,o,t,r,i,n,a,l,s,g,p);if(d){return d}}}return undefined};ol.render.webgl.ReplayGroup.prototype.forEachFeatureAtCoordinate=function(e,o,t,r,i,n,a,l,s,g){var p=o.getGL();p.bindFramebuffer(p.FRAMEBUFFER,o.getHitDetectionFramebuffer());var u;if(this.renderBuffer_!==undefined){u=ol.extent.buffer(ol.extent.createOrUpdateFromCoordinate(e),r*this.renderBuffer_)}return this.replayHitDetection_(o,e,r,i,ol.render.webgl.HIT_DETECTION_SIZE_,a,l,s,function(e){var o=new Uint8Array(4);p.readPixels(0,0,1,1,p.RGBA,p.UNSIGNED_BYTE,o);if(o[3]>0){var t=g(e);if(t){return t}}},true,u)};ol.render.webgl.ReplayGroup.prototype.hasFeatureAtCoordinate=function(e,o,t,r,i,n,a,l,s){var g=o.getGL();g.bindFramebuffer(g.FRAMEBUFFER,o.getHitDetectionFramebuffer());var p=this.replayHitDetection_(o,e,r,i,ol.render.webgl.HIT_DETECTION_SIZE_,a,l,s,function(e){var o=new Uint8Array(4);g.readPixels(0,0,1,1,g.RGBA,g.UNSIGNED_BYTE,o);return o[3]>0},false);return p!==undefined};ol.render.webgl.BATCH_CONSTRUCTORS_={Image:ol.render.webgl.ImageReplay};ol.render.webgl.HIT_DETECTION_SIZE_=[1,1];goog.provide("ol.render.webgl.Immediate");goog.require("ol.array");goog.require("ol.extent");goog.require("ol.render.VectorContext");goog.require("ol.render.webgl.ImageReplay");goog.require("ol.render.webgl.ReplayGroup");ol.render.webgl.Immediate=function(e,o,t,r,i,n,a){goog.base(this);this.context_=e;this.center_=o;this.extent_=n;this.pixelRatio_=a;this.size_=i;this.rotation_=r;this.resolution_=t;this.imageStyle_=null;this.callbacksByZIndex_={}};goog.inherits(ol.render.webgl.Immediate,ol.render.VectorContext);ol.render.webgl.Immediate.prototype.flush=function(){var e=Object.keys(this.callbacksByZIndex_).map(Number);e.sort(ol.array.numberSafeCompareFunction);var o,t,r,i,n;for(o=0,t=e.length;o<t;++o){r=this.callbacksByZIndex_[e[o].toString()];for(i=0,n=r.length;i<n;++i){r[i](this)}}};ol.render.webgl.Immediate.prototype.drawAsync=function(e,o){var t=e.toString();var r=this.callbacksByZIndex_[t];if(r!==undefined){r.push(o)}else{this.callbacksByZIndex_[t]=[o]}};ol.render.webgl.Immediate.prototype.drawCircleGeometry=function(e,o){};ol.render.webgl.Immediate.prototype.drawFeature=function(e,o){var t=o.getGeometryFunction()(e);if(!t||!ol.extent.intersects(this.extent_,t.getExtent())){return}var r=o.getZIndex();if(r===undefined){r=0}this.drawAsync(r,function(e){e.setFillStrokeStyle(o.getFill(),o.getStroke());e.setImageStyle(o.getImage());e.setTextStyle(o.getText());var r=t.getType();var i=ol.render.webgl.Immediate.GEOMETRY_RENDERERS_[r];if(i){i.call(e,t,null)}})};ol.render.webgl.Immediate.prototype.drawGeometryCollectionGeometry=function(e,o){var t=e.getGeometriesArray();var r=ol.render.webgl.Immediate.GEOMETRY_RENDERERS_;var i,n;for(i=0,n=t.length;i<n;++i){var a=t[i];var l=r[a.getType()];if(l){l.call(this,a,o)}}};ol.render.webgl.Immediate.prototype.drawPointGeometry=function(e,o){var t=this.context_;var r=new ol.render.webgl.ReplayGroup(1,this.extent_);var i=r.getReplay(0,ol.render.ReplayType.IMAGE);i.setImageStyle(this.imageStyle_);i.drawPointGeometry(e,o);i.finish(t);var n=1;var a={};var l;var s=false;i.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,n,a,l,s);i.getDeleteResourcesFunction(t)()};ol.render.webgl.Immediate.prototype.drawLineStringGeometry=function(e,o){};ol.render.webgl.Immediate.prototype.drawMultiLineStringGeometry=function(e,o){};ol.render.webgl.Immediate.prototype.drawMultiPointGeometry=function(e,o){var t=this.context_;var r=new ol.render.webgl.ReplayGroup(1,this.extent_);var i=r.getReplay(0,ol.render.ReplayType.IMAGE);i.setImageStyle(this.imageStyle_);i.drawMultiPointGeometry(e,o);i.finish(t);var n=1;var a={};var l;var s=false;i.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,n,a,l,s);i.getDeleteResourcesFunction(t)()};ol.render.webgl.Immediate.prototype.drawMultiPolygonGeometry=function(e,o){};ol.render.webgl.Immediate.prototype.drawPolygonGeometry=function(e,o){};ol.render.webgl.Immediate.prototype.drawText=function(e,o,t,r,i,n){};ol.render.webgl.Immediate.prototype.setFillStrokeStyle=function(e,o){};ol.render.webgl.Immediate.prototype.setImageStyle=function(e){this.imageStyle_=e};ol.render.webgl.Immediate.prototype.setTextStyle=function(e){};ol.render.webgl.Immediate.GEOMETRY_RENDERERS_={Point:ol.render.webgl.Immediate.prototype.drawPointGeometry,MultiPoint:ol.render.webgl.Immediate.prototype.drawMultiPointGeometry,GeometryCollection:ol.render.webgl.Immediate.prototype.drawGeometryCollectionGeometry};goog.provide("ol.renderer.webgl.map.shader.Default");goog.provide("ol.renderer.webgl.map.shader.Default.Locations");goog.provide("ol.renderer.webgl.map.shader.DefaultFragment");goog.provide("ol.renderer.webgl.map.shader.DefaultVertex");goog.require("ol.webgl.shader");ol.renderer.webgl.map.shader.DefaultFragment=function(){goog.base(this,ol.renderer.webgl.map.shader.DefaultFragment.SOURCE)};goog.inherits(ol.renderer.webgl.map.shader.DefaultFragment,ol.webgl.shader.Fragment);goog.addSingletonGetter(ol.renderer.webgl.map.shader.DefaultFragment);ol.renderer.webgl.map.shader.DefaultFragment.DEBUG_SOURCE="precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n";ol.renderer.webgl.map.shader.DefaultFragment.OPTIMIZED_SOURCE="precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}";ol.renderer.webgl.map.shader.DefaultFragment.SOURCE=goog.DEBUG?ol.renderer.webgl.map.shader.DefaultFragment.DEBUG_SOURCE:ol.renderer.webgl.map.shader.DefaultFragment.OPTIMIZED_SOURCE;ol.renderer.webgl.map.shader.DefaultVertex=function(){goog.base(this,ol.renderer.webgl.map.shader.DefaultVertex.SOURCE)};goog.inherits(ol.renderer.webgl.map.shader.DefaultVertex,ol.webgl.shader.Vertex);goog.addSingletonGetter(ol.renderer.webgl.map.shader.DefaultVertex);ol.renderer.webgl.map.shader.DefaultVertex.DEBUG_SOURCE="varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n";ol.renderer.webgl.map.shader.DefaultVertex.OPTIMIZED_SOURCE="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}";ol.renderer.webgl.map.shader.DefaultVertex.SOURCE=goog.DEBUG?ol.renderer.webgl.map.shader.DefaultVertex.DEBUG_SOURCE:ol.renderer.webgl.map.shader.DefaultVertex.OPTIMIZED_SOURCE;ol.renderer.webgl.map.shader.Default.Locations=function(e,o){this.u_opacity=e.getUniformLocation(o,goog.DEBUG?"u_opacity":"f");this.u_projectionMatrix=e.getUniformLocation(o,goog.DEBUG?"u_projectionMatrix":"e");this.u_texCoordMatrix=e.getUniformLocation(o,goog.DEBUG?"u_texCoordMatrix":"d");this.u_texture=e.getUniformLocation(o,goog.DEBUG?"u_texture":"g");this.a_position=e.getAttribLocation(o,goog.DEBUG?"a_position":"b");this.a_texCoord=e.getAttribLocation(o,goog.DEBUG?"a_texCoord":"c")};goog.provide("ol.renderer.webgl.Layer");goog.require("goog.vec.Mat4");goog.require("goog.webgl");goog.require("ol.layer.Layer");goog.require("ol.render.Event");goog.require("ol.render.EventType");goog.require("ol.render.webgl.Immediate");goog.require("ol.renderer.Layer");goog.require("ol.renderer.webgl.map.shader.Default");goog.require("ol.renderer.webgl.map.shader.Default.Locations");goog.require("ol.renderer.webgl.map.shader.DefaultFragment");goog.require("ol.renderer.webgl.map.shader.DefaultVertex");goog.require("ol.webgl.Buffer");goog.require("ol.webgl.Context");ol.renderer.webgl.Layer=function(e,o){goog.base(this,o);this.mapRenderer=e;this.arrayBuffer_=new ol.webgl.Buffer([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]);this.texture=null;this.framebuffer=null;this.framebufferDimension=undefined;this.texCoordMatrix=goog.vec.Mat4.createNumber();this.projectionMatrix=goog.vec.Mat4.createNumberIdentity();this.defaultLocations_=null};goog.inherits(ol.renderer.webgl.Layer,ol.renderer.Layer);ol.renderer.webgl.Layer.prototype.bindFramebuffer=function(e,o){var t=this.mapRenderer.getGL();if(this.framebufferDimension===undefined||this.framebufferDimension!=o){e.postRenderFunctions.push(goog.partial(function(e,o,t){if(!e.isContextLost()){e.deleteFramebuffer(o);e.deleteTexture(t)}},t,this.framebuffer,this.texture));var r=ol.webgl.Context.createEmptyTexture(t,o,o);var i=t.createFramebuffer();t.bindFramebuffer(goog.webgl.FRAMEBUFFER,i);t.framebufferTexture2D(goog.webgl.FRAMEBUFFER,goog.webgl.COLOR_ATTACHMENT0,goog.webgl.TEXTURE_2D,r,0);this.texture=r;this.framebuffer=i;this.framebufferDimension=o}else{t.bindFramebuffer(goog.webgl.FRAMEBUFFER,this.framebuffer)}};ol.renderer.webgl.Layer.prototype.composeFrame=function(e,o,t){this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,t,e);t.bindBuffer(goog.webgl.ARRAY_BUFFER,this.arrayBuffer_);var r=t.getGL();var i=ol.renderer.webgl.map.shader.DefaultFragment.getInstance();var n=ol.renderer.webgl.map.shader.DefaultVertex.getInstance();var a=t.getProgram(i,n);var l;if(!this.defaultLocations_){l=new ol.renderer.webgl.map.shader.Default.Locations(r,a);this.defaultLocations_=l}else{l=this.defaultLocations_}if(t.useProgram(a)){r.enableVertexAttribArray(l.a_position);r.vertexAttribPointer(l.a_position,2,goog.webgl.FLOAT,false,16,0);r.enableVertexAttribArray(l.a_texCoord);r.vertexAttribPointer(l.a_texCoord,2,goog.webgl.FLOAT,false,16,8);r.uniform1i(l.u_texture,0)}r.uniformMatrix4fv(l.u_texCoordMatrix,false,this.getTexCoordMatrix());r.uniformMatrix4fv(l.u_projectionMatrix,false,this.getProjectionMatrix());r.uniform1f(l.u_opacity,o.opacity);r.bindTexture(goog.webgl.TEXTURE_2D,this.getTexture());r.drawArrays(goog.webgl.TRIANGLE_STRIP,0,4);this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,t,e)};ol.renderer.webgl.Layer.prototype.dispatchComposeEvent_=function(e,o,t){var r=this.getLayer();if(r.hasListener(e)){var i=t.viewState;var n=i.resolution;var a=t.pixelRatio;var l=t.extent;var s=i.center;var g=i.rotation;var p=t.size;var u=new ol.render.webgl.Immediate(o,s,n,g,p,l,a);var c=new ol.render.Event(e,r,u,t,null,o);r.dispatchEvent(c)}};ol.renderer.webgl.Layer.prototype.getTexCoordMatrix=function(){return this.texCoordMatrix};ol.renderer.webgl.Layer.prototype.getTexture=function(){return this.texture};ol.renderer.webgl.Layer.prototype.getProjectionMatrix=function(){return this.projectionMatrix};ol.renderer.webgl.Layer.prototype.handleWebGLContextLost=function(){this.texture=null;this.framebuffer=null;this.framebufferDimension=undefined};ol.renderer.webgl.Layer.prototype.prepareFrame=goog.abstractMethod;goog.provide("ol.renderer.webgl.ImageLayer");goog.require("goog.asserts");goog.require("goog.functions");goog.require("goog.vec.Mat4");goog.require("goog.webgl");goog.require("ol.Coordinate");goog.require("ol.Extent");goog.require("ol.ImageBase");goog.require("ol.ViewHint");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.layer.Image");goog.require("ol.proj");goog.require("ol.renderer.webgl.Layer");goog.require("ol.source.ImageVector");goog.require("ol.vec.Mat4");goog.require("ol.webgl.Context");ol.renderer.webgl.ImageLayer=function(e,o){goog.base(this,e,o);this.image_=null;this.hitCanvasContext_=null;this.hitTransformationMatrix_=null}
;goog.inherits(ol.renderer.webgl.ImageLayer,ol.renderer.webgl.Layer);ol.renderer.webgl.ImageLayer.prototype.createTexture_=function(e){var o=e.getImage();var t=this.mapRenderer.getGL();return ol.webgl.Context.createTexture(t,o,goog.webgl.CLAMP_TO_EDGE,goog.webgl.CLAMP_TO_EDGE)};ol.renderer.webgl.ImageLayer.prototype.forEachFeatureAtCoordinate=function(e,o,t,r){var i=this.getLayer();var n=i.getSource();var a=o.viewState.resolution;var l=o.viewState.rotation;var s=o.skippedFeatureUids;return n.forEachFeatureAtCoordinate(e,a,l,s,function(e){return t.call(r,e,i)})};ol.renderer.webgl.ImageLayer.prototype.prepareFrame=function(e,o,t){var r=this.mapRenderer.getGL();var i=e.pixelRatio;var n=e.viewState;var a=n.center;var l=n.resolution;var s=n.rotation;var g=this.image_;var p=this.texture;var u=this.getLayer();goog.asserts.assertInstanceof(u,ol.layer.Image,"layer is an instance of ol.layer.Image");var c=u.getSource();var d=e.viewHints;var y=e.extent;if(o.extent!==undefined){y=ol.extent.getIntersection(y,o.extent)}if(!d[ol.ViewHint.ANIMATING]&&!d[ol.ViewHint.INTERACTING]&&!ol.extent.isEmpty(y)){var h=n.projection;if(!ol.ENABLE_RASTER_REPROJECTION){var m=c.getProjection();if(m){goog.asserts.assert(ol.proj.equivalent(h,m),"projection and sourceProjection are equivalent");h=m}}var f=c.getImage(y,l,i,h);if(f){var v=this.loadImage(f);if(v){g=f;p=this.createTexture_(f);if(this.texture){e.postRenderFunctions.push(goog.partial(function(e,o){if(!e.isContextLost()){e.deleteTexture(o)}},r,this.texture))}}}}if(g){goog.asserts.assert(p,"texture is truthy");var _=this.mapRenderer.getContext().getCanvas();this.updateProjectionMatrix_(_.width,_.height,i,a,l,s,g.getExtent());this.hitTransformationMatrix_=null;var E=this.texCoordMatrix;goog.vec.Mat4.makeIdentity(E);goog.vec.Mat4.scale(E,1,-1,1);goog.vec.Mat4.translate(E,0,-1,0);this.image_=g;this.texture=p;this.updateAttributions(e.attributions,g.getAttributions());this.updateLogos(e,c)}return true};ol.renderer.webgl.ImageLayer.prototype.updateProjectionMatrix_=function(e,o,t,r,i,n,a){var l=e*i;var s=o*i;var g=this.projectionMatrix;goog.vec.Mat4.makeIdentity(g);goog.vec.Mat4.scale(g,t*2/l,t*2/s,1);goog.vec.Mat4.rotateZ(g,-n);goog.vec.Mat4.translate(g,a[0]-r[0],a[1]-r[1],0);goog.vec.Mat4.scale(g,(a[2]-a[0])/2,(a[3]-a[1])/2,1);goog.vec.Mat4.translate(g,1,1,0)};ol.renderer.webgl.ImageLayer.prototype.hasFeatureAtCoordinate=function(e,o){var t=this.forEachFeatureAtCoordinate(e,o,goog.functions.TRUE,this);return t!==undefined};ol.renderer.webgl.ImageLayer.prototype.forEachLayerAtPixel=function(e,o,t,r){if(!this.image_||!this.image_.getImage()){return undefined}if(this.getLayer().getSource()instanceof ol.source.ImageVector){var i=e.slice();ol.vec.Mat4.multVec2(o.pixelToCoordinateMatrix,i,i);var n=this.forEachFeatureAtCoordinate(i,o,goog.functions.TRUE,this);if(n){return t.call(r,this.getLayer())}else{return undefined}}else{var a=[this.image_.getImage().width,this.image_.getImage().height];if(!this.hitTransformationMatrix_){this.hitTransformationMatrix_=this.getHitTransformationMatrix_(o.size,a)}var l=[0,0];ol.vec.Mat4.multVec2(this.hitTransformationMatrix_,e,l);if(l[0]<0||l[0]>a[0]||l[1]<0||l[1]>a[1]){return undefined}if(!this.hitCanvasContext_){this.hitCanvasContext_=ol.dom.createCanvasContext2D(1,1)}this.hitCanvasContext_.clearRect(0,0,1,1);this.hitCanvasContext_.drawImage(this.image_.getImage(),l[0],l[1],1,1,0,0,1,1);var s=this.hitCanvasContext_.getImageData(0,0,1,1).data;if(s[3]>0){return t.call(r,this.getLayer())}else{return undefined}}};ol.renderer.webgl.ImageLayer.prototype.getHitTransformationMatrix_=function(e,o){var t=goog.vec.Mat4.createNumber();goog.vec.Mat4.makeIdentity(t);goog.vec.Mat4.translate(t,-1,-1,0);goog.vec.Mat4.scale(t,2/e[0],2/e[1],1);goog.vec.Mat4.translate(t,0,e[1],0);goog.vec.Mat4.scale(t,1,-1,1);var r=goog.vec.Mat4.createNumber();goog.vec.Mat4.invert(this.projectionMatrix,r);var i=goog.vec.Mat4.createNumber();goog.vec.Mat4.makeIdentity(i);goog.vec.Mat4.translate(i,0,o[1],0);goog.vec.Mat4.scale(i,1,-1,1);goog.vec.Mat4.scale(i,o[0]/2,o[1]/2,1);goog.vec.Mat4.translate(i,1,1,0);var n=goog.vec.Mat4.createNumber();goog.vec.Mat4.multMat(i,r,n);goog.vec.Mat4.multMat(n,t,n);return n};goog.provide("ol.renderer.webgl.tilelayer.shader");goog.provide("ol.renderer.webgl.tilelayer.shader.Locations");goog.provide("ol.renderer.webgl.tilelayer.shader.Fragment");goog.provide("ol.renderer.webgl.tilelayer.shader.Vertex");goog.require("ol.webgl.shader");ol.renderer.webgl.tilelayer.shader.Fragment=function(){goog.base(this,ol.renderer.webgl.tilelayer.shader.Fragment.SOURCE)};goog.inherits(ol.renderer.webgl.tilelayer.shader.Fragment,ol.webgl.shader.Fragment);goog.addSingletonGetter(ol.renderer.webgl.tilelayer.shader.Fragment);ol.renderer.webgl.tilelayer.shader.Fragment.DEBUG_SOURCE="precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n";ol.renderer.webgl.tilelayer.shader.Fragment.OPTIMIZED_SOURCE="precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}";ol.renderer.webgl.tilelayer.shader.Fragment.SOURCE=goog.DEBUG?ol.renderer.webgl.tilelayer.shader.Fragment.DEBUG_SOURCE:ol.renderer.webgl.tilelayer.shader.Fragment.OPTIMIZED_SOURCE;ol.renderer.webgl.tilelayer.shader.Vertex=function(){goog.base(this,ol.renderer.webgl.tilelayer.shader.Vertex.SOURCE)};goog.inherits(ol.renderer.webgl.tilelayer.shader.Vertex,ol.webgl.shader.Vertex);goog.addSingletonGetter(ol.renderer.webgl.tilelayer.shader.Vertex);ol.renderer.webgl.tilelayer.shader.Vertex.DEBUG_SOURCE="varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 u_tileOffset;\n\nvoid main(void) {\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\n  v_texCoord = a_texCoord;\n}\n\n\n";ol.renderer.webgl.tilelayer.shader.Vertex.OPTIMIZED_SOURCE="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}";ol.renderer.webgl.tilelayer.shader.Vertex.SOURCE=goog.DEBUG?ol.renderer.webgl.tilelayer.shader.Vertex.DEBUG_SOURCE:ol.renderer.webgl.tilelayer.shader.Vertex.OPTIMIZED_SOURCE;ol.renderer.webgl.tilelayer.shader.Locations=function(e,o){this.u_texture=e.getUniformLocation(o,goog.DEBUG?"u_texture":"e");this.u_tileOffset=e.getUniformLocation(o,goog.DEBUG?"u_tileOffset":"d");this.a_position=e.getAttribLocation(o,goog.DEBUG?"a_position":"b");this.a_texCoord=e.getAttribLocation(o,goog.DEBUG?"a_texCoord":"c")};goog.provide("ol.renderer.webgl.TileLayer");goog.require("goog.asserts");goog.require("goog.vec.Mat4");goog.require("goog.vec.Vec4");goog.require("goog.webgl");goog.require("ol.TileRange");goog.require("ol.TileState");goog.require("ol.array");goog.require("ol.extent");goog.require("ol.layer.Tile");goog.require("ol.math");goog.require("ol.renderer.webgl.Layer");goog.require("ol.renderer.webgl.tilelayer.shader.Fragment");goog.require("ol.renderer.webgl.tilelayer.shader.Locations");goog.require("ol.renderer.webgl.tilelayer.shader.Vertex");goog.require("ol.size");goog.require("ol.vec.Mat4");goog.require("ol.webgl.Buffer");ol.renderer.webgl.TileLayer=function(e,o){goog.base(this,e,o);this.fragmentShader_=ol.renderer.webgl.tilelayer.shader.Fragment.getInstance();this.vertexShader_=ol.renderer.webgl.tilelayer.shader.Vertex.getInstance();this.locations_=null;this.renderArrayBuffer_=new ol.webgl.Buffer([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]);this.renderedTileRange_=null;this.renderedFramebufferExtent_=null;this.renderedRevision_=-1;this.tmpSize_=[0,0]};goog.inherits(ol.renderer.webgl.TileLayer,ol.renderer.webgl.Layer);ol.renderer.webgl.TileLayer.prototype.disposeInternal=function(){var e=this.mapRenderer.getContext();e.deleteBuffer(this.renderArrayBuffer_);goog.base(this,"disposeInternal")};ol.renderer.webgl.TileLayer.prototype.createLoadedTileFinder=function(e,o,t){var r=this.mapRenderer;return function(i,n){function a(e){var o=r.isTileTextureLoaded(e);if(o){if(!t[i]){t[i]={}}t[i][e.tileCoord.toString()]=e}return o}return e.forEachLoadedTile(o,i,n,a)}};ol.renderer.webgl.TileLayer.prototype.handleWebGLContextLost=function(){goog.base(this,"handleWebGLContextLost");this.locations_=null};ol.renderer.webgl.TileLayer.prototype.prepareFrame=function(e,o,t){var r=this.mapRenderer;var i=t.getGL();var n=e.viewState;var a=n.projection;var l=this.getLayer();goog.asserts.assertInstanceof(l,ol.layer.Tile,"layer is an instance of ol.layer.Tile");var s=l.getSource();var g=s.getTileGridForProjection(a);var p=g.getZForResolution(n.resolution);var u=g.getResolution(p);var c=s.getTilePixelSize(p,e.pixelRatio,a);var d=c[0]/ol.size.toSize(g.getTileSize(p),this.tmpSize_)[0];var y=u/d;var h=s.getGutter(a);var m=n.center;var f;if(u==n.resolution){m=this.snapCenterToPixel(m,u,e.size);f=ol.extent.getForViewAndSize(m,u,n.rotation,e.size)}else{f=e.extent}var v=g.getTileRangeForExtentAndResolution(f,u);var _;if(this.renderedTileRange_&&this.renderedTileRange_.equals(v)&&this.renderedRevision_==s.getRevision()){_=this.renderedFramebufferExtent_}else{var E=v.getSize();var S=Math.max(E[0]*c[0],E[1]*c[1]);var T=ol.math.roundUpToPowerOfTwo(S);var P=y*T;var x=g.getOrigin(p);var b=x[0]+v.minX*c[0]*y;var M=x[1]+v.minY*c[1]*y;_=[b,M,b+P,M+P];this.bindFramebuffer(e,T);i.viewport(0,0,T,T);i.clearColor(0,0,0,0);i.clear(goog.webgl.COLOR_BUFFER_BIT);i.disable(goog.webgl.BLEND);var L=t.getProgram(this.fragmentShader_,this.vertexShader_);t.useProgram(L);if(!this.locations_){this.locations_=new ol.renderer.webgl.tilelayer.shader.Locations(i,L)}t.bindBuffer(goog.webgl.ARRAY_BUFFER,this.renderArrayBuffer_);i.enableVertexAttribArray(this.locations_.a_position);i.vertexAttribPointer(this.locations_.a_position,2,goog.webgl.FLOAT,false,16,0);i.enableVertexAttribArray(this.locations_.a_texCoord);i.vertexAttribPointer(this.locations_.a_texCoord,2,goog.webgl.FLOAT,false,16,8);i.uniform1i(this.locations_.u_texture,0);var R={};R[p]={};var C=this.createLoadedTileFinder(s,a,R);var A=l.getUseInterimTilesOnError();var I=true;var O=ol.extent.createEmpty();var N=new ol.TileRange(0,0,0,0);var w,D,F,G,U;var q,k,V;for(q=v.minX;q<=v.maxX;++q){for(k=v.minY;k<=v.maxY;++k){G=s.getTile(p,q,k,d,a);if(o.extent!==undefined){V=g.getTileCoordExtent(G.tileCoord,O);if(!ol.extent.intersects(V,o.extent)){continue}}U=G.getState();D=U==ol.TileState.LOADED||U==ol.TileState.EMPTY||U==ol.TileState.ERROR&&!A;if(!D&&G.interimTile){G=G.interimTile}goog.asserts.assert(G);U=G.getState();if(U==ol.TileState.LOADED){if(r.isTileTextureLoaded(G)){R[p][G.tileCoord.toString()]=G;continue}}else if(U==ol.TileState.EMPTY||U==ol.TileState.ERROR&&!A){continue}I=false;F=g.forEachTileCoordParentTileRange(G.tileCoord,C,null,N,O);if(!F){w=g.getTileCoordChildTileRange(G.tileCoord,N,O);if(w){C(p+1,w)}}}}var B=Object.keys(R).map(Number);B.sort(ol.array.numberSafeCompareFunction);var j=goog.vec.Vec4.createFloat32();var W,K,z,H,X,Y,Z,J;for(W=0,K=B.length;W<K;++W){Y=R[B[W]];for(X in Y){G=Y[X];V=g.getTileCoordExtent(G.tileCoord,O);z=2*(V[2]-V[0])/P;H=2*(V[3]-V[1])/P;Z=2*(V[0]-_[0])/P-1;J=2*(V[1]-_[1])/P-1;goog.vec.Vec4.setFromValues(j,z,H,Z,J);i.uniform4fv(this.locations_.u_tileOffset,j);r.bindTileTexture(G,c,h*d,goog.webgl.LINEAR,goog.webgl.LINEAR);i.drawArrays(goog.webgl.TRIANGLE_STRIP,0,4)}}if(I){this.renderedTileRange_=v;this.renderedFramebufferExtent_=_;this.renderedRevision_=s.getRevision()}else{this.renderedTileRange_=null;this.renderedFramebufferExtent_=null;this.renderedRevision_=-1;e.animate=true}}this.updateUsedTiles(e.usedTiles,s,p,v);var Q=r.getTileTextureQueue();this.manageTilePyramid(e,s,g,d,a,f,p,l.getPreload(),function(e){if(e.getState()==ol.TileState.LOADED&&!r.isTileTextureLoaded(e)&&!Q.isKeyQueued(e.getKey())){Q.enqueue([e,g.getTileCoordCenter(e.tileCoord),g.getResolution(e.tileCoord[0]),c,h*d])}},this);this.scheduleExpireCache(e,s);this.updateLogos(e,s);var $=this.texCoordMatrix;goog.vec.Mat4.makeIdentity($);goog.vec.Mat4.translate($,(m[0]-_[0])/(_[2]-_[0]),(m[1]-_[1])/(_[3]-_[1]),0);if(n.rotation!==0){goog.vec.Mat4.rotateZ($,n.rotation)}goog.vec.Mat4.scale($,e.size[0]*n.resolution/(_[2]-_[0]),e.size[1]*n.resolution/(_[3]-_[1]),1);goog.vec.Mat4.translate($,-.5,-.5,0);return true};ol.renderer.webgl.TileLayer.prototype.forEachLayerAtPixel=function(e,o,t,r){if(!this.framebuffer){return undefined}var i=[e[0]/o.size[0],(o.size[1]-e[1])/o.size[1]];var n=[0,0];ol.vec.Mat4.multVec2(this.texCoordMatrix,i,n);var a=[n[0]*this.framebufferDimension,n[1]*this.framebufferDimension];var l=this.mapRenderer.getContext().getGL();l.bindFramebuffer(l.FRAMEBUFFER,this.framebuffer);var s=new Uint8Array(4);l.readPixels(a[0],a[1],1,1,l.RGBA,l.UNSIGNED_BYTE,s);if(s[3]>0){return t.call(r,this.getLayer())}else{return undefined}};goog.provide("ol.renderer.webgl.VectorLayer");goog.require("goog.asserts");goog.require("ol.events");goog.require("ol.ViewHint");goog.require("ol.extent");goog.require("ol.layer.Vector");goog.require("ol.render.webgl.ReplayGroup");goog.require("ol.renderer.vector");goog.require("ol.renderer.webgl.Layer");goog.require("ol.vec.Mat4");ol.renderer.webgl.VectorLayer=function(e,o){goog.base(this,e,o);this.dirty_=false;this.renderedRevision_=-1;this.renderedResolution_=NaN;this.renderedExtent_=ol.extent.createEmpty();this.renderedRenderOrder_=null;this.replayGroup_=null;this.layerState_=null};goog.inherits(ol.renderer.webgl.VectorLayer,ol.renderer.webgl.Layer);ol.renderer.webgl.VectorLayer.prototype.composeFrame=function(e,o,t){this.layerState_=o;var r=e.viewState;var i=this.replayGroup_;if(i&&!i.isEmpty()){i.replay(t,r.center,r.resolution,r.rotation,e.size,e.pixelRatio,o.opacity,o.managed?e.skippedFeatureUids:{})}};ol.renderer.webgl.VectorLayer.prototype.disposeInternal=function(){var e=this.replayGroup_;if(e){var o=this.mapRenderer.getContext();e.getDeleteResourcesFunction(o)();this.replayGroup_=null}goog.base(this,"disposeInternal")};ol.renderer.webgl.VectorLayer.prototype.forEachFeatureAtCoordinate=function(e,o,t,r){if(!this.replayGroup_||!this.layerState_){return undefined}else{var i=this.mapRenderer.getContext();var n=o.viewState;var a=this.getLayer();var l=this.layerState_;var s={};return this.replayGroup_.forEachFeatureAtCoordinate(e,i,n.center,n.resolution,n.rotation,o.size,o.pixelRatio,l.opacity,{},function(e){goog.asserts.assert(e!==undefined,"received a feature");var o=goog.getUid(e).toString();if(!(o in s)){s[o]=true;return t.call(r,e,a)}})}};ol.renderer.webgl.VectorLayer.prototype.hasFeatureAtCoordinate=function(e,o){if(!this.replayGroup_||!this.layerState_){return false}else{var t=this.mapRenderer.getContext();var r=o.viewState;var i=this.layerState_;return this.replayGroup_.hasFeatureAtCoordinate(e,t,r.center,r.resolution,r.rotation,o.size,o.pixelRatio,i.opacity,o.skippedFeatureUids)}};ol.renderer.webgl.VectorLayer.prototype.forEachLayerAtPixel=function(e,o,t,r){var i=e.slice();ol.vec.Mat4.multVec2(o.pixelToCoordinateMatrix,i,i);var n=this.hasFeatureAtCoordinate(i,o);if(n){return t.call(r,this.getLayer())}else{return undefined}};ol.renderer.webgl.VectorLayer.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()};ol.renderer.webgl.VectorLayer.prototype.prepareFrame=function(e,o,t){var r=this.getLayer();goog.asserts.assertInstanceof(r,ol.layer.Vector,"layer is an instance of ol.layer.Vector");var i=r.getSource();this.updateAttributions(e.attributions,i.getAttributions());this.updateLogos(e,i);var n=e.viewHints[ol.ViewHint.ANIMATING];var a=e.viewHints[ol.ViewHint.INTERACTING];var l=r.getUpdateWhileAnimating();var s=r.getUpdateWhileInteracting();if(!this.dirty_&&(!l&&n)||!s&&a){return true}var g=e.extent;var p=e.viewState;var u=p.projection;var c=p.resolution;var d=e.pixelRatio;var y=r.getRevision();var h=r.getRenderBuffer();var m=r.getRenderOrder();if(m===undefined){m=ol.renderer.vector.defaultOrder}var f=ol.extent.buffer(g,h*c);if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==y&&this.renderedRenderOrder_==m&&ol.extent.containsExtent(this.renderedExtent_,f)){return true}if(this.replayGroup_){e.postRenderFunctions.push(this.replayGroup_.getDeleteResourcesFunction(t))}this.dirty_=false;var v=new ol.render.webgl.ReplayGroup(ol.renderer.vector.getTolerance(c,d),f,r.getRenderBuffer());i.loadFeatures(f,c,u);var _=function(e){var o;var t=e.getStyleFunction();if(t){o=t.call(e,c)}else{t=r.getStyleFunction();if(t){o=t(e,c)}}if(o){var i=this.renderFeature(e,c,d,o,v);this.dirty_=this.dirty_||i}};if(m){var E=[];i.forEachFeatureInExtent(f,function(e){E.push(e)},this);E.sort(m);E.forEach(_,this)}else{i.forEachFeatureInExtent(f,_,this)}v.finish(t);this.renderedResolution_=c;this.renderedRevision_=y;this.renderedRenderOrder_=m;this.renderedExtent_=f;this.replayGroup_=v;return true};ol.renderer.webgl.VectorLayer.prototype.renderFeature=function(e,o,t,r,i){if(!r){return false}var n=false;if(goog.isArray(r)){for(var a=0,l=r.length;a<l;++a){n=ol.renderer.vector.renderFeature(i,e,r[a],ol.renderer.vector.getSquaredTolerance(o,t),this.handleStyleImageChange_,this)||n}}else{n=ol.renderer.vector.renderFeature(i,e,r,ol.renderer.vector.getSquaredTolerance(o,t),this.handleStyleImageChange_,this)||n}return n};goog.provide("ol.renderer.webgl.Map");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.style");goog.require("goog.webgl");goog.require("ol");goog.require("ol.RendererType");goog.require("ol.array");goog.require("ol.css");goog.require("ol.dom");goog.require("ol.events");goog.require("ol.events.Event");goog.require("ol.layer.Image");goog.require("ol.layer.Layer");goog.require("ol.layer.Tile");goog.require("ol.layer.Vector");goog.require("ol.render.Event");goog.require("ol.render.EventType");goog.require("ol.render.webgl.Immediate");goog.require("ol.renderer.Map");goog.require("ol.renderer.webgl.ImageLayer");goog.require("ol.renderer.webgl.Layer");goog.require("ol.renderer.webgl.TileLayer");goog.require("ol.renderer.webgl.VectorLayer");goog.require("ol.source.State");goog.require("ol.structs.LRUCache");goog.require("ol.structs.PriorityQueue");goog.require("ol.webgl");goog.require("ol.webgl.Context");goog.require("ol.webgl.WebGLContextEventType");ol.renderer.webgl.TextureCacheEntry;ol.renderer.webgl.Map=function(e,o){goog.base(this,e,o);this.canvas_=document.createElement("CANVAS");this.canvas_.style.width="100%";this.canvas_.style.height="100%";this.canvas_.className=ol.css.CLASS_UNSELECTABLE;goog.dom.insertChildAt(e,this.canvas_,0);this.clipTileCanvasWidth_=0;this.clipTileCanvasHeight_=0;this.clipTileContext_=ol.dom.createCanvasContext2D();this.renderedVisible_=true;this.gl_=ol.webgl.getContext(this.canvas_,{antialias:true,depth:false,failIfMajorPerformanceCaveat:true,preserveDrawingBuffer:false,stencil:true});goog.asserts.assert(this.gl_,"got a WebGLRenderingContext");this.context_=new ol.webgl.Context(this.canvas_,this.gl_);ol.events.listen(this.canvas_,ol.webgl.WebGLContextEventType.LOST,this.handleWebGLContextLost,this);ol.events.listen(this.canvas_,ol.webgl.WebGLContextEventType.RESTORED,this.handleWebGLContextRestored,this);this.textureCache_=new ol.structs.LRUCache;this.focus_=null;this.tileTextureQueue_=new ol.structs.PriorityQueue(function(e){var o=e[1];var t=e[2];var r=o[0]-this.focus_[0];var i=o[1]-this.focus_[1];return 65536*Math.log(t)+Math.sqrt(r*r+i*i)/t}.bind(this),function(e){return e[0].getKey()});this.loadNextTileTexture_=function(e,o){if(!this.tileTextureQueue_.isEmpty()){this.tileTextureQueue_.reprioritize();var t=this.tileTextureQueue_.dequeue();var r=t[0];var i=t[3];var n=t[4];this.bindTileTexture(r,i,n,goog.webgl.LINEAR,goog.webgl.LINEAR)}return false}.bind(this);this.textureCacheFrameMarkerCount_=0;this.initializeGL_()};goog.inherits(ol.renderer.webgl.Map,ol.renderer.Map);ol.renderer.webgl.Map.prototype.bindTileTexture=function(e,o,t,r,i){var n=this.getGL();var a=e.getKey();if(this.textureCache_.containsKey(a)){var l=this.textureCache_.get(a);goog.asserts.assert(l,"a texture cache entry exists for key %s",a);n.bindTexture(goog.webgl.TEXTURE_2D,l.texture);if(l.magFilter!=r){n.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_MAG_FILTER,r);l.magFilter=r}if(l.minFilter!=i){n.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_MAG_FILTER,i);l.minFilter=i}}else{var s=n.createTexture();n.bindTexture(goog.webgl.TEXTURE_2D,s);if(t>0){var g=this.clipTileContext_.canvas;var p=this.clipTileContext_;if(this.clipTileCanvasWidth_!==o[0]||this.clipTileCanvasHeight_!==o[1]){g.width=o[0];g.height=o[1];this.clipTileCanvasWidth_=o[0];this.clipTileCanvasHeight_=o[1]}else{p.clearRect(0,0,o[0],o[1])}p.drawImage(e.getImage(),t,t,o[0],o[1],0,0,o[0],o[1]);n.texImage2D(goog.webgl.TEXTURE_2D,0,goog.webgl.RGBA,goog.webgl.RGBA,goog.webgl.UNSIGNED_BYTE,g)}else{n.texImage2D(goog.webgl.TEXTURE_2D,0,goog.webgl.RGBA,goog.webgl.RGBA,goog.webgl.UNSIGNED_BYTE,e.getImage())}n.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_MAG_FILTER,r);n.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_MIN_FILTER,i);n.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_WRAP_S,goog.webgl.CLAMP_TO_EDGE);n.texParameteri(goog.webgl.TEXTURE_2D,goog.webgl.TEXTURE_WRAP_T,goog.webgl.CLAMP_TO_EDGE);this.textureCache_.set(a,{texture:s,magFilter:r,minFilter:i})}};ol.renderer.webgl.Map.prototype.createLayerRenderer=function(e){if(ol.ENABLE_IMAGE&&e instanceof ol.layer.Image){return new ol.renderer.webgl.ImageLayer(this,e)}else if(ol.ENABLE_TILE&&e instanceof ol.layer.Tile){return new ol.renderer.webgl.TileLayer(this,e)}else if(ol.ENABLE_VECTOR&&e instanceof ol.layer.Vector){return new ol.renderer.webgl.VectorLayer(this,e)}else{goog.asserts.fail("unexpected layer configuration");return null}};ol.renderer.webgl.Map.prototype.dispatchComposeEvent_=function(e,o){var t=this.getMap();if(t.hasListener(e)){var r=this.context_;var i=o.extent;var n=o.size;var a=o.viewState;var l=o.pixelRatio;var s=a.resolution;var g=a.center;var p=a.rotation;var u=new ol.render.webgl.Immediate(r,g,s,p,n,i,l);var c=new ol.render.Event(e,t,u,o,null,r);t.dispatchEvent(c);u.flush()}};ol.renderer.webgl.Map.prototype.disposeInternal=function(){var e=this.getGL();if(!e.isContextLost()){this.textureCache_.forEach(function(o){if(o){e.deleteTexture(o.texture)}})}goog.dispose(this.context_);goog.base(this,"disposeInternal")};ol.renderer.webgl.Map.prototype.expireCache_=function(e,o){var t=this.getGL();var r;while(this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>ol.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK){r=this.textureCache_.peekLast();if(!r){if(+this.textureCache_.peekLastKey()==o.index){break}else{--this.textureCacheFrameMarkerCount_}}else{t.deleteTexture(r.texture)}this.textureCache_.pop()}};ol.renderer.webgl.Map.prototype.getContext=function(){return this.context_};ol.renderer.webgl.Map.prototype.getGL=function(){return this.gl_};ol.renderer.webgl.Map.prototype.getTileTextureQueue=function(){return this.tileTextureQueue_};ol.renderer.webgl.Map.prototype.getType=function(){return ol.RendererType.WEBGL};ol.renderer.webgl.Map.prototype.handleWebGLContextLost=function(e){e.preventDefault();this.textureCache_.clear();this.textureCacheFrameMarkerCount_=0;var o=this.getLayerRenderers();for(var t in o){var r=o[t];r.handleWebGLContextLost()}};ol.renderer.webgl.Map.prototype.handleWebGLContextRestored=function(){this.initializeGL_();this.getMap().render()};ol.renderer.webgl.Map.prototype.initializeGL_=function(){var e=this.gl_;e.activeTexture(goog.webgl.TEXTURE0);e.blendFuncSeparate(goog.webgl.SRC_ALPHA,goog.webgl.ONE_MINUS_SRC_ALPHA,goog.webgl.ONE,goog.webgl.ONE_MINUS_SRC_ALPHA);e.disable(goog.webgl.CULL_FACE);e.disable(goog.webgl.DEPTH_TEST);e.disable(goog.webgl.SCISSOR_TEST);e.disable(goog.webgl.STENCIL_TEST)};ol.renderer.webgl.Map.prototype.isTileTextureLoaded=function(e){return this.textureCache_.containsKey(e.getKey())};ol.renderer.webgl.Map.prototype.renderFrame=function(e){var o=this.getContext();var t=this.getGL();if(t.isContextLost()){return false}if(!e){if(this.renderedVisible_){goog.style.setElementShown(this.canvas_,false);this.renderedVisible_=false}return false}this.focus_=e.focus;this.textureCache_.set((-e.index).toString(),null);++this.textureCacheFrameMarkerCount_;this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,e);var r=[];var i=e.layerStatesArray;ol.array.stableSort(i,ol.renderer.Map.sortByZIndex);var n=e.viewState.resolution;var a,l,s,g;for(a=0,l=i.length;a<l;++a){g=i[a];if(ol.layer.Layer.visibleAtResolution(g,n)&&g.sourceState==ol.source.State.READY){s=this.getLayerRenderer(g.layer);goog.asserts.assertInstanceof(s,ol.renderer.webgl.Layer,"renderer is an instance of ol.renderer.webgl.Layer");if(s.prepareFrame(e,g,o)){r.push(g)}}}var p=e.size[0]*e.pixelRatio;var u=e.size[1]*e.pixelRatio;if(this.canvas_.width!=p||this.canvas_.height!=u){this.canvas_.width=p;this.canvas_.height=u}t.bindFramebuffer(goog.webgl.FRAMEBUFFER,null);t.clearColor(0,0,0,0);t.clear(goog.webgl.COLOR_BUFFER_BIT);t.enable(goog.webgl.BLEND);t.viewport(0,0,this.canvas_.width,this.canvas_.height);for(a=0,l=r.length;a<l;++a){g=r[a];s=this.getLayerRenderer(g.layer);goog.asserts.assertInstanceof(s,ol.renderer.webgl.Layer,"renderer is an instance of ol.renderer.webgl.Layer");s.composeFrame(e,g,o)}if(!this.renderedVisible_){goog.style.setElementShown(this.canvas_,true);this.renderedVisible_=true}this.calculateMatrices2D(e);if(this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>ol.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK){e.postRenderFunctions.push(this.expireCache_.bind(this))}if(!this.tileTextureQueue_.isEmpty()){e.postRenderFunctions.push(this.loadNextTileTexture_);e.animate=true}this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,e);this.scheduleRemoveUnusedLayerRenderers(e);this.scheduleExpireIconCache(e)};ol.renderer.webgl.Map.prototype.forEachFeatureAtCoordinate=function(e,o,t,r,i,n){var a;if(this.getGL().isContextLost()){return false}var l=o.viewState;var s=o.layerStatesArray;var g=s.length;var p;for(p=g-1;p>=0;--p){var u=s[p];var c=u.layer;if(ol.layer.Layer.visibleAtResolution(u,l.resolution)&&i.call(n,c)){var d=this.getLayerRenderer(c);a=d.forEachFeatureAtCoordinate(e,o,t,r);if(a){return a}}}return undefined};ol.renderer.webgl.Map.prototype.hasFeatureAtCoordinate=function(e,o,t,r){var i=false;if(this.getGL().isContextLost()){return false}var n=o.viewState;var a=o.layerStatesArray;var l=a.length;var s;for(s=l-1;s>=0;--s){var g=a[s];var p=g.layer;if(ol.layer.Layer.visibleAtResolution(g,n.resolution)&&t.call(r,p)){var u=this.getLayerRenderer(p);i=u.hasFeatureAtCoordinate(e,o);if(i){return true}}}return i};ol.renderer.webgl.Map.prototype.forEachLayerAtPixel=function(e,o,t,r,i,n){if(this.getGL().isContextLost()){return false}var a=o.viewState;var l;var s=o.layerStatesArray;var g=s.length;var p;for(p=g-1;p>=0;--p){var u=s[p];var c=u.layer;if(ol.layer.Layer.visibleAtResolution(u,a.resolution)&&i.call(r,c)){var d=this.getLayerRenderer(c);l=d.forEachLayerAtPixel(e,o,t,r);if(l){return l}}}return undefined};goog.provide("ol.Map");goog.provide("ol.MapProperty");goog.require("goog.asserts");goog.require("goog.async.nextTick");goog.require("goog.debug.Console");goog.require("goog.dom");goog.require("goog.dom.classlist");goog.require("goog.functions");goog.require("goog.log");goog.require("goog.log.Level");goog.require("goog.style");goog.require("goog.vec.Mat4");goog.require("ol.Collection");goog.require("ol.CollectionEventType");goog.require("ol.MapBrowserEvent");goog.require("ol.MapBrowserEvent.EventType");goog.require("ol.MapBrowserEventHandler");goog.require("ol.MapEvent");goog.require("ol.MapEventType");goog.require("ol.Object");goog.require("ol.ObjectEvent");goog.require("ol.ObjectEventType");goog.require("ol.Pixel");goog.require("ol.PostRenderFunction");goog.require("ol.PreRenderFunction");goog.require("ol.RendererType");goog.require("ol.Size");goog.require("ol.TileQueue");goog.require("ol.View");goog.require("ol.ViewHint");goog.require("ol.array");goog.require("ol.control");goog.require("ol.events");goog.require("ol.events.Event");goog.require("ol.events.EventType");goog.require("ol.extent");goog.require("ol.has");goog.require("ol.interaction");goog.require("ol.layer.Base");goog.require("ol.layer.Group");goog.require("ol.object");goog.require("ol.proj");goog.require("ol.proj.common");goog.require("ol.renderer.Map");goog.require("ol.renderer.canvas.Map");goog.require("ol.renderer.dom.Map");goog.require("ol.renderer.webgl.Map");goog.require("ol.size");goog.require("ol.structs.PriorityQueue");goog.require("ol.vec.Mat4");ol.OL3_URL="http://openlayers.org/";ol.OL3_LOGO_URL="data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBI"+"WXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAA"+"AhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszW"+"WMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvY"+"asvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvX"+"H1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1Vk"+"bMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW"+"2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLP"+"VcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqT"+"acrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaar"+"ldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+Hi"+"zeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDn"+"BAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSF"+"hYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJ"+"REFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxC"+"Brb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe"+"0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8"+"a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7a"+"hgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCn"+"B3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDg"+"q82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC";ol.DEFAULT_RENDERER_TYPES=[ol.RendererType.CANVAS,ol.RendererType.WEBGL,ol.RendererType.DOM];ol.MapProperty={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};ol.Map=function(e){goog.base(this);var o=ol.Map.createOptionsInternal(e);this.loadTilesWhileAnimating_=e.loadTilesWhileAnimating!==undefined?e.loadTilesWhileAnimating:false;this.loadTilesWhileInteracting_=e.loadTilesWhileInteracting!==undefined?e.loadTilesWhileInteracting:false;this.pixelRatio_=e.pixelRatio!==undefined?e.pixelRatio:ol.has.DEVICE_PIXEL_RATIO;this.logos_=o.logos;this.animationDelayKey_;this.animationDelay_=function(){this.animationDelayKey_=undefined;this.renderFrame_.call(this,Date.now())}.bind(this);this.coordinateToPixelMatrix_=goog.vec.Mat4.createNumber();this.pixelToCoordinateMatrix_=goog.vec.Mat4.createNumber();this.frameIndex_=0;this.frameState_=null;this.previousExtent_=ol.extent.createEmpty();this.viewPropertyListenerKey_=null;this.layerGroupPropertyListenerKeys_=null;this.viewport_=document.createElement("DIV");this.viewport_.className="ol-viewport";this.viewport_.style.position="relative";this.viewport_.style.overflow="hidden";this.viewport_.style.width="100%";this.viewport_.style.height="100%";this.viewport_.style.msTouchAction="none";this.viewport_.style.touchAction="none";if(ol.has.TOUCH){goog.dom.classlist.add(this.viewport_,"ol-touch")}this.overlayContainer_=document.createElement("DIV");this.overlayContainer_.className="ol-overlaycontainer";this.viewport_.appendChild(this.overlayContainer_);this.overlayContainerStopEvent_=document.createElement("DIV");this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent"
;var t=[ol.events.EventType.CLICK,ol.events.EventType.DBLCLICK,ol.events.EventType.MOUSEDOWN,ol.events.EventType.TOUCHSTART,ol.events.EventType.MSPOINTERDOWN,ol.MapBrowserEvent.EventType.POINTERDOWN,goog.userAgent.GECKO?"DOMMouseScroll":ol.events.EventType.MOUSEWHEEL];for(var r=0,i=t.length;r<i;++r){ol.events.listen(this.overlayContainerStopEvent_,t[r],ol.events.Event.stopPropagation)}this.viewport_.appendChild(this.overlayContainerStopEvent_);var n=new ol.MapBrowserEventHandler(this);for(var a in ol.MapBrowserEvent.EventType){ol.events.listen(n,ol.MapBrowserEvent.EventType[a],this.handleMapBrowserEvent,this)}this.registerDisposable(n);this.keyboardEventTarget_=o.keyboardEventTarget;this.keyHandlerKeys_=null;ol.events.listen(this.viewport_,ol.events.EventType.WHEEL,this.handleBrowserEvent,this);ol.events.listen(this.viewport_,ol.events.EventType.MOUSEWHEEL,this.handleBrowserEvent,this);this.controls_=o.controls;this.interactions_=o.interactions;this.overlays_=o.overlays;this.overlayIdIndex_={};this.renderer_=new o.rendererConstructor(this.viewport_,this);this.registerDisposable(this.renderer_);this.handleResize_;this.focus_=null;this.preRenderFunctions_=[];this.postRenderFunctions_=[];this.tileQueue_=new ol.TileQueue(this.getTilePriority.bind(this),this.handleTileChange_.bind(this));this.skippedFeatureUids_={};ol.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.LAYERGROUP),this.handleLayerGroupChanged_,this);ol.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.VIEW),this.handleViewChanged_,this);ol.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.SIZE),this.handleSizeChanged_,this);ol.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.TARGET),this.handleTargetChanged_,this);this.setProperties(o.values);this.controls_.forEach(function(e){e.setMap(this)},this);ol.events.listen(this.controls_,ol.CollectionEventType.ADD,function(e){e.element.setMap(this)},this);ol.events.listen(this.controls_,ol.CollectionEventType.REMOVE,function(e){e.element.setMap(null)},this);this.interactions_.forEach(function(e){e.setMap(this)},this);ol.events.listen(this.interactions_,ol.CollectionEventType.ADD,function(e){e.element.setMap(this)},this);ol.events.listen(this.interactions_,ol.CollectionEventType.REMOVE,function(e){e.element.setMap(null)},this);this.overlays_.forEach(this.addOverlayInternal_,this);ol.events.listen(this.overlays_,ol.CollectionEventType.ADD,function(e){this.addOverlayInternal_(e.element)},this);ol.events.listen(this.overlays_,ol.CollectionEventType.REMOVE,function(e){var o=e.element.getId();if(o!==undefined){delete this.overlayIdIndex_[o.toString()]}e.element.setMap(null)},this)};goog.inherits(ol.Map,ol.Object);ol.Map.prototype.addControl=function(e){var o=this.getControls();goog.asserts.assert(o!==undefined,"controls should be defined");o.push(e)};ol.Map.prototype.addInteraction=function(e){var o=this.getInteractions();goog.asserts.assert(o!==undefined,"interactions should be defined");o.push(e)};ol.Map.prototype.addLayer=function(e){var o=this.getLayerGroup().getLayers();o.push(e)};ol.Map.prototype.addOverlay=function(e){var o=this.getOverlays();goog.asserts.assert(o!==undefined,"overlays should be defined");o.push(e)};ol.Map.prototype.addOverlayInternal_=function(e){var o=e.getId();if(o!==undefined){this.overlayIdIndex_[o.toString()]=e}e.setMap(this)};ol.Map.prototype.beforeRender=function(e){this.render();Array.prototype.push.apply(this.preRenderFunctions_,arguments)};ol.Map.prototype.removePreRenderFunction=function(e){return ol.array.remove(this.preRenderFunctions_,e)};ol.Map.prototype.disposeInternal=function(){ol.events.unlisten(this.viewport_,ol.events.EventType.WHEEL,this.handleBrowserEvent,this);ol.events.unlisten(this.viewport_,ol.events.EventType.MOUSEWHEEL,this.handleBrowserEvent,this);if(this.handleResize_!==undefined){goog.global.removeEventListener(ol.events.EventType.RESIZE,this.handleResize_,false);this.handleResize_=undefined}if(this.animationDelayKey_){goog.global.cancelAnimationFrame(this.animationDelayKey_);this.animationDelayKey_=undefined}goog.dom.removeNode(this.viewport_);goog.base(this,"disposeInternal")};ol.Map.prototype.forEachFeatureAtPixel=function(e,o,t,r,i){if(!this.frameState_){return}var n=this.getCoordinateFromPixel(e);var a=t!==undefined?t:null;var l=r!==undefined?r:goog.functions.TRUE;var s=i!==undefined?i:null;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,o,a,l,s)};ol.Map.prototype.forEachLayerAtPixel=function(e,o,t,r,i){if(!this.frameState_){return}var n=t!==undefined?t:null;var a=r!==undefined?r:goog.functions.TRUE;var l=i!==undefined?i:null;return this.renderer_.forEachLayerAtPixel(e,this.frameState_,o,n,a,l)};ol.Map.prototype.hasFeatureAtPixel=function(e,o,t){if(!this.frameState_){return false}var r=this.getCoordinateFromPixel(e);var i=o!==undefined?o:goog.functions.TRUE;var n=t!==undefined?t:null;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,i,n)};ol.Map.prototype.getEventCoordinate=function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))};ol.Map.prototype.getEventPixel=function(e){var o=this.viewport_.getBoundingClientRect();var t=e.changedTouches?e.changedTouches[0]:e;return[t.clientX-o.left,t.clientY-o.top]};ol.Map.prototype.getTarget=function(){return this.get(ol.MapProperty.TARGET)};ol.Map.prototype.getTargetElement=function(){var e=this.getTarget();return e!==undefined?goog.dom.getElement(e):null};ol.Map.prototype.getCoordinateFromPixel=function(e){var o=this.frameState_;if(!o){return null}else{var t=e.slice();return ol.vec.Mat4.multVec2(o.pixelToCoordinateMatrix,t,t)}};ol.Map.prototype.getControls=function(){return this.controls_};ol.Map.prototype.getOverlays=function(){return this.overlays_};ol.Map.prototype.getOverlayById=function(e){var o=this.overlayIdIndex_[e.toString()];return o!==undefined?o:null};ol.Map.prototype.getInteractions=function(){return this.interactions_};ol.Map.prototype.getLayerGroup=function(){return this.get(ol.MapProperty.LAYERGROUP)};ol.Map.prototype.getLayers=function(){var e=this.getLayerGroup().getLayers();return e};ol.Map.prototype.getPixelFromCoordinate=function(e){var o=this.frameState_;if(!o){return null}else{var t=e.slice(0,2);return ol.vec.Mat4.multVec2(o.coordinateToPixelMatrix,t,t)}};ol.Map.prototype.getRenderer=function(){return this.renderer_};ol.Map.prototype.getSize=function(){return this.get(ol.MapProperty.SIZE)};ol.Map.prototype.getView=function(){return this.get(ol.MapProperty.VIEW)};ol.Map.prototype.getViewport=function(){return this.viewport_};ol.Map.prototype.getOverlayContainer=function(){return this.overlayContainer_};ol.Map.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_};ol.Map.prototype.getTilePriority=function(e,o,t,r){var i=this.frameState_;if(!i||!(o in i.wantedTiles)){return ol.structs.PriorityQueue.DROP}var n=e.tileCoord.toString();if(!i.wantedTiles[o][n]){return ol.structs.PriorityQueue.DROP}var a=t[0]-i.focus[0];var l=t[1]-i.focus[1];return 65536*Math.log(r)+Math.sqrt(a*a+l*l)/r};ol.Map.prototype.handleBrowserEvent=function(e,o){var t=o||e.type;var r=new ol.MapBrowserEvent(t,this,e);this.handleMapBrowserEvent(r)};ol.Map.prototype.handleMapBrowserEvent=function(e){if(!this.frameState_){return}this.focus_=e.coordinate;e.frameState=this.frameState_;var o=this.getInteractions();goog.asserts.assert(o!==undefined,"interactions should be defined");var t=o.getArray();var r;if(this.dispatchEvent(e)!==false){for(r=t.length-1;r>=0;r--){var i=t[r];if(!i.getActive()){continue}var n=i.handleEvent(e);if(!n){break}}}};ol.Map.prototype.handlePostRender=function(){var e=this.frameState_;var o=this.tileQueue_;if(!o.isEmpty()){var t=16;var r=t;if(e){var i=e.viewHints;if(i[ol.ViewHint.ANIMATING]){t=this.loadTilesWhileAnimating_?8:0;r=2}if(i[ol.ViewHint.INTERACTING]){t=this.loadTilesWhileInteracting_?8:0;r=2}}if(o.getTilesLoading()<t){o.reprioritize();o.loadMoreTiles(t,r)}}var n=this.postRenderFunctions_;var a,l;for(a=0,l=n.length;a<l;++a){n[a](this,e)}n.length=0};ol.Map.prototype.handleSizeChanged_=function(){this.render()};ol.Map.prototype.handleTargetChanged_=function(){var e=this.getTargetElement();if(this.keyHandlerKeys_){for(var o=0,t=this.keyHandlerKeys_.length;o<t;++o){ol.events.unlistenByKey(this.keyHandlerKeys_[o])}this.keyHandlerKeys_=null}if(!e){goog.dom.removeNode(this.viewport_);if(this.handleResize_!==undefined){goog.global.removeEventListener(ol.events.EventType.RESIZE,this.handleResize_,false);this.handleResize_=undefined}}else{e.appendChild(this.viewport_);var r=!this.keyboardEventTarget_?e:this.keyboardEventTarget_;this.keyHandlerKeys_=[ol.events.listen(r,ol.events.EventType.KEYDOWN,this.handleBrowserEvent,this),ol.events.listen(r,ol.events.EventType.KEYPRESS,this.handleBrowserEvent,this)];if(!this.handleResize_){this.handleResize_=this.updateSize.bind(this);goog.global.addEventListener(ol.events.EventType.RESIZE,this.handleResize_,false)}}this.updateSize()};ol.Map.prototype.handleTileChange_=function(){this.render()};ol.Map.prototype.handleViewPropertyChanged_=function(){this.render()};ol.Map.prototype.handleViewChanged_=function(){if(this.viewPropertyListenerKey_){ol.events.unlistenByKey(this.viewPropertyListenerKey_);this.viewPropertyListenerKey_=null}var e=this.getView();if(e){this.viewPropertyListenerKey_=ol.events.listen(e,ol.ObjectEventType.PROPERTYCHANGE,this.handleViewPropertyChanged_,this)}this.render()};ol.Map.prototype.handleLayerGroupMemberChanged_=function(e){goog.asserts.assertInstanceof(e,ol.events.Event,"event should be an Event");this.render()};ol.Map.prototype.handleLayerGroupPropertyChanged_=function(e){goog.asserts.assertInstanceof(e,ol.ObjectEvent,"event should be an ol.ObjectEvent");this.render()};ol.Map.prototype.handleLayerGroupChanged_=function(){if(this.layerGroupPropertyListenerKeys_){this.layerGroupPropertyListenerKeys_.forEach(ol.events.unlistenByKey);this.layerGroupPropertyListenerKeys_=null}var e=this.getLayerGroup();if(e){this.layerGroupPropertyListenerKeys_=[ol.events.listen(e,ol.ObjectEventType.PROPERTYCHANGE,this.handleLayerGroupPropertyChanged_,this),ol.events.listen(e,ol.events.EventType.CHANGE,this.handleLayerGroupMemberChanged_,this)]}this.render()};ol.Map.prototype.isDef=function(){if(!goog.dom.contains(document,this.viewport_)){return false}if(!goog.style.isElementShown(this.viewport_)){return false}var e=this.getSize();if(!e||e[0]<=0||e[1]<=0){return false}var o=this.getView();if(!o||!o.isDef()){return false}return true};ol.Map.prototype.isRendered=function(){return!!this.frameState_};ol.Map.prototype.renderSync=function(){if(this.animationDelayKey_){goog.global.cancelAnimationFrame(this.animationDelayKey_)}this.animationDelay_()};ol.Map.prototype.render=function(){if(this.animationDelayKey_===undefined){this.animationDelayKey_=goog.global.requestAnimationFrame(this.animationDelay_)}};ol.Map.prototype.removeControl=function(e){var o=this.getControls();goog.asserts.assert(o!==undefined,"controls should be defined");return o.remove(e)};ol.Map.prototype.removeInteraction=function(e){var o=this.getInteractions();goog.asserts.assert(o!==undefined,"interactions should be defined");return o.remove(e)};ol.Map.prototype.removeLayer=function(e){var o=this.getLayerGroup().getLayers();return o.remove(e)};ol.Map.prototype.removeOverlay=function(e){var o=this.getOverlays();goog.asserts.assert(o!==undefined,"overlays should be defined");return o.remove(e)};ol.Map.prototype.renderFrame_=function(e){var o,t,r;var i=this.getSize();var n=this.getView();var a=null;if(i!==undefined&&ol.size.hasArea(i)&&n&&n.isDef()){var l=n.getHints();var s=this.getLayerGroup().getLayerStatesArray();var g={};for(o=0,t=s.length;o<t;++o){g[goog.getUid(s[o].layer)]=s[o]}r=n.getState();a={animate:false,attributions:{},coordinateToPixelMatrix:this.coordinateToPixelMatrix_,extent:null,focus:!this.focus_?r.center:this.focus_,index:this.frameIndex_++,layerStates:g,layerStatesArray:s,logos:ol.object.assign({},this.logos_),pixelRatio:this.pixelRatio_,pixelToCoordinateMatrix:this.pixelToCoordinateMatrix_,postRenderFunctions:[],size:i,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:r,viewHints:l,wantedTiles:{}}}if(a){var p=this.preRenderFunctions_;var u=0,c;for(o=0,t=p.length;o<t;++o){c=p[o];if(c(this,a)){p[u++]=c}}p.length=u;a.extent=ol.extent.getForViewAndSize(r.center,r.resolution,r.rotation,a.size)}this.frameState_=a;this.renderer_.renderFrame(a);if(a){if(a.animate){this.render()}Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions);var d=this.preRenderFunctions_.length===0&&!a.viewHints[ol.ViewHint.ANIMATING]&&!a.viewHints[ol.ViewHint.INTERACTING]&&!ol.extent.equals(a.extent,this.previousExtent_);if(d){this.dispatchEvent(new ol.MapEvent(ol.MapEventType.MOVEEND,this,a));ol.extent.clone(a.extent,this.previousExtent_)}}this.dispatchEvent(new ol.MapEvent(ol.MapEventType.POSTRENDER,this,a));goog.async.nextTick(this.handlePostRender,this)};ol.Map.prototype.setLayerGroup=function(e){this.set(ol.MapProperty.LAYERGROUP,e)};ol.Map.prototype.setSize=function(e){this.set(ol.MapProperty.SIZE,e)};ol.Map.prototype.setTarget=function(e){this.set(ol.MapProperty.TARGET,e)};ol.Map.prototype.setView=function(e){this.set(ol.MapProperty.VIEW,e)};ol.Map.prototype.skipFeature=function(e){var o=goog.getUid(e).toString();this.skippedFeatureUids_[o]=true;this.render()};ol.Map.prototype.updateSize=function(){var e=this.getTargetElement();if(!e){this.setSize(undefined)}else{var o=goog.style.getContentBoxSize(e);this.setSize([o.width,o.height])}};ol.Map.prototype.unskipFeature=function(e){var o=goog.getUid(e).toString();delete this.skippedFeatureUids_[o];this.render()};ol.MapOptionsInternal;ol.Map.createOptionsInternal=function(e){var o=null;if(e.keyboardEventTarget!==undefined){o=typeof e.keyboardEventTarget==="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget}var t={};var r={};if(e.logo===undefined||typeof e.logo==="boolean"&&e.logo){r[ol.OL3_LOGO_URL]=ol.OL3_URL}else{var i=e.logo;if(typeof i==="string"){r[i]=""}else if(goog.isObject(i)){goog.asserts.assertString(i.href,"logo.href should be a string");goog.asserts.assertString(i.src,"logo.src should be a string");r[i.src]=i.href}}var n=e.layers instanceof ol.layer.Group?e.layers:new ol.layer.Group({layers:e.layers});t[ol.MapProperty.LAYERGROUP]=n;t[ol.MapProperty.TARGET]=e.target;t[ol.MapProperty.VIEW]=e.view!==undefined?e.view:new ol.View;var a=ol.renderer.Map;var l;if(e.renderer!==undefined){if(goog.isArray(e.renderer)){l=e.renderer}else if(typeof e.renderer==="string"){l=[e.renderer]}else{goog.asserts.fail("Incorrect format for renderer option")}}else{l=ol.DEFAULT_RENDERER_TYPES}var s,g;for(s=0,g=l.length;s<g;++s){var p=l[s];if(ol.ENABLE_CANVAS&&p==ol.RendererType.CANVAS){if(ol.has.CANVAS){a=ol.renderer.canvas.Map;break}}else if(ol.ENABLE_DOM&&p==ol.RendererType.DOM){if(ol.has.DOM){a=ol.renderer.dom.Map;break}}else if(ol.ENABLE_WEBGL&&p==ol.RendererType.WEBGL){if(ol.has.WEBGL){a=ol.renderer.webgl.Map;break}}}var u;if(e.controls!==undefined){if(goog.isArray(e.controls)){u=new ol.Collection(e.controls.slice())}else{goog.asserts.assertInstanceof(e.controls,ol.Collection,"options.controls should be an ol.Collection");u=e.controls}}else{u=ol.control.defaults()}var c;if(e.interactions!==undefined){if(goog.isArray(e.interactions)){c=new ol.Collection(e.interactions.slice())}else{goog.asserts.assertInstanceof(e.interactions,ol.Collection,"options.interactions should be an ol.Collection");c=e.interactions}}else{c=ol.interaction.defaults()}var d;if(e.overlays!==undefined){if(goog.isArray(e.overlays)){d=new ol.Collection(e.overlays.slice())}else{goog.asserts.assertInstanceof(e.overlays,ol.Collection,"options.overlays should be an ol.Collection");d=e.overlays}}else{d=new ol.Collection}return{controls:u,interactions:c,keyboardEventTarget:o,logos:r,overlays:d,rendererConstructor:a,values:t}};ol.proj.common.add();if(goog.DEBUG){(function(){goog.debug.Console.autoInstall();var e=goog.log.getLogger("ol");e.setLevel(goog.log.Level.FINEST)})()}goog.provide("ol.Overlay");goog.provide("ol.OverlayPositioning");goog.provide("ol.OverlayProperty");goog.require("goog.asserts");goog.require("goog.dom");goog.require("ol.events");goog.require("goog.style");goog.require("ol.Coordinate");goog.require("ol.Map");goog.require("ol.MapEventType");goog.require("ol.Object");goog.require("ol.animation");goog.require("ol.dom");goog.require("ol.extent");ol.OverlayProperty={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};ol.OverlayPositioning={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"};ol.Overlay=function(e){goog.base(this);this.id_=e.id;this.insertFirst_=e.insertFirst!==undefined?e.insertFirst:true;this.stopEvent_=e.stopEvent!==undefined?e.stopEvent:true;this.element_=document.createElement("DIV");this.element_.className="ol-overlay-container";this.element_.style.position="absolute";this.autoPan=e.autoPan!==undefined?e.autoPan:false;this.autoPanAnimation_=e.autoPanAnimation!==undefined?e.autoPanAnimation:{};this.autoPanMargin_=e.autoPanMargin!==undefined?e.autoPanMargin:20;this.rendered_={bottom_:"",left_:"",right_:"",top_:"",visible:true};this.mapPostrenderListenerKey_=null;ol.events.listen(this,ol.Object.getChangeEventType(ol.OverlayProperty.ELEMENT),this.handleElementChanged,this);ol.events.listen(this,ol.Object.getChangeEventType(ol.OverlayProperty.MAP),this.handleMapChanged,this);ol.events.listen(this,ol.Object.getChangeEventType(ol.OverlayProperty.OFFSET),this.handleOffsetChanged,this);ol.events.listen(this,ol.Object.getChangeEventType(ol.OverlayProperty.POSITION),this.handlePositionChanged,this);ol.events.listen(this,ol.Object.getChangeEventType(ol.OverlayProperty.POSITIONING),this.handlePositioningChanged,this);if(e.element!==undefined){this.setElement(e.element)}this.setOffset(e.offset!==undefined?e.offset:[0,0]);this.setPositioning(e.positioning!==undefined?e.positioning:ol.OverlayPositioning.TOP_LEFT);if(e.position!==undefined){this.setPosition(e.position)}};goog.inherits(ol.Overlay,ol.Object);ol.Overlay.prototype.getElement=function(){return this.get(ol.OverlayProperty.ELEMENT)};ol.Overlay.prototype.getId=function(){return this.id_};ol.Overlay.prototype.getMap=function(){return this.get(ol.OverlayProperty.MAP)};ol.Overlay.prototype.getOffset=function(){return this.get(ol.OverlayProperty.OFFSET)};ol.Overlay.prototype.getPosition=function(){return this.get(ol.OverlayProperty.POSITION)};ol.Overlay.prototype.getPositioning=function(){return this.get(ol.OverlayProperty.POSITIONING)};ol.Overlay.prototype.handleElementChanged=function(){goog.dom.removeChildren(this.element_);var e=this.getElement();if(e){this.element_.appendChild(e)}};ol.Overlay.prototype.handleMapChanged=function(){if(this.mapPostrenderListenerKey_){goog.dom.removeNode(this.element_);ol.events.unlistenByKey(this.mapPostrenderListenerKey_);this.mapPostrenderListenerKey_=null}var e=this.getMap();if(e){this.mapPostrenderListenerKey_=ol.events.listen(e,ol.MapEventType.POSTRENDER,this.render,this);this.updatePixelPosition();var o=this.stopEvent_?e.getOverlayContainerStopEvent():e.getOverlayContainer();if(this.insertFirst_){goog.dom.insertChildAt(o,this.element_,0)}else{o.appendChild(this.element_)}}};ol.Overlay.prototype.render=function(){this.updatePixelPosition()};ol.Overlay.prototype.handleOffsetChanged=function(){this.updatePixelPosition()};ol.Overlay.prototype.handlePositionChanged=function(){this.updatePixelPosition();if(this.get(ol.OverlayProperty.POSITION)!==undefined&&this.autoPan){this.panIntoView_()}};ol.Overlay.prototype.handlePositioningChanged=function(){this.updatePixelPosition()};ol.Overlay.prototype.setElement=function(e){this.set(ol.OverlayProperty.ELEMENT,e)};ol.Overlay.prototype.setMap=function(e){this.set(ol.OverlayProperty.MAP,e)};ol.Overlay.prototype.setOffset=function(e){this.set(ol.OverlayProperty.OFFSET,e)};ol.Overlay.prototype.setPosition=function(e){this.set(ol.OverlayProperty.POSITION,e)};ol.Overlay.prototype.panIntoView_=function(){goog.asserts.assert(this.autoPan,"this.autoPan should be true");var e=this.getMap();if(e===undefined||!e.getTargetElement()){return}var o=this.getRect_(e.getTargetElement(),e.getSize());var t=this.getElement();goog.asserts.assert(t,"element should be defined");var r=this.getRect_(t,[ol.dom.outerWidth(t),ol.dom.outerHeight(t)]);var i=this.autoPanMargin_;if(!ol.extent.containsExtent(o,r)){var n=r[0]-o[0];var a=o[2]-r[2];var l=r[1]-o[1];var s=o[3]-r[3];var g=[0,0];if(n<0){g[0]=n-i}else if(a<0){g[0]=Math.abs(a)+i}if(l<0){g[1]=l-i}else if(s<0){g[1]=Math.abs(s)+i}if(g[0]!==0||g[1]!==0){var p=e.getView().getCenter();goog.asserts.assert(p!==undefined,"center should be defined");var u=e.getPixelFromCoordinate(p);var c=[u[0]+g[0],u[1]+g[1]];if(this.autoPanAnimation_){this.autoPanAnimation_.source=p;e.beforeRender(ol.animation.pan(this.autoPanAnimation_))}e.getView().setCenter(e.getCoordinateFromPixel(c))}}};ol.Overlay.prototype.getRect_=function(e,o){goog.asserts.assert(e,"element should be defined");goog.asserts.assert(o!==undefined,"size should be defined");var t=goog.style.getPageOffset(e);return[t.x,t.y,t.x+o[0],t.y+o[1]]};ol.Overlay.prototype.setPositioning=function(e){this.set(ol.OverlayProperty.POSITIONING,e)};ol.Overlay.prototype.setVisible=function(e){if(this.rendered_.visible!==e){goog.style.setElementShown(this.element_,e);this.rendered_.visible=e}};ol.Overlay.prototype.updatePixelPosition=function(){var e=this.getMap();var o=this.getPosition();if(e===undefined||!e.isRendered()||o===undefined){this.setVisible(false);return}var t=e.getPixelFromCoordinate(o);var r=e.getSize();this.updateRenderedPosition(t,r)};ol.Overlay.prototype.updateRenderedPosition=function(e,o){goog.asserts.assert(e,"pixel should not be null");goog.asserts.assert(o!==undefined,"mapSize should be defined");var t=this.element_.style;var r=this.getOffset();goog.asserts.assert(goog.isArray(r),"offset should be an array");var i=this.getPositioning();goog.asserts.assert(i!==undefined,"positioning should be defined");var n=r[0];var a=r[1];if(i==ol.OverlayPositioning.BOTTOM_RIGHT||i==ol.OverlayPositioning.CENTER_RIGHT||i==ol.OverlayPositioning.TOP_RIGHT){if(this.rendered_.left_!==""){this.rendered_.left_=t.left=""}var l=Math.round(o[0]-e[0]-n)+"px";if(this.rendered_.right_!=l){this.rendered_.right_=t.right=l}}else{if(this.rendered_.right_!==""){this.rendered_.right_=t.right=""}if(i==ol.OverlayPositioning.BOTTOM_CENTER||i==ol.OverlayPositioning.CENTER_CENTER||i==ol.OverlayPositioning.TOP_CENTER){n-=goog.style.getSize(this.element_).width/2}var s=Math.round(e[0]+n)+"px";if(this.rendered_.left_!=s){this.rendered_.left_=t.left=s}}if(i==ol.OverlayPositioning.BOTTOM_LEFT||i==ol.OverlayPositioning.BOTTOM_CENTER||i==ol.OverlayPositioning.BOTTOM_RIGHT){if(this.rendered_.top_!==""){this.rendered_.top_=t.top=""}var g=Math.round(o[1]-e[1]-a)+"px";if(this.rendered_.bottom_!=g){this.rendered_.bottom_=t.bottom=g}}else{if(this.rendered_.bottom_!==""){this.rendered_.bottom_=t.bottom=""}if(i==ol.OverlayPositioning.CENTER_LEFT||i==ol.OverlayPositioning.CENTER_CENTER||i==ol.OverlayPositioning.CENTER_RIGHT){a-=goog.style.getSize(this.element_).height/2}var p=Math.round(e[1]+a)+"px";if(this.rendered_.top_!=p){this.rendered_.top_=t.top=p}}this.setVisible(true)};goog.provide("ol.control.OverviewMap");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.classlist");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("goog.math.Size");goog.require("goog.style");goog.require("ol");goog.require("ol.Collection");goog.require("ol.Map");goog.require("ol.MapEventType");goog.require("ol.Object");goog.require("ol.ObjectEventType");goog.require("ol.Overlay");goog.require("ol.OverlayPositioning");goog.require("ol.View");goog.require("ol.ViewProperty");goog.require("ol.control.Control");goog.require("ol.coordinate");goog.require("ol.css");goog.require("ol.extent");ol.control.OverviewMap=function(e){var o=e?e:{};this.collapsed_=o.collapsed!==undefined?o.collapsed:true;this.collapsible_=o.collapsible!==undefined?o.collapsible:true;if(!this.collapsible_){this.collapsed_=false}var t=o.className!==undefined?o.className:"ol-overviewmap";var r=o.tipLabel!==undefined?o.tipLabel:"Overview map";var i=o.collapseLabel!==undefined?o.collapseLabel:"«";this.collapseLabel_=typeof i==="string"?goog.dom.createDom("SPAN",{},i):i;var n=o.label!==undefined?o.label:"»";this.label_=typeof n==="string"?goog.dom.createDom("SPAN",{},n):n;var a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;var l=goog.dom.createDom("BUTTON",{type:"button",title:r},a);ol.events.listen(l,ol.events.EventType.CLICK,this.handleClick_,this);var s=document.createElement("DIV");s.className="ol-overviewmap-map";this.ovmap_=new ol.Map({controls:new ol.Collection,interactions:new ol.Collection,target:s,view:o.view});var g=this.ovmap_;if(o.layers){o.layers.forEach(function(e){g.addLayer(e)},this)}var p=goog.dom.createDom("DIV","ol-overviewmap-box");this.boxOverlay_=new ol.Overlay({position:[0,0],positioning:ol.OverlayPositioning.BOTTOM_LEFT,element:p});this.ovmap_.addOverlay(this.boxOverlay_);var u=t+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible");var c=goog.dom.createDom("DIV",u,s,l);var d=o.render?o.render:ol.control.OverviewMap.render;goog.base(this,{element:c,render:d,target:o.target})};goog.inherits(ol.control.OverviewMap,ol.control.Control);ol.control.OverviewMap.prototype.setMap=function(e){var o=this.getMap();if(e===o){return}if(o){var t=o.getView();if(t){this.unbindView_(t)}}goog.base(this,"setMap",e);if(e){this.listenerKeys.push(ol.events.listen(e,ol.ObjectEventType.PROPERTYCHANGE,this.handleMapPropertyChange_,this));if(this.ovmap_.getLayers().getLength()===0){this.ovmap_.setLayerGroup(e.getLayerGroup())}var r=e.getView();if(r){this.bindView_(r);if(r.isDef()){this.ovmap_.updateSize();this.resetExtent_()}}}};ol.control.OverviewMap.prototype.handleMapPropertyChange_=function(e){if(e.key===ol.MapProperty.VIEW){var o=e.oldValue;if(o){this.unbindView_(o)}var t=this.getMap().getView();this.bindView_(t)}};ol.control.OverviewMap.prototype.bindView_=function(e){ol.events.listen(e,ol.Object.getChangeEventType(ol.ViewProperty.ROTATION),this.handleRotationChanged_,this)};ol.control.OverviewMap.prototype.unbindView_=function(e){ol.events.unlisten(e,ol.Object.getChangeEventType(ol.ViewProperty.ROTATION),this.handleRotationChanged_,this)};ol.control.OverviewMap.prototype.handleRotationChanged_=function(){this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())};ol.control.OverviewMap.render=function(e){this.validateExtent_();this.updateBox_()};ol.control.OverviewMap.prototype.validateExtent_=function(){var e=this.getMap();var o=this.ovmap_;if(!e.isRendered()||!o.isRendered()){return}var t=e.getSize();goog.asserts.assertArray(t,"mapSize should be an array");var r=e.getView();goog.asserts.assert(r,"view should be defined");var i=r.calculateExtent(t);var n=o.getSize();goog.asserts.assertArray(n,"ovmapSize should be an array");var a=o.getView();goog.asserts.assert(a,"ovview should be defined");var l=a.calculateExtent(n);var s=o.getPixelFromCoordinate(ol.extent.getTopLeft(i));var g=o.getPixelFromCoordinate(ol.extent.getBottomRight(i));var p=new goog.math.Size(Math.abs(s[0]-g[0]),Math.abs(s[1]-g[1]));var u=n[0];var c=n[1];if(p.width<u*ol.OVERVIEWMAP_MIN_RATIO||p.height<c*ol.OVERVIEWMAP_MIN_RATIO||p.width>u*ol.OVERVIEWMAP_MAX_RATIO||p.height>c*ol.OVERVIEWMAP_MAX_RATIO){this.resetExtent_()}else if(!ol.extent.containsExtent(l,i)){this.recenter_()}};ol.control.OverviewMap.prototype.resetExtent_=function(){if(ol.OVERVIEWMAP_MAX_RATIO===0||ol.OVERVIEWMAP_MIN_RATIO===0){return}var e=this.getMap();var o=this.ovmap_;var t=e.getSize();goog.asserts.assertArray(t,"mapSize should be an array");var r=e.getView();goog.asserts.assert(r,"view should be defined");var i=r.calculateExtent(t);var n=o.getSize();goog.asserts.assertArray(n,"ovmapSize should be an array");var a=o.getView();goog.asserts.assert(a,"ovview should be defined");var l=Math.log(ol.OVERVIEWMAP_MAX_RATIO/ol.OVERVIEWMAP_MIN_RATIO)/Math.LN2;var s=1/(Math.pow(2,l/2)*ol.OVERVIEWMAP_MIN_RATIO);ol.extent.scaleFromCenter(i,s);a.fit(i,n)};ol.control.OverviewMap.prototype.recenter_=function(){var e=this.getMap();var o=this.ovmap_;var t=e.getView();goog.asserts.assert(t,"view should be defined");var r=o.getView();goog.asserts.assert(r,"ovview should be defined");r.setCenter(t.getCenter())};ol.control.OverviewMap.prototype.updateBox_=function(){var e=this.getMap();var o=this.ovmap_;if(!e.isRendered()||!o.isRendered()){return}var t=e.getSize();goog.asserts.assertArray(t,"mapSize should be an array");var r=e.getView();goog.asserts.assert(r,"view should be defined");var i=o.getView();goog.asserts.assert(i,"ovview should be defined");var n=o.getSize();goog.asserts.assertArray(n,"ovmapSize should be an array");var a=r.getRotation();goog.asserts.assert(a!==undefined,"rotation should be defined");var l=this.boxOverlay_;var s=this.boxOverlay_.getElement();var g=r.calculateExtent(t);var p=i.getResolution();var u=ol.extent.getBottomLeft(g);var c=ol.extent.getTopRight(g);var d=this.calculateCoordinateRotate_(a,u);l.setPosition(d);if(s){var y=Math.abs((u[0]-c[0])/p);var h=Math.abs((c[1]-u[1])/p);goog.style.setBorderBoxSize(s,new goog.math.Size(y,h))}};ol.control.OverviewMap.prototype.calculateCoordinateRotate_=function(e,o){var t;var r=this.getMap();var i=r.getView();goog.asserts.assert(i,"view should be defined");var n=i.getCenter();if(n){t=[o[0]-n[0],o[1]-n[1]];ol.coordinate.rotate(t,e);ol.coordinate.add(t,n)}return t};ol.control.OverviewMap.prototype.handleClick_=function(e){e.preventDefault();this.handleToggle_()};ol.control.OverviewMap.prototype.handleToggle_=function(){goog.dom.classlist.toggle(this.element,"ol-collapsed");if(this.collapsed_){goog.dom.replaceNode(this.collapseLabel_,this.label_)}else{goog.dom.replaceNode(this.label_,this.collapseLabel_)}this.collapsed_=!this.collapsed_;var e=this.ovmap_;if(!this.collapsed_&&!e.isRendered()){e.updateSize();this.resetExtent_();ol.events.listenOnce(e,ol.MapEventType.POSTRENDER,function(e){this.updateBox_()},this)}};ol.control.OverviewMap.prototype.getCollapsible=function(){return this.collapsible_};ol.control.OverviewMap.prototype.setCollapsible=function(e){if(this.collapsible_===e){return}this.collapsible_=e;goog.dom.classlist.toggle(this.element,"ol-uncollapsible");if(!e&&this.collapsed_){this.handleToggle_()}};ol.control.OverviewMap.prototype.setCollapsed=function(e){if(!this.collapsible_||this.collapsed_===e){return}this.handleToggle_()};ol.control.OverviewMap.prototype.getCollapsed=function(){return this.collapsed_};ol.control.OverviewMap.prototype.getOverviewMap=function(){return this.ovmap_};goog.provide("ol.control.ScaleLine");goog.provide("ol.control.ScaleLineProperty");goog.provide("ol.control.ScaleLineUnits");goog.require("goog.asserts");goog.require("ol.events");goog.require("goog.style");goog.require("ol");goog.require("ol.Object");goog.require("ol.control.Control");goog.require("ol.css");goog.require("ol.proj.METERS_PER_UNIT");goog.require("ol.proj.Units");ol.control.ScaleLineProperty={UNITS:"units"};ol.control.ScaleLineUnits={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"};ol.control.ScaleLine=function(e){var o=e?e:{};var t=o.className!==undefined?o.className:"ol-scale-line";this.innerElement_=document.createElement("DIV");this.innerElement_.className=t+"-inner";this.element_=document.createElement("DIV");this.element_.className=t+" "+ol.css.CLASS_UNSELECTABLE;this.element_.appendChild(this.innerElement_)
;this.viewState_=null;this.minWidth_=o.minWidth!==undefined?o.minWidth:64;this.renderedVisible_=false;this.renderedWidth_=undefined;this.renderedHTML_="";var r=o.render?o.render:ol.control.ScaleLine.render;goog.base(this,{element:this.element_,render:r,target:o.target});ol.events.listen(this,ol.Object.getChangeEventType(ol.control.ScaleLineProperty.UNITS),this.handleUnitsChanged_,this);this.setUnits(o.units||ol.control.ScaleLineUnits.METRIC)};goog.inherits(ol.control.ScaleLine,ol.control.Control);ol.control.ScaleLine.LEADING_DIGITS=[1,2,5];ol.control.ScaleLine.prototype.getUnits=function(){return this.get(ol.control.ScaleLineProperty.UNITS)};ol.control.ScaleLine.render=function(e){var o=e.frameState;if(!o){this.viewState_=null}else{this.viewState_=o.viewState}this.updateElement_()};ol.control.ScaleLine.prototype.handleUnitsChanged_=function(){this.updateElement_()};ol.control.ScaleLine.prototype.setUnits=function(e){this.set(ol.control.ScaleLineProperty.UNITS,e)};ol.control.ScaleLine.prototype.updateElement_=function(){var e=this.viewState_;if(!e){if(this.renderedVisible_){goog.style.setElementShown(this.element_,false);this.renderedVisible_=false}return}var o=e.center;var t=e.projection;var r=t.getMetersPerUnit();var i=t.getPointResolution(e.resolution,o)*r;var n=this.minWidth_*i;var a="";var l=this.getUnits();if(l==ol.control.ScaleLineUnits.DEGREES){var s=ol.proj.METERS_PER_UNIT[ol.proj.Units.DEGREES];i/=s;if(n<s/60){a="″";i*=3600}else if(n<s){a="′";i*=60}else{a="°"}}else if(l==ol.control.ScaleLineUnits.IMPERIAL){if(n<.9144){a="in";i/=.0254}else if(n<1609.344){a="ft";i/=.3048}else{a="mi";i/=1609.344}}else if(l==ol.control.ScaleLineUnits.NAUTICAL){i/=1852;a="nm"}else if(l==ol.control.ScaleLineUnits.METRIC){if(n<1){a="mm";i*=1e3}else if(n<1e3){a="m"}else{a="km";i/=1e3}}else if(l==ol.control.ScaleLineUnits.US){if(n<.9144){a="in";i*=39.37}else if(n<1609.344){a="ft";i/=.30480061}else{a="mi";i/=1609.3472}}else{goog.asserts.fail("Scale line element cannot be updated")}var g=3*Math.floor(Math.log(this.minWidth_*i)/Math.log(10));var p,u;while(true){p=ol.control.ScaleLine.LEADING_DIGITS[(g%3+3)%3]*Math.pow(10,Math.floor(g/3));u=Math.round(p/i);if(isNaN(u)){goog.style.setElementShown(this.element_,false);this.renderedVisible_=false;return}else if(u>=this.minWidth_){break}++g}var c=p+" "+a;if(this.renderedHTML_!=c){this.innerElement_.innerHTML=c;this.renderedHTML_=c}if(this.renderedWidth_!=u){this.innerElement_.style.width=u+"px";this.renderedWidth_=u}if(!this.renderedVisible_){goog.style.setElementShown(this.element_,true);this.renderedVisible_=true}};goog.provide("ol.control.ZoomSlider");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.style");goog.require("ol.events");goog.require("ol.events.Event");goog.require("ol.events.EventType");goog.require("ol.pointer.PointerEventHandler");goog.require("ol.Size");goog.require("ol.ViewHint");goog.require("ol.animation");goog.require("ol.control.Control");goog.require("ol.css");goog.require("ol.easing");goog.require("ol.math");ol.control.ZoomSlider=function(e){var o=e?e:{};this.currentResolution_=undefined;this.direction_=ol.control.ZoomSlider.direction.VERTICAL;this.dragging_;this.dragListenerKeys_;this.heightLimit_=0;this.widthLimit_=0;this.previousX_;this.previousY_;this.thumbSize_=null;this.sliderInitialized_=false;this.duration_=o.duration!==undefined?o.duration:200;var t=o.className!==undefined?o.className:"ol-zoomslider";var r=goog.dom.createDom("BUTTON",{type:"button",class:t+"-thumb "+ol.css.CLASS_UNSELECTABLE});var i=goog.dom.createDom("DIV",[t,ol.css.CLASS_UNSELECTABLE,ol.css.CLASS_CONTROL],r);var n=new ol.pointer.PointerEventHandler(i);this.registerDisposable(n);ol.events.listen(n,ol.pointer.EventType.POINTERDOWN,this.handleDraggerStart_,this);ol.events.listen(n,ol.pointer.EventType.POINTERMOVE,this.handleDraggerDrag_,this);ol.events.listen(n,ol.pointer.EventType.POINTERUP,this.handleDraggerEnd_,this);ol.events.listen(i,ol.events.EventType.CLICK,this.handleContainerClick_,this);ol.events.listen(r,ol.events.EventType.CLICK,ol.events.Event.stopPropagation);var a=o.render?o.render:ol.control.ZoomSlider.render;goog.base(this,{element:i,render:a})};goog.inherits(ol.control.ZoomSlider,ol.control.Control);ol.control.ZoomSlider.direction={VERTICAL:0,HORIZONTAL:1};ol.control.ZoomSlider.prototype.setMap=function(e){goog.base(this,"setMap",e);if(e){e.render()}};ol.control.ZoomSlider.prototype.initSlider_=function(){var e=this.element;var o=goog.style.getSize(e);var t=e.firstElementChild;var r=goog.style.getMarginBox(t);var i=goog.style.getBorderBoxSize(t);var n=i.width+r.right+r.left;var a=i.height+r.top+r.bottom;this.thumbSize_=[n,a];if(o.width>o.height){this.direction_=ol.control.ZoomSlider.direction.HORIZONTAL;this.widthLimit_=o.width-n}else{this.direction_=ol.control.ZoomSlider.direction.VERTICAL;this.heightLimit_=o.height-a}this.sliderInitialized_=true};ol.control.ZoomSlider.render=function(e){if(!e.frameState){return}goog.asserts.assert(e.frameState.viewState,"viewState should be defined");if(!this.sliderInitialized_){this.initSlider_()}var o=e.frameState.viewState.resolution;if(o!==this.currentResolution_){this.currentResolution_=o;this.setThumbPosition_(o)}};ol.control.ZoomSlider.prototype.handleContainerClick_=function(e){var o=this.getMap();var t=o.getView();var r=t.getResolution();goog.asserts.assert(r,"currentResolution should be defined");o.beforeRender(ol.animation.zoom({resolution:r,duration:this.duration_,easing:ol.easing.easeOut}));var i=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2);var n=this.getResolutionForPosition_(i);t.setResolution(t.constrainResolution(n))};ol.control.ZoomSlider.prototype.handleDraggerStart_=function(e){if(!this.dragging_&&e.originalEvent.target===this.element.firstElementChild){this.getMap().getView().setHint(ol.ViewHint.INTERACTING,1);this.previousX_=e.clientX;this.previousY_=e.clientY;this.dragging_=true;if(!this.dragListenerKeys_){var o=this.handleDraggerDrag_;var t=this.handleDraggerEnd_;this.dragListenerKeys_=[ol.events.listen(document,ol.events.EventType.MOUSEMOVE,o,this),ol.events.listen(document,ol.events.EventType.TOUCHMOVE,o,this),ol.events.listen(document,ol.pointer.EventType.POINTERMOVE,o,this),ol.events.listen(document,ol.events.EventType.MOUSEUP,t,this),ol.events.listen(document,ol.events.EventType.TOUCHEND,t,this),ol.events.listen(document,ol.pointer.EventType.POINTERUP,t,this)]}}};ol.control.ZoomSlider.prototype.handleDraggerDrag_=function(e){if(this.dragging_){var o=this.element.firstElementChild;var t=e.clientX-this.previousX_+parseInt(o.style.left,10);var r=e.clientY-this.previousY_+parseInt(o.style.top,10);var i=this.getRelativePosition_(t,r);this.currentResolution_=this.getResolutionForPosition_(i);this.getMap().getView().setResolution(this.currentResolution_);this.setThumbPosition_(this.currentResolution_);this.previousX_=e.clientX;this.previousY_=e.clientY}};ol.control.ZoomSlider.prototype.handleDraggerEnd_=function(e){if(this.dragging_){var o=this.getMap();var t=o.getView();t.setHint(ol.ViewHint.INTERACTING,-1);goog.asserts.assert(this.currentResolution_,"this.currentResolution_ should be defined");o.beforeRender(ol.animation.zoom({resolution:this.currentResolution_,duration:this.duration_,easing:ol.easing.easeOut}));var r=t.constrainResolution(this.currentResolution_);t.setResolution(r);this.dragging_=false;this.previousX_=undefined;this.previousY_=undefined;this.dragListenerKeys_.forEach(ol.events.unlistenByKey);this.dragListenerKeys_=null}};ol.control.ZoomSlider.prototype.setThumbPosition_=function(e){var o=this.getPositionForResolution_(e);var t=this.element.firstElementChild;if(this.direction_==ol.control.ZoomSlider.direction.HORIZONTAL){t.style.left=this.widthLimit_*o+"px"}else{t.style.top=this.heightLimit_*o+"px"}};ol.control.ZoomSlider.prototype.getRelativePosition_=function(e,o){var t;if(this.direction_===ol.control.ZoomSlider.direction.HORIZONTAL){t=e/this.widthLimit_}else{t=o/this.heightLimit_}return ol.math.clamp(t,0,1)};ol.control.ZoomSlider.prototype.getResolutionForPosition_=function(e){var o=this.getMap().getView().getResolutionForValueFunction();return o(1-e)};ol.control.ZoomSlider.prototype.getPositionForResolution_=function(e){var o=this.getMap().getView().getValueForResolutionFunction();return 1-o(e)};goog.provide("ol.control.ZoomToExtent");goog.require("goog.asserts");goog.require("goog.dom");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol.control.Control");goog.require("ol.css");ol.control.ZoomToExtent=function(e){var o=e?e:{};this.extent_=o.extent?o.extent:null;var t=o.className!==undefined?o.className:"ol-zoom-extent";var r=o.label!==undefined?o.label:"E";var i=o.tipLabel!==undefined?o.tipLabel:"Fit to extent";var n=goog.dom.createDom("BUTTON",{type:"button",title:i},r);ol.events.listen(n,ol.events.EventType.CLICK,this.handleClick_,this);var a=t+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL;var l=goog.dom.createDom("DIV",a,n);goog.base(this,{element:l,target:o.target})};goog.inherits(ol.control.ZoomToExtent,ol.control.Control);ol.control.ZoomToExtent.prototype.handleClick_=function(e){e.preventDefault();this.handleZoomToExtent_()};ol.control.ZoomToExtent.prototype.handleZoomToExtent_=function(){var e=this.getMap();var o=e.getView();var t=!this.extent_?o.getProjection().getExtent():this.extent_;var r=e.getSize();goog.asserts.assert(r,"size should be defined");o.fit(t,r)};goog.provide("ol.DeviceOrientation");goog.provide("ol.DeviceOrientationProperty");goog.require("ol.events");goog.require("ol");goog.require("ol.Object");goog.require("ol.has");goog.require("ol.math");ol.DeviceOrientationProperty={ALPHA:"alpha",BETA:"beta",GAMMA:"gamma",HEADING:"heading",TRACKING:"tracking"};ol.DeviceOrientation=function(e){goog.base(this);var o=e?e:{};this.listenerKey_=null;ol.events.listen(this,ol.Object.getChangeEventType(ol.DeviceOrientationProperty.TRACKING),this.handleTrackingChanged_,this);this.setTracking(o.tracking!==undefined?o.tracking:false)};goog.inherits(ol.DeviceOrientation,ol.Object);ol.DeviceOrientation.prototype.disposeInternal=function(){this.setTracking(false);goog.base(this,"disposeInternal")};ol.DeviceOrientation.prototype.orientationChange_=function(e){var o=e;if(o.alpha!==null){var t=ol.math.toRadians(o.alpha);this.set(ol.DeviceOrientationProperty.ALPHA,t);if(typeof o.absolute==="boolean"&&o.absolute){this.set(ol.DeviceOrientationProperty.HEADING,t)}else if(goog.isNumber(o.webkitCompassHeading)&&o.webkitCompassAccuracy!=-1){var r=ol.math.toRadians(o.webkitCompassHeading);this.set(ol.DeviceOrientationProperty.HEADING,r)}}if(o.beta!==null){this.set(ol.DeviceOrientationProperty.BETA,ol.math.toRadians(o.beta))}if(o.gamma!==null){this.set(ol.DeviceOrientationProperty.GAMMA,ol.math.toRadians(o.gamma))}this.changed()};ol.DeviceOrientation.prototype.getAlpha=function(){return this.get(ol.DeviceOrientationProperty.ALPHA)};ol.DeviceOrientation.prototype.getBeta=function(){return this.get(ol.DeviceOrientationProperty.BETA)};ol.DeviceOrientation.prototype.getGamma=function(){return this.get(ol.DeviceOrientationProperty.GAMMA)};ol.DeviceOrientation.prototype.getHeading=function(){return this.get(ol.DeviceOrientationProperty.HEADING)};ol.DeviceOrientation.prototype.getTracking=function(){return this.get(ol.DeviceOrientationProperty.TRACKING)};ol.DeviceOrientation.prototype.handleTrackingChanged_=function(){if(ol.has.DEVICE_ORIENTATION){var e=this.getTracking();if(e&&!this.listenerKey_){this.listenerKey_=ol.events.listen(goog.global,"deviceorientation",this.orientationChange_,this)}else if(!e&&this.listenerKey_!==null){ol.events.unlistenByKey(this.listenerKey_);this.listenerKey_=null}}};ol.DeviceOrientation.prototype.setTracking=function(e){this.set(ol.DeviceOrientationProperty.TRACKING,e)};goog.provide("ol.format.Feature");goog.require("ol.geom.Geometry");goog.require("ol.proj");ol.format.Feature=function(){this.defaultDataProjection=null};ol.format.Feature.prototype.getExtensions=goog.abstractMethod;ol.format.Feature.prototype.getReadOptions=function(e,o){var t;if(o){t={dataProjection:o.dataProjection?o.dataProjection:this.readProjection(e),featureProjection:o.featureProjection}}return this.adaptOptions(t)};ol.format.Feature.prototype.adaptOptions=function(e){var o;if(e){o={featureProjection:e.featureProjection,dataProjection:e.dataProjection?e.dataProjection:this.defaultDataProjection,rightHanded:e.rightHanded}}return o};ol.format.Feature.prototype.getType=goog.abstractMethod;ol.format.Feature.prototype.readFeature=goog.abstractMethod;ol.format.Feature.prototype.readFeatures=goog.abstractMethod;ol.format.Feature.prototype.readGeometry=goog.abstractMethod;ol.format.Feature.prototype.readProjection=goog.abstractMethod;ol.format.Feature.prototype.writeFeature=goog.abstractMethod;ol.format.Feature.prototype.writeFeatures=goog.abstractMethod;ol.format.Feature.prototype.writeGeometry=goog.abstractMethod;ol.format.Feature.transformWithOptions=function(e,o,t){var r=t?ol.proj.get(t.featureProjection):null;var i=t?ol.proj.get(t.dataProjection):null;if(r&&i&&!ol.proj.equivalent(r,i)){if(e instanceof ol.geom.Geometry){return(o?e.clone():e).transform(o?r:i,o?i:r)}else{return ol.proj.transformExtent(o?e.slice():e,o?r:i,o?i:r)}}else{return e}};goog.provide("ol.format.JSONFeature");goog.require("goog.asserts");goog.require("ol.format.Feature");goog.require("ol.format.FormatType");ol.format.JSONFeature=function(){goog.base(this)};goog.inherits(ol.format.JSONFeature,ol.format.Feature);ol.format.JSONFeature.prototype.getObject_=function(e){if(goog.isObject(e)){return e}else if(typeof e==="string"){var o=JSON.parse(e);return o?o:null}else{goog.asserts.fail();return null}};ol.format.JSONFeature.prototype.getType=function(){return ol.format.FormatType.JSON};ol.format.JSONFeature.prototype.readFeature=function(e,o){return this.readFeatureFromObject(this.getObject_(e),this.getReadOptions(e,o))};ol.format.JSONFeature.prototype.readFeatures=function(e,o){return this.readFeaturesFromObject(this.getObject_(e),this.getReadOptions(e,o))};ol.format.JSONFeature.prototype.readFeatureFromObject=goog.abstractMethod;ol.format.JSONFeature.prototype.readFeaturesFromObject=goog.abstractMethod;ol.format.JSONFeature.prototype.readGeometry=function(e,o){return this.readGeometryFromObject(this.getObject_(e),this.getReadOptions(e,o))};ol.format.JSONFeature.prototype.readGeometryFromObject=goog.abstractMethod;ol.format.JSONFeature.prototype.readProjection=function(e){return this.readProjectionFromObject(this.getObject_(e))};ol.format.JSONFeature.prototype.readProjectionFromObject=goog.abstractMethod;ol.format.JSONFeature.prototype.writeFeature=function(e,o){return JSON.stringify(this.writeFeatureObject(e,o))};ol.format.JSONFeature.prototype.writeFeatureObject=goog.abstractMethod;ol.format.JSONFeature.prototype.writeFeatures=function(e,o){return JSON.stringify(this.writeFeaturesObject(e,o))};ol.format.JSONFeature.prototype.writeFeaturesObject=goog.abstractMethod;ol.format.JSONFeature.prototype.writeGeometry=function(e,o){return JSON.stringify(this.writeGeometryObject(e,o))};ol.format.JSONFeature.prototype.writeGeometryObject=goog.abstractMethod;goog.provide("ol.geom.flat.interpolate");goog.require("goog.asserts");goog.require("goog.math");goog.require("ol.array");ol.geom.flat.interpolate.lineString=function(e,o,t,r,i,n){goog.asserts.assert(0<=i&&i<=1,"fraction should be in between 0 and 1");var a=NaN;var l=NaN;var s=(t-o)/r;if(s===0){goog.asserts.fail("n cannot be 0")}else if(s==1){a=e[o];l=e[o+1]}else if(s==2){a=(1-i)*e[o]+i*e[o+r];l=(1-i)*e[o+1]+i*e[o+r+1]}else{var g=e[o];var p=e[o+1];var u=0;var c=[0];var d;for(d=o+r;d<t;d+=r){var y=e[d];var h=e[d+1];u+=Math.sqrt((y-g)*(y-g)+(h-p)*(h-p));c.push(u);g=y;p=h}var m=i*u;var f=ol.array.binarySearch(c,m);if(f<0){var v=(m-c[-f-2])/(c[-f-1]-c[-f-2]);var _=o+(-f-2)*r;a=goog.math.lerp(e[_],e[_+r],v);l=goog.math.lerp(e[_+1],e[_+r+1],v)}else{a=e[o+f*r];l=e[o+f*r+1]}}if(n){n[0]=a;n[1]=l;return n}else{return[a,l]}};ol.geom.flat.lineStringCoordinateAtM=function(e,o,t,r,i,n){if(t==o){return null}var a;if(i<e[o+r-1]){if(n){a=e.slice(o,o+r);a[r-1]=i;return a}else{return null}}else if(e[t-1]<i){if(n){a=e.slice(t-r,t);a[r-1]=i;return a}else{return null}}if(i==e[o+r-1]){return e.slice(o,o+r)}var l=o/r;var s=t/r;while(l<s){var g=l+s>>1;if(i<e[(g+1)*r-1]){s=g}else{l=g+1}}var p=e[l*r-1];if(i==p){return e.slice((l-1)*r,(l-1)*r+r)}var u=e[(l+1)*r-1];goog.asserts.assert(p<i,"m0 should be less than m");goog.asserts.assert(i<=u,"m should be less than or equal to m1");var c=(i-p)/(u-p);a=[];var d;for(d=0;d<r-1;++d){a.push(goog.math.lerp(e[(l-1)*r+d],e[l*r+d],c))}a.push(i);goog.asserts.assert(a.length==r,"length of coordinate array should match stride");return a};ol.geom.flat.lineStringsCoordinateAtM=function(e,o,t,r,i,n,a){if(a){return ol.geom.flat.lineStringCoordinateAtM(e,o,t[t.length-1],r,i,n)}var l;if(i<e[r-1]){if(n){l=e.slice(0,r);l[r-1]=i;return l}else{return null}}if(e[e.length-1]<i){if(n){l=e.slice(e.length-r);l[r-1]=i;return l}else{return null}}var s,g;for(s=0,g=t.length;s<g;++s){var p=t[s];if(o==p){continue}if(i<e[o+r-1]){return null}else if(i<=e[p-1]){return ol.geom.flat.lineStringCoordinateAtM(e,o,p,r,i,false)}o=p}goog.asserts.fail("ol.geom.flat.lineStringsCoordinateAtM should have returned");return null};goog.provide("ol.geom.flat.length");ol.geom.flat.length.lineString=function(e,o,t,r){var i=e[o];var n=e[o+1];var a=0;var l;for(l=o+r;l<t;l+=r){var s=e[l];var g=e[l+1];a+=Math.sqrt((s-i)*(s-i)+(g-n)*(g-n));i=s;n=g}return a};ol.geom.flat.length.linearRing=function(e,o,t,r){var i=ol.geom.flat.length.lineString(e,o,t,r);var n=e[t-r]-e[o];var a=e[t-r+1]-e[o+1];i+=Math.sqrt(n*n+a*a);return i};goog.provide("ol.geom.LineString");goog.require("goog.asserts");goog.require("ol");goog.require("ol.array");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.closest");goog.require("ol.geom.flat.deflate");goog.require("ol.geom.flat.inflate");goog.require("ol.geom.flat.interpolate");goog.require("ol.geom.flat.intersectsextent");goog.require("ol.geom.flat.length");goog.require("ol.geom.flat.segments");goog.require("ol.geom.flat.simplify");ol.geom.LineString=function(e,o){goog.base(this);this.flatMidpoint_=null;this.flatMidpointRevision_=-1;this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.setCoordinates(e,o)};goog.inherits(ol.geom.LineString,ol.geom.SimpleGeometry);ol.geom.LineString.prototype.appendCoordinate=function(e){goog.asserts.assert(e.length==this.stride,"length of coordinate array should match stride");if(!this.flatCoordinates){this.flatCoordinates=e.slice()}else{ol.array.extend(this.flatCoordinates,e)}this.changed()};ol.geom.LineString.prototype.clone=function(){var e=new ol.geom.LineString(null);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return e};ol.geom.LineString.prototype.closestPointXY=function(e,o,t,r){if(r<ol.extent.closestSquaredDistanceXY(this.getExtent(),e,o)){return r}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getMaxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return ol.geom.flat.closest.getClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,false,e,o,t,r)};ol.geom.LineString.prototype.forEachSegment=function(e,o){return ol.geom.flat.segments.forEach(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,o)};ol.geom.LineString.prototype.getCoordinateAtM=function(e,o){if(this.layout!=ol.geom.GeometryLayout.XYM&&this.layout!=ol.geom.GeometryLayout.XYZM){return null}var t=o!==undefined?o:false;return ol.geom.flat.lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t)};ol.geom.LineString.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.LineString.prototype.getCoordinateAt=function(e,o){return ol.geom.flat.interpolate.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,o)};ol.geom.LineString.prototype.getLength=function(){return ol.geom.flat.length.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.LineString.prototype.getFlatMidpoint=function(){if(this.flatMidpointRevision_!=this.getRevision()){this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_);this.flatMidpointRevision_=this.getRevision()}return this.flatMidpoint_};ol.geom.LineString.prototype.getSimplifiedGeometryInternal=function(e){var o=[];o.length=ol.geom.flat.simplify.douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,o,0);var t=new ol.geom.LineString(null);t.setFlatCoordinates(ol.geom.GeometryLayout.XY,o);return t};ol.geom.LineString.prototype.getType=function(){return ol.geom.GeometryType.LINE_STRING};ol.geom.LineString.prototype.intersectsExtent=function(e){return ol.geom.flat.intersectsextent.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)};ol.geom.LineString.prototype.setCoordinates=function(e,o){if(!e){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)}else{this.setLayout(o,e,1);if(!this.flatCoordinates){this.flatCoordinates=[]}this.flatCoordinates.length=ol.geom.flat.deflate.coordinates(this.flatCoordinates,0,e,this.stride);this.changed()}};ol.geom.LineString.prototype.setFlatCoordinates=function(e,o){this.setFlatCoordinatesInternal(e,o);this.changed()};goog.provide("ol.geom.MultiLineString");goog.require("goog.asserts");goog.require("ol");goog.require("ol.array");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LineString");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.closest");goog.require("ol.geom.flat.deflate");goog.require("ol.geom.flat.inflate");goog.require("ol.geom.flat.interpolate");goog.require("ol.geom.flat.intersectsextent");goog.require("ol.geom.flat.simplify");ol.geom.MultiLineString=function(e,o){goog.base(this);this.ends_=[];this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.setCoordinates(e,o)};goog.inherits(ol.geom.MultiLineString,ol.geom.SimpleGeometry);ol.geom.MultiLineString.prototype.appendLineString=function(e){goog.asserts.assert(e.getLayout()==this.layout,"layout of lineString should match the layout");if(!this.flatCoordinates){this.flatCoordinates=e.getFlatCoordinates().slice()}else{ol.array.extend(this.flatCoordinates,e.getFlatCoordinates().slice())}this.ends_.push(this.flatCoordinates.length);this.changed()};ol.geom.MultiLineString.prototype.clone=function(){var e=new ol.geom.MultiLineString(null);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice());return e};ol.geom.MultiLineString.prototype.closestPointXY=function(e,o,t,r){if(r<ol.extent.closestSquaredDistanceXY(this.getExtent(),e,o)){return r}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return ol.geom.flat.closest.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,false,e,o,t,r)};ol.geom.MultiLineString.prototype.getCoordinateAtM=function(e,o,t){if(this.layout!=ol.geom.GeometryLayout.XYM&&this.layout!=ol.geom.GeometryLayout.XYZM||this.flatCoordinates.length===0){return null}var r=o!==undefined?o:false;var i=t!==undefined?t:false;return ol.geom.flat.lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,e,r,i)};ol.geom.MultiLineString.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinatess(this.flatCoordinates,0,this.ends_,this.stride)};ol.geom.MultiLineString.prototype.getEnds=function(){return this.ends_};ol.geom.MultiLineString.prototype.getLineString=function(e){goog.asserts.assert(0<=e&&e<this.ends_.length,"index should be in between 0 and length of the this.ends_ array");if(e<0||this.ends_.length<=e){return null}var o=new ol.geom.LineString(null);o.setFlatCoordinates(this.layout,this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]));return o};ol.geom.MultiLineString.prototype.getLineStrings=function(){var e=this.flatCoordinates;var o=this.ends_;var t=this.layout;var r=[];var i=0;var n,a;for(n=0,a=o.length;n<a;++n){var l=o[n];var s=new ol.geom.LineString(null);s.setFlatCoordinates(t,e.slice(i,l));r.push(s);i=l}return r};ol.geom.MultiLineString.prototype.getFlatMidpoints=function(){var e=[];var o=this.flatCoordinates;var t=0;var r=this.ends_;var i=this.stride;var n,a;for(n=0,a=r.length;n<a;++n){var l=r[n];var s=ol.geom.flat.interpolate.lineString(o,t,l,i,.5);ol.array.extend(e,s);t=l}return e};ol.geom.MultiLineString.prototype.getSimplifiedGeometryInternal=function(e){var o=[];var t=[];o.length=ol.geom.flat.simplify.douglasPeuckers(this.flatCoordinates,0,this.ends_,this.stride,e,o,0,t);var r=new ol.geom.MultiLineString(null);r.setFlatCoordinates(ol.geom.GeometryLayout.XY,o,t);return r};ol.geom.MultiLineString.prototype.getType=function(){return ol.geom.GeometryType.MULTI_LINE_STRING};ol.geom.MultiLineString.prototype.intersectsExtent=function(e){return ol.geom.flat.intersectsextent.lineStrings(this.flatCoordinates,0,this.ends_,this.stride,e)};ol.geom.MultiLineString.prototype.setCoordinates=function(e,o){if(!e){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null,this.ends_)}else{this.setLayout(o,e,2);if(!this.flatCoordinates){this.flatCoordinates=[]}var t=ol.geom.flat.deflate.coordinatess(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=t.length===0?0:t[t.length-1];this.changed()}};ol.geom.MultiLineString.prototype.setFlatCoordinates=function(e,o,t){if(!o){goog.asserts.assert(t&&t.length===0,"ends must be truthy and ends.length should be 0")}else if(t.length===0){goog.asserts.assert(o.length===0,"flatCoordinates should be an empty array")}else{goog.asserts.assert(o.length==t[t.length-1],"length of flatCoordinates array should match the last value of ends")}this.setFlatCoordinatesInternal(e,o);this.ends_=t;this.changed()};ol.geom.MultiLineString.prototype.setLineStrings=function(e){var o=this.getLayout();var t=[];var r=[];var i,n;for(i=0,n=e.length;i<n;++i){var a=e[i];if(i===0){o=a.getLayout()}else{goog.asserts.assert(a.getLayout()==o,"layout of lineString should match layout")}ol.array.extend(t,a.getFlatCoordinates());r.push(t.length)}this.setFlatCoordinates(o,t,r)};goog.provide("ol.geom.MultiPoint");goog.require("goog.asserts");goog.require("ol.array");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.Point");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.deflate");goog.require("ol.geom.flat.inflate");goog.require("ol.math");ol.geom.MultiPoint=function(e,o){goog.base(this);this.setCoordinates(e,o)};goog.inherits(ol.geom.MultiPoint,ol.geom.SimpleGeometry);ol.geom.MultiPoint.prototype.appendPoint=function(e){goog.asserts.assert(e.getLayout()==this.layout,"the layout of point should match layout");if(!this.flatCoordinates){this.flatCoordinates=e.getFlatCoordinates().slice()}else{ol.array.extend(this.flatCoordinates,e.getFlatCoordinates())}this.changed()};ol.geom.MultiPoint.prototype.clone=function(){var e=new ol.geom.MultiPoint(null);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return e};ol.geom.MultiPoint.prototype.closestPointXY=function(e,o,t,r){if(r<ol.extent.closestSquaredDistanceXY(this.getExtent(),e,o)){return r}var i=this.flatCoordinates;var n=this.stride;var a,l,s;for(a=0,l=i.length;a<l;a+=n){var g=ol.math.squaredDistance(e,o,i[a],i[a+1]);if(g<r){r=g;for(s=0;s<n;++s){t[s]=i[a+s]}t.length=n}}return r};ol.geom.MultiPoint.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.MultiPoint.prototype.getPoint=function(e){var o=!this.flatCoordinates?0:this.flatCoordinates.length/this.stride;goog.asserts.assert(0<=e&&e<o,"index should be in between 0 and n");if(e<0||o<=e){return null}var t=new ol.geom.Point(null);t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride));return t};ol.geom.MultiPoint.prototype.getPoints=function(){var e=this.flatCoordinates;var o=this.layout;var t=this.stride;var r=[];var i,n;for(i=0,n=e.length;i<n;i+=t){var a=new ol.geom.Point(null);a.setFlatCoordinates(o,e.slice(i,i+t));r.push(a)}return r};ol.geom.MultiPoint.prototype.getType=function(){return ol.geom.GeometryType.MULTI_POINT};ol.geom.MultiPoint.prototype.intersectsExtent=function(e){var o=this.flatCoordinates;var t=this.stride;var r,i,n,a;for(r=0,i=o.length;r<i;r+=t){n=o[r];a=o[r+1];if(ol.extent.containsXY(e,n,a)){return true}}return false};ol.geom.MultiPoint.prototype.setCoordinates=function(e,o){if(!e){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)}else{this.setLayout(o,e,1);if(!this.flatCoordinates){this.flatCoordinates=[]}this.flatCoordinates.length=ol.geom.flat.deflate.coordinates(this.flatCoordinates,0,e,this.stride);this.changed()}};ol.geom.MultiPoint.prototype.setFlatCoordinates=function(e,o){this.setFlatCoordinatesInternal(e,o);this.changed()};goog.provide("ol.geom.flat.center");goog.require("ol.extent");ol.geom.flat.center.linearRingss=function(e,o,t,r){var i=[];var n,a;var l=ol.extent.createEmpty();for(n=0,a=t.length;n<a;++n){var s=t[n];l=ol.extent.createOrUpdateFromFlatCoordinates(e,o,s[0],r);i.push((l[0]+l[2])/2,(l[1]+l[3])/2);o=s[s.length-1]}return i};goog.provide("ol.geom.MultiPolygon");goog.require("goog.asserts");goog.require("ol");goog.require("ol.array");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.Polygon");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.area");goog.require("ol.geom.flat.center");goog.require("ol.geom.flat.closest");goog.require("ol.geom.flat.contains");goog.require("ol.geom.flat.deflate");goog.require("ol.geom.flat.inflate");goog.require("ol.geom.flat.interiorpoint");goog.require("ol.geom.flat.intersectsextent");goog.require("ol.geom.flat.orient");goog.require("ol.geom.flat.simplify");ol.geom.MultiPolygon=function(e,o){goog.base(this);this.endss_=[];this.flatInteriorPointsRevision_=-1;this.flatInteriorPoints_=null;this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.orientedRevision_=-1;this.orientedFlatCoordinates_=null;this.setCoordinates(e,o)};goog.inherits(ol.geom.MultiPolygon,ol.geom.SimpleGeometry);ol.geom.MultiPolygon.prototype.appendPolygon=function(e){goog.asserts.assert(e.getLayout()==this.layout,"layout of polygon should match layout");var o;if(!this.flatCoordinates){this.flatCoordinates=e.getFlatCoordinates().slice();o=e.getEnds().slice();this.endss_.push()}else{var t=this.flatCoordinates.length;ol.array.extend(this.flatCoordinates,e.getFlatCoordinates());o=e.getEnds().slice();var r,i;for(r=0,i=o.length;r<i;++r){o[r]+=t}}this.endss_.push(o);this.changed()};ol.geom.MultiPolygon.prototype.clone=function(){var e=new ol.geom.MultiPolygon(null);var o=this.endss_.length;var t=new Array(o);for(var r=0;r<o;++r){t[r]=this.endss_[r].slice()}e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),t);return e};ol.geom.MultiPolygon.prototype.closestPointXY=function(e,o,t,r){if(r<ol.extent.closestSquaredDistanceXY(this.getExtent(),e,o)){return r}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getssMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return ol.geom.flat.closest.getssClosestPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,true,e,o,t,r)};ol.geom.MultiPolygon.prototype.containsXY=function(e,o){
return ol.geom.flat.contains.linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,o)};ol.geom.MultiPolygon.prototype.getArea=function(){return ol.geom.flat.area.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)};ol.geom.MultiPolygon.prototype.getCoordinates=function(e){var o;if(e!==undefined){o=this.getOrientedFlatCoordinates().slice();ol.geom.flat.orient.orientLinearRingss(o,0,this.endss_,this.stride,e)}else{o=this.flatCoordinates}return ol.geom.flat.inflate.coordinatesss(o,0,this.endss_,this.stride)};ol.geom.MultiPolygon.prototype.getEndss=function(){return this.endss_};ol.geom.MultiPolygon.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var e=ol.geom.flat.center.linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=ol.geom.flat.interiorpoint.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e);this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_};ol.geom.MultiPolygon.prototype.getInteriorPoints=function(){var e=new ol.geom.MultiPoint(null);e.setFlatCoordinates(ol.geom.GeometryLayout.XY,this.getFlatInteriorPoints().slice());return e};ol.geom.MultiPolygon.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var e=this.flatCoordinates;if(ol.geom.flat.orient.linearRingssAreOriented(e,0,this.endss_,this.stride)){this.orientedFlatCoordinates_=e}else{this.orientedFlatCoordinates_=e.slice();this.orientedFlatCoordinates_.length=ol.geom.flat.orient.orientLinearRingss(this.orientedFlatCoordinates_,0,this.endss_,this.stride)}this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_};ol.geom.MultiPolygon.prototype.getSimplifiedGeometryInternal=function(e){var o=[];var t=[];o.length=ol.geom.flat.simplify.quantizess(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),o,0,t);var r=new ol.geom.MultiPolygon(null);r.setFlatCoordinates(ol.geom.GeometryLayout.XY,o,t);return r};ol.geom.MultiPolygon.prototype.getPolygon=function(e){goog.asserts.assert(0<=e&&e<this.endss_.length,"index should be in between 0 and the length of this.endss_");if(e<0||this.endss_.length<=e){return null}var o;if(e===0){o=0}else{var t=this.endss_[e-1];o=t[t.length-1]}var r=this.endss_[e].slice();var i=r[r.length-1];if(o!==0){var n,a;for(n=0,a=r.length;n<a;++n){r[n]-=o}}var l=new ol.geom.Polygon(null);l.setFlatCoordinates(this.layout,this.flatCoordinates.slice(o,i),r);return l};ol.geom.MultiPolygon.prototype.getPolygons=function(){var e=this.layout;var o=this.flatCoordinates;var t=this.endss_;var r=[];var i=0;var n,a,l,s;for(n=0,a=t.length;n<a;++n){var g=t[n].slice();var p=g[g.length-1];if(i!==0){for(l=0,s=g.length;l<s;++l){g[l]-=i}}var u=new ol.geom.Polygon(null);u.setFlatCoordinates(e,o.slice(i,p),g);r.push(u);i=p}return r};ol.geom.MultiPolygon.prototype.getType=function(){return ol.geom.GeometryType.MULTI_POLYGON};ol.geom.MultiPolygon.prototype.intersectsExtent=function(e){return ol.geom.flat.intersectsextent.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)};ol.geom.MultiPolygon.prototype.setCoordinates=function(e,o){if(!e){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null,this.endss_)}else{this.setLayout(o,e,3);if(!this.flatCoordinates){this.flatCoordinates=[]}var t=ol.geom.flat.deflate.coordinatesss(this.flatCoordinates,0,e,this.stride,this.endss_);if(t.length===0){this.flatCoordinates.length=0}else{var r=t[t.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}};ol.geom.MultiPolygon.prototype.setFlatCoordinates=function(e,o,t){goog.asserts.assert(t,"endss must be truthy");if(!o||o.length===0){goog.asserts.assert(t.length===0,"the length of endss should be 0")}else{goog.asserts.assert(t.length>0,"endss cannot be an empty array");var r=t[t.length-1];goog.asserts.assert(o.length==r[r.length-1],"the length of flatCoordinates should be the last value of ends")}this.setFlatCoordinatesInternal(e,o);this.endss_=t;this.changed()};ol.geom.MultiPolygon.prototype.setPolygons=function(e){var o=this.getLayout();var t=[];var r=[];var i,n,a;for(i=0,n=e.length;i<n;++i){var l=e[i];if(i===0){o=l.getLayout()}else{goog.asserts.assert(l.getLayout()==o,"layout of polygon should be layout")}var s=t.length;a=l.getEnds();var g,p;for(g=0,p=a.length;g<p;++g){a[g]+=s}ol.array.extend(t,l.getFlatCoordinates());r.push(a)}this.setFlatCoordinates(o,t,r)};goog.provide("ol.format.EsriJSON");goog.require("goog.asserts");goog.require("ol.Feature");goog.require("ol.array");goog.require("ol.extent");goog.require("ol.format.Feature");goog.require("ol.format.JSONFeature");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LineString");goog.require("ol.geom.LinearRing");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.geom.flat.orient");goog.require("ol.object");goog.require("ol.proj");ol.format.EsriJSON=function(e){var o=e?e:{};goog.base(this);this.geometryName_=o.geometryName};goog.inherits(ol.format.EsriJSON,ol.format.JSONFeature);ol.format.EsriJSON.readGeometry_=function(e,o){if(!e){return null}var t;if(goog.isNumber(e.x)&&goog.isNumber(e.y)){t=ol.geom.GeometryType.POINT}else if(e.points){t=ol.geom.GeometryType.MULTI_POINT}else if(e.paths){if(e.paths.length===1){t=ol.geom.GeometryType.LINE_STRING}else{t=ol.geom.GeometryType.MULTI_LINE_STRING}}else if(e.rings){var r=ol.format.EsriJSON.getGeometryLayout_(e);var i=ol.format.EsriJSON.convertRings_(e.rings,r);e=ol.object.assign({},e);if(i.length===1){t=ol.geom.GeometryType.POLYGON;e.rings=i[0]}else{t=ol.geom.GeometryType.MULTI_POLYGON;e.rings=i}}goog.asserts.assert(t,"geometry type should be defined");var n=ol.format.EsriJSON.GEOMETRY_READERS_[t];goog.asserts.assert(n,"geometryReader should be defined");return ol.format.Feature.transformWithOptions(n(e),false,o)};ol.format.EsriJSON.convertRings_=function(e,o){var t=[];var r=[];var i,n;for(i=0,n=e.length;i<n;++i){var a=ol.array.flatten(e[i]);var l=ol.geom.flat.orient.linearRingIsClockwise(a,0,a.length,o.length);if(l){t.push([e[i]])}else{r.push(e[i])}}while(r.length){var s=r.shift();var g=false;for(i=t.length-1;i>=0;i--){var p=t[i][0];if(ol.extent.containsExtent(new ol.geom.LinearRing(p).getExtent(),new ol.geom.LinearRing(s).getExtent())){t[i].push(s);g=true;break}}if(!g){t.push([s.reverse()])}}return t};ol.format.EsriJSON.readPointGeometry_=function(e){goog.asserts.assert(goog.isNumber(e.x),"object.x should be number");goog.asserts.assert(goog.isNumber(e.y),"object.y should be number");var o;if(e.m!==undefined&&e.z!==undefined){o=new ol.geom.Point([e.x,e.y,e.z,e.m],ol.geom.GeometryLayout.XYZM)}else if(e.z!==undefined){o=new ol.geom.Point([e.x,e.y,e.z],ol.geom.GeometryLayout.XYZ)}else if(e.m!==undefined){o=new ol.geom.Point([e.x,e.y,e.m],ol.geom.GeometryLayout.XYM)}else{o=new ol.geom.Point([e.x,e.y])}return o};ol.format.EsriJSON.readLineStringGeometry_=function(e){goog.asserts.assert(goog.isArray(e.paths),"object.paths should be an array");goog.asserts.assert(e.paths.length===1,"object.paths array length should be 1");var o=ol.format.EsriJSON.getGeometryLayout_(e);return new ol.geom.LineString(e.paths[0],o)};ol.format.EsriJSON.readMultiLineStringGeometry_=function(e){goog.asserts.assert(goog.isArray(e.paths),"object.paths should be an array");goog.asserts.assert(e.paths.length>1,"object.paths array length should be more than 1");var o=ol.format.EsriJSON.getGeometryLayout_(e);return new ol.geom.MultiLineString(e.paths,o)};ol.format.EsriJSON.getGeometryLayout_=function(e){var o=ol.geom.GeometryLayout.XY;if(e.hasZ===true&&e.hasM===true){o=ol.geom.GeometryLayout.XYZM}else if(e.hasZ===true){o=ol.geom.GeometryLayout.XYZ}else if(e.hasM===true){o=ol.geom.GeometryLayout.XYM}return o};ol.format.EsriJSON.readMultiPointGeometry_=function(e){goog.asserts.assert(e.points,"object.points should be defined");var o=ol.format.EsriJSON.getGeometryLayout_(e);return new ol.geom.MultiPoint(e.points,o)};ol.format.EsriJSON.readMultiPolygonGeometry_=function(e){goog.asserts.assert(e.rings);goog.asserts.assert(e.rings.length>1,"object.rings should have length larger than 1");var o=ol.format.EsriJSON.getGeometryLayout_(e);return new ol.geom.MultiPolygon(e.rings,o)};ol.format.EsriJSON.readPolygonGeometry_=function(e){goog.asserts.assert(e.rings);var o=ol.format.EsriJSON.getGeometryLayout_(e);return new ol.geom.Polygon(e.rings,o)};ol.format.EsriJSON.writePointGeometry_=function(e,o){goog.asserts.assertInstanceof(e,ol.geom.Point,"geometry should be an ol.geom.Point");var t=e.getCoordinates();var r=e.getLayout();if(r===ol.geom.GeometryLayout.XYZ){return{x:t[0],y:t[1],z:t[2]}}else if(r===ol.geom.GeometryLayout.XYM){return{x:t[0],y:t[1],m:t[2]}}else if(r===ol.geom.GeometryLayout.XYZM){return{x:t[0],y:t[1],z:t[2],m:t[3]}}else if(r===ol.geom.GeometryLayout.XY){return{x:t[0],y:t[1]}}else{goog.asserts.fail("Unknown geometry layout")}};ol.format.EsriJSON.getHasZM_=function(e){var o=e.getLayout();return{hasZ:o===ol.geom.GeometryLayout.XYZ||o===ol.geom.GeometryLayout.XYZM,hasM:o===ol.geom.GeometryLayout.XYM||o===ol.geom.GeometryLayout.XYZM}};ol.format.EsriJSON.writeLineStringGeometry_=function(e,o){goog.asserts.assertInstanceof(e,ol.geom.LineString,"geometry should be an ol.geom.LineString");var t=ol.format.EsriJSON.getHasZM_(e);return{hasZ:t.hasZ,hasM:t.hasM,paths:[e.getCoordinates()]}};ol.format.EsriJSON.writePolygonGeometry_=function(e,o){goog.asserts.assertInstanceof(e,ol.geom.Polygon,"geometry should be an ol.geom.Polygon");var t=ol.format.EsriJSON.getHasZM_(e);return{hasZ:t.hasZ,hasM:t.hasM,rings:e.getCoordinates(false)}};ol.format.EsriJSON.writeMultiLineStringGeometry_=function(e,o){goog.asserts.assertInstanceof(e,ol.geom.MultiLineString,"geometry should be an ol.geom.MultiLineString");var t=ol.format.EsriJSON.getHasZM_(e);return{hasZ:t.hasZ,hasM:t.hasM,paths:e.getCoordinates()}};ol.format.EsriJSON.writeMultiPointGeometry_=function(e,o){goog.asserts.assertInstanceof(e,ol.geom.MultiPoint,"geometry should be an ol.geom.MultiPoint");var t=ol.format.EsriJSON.getHasZM_(e);return{hasZ:t.hasZ,hasM:t.hasM,points:e.getCoordinates()}};ol.format.EsriJSON.writeMultiPolygonGeometry_=function(e,o){goog.asserts.assertInstanceof(e,ol.geom.MultiPolygon,"geometry should be an ol.geom.MultiPolygon");var t=ol.format.EsriJSON.getHasZM_(e);var r=e.getCoordinates(false);var i=[];for(var n=0;n<r.length;n++){for(var a=r[n].length-1;a>=0;a--){i.push(r[n][a])}}return{hasZ:t.hasZ,hasM:t.hasM,rings:i}};ol.format.EsriJSON.GEOMETRY_READERS_={};ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.POINT]=ol.format.EsriJSON.readPointGeometry_;ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.LINE_STRING]=ol.format.EsriJSON.readLineStringGeometry_;ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.POLYGON]=ol.format.EsriJSON.readPolygonGeometry_;ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.MULTI_POINT]=ol.format.EsriJSON.readMultiPointGeometry_;ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.MULTI_LINE_STRING]=ol.format.EsriJSON.readMultiLineStringGeometry_;ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.MULTI_POLYGON]=ol.format.EsriJSON.readMultiPolygonGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_={};ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.POINT]=ol.format.EsriJSON.writePointGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.LINE_STRING]=ol.format.EsriJSON.writeLineStringGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.POLYGON]=ol.format.EsriJSON.writePolygonGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.MULTI_POINT]=ol.format.EsriJSON.writeMultiPointGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.MULTI_LINE_STRING]=ol.format.EsriJSON.writeMultiLineStringGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.MULTI_POLYGON]=ol.format.EsriJSON.writeMultiPolygonGeometry_;ol.format.EsriJSON.prototype.readFeature;ol.format.EsriJSON.prototype.readFeatures;ol.format.EsriJSON.prototype.readFeatureFromObject=function(e,o){var t=e;goog.asserts.assert(t.geometry||t.attributes,"geometry or attributes should be defined");var r=ol.format.EsriJSON.readGeometry_(t.geometry,o);var i=new ol.Feature;if(this.geometryName_){i.setGeometryName(this.geometryName_)}i.setGeometry(r);if(o&&o.idField&&t.attributes[o.idField]){goog.asserts.assert(goog.isNumber(t.attributes[o.idField]),"objectIdFieldName value should be a number");i.setId(t.attributes[o.idField])}if(t.attributes){i.setProperties(t.attributes)}return i};ol.format.EsriJSON.prototype.readFeaturesFromObject=function(e,o){var t=e;var r=o?o:{};if(t.features){var i=e;var n=[];var a=i.features;var l,s;r.idField=e.objectIdFieldName;for(l=0,s=a.length;l<s;++l){n.push(this.readFeatureFromObject(a[l],r))}return n}else{return[this.readFeatureFromObject(e,r)]}};ol.format.EsriJSON.prototype.readGeometry;ol.format.EsriJSON.prototype.readGeometryFromObject=function(e,o){return ol.format.EsriJSON.readGeometry_(e,o)};ol.format.EsriJSON.prototype.readProjection;ol.format.EsriJSON.prototype.readProjectionFromObject=function(e){var o=e;if(o.spatialReference&&o.spatialReference.wkid){var t=o.spatialReference.wkid;return ol.proj.get("EPSG:"+t)}else{return null}};ol.format.EsriJSON.writeGeometry_=function(e,o){var t=ol.format.EsriJSON.GEOMETRY_WRITERS_[e.getType()];goog.asserts.assert(t,"geometryWriter should be defined");return t(ol.format.Feature.transformWithOptions(e,true,o),o)};ol.format.EsriJSON.prototype.writeGeometry;ol.format.EsriJSON.prototype.writeGeometryObject=function(e,o){return ol.format.EsriJSON.writeGeometry_(e,this.adaptOptions(o))};ol.format.EsriJSON.prototype.writeFeature;ol.format.EsriJSON.prototype.writeFeatureObject=function(e,o){o=this.adaptOptions(o);var t={};var r=e.getGeometry();if(r){t["geometry"]=ol.format.EsriJSON.writeGeometry_(r,o)}var i=e.getProperties();delete i[e.getGeometryName()];if(!ol.object.isEmpty(i)){t["attributes"]=i}else{t["attributes"]={}}if(o&&o.featureProjection){t["spatialReference"]={wkid:ol.proj.get(o.featureProjection).getCode().split(":").pop()}}return t};ol.format.EsriJSON.prototype.writeFeatures;ol.format.EsriJSON.prototype.writeFeaturesObject=function(e,o){o=this.adaptOptions(o);var t=[];var r,i;for(r=0,i=e.length;r<i;++r){t.push(this.writeFeatureObject(e[r],o))}return{features:t}};goog.provide("ol.geom.GeometryCollection");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol.extent");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryType");goog.require("ol.object");ol.geom.GeometryCollection=function(e){goog.base(this);this.geometries_=e?e:null;this.listenGeometriesChange_()};goog.inherits(ol.geom.GeometryCollection,ol.geom.Geometry);ol.geom.GeometryCollection.cloneGeometries_=function(e){var o=[];var t,r;for(t=0,r=e.length;t<r;++t){o.push(e[t].clone())}return o};ol.geom.GeometryCollection.prototype.unlistenGeometriesChange_=function(){var e,o;if(!this.geometries_){return}for(e=0,o=this.geometries_.length;e<o;++e){ol.events.unlisten(this.geometries_[e],ol.events.EventType.CHANGE,this.changed,this)}};ol.geom.GeometryCollection.prototype.listenGeometriesChange_=function(){var e,o;if(!this.geometries_){return}for(e=0,o=this.geometries_.length;e<o;++e){ol.events.listen(this.geometries_[e],ol.events.EventType.CHANGE,this.changed,this)}};ol.geom.GeometryCollection.prototype.clone=function(){var e=new ol.geom.GeometryCollection(null);e.setGeometries(this.geometries_);return e};ol.geom.GeometryCollection.prototype.closestPointXY=function(e,o,t,r){if(r<ol.extent.closestSquaredDistanceXY(this.getExtent(),e,o)){return r}var i=this.geometries_;var n,a;for(n=0,a=i.length;n<a;++n){r=i[n].closestPointXY(e,o,t,r)}return r};ol.geom.GeometryCollection.prototype.containsXY=function(e,o){var t=this.geometries_;var r,i;for(r=0,i=t.length;r<i;++r){if(t[r].containsXY(e,o)){return true}}return false};ol.geom.GeometryCollection.prototype.computeExtent=function(e){ol.extent.createOrUpdateEmpty(e);var o=this.geometries_;for(var t=0,r=o.length;t<r;++t){ol.extent.extend(e,o[t].getExtent())}return e};ol.geom.GeometryCollection.prototype.getGeometries=function(){return ol.geom.GeometryCollection.cloneGeometries_(this.geometries_)};ol.geom.GeometryCollection.prototype.getGeometriesArray=function(){return this.geometries_};ol.geom.GeometryCollection.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!=this.getRevision()){ol.object.clear(this.simplifiedGeometryCache);this.simplifiedGeometryMaxMinSquaredTolerance=0;this.simplifiedGeometryRevision=this.getRevision()}if(e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance){return this}var o=e.toString();if(this.simplifiedGeometryCache.hasOwnProperty(o)){return this.simplifiedGeometryCache[o]}else{var t=[];var r=this.geometries_;var i=false;var n,a;for(n=0,a=r.length;n<a;++n){var l=r[n];var s=l.getSimplifiedGeometry(e);t.push(s);if(s!==l){i=true}}if(i){var g=new ol.geom.GeometryCollection(null);g.setGeometriesArray(t);this.simplifiedGeometryCache[o]=g;return g}else{this.simplifiedGeometryMaxMinSquaredTolerance=e;return this}}};ol.geom.GeometryCollection.prototype.getType=function(){return ol.geom.GeometryType.GEOMETRY_COLLECTION};ol.geom.GeometryCollection.prototype.intersectsExtent=function(e){var o=this.geometries_;var t,r;for(t=0,r=o.length;t<r;++t){if(o[t].intersectsExtent(e)){return true}}return false};ol.geom.GeometryCollection.prototype.isEmpty=function(){return this.geometries_.length===0};ol.geom.GeometryCollection.prototype.setGeometries=function(e){this.setGeometriesArray(ol.geom.GeometryCollection.cloneGeometries_(e))};ol.geom.GeometryCollection.prototype.setGeometriesArray=function(e){this.unlistenGeometriesChange_();this.geometries_=e;this.listenGeometriesChange_();this.changed()};ol.geom.GeometryCollection.prototype.applyTransform=function(e){var o=this.geometries_;var t,r;for(t=0,r=o.length;t<r;++t){o[t].applyTransform(e)}this.changed()};ol.geom.GeometryCollection.prototype.translate=function(e,o){var t=this.geometries_;var r,i;for(r=0,i=t.length;r<i;++r){t[r].translate(e,o)}this.changed()};ol.geom.GeometryCollection.prototype.disposeInternal=function(){this.unlistenGeometriesChange_();goog.base(this,"disposeInternal")};goog.provide("ol.format.GeoJSON");goog.require("goog.asserts");goog.require("ol.Feature");goog.require("ol.format.Feature");goog.require("ol.format.JSONFeature");goog.require("ol.geom.GeometryCollection");goog.require("ol.geom.LineString");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.object");goog.require("ol.proj");ol.format.GeoJSON=function(e){var o=e?e:{};goog.base(this);this.defaultDataProjection=ol.proj.get(o.defaultDataProjection?o.defaultDataProjection:"EPSG:4326");this.geometryName_=o.geometryName};goog.inherits(ol.format.GeoJSON,ol.format.JSONFeature);ol.format.GeoJSON.EXTENSIONS_=[".geojson"];ol.format.GeoJSON.readGeometry_=function(e,o){if(!e){return null}var t=ol.format.GeoJSON.GEOMETRY_READERS_[e.type];goog.asserts.assert(t,"geometryReader should be defined");return ol.format.Feature.transformWithOptions(t(e),false,o)};ol.format.GeoJSON.readGeometryCollectionGeometry_=function(e,o){goog.asserts.assert(e.type=="GeometryCollection","object.type should be GeometryCollection");var t=e.geometries.map(function(e){return ol.format.GeoJSON.readGeometry_(e,o)});return new ol.geom.GeometryCollection(t)};ol.format.GeoJSON.readPointGeometry_=function(e){goog.asserts.assert(e.type=="Point","object.type should be Point");return new ol.geom.Point(e.coordinates)};ol.format.GeoJSON.readLineStringGeometry_=function(e){goog.asserts.assert(e.type=="LineString","object.type should be LineString");return new ol.geom.LineString(e.coordinates)};ol.format.GeoJSON.readMultiLineStringGeometry_=function(e){goog.asserts.assert(e.type=="MultiLineString","object.type should be MultiLineString");return new ol.geom.MultiLineString(e.coordinates)};ol.format.GeoJSON.readMultiPointGeometry_=function(e){goog.asserts.assert(e.type=="MultiPoint","object.type should be MultiPoint");return new ol.geom.MultiPoint(e.coordinates)};ol.format.GeoJSON.readMultiPolygonGeometry_=function(e){goog.asserts.assert(e.type=="MultiPolygon","object.type should be MultiPolygon");return new ol.geom.MultiPolygon(e.coordinates)};ol.format.GeoJSON.readPolygonGeometry_=function(e){goog.asserts.assert(e.type=="Polygon","object.type should be Polygon");return new ol.geom.Polygon(e.coordinates)};ol.format.GeoJSON.writeGeometry_=function(e,o){var t=ol.format.GeoJSON.GEOMETRY_WRITERS_[e.getType()];goog.asserts.assert(t,"geometryWriter should be defined");return t(ol.format.Feature.transformWithOptions(e,true,o),o)};ol.format.GeoJSON.writeEmptyGeometryCollectionGeometry_=function(e){return{type:"GeometryCollection",geometries:[]}};ol.format.GeoJSON.writeGeometryCollectionGeometry_=function(e,o){goog.asserts.assertInstanceof(e,ol.geom.GeometryCollection,"geometry should be an ol.geom.GeometryCollection");var t=e.getGeometriesArray().map(function(e){return ol.format.GeoJSON.writeGeometry_(e,o)});return{type:"GeometryCollection",geometries:t}};ol.format.GeoJSON.writeLineStringGeometry_=function(e,o){goog.asserts.assertInstanceof(e,ol.geom.LineString,"geometry should be an ol.geom.LineString");return{type:"LineString",coordinates:e.getCoordinates()}};ol.format.GeoJSON.writeMultiLineStringGeometry_=function(e,o){goog.asserts.assertInstanceof(e,ol.geom.MultiLineString,"geometry should be an ol.geom.MultiLineString");return{type:"MultiLineString",coordinates:e.getCoordinates()}};ol.format.GeoJSON.writeMultiPointGeometry_=function(e,o){goog.asserts.assertInstanceof(e,ol.geom.MultiPoint,"geometry should be an ol.geom.MultiPoint");return{type:"MultiPoint",coordinates:e.getCoordinates()}};ol.format.GeoJSON.writeMultiPolygonGeometry_=function(e,o){goog.asserts.assertInstanceof(e,ol.geom.MultiPolygon,"geometry should be an ol.geom.MultiPolygon");var t;if(o){t=o.rightHanded}return{type:"MultiPolygon",coordinates:e.getCoordinates(t)}};ol.format.GeoJSON.writePointGeometry_=function(e,o){goog.asserts.assertInstanceof(e,ol.geom.Point,"geometry should be an ol.geom.Point");return{type:"Point",coordinates:e.getCoordinates()}};ol.format.GeoJSON.writePolygonGeometry_=function(e,o){goog.asserts.assertInstanceof(e,ol.geom.Polygon,"geometry should be an ol.geom.Polygon");var t;if(o){t=o.rightHanded}return{type:"Polygon",coordinates:e.getCoordinates(t)}};ol.format.GeoJSON.GEOMETRY_READERS_={Point:ol.format.GeoJSON.readPointGeometry_,LineString:ol.format.GeoJSON.readLineStringGeometry_,Polygon:ol.format.GeoJSON.readPolygonGeometry_,MultiPoint:ol.format.GeoJSON.readMultiPointGeometry_,MultiLineString:ol.format.GeoJSON.readMultiLineStringGeometry_,MultiPolygon:ol.format.GeoJSON.readMultiPolygonGeometry_,GeometryCollection:ol.format.GeoJSON.readGeometryCollectionGeometry_};ol.format.GeoJSON.GEOMETRY_WRITERS_={Point:ol.format.GeoJSON.writePointGeometry_,LineString:ol.format.GeoJSON.writeLineStringGeometry_,Polygon:ol.format.GeoJSON.writePolygonGeometry_,MultiPoint:ol.format.GeoJSON.writeMultiPointGeometry_,MultiLineString:ol.format.GeoJSON.writeMultiLineStringGeometry_,MultiPolygon:ol.format.GeoJSON.writeMultiPolygonGeometry_,GeometryCollection:ol.format.GeoJSON.writeGeometryCollectionGeometry_,Circle:ol.format.GeoJSON.writeEmptyGeometryCollectionGeometry_};ol.format.GeoJSON.prototype.getExtensions=function(){return ol.format.GeoJSON.EXTENSIONS_};ol.format.GeoJSON.prototype.readFeature;ol.format.GeoJSON.prototype.readFeatures;ol.format.GeoJSON.prototype.readFeatureFromObject=function(e,o){var t=e;goog.asserts.assert(t.type=="Feature","geoJSONFeature.type should be Feature");var r=ol.format.GeoJSON.readGeometry_(t.geometry,o);var i=new ol.Feature;if(this.geometryName_){i.setGeometryName(this.geometryName_)}i.setGeometry(r);if(t.id!==undefined){i.setId(t.id)}if(t.properties){i.setProperties(t.properties)}return i};ol.format.GeoJSON.prototype.readFeaturesFromObject=function(e,o){var t=e;if(t.type=="Feature"){return[this.readFeatureFromObject(e,o)]}else if(t.type=="FeatureCollection"){var r=e;var i=[];var n=r.features;var a,l;for(a=0,l=n.length;a<l;++a){i.push(this.readFeatureFromObject(n[a],o))}return i}else{goog.asserts.fail("Unknown geoJSONObject.type: "+t.type);return[]}};ol.format.GeoJSON.prototype.readGeometry;ol.format.GeoJSON.prototype.readGeometryFromObject=function(e,o){return ol.format.GeoJSON.readGeometry_(e,o)};ol.format.GeoJSON.prototype.readProjection;ol.format.GeoJSON.prototype.readProjectionFromObject=function(e){var o=e;var t=o.crs;if(t){if(t.type=="name"){return ol.proj.get(t.properties.name)}else if(t.type=="EPSG"){return ol.proj.get("EPSG:"+t.properties.code)}else{goog.asserts.fail("Unknown crs.type: "+t.type);return null}}else{return this.defaultDataProjection}};ol.format.GeoJSON.prototype.writeFeature;ol.format.GeoJSON.prototype.writeFeatureObject=function(e,o){o=this.adaptOptions(o);var t={type:"Feature"};var r=e.getId();if(r!==undefined){t.id=r}var i=e.getGeometry();if(i){t.geometry=ol.format.GeoJSON.writeGeometry_(i,o)}else{t.geometry=null}var n=e.getProperties();delete n[e.getGeometryName()];if(!ol.object.isEmpty(n)){t.properties=n}else{t.properties=null}return t};ol.format.GeoJSON.prototype.writeFeatures;ol.format.GeoJSON.prototype.writeFeaturesObject=function(e,o){o=this.adaptOptions(o);var t=[];var r,i;for(r=0,i=e.length;r<i;++r){t.push(this.writeFeatureObject(e[r],o))}return{type:"FeatureCollection",features:t}};ol.format.GeoJSON.prototype.writeGeometry;ol.format.GeoJSON.prototype.writeGeometryObject=function(e,o){return ol.format.GeoJSON.writeGeometry_(e,this.adaptOptions(o))};goog.provide("ol.format.XMLFeature");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.dom.xml");goog.require("ol.array");goog.require("ol.format.Feature");goog.require("ol.format.FormatType");goog.require("ol.proj");goog.require("ol.xml");ol.format.XMLFeature=function(){goog.base(this)};goog.inherits(ol.format.XMLFeature,ol.format.Feature);ol.format.XMLFeature.prototype.getType=function(){return ol.format.FormatType.XML};ol.format.XMLFeature.prototype.readFeature=function(e,o){if(ol.xml.isDocument(e)){return this.readFeatureFromDocument(e,o)}else if(ol.xml.isNode(e)){return this.readFeatureFromNode(e,o)}else if(typeof e==="string"){var t=ol.xml.parse(e);return this.readFeatureFromDocument(t,o)}else{goog.asserts.fail("Unknown source type");return null}};ol.format.XMLFeature.prototype.readFeatureFromDocument=function(e,o){var t=this.readFeaturesFromDocument(e,o);if(t.length>0){return t[0]}else{return null}};ol.format.XMLFeature.prototype.readFeatureFromNode=goog.abstractMethod;ol.format.XMLFeature.prototype.readFeatures=function(e,o){if(ol.xml.isDocument(e)){return this.readFeaturesFromDocument(e,o)}else if(ol.xml.isNode(e)){return this.readFeaturesFromNode(e,o)}else if(typeof e==="string"){var t=ol.xml.parse(e);return this.readFeaturesFromDocument(t,o)}else{goog.asserts.fail("Unknown source type");return[]}};ol.format.XMLFeature.prototype.readFeaturesFromDocument=function(e,o){var t=[];var r;for(r=e.firstChild;r;r=r.nextSibling){if(r.nodeType==goog.dom.NodeType.ELEMENT){ol.array.extend(t,this.readFeaturesFromNode(r,o))}}return t};ol.format.XMLFeature.prototype.readFeaturesFromNode=goog.abstractMethod;ol.format.XMLFeature.prototype.readGeometry=function(e,o){if(ol.xml.isDocument(e)){return this.readGeometryFromDocument(e,o)}else if(ol.xml.isNode(e)){return this.readGeometryFromNode(e,o)}else if(typeof e==="string"){var t=ol.xml.parse(e);return this.readGeometryFromDocument(t,o)}else{goog.asserts.fail("Unknown source type");return null}};ol.format.XMLFeature.prototype.readGeometryFromDocument=goog.abstractMethod;ol.format.XMLFeature.prototype.readGeometryFromNode=goog.abstractMethod;ol.format.XMLFeature.prototype.readProjection=function(e){if(ol.xml.isDocument(e)){return this.readProjectionFromDocument(e)}else if(ol.xml.isNode(e)){return this.readProjectionFromNode(e)}else if(typeof e==="string"){var o=ol.xml.parse(e);return this.readProjectionFromDocument(o)}else{goog.asserts.fail("Unknown source type");return null}};ol.format.XMLFeature.prototype.readProjectionFromDocument=function(e){return this.defaultDataProjection};ol.format.XMLFeature.prototype.readProjectionFromNode=function(e){return this.defaultDataProjection};ol.format.XMLFeature.prototype.writeFeature=function(e,o){var t=this.writeFeatureNode(e,o);goog.asserts.assert(t.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return goog.dom.xml.serialize(t)};ol.format.XMLFeature.prototype.writeFeatureNode=goog.abstractMethod;ol.format.XMLFeature.prototype.writeFeatures=function(e,o){var t=this.writeFeaturesNode(e,o);goog.asserts.assert(t.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return goog.dom.xml.serialize(t)};ol.format.XMLFeature.prototype.writeFeaturesNode=goog.abstractMethod;ol.format.XMLFeature.prototype.writeGeometry=function(e,o){var t=this.writeGeometryNode(e,o);goog.asserts.assert(t.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return goog.dom.xml.serialize(t)};ol.format.XMLFeature.prototype.writeGeometryNode=goog.abstractMethod;goog.provide("ol.format.GMLBase");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("ol.array");goog.require("ol.Feature");goog.require("ol.format.Feature");goog.require("ol.format.XMLFeature");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.LineString");goog.require("ol.geom.LinearRing");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.object");goog.require("ol.proj");goog.require("ol.xml");ol.format.GMLBase=function(e){var o=e?e:{};this.featureType=o.featureType;this.featureNS=o.featureNS;this.srsName=o.srsName;this.schemaLocation="";this.FEATURE_COLLECTION_PARSERS={};this.FEATURE_COLLECTION_PARSERS[ol.format.GMLBase.GMLNS]={featureMember:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readFeaturesInternal),featureMembers:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readFeaturesInternal)};goog.base(this)};goog.inherits(ol.format.GMLBase,ol.format.XMLFeature);ol.format.GMLBase.GMLNS="http://www.opengis.net/gml";ol.format.GMLBase.ONLY_WHITESPACE_RE_=/^[\s\xa0]*$/;ol.format.GMLBase.prototype.readFeaturesInternal=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");var t=ol.xml.getLocalName(e);var r;if(t=="FeatureCollection"){if(e.namespaceURI==="http://www.opengis.net/wfs"){r=ol.xml.pushParseAndPop([],this.FEATURE_COLLECTION_PARSERS,e,o,this)}else{r=ol.xml.pushParseAndPop(null,this.FEATURE_COLLECTION_PARSERS,e,o,this)}}else if(t=="featureMembers"||t=="featureMember"){var i=o[0];goog.asserts.assert(goog.isObject(i),"context should be an Object");var n=i["featureType"];var a=i["featureNS"];var l,s,g="p",p="p0";if(!n&&e.childNodes){n=[],a={};for(l=0,s=e.childNodes.length;l<s;++l){var u=e.childNodes[l];if(u.nodeType===1){var c=u.nodeName.split(":").pop();if(n.indexOf(c)===-1){var d="";var y=0;var h=u.namespaceURI;for(var m in a){if(a[m]===h){d=m;break}++y}if(!d){d=g+y;a[d]=h}n.push(d+":"+c)}}}i["featureType"]=n;i["featureNS"]=a}if(typeof a==="string"){var f=a;a={};a[p]=f}var v={};var _=goog.isArray(n)?n:[n];for(var E in a){var S={};for(l=0,s=_.length;l<s;++l){var T=_[l].indexOf(":")===-1?p:_[l].split(":")[0];if(T===E){
S[_[l].split(":").pop()]=t=="featureMembers"?ol.xml.makeArrayPusher(this.readFeatureElement,this):ol.xml.makeReplacer(this.readFeatureElement,this)}}v[a[E]]=S}r=ol.xml.pushParseAndPop([],v,e,o)}if(!r){r=[]}return r};ol.format.GMLBase.prototype.readGeometryElement=function(e,o){var t=o[0];goog.asserts.assert(goog.isObject(t),"context should be an Object");t["srsName"]=e.firstElementChild.getAttribute("srsName");var r=ol.xml.pushParseAndPop(null,this.GEOMETRY_PARSERS_,e,o,this);if(r){return ol.format.Feature.transformWithOptions(r,false,t)}else{return undefined}};ol.format.GMLBase.prototype.readFeatureElement=function(e,o){var t;var r=e.getAttribute("fid")||ol.xml.getAttributeNS(e,ol.format.GMLBase.GMLNS,"id");var i={},n;for(t=e.firstElementChild;t;t=t.nextElementSibling){var a=ol.xml.getLocalName(t);if(t.childNodes.length===0||t.childNodes.length===1&&(t.firstChild.nodeType===3||t.firstChild.nodeType===4)){var l=ol.xml.getAllTextContent(t,false);if(ol.format.GMLBase.ONLY_WHITESPACE_RE_.test(l)){l=undefined}i[a]=l}else{if(a!=="boundedBy"){n=a}i[a]=this.readGeometryElement(t,o)}}var s=new ol.Feature(i);if(n){s.setGeometryName(n)}if(r){s.setId(r)}return s};ol.format.GMLBase.prototype.readPoint=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Point","localName should be Point");var t=this.readFlatCoordinatesFromNode_(e,o);if(t){var r=new ol.geom.Point(null);goog.asserts.assert(t.length==3,"flatCoordinates should have a length of 3");r.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,t);return r}};ol.format.GMLBase.prototype.readMultiPoint=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="MultiPoint","localName should be MultiPoint");var t=ol.xml.pushParseAndPop([],this.MULTIPOINT_PARSERS_,e,o,this);if(t){return new ol.geom.MultiPoint(t)}else{return undefined}};ol.format.GMLBase.prototype.readMultiLineString=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="MultiLineString","localName should be MultiLineString");var t=ol.xml.pushParseAndPop([],this.MULTILINESTRING_PARSERS_,e,o,this);if(t){var r=new ol.geom.MultiLineString(null);r.setLineStrings(t);return r}else{return undefined}};ol.format.GMLBase.prototype.readMultiPolygon=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="MultiPolygon","localName should be MultiPolygon");var t=ol.xml.pushParseAndPop([],this.MULTIPOLYGON_PARSERS_,e,o,this);if(t){var r=new ol.geom.MultiPolygon(null);r.setPolygons(t);return r}else{return undefined}};ol.format.GMLBase.prototype.pointMemberParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="pointMember"||e.localName=="pointMembers","localName should be pointMember or pointMembers");ol.xml.parseNode(this.POINTMEMBER_PARSERS_,e,o,this)};ol.format.GMLBase.prototype.lineStringMemberParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="lineStringMember"||e.localName=="lineStringMembers","localName should be LineStringMember or LineStringMembers");ol.xml.parseNode(this.LINESTRINGMEMBER_PARSERS_,e,o,this)};ol.format.GMLBase.prototype.polygonMemberParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="polygonMember"||e.localName=="polygonMembers","localName should be polygonMember or polygonMembers");ol.xml.parseNode(this.POLYGONMEMBER_PARSERS_,e,o,this)};ol.format.GMLBase.prototype.readLineString=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="LineString","localName should be LineString");var t=this.readFlatCoordinatesFromNode_(e,o);if(t){var r=new ol.geom.LineString(null);r.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,t);return r}else{return undefined}};ol.format.GMLBase.prototype.readFlatLinearRing_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="LinearRing","localName should be LinearRing");var t=ol.xml.pushParseAndPop(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS_,e,o,this);if(t){return t}else{return undefined}};ol.format.GMLBase.prototype.readLinearRing=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="LinearRing","localName should be LinearRing");var t=this.readFlatCoordinatesFromNode_(e,o);if(t){var r=new ol.geom.LinearRing(null);r.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,t);return r}else{return undefined}};ol.format.GMLBase.prototype.readPolygon=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Polygon","localName should be Polygon");var t=ol.xml.pushParseAndPop([null],this.FLAT_LINEAR_RINGS_PARSERS_,e,o,this);if(t&&t[0]){var r=new ol.geom.Polygon(null);var i=t[0];var n=[i.length];var a,l;for(a=1,l=t.length;a<l;++a){ol.array.extend(i,t[a]);n.push(i.length)}r.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,i,n);return r}else{return undefined}};ol.format.GMLBase.prototype.readFlatCoordinatesFromNode_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return ol.xml.pushParseAndPop(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS_,e,o,this)};ol.format.GMLBase.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml":{pointMember:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.pointMemberParser_),pointMembers:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.pointMemberParser_)}};ol.format.GMLBase.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml":{lineStringMember:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.lineStringMemberParser_),lineStringMembers:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.lineStringMemberParser_)}};ol.format.GMLBase.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml":{polygonMember:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.polygonMemberParser_),polygonMembers:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.polygonMemberParser_)}};ol.format.GMLBase.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml":{Point:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readFlatCoordinatesFromNode_)}};ol.format.GMLBase.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readLineString)}};ol.format.GMLBase.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readPolygon)}};ol.format.GMLBase.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readFlatLinearRing_)}};ol.format.GMLBase.prototype.readGeometryFromNode=function(e,o){var t=this.readGeometryElement(e,[this.getReadOptions(e,o?o:{})]);return t?t:null};ol.format.GMLBase.prototype.readFeatures;ol.format.GMLBase.prototype.readFeaturesFromNode=function(e,o){var t={featureType:this.featureType,featureNS:this.featureNS};if(o){ol.object.assign(t,this.getReadOptions(e,o))}return this.readFeaturesInternal(e,[t])};ol.format.GMLBase.prototype.readProjectionFromNode=function(e){return ol.proj.get(this.srsName?this.srsName:e.firstElementChild.getAttribute("srsName"))};goog.provide("ol.format.XSD");goog.require("goog.asserts");goog.require("goog.string");goog.require("ol");goog.require("ol.xml");ol.format.XSD.NAMESPACE_URI="http://www.w3.org/2001/XMLSchema";ol.format.XSD.readBoolean=function(e){var o=ol.xml.getAllTextContent(e,false);return ol.format.XSD.readBooleanString(o)};ol.format.XSD.readBooleanString=function(e){var o=/^\s*(true|1)|(false|0)\s*$/.exec(e);if(o){return o[1]!==undefined||false}else{return undefined}};ol.format.XSD.readDateTime=function(e){var o=ol.xml.getAllTextContent(e,false);var t=/^\s*(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(Z|(?:([+\-])(\d{2})(?::(\d{2}))?))\s*$/;var r=t.exec(o);if(r){var i=parseInt(r[1],10);var n=parseInt(r[2],10)-1;var a=parseInt(r[3],10);var l=parseInt(r[4],10);var s=parseInt(r[5],10);var g=parseInt(r[6],10);var p=Date.UTC(i,n,a,l,s,g)/1e3;if(r[7]!="Z"){var u=r[8]=="-"?-1:1;p+=u*60*parseInt(r[9],10);if(r[10]!==undefined){p+=u*60*60*parseInt(r[10],10)}}return p}else{return undefined}};ol.format.XSD.readDecimal=function(e){var o=ol.xml.getAllTextContent(e,false);return ol.format.XSD.readDecimalString(o)};ol.format.XSD.readDecimalString=function(e){var o=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(o){return parseFloat(o[1])}else{return undefined}};ol.format.XSD.readNonNegativeInteger=function(e){var o=ol.xml.getAllTextContent(e,false);return ol.format.XSD.readNonNegativeIntegerString(o)};ol.format.XSD.readNonNegativeIntegerString=function(e){var o=/^\s*(\d+)\s*$/.exec(e);if(o){return parseInt(o[1],10)}else{return undefined}};ol.format.XSD.readString=function(e){return ol.xml.getAllTextContent(e,false).trim()};ol.format.XSD.writeBooleanTextNode=function(e,o){ol.format.XSD.writeStringTextNode(e,o?"1":"0")};ol.format.XSD.writeDateTimeTextNode=function(e,o){var t=new Date(o*1e3);var r=t.getUTCFullYear()+"-"+goog.string.padNumber(t.getUTCMonth()+1,2)+"-"+goog.string.padNumber(t.getUTCDate(),2)+"T"+goog.string.padNumber(t.getUTCHours(),2)+":"+goog.string.padNumber(t.getUTCMinutes(),2)+":"+goog.string.padNumber(t.getUTCSeconds(),2)+"Z";e.appendChild(ol.xml.DOCUMENT.createTextNode(r))};ol.format.XSD.writeDecimalTextNode=function(e,o){var t=o.toPrecision();e.appendChild(ol.xml.DOCUMENT.createTextNode(t))};ol.format.XSD.writeNonNegativeIntegerTextNode=function(e,o){goog.asserts.assert(o>=0,"value should be more than 0");goog.asserts.assert(o==(o|0),"value should be an integer value");var t=o.toString();e.appendChild(ol.xml.DOCUMENT.createTextNode(t))};ol.format.XSD.writeStringTextNode=function(e,o){e.appendChild(ol.xml.DOCUMENT.createTextNode(o))};goog.provide("ol.format.GML2");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("ol.extent");goog.require("ol.format.GMLBase");goog.require("ol.format.XSD");goog.require("ol.proj");goog.require("ol.xml");ol.format.GML2=function(e){var o=e?e:{};goog.base(this,o);this.FEATURE_COLLECTION_PARSERS[ol.format.GMLBase.GMLNS]["featureMember"]=ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readFeaturesInternal);this.schemaLocation=o.schemaLocation?o.schemaLocation:ol.format.GML2.schemaLocation_};goog.inherits(ol.format.GML2,ol.format.GMLBase);ol.format.GML2.schemaLocation_=ol.format.GMLBase.GMLNS+" http://schemas.opengis.net/gml/2.1.2/feature.xsd";ol.format.GML2.prototype.readFlatCoordinates_=function(e,o){var t=ol.xml.getAllTextContent(e,false).replace(/^\s*|\s*$/g,"");var r=o[0];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=r["srsName"];var n=e.parentNode.getAttribute("srsDimension");var a="enu";if(i){var l=ol.proj.get(i);if(l){a=l.getAxisOrientation()}}var s=t.split(/[\s,]+/);var g=2;if(e.getAttribute("srsDimension")){g=ol.format.XSD.readNonNegativeIntegerString(e.getAttribute("srsDimension"))}else if(e.getAttribute("dimension")){g=ol.format.XSD.readNonNegativeIntegerString(e.getAttribute("dimension"))}else if(n){g=ol.format.XSD.readNonNegativeIntegerString(n)}var p,u,c;var d=[];for(var y=0,h=s.length;y<h;y+=g){p=parseFloat(s[y]);u=parseFloat(s[y+1]);c=g===3?parseFloat(s[y+2]):0;if(a.substr(0,2)==="en"){d.push(p,u,c)}else{d.push(u,p,c)}}return d};ol.format.GML2.prototype.readBox_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Box","localName should be Box");var t=ol.xml.pushParseAndPop([null],this.BOX_PARSERS_,e,o,this);return ol.extent.createOrUpdate(t[1][0],t[1][1],t[1][3],t[1][4])};ol.format.GML2.prototype.innerBoundaryIsParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="innerBoundaryIs","localName should be innerBoundaryIs");var t=ol.xml.pushParseAndPop(undefined,this.RING_PARSERS,e,o,this);if(t){var r=o[o.length-1];goog.asserts.assert(goog.isArray(r),"flatLinearRings should be an array");goog.asserts.assert(r.length>0,"flatLinearRings should have an array length larger than 0");r.push(t)}};ol.format.GML2.prototype.outerBoundaryIsParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="outerBoundaryIs","localName should be outerBoundaryIs");var t=ol.xml.pushParseAndPop(undefined,this.RING_PARSERS,e,o,this);if(t){var r=o[o.length-1];goog.asserts.assert(goog.isArray(r),"flatLinearRings should be an array");goog.asserts.assert(r.length>0,"flatLinearRings should have an array length larger than 0");r[0]=t}};ol.format.GML2.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_={"http://www.opengis.net/gml":{coordinates:ol.xml.makeReplacer(ol.format.GML2.prototype.readFlatCoordinates_)}};ol.format.GML2.prototype.FLAT_LINEAR_RINGS_PARSERS_={"http://www.opengis.net/gml":{innerBoundaryIs:ol.format.GML2.prototype.innerBoundaryIsParser_,outerBoundaryIs:ol.format.GML2.prototype.outerBoundaryIsParser_}};ol.format.GML2.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:ol.xml.makeArrayPusher(ol.format.GML2.prototype.readFlatCoordinates_)}};ol.format.GML2.prototype.GEOMETRY_PARSERS_={"http://www.opengis.net/gml":{Point:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPoint),MultiPoint:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPoint),LineString:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLineString),MultiLineString:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiLineString),LinearRing:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLinearRing),Polygon:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPolygon),MultiPolygon:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPolygon),Box:ol.xml.makeReplacer(ol.format.GML2.prototype.readBox_)}};goog.provide("ol.format.GML");goog.provide("ol.format.GML3");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("ol");goog.require("ol.array");goog.require("ol.Feature");goog.require("ol.extent");goog.require("ol.format.Feature");goog.require("ol.format.GMLBase");goog.require("ol.format.XSD");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.LineString");goog.require("ol.geom.LinearRing");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.object");goog.require("ol.proj");goog.require("ol.xml");ol.format.GML3=function(e){var o=e?e:{};goog.base(this,o);this.surface_=o.surface!==undefined?o.surface:false;this.curve_=o.curve!==undefined?o.curve:false;this.multiCurve_=o.multiCurve!==undefined?o.multiCurve:true;this.multiSurface_=o.multiSurface!==undefined?o.multiSurface:true;this.schemaLocation=o.schemaLocation?o.schemaLocation:ol.format.GML3.schemaLocation_};goog.inherits(ol.format.GML3,ol.format.GMLBase);ol.format.GML3.schemaLocation_=ol.format.GMLBase.GMLNS+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/"+"1.0.0/gmlsf.xsd";ol.format.GML3.prototype.readMultiCurve_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="MultiCurve","localName should be MultiCurve");var t=ol.xml.pushParseAndPop([],this.MULTICURVE_PARSERS_,e,o,this);if(t){var r=new ol.geom.MultiLineString(null);r.setLineStrings(t);return r}else{return undefined}};ol.format.GML3.prototype.readMultiSurface_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="MultiSurface","localName should be MultiSurface");var t=ol.xml.pushParseAndPop([],this.MULTISURFACE_PARSERS_,e,o,this);if(t){var r=new ol.geom.MultiPolygon(null);r.setPolygons(t);return r}else{return undefined}};ol.format.GML3.prototype.curveMemberParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="curveMember"||e.localName=="curveMembers","localName should be curveMember or curveMembers");ol.xml.parseNode(this.CURVEMEMBER_PARSERS_,e,o,this)};ol.format.GML3.prototype.surfaceMemberParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="surfaceMember"||e.localName=="surfaceMembers","localName should be surfaceMember or surfaceMembers");ol.xml.parseNode(this.SURFACEMEMBER_PARSERS_,e,o,this)};ol.format.GML3.prototype.readPatch_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="patches","localName should be patches");return ol.xml.pushParseAndPop([null],this.PATCHES_PARSERS_,e,o,this)};ol.format.GML3.prototype.readSegment_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="segments","localName should be segments");return ol.xml.pushParseAndPop([null],this.SEGMENTS_PARSERS_,e,o,this)};ol.format.GML3.prototype.readPolygonPatch_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"npde.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="PolygonPatch","localName should be PolygonPatch");return ol.xml.pushParseAndPop([null],this.FLAT_LINEAR_RINGS_PARSERS_,e,o,this)};ol.format.GML3.prototype.readLineStringSegment_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="LineStringSegment","localName should be LineStringSegment");return ol.xml.pushParseAndPop([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS_,e,o,this)};ol.format.GML3.prototype.interiorParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="interior","localName should be interior");var t=ol.xml.pushParseAndPop(undefined,this.RING_PARSERS,e,o,this);if(t){var r=o[o.length-1];goog.asserts.assert(goog.isArray(r),"flatLinearRings should be an array");goog.asserts.assert(r.length>0,"flatLinearRings should have an array length of 1 or more");r.push(t)}};ol.format.GML3.prototype.exteriorParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="exterior","localName should be exterior");var t=ol.xml.pushParseAndPop(undefined,this.RING_PARSERS,e,o,this);if(t){var r=o[o.length-1];goog.asserts.assert(goog.isArray(r),"flatLinearRings should be an array");goog.asserts.assert(r.length>0,"flatLinearRings should have an array length of 1 or more");r[0]=t}};ol.format.GML3.prototype.readSurface_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Surface","localName should be Surface");var t=ol.xml.pushParseAndPop([null],this.SURFACE_PARSERS_,e,o,this);if(t&&t[0]){var r=new ol.geom.Polygon(null);var i=t[0];var n=[i.length];var a,l;for(a=1,l=t.length;a<l;++a){ol.array.extend(i,t[a]);n.push(i.length)}r.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,i,n);return r}else{return undefined}};ol.format.GML3.prototype.readCurve_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Curve","localName should be Curve");var t=ol.xml.pushParseAndPop([null],this.CURVE_PARSERS_,e,o,this);if(t){var r=new ol.geom.LineString(null);r.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,t);return r}else{return undefined}};ol.format.GML3.prototype.readEnvelope_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Envelope","localName should be Envelope");var t=ol.xml.pushParseAndPop([null],this.ENVELOPE_PARSERS_,e,o,this);return ol.extent.createOrUpdate(t[1][0],t[1][1],t[2][0],t[2][1])};ol.format.GML3.prototype.readFlatPos_=function(e,o){var t=ol.xml.getAllTextContent(e,false);var r=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/;var i=[];var n;while(n=r.exec(t)){i.push(parseFloat(n[1]));t=t.substr(n[0].length)}if(t!==""){return undefined}var a=o[0];goog.asserts.assert(goog.isObject(a),"context should be an Object");var l=a["srsName"];var s="enu";if(l){var g=ol.proj.get(l);s=g.getAxisOrientation()}if(s==="neu"){var p,u;for(p=0,u=i.length;p<u;p+=3){var c=i[p];var d=i[p+1];i[p]=d;i[p+1]=c}}var y=i.length;if(y==2){i.push(0)}if(y===0){return undefined}return i};ol.format.GML3.prototype.readFlatPosList_=function(e,o){var t=ol.xml.getAllTextContent(e,false).replace(/^\s*|\s*$/g,"");var r=o[0];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=r["srsName"];var n=e.parentNode.getAttribute("srsDimension");var a="enu";if(i){var l=ol.proj.get(i);a=l.getAxisOrientation()}var s=t.split(/\s+/);var g=2;if(e.getAttribute("srsDimension")){g=ol.format.XSD.readNonNegativeIntegerString(e.getAttribute("srsDimension"))}else if(e.getAttribute("dimension")){g=ol.format.XSD.readNonNegativeIntegerString(e.getAttribute("dimension"))}else if(n){g=ol.format.XSD.readNonNegativeIntegerString(n)}var p,u,c;var d=[];for(var y=0,h=s.length;y<h;y+=g){p=parseFloat(s[y]);u=parseFloat(s[y+1]);c=g===3?parseFloat(s[y+2]):0;if(a.substr(0,2)==="en"){d.push(p,u,c)}else{d.push(u,p,c)}}return d};ol.format.GML3.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_={"http://www.opengis.net/gml":{pos:ol.xml.makeReplacer(ol.format.GML3.prototype.readFlatPos_),posList:ol.xml.makeReplacer(ol.format.GML3.prototype.readFlatPosList_)}};ol.format.GML3.prototype.FLAT_LINEAR_RINGS_PARSERS_={"http://www.opengis.net/gml":{interior:ol.format.GML3.prototype.interiorParser_,exterior:ol.format.GML3.prototype.exteriorParser_}};ol.format.GML3.prototype.GEOMETRY_PARSERS_={"http://www.opengis.net/gml":{Point:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPoint),MultiPoint:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPoint),LineString:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLineString),MultiLineString:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiLineString),LinearRing:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLinearRing),Polygon:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPolygon),MultiPolygon:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPolygon),Surface:ol.xml.makeReplacer(ol.format.GML3.prototype.readSurface_),MultiSurface:ol.xml.makeReplacer(ol.format.GML3.prototype.readMultiSurface_),Curve:ol.xml.makeReplacer(ol.format.GML3.prototype.readCurve_),MultiCurve:ol.xml.makeReplacer(ol.format.GML3.prototype.readMultiCurve_),Envelope:ol.xml.makeReplacer(ol.format.GML3.prototype.readEnvelope_)}};ol.format.GML3.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml":{curveMember:ol.xml.makeArrayPusher(ol.format.GML3.prototype.curveMemberParser_),curveMembers:ol.xml.makeArrayPusher(ol.format.GML3.prototype.curveMemberParser_)}};ol.format.GML3.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml":{surfaceMember:ol.xml.makeArrayPusher(ol.format.GML3.prototype.surfaceMemberParser_),surfaceMembers:ol.xml.makeArrayPusher(ol.format.GML3.prototype.surfaceMemberParser_)}};ol.format.GML3.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readLineString),Curve:ol.xml.makeArrayPusher(ol.format.GML3.prototype.readCurve_)}};ol.format.GML3.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readPolygon),Surface:ol.xml.makeArrayPusher(ol.format.GML3.prototype.readSurface_)}};ol.format.GML3.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml":{patches:ol.xml.makeReplacer(ol.format.GML3.prototype.readPatch_)}};ol.format.GML3.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml":{segments:ol.xml.makeReplacer(ol.format.GML3.prototype.readSegment_)}};ol.format.GML3.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml":{lowerCorner:ol.xml.makeArrayPusher(ol.format.GML3.prototype.readFlatPosList_),upperCorner:ol.xml.makeArrayPusher(ol.format.GML3.prototype.readFlatPosList_)}};ol.format.GML3.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml":{PolygonPatch:ol.xml.makeReplacer(ol.format.GML3.prototype.readPolygonPatch_)}};ol.format.GML3.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml":{LineStringSegment:ol.xml.makeReplacer(ol.format.GML3.prototype.readLineStringSegment_)}};ol.format.GML3.prototype.writePos_=function(e,o,t){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=r["srsName"];var n="enu";if(i){n=ol.proj.get(i).getAxisOrientation()}var a=o.getCoordinates();var l;if(n.substr(0,2)==="en"){l=a[0]+" "+a[1]}else{l=a[1]+" "+a[0]}ol.format.XSD.writeStringTextNode(e,l)};ol.format.GML3.prototype.getCoords_=function(e,o){var t="enu";if(o){t=ol.proj.get(o).getAxisOrientation()}return t.substr(0,2)==="en"?e[0]+" "+e[1]:e[1]+" "+e[0]};ol.format.GML3.prototype.writePosList_=function(e,o,t){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=r["srsName"];var n=o.getCoordinates();var a=n.length;var l=new Array(a);var s;for(var g=0;g<a;++g){s=n[g];l[g]=this.getCoords_(s,i)}ol.format.XSD.writeStringTextNode(e,l.join(" "))};ol.format.GML3.prototype.writePoint_=function(e,o,t){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=r["srsName"];if(i){e.setAttribute("srsName",i)}var n=ol.xml.createElementNS(e.namespaceURI,"pos");e.appendChild(n);this.writePos_(n,o,t)};ol.format.GML3.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),upperCorner:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)}};ol.format.GML3.prototype.writeEnvelope=function(e,o,t){goog.asserts.assert(o.length==4,"extent should have 4 items");var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=r["srsName"];if(i){e.setAttribute("srsName",i)}var n=["lowerCorner","upperCorner"];var a=[o[0]+" "+o[1],o[2]+" "+o[3]];ol.xml.pushSerializeAndPop({node:e},ol.format.GML3.ENVELOPE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,a,t,n,this)};ol.format.GML3.prototype.writeLinearRing_=function(e,o,t){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=r["srsName"];if(i){e.setAttribute("srsName",i)}var n=ol.xml.createElementNS(e.namespaceURI,"posList");e.appendChild(n);this.writePosList_(n,o,t)};ol.format.GML3.prototype.RING_NODE_FACTORY_=function(e,o,t){var r=o[o.length-1];var i=r.node;goog.asserts.assert(goog.isObject(r),"context should be an Object");var n=r["exteriorWritten"];if(n===undefined){r["exteriorWritten"]=true}return ol.xml.createElementNS(i.namespaceURI,n!==undefined?"interior":"exterior")};ol.format.GML3.prototype.writeSurfaceOrPolygon_=function(e,o,t){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=r["srsName"];if(e.nodeName!=="PolygonPatch"&&i){e.setAttribute("srsName",i)}if(e.nodeName==="Polygon"||e.nodeName==="PolygonPatch"){var n=o.getLinearRings();ol.xml.pushSerializeAndPop({node:e,srsName:i},ol.format.GML3.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,n,t,undefined,this)}else if(e.nodeName==="Surface"){var a=ol.xml.createElementNS(e.namespaceURI,"patches");e.appendChild(a);this.writeSurfacePatches_(a,o,t)}};ol.format.GML3.prototype.writeCurveOrLineString_=function(e,o,t){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=r["srsName"];if(e.nodeName!=="LineStringSegment"&&i){e.setAttribute("srsName",i)}if(e.nodeName==="LineString"||e.nodeName==="LineStringSegment"){var n=ol.xml.createElementNS(e.namespaceURI,"posList");e.appendChild(n);this.writePosList_(n,o,t)}else if(e.nodeName==="Curve"){var a=ol.xml.createElementNS(e.namespaceURI,"segments");e.appendChild(a);this.writeCurveSegments_(a,o,t)}};ol.format.GML3.prototype.writeMultiSurfaceOrPolygon_=function(e,o,t){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=r["srsName"];var n=r["surface"];if(i){e.setAttribute("srsName",i)}var a=o.getPolygons();ol.xml.pushSerializeAndPop({node:e,srsName:i,surface:n},ol.format.GML3.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,t,undefined,this)};ol.format.GML3.prototype.writeMultiPoint_=function(e,o,t){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=r["srsName"];if(i){e.setAttribute("srsName",i)}var n=o.getPoints();ol.xml.pushSerializeAndPop({node:e,srsName:i},ol.format.GML3.POINTMEMBER_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("pointMember"),n,t,undefined,this)};ol.format.GML3.prototype.writeMultiCurveOrLineString_=function(e,o,t){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=r["srsName"];var n=r["curve"];if(i){e.setAttribute("srsName",i)}var a=o.getLineStrings();ol.xml.pushSerializeAndPop({node:e,srsName:i,curve:n},ol.format.GML3.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,t,undefined,this)};ol.format.GML3.prototype.writeRing_=function(e,o,t){var r=ol.xml.createElementNS(e.namespaceURI,"LinearRing");e.appendChild(r);this.writeLinearRing_(r,o,t)};ol.format.GML3.prototype.writeSurfaceOrPolygonMember_=function(e,o,t){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=this.GEOMETRY_NODE_FACTORY_(o,t);if(i){e.appendChild(i);this.writeSurfaceOrPolygon_(i,o,t)}};ol.format.GML3.prototype.writePointMember_=function(e,o,t){var r=ol.xml.createElementNS(e.namespaceURI,"Point");e.appendChild(r);this.writePoint_(r,o,t)};ol.format.GML3.prototype.writeLineStringOrCurveMember_=function(e,o,t){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=this.GEOMETRY_NODE_FACTORY_(o,t);if(i){e.appendChild(i);this.writeCurveOrLineString_(i,o,t)}};ol.format.GML3.prototype.writeSurfacePatches_=function(e,o,t){var r=ol.xml.createElementNS(e.namespaceURI,"PolygonPatch");e.appendChild(r);this.writeSurfaceOrPolygon_(r,o,t)};ol.format.GML3.prototype.writeCurveSegments_=function(e,o,t){var r=ol.xml.createElementNS(e.namespaceURI,"LineStringSegment");e.appendChild(r);this.writeCurveOrLineString_(r,o,t)};ol.format.GML3.prototype.writeGeometryElement=function(e,o,t){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=ol.object.assign({},r);i.node=e;var n;if(goog.isArray(o)){if(r.dataProjection){n=ol.proj.transformExtent(o,r.featureProjection,r.dataProjection)}else{n=o}}else{goog.asserts.assertInstanceof(o,ol.geom.Geometry,"geometry should be an ol.geom.Geometry");n=ol.format.Feature.transformWithOptions(o,true,r)}ol.xml.pushSerializeAndPop(i,ol.format.GML3.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[n],t,undefined,this)};ol.format.GML3.prototype.writeFeatureElement=function(e,o,t){var r=o.getId();if(r){e.setAttribute("fid",r)}var i=t[t.length-1];goog.asserts.assert(goog.isObject(i),"context should be an Object");var n=i["featureNS"];var a=o.getGeometryName();if(!i.serializers){i.serializers={};i.serializers[n]={}}var l=o.getProperties();var s=[],g=[];for(var p in l){var u=l[p];if(u!==null){
s.push(p);g.push(u);if(p==a||u instanceof ol.geom.Geometry){if(!(p in i.serializers[n])){i.serializers[n][p]=ol.xml.makeChildAppender(this.writeGeometryElement,this)}}else{if(!(p in i.serializers[n])){i.serializers[n][p]=ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)}}}}var c=ol.object.assign({},i);c.node=e;ol.xml.pushSerializeAndPop(c,i.serializers,ol.xml.makeSimpleNodeFactory(undefined,n),g,t,s)};ol.format.GML3.prototype.writeFeatureMembers_=function(e,o,t){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=r["featureType"];var n=r["featureNS"];var a={};a[n]={};a[n][i]=ol.xml.makeChildAppender(this.writeFeatureElement,this);var l=ol.object.assign({},r);l.node=e;ol.xml.pushSerializeAndPop(l,a,ol.xml.makeSimpleNodeFactory(i,n),o,t)};ol.format.GML3.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygonMember_),polygonMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygonMember_)}};ol.format.GML3.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writePointMember_)}};ol.format.GML3.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeLineStringOrCurveMember_),curveMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeLineStringOrCurveMember_)}};ol.format.GML3.RING_SERIALIZERS_={"http://www.opengis.net/gml":{exterior:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeRing_),interior:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeRing_)}};ol.format.GML3.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeCurveOrLineString_),MultiCurve:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiCurveOrLineString_),Point:ol.xml.makeChildAppender(ol.format.GML3.prototype.writePoint_),MultiPoint:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiPoint_),LineString:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeCurveOrLineString_),MultiLineString:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiCurveOrLineString_),LinearRing:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeLinearRing_),Polygon:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygon_),MultiPolygon:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiSurfaceOrPolygon_),Surface:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygon_),MultiSurface:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiSurfaceOrPolygon_),Envelope:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeEnvelope)}};ol.format.GML3.MULTIGEOMETRY_TO_MEMBER_NODENAME_={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};ol.format.GML3.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(e,o,t){var r=o[o.length-1].node;goog.asserts.assert(ol.xml.isNode(r),"parentNode should be a node");return ol.xml.createElementNS("http://www.opengis.net/gml",ol.format.GML3.MULTIGEOMETRY_TO_MEMBER_NODENAME_[r.nodeName])};ol.format.GML3.prototype.GEOMETRY_NODE_FACTORY_=function(e,o,t){var r=o[o.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=r["multiSurface"];var n=r["surface"];var a=r["curve"];var l=r["multiCurve"];var s=o[o.length-1].node;goog.asserts.assert(ol.xml.isNode(s),"parentNode should be a node");var g;if(!goog.isArray(e)){goog.asserts.assertInstanceof(e,ol.geom.Geometry,"value should be an ol.geom.Geometry");g=e.getType();if(g==="MultiPolygon"&&i===true){g="MultiSurface"}else if(g==="Polygon"&&n===true){g="Surface"}else if(g==="LineString"&&a===true){g="Curve"}else if(g==="MultiLineString"&&l===true){g="MultiCurve"}}else{g="Envelope"}return ol.xml.createElementNS("http://www.opengis.net/gml",g)};ol.format.GML3.prototype.writeGeometryNode=function(e,o){o=this.adaptOptions(o);var t=ol.xml.createElementNS("http://www.opengis.net/gml","geom");var r={node:t,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};if(o){ol.object.assign(r,o)}this.writeGeometryElement(t,e,[r]);return t};ol.format.GML3.prototype.writeFeatures;ol.format.GML3.prototype.writeFeaturesNode=function(e,o){o=this.adaptOptions(o);var t=ol.xml.createElementNS("http://www.opengis.net/gml","featureMembers");ol.xml.setAttributeNS(t,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation);var r={srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};if(o){ol.object.assign(r,o)}this.writeFeatureMembers_(t,e,[r]);return t};ol.format.GML=ol.format.GML3;ol.format.GML.prototype.writeFeatures;ol.format.GML.prototype.writeFeaturesNode;goog.provide("ol.format.GPX");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("ol.Feature");goog.require("ol.array");goog.require("ol.format.Feature");goog.require("ol.format.XMLFeature");goog.require("ol.format.XSD");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.LineString");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.Point");goog.require("ol.proj");goog.require("ol.xml");ol.format.GPX=function(e){var o=e?e:{};goog.base(this);this.defaultDataProjection=ol.proj.get("EPSG:4326");this.readExtensions_=o.readExtensions};goog.inherits(ol.format.GPX,ol.format.XMLFeature);ol.format.GPX.NAMESPACE_URIS_=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"];ol.format.GPX.appendCoordinate_=function(e,o,t){goog.asserts.assert(o.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");e.push(parseFloat(o.getAttribute("lon")),parseFloat(o.getAttribute("lat")));if("ele"in t){e.push(t["ele"]);delete t["ele"]}else{e.push(0)}if("time"in t){e.push(t["time"]);delete t["time"]}else{e.push(0)}return e};ol.format.GPX.parseLink_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="link","localName should be link");var t=o[o.length-1];var r=e.getAttribute("href");if(r!==null){t["link"]=r}ol.xml.parseNode(ol.format.GPX.LINK_PARSERS_,e,o)};ol.format.GPX.parseExtensions_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="extensions","localName should be extensions");var t=o[o.length-1];t["extensionsNode_"]=e};ol.format.GPX.parseRtePt_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="rtept","localName should be rtept");var t=ol.xml.pushParseAndPop({},ol.format.GPX.RTEPT_PARSERS_,e,o);if(t){var r=o[o.length-1];var i=r["flatCoordinates"];ol.format.GPX.appendCoordinate_(i,e,t)}};ol.format.GPX.parseTrkPt_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="trkpt","localName should be trkpt");var t=ol.xml.pushParseAndPop({},ol.format.GPX.TRKPT_PARSERS_,e,o);if(t){var r=o[o.length-1];var i=r["flatCoordinates"];ol.format.GPX.appendCoordinate_(i,e,t)}};ol.format.GPX.parseTrkSeg_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="trkseg","localName should be trkseg");var t=o[o.length-1];ol.xml.parseNode(ol.format.GPX.TRKSEG_PARSERS_,e,o);var r=t["flatCoordinates"];var i=t["ends"];i.push(r.length)};ol.format.GPX.readRte_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="rte","localName should be rte");var t=o[0];var r=ol.xml.pushParseAndPop({flatCoordinates:[]},ol.format.GPX.RTE_PARSERS_,e,o);if(!r){return undefined}var i=r["flatCoordinates"];delete r["flatCoordinates"];var n=new ol.geom.LineString(null);n.setFlatCoordinates(ol.geom.GeometryLayout.XYZM,i);ol.format.Feature.transformWithOptions(n,false,t);var a=new ol.Feature(n);a.setProperties(r);return a};ol.format.GPX.readTrk_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="trk","localName should be trk");var t=o[0];var r=ol.xml.pushParseAndPop({flatCoordinates:[],ends:[]},ol.format.GPX.TRK_PARSERS_,e,o);if(!r){return undefined}var i=r["flatCoordinates"];delete r["flatCoordinates"];var n=r["ends"];delete r["ends"];var a=new ol.geom.MultiLineString(null);a.setFlatCoordinates(ol.geom.GeometryLayout.XYZM,i,n);ol.format.Feature.transformWithOptions(a,false,t);var l=new ol.Feature(a);l.setProperties(r);return l};ol.format.GPX.readWpt_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="wpt","localName should be wpt");var t=o[0];var r=ol.xml.pushParseAndPop({},ol.format.GPX.WPT_PARSERS_,e,o);if(!r){return undefined}var i=ol.format.GPX.appendCoordinate_([],e,r);var n=new ol.geom.Point(i,ol.geom.GeometryLayout.XYZM);ol.format.Feature.transformWithOptions(n,false,t);var a=new ol.Feature(n);a.setProperties(r);return a};ol.format.GPX.FEATURE_READER_={rte:ol.format.GPX.readRte_,trk:ol.format.GPX.readTrk_,wpt:ol.format.GPX.readWpt_};ol.format.GPX.GPX_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{rte:ol.xml.makeArrayPusher(ol.format.GPX.readRte_),trk:ol.xml.makeArrayPusher(ol.format.GPX.readTrk_),wpt:ol.xml.makeArrayPusher(ol.format.GPX.readWpt_)});ol.format.GPX.LINK_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{text:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString,"linkText"),type:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString,"linkType")});ol.format.GPX.RTE_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),cmt:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),desc:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),src:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),link:ol.format.GPX.parseLink_,number:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),extensions:ol.format.GPX.parseExtensions_,type:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),rtept:ol.format.GPX.parseRtePt_});ol.format.GPX.RTEPT_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{ele:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),time:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDateTime)});ol.format.GPX.TRK_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),cmt:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),desc:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),src:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),link:ol.format.GPX.parseLink_,number:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),type:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),extensions:ol.format.GPX.parseExtensions_,trkseg:ol.format.GPX.parseTrkSeg_});ol.format.GPX.TRKSEG_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{trkpt:ol.format.GPX.parseTrkPt_});ol.format.GPX.TRKPT_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{ele:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),time:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDateTime)});ol.format.GPX.WPT_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{ele:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),time:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDateTime),magvar:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),geoidheight:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),cmt:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),desc:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),src:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),link:ol.format.GPX.parseLink_,sym:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),type:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),fix:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),sat:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),hdop:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),vdop:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),pdop:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),ageofdgpsdata:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),dgpsid:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),extensions:ol.format.GPX.parseExtensions_});ol.format.GPX.prototype.handleReadExtensions_=function(e){if(!e){e=[]}for(var o=0,t=e.length;o<t;++o){var r=e[o];if(this.readExtensions_){var i=r.get("extensionsNode_")||null;this.readExtensions_(r,i)}r.set("extensionsNode_",undefined)}};ol.format.GPX.prototype.readFeature;ol.format.GPX.prototype.readFeatureFromNode=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");if(!ol.array.includes(ol.format.GPX.NAMESPACE_URIS_,e.namespaceURI)){return null}var t=ol.format.GPX.FEATURE_READER_[e.localName];if(!t){return null}var r=t(e,[this.getReadOptions(e,o)]);if(!r){return null}this.handleReadExtensions_([r]);return r};ol.format.GPX.prototype.readFeatures;ol.format.GPX.prototype.readFeaturesFromNode=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");if(!ol.array.includes(ol.format.GPX.NAMESPACE_URIS_,e.namespaceURI)){return[]}if(e.localName=="gpx"){var t=ol.xml.pushParseAndPop([],ol.format.GPX.GPX_PARSERS_,e,[this.getReadOptions(e,o)]);if(t){this.handleReadExtensions_(t);return t}else{return[]}}return[]};ol.format.GPX.prototype.readProjection;ol.format.GPX.writeLink_=function(e,o,t){e.setAttribute("href",o);var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=r["properties"];var n=[i["linkText"],i["linkType"]];ol.xml.pushSerializeAndPop({node:e},ol.format.GPX.LINK_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,n,t,ol.format.GPX.LINK_SEQUENCE_)};ol.format.GPX.writeWptType_=function(e,o,t){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=r.node;goog.asserts.assert(ol.xml.isNode(i),"parentNode should be an XML node");var n=i.namespaceURI;var a=r["properties"];ol.xml.setAttributeNS(e,null,"lat",o[1]);ol.xml.setAttributeNS(e,null,"lon",o[0]);var l=r["geometryLayout"];switch(l){case ol.geom.GeometryLayout.XYZM:if(o[3]!==0){a["time"]=o[3]}case ol.geom.GeometryLayout.XYZ:if(o[2]!==0){a["ele"]=o[2]}break;case ol.geom.GeometryLayout.XYM:if(o[2]!==0){a["time"]=o[2]}break;default:}var s=ol.format.GPX.WPT_TYPE_SEQUENCE_[n];var g=ol.xml.makeSequence(a,s);ol.xml.pushSerializeAndPop({node:e,properties:a},ol.format.GPX.WPT_TYPE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,g,t,s)};ol.format.GPX.writeRte_=function(e,o,t){var r=t[0];var i=o.getProperties();var n={node:e,properties:i};var a=o.getGeometry();if(a){goog.asserts.assertInstanceof(a,ol.geom.LineString,"geometry should be an ol.geom.LineString");a=ol.format.Feature.transformWithOptions(a,true,r);n["geometryLayout"]=a.getLayout();i["rtept"]=a.getCoordinates()}var l=t[t.length-1].node;var s=ol.format.GPX.RTE_SEQUENCE_[l.namespaceURI];var g=ol.xml.makeSequence(i,s);ol.xml.pushSerializeAndPop(n,ol.format.GPX.RTE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,g,t,s)};ol.format.GPX.writeTrk_=function(e,o,t){var r=t[0];var i=o.getProperties();var n={node:e,properties:i};var a=o.getGeometry();if(a){goog.asserts.assertInstanceof(a,ol.geom.MultiLineString,"geometry should be an ol.geom.MultiLineString");a=ol.format.Feature.transformWithOptions(a,true,r);i["trkseg"]=a.getLineStrings()}var l=t[t.length-1].node;var s=ol.format.GPX.TRK_SEQUENCE_[l.namespaceURI];var g=ol.xml.makeSequence(i,s);ol.xml.pushSerializeAndPop(n,ol.format.GPX.TRK_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,g,t,s)};ol.format.GPX.writeTrkSeg_=function(e,o,t){var r={node:e,geometryLayout:o.getLayout(),properties:{}};ol.xml.pushSerializeAndPop(r,ol.format.GPX.TRKSEG_SERIALIZERS_,ol.format.GPX.TRKSEG_NODE_FACTORY_,o.getCoordinates(),t)};ol.format.GPX.writeWpt_=function(e,o,t){var r=t[0];var i=t[t.length-1];goog.asserts.assert(goog.isObject(i),"context should be an Object");i["properties"]=o.getProperties();var n=o.getGeometry();if(n){goog.asserts.assertInstanceof(n,ol.geom.Point,"geometry should be an ol.geom.Point");n=ol.format.Feature.transformWithOptions(n,true,r);i["geometryLayout"]=n.getLayout();ol.format.GPX.writeWptType_(e,n.getCoordinates(),t)}};ol.format.GPX.LINK_SEQUENCE_=["text","type"];ol.format.GPX.LINK_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{text:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),type:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)});ol.format.GPX.RTE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,["name","cmt","desc","src","link","number","type","rtept"]);ol.format.GPX.RTE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{name:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),cmt:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),desc:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),src:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),link:ol.xml.makeChildAppender(ol.format.GPX.writeLink_),number:ol.xml.makeChildAppender(ol.format.XSD.writeNonNegativeIntegerTextNode),type:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),rtept:ol.xml.makeArraySerializer(ol.xml.makeChildAppender(ol.format.GPX.writeWptType_))});ol.format.GPX.TRK_SEQUENCE_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,["name","cmt","desc","src","link","number","type","trkseg"]);ol.format.GPX.TRK_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{name:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),cmt:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),desc:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),src:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),link:ol.xml.makeChildAppender(ol.format.GPX.writeLink_),number:ol.xml.makeChildAppender(ol.format.XSD.writeNonNegativeIntegerTextNode),type:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),trkseg:ol.xml.makeArraySerializer(ol.xml.makeChildAppender(ol.format.GPX.writeTrkSeg_))});ol.format.GPX.TRKSEG_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("trkpt");ol.format.GPX.TRKSEG_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{trkpt:ol.xml.makeChildAppender(ol.format.GPX.writeWptType_)});ol.format.GPX.WPT_TYPE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]);ol.format.GPX.WPT_TYPE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{ele:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),time:ol.xml.makeChildAppender(ol.format.XSD.writeDateTimeTextNode),magvar:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),geoidheight:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),name:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),cmt:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),desc:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),src:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),link:ol.xml.makeChildAppender(ol.format.GPX.writeLink_),sym:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),type:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),fix:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),sat:ol.xml.makeChildAppender(ol.format.XSD.writeNonNegativeIntegerTextNode),hdop:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),vdop:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),pdop:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),ageofdgpsdata:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),dgpsid:ol.xml.makeChildAppender(ol.format.XSD.writeNonNegativeIntegerTextNode)});ol.format.GPX.GEOMETRY_TYPE_TO_NODENAME_={Point:"wpt",LineString:"rte",MultiLineString:"trk"};ol.format.GPX.GPX_NODE_FACTORY_=function(e,o,t){goog.asserts.assertInstanceof(e,ol.Feature,"value should be an ol.Feature");var r=e.getGeometry();if(r){var i=ol.format.GPX.GEOMETRY_TYPE_TO_NODENAME_[r.getType()];if(i){var n=o[o.length-1].node;goog.asserts.assert(ol.xml.isNode(n),"parentNode should be an XML node");return ol.xml.createElementNS(n.namespaceURI,i)}}};ol.format.GPX.GPX_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{rte:ol.xml.makeChildAppender(ol.format.GPX.writeRte_),trk:ol.xml.makeChildAppender(ol.format.GPX.writeTrk_),wpt:ol.xml.makeChildAppender(ol.format.GPX.writeWpt_)});ol.format.GPX.prototype.writeFeatures;ol.format.GPX.prototype.writeFeaturesNode=function(e,o){o=this.adaptOptions(o);var t=ol.xml.createElementNS("http://www.topografix.com/GPX/1/1","gpx");ol.xml.pushSerializeAndPop({node:t},ol.format.GPX.GPX_SERIALIZERS_,ol.format.GPX.GPX_NODE_FACTORY_,e,[o]);return t};goog.provide("ol.format.TextFeature");goog.require("goog.asserts");goog.require("ol.format.Feature");goog.require("ol.format.FormatType");ol.format.TextFeature=function(){goog.base(this)};goog.inherits(ol.format.TextFeature,ol.format.Feature);ol.format.TextFeature.prototype.getText_=function(e){if(typeof e==="string"){return e}else{goog.asserts.fail();return""}};ol.format.TextFeature.prototype.getType=function(){return ol.format.FormatType.TEXT};ol.format.TextFeature.prototype.readFeature=function(e,o){return this.readFeatureFromText(this.getText_(e),this.adaptOptions(o))};ol.format.TextFeature.prototype.readFeatureFromText=goog.abstractMethod;ol.format.TextFeature.prototype.readFeatures=function(e,o){return this.readFeaturesFromText(this.getText_(e),this.adaptOptions(o))};ol.format.TextFeature.prototype.readFeaturesFromText=goog.abstractMethod;ol.format.TextFeature.prototype.readGeometry=function(e,o){return this.readGeometryFromText(this.getText_(e),this.adaptOptions(o))};ol.format.TextFeature.prototype.readGeometryFromText=goog.abstractMethod;ol.format.TextFeature.prototype.readProjection=function(e){return this.readProjectionFromText(this.getText_(e))};ol.format.TextFeature.prototype.readProjectionFromText=function(e){return this.defaultDataProjection};ol.format.TextFeature.prototype.writeFeature=function(e,o){return this.writeFeatureText(e,this.adaptOptions(o))};ol.format.TextFeature.prototype.writeFeatureText=goog.abstractMethod;ol.format.TextFeature.prototype.writeFeatures=function(e,o){return this.writeFeaturesText(e,this.adaptOptions(o))};ol.format.TextFeature.prototype.writeFeaturesText=goog.abstractMethod;ol.format.TextFeature.prototype.writeGeometry=function(e,o){return this.writeGeometryText(e,this.adaptOptions(o))};ol.format.TextFeature.prototype.writeGeometryText=goog.abstractMethod;goog.provide("ol.format.IGC");goog.provide("ol.format.IGCZ");goog.require("goog.asserts");goog.require("ol.Feature");goog.require("ol.format.Feature");goog.require("ol.format.TextFeature");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.LineString");goog.require("ol.proj");ol.format.IGCZ={BAROMETRIC:"barometric",GPS:"gps",NONE:"none"};ol.format.IGC=function(e){var o=e?e:{};goog.base(this);this.defaultDataProjection=ol.proj.get("EPSG:4326");this.altitudeMode_=o.altitudeMode?o.altitudeMode:ol.format.IGCZ.NONE};goog.inherits(ol.format.IGC,ol.format.TextFeature);ol.format.IGC.EXTENSIONS_=[".igc"];ol.format.IGC.B_RECORD_RE_=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/;ol.format.IGC.H_RECORD_RE_=/^H.([A-Z]{3}).*?:(.*)/;ol.format.IGC.HFDTE_RECORD_RE_=/^HFDTE(\d{2})(\d{2})(\d{2})/;ol.format.IGC.NEWLINE_RE_=/\r\n|\r|\n/;ol.format.IGC.prototype.getExtensions=function(){return ol.format.IGC.EXTENSIONS_};ol.format.IGC.prototype.readFeature;ol.format.IGC.prototype.readFeatureFromText=function(e,o){var t=this.altitudeMode_;var r=e.split(ol.format.IGC.NEWLINE_RE_);var i={};var n=[];var a=2e3;var l=0;var s=1;var g,p;for(g=0,p=r.length;g<p;++g){var u=r[g];var c;if(u.charAt(0)=="B"){c=ol.format.IGC.B_RECORD_RE_.exec(u);if(c){var d=parseInt(c[1],10);var y=parseInt(c[2],10);var h=parseInt(c[3],10);var m=parseInt(c[4],10)+parseInt(c[5],10)/6e4;if(c[6]=="S"){m=-m}var f=parseInt(c[7],10)+parseInt(c[8],10)/6e4;if(c[9]=="W"){f=-f}n.push(f,m);if(t!=ol.format.IGCZ.NONE){var v;if(t==ol.format.IGCZ.GPS){v=parseInt(c[11],10)}else if(t==ol.format.IGCZ.BAROMETRIC){v=parseInt(c[12],10)}else{goog.asserts.fail();v=0}n.push(v)}var _=Date.UTC(a,l,s,d,y,h);n.push(_/1e3)}}else if(u.charAt(0)=="H"){c=ol.format.IGC.HFDTE_RECORD_RE_.exec(u);if(c){s=parseInt(c[1],10);l=parseInt(c[2],10)-1;a=2e3+parseInt(c[3],10)}else{c=ol.format.IGC.H_RECORD_RE_.exec(u);if(c){i[c[1]]=c[2].trim();c=ol.format.IGC.HFDTE_RECORD_RE_.exec(u)}}}}if(n.length===0){return null}var E=new ol.geom.LineString(null);var S=t==ol.format.IGCZ.NONE?ol.geom.GeometryLayout.XYM:ol.geom.GeometryLayout.XYZM;E.setFlatCoordinates(S,n);var T=new ol.Feature(ol.format.Feature.transformWithOptions(E,false,o));T.setProperties(i);return T};ol.format.IGC.prototype.readFeatures;ol.format.IGC.prototype.readFeaturesFromText=function(e,o){var t=this.readFeatureFromText(e,o);if(t){return[t]}else{return[]}};ol.format.IGC.prototype.readProjection;goog.provide("goog.uri.utils");goog.provide("goog.uri.utils.ComponentIndex");goog.provide("goog.uri.utils.QueryArray");goog.provide("goog.uri.utils.QueryValue");goog.provide("goog.uri.utils.StandardQueryParam");goog.require("goog.asserts");goog.require("goog.string");goog.uri.utils.CharCode_={AMPERSAND:38,EQUAL:61,HASH:35,QUESTION:63};goog.uri.utils.buildFromEncodedParts=function(e,o,t,r,i,n,a){var l="";if(e){l+=e+":"}if(t){l+="//";if(o){l+=o+"@"}l+=t;if(r){l+=":"+r}}if(i){l+=i}if(n){l+="?"+n}if(a){l+="#"+a}return l};goog.uri.utils.splitRe_=new RegExp("^"+"(?:"+"([^:/?#.]+)"+":)?"+"(?://"+"(?:([^/?#]*)@)?"+"([^/#?]*?)"+"(?::([0-9]+))?"+"(?=[/#?]|$)"+")?"+"([^?#]+)?"+"(?:\\?([^#]*))?"+"(?:#(.*))?"+"$");goog.uri.utils.ComponentIndex={SCHEME:1,USER_INFO:2,DOMAIN:3,PORT:4,PATH:5,QUERY_DATA:6,FRAGMENT:7};goog.uri.utils.split=function(e){return e.match(goog.uri.utils.splitRe_)};goog.uri.utils.decodeIfPossible_=function(e,o){if(!e){return e}return o?decodeURI(e):decodeURIComponent(e)};goog.uri.utils.getComponentByIndex_=function(e,o){return goog.uri.utils.split(o)[e]||null};goog.uri.utils.getScheme=function(e){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.SCHEME,e)};goog.uri.utils.getEffectiveScheme=function(e){var o=goog.uri.utils.getScheme(e);if(!o&&goog.global.self&&goog.global.self.location){var t=goog.global.self.location.protocol;o=t.substr(0,t.length-1)}return o?o.toLowerCase():""};goog.uri.utils.getUserInfoEncoded=function(e){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.USER_INFO,e)};goog.uri.utils.getUserInfo=function(e){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getUserInfoEncoded(e))};goog.uri.utils.getDomainEncoded=function(e){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.DOMAIN,e)};goog.uri.utils.getDomain=function(e){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getDomainEncoded(e),true)};goog.uri.utils.getPort=function(e){return Number(goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.PORT,e))||null};goog.uri.utils.getPathEncoded=function(e){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.PATH,e)};goog.uri.utils.getPath=function(e){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getPathEncoded(e),true)};goog.uri.utils.getQueryData=function(e){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.QUERY_DATA,e)};goog.uri.utils.getFragmentEncoded=function(e){var o=e.indexOf("#");return o<0?null:e.substr(o+1)};goog.uri.utils.setFragmentEncoded=function(e,o){return goog.uri.utils.removeFragment(e)+(o?"#"+o:"")};goog.uri.utils.getFragment=function(e){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getFragmentEncoded(e))};goog.uri.utils.getHost=function(e){var o=goog.uri.utils.split(e);return goog.uri.utils.buildFromEncodedParts(o[goog.uri.utils.ComponentIndex.SCHEME],o[goog.uri.utils.ComponentIndex.USER_INFO],o[goog.uri.utils.ComponentIndex.DOMAIN],o[goog.uri.utils.ComponentIndex.PORT])};goog.uri.utils.getPathAndAfter=function(e){var o=goog.uri.utils.split(e);return goog.uri.utils.buildFromEncodedParts(null,null,null,null,o[goog.uri.utils.ComponentIndex.PATH],o[goog.uri.utils.ComponentIndex.QUERY_DATA],o[goog.uri.utils.ComponentIndex.FRAGMENT])};goog.uri.utils.removeFragment=function(e){var o=e.indexOf("#");return o<0?e:e.substr(0,o)};goog.uri.utils.haveSameDomain=function(e,o){var t=goog.uri.utils.split(e);var r=goog.uri.utils.split(o);return t[goog.uri.utils.ComponentIndex.DOMAIN]==r[goog.uri.utils.ComponentIndex.DOMAIN]&&t[goog.uri.utils.ComponentIndex.SCHEME]==r[goog.uri.utils.ComponentIndex.SCHEME]&&t[goog.uri.utils.ComponentIndex.PORT]==r[goog.uri.utils.ComponentIndex.PORT]};goog.uri.utils.assertNoFragmentsOrQueries_=function(e){if(goog.DEBUG&&(e.indexOf("#")>=0||e.indexOf("?")>=0)){throw Error("goog.uri.utils: Fragment or query identifiers are not "+"supported: ["+e+"]")}};goog.uri.utils.QueryValue;goog.uri.utils.QueryArray;goog.uri.utils.parseQueryData=function(e,o){if(!e){return}var t=e.split("&");for(var r=0;r<t.length;r++){var i=t[r].indexOf("=");var n=null;var a=null;if(i>=0){n=t[r].substring(0,i);a=t[r].substring(i+1)}else{n=t[r]}o(n,a?goog.string.urlDecode(a):"")}};goog.uri.utils.appendQueryData_=function(e){if(e[1]){var o=e[0];var t=o.indexOf("#");if(t>=0){e.push(o.substr(t));e[0]=o=o.substr(0,t)}var r=o.indexOf("?");if(r<0){e[1]="?"}else if(r==o.length-1){e[1]=undefined}}return e.join("")};goog.uri.utils.appendKeyValuePairs_=function(e,o,t){if(goog.isArray(o)){goog.asserts.assertArray(o);for(var r=0;r<o.length;r++){goog.uri.utils.appendKeyValuePairs_(e,String(o[r]),t)}}else if(o!=null){t.push("&",e,o===""?"":"=",goog.string.urlEncode(o))}};goog.uri.utils.buildQueryDataBuffer_=function(e,o,t){goog.asserts.assert(Math.max(o.length-(t||0),0)%2==0,"goog.uri.utils: Key/value lists must be even in length.");for(var r=t||0;r<o.length;r+=2){goog.uri.utils.appendKeyValuePairs_(o[r],o[r+1],e)}return e};goog.uri.utils.buildQueryData=function(e,o){var t=goog.uri.utils.buildQueryDataBuffer_([],e,o);t[0]="";return t.join("")};goog.uri.utils.buildQueryDataBufferFromMap_=function(e,o){for(var t in o){goog.uri.utils.appendKeyValuePairs_(t,o[t],e)}return e};goog.uri.utils.buildQueryDataFromMap=function(e){var o=goog.uri.utils.buildQueryDataBufferFromMap_([],e);o[0]="";return o.join("")};goog.uri.utils.appendParams=function(e,o){return goog.uri.utils.appendQueryData_(arguments.length==2?goog.uri.utils.buildQueryDataBuffer_([e],arguments[1],0):goog.uri.utils.buildQueryDataBuffer_([e],arguments,1))};goog.uri.utils.appendParamsFromMap=function(e,o){return goog.uri.utils.appendQueryData_(goog.uri.utils.buildQueryDataBufferFromMap_([e],o))};goog.uri.utils.appendParam=function(e,o,t){var r=[e,"&",o];if(goog.isDefAndNotNull(t)){r.push("=",goog.string.urlEncode(t))}return goog.uri.utils.appendQueryData_(r)};goog.uri.utils.findParam_=function(e,o,t,r){var i=o;var n=t.length;while((i=e.indexOf(t,i))>=0&&i<r){var a=e.charCodeAt(i-1);if(a==goog.uri.utils.CharCode_.AMPERSAND||a==goog.uri.utils.CharCode_.QUESTION){var l=e.charCodeAt(i+n)
;if(!l||l==goog.uri.utils.CharCode_.EQUAL||l==goog.uri.utils.CharCode_.AMPERSAND||l==goog.uri.utils.CharCode_.HASH){return i}}i+=n+1}return-1};goog.uri.utils.hashOrEndRe_=/#|$/;goog.uri.utils.hasParam=function(e,o){return goog.uri.utils.findParam_(e,0,o,e.search(goog.uri.utils.hashOrEndRe_))>=0};goog.uri.utils.getParamValue=function(e,o){var t=e.search(goog.uri.utils.hashOrEndRe_);var r=goog.uri.utils.findParam_(e,0,o,t);if(r<0){return null}else{var i=e.indexOf("&",r);if(i<0||i>t){i=t}r+=o.length+1;return goog.string.urlDecode(e.substr(r,i-r))}};goog.uri.utils.getParamValues=function(e,o){var t=e.search(goog.uri.utils.hashOrEndRe_);var r=0;var i;var n=[];while((i=goog.uri.utils.findParam_(e,r,o,t))>=0){r=e.indexOf("&",i);if(r<0||r>t){r=t}i+=o.length+1;n.push(goog.string.urlDecode(e.substr(i,r-i)))}return n};goog.uri.utils.trailingQueryPunctuationRe_=/[?&]($|#)/;goog.uri.utils.removeParam=function(e,o){var t=e.search(goog.uri.utils.hashOrEndRe_);var r=0;var i;var n=[];while((i=goog.uri.utils.findParam_(e,r,o,t))>=0){n.push(e.substring(r,i));r=Math.min(e.indexOf("&",i)+1||t,t)}n.push(e.substr(r));return n.join("").replace(goog.uri.utils.trailingQueryPunctuationRe_,"$1")};goog.uri.utils.setParam=function(e,o,t){return goog.uri.utils.appendParam(goog.uri.utils.removeParam(e,o),o,t)};goog.uri.utils.appendPath=function(e,o){goog.uri.utils.assertNoFragmentsOrQueries_(e);if(goog.string.endsWith(e,"/")){e=e.substr(0,e.length-1)}if(goog.string.startsWith(o,"/")){o=o.substr(1)}return goog.string.buildString(e,"/",o)};goog.uri.utils.setPath=function(e,o){if(!goog.string.startsWith(o,"/")){o="/"+o}var t=goog.uri.utils.split(e);return goog.uri.utils.buildFromEncodedParts(t[goog.uri.utils.ComponentIndex.SCHEME],t[goog.uri.utils.ComponentIndex.USER_INFO],t[goog.uri.utils.ComponentIndex.DOMAIN],t[goog.uri.utils.ComponentIndex.PORT],o,t[goog.uri.utils.ComponentIndex.QUERY_DATA],t[goog.uri.utils.ComponentIndex.FRAGMENT])};goog.uri.utils.StandardQueryParam={RANDOM:"zx"};goog.uri.utils.makeUnique=function(e){return goog.uri.utils.setParam(e,goog.uri.utils.StandardQueryParam.RANDOM,goog.string.getRandomString())};goog.provide("goog.Uri");goog.provide("goog.Uri.QueryData");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.string");goog.require("goog.structs");goog.require("goog.structs.Map");goog.require("goog.uri.utils");goog.require("goog.uri.utils.ComponentIndex");goog.require("goog.uri.utils.StandardQueryParam");goog.Uri=function(e,o){this.scheme_="";this.userInfo_="";this.domain_="";this.port_=null;this.path_="";this.fragment_="";this.isReadOnly_=false;this.ignoreCase_=false;this.queryData_;var t;if(e instanceof goog.Uri){this.ignoreCase_=goog.isDef(o)?o:e.getIgnoreCase();this.setScheme(e.getScheme());this.setUserInfo(e.getUserInfo());this.setDomain(e.getDomain());this.setPort(e.getPort());this.setPath(e.getPath());this.setQueryData(e.getQueryData().clone());this.setFragment(e.getFragment())}else if(e&&(t=goog.uri.utils.split(String(e)))){this.ignoreCase_=!!o;this.setScheme(t[goog.uri.utils.ComponentIndex.SCHEME]||"",true);this.setUserInfo(t[goog.uri.utils.ComponentIndex.USER_INFO]||"",true);this.setDomain(t[goog.uri.utils.ComponentIndex.DOMAIN]||"",true);this.setPort(t[goog.uri.utils.ComponentIndex.PORT]);this.setPath(t[goog.uri.utils.ComponentIndex.PATH]||"",true);this.setQueryData(t[goog.uri.utils.ComponentIndex.QUERY_DATA]||"",true);this.setFragment(t[goog.uri.utils.ComponentIndex.FRAGMENT]||"",true)}else{this.ignoreCase_=!!o;this.queryData_=new goog.Uri.QueryData(null,null,this.ignoreCase_)}};goog.Uri.preserveParameterTypesCompatibilityFlag=false;goog.Uri.RANDOM_PARAM=goog.uri.utils.StandardQueryParam.RANDOM;goog.Uri.prototype.toString=function(){var e=[];var o=this.getScheme();if(o){e.push(goog.Uri.encodeSpecialChars_(o,goog.Uri.reDisallowedInSchemeOrUserInfo_,true),":")}var t=this.getDomain();if(t||o=="file"){e.push("//");var r=this.getUserInfo();if(r){e.push(goog.Uri.encodeSpecialChars_(r,goog.Uri.reDisallowedInSchemeOrUserInfo_,true),"@")}e.push(goog.Uri.removeDoubleEncoding_(goog.string.urlEncode(t)));var i=this.getPort();if(i!=null){e.push(":",String(i))}}var n=this.getPath();if(n){if(this.hasDomain()&&n.charAt(0)!="/"){e.push("/")}e.push(goog.Uri.encodeSpecialChars_(n,n.charAt(0)=="/"?goog.Uri.reDisallowedInAbsolutePath_:goog.Uri.reDisallowedInRelativePath_,true))}var a=this.getEncodedQuery();if(a){e.push("?",a)}var l=this.getFragment();if(l){e.push("#",goog.Uri.encodeSpecialChars_(l,goog.Uri.reDisallowedInFragment_))}return e.join("")};goog.Uri.prototype.resolve=function(e){var o=this.clone();var t=e.hasScheme();if(t){o.setScheme(e.getScheme())}else{t=e.hasUserInfo()}if(t){o.setUserInfo(e.getUserInfo())}else{t=e.hasDomain()}if(t){o.setDomain(e.getDomain())}else{t=e.hasPort()}var r=e.getPath();if(t){o.setPort(e.getPort())}else{t=e.hasPath();if(t){if(r.charAt(0)!="/"){if(this.hasDomain()&&!this.hasPath()){r="/"+r}else{var i=o.getPath().lastIndexOf("/");if(i!=-1){r=o.getPath().substr(0,i+1)+r}}}r=goog.Uri.removeDotSegments(r)}}if(t){o.setPath(r)}else{t=e.hasQuery()}if(t){o.setQueryData(e.getDecodedQuery())}else{t=e.hasFragment()}if(t){o.setFragment(e.getFragment())}return o};goog.Uri.prototype.clone=function(){return new goog.Uri(this)};goog.Uri.prototype.getScheme=function(){return this.scheme_};goog.Uri.prototype.setScheme=function(e,o){this.enforceReadOnly();this.scheme_=o?goog.Uri.decodeOrEmpty_(e,true):e;if(this.scheme_){this.scheme_=this.scheme_.replace(/:$/,"")}return this};goog.Uri.prototype.hasScheme=function(){return!!this.scheme_};goog.Uri.prototype.getUserInfo=function(){return this.userInfo_};goog.Uri.prototype.setUserInfo=function(e,o){this.enforceReadOnly();this.userInfo_=o?goog.Uri.decodeOrEmpty_(e):e;return this};goog.Uri.prototype.hasUserInfo=function(){return!!this.userInfo_};goog.Uri.prototype.getDomain=function(){return this.domain_};goog.Uri.prototype.setDomain=function(e,o){this.enforceReadOnly();this.domain_=o?goog.Uri.decodeOrEmpty_(e,true):e;return this};goog.Uri.prototype.hasDomain=function(){return!!this.domain_};goog.Uri.prototype.getPort=function(){return this.port_};goog.Uri.prototype.setPort=function(e){this.enforceReadOnly();if(e){e=Number(e);if(isNaN(e)||e<0){throw Error("Bad port number "+e)}this.port_=e}else{this.port_=null}return this};goog.Uri.prototype.hasPort=function(){return this.port_!=null};goog.Uri.prototype.getPath=function(){return this.path_};goog.Uri.prototype.setPath=function(e,o){this.enforceReadOnly();this.path_=o?goog.Uri.decodeOrEmpty_(e,true):e;return this};goog.Uri.prototype.hasPath=function(){return!!this.path_};goog.Uri.prototype.hasQuery=function(){return this.queryData_.toString()!==""};goog.Uri.prototype.setQueryData=function(e,o){this.enforceReadOnly();if(e instanceof goog.Uri.QueryData){this.queryData_=e;this.queryData_.setIgnoreCase(this.ignoreCase_)}else{if(!o){e=goog.Uri.encodeSpecialChars_(e,goog.Uri.reDisallowedInQuery_)}this.queryData_=new goog.Uri.QueryData(e,null,this.ignoreCase_)}return this};goog.Uri.prototype.setQuery=function(e,o){return this.setQueryData(e,o)};goog.Uri.prototype.getEncodedQuery=function(){return this.queryData_.toString()};goog.Uri.prototype.getDecodedQuery=function(){return this.queryData_.toDecodedString()};goog.Uri.prototype.getQueryData=function(){return this.queryData_};goog.Uri.prototype.getQuery=function(){return this.getEncodedQuery()};goog.Uri.prototype.setParameterValue=function(e,o){this.enforceReadOnly();this.queryData_.set(e,o);return this};goog.Uri.prototype.setParameterValues=function(e,o){this.enforceReadOnly();if(!goog.isArray(o)){o=[String(o)]}this.queryData_.setValues(e,o);return this};goog.Uri.prototype.getParameterValues=function(e){return this.queryData_.getValues(e)};goog.Uri.prototype.getParameterValue=function(e){return this.queryData_.get(e)};goog.Uri.prototype.getFragment=function(){return this.fragment_};goog.Uri.prototype.setFragment=function(e,o){this.enforceReadOnly();this.fragment_=o?goog.Uri.decodeOrEmpty_(e):e;return this};goog.Uri.prototype.hasFragment=function(){return!!this.fragment_};goog.Uri.prototype.hasSameDomainAs=function(e){return(!this.hasDomain()&&!e.hasDomain()||this.getDomain()==e.getDomain())&&(!this.hasPort()&&!e.hasPort()||this.getPort()==e.getPort())};goog.Uri.prototype.makeUnique=function(){this.enforceReadOnly();this.setParameterValue(goog.Uri.RANDOM_PARAM,goog.string.getRandomString());return this};goog.Uri.prototype.removeParameter=function(e){this.enforceReadOnly();this.queryData_.remove(e);return this};goog.Uri.prototype.setReadOnly=function(e){this.isReadOnly_=e;return this};goog.Uri.prototype.isReadOnly=function(){return this.isReadOnly_};goog.Uri.prototype.enforceReadOnly=function(){if(this.isReadOnly_){throw Error("Tried to modify a read-only Uri")}};goog.Uri.prototype.setIgnoreCase=function(e){this.ignoreCase_=e;if(this.queryData_){this.queryData_.setIgnoreCase(e)}return this};goog.Uri.prototype.getIgnoreCase=function(){return this.ignoreCase_};goog.Uri.parse=function(e,o){return e instanceof goog.Uri?e.clone():new goog.Uri(e,o)};goog.Uri.create=function(e,o,t,r,i,n,a,l){var s=new goog.Uri(null,l);e&&s.setScheme(e);o&&s.setUserInfo(o);t&&s.setDomain(t);r&&s.setPort(r);i&&s.setPath(i);n&&s.setQueryData(n);a&&s.setFragment(a);return s};goog.Uri.resolve=function(e,o){if(!(e instanceof goog.Uri)){e=goog.Uri.parse(e)}if(!(o instanceof goog.Uri)){o=goog.Uri.parse(o)}return e.resolve(o)};goog.Uri.removeDotSegments=function(e){if(e==".."||e=="."){return""}else if(!goog.string.contains(e,"./")&&!goog.string.contains(e,"/.")){return e}else{var o=goog.string.startsWith(e,"/");var t=e.split("/");var r=[];for(var i=0;i<t.length;){var n=t[i++];if(n=="."){if(o&&i==t.length){r.push("")}}else if(n==".."){if(r.length>1||r.length==1&&r[0]!=""){r.pop()}if(o&&i==t.length){r.push("")}}else{r.push(n);o=true}}return r.join("/")}};goog.Uri.decodeOrEmpty_=function(e,o){if(!e){return""}return o?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e)};goog.Uri.encodeSpecialChars_=function(e,o,t){if(goog.isString(e)){var r=encodeURI(e).replace(o,goog.Uri.encodeChar_);if(t){r=goog.Uri.removeDoubleEncoding_(r)}return r}return null};goog.Uri.encodeChar_=function(e){var o=e.charCodeAt(0);return"%"+(o>>4&15).toString(16)+(o&15).toString(16)};goog.Uri.removeDoubleEncoding_=function(e){return e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")};goog.Uri.reDisallowedInSchemeOrUserInfo_=/[#\/\?@]/g;goog.Uri.reDisallowedInRelativePath_=/[\#\?:]/g;goog.Uri.reDisallowedInAbsolutePath_=/[\#\?]/g;goog.Uri.reDisallowedInQuery_=/[\#\?@]/g;goog.Uri.reDisallowedInFragment_=/#/g;goog.Uri.haveSameDomain=function(e,o){var t=goog.uri.utils.split(e);var r=goog.uri.utils.split(o);return t[goog.uri.utils.ComponentIndex.DOMAIN]==r[goog.uri.utils.ComponentIndex.DOMAIN]&&t[goog.uri.utils.ComponentIndex.PORT]==r[goog.uri.utils.ComponentIndex.PORT]};goog.Uri.QueryData=function(e,o,t){this.keyMap_=null;this.count_=null;this.encodedQuery_=e||null;this.ignoreCase_=!!t};goog.Uri.QueryData.prototype.ensureKeyMapInitialized_=function(){if(!this.keyMap_){this.keyMap_=new goog.structs.Map;this.count_=0;if(this.encodedQuery_){var e=this;goog.uri.utils.parseQueryData(this.encodedQuery_,function(o,t){e.add(goog.string.urlDecode(o),t)})}}};goog.Uri.QueryData.createFromMap=function(e,o,t){var r=goog.structs.getKeys(e);if(typeof r=="undefined"){throw Error("Keys are undefined")}var i=new goog.Uri.QueryData(null,null,t);var n=goog.structs.getValues(e);for(var a=0;a<r.length;a++){var l=r[a];var s=n[a];if(!goog.isArray(s)){i.add(l,s)}else{i.setValues(l,s)}}return i};goog.Uri.QueryData.createFromKeysValues=function(e,o,t,r){if(e.length!=o.length){throw Error("Mismatched lengths for keys/values")}var i=new goog.Uri.QueryData(null,null,r);for(var n=0;n<e.length;n++){i.add(e[n],o[n])}return i};goog.Uri.QueryData.prototype.getCount=function(){this.ensureKeyMapInitialized_();return this.count_};goog.Uri.QueryData.prototype.add=function(e,o){this.ensureKeyMapInitialized_();this.invalidateCache_();e=this.getKeyName_(e);var t=this.keyMap_.get(e);if(!t){this.keyMap_.set(e,t=[])}t.push(o);this.count_=goog.asserts.assertNumber(this.count_)+1;return this};goog.Uri.QueryData.prototype.remove=function(e){this.ensureKeyMapInitialized_();e=this.getKeyName_(e);if(this.keyMap_.containsKey(e)){this.invalidateCache_();this.count_=goog.asserts.assertNumber(this.count_)-this.keyMap_.get(e).length;return this.keyMap_.remove(e)}return false};goog.Uri.QueryData.prototype.clear=function(){this.invalidateCache_();this.keyMap_=null;this.count_=0};goog.Uri.QueryData.prototype.isEmpty=function(){this.ensureKeyMapInitialized_();return this.count_==0};goog.Uri.QueryData.prototype.containsKey=function(e){this.ensureKeyMapInitialized_();e=this.getKeyName_(e);return this.keyMap_.containsKey(e)};goog.Uri.QueryData.prototype.containsValue=function(e){var o=this.getValues();return goog.array.contains(o,e)};goog.Uri.QueryData.prototype.getKeys=function(){this.ensureKeyMapInitialized_();var e=this.keyMap_.getValues();var o=this.keyMap_.getKeys();var t=[];for(var r=0;r<o.length;r++){var i=e[r];for(var n=0;n<i.length;n++){t.push(o[r])}}return t};goog.Uri.QueryData.prototype.getValues=function(e){this.ensureKeyMapInitialized_();var o=[];if(goog.isString(e)){if(this.containsKey(e)){o=goog.array.concat(o,this.keyMap_.get(this.getKeyName_(e)))}}else{var t=this.keyMap_.getValues();for(var r=0;r<t.length;r++){o=goog.array.concat(o,t[r])}}return o};goog.Uri.QueryData.prototype.set=function(e,o){this.ensureKeyMapInitialized_();this.invalidateCache_();e=this.getKeyName_(e);if(this.containsKey(e)){this.count_=goog.asserts.assertNumber(this.count_)-this.keyMap_.get(e).length}this.keyMap_.set(e,[o]);this.count_=goog.asserts.assertNumber(this.count_)+1;return this};goog.Uri.QueryData.prototype.get=function(e,o){var t=e?this.getValues(e):[];if(goog.Uri.preserveParameterTypesCompatibilityFlag){return t.length>0?t[0]:o}else{return t.length>0?String(t[0]):o}};goog.Uri.QueryData.prototype.setValues=function(e,o){this.remove(e);if(o.length>0){this.invalidateCache_();this.keyMap_.set(this.getKeyName_(e),goog.array.clone(o));this.count_=goog.asserts.assertNumber(this.count_)+o.length}};goog.Uri.QueryData.prototype.toString=function(){if(this.encodedQuery_){return this.encodedQuery_}if(!this.keyMap_){return""}var e=[];var o=this.keyMap_.getKeys();for(var t=0;t<o.length;t++){var r=o[t];var i=goog.string.urlEncode(r);var n=this.getValues(r);for(var a=0;a<n.length;a++){var l=i;if(n[a]!==""){l+="="+goog.string.urlEncode(n[a])}e.push(l)}}return this.encodedQuery_=e.join("&")};goog.Uri.QueryData.prototype.toDecodedString=function(){return goog.Uri.decodeOrEmpty_(this.toString())};goog.Uri.QueryData.prototype.invalidateCache_=function(){this.encodedQuery_=null};goog.Uri.QueryData.prototype.filterKeys=function(e){this.ensureKeyMapInitialized_();this.keyMap_.forEach(function(o,t){if(!goog.array.contains(e,t)){this.remove(t)}},this);return this};goog.Uri.QueryData.prototype.clone=function(){var e=new goog.Uri.QueryData;e.encodedQuery_=this.encodedQuery_;if(this.keyMap_){e.keyMap_=this.keyMap_.clone();e.count_=this.count_}return e};goog.Uri.QueryData.prototype.getKeyName_=function(e){var o=String(e);if(this.ignoreCase_){o=o.toLowerCase()}return o};goog.Uri.QueryData.prototype.setIgnoreCase=function(e){var o=e&&!this.ignoreCase_;if(o){this.ensureKeyMapInitialized_();this.invalidateCache_();this.keyMap_.forEach(function(e,o){var t=o.toLowerCase();if(o!=t){this.remove(o);this.setValues(t,e)}},this)}this.ignoreCase_=e};goog.Uri.QueryData.prototype.extend=function(e){for(var o=0;o<arguments.length;o++){var t=arguments[o];goog.structs.forEach(t,function(e,o){this.add(o,e)},this)}};goog.provide("ol.style.Text");goog.require("ol.style.Fill");ol.style.Text=function(e){var o=e||{};this.font_=o.font;this.rotation_=o.rotation;this.scale_=o.scale;this.text_=o.text;this.textAlign_=o.textAlign;this.textBaseline_=o.textBaseline;this.fill_=o.fill!==undefined?o.fill:new ol.style.Fill({color:ol.style.Text.DEFAULT_FILL_COLOR_});this.stroke_=o.stroke!==undefined?o.stroke:null;this.offsetX_=o.offsetX!==undefined?o.offsetX:0;this.offsetY_=o.offsetY!==undefined?o.offsetY:0};ol.style.Text.DEFAULT_FILL_COLOR_="#333";ol.style.Text.prototype.getFont=function(){return this.font_};ol.style.Text.prototype.getOffsetX=function(){return this.offsetX_};ol.style.Text.prototype.getOffsetY=function(){return this.offsetY_};ol.style.Text.prototype.getFill=function(){return this.fill_};ol.style.Text.prototype.getRotation=function(){return this.rotation_};ol.style.Text.prototype.getScale=function(){return this.scale_};ol.style.Text.prototype.getStroke=function(){return this.stroke_};ol.style.Text.prototype.getText=function(){return this.text_};ol.style.Text.prototype.getTextAlign=function(){return this.textAlign_};ol.style.Text.prototype.getTextBaseline=function(){return this.textBaseline_};ol.style.Text.prototype.setFont=function(e){this.font_=e};ol.style.Text.prototype.setOffsetX=function(e){this.offsetX_=e};ol.style.Text.prototype.setOffsetY=function(e){this.offsetY_=e};ol.style.Text.prototype.setFill=function(e){this.fill_=e};ol.style.Text.prototype.setRotation=function(e){this.rotation_=e};ol.style.Text.prototype.setScale=function(e){this.scale_=e};ol.style.Text.prototype.setStroke=function(e){this.stroke_=e};ol.style.Text.prototype.setText=function(e){this.text_=e};ol.style.Text.prototype.setTextAlign=function(e){this.textAlign_=e};ol.style.Text.prototype.setTextBaseline=function(e){this.textBaseline_=e};goog.provide("ol.format.KML");goog.require("goog.Uri");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.object");goog.require("ol");goog.require("ol.Feature");goog.require("ol.FeatureStyleFunction");goog.require("ol.array");goog.require("ol.color");goog.require("ol.format.Feature");goog.require("ol.format.XMLFeature");goog.require("ol.format.XSD");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryCollection");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LineString");goog.require("ol.geom.LinearRing");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.math");goog.require("ol.object");goog.require("ol.proj");goog.require("ol.style.Fill");goog.require("ol.style.Icon");goog.require("ol.style.IconAnchorUnits");goog.require("ol.style.IconOrigin");goog.require("ol.style.Image");goog.require("ol.style.Stroke");goog.require("ol.style.Style");goog.require("ol.style.Text");goog.require("ol.xml");ol.format.KMLVec2_;ol.format.KMLGxTrackObject_;ol.format.KML=function(e){var o=e?e:{};goog.base(this);this.defaultDataProjection=ol.proj.get("EPSG:4326");this.defaultStyle_=o.defaultStyle?o.defaultStyle:ol.format.KML.DEFAULT_STYLE_ARRAY_;this.extractStyles_=o.extractStyles!==undefined?o.extractStyles:true;this.writeStyles_=o.writeStyles!==undefined?o.writeStyles:true;this.sharedStyles_={};this.showPointNames_=o.showPointNames!==undefined?o.showPointNames:true};goog.inherits(ol.format.KML,ol.format.XMLFeature);ol.format.KML.EXTENSIONS_=[".kml"];ol.format.KML.GX_NAMESPACE_URIS_=["http://www.google.com/kml/ext/2.2"];ol.format.KML.NAMESPACE_URIS_=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"];ol.format.KML.SCHEMA_LOCATION_="http://www.opengis.net/kml/2.2 "+"https://developers.google.com/kml/schema/kml22gx.xsd";ol.format.KML.DEFAULT_COLOR_=[255,255,255,1];ol.format.KML.DEFAULT_FILL_STYLE_=new ol.style.Fill({color:ol.format.KML.DEFAULT_COLOR_});ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_=[20,2];ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_=ol.style.IconAnchorUnits.PIXELS;ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_=ol.style.IconAnchorUnits.PIXELS;ol.format.KML.DEFAULT_IMAGE_STYLE_SIZE_=[64,64];ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png";ol.format.KML.DEFAULT_IMAGE_SCALE_MULTIPLIER_=.5;ol.format.KML.DEFAULT_IMAGE_STYLE_=new ol.style.Icon({anchor:ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_,anchorOrigin:ol.style.IconOrigin.BOTTOM_LEFT,anchorXUnits:ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_,anchorYUnits:ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_,crossOrigin:"anonymous",rotation:0,scale:ol.format.KML.DEFAULT_IMAGE_SCALE_MULTIPLIER_,size:ol.format.KML.DEFAULT_IMAGE_STYLE_SIZE_,src:ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_});ol.format.KML.DEFAULT_STROKE_STYLE_=new ol.style.Stroke({color:ol.format.KML.DEFAULT_COLOR_,width:1});ol.format.KML.DEFAULT_TEXT_STROKE_STYLE_=new ol.style.Stroke({color:[51,51,51,1],width:2});ol.format.KML.DEFAULT_TEXT_STYLE_=new ol.style.Text({font:"bold 16px Helvetica",fill:ol.format.KML.DEFAULT_FILL_STYLE_,stroke:ol.format.KML.DEFAULT_TEXT_STROKE_STYLE_,scale:.8});ol.format.KML.DEFAULT_STYLE_=new ol.style.Style({fill:ol.format.KML.DEFAULT_FILL_STYLE_,image:ol.format.KML.DEFAULT_IMAGE_STYLE_,text:ol.format.KML.DEFAULT_TEXT_STYLE_,stroke:ol.format.KML.DEFAULT_STROKE_STYLE_,zIndex:0});ol.format.KML.DEFAULT_STYLE_ARRAY_=[ol.format.KML.DEFAULT_STYLE_];ol.format.KML.ICON_ANCHOR_UNITS_MAP_={fraction:ol.style.IconAnchorUnits.FRACTION,pixels:ol.style.IconAnchorUnits.PIXELS};ol.format.KML.createNameStyleFunction_=function(e,o){var t=null;var r=[0,0];var i="start";if(e.getImage()){var n=e.getImage().getImageSize();if(n&&n.length==2){r[0]=e.getImage().getScale()*n[0]/2;r[1]=-e.getImage().getScale()*n[1]/2;i="left"}}if(!ol.object.isEmpty(e.getText())){t=goog.object.clone(e.getText());t.setText(o);t.setTextAlign(i);t.setOffsetX(r[0]);t.setOffsetY(r[1])}else{t=new ol.style.Text({text:o,offsetX:r[0],offsetY:r[1],textAlign:i})}var a=new ol.style.Style({text:t});return a};ol.format.KML.createFeatureStyleFunction_=function(e,o,t,r,i){return function(n){var a=i;var l;var s="";if(a){if(this.getGeometry()){a=this.getGeometry().getType()===ol.geom.GeometryType.POINT}}if(a){s=this.get("name");a=a&&s}if(e){if(a){l=ol.format.KML.createNameStyleFunction_(e[0],s);return e.concat(l)}return e}if(o){var g=ol.format.KML.findStyle_(o,t,r);if(a){l=ol.format.KML.createNameStyleFunction_(g[0],s);return g.concat(l)}return g}if(a){l=ol.format.KML.createNameStyleFunction_(t[0],s);return t.concat(l)}return t}};ol.format.KML.findStyle_=function(e,o,t){if(goog.isArray(e)){return e}else if(typeof e==="string"){if(!(e in t)&&"#"+e in t){e="#"+e}return ol.format.KML.findStyle_(t[e],o,t)}else{return o}};ol.format.KML.readColor_=function(e){var o=ol.xml.getAllTextContent(e,false);var t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(o);if(t){var r=t[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}else{return undefined}};ol.format.KML.readFlatCoordinates_=function(e){var o=ol.xml.getAllTextContent(e,false);var t=[];var r=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;var i;while(i=r.exec(o)){var n=parseFloat(i[1]);var a=parseFloat(i[2]);var l=i[3]?parseFloat(i[3]):0;t.push(n,a,l);o=o.substr(i[0].length)}if(o!==""){return undefined}return t};ol.format.KML.readStyleUrl_=function(e){var o=ol.xml.getAllTextContent(e,false).trim();if(e.baseURI){return goog.Uri.resolve(e.baseURI,o).toString()}else{return o}};ol.format.KML.readURI_=function(e){var o=ol.xml.getAllTextContent(e,false);if(e.baseURI){return goog.Uri.resolve(e.baseURI,o.trim()).toString()}else{return o.trim()}};ol.format.KML.readVec2_=function(e){var o=e.getAttribute("xunits");var t=e.getAttribute("yunits");return{x:parseFloat(e.getAttribute("x")),xunits:ol.format.KML.ICON_ANCHOR_UNITS_MAP_[o],y:parseFloat(e.getAttribute("y")),yunits:ol.format.KML.ICON_ANCHOR_UNITS_MAP_[t]}};ol.format.KML.readScale_=function(e){var o=ol.format.XSD.readDecimal(e);if(o!==undefined){return Math.sqrt(o)}else{return undefined}};ol.format.KML.readStyleMapValue_=function(e,o){return ol.xml.pushParseAndPop(undefined,ol.format.KML.STYLE_MAP_PARSERS_,e,o)};ol.format.KML.IconStyleParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be an ELEMENT");goog.asserts.assert(e.localName=="IconStyle","localName should be IconStyle");var t=ol.xml.pushParseAndPop({},ol.format.KML.ICON_STYLE_PARSERS_,e,o);if(!t){return}var r=o[o.length-1];goog.asserts.assert(goog.isObject(r),"styleObject should be an Object");var i="Icon"in t?t["Icon"]:{};var n;var a=i["href"];if(a){n=a}else{n=ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_}var l,s,g;var p=t["hotSpot"];if(p){l=[p.x,p.y];s=p.xunits;g=p.yunits}else if(n===ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_){l=ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_;s=ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_;g=ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_}else if(/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(n)){l=[.5,0];s=ol.style.IconAnchorUnits.FRACTION;g=ol.style.IconAnchorUnits.FRACTION}var u;var c=i["x"];var d=i["y"];if(c!==undefined&&d!==undefined){u=[c,d]}var y;var h=i["w"];var m=i["h"];if(h!==undefined&&m!==undefined){y=[h,m]}var f;var v=t["heading"];if(v!==undefined){f=ol.math.toRadians(v)}var _=t["scale"];if(n==ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_){y=ol.format.KML.DEFAULT_IMAGE_STYLE_SIZE_;if(_===undefined){_=ol.format.KML.DEFAULT_IMAGE_SCALE_MULTIPLIER_}}var E=new ol.style.Icon({anchor:l,anchorOrigin:ol.style.IconOrigin.BOTTOM_LEFT,anchorXUnits:s,anchorYUnits:g,crossOrigin:"anonymous",offset:u,offsetOrigin:ol.style.IconOrigin.BOTTOM_LEFT,rotation:f,scale:_,size:y,src:n});r["imageStyle"]=E};ol.format.KML.LabelStyleParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="LabelStyle","localName should be LabelStyle");var t=ol.xml.pushParseAndPop({},ol.format.KML.LABEL_STYLE_PARSERS_,e,o);if(!t){return}var r=o[o.length-1];goog.asserts.assert(goog.isObject(r),"styleObject should be an Object");var i=new ol.style.Text({fill:new ol.style.Fill({color:"color"in t?t["color"]:ol.format.KML.DEFAULT_COLOR_}),scale:t["scale"]});r["textStyle"]=i};ol.format.KML.LineStyleParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="LineStyle","localName should be LineStyle");var t=ol.xml.pushParseAndPop({},ol.format.KML.LINE_STYLE_PARSERS_,e,o);if(!t){return}var r=o[o.length-1];goog.asserts.assert(goog.isObject(r),"styleObject should be an Object");var i=new ol.style.Stroke({color:"color"in t?t["color"]:ol.format.KML.DEFAULT_COLOR_,width:"width"in t?t["width"]:1});r["strokeStyle"]=i};ol.format.KML.PolyStyleParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="PolyStyle","localName should be PolyStyle");var t=ol.xml.pushParseAndPop({},ol.format.KML.POLY_STYLE_PARSERS_,e,o);if(!t){return}var r=o[o.length-1];goog.asserts.assert(goog.isObject(r),"styleObject should be an Object");var i=new ol.style.Fill({color:"color"in t?t["color"]:ol.format.KML.DEFAULT_COLOR_});r["fillStyle"]=i;var n=t["fill"];if(n!==undefined){r["fill"]=n}var a=t["outline"];if(a!==undefined){r["outline"]=a}};ol.format.KML.readFlatLinearRing_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="LinearRing","localName should be LinearRing");return ol.xml.pushParseAndPop(null,ol.format.KML.FLAT_LINEAR_RING_PARSERS_,e,o)};ol.format.KML.gxCoordParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(ol.array.includes(ol.format.KML.GX_NAMESPACE_URIS_,e.namespaceURI),"namespaceURI of the node should be known to the KML parser");goog.asserts.assert(e.localName=="coord","localName should be coord");var t=o[o.length-1];goog.asserts.assert(goog.isObject(t),"gxTrackObject should be an Object");var r=t.flatCoordinates;var i=ol.xml.getAllTextContent(e,false);var n=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i;var a=n.exec(i);if(a){var l=parseFloat(a[1]);var s=parseFloat(a[2]);var g=parseFloat(a[3]);r.push(l,s,g,0)}else{r.push(0,0,0,0)}};ol.format.KML.readGxMultiTrack_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(ol.array.includes(ol.format.KML.GX_NAMESPACE_URIS_,e.namespaceURI),"namespaceURI of the node should be known to the KML parser");goog.asserts.assert(e.localName=="MultiTrack","localName should be MultiTrack");var t=ol.xml.pushParseAndPop([],ol.format.KML.GX_MULTITRACK_GEOMETRY_PARSERS_,e,o);if(!t){return undefined}var r=new ol.geom.MultiLineString(null);r.setLineStrings(t);return r};ol.format.KML.readGxTrack_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(ol.array.includes(ol.format.KML.GX_NAMESPACE_URIS_,e.namespaceURI),"namespaceURI of the node should be known to the KML parser");goog.asserts.assert(e.localName=="Track","localName should be Track");var t=ol.xml.pushParseAndPop({flatCoordinates:[],whens:[]},ol.format.KML.GX_TRACK_PARSERS_,e,o);if(!t){return undefined}var r=t.flatCoordinates;var i=t.whens;goog.asserts.assert(r.length/4==i.length,"the length of the flatCoordinates array divided by 4 should be the "+"length of the whens array");var n,a;for(n=0,a=Math.min(r.length,i.length);n<a;++n){r[4*n+3]=i[n]}var l=new ol.geom.LineString(null);l.setFlatCoordinates(ol.geom.GeometryLayout.XYZM,r);return l};ol.format.KML.readIcon_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Icon","localName should be Icon");var t=ol.xml.pushParseAndPop({},ol.format.KML.ICON_PARSERS_,e,o);if(t){return t}else{return null}};ol.format.KML.readFlatCoordinatesFromNode_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return ol.xml.pushParseAndPop(null,ol.format.KML.GEOMETRY_FLAT_COORDINATES_PARSERS_,e,o)};ol.format.KML.readLineString_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="LineString","localName should be LineString");var t=ol.xml.pushParseAndPop({},ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,e,o);var r=ol.format.KML.readFlatCoordinatesFromNode_(e,o);if(r){var i=new ol.geom.LineString(null);i.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,r);i.setProperties(t);return i}else{return undefined}};ol.format.KML.readLinearRing_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="LinearRing","localName should be LinearRing");var t=ol.xml.pushParseAndPop({},ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,e,o);var r=ol.format.KML.readFlatCoordinatesFromNode_(e,o);if(r){var i=new ol.geom.Polygon(null);i.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,r,[r.length]);i.setProperties(t);return i}else{return undefined}};ol.format.KML.readMultiGeometry_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="MultiGeometry","localName should be MultiGeometry");var t=ol.xml.pushParseAndPop([],ol.format.KML.MULTI_GEOMETRY_PARSERS_,e,o);if(!t){return null}if(t.length===0){return new ol.geom.GeometryCollection(t)}var r=true;var i=t[0].getType();var n,a,l;for(a=1,l=t.length;a<l;++a){n=t[a];if(n.getType()!=i){r=false;break}}if(r){var s;var g;if(i==ol.geom.GeometryType.POINT){var p=t[0];goog.asserts.assertInstanceof(p,ol.geom.Point,"point should be an ol.geom.Point");s=p.getLayout();g=p.getFlatCoordinates();for(a=1,
l=t.length;a<l;++a){n=t[a];goog.asserts.assertInstanceof(n,ol.geom.Point,"geometry should be an ol.geom.Point");goog.asserts.assert(n.getLayout()==s,"geometry layout should be consistent");ol.array.extend(g,n.getFlatCoordinates())}var u=new ol.geom.MultiPoint(null);u.setFlatCoordinates(s,g);ol.format.KML.setCommonGeometryProperties_(u,t);return u}else if(i==ol.geom.GeometryType.LINE_STRING){var c=new ol.geom.MultiLineString(null);c.setLineStrings(t);ol.format.KML.setCommonGeometryProperties_(c,t);return c}else if(i==ol.geom.GeometryType.POLYGON){var d=new ol.geom.MultiPolygon(null);d.setPolygons(t);ol.format.KML.setCommonGeometryProperties_(d,t);return d}else if(i==ol.geom.GeometryType.GEOMETRY_COLLECTION){return new ol.geom.GeometryCollection(t)}else{goog.asserts.fail("Unexpected type: "+i);return null}}else{return new ol.geom.GeometryCollection(t)}};ol.format.KML.readPoint_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Point","localName should be Point");var t=ol.xml.pushParseAndPop({},ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,e,o);var r=ol.format.KML.readFlatCoordinatesFromNode_(e,o);if(r){var i=new ol.geom.Point(null);goog.asserts.assert(r.length==3,"flatCoordinates should have a length of 3");i.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,r);i.setProperties(t);return i}else{return undefined}};ol.format.KML.readPolygon_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Polygon","localName should be Polygon");var t=ol.xml.pushParseAndPop({},ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,e,o);var r=ol.xml.pushParseAndPop([null],ol.format.KML.FLAT_LINEAR_RINGS_PARSERS_,e,o);if(r&&r[0]){var i=new ol.geom.Polygon(null);var n=r[0];var a=[n.length];var l,s;for(l=1,s=r.length;l<s;++l){ol.array.extend(n,r[l]);a.push(n.length)}i.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,n,a);i.setProperties(t);return i}else{return undefined}};ol.format.KML.readStyle_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Style","localName should be Style");var t=ol.xml.pushParseAndPop({},ol.format.KML.STYLE_PARSERS_,e,o);if(!t){return null}var r="fillStyle"in t?t["fillStyle"]:ol.format.KML.DEFAULT_FILL_STYLE_;var i=t["fill"];if(i!==undefined&&!i){r=null}var n="imageStyle"in t?t["imageStyle"]:ol.format.KML.DEFAULT_IMAGE_STYLE_;var a="textStyle"in t?t["textStyle"]:ol.format.KML.DEFAULT_TEXT_STYLE_;var l="strokeStyle"in t?t["strokeStyle"]:ol.format.KML.DEFAULT_STROKE_STYLE_;var s=t["outline"];if(s!==undefined&&!s){l=null}return[new ol.style.Style({fill:r,image:n,stroke:l,text:a,zIndex:undefined})]};ol.format.KML.setCommonGeometryProperties_=function(e,o){var t=o.length;var r=new Array(o.length);var i=new Array(o.length);var n,a,l,s;l=s=false;for(a=0;a<t;++a){n=o[a];r[a]=n.get("extrude");i[a]=n.get("altitudeMode");l=l||r[a]!==undefined;s=s||i[a]}if(l){e.set("extrude",r)}if(s){e.set("altitudeMode",i)}};ol.format.KML.DataParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Data","localName should be Data");var t=e.getAttribute("name");if(t!==null){var r=ol.xml.pushParseAndPop(undefined,ol.format.KML.DATA_PARSERS_,e,o);if(r){var i=o[o.length-1];goog.asserts.assert(goog.isObject(i),"featureObject should be an Object");i[t]=r}}};ol.format.KML.ExtendedDataParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="ExtendedData","localName should be ExtendedData");ol.xml.parseNode(ol.format.KML.EXTENDED_DATA_PARSERS_,e,o)};ol.format.KML.PairDataParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Pair","localName should be Pair");var t=ol.xml.pushParseAndPop({},ol.format.KML.PAIR_PARSERS_,e,o);if(!t){return}var r=t["key"];if(r&&r=="normal"){var i=t["styleUrl"];if(i){o[o.length-1]=i}var n=t["Style"];if(n){o[o.length-1]=n}}};ol.format.KML.PlacemarkStyleMapParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="StyleMap","localName should be StyleMap");var t=ol.format.KML.readStyleMapValue_(e,o);if(!t){return}var r=o[o.length-1];goog.asserts.assert(goog.isObject(r),"placemarkObject should be an Object");if(goog.isArray(t)){r["Style"]=t}else if(typeof t==="string"){r["styleUrl"]=t}else{goog.asserts.fail("styleMapValue has an unknown type")}};ol.format.KML.SchemaDataParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="SchemaData","localName should be SchemaData");ol.xml.parseNode(ol.format.KML.SCHEMA_DATA_PARSERS_,e,o)};ol.format.KML.SimpleDataParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="SimpleData","localName should be SimpleData");var t=e.getAttribute("name");if(t!==null){var r=ol.format.XSD.readString(e);var i=o[o.length-1];i[t]=r}};ol.format.KML.innerBoundaryIsParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="innerBoundaryIs","localName should be innerBoundaryIs");var t=ol.xml.pushParseAndPop(undefined,ol.format.KML.INNER_BOUNDARY_IS_PARSERS_,e,o);if(t){var r=o[o.length-1];goog.asserts.assert(goog.isArray(r),"flatLinearRings should be an array");goog.asserts.assert(r.length>0,"flatLinearRings array should not be empty");r.push(t)}};ol.format.KML.outerBoundaryIsParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="outerBoundaryIs","localName should be outerBoundaryIs");var t=ol.xml.pushParseAndPop(undefined,ol.format.KML.OUTER_BOUNDARY_IS_PARSERS_,e,o);if(t){var r=o[o.length-1];goog.asserts.assert(goog.isArray(r),"flatLinearRings should be an array");goog.asserts.assert(r.length>0,"flatLinearRings array should not be empty");r[0]=t}};ol.format.KML.LinkParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Link","localName should be Link");ol.xml.parseNode(ol.format.KML.LINK_PARSERS_,e,o)};ol.format.KML.whenParser_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="when","localName should be when");var t=o[o.length-1];goog.asserts.assert(goog.isObject(t),"gxTrackObject should be an Object");var r=t.whens;var i=ol.xml.getAllTextContent(e,false);var n=/^\s*(\d{4})($|-(\d{2})($|-(\d{2})($|T(\d{2}):(\d{2}):(\d{2})(Z|(?:([+\-])(\d{2})(?::(\d{2}))?)))))\s*$/;var a=n.exec(i);if(a){var l=parseInt(a[1],10);var s=a[3]?parseInt(a[3],10)-1:0;var g=a[5]?parseInt(a[5],10):1;var p=a[7]?parseInt(a[7],10):0;var u=a[8]?parseInt(a[8],10):0;var c=a[9]?parseInt(a[9],10):0;var d=Date.UTC(l,s,g,p,u,c);if(a[10]&&a[10]!="Z"){var y=a[11]=="-"?-1:1;d+=y*60*parseInt(a[12],10);if(a[13]){d+=y*60*60*parseInt(a[13],10)}}r.push(d)}else{r.push(0)}};ol.format.KML.DATA_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{value:ol.xml.makeReplacer(ol.format.XSD.readString)});ol.format.KML.EXTENDED_DATA_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Data:ol.format.KML.DataParser_,SchemaData:ol.format.KML.SchemaDataParser_});ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{extrude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),altitudeMode:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.KML.FLAT_LINEAR_RING_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{coordinates:ol.xml.makeReplacer(ol.format.KML.readFlatCoordinates_)});ol.format.KML.FLAT_LINEAR_RINGS_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{innerBoundaryIs:ol.format.KML.innerBoundaryIsParser_,outerBoundaryIs:ol.format.KML.outerBoundaryIsParser_});ol.format.KML.GX_TRACK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{when:ol.format.KML.whenParser_},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{coord:ol.format.KML.gxCoordParser_}));ol.format.KML.GEOMETRY_FLAT_COORDINATES_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{coordinates:ol.xml.makeReplacer(ol.format.KML.readFlatCoordinates_)});ol.format.KML.ICON_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{href:ol.xml.makeObjectPropertySetter(ol.format.KML.readURI_)},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{x:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),y:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),w:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),h:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal)}));ol.format.KML.ICON_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Icon:ol.xml.makeObjectPropertySetter(ol.format.KML.readIcon_),heading:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),hotSpot:ol.xml.makeObjectPropertySetter(ol.format.KML.readVec2_),scale:ol.xml.makeObjectPropertySetter(ol.format.KML.readScale_)});ol.format.KML.INNER_BOUNDARY_IS_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LinearRing:ol.xml.makeReplacer(ol.format.KML.readFlatLinearRing_)});ol.format.KML.LABEL_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeObjectPropertySetter(ol.format.KML.readColor_),scale:ol.xml.makeObjectPropertySetter(ol.format.KML.readScale_)});ol.format.KML.LINE_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeObjectPropertySetter(ol.format.KML.readColor_),width:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal)});ol.format.KML.MULTI_GEOMETRY_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LineString:ol.xml.makeArrayPusher(ol.format.KML.readLineString_),LinearRing:ol.xml.makeArrayPusher(ol.format.KML.readLinearRing_),MultiGeometry:ol.xml.makeArrayPusher(ol.format.KML.readMultiGeometry_),Point:ol.xml.makeArrayPusher(ol.format.KML.readPoint_),Polygon:ol.xml.makeArrayPusher(ol.format.KML.readPolygon_)});ol.format.KML.GX_MULTITRACK_GEOMETRY_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{Track:ol.xml.makeArrayPusher(ol.format.KML.readGxTrack_)});ol.format.KML.NETWORK_LINK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{ExtendedData:ol.format.KML.ExtendedDataParser_,Link:ol.format.KML.LinkParser_,address:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),description:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),open:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),phoneNumber:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),visibility:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean)});ol.format.KML.LINK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{href:ol.xml.makeObjectPropertySetter(ol.format.KML.readURI_)});ol.format.KML.OUTER_BOUNDARY_IS_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LinearRing:ol.xml.makeReplacer(ol.format.KML.readFlatLinearRing_)});ol.format.KML.PAIR_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Style:ol.xml.makeObjectPropertySetter(ol.format.KML.readStyle_),key:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),styleUrl:ol.xml.makeObjectPropertySetter(ol.format.KML.readStyleUrl_)});ol.format.KML.PLACEMARK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{ExtendedData:ol.format.KML.ExtendedDataParser_,MultiGeometry:ol.xml.makeObjectPropertySetter(ol.format.KML.readMultiGeometry_,"geometry"),LineString:ol.xml.makeObjectPropertySetter(ol.format.KML.readLineString_,"geometry"),LinearRing:ol.xml.makeObjectPropertySetter(ol.format.KML.readLinearRing_,"geometry"),Point:ol.xml.makeObjectPropertySetter(ol.format.KML.readPoint_,"geometry"),Polygon:ol.xml.makeObjectPropertySetter(ol.format.KML.readPolygon_,"geometry"),Style:ol.xml.makeObjectPropertySetter(ol.format.KML.readStyle_),StyleMap:ol.format.KML.PlacemarkStyleMapParser_,address:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),description:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),open:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),phoneNumber:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),styleUrl:ol.xml.makeObjectPropertySetter(ol.format.KML.readURI_),visibility:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean)},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{MultiTrack:ol.xml.makeObjectPropertySetter(ol.format.KML.readGxMultiTrack_,"geometry"),Track:ol.xml.makeObjectPropertySetter(ol.format.KML.readGxTrack_,"geometry")}));ol.format.KML.POLY_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeObjectPropertySetter(ol.format.KML.readColor_),fill:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),outline:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean)});ol.format.KML.SCHEMA_DATA_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{SimpleData:ol.format.KML.SimpleDataParser_});ol.format.KML.STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{IconStyle:ol.format.KML.IconStyleParser_,LabelStyle:ol.format.KML.LabelStyleParser_,LineStyle:ol.format.KML.LineStyleParser_,PolyStyle:ol.format.KML.PolyStyleParser_});ol.format.KML.STYLE_MAP_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Pair:ol.format.KML.PairDataParser_});ol.format.KML.prototype.getExtensions=function(){return ol.format.KML.EXTENSIONS_};ol.format.KML.prototype.readDocumentOrFolder_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");var t=ol.xml.getLocalName(e);goog.asserts.assert(t=="Document"||t=="Folder","localName should be Document or Folder");var r=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Document:ol.xml.makeArrayExtender(this.readDocumentOrFolder_,this),Folder:ol.xml.makeArrayExtender(this.readDocumentOrFolder_,this),Placemark:ol.xml.makeArrayPusher(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)});var i=ol.xml.pushParseAndPop([],r,e,o,this);if(i){return i}else{return undefined}};ol.format.KML.prototype.readPlacemark_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Placemark","localName should be Placemark");var t=ol.xml.pushParseAndPop({geometry:null},ol.format.KML.PLACEMARK_PARSERS_,e,o);if(!t){return undefined}var r=new ol.Feature;var i=e.getAttribute("id");if(i!==null){r.setId(i)}var n=o[0];var a=t["geometry"];if(a){ol.format.Feature.transformWithOptions(a,false,n)}r.setGeometry(a);delete t["geometry"];if(this.extractStyles_){var l=t["Style"];var s=t["styleUrl"];var g=ol.format.KML.createFeatureStyleFunction_(l,s,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);r.setStyle(g)}delete t["Style"];r.setProperties(t);return r};ol.format.KML.prototype.readSharedStyle_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Style","localName should be Style");var t=e.getAttribute("id");if(t!==null){var r=ol.format.KML.readStyle_(e,o);if(r){var i;if(e.baseURI){i=goog.Uri.resolve(e.baseURI,"#"+t).toString()}else{i="#"+t}this.sharedStyles_[i]=r}}};ol.format.KML.prototype.readSharedStyleMap_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="StyleMap","localName should be StyleMap");var t=e.getAttribute("id");if(t===null){return}var r=ol.format.KML.readStyleMapValue_(e,o);if(!r){return}var i;if(e.baseURI){i=goog.Uri.resolve(e.baseURI,"#"+t).toString()}else{i="#"+t}this.sharedStyles_[i]=r};ol.format.KML.prototype.readFeature;ol.format.KML.prototype.readFeatureFromNode=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");if(!ol.array.includes(ol.format.KML.NAMESPACE_URIS_,e.namespaceURI)){return null}goog.asserts.assert(e.localName=="Placemark","localName should be Placemark");var t=this.readPlacemark_(e,[this.getReadOptions(e,o)]);if(t){return t}else{return null}};ol.format.KML.prototype.readFeatures;ol.format.KML.prototype.readFeaturesFromNode=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");if(!ol.array.includes(ol.format.KML.NAMESPACE_URIS_,e.namespaceURI)){return[]}var t;var r=ol.xml.getLocalName(e);if(r=="Document"||r=="Folder"){t=this.readDocumentOrFolder_(e,[this.getReadOptions(e,o)]);if(t){return t}else{return[]}}else if(r=="Placemark"){var i=this.readPlacemark_(e,[this.getReadOptions(e,o)]);if(i){return[i]}else{return[]}}else if(r=="kml"){t=[];var n;for(n=e.firstElementChild;n;n=n.nextElementSibling){var a=this.readFeaturesFromNode(n,o);if(a){ol.array.extend(t,a)}}return t}else{return[]}};ol.format.KML.prototype.readName=function(e){if(ol.xml.isDocument(e)){return this.readNameFromDocument(e)}else if(ol.xml.isNode(e)){return this.readNameFromNode(e)}else if(typeof e==="string"){var o=ol.xml.parse(e);return this.readNameFromDocument(o)}else{goog.asserts.fail("Unknown type for source");return undefined}};ol.format.KML.prototype.readNameFromDocument=function(e){var o;for(o=e.firstChild;o;o=o.nextSibling){if(o.nodeType==goog.dom.NodeType.ELEMENT){var t=this.readNameFromNode(o);if(t){return t}}}return undefined};ol.format.KML.prototype.readNameFromNode=function(e){var o;for(o=e.firstElementChild;o;o=o.nextElementSibling){if(ol.array.includes(ol.format.KML.NAMESPACE_URIS_,o.namespaceURI)&&o.localName=="name"){return ol.format.XSD.readString(o)}}for(o=e.firstElementChild;o;o=o.nextElementSibling){var t=ol.xml.getLocalName(o);if(ol.array.includes(ol.format.KML.NAMESPACE_URIS_,o.namespaceURI)&&(t=="Document"||t=="Folder"||t=="Placemark"||t=="kml")){var r=this.readNameFromNode(o);if(r){return r}}}return undefined};ol.format.KML.prototype.readNetworkLinks=function(e){var o=[];if(ol.xml.isDocument(e)){ol.array.extend(o,this.readNetworkLinksFromDocument(e))}else if(ol.xml.isNode(e)){ol.array.extend(o,this.readNetworkLinksFromNode(e))}else if(typeof e==="string"){var t=ol.xml.parse(e);ol.array.extend(o,this.readNetworkLinksFromDocument(t))}else{goog.asserts.fail("unknown type for source")}return o};ol.format.KML.prototype.readNetworkLinksFromDocument=function(e){var o,t=[];for(o=e.firstChild;o;o=o.nextSibling){if(o.nodeType==goog.dom.NodeType.ELEMENT){ol.array.extend(t,this.readNetworkLinksFromNode(o))}}return t};ol.format.KML.prototype.readNetworkLinksFromNode=function(e){var o,t=[];for(o=e.firstElementChild;o;o=o.nextElementSibling){if(ol.array.includes(ol.format.KML.NAMESPACE_URIS_,o.namespaceURI)&&o.localName=="NetworkLink"){var r=ol.xml.pushParseAndPop({},ol.format.KML.NETWORK_LINK_PARSERS_,o,[]);t.push(r)}}for(o=e.firstElementChild;o;o=o.nextElementSibling){var i=ol.xml.getLocalName(o);if(ol.array.includes(ol.format.KML.NAMESPACE_URIS_,o.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")){ol.array.extend(t,this.readNetworkLinksFromNode(o))}}return t};ol.format.KML.prototype.readProjection;ol.format.KML.writeColorTextNode_=function(e,o){var t=ol.color.asArray(o);var r=t.length==4?t[3]:1;var i=[r*255,t[2],t[1],t[0]];var n;for(n=0;n<4;++n){var a=parseInt(i[n],10).toString(16);i[n]=a.length==1?"0"+a:a}ol.format.XSD.writeStringTextNode(e,i.join(""))};ol.format.KML.writeCoordinatesTextNode_=function(e,o,t){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=r["layout"];var n=r["stride"];var a;if(i==ol.geom.GeometryLayout.XY||i==ol.geom.GeometryLayout.XYM){a=2}else if(i==ol.geom.GeometryLayout.XYZ||i==ol.geom.GeometryLayout.XYZM){a=3}else{goog.asserts.fail("Unknown geometry layout")}var l,s;var g=o.length;var p="";if(g>0){p+=o[0];for(l=1;l<a;++l){p+=","+o[l]}for(s=n;s<g;s+=n){p+=" "+o[s];for(l=1;l<a;++l){p+=","+o[s+l]}}}ol.format.XSD.writeStringTextNode(e,p)};ol.format.KML.writeDocument_=function(e,o,t){var r={node:e};ol.xml.pushSerializeAndPop(r,ol.format.KML.DOCUMENT_SERIALIZERS_,ol.format.KML.DOCUMENT_NODE_FACTORY_,o,t,undefined,this)};ol.format.KML.writeIcon_=function(e,o,t){var r={node:e};var i=t[t.length-1].node;var n=ol.format.KML.ICON_SEQUENCE_[i.namespaceURI];var a=ol.xml.makeSequence(o,n);ol.xml.pushSerializeAndPop(r,ol.format.KML.ICON_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,a,t,n);n=ol.format.KML.ICON_SEQUENCE_[ol.format.KML.GX_NAMESPACE_URIS_[0]];a=ol.xml.makeSequence(o,n);ol.xml.pushSerializeAndPop(r,ol.format.KML.ICON_SERIALIZERS_,ol.format.KML.GX_NODE_FACTORY_,a,t,n)};ol.format.KML.writeIconStyle_=function(e,o,t){var r={node:e};var i={};var n=o.getSrc();var a=o.getSize();var l=o.getImageSize();var s={href:n};if(a){s["w"]=a[0];s["h"]=a[1];var g=o.getAnchor();var p=o.getOrigin();if(p&&l&&p[0]!==0&&p[1]!==a[1]){s["x"]=p[0];s["y"]=l[1]-(p[1]+a[1])}if(g&&g[0]!==0&&g[1]!==a[1]){var u={x:g[0],xunits:ol.style.IconAnchorUnits.PIXELS,y:a[1]-g[1],yunits:ol.style.IconAnchorUnits.PIXELS};i["hotSpot"]=u}}i["Icon"]=s;var c=o.getScale();if(c!==1){i["scale"]=c}var d=o.getRotation();if(d!==0){i["heading"]=d}var y=t[t.length-1].node;var h=ol.format.KML.ICON_STYLE_SEQUENCE_[y.namespaceURI];var m=ol.xml.makeSequence(i,h);ol.xml.pushSerializeAndPop(r,ol.format.KML.ICON_STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,m,t,h)};ol.format.KML.writeLabelStyle_=function(e,o,t){var r={node:e};var i={};var n=o.getFill();if(n){i["color"]=n.getColor()}var a=o.getScale();if(a&&a!==1){i["scale"]=a}var l=t[t.length-1].node;var s=ol.format.KML.LABEL_STYLE_SEQUENCE_[l.namespaceURI];var g=ol.xml.makeSequence(i,s);ol.xml.pushSerializeAndPop(r,ol.format.KML.LABEL_STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,g,t,s)};ol.format.KML.writeLineStyle_=function(e,o,t){var r={node:e};var i={color:o.getColor(),width:o.getWidth()};var n=t[t.length-1].node;var a=ol.format.KML.LINE_STYLE_SEQUENCE_[n.namespaceURI];var l=ol.xml.makeSequence(i,a);ol.xml.pushSerializeAndPop(r,ol.format.KML.LINE_STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,l,t,a)};ol.format.KML.writeMultiGeometry_=function(e,o,t){goog.asserts.assert(o instanceof ol.geom.MultiPoint||o instanceof ol.geom.MultiLineString||o instanceof ol.geom.MultiPolygon,"geometry should be one of: ol.geom.MultiPoint, "+"ol.geom.MultiLineString or ol.geom.MultiPolygon");var r={node:e};var i=o.getType();var n;var a;if(i==ol.geom.GeometryType.MULTI_POINT){n=o.getPoints();a=ol.format.KML.POINT_NODE_FACTORY_}else if(i==ol.geom.GeometryType.MULTI_LINE_STRING){n=o.getLineStrings();a=ol.format.KML.LINE_STRING_NODE_FACTORY_}else if(i==ol.geom.GeometryType.MULTI_POLYGON){n=o.getPolygons();a=ol.format.KML.POLYGON_NODE_FACTORY_}else{goog.asserts.fail("Unknown geometry type: "+i)}ol.xml.pushSerializeAndPop(r,ol.format.KML.MULTI_GEOMETRY_SERIALIZERS_,a,n,t)};ol.format.KML.writeBoundaryIs_=function(e,o,t){var r={node:e};ol.xml.pushSerializeAndPop(r,ol.format.KML.BOUNDARY_IS_SERIALIZERS_,ol.format.KML.LINEAR_RING_NODE_FACTORY_,[o],t)};ol.format.KML.writePlacemark_=function(e,o,t){var r={node:e};if(o.getId()){e.setAttribute("id",o.getId())}var i=o.getProperties();var n=o.getStyleFunction();if(n){var a=n.call(o,0);if(a){var l=goog.isArray(a)?a[0]:a;if(this.writeStyles_){i["Style"]=l}var s=l.getText();if(s){i["name"]=s.getText()}}}var g=t[t.length-1].node;var p=ol.format.KML.PLACEMARK_SEQUENCE_[g.namespaceURI];var u=ol.xml.makeSequence(i,p);ol.xml.pushSerializeAndPop(r,ol.format.KML.PLACEMARK_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,u,t,p);var c=t[0];var d=o.getGeometry();if(d){d=ol.format.Feature.transformWithOptions(d,true,c)}ol.xml.pushSerializeAndPop(r,ol.format.KML.PLACEMARK_SERIALIZERS_,ol.format.KML.GEOMETRY_NODE_FACTORY_,[d],t)};ol.format.KML.writePrimitiveGeometry_=function(e,o,t){goog.asserts.assert(o instanceof ol.geom.Point||o instanceof ol.geom.LineString||o instanceof ol.geom.LinearRing,"geometry should be one of ol.geom.Point, ol.geom.LineString "+"or ol.geom.LinearRing");var r=o.getFlatCoordinates();var i={node:e};i["layout"]=o.getLayout();i["stride"]=o.getStride();ol.xml.pushSerializeAndPop(i,ol.format.KML.PRIMITIVE_GEOMETRY_SERIALIZERS_,ol.format.KML.COORDINATES_NODE_FACTORY_,[r],t)};ol.format.KML.writePolygon_=function(e,o,t){goog.asserts.assertInstanceof(o,ol.geom.Polygon,"polygon should be an ol.geom.Polygon");var r=o.getLinearRings();goog.asserts.assert(r.length>0,"linearRings should not be empty");var i=r.shift();var n={node:e};ol.xml.pushSerializeAndPop(n,ol.format.KML.POLYGON_SERIALIZERS_,ol.format.KML.INNER_BOUNDARY_NODE_FACTORY_,r,t);ol.xml.pushSerializeAndPop(n,ol.format.KML.POLYGON_SERIALIZERS_,ol.format.KML.OUTER_BOUNDARY_NODE_FACTORY_,[i],t)};ol.format.KML.writePolyStyle_=function(e,o,t){var r={node:e};ol.xml.pushSerializeAndPop(r,ol.format.KML.POLY_STYLE_SERIALIZERS_,ol.format.KML.COLOR_NODE_FACTORY_,[o.getColor()],t)};ol.format.KML.writeScaleTextNode_=function(e,o){ol.format.XSD.writeDecimalTextNode(e,o*o)};ol.format.KML.writeStyle_=function(e,o,t){var r={node:e};var i={};var n=o.getFill();var a=o.getStroke();var l=o.getImage();var s=o.getText();if(l instanceof ol.style.Icon){i["IconStyle"]=l}if(s){i["LabelStyle"]=s}if(a){i["LineStyle"]=a}if(n){i["PolyStyle"]=n}var g=t[t.length-1].node;var p=ol.format.KML.STYLE_SEQUENCE_[g.namespaceURI];var u=ol.xml.makeSequence(i,p);ol.xml.pushSerializeAndPop(r,ol.format.KML.STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,u,t,p)};ol.format.KML.writeVec2_=function(e,o){e.setAttribute("x",o.x);e.setAttribute("y",o.y);e.setAttribute("xunits",o.xunits);e.setAttribute("yunits",o.yunits)};ol.format.KML.KML_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["Document","Placemark"]);ol.format.KML.KML_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Document:ol.xml.makeChildAppender(ol.format.KML.writeDocument_),Placemark:ol.xml.makeChildAppender(ol.format.KML.writePlacemark_)});ol.format.KML.DOCUMENT_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Placemark:ol.xml.makeChildAppender(ol.format.KML.writePlacemark_)});ol.format.KML.GEOMETRY_TYPE_TO_NODENAME_={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry"};ol.format.KML.ICON_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["href"],ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,["x","y","w","h"]));ol.format.KML.ICON_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{href:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{x:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),y:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),w:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),h:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode)}));ol.format.KML.ICON_STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["scale","heading","Icon","hotSpot"]);ol.format.KML.ICON_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Icon:ol.xml.makeChildAppender(ol.format.KML.writeIcon_),heading:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),hotSpot:ol.xml.makeChildAppender(ol.format.KML.writeVec2_),scale:ol.xml.makeChildAppender(ol.format.KML.writeScaleTextNode_)});ol.format.KML.LABEL_STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["color","scale"]);ol.format.KML.LABEL_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeChildAppender(ol.format.KML.writeColorTextNode_),scale:ol.xml.makeChildAppender(ol.format.KML.writeScaleTextNode_)});ol.format.KML.LINE_STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["color","width"]);ol.format.KML.LINE_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeChildAppender(ol.format.KML.writeColorTextNode_),width:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode)});ol.format.KML.BOUNDARY_IS_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LinearRing:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_)});ol.format.KML.MULTI_GEOMETRY_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LineString:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),Point:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),Polygon:ol.xml.makeChildAppender(ol.format.KML.writePolygon_)});ol.format.KML.PLACEMARK_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]);ol.format.KML.PLACEMARK_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{MultiGeometry:ol.xml.makeChildAppender(ol.format.KML.writeMultiGeometry_),LineString:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),LinearRing:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),Point:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),Polygon:ol.xml.makeChildAppender(ol.format.KML.writePolygon_),Style:ol.xml.makeChildAppender(ol.format.KML.writeStyle_),address:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),description:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),name:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),open:ol.xml.makeChildAppender(ol.format.XSD.writeBooleanTextNode),phoneNumber:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),styleUrl:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),visibility:ol.xml.makeChildAppender(ol.format.XSD.writeBooleanTextNode)});ol.format.KML.PRIMITIVE_GEOMETRY_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{coordinates:ol.xml.makeChildAppender(ol.format.KML.writeCoordinatesTextNode_)});ol.format.KML.POLYGON_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{outerBoundaryIs:ol.xml.makeChildAppender(ol.format.KML.writeBoundaryIs_),innerBoundaryIs:ol.xml.makeChildAppender(ol.format.KML.writeBoundaryIs_)});ol.format.KML.POLY_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeChildAppender(ol.format.KML.writeColorTextNode_)});ol.format.KML.STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["IconStyle","LabelStyle","LineStyle","PolyStyle"]);ol.format.KML.STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{IconStyle:ol.xml.makeChildAppender(ol.format.KML.writeIconStyle_),LabelStyle:ol.xml.makeChildAppender(ol.format.KML.writeLabelStyle_),LineStyle:ol.xml.makeChildAppender(ol.format.KML.writeLineStyle_),PolyStyle:ol.xml.makeChildAppender(ol.format.KML.writePolyStyle_)});ol.format.KML.GX_NODE_FACTORY_=function(e,o,t){return ol.xml.createElementNS(ol.format.KML.GX_NAMESPACE_URIS_[0],"gx:"+t)};ol.format.KML.DOCUMENT_NODE_FACTORY_=function(e,o,t){goog.asserts.assertInstanceof(e,ol.Feature,"value should be an ol.Feature");var r=o[o.length-1].node;goog.asserts.assert(ol.xml.isNode(r),"parentNode should be an XML node");return ol.xml.createElementNS(r.namespaceURI,"Placemark")};ol.format.KML.GEOMETRY_NODE_FACTORY_=function(e,o,t){if(e){goog.asserts.assertInstanceof(e,ol.geom.Geometry,"value should be an ol.geom.Geometry");var r=o[o.length-1].node
;goog.asserts.assert(ol.xml.isNode(r),"parentNode should be an XML node");return ol.xml.createElementNS(r.namespaceURI,ol.format.KML.GEOMETRY_TYPE_TO_NODENAME_[e.getType()])}};ol.format.KML.COLOR_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("color");ol.format.KML.COORDINATES_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("coordinates");ol.format.KML.INNER_BOUNDARY_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("innerBoundaryIs");ol.format.KML.POINT_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("Point");ol.format.KML.LINE_STRING_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("LineString");ol.format.KML.LINEAR_RING_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("LinearRing");ol.format.KML.POLYGON_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("Polygon");ol.format.KML.OUTER_BOUNDARY_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("outerBoundaryIs");ol.format.KML.prototype.writeFeatures;ol.format.KML.prototype.writeFeaturesNode=function(e,o){o=this.adaptOptions(o);var t=ol.xml.createElementNS(ol.format.KML.NAMESPACE_URIS_[4],"kml");var r="http://www.w3.org/2000/xmlns/";var i="http://www.w3.org/2001/XMLSchema-instance";ol.xml.setAttributeNS(t,r,"xmlns:gx",ol.format.KML.GX_NAMESPACE_URIS_[0]);ol.xml.setAttributeNS(t,r,"xmlns:xsi",i);ol.xml.setAttributeNS(t,i,"xsi:schemaLocation",ol.format.KML.SCHEMA_LOCATION_);var n={node:t};var a={};if(e.length>1){a["Document"]=e}else if(e.length==1){a["Placemark"]=e[0]}var l=ol.format.KML.KML_SEQUENCE_[t.namespaceURI];var s=ol.xml.makeSequence(a,l);ol.xml.pushSerializeAndPop(n,ol.format.KML.KML_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,s,[o],l,this);return t};goog.provide("ol.ext.pbf");ol.ext.pbf;(function(){var e={};var o={exports:e};var t;(function(r){if(typeof e==="object"&&typeof o!=="undefined"){o.exports=r()}else if(typeof t==="function"&&t.amd){t([],r)}else{var i;if(typeof window!=="undefined"){i=window}else if(typeof global!=="undefined"){i=global}else if(typeof self!=="undefined"){i=self}else{i=this}i.pbf=r()}})(function(){var e,o,t;return function e(o,t,r){function i(a,l){if(!t[a]){if(!o[a]){var s=typeof require=="function"&&require;if(!l&&s)return s(a,!0);if(n)return n(a,!0);var g=new Error("Cannot find module '"+a+"'");throw g.code="MODULE_NOT_FOUND",g}var p=t[a]={exports:{}};o[a][0].call(p.exports,function(e){var t=o[a][1][e];return i(t?t:e)},p,p.exports,e,o,t,r)}return t[a].exports}var n=typeof require=="function"&&require;for(var a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,o,t){"use strict";o.exports=n;var r=e("ieee754");var i;function n(e){var o;if(e&&e.length){o=e;e=o.length}var t=new Uint8Array(e||0);if(o)t.set(o);t.readUInt32LE=i.readUInt32LE;t.writeUInt32LE=i.writeUInt32LE;t.readInt32LE=i.readInt32LE;t.writeInt32LE=i.writeInt32LE;t.readFloatLE=i.readFloatLE;t.writeFloatLE=i.writeFloatLE;t.readDoubleLE=i.readDoubleLE;t.writeDoubleLE=i.writeDoubleLE;t.toString=i.toString;t.write=i.write;t.slice=i.slice;t.copy=i.copy;t._isBuffer=true;return t}var a,l;i={readUInt32LE:function(e){return(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},writeUInt32LE:function(e,o){this[o]=e;this[o+1]=e>>>8;this[o+2]=e>>>16;this[o+3]=e>>>24},readInt32LE:function(e){return(this[e]|this[e+1]<<8|this[e+2]<<16)+(this[e+3]<<24)},readFloatLE:function(e){return r.read(this,e,true,23,4)},readDoubleLE:function(e){return r.read(this,e,true,52,8)},writeFloatLE:function(e,o){return r.write(this,e,o,true,23,4)},writeDoubleLE:function(e,o){return r.write(this,e,o,true,52,8)},toString:function(e,o,t){var r="",i="";o=o||0;t=Math.min(this.length,t||this.length);for(var n=o;n<t;n++){var a=this[n];if(a<=127){r+=decodeURIComponent(i)+String.fromCharCode(a);i=""}else{i+="%"+a.toString(16)}}r+=decodeURIComponent(i);return r},write:function(e,o){var t=e===a?l:s(e);for(var r=0;r<t.length;r++){this[o+r]=t[r]}},slice:function(e,o){return this.subarray(e,o)},copy:function(e,o){o=o||0;for(var t=0;t<this.length;t++){e[o+t]=this[t]}}};i.writeInt32LE=i.writeUInt32LE;n.byteLength=function(e){a=e;l=s(e);return l.length};n.isBuffer=function(e){return!!(e&&e._isBuffer)};function s(e){var o=e.length,t=[];for(var r=0,i,n;r<o;r++){i=e.charCodeAt(r);if(i>55295&&i<57344){if(n){if(i<56320){t.push(239,191,189);n=i;continue}else{i=n-55296<<10|i-56320|65536;n=null}}else{if(i>56319||r+1===o)t.push(239,191,189);else n=i;continue}}else if(n){t.push(239,191,189);n=null}if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,i&63|128);else if(i<65536)t.push(i>>12|224,i>>6&63|128,i&63|128);else t.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}return t}},{ieee754:3}],2:[function(e,o,t){(function(t){"use strict";o.exports=i;var r=t.Buffer||e("./buffer");function i(e){this.buf=!r.isBuffer(e)?new r(e||0):e;this.pos=0;this.length=this.buf.length}i.Varint=0;i.Fixed64=1;i.Bytes=2;i.Fixed32=5;var n=(1<<16)*(1<<16),a=1/n,l=Math.pow(2,63);i.prototype={destroy:function(){this.buf=null},readFields:function(e,o,t){t=t||this.length;while(this.pos<t){var r=this.readVarint(),i=r>>3,n=this.pos;e(i,o,this);if(this.pos===n)this.skip(r)}return o},readMessage:function(e,o){return this.readFields(e,o,this.readVarint()+this.pos)},readFixed32:function(){var e=this.buf.readUInt32LE(this.pos);this.pos+=4;return e},readSFixed32:function(){var e=this.buf.readInt32LE(this.pos);this.pos+=4;return e},readFixed64:function(){var e=this.buf.readUInt32LE(this.pos)+this.buf.readUInt32LE(this.pos+4)*n;this.pos+=8;return e},readSFixed64:function(){var e=this.buf.readUInt32LE(this.pos)+this.buf.readInt32LE(this.pos+4)*n;this.pos+=8;return e},readFloat:function(){var e=this.buf.readFloatLE(this.pos);this.pos+=4;return e},readDouble:function(){var e=this.buf.readDoubleLE(this.pos);this.pos+=8;return e},readVarint:function(){var e=this.buf,o,t,r,i,n,a;r=e[this.pos++];if(r<128)return r;r=r&127;i=e[this.pos++];if(i<128)return r|i<<7;i=(i&127)<<7;n=e[this.pos++];if(n<128)return r|i|n<<14;n=(n&127)<<14;a=e[this.pos++];if(a<128)return r|i|n|a<<21;o=r|i|n|(a&127)<<21;t=e[this.pos++];o+=(t&127)*268435456;if(t<128)return o;t=e[this.pos++];o+=(t&127)*34359738368;if(t<128)return o;t=e[this.pos++];o+=(t&127)*4398046511104;if(t<128)return o;t=e[this.pos++];o+=(t&127)*562949953421312;if(t<128)return o;t=e[this.pos++];o+=(t&127)*72057594037927940;if(t<128)return o;t=e[this.pos++];o+=(t&127)*0x8000000000000000;if(t<128)return o;throw new Error("Expected varint not more than 10 bytes")},readVarint64:function(){var e=this.pos,o=this.readVarint();if(o<l)return o;var t=this.pos-2;while(this.buf[t]===255)t--;if(t<e)t=e;o=0;for(var r=0;r<t-e+1;r++){var i=~this.buf[e+r]&127;o+=r<4?i<<r*7:i*Math.pow(2,r*7)}return-o-1},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,o=this.buf.toString("utf8",this.pos,e);this.pos=e;return o},readBytes:function(){var e=this.readVarint()+this.pos,o=this.buf.slice(this.pos,e);this.pos=e;return o},readPackedVarint:function(){var e=this.readVarint()+this.pos,o=[];while(this.pos<e)o.push(this.readVarint());return o},readPackedSVarint:function(){var e=this.readVarint()+this.pos,o=[];while(this.pos<e)o.push(this.readSVarint());return o},readPackedBoolean:function(){var e=this.readVarint()+this.pos,o=[];while(this.pos<e)o.push(this.readBoolean());return o},readPackedFloat:function(){var e=this.readVarint()+this.pos,o=[];while(this.pos<e)o.push(this.readFloat());return o},readPackedDouble:function(){var e=this.readVarint()+this.pos,o=[];while(this.pos<e)o.push(this.readDouble());return o},readPackedFixed32:function(){var e=this.readVarint()+this.pos,o=[];while(this.pos<e)o.push(this.readFixed32());return o},readPackedSFixed32:function(){var e=this.readVarint()+this.pos,o=[];while(this.pos<e)o.push(this.readSFixed32());return o},readPackedFixed64:function(){var e=this.readVarint()+this.pos,o=[];while(this.pos<e)o.push(this.readFixed64());return o},readPackedSFixed64:function(){var e=this.readVarint()+this.pos,o=[];while(this.pos<e)o.push(this.readSFixed64());return o},skip:function(e){var o=e&7;if(o===i.Varint)while(this.buf[this.pos++]>127){}else if(o===i.Bytes)this.pos=this.readVarint()+this.pos;else if(o===i.Fixed32)this.pos+=4;else if(o===i.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+o)},writeTag:function(e,o){this.writeVarint(e<<3|o)},realloc:function(e){var o=this.length||16;while(o<this.pos+e)o*=2;if(o!==this.length){var t=new r(o);this.buf.copy(t);this.buf=t;this.length=o}},finish:function(){this.length=this.pos;this.pos=0;return this.buf.slice(0,this.length)},writeFixed32:function(e){this.realloc(4);this.buf.writeUInt32LE(e,this.pos);this.pos+=4},writeSFixed32:function(e){this.realloc(4);this.buf.writeInt32LE(e,this.pos);this.pos+=4},writeFixed64:function(e){this.realloc(8);this.buf.writeInt32LE(e&-1,this.pos);this.buf.writeUInt32LE(Math.floor(e*a),this.pos+4);this.pos+=8},writeSFixed64:function(e){this.realloc(8);this.buf.writeInt32LE(e&-1,this.pos);this.buf.writeInt32LE(Math.floor(e*a),this.pos+4);this.pos+=8},writeVarint:function(e){e=+e;if(e<=127){this.realloc(1);this.buf[this.pos++]=e}else if(e<=16383){this.realloc(2);this.buf[this.pos++]=e>>>0&127|128;this.buf[this.pos++]=e>>>7&127}else if(e<=2097151){this.realloc(3);this.buf[this.pos++]=e>>>0&127|128;this.buf[this.pos++]=e>>>7&127|128;this.buf[this.pos++]=e>>>14&127}else if(e<=268435455){this.realloc(4);this.buf[this.pos++]=e>>>0&127|128;this.buf[this.pos++]=e>>>7&127|128;this.buf[this.pos++]=e>>>14&127|128;this.buf[this.pos++]=e>>>21&127}else{var o=this.pos;while(e>=128){this.realloc(1);this.buf[this.pos++]=e&255|128;e/=128}this.realloc(1);this.buf[this.pos++]=e|0;if(this.pos-o>10)throw new Error("Given varint doesn't fit into 10 bytes")}},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e);var o=r.byteLength(e);this.writeVarint(o);this.realloc(o);this.buf.write(e,this.pos);this.pos+=o},writeFloat:function(e){this.realloc(4);this.buf.writeFloatLE(e,this.pos);this.pos+=4},writeDouble:function(e){this.realloc(8);this.buf.writeDoubleLE(e,this.pos);this.pos+=8},writeBytes:function(e){var o=e.length;this.writeVarint(o);this.realloc(o);for(var t=0;t<o;t++)this.buf[this.pos++]=e[t]},writeRawMessage:function(e,o){this.pos++;var t=this.pos;e(o,this);var r=this.pos-t;var i=r<=127?1:r<=16383?2:r<=2097151?3:r<=268435455?4:Math.ceil(Math.log(r)/(Math.LN2*7));if(i>1){this.realloc(i-1);for(var n=this.pos-1;n>=t;n--)this.buf[n+i-1]=this.buf[n]}this.pos=t-1;this.writeVarint(r);this.pos+=r},writeMessage:function(e,o,t){this.writeTag(e,i.Bytes);this.writeRawMessage(o,t)},writePackedVarint:function(e,o){this.writeMessage(e,s,o)},writePackedSVarint:function(e,o){this.writeMessage(e,g,o)},writePackedBoolean:function(e,o){this.writeMessage(e,c,o)},writePackedFloat:function(e,o){this.writeMessage(e,p,o)},writePackedDouble:function(e,o){this.writeMessage(e,u,o)},writePackedFixed32:function(e,o){this.writeMessage(e,d,o)},writePackedSFixed32:function(e,o){this.writeMessage(e,y,o)},writePackedFixed64:function(e,o){this.writeMessage(e,h,o)},writePackedSFixed64:function(e,o){this.writeMessage(e,m,o)},writeBytesField:function(e,o){this.writeTag(e,i.Bytes);this.writeBytes(o)},writeFixed32Field:function(e,o){this.writeTag(e,i.Fixed32);this.writeFixed32(o)},writeSFixed32Field:function(e,o){this.writeTag(e,i.Fixed32);this.writeSFixed32(o)},writeFixed64Field:function(e,o){this.writeTag(e,i.Fixed64);this.writeFixed64(o)},writeSFixed64Field:function(e,o){this.writeTag(e,i.Fixed64);this.writeSFixed64(o)},writeVarintField:function(e,o){this.writeTag(e,i.Varint);this.writeVarint(o)},writeSVarintField:function(e,o){this.writeTag(e,i.Varint);this.writeSVarint(o)},writeStringField:function(e,o){this.writeTag(e,i.Bytes);this.writeString(o)},writeFloatField:function(e,o){this.writeTag(e,i.Fixed32);this.writeFloat(o)},writeDoubleField:function(e,o){this.writeTag(e,i.Fixed64);this.writeDouble(o)},writeBooleanField:function(e,o){this.writeVarintField(e,Boolean(o))}};function s(e,o){for(var t=0;t<e.length;t++)o.writeVarint(e[t])}function g(e,o){for(var t=0;t<e.length;t++)o.writeSVarint(e[t])}function p(e,o){for(var t=0;t<e.length;t++)o.writeFloat(e[t])}function u(e,o){for(var t=0;t<e.length;t++)o.writeDouble(e[t])}function c(e,o){for(var t=0;t<e.length;t++)o.writeBoolean(e[t])}function d(e,o){for(var t=0;t<e.length;t++)o.writeFixed32(e[t])}function y(e,o){for(var t=0;t<e.length;t++)o.writeSFixed32(e[t])}function h(e,o){for(var t=0;t<e.length;t++)o.writeFixed64(e[t])}function m(e,o){for(var t=0;t<e.length;t++)o.writeSFixed64(e[t])}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./buffer":1}],3:[function(e,o,t){t.read=function(e,o,t,r,i){var n,a;var l=i*8-r-1;var s=(1<<l)-1;var g=s>>1;var p=-7;var u=t?i-1:0;var c=t?-1:1;var d=e[o+u];u+=c;n=d&(1<<-p)-1;d>>=-p;p+=l;for(;p>0;n=n*256+e[o+u],u+=c,p-=8){}a=n&(1<<-p)-1;n>>=-p;p+=r;for(;p>0;a=a*256+e[o+u],u+=c,p-=8){}if(n===0){n=1-g}else if(n===s){return a?NaN:(d?-1:1)*Infinity}else{a=a+Math.pow(2,r);n=n-g}return(d?-1:1)*a*Math.pow(2,n-r)};t.write=function(e,o,t,r,i,n){var a,l,s;var g=n*8-i-1;var p=(1<<g)-1;var u=p>>1;var c=i===23?Math.pow(2,-24)-Math.pow(2,-77):0;var d=r?0:n-1;var y=r?1:-1;var h=o<0||o===0&&1/o<0?1:0;o=Math.abs(o);if(isNaN(o)||o===Infinity){l=isNaN(o)?1:0;a=p}else{a=Math.floor(Math.log(o)/Math.LN2);if(o*(s=Math.pow(2,-a))<1){a--;s*=2}if(a+u>=1){o+=c/s}else{o+=c*Math.pow(2,1-u)}if(o*s>=2){a++;s/=2}if(a+u>=p){l=0;a=p}else if(a+u>=1){l=(o*s-1)*Math.pow(2,i);a=a+u}else{l=o*Math.pow(2,u-1)*Math.pow(2,i);a=0}}for(;i>=8;e[t+d]=l&255,d+=y,l/=256,i-=8){}a=a<<i|l;g+=i;for(;g>0;e[t+d]=a&255,d+=y,a/=256,g-=8){}e[t+d-y]|=h*128}},{}]},{},[2])(2)});ol.ext.pbf=o.exports})();goog.provide("ol.ext.vectortile");ol.ext.vectortile;(function(){var e={};var o={exports:e};var t;(function(r){if(typeof e==="object"&&typeof o!=="undefined"){o.exports=r()}else if(typeof t==="function"&&t.amd){t([],r)}else{var i;if(typeof window!=="undefined"){i=window}else if(typeof global!=="undefined"){i=global}else if(typeof self!=="undefined"){i=self}else{i=this}i.vectortile=r()}})(function(){var e,o,t;return function e(o,t,r){function i(a,l){if(!t[a]){if(!o[a]){var s=typeof require=="function"&&require;if(!l&&s)return s(a,!0);if(n)return n(a,!0);var g=new Error("Cannot find module '"+a+"'");throw g.code="MODULE_NOT_FOUND",g}var p=t[a]={exports:{}};o[a][0].call(p.exports,function(e){var t=o[a][1][e];return i(t?t:e)},p,p.exports,e,o,t,r)}return t[a].exports}var n=typeof require=="function"&&require;for(var a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,o,t){o.exports.VectorTile=e("./lib/vectortile.js");o.exports.VectorTileFeature=e("./lib/vectortilefeature.js");o.exports.VectorTileLayer=e("./lib/vectortilelayer.js")},{"./lib/vectortile.js":2,"./lib/vectortilefeature.js":3,"./lib/vectortilelayer.js":4}],2:[function(e,o,t){"use strict";var r=e("./vectortilelayer");o.exports=i;function i(e,o){this.layers=e.readFields(n,{},o)}function n(e,o,t){if(e===3){var i=new r(t,t.readVarint()+t.pos);if(i.length)o[i.name]=i}}},{"./vectortilelayer":4}],3:[function(e,o,t){"use strict";var r=e("point-geometry");o.exports=i;function i(e,o,t,r,i){this.properties={};this.extent=t;this.type=0;this._pbf=e;this._geometry=-1;this._keys=r;this._values=i;e.readFields(n,this,o)}function n(e,o,t){if(e==1)o._id=t.readVarint();else if(e==2)a(t,o);else if(e==3)o.type=t.readVarint();else if(e==4)o._geometry=t.pos}function a(e,o){var t=e.readVarint()+e.pos;while(e.pos<t){var r=o._keys[e.readVarint()],i=o._values[e.readVarint()];o.properties[r]=i}}i.types=["Unknown","Point","LineString","Polygon"];i.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;var o=e.readVarint()+e.pos,t=1,i=0,n=0,a=0,l=[],s;while(e.pos<o){if(!i){var g=e.readVarint();t=g&7;i=g>>3}i--;if(t===1||t===2){n+=e.readSVarint();a+=e.readSVarint();if(t===1){if(s)l.push(s);s=[]}s.push(new r(n,a))}else if(t===7){if(s){s.push(s[0].clone())}}else{throw new Error("unknown command "+t)}}if(s)l.push(s);return l};i.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;var o=e.readVarint()+e.pos,t=1,r=0,i=0,n=0,a=Infinity,l=-Infinity,s=Infinity,g=-Infinity;while(e.pos<o){if(!r){var p=e.readVarint();t=p&7;r=p>>3}r--;if(t===1||t===2){i+=e.readSVarint();n+=e.readSVarint();if(i<a)a=i;if(i>l)l=i;if(n<s)s=n;if(n>g)g=n}else if(t!==7){throw new Error("unknown command "+t)}}return[a,s,l,g]};i.prototype.toGeoJSON=function(e,o,t){var r=this.extent*Math.pow(2,t),n=this.extent*e,a=this.extent*o,l=this.loadGeometry(),s=i.types[this.type];for(var g=0;g<l.length;g++){var p=l[g];for(var u=0;u<p.length;u++){var c=p[u],d=180-(c.y+a)*360/r;p[u]=[(c.x+n)*360/r-180,360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90]}}if(s==="Point"&&l.length===1){l=l[0][0]}else if(s==="Point"){l=l[0];s="MultiPoint"}else if(s==="LineString"&&l.length===1){l=l[0]}else if(s==="LineString"){s="MultiLineString"}var y={type:"Feature",geometry:{type:s,coordinates:l},properties:this.properties};if("_id"in this){y.id=this._id}return y}},{"point-geometry":5}],4:[function(e,o,t){"use strict";var r=e("./vectortilefeature.js");o.exports=i;function i(e,o){this.version=1;this.name=null;this.extent=4096;this.length=0;this._pbf=e;this._keys=[];this._values=[];this._features=[];e.readFields(n,this,o);this.length=this._features.length}function n(e,o,t){if(e===15)o.version=t.readVarint();else if(e===1)o.name=t.readString();else if(e===5)o.extent=t.readVarint();else if(e===2)o._features.push(t.pos);else if(e===3)o._keys.push(t.readString());else if(e===4)o._values.push(a(t))}function a(e){var o=null,t=e.readVarint()+e.pos;while(e.pos<t){var r=e.readVarint()>>3;o=r===1?e.readString():r===2?e.readFloat():r===3?e.readDouble():r===4?e.readVarint64():r===5?e.readVarint():r===6?e.readSVarint():r===7?e.readBoolean():null}return o}i.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var o=this._pbf.readVarint()+this._pbf.pos;return new r(this._pbf,o,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":3}],5:[function(e,o,t){"use strict";o.exports=r;function r(e,o){this.x=e;this.y=o}r.prototype={clone:function(){return new r(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var o=e.x-this.x,t=e.y-this.y;return o*o+t*t},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,o){return Math.atan2(this.x*o-this.y*e,this.x*e+this.y*o)},_matMult:function(e){var o=e[0]*this.x+e[1]*this.y,t=e[2]*this.x+e[3]*this.y;this.x=o;this.y=t;return this},_add:function(e){this.x+=e.x;this.y+=e.y;return this},_sub:function(e){this.x-=e.x;this.y-=e.y;return this},_mult:function(e){this.x*=e;this.y*=e;return this},_div:function(e){this.x/=e;this.y/=e;return this},_unit:function(){this._div(this.mag());return this},_perp:function(){var e=this.y;this.y=this.x;this.x=-e;return this},_rotate:function(e){var o=Math.cos(e),t=Math.sin(e),r=o*this.x-t*this.y,i=t*this.x+o*this.y;this.x=r;this.y=i;return this},_round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this}};r.convert=function(e){if(e instanceof r){return e}if(Array.isArray(e)){return new r(e[0],e[1])}return e}},{}]},{},[1])(1)});ol.ext.vectortile=o.exports})();goog.provide("ol.format.MVT");goog.require("goog.asserts");goog.require("ol.Feature");goog.require("ol.ext.pbf");goog.require("ol.ext.vectortile");goog.require("ol.format.Feature");goog.require("ol.format.FormatType");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LineString");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.proj");goog.require("ol.proj.Projection");goog.require("ol.proj.Units");goog.require("ol.render.Feature");ol.format.MVT=function(e){goog.base(this);var o=e?e:{};this.defaultDataProjection=new ol.proj.Projection({code:"",units:ol.proj.Units.TILE_PIXELS});this.featureClass_=o.featureClass?o.featureClass:ol.render.Feature;this.geometryName_=o.geometryName?o.geometryName:"geometry";this.layerName_=o.layerName?o.layerName:"layer";this.layers_=o.layers?o.layers:null};goog.inherits(ol.format.MVT,ol.format.Feature);ol.format.MVT.prototype.getType=function(){return ol.format.FormatType.ARRAY_BUFFER};ol.format.MVT.prototype.readFeature_=function(e,o,t){var r=new this.featureClass_;var i=e.properties;i[this.layerName_]=o;var n=ol.format.Feature.transformWithOptions(ol.format.MVT.readGeometry_(e),false,this.adaptOptions(t));if(n){goog.asserts.assertInstanceof(n,ol.geom.Geometry);i[this.geometryName_]=n}r.setProperties(i);r.setGeometryName(this.geometryName_);return r};ol.format.MVT.prototype.readRenderFeature_=function(e,o){var t=e.loadGeometry();var r=[];var i=[];ol.format.MVT.calculateFlatCoordinates_(t,i,r);var n=e.type;var a;if(n===1){a=t.length===1?ol.geom.GeometryType.POINT:ol.geom.GeometryType.MULTI_POINT}else if(n===2){if(t.length===1){a=ol.geom.GeometryType.LINE_STRING}else{a=ol.geom.GeometryType.MULTI_LINE_STRING}}else if(n===3){a=ol.geom.GeometryType.POLYGON}var l=e.properties;l[this.layerName_]=o;return new this.featureClass_(a,i,r,l)};ol.format.MVT.prototype.readFeatures=function(e,o){goog.asserts.assertInstanceof(e,ArrayBuffer);var t=this.layers_;var r=new ol.ext.pbf(e);var i=new ol.ext.vectortile.VectorTile(r);var n=[];var a=this.featureClass_;var l,s;for(var g in i.layers){if(t&&t.indexOf(g)==-1){continue}l=i.layers[g];for(var p=0,u=l.length;p<u;++p){if(a===ol.render.Feature){s=this.readRenderFeature_(l.feature(p),g)}else{s=this.readFeature_(l.feature(p),g,o)}n.push(s)}}return n};ol.format.MVT.prototype.readProjection=function(e){return this.defaultDataProjection};ol.format.MVT.prototype.setLayers=function(e){this.layers_=e};ol.format.MVT.calculateFlatCoordinates_=function(e,o,t){var r=0;for(var i=0,n=e.length;i<n;++i){var a=e[i];var l,s;for(l=0,s=a.length;l<s;++l){var g=a[l];o.push(g.x,g.y)}r+=2*l;t.push(r)}};ol.format.MVT.readGeometry_=function(e){var o=e.type;if(o===0){return null}var t=e.loadGeometry();var r=[];var i=[];ol.format.MVT.calculateFlatCoordinates_(t,i,r);var n;if(o===1){n=t.length===1?new ol.geom.Point(null):new ol.geom.MultiPoint(null)}else if(o===2){if(t.length===1){n=new ol.geom.LineString(null)}else{n=new ol.geom.MultiLineString(null)}}else if(o===3){n=new ol.geom.Polygon(null)}n.setFlatCoordinates(ol.geom.GeometryLayout.XY,i,r);return n};goog.provide("ol.format.OSMXML");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("ol.array");goog.require("ol.Feature");goog.require("ol.format.Feature");goog.require("ol.format.XMLFeature");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.LineString");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.object");goog.require("ol.proj");goog.require("ol.xml");ol.format.OSMXML=function(){goog.base(this);this.defaultDataProjection=ol.proj.get("EPSG:4326")};goog.inherits(ol.format.OSMXML,ol.format.XMLFeature);ol.format.OSMXML.EXTENSIONS_=[".osm"];ol.format.OSMXML.prototype.getExtensions=function(){return ol.format.OSMXML.EXTENSIONS_};ol.format.OSMXML.readNode_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="node","localName should be node");var t=o[0];var r=o[o.length-1];var i=e.getAttribute("id");var n=[parseFloat(e.getAttribute("lon")),parseFloat(e.getAttribute("lat"))];r.nodes[i]=n;var a=ol.xml.pushParseAndPop({tags:{}},ol.format.OSMXML.NODE_PARSERS_,e,o);if(!ol.object.isEmpty(a.tags)){var l=new ol.geom.Point(n);ol.format.Feature.transformWithOptions(l,false,t);var s=new ol.Feature(l);s.setId(i);s.setProperties(a.tags);r.features.push(s)}};ol.format.OSMXML.readWay_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="way","localName should be way");var t=o[0];var r=e.getAttribute("id");var i=ol.xml.pushParseAndPop({ndrefs:[],tags:{}},ol.format.OSMXML.WAY_PARSERS_,e,o);var n=o[o.length-1];var a=[];for(var l=0,s=i.ndrefs.length;l<s;l++){var g=n.nodes[i.ndrefs[l]];ol.array.extend(a,g)}var p;if(i.ndrefs[0]==i.ndrefs[i.ndrefs.length-1]){p=new ol.geom.Polygon(null);p.setFlatCoordinates(ol.geom.GeometryLayout.XY,a,[a.length])}else{p=new ol.geom.LineString(null);p.setFlatCoordinates(ol.geom.GeometryLayout.XY,a)}ol.format.Feature.transformWithOptions(p,false,t);var u=new ol.Feature(p);u.setId(r);u.setProperties(i.tags);n.features.push(u)};ol.format.OSMXML.readNd_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="nd","localName should be nd");var t=o[o.length-1];t.ndrefs.push(e.getAttribute("ref"))};ol.format.OSMXML.readTag_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="tag","localName should be tag");var t=o[o.length-1];t.tags[e.getAttribute("k")]=e.getAttribute("v")};ol.format.OSMXML.NAMESPACE_URIS_=[null];ol.format.OSMXML.WAY_PARSERS_=ol.xml.makeStructureNS(ol.format.OSMXML.NAMESPACE_URIS_,{nd:ol.format.OSMXML.readNd_,tag:ol.format.OSMXML.readTag_});ol.format.OSMXML.PARSERS_=ol.xml.makeStructureNS(ol.format.OSMXML.NAMESPACE_URIS_,{node:ol.format.OSMXML.readNode_,way:ol.format.OSMXML.readWay_});ol.format.OSMXML.NODE_PARSERS_=ol.xml.makeStructureNS(ol.format.OSMXML.NAMESPACE_URIS_,{tag:ol.format.OSMXML.readTag_});ol.format.OSMXML.prototype.readFeatures;ol.format.OSMXML.prototype.readFeaturesFromNode=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");var t=this.getReadOptions(e,o);if(e.localName=="osm"){var r=ol.xml.pushParseAndPop({nodes:{},features:[]},ol.format.OSMXML.PARSERS_,e,[t]);if(r.features){return r.features}}return[]};ol.format.OSMXML.prototype.readProjection;goog.provide("ol.format.XLink");ol.format.XLink.NAMESPACE_URI="http://www.w3.org/1999/xlink";ol.format.XLink.readHref=function(e){return e.getAttributeNS(ol.format.XLink.NAMESPACE_URI,"href")};goog.provide("ol.format.XML");goog.require("goog.asserts");goog.require("ol.xml");ol.format.XML=function(){};ol.format.XML.prototype.read=function(e){if(ol.xml.isDocument(e)){return this.readFromDocument(e)}else if(ol.xml.isNode(e)){return this.readFromNode(e)}else if(typeof e==="string"){var o=ol.xml.parse(e);return this.readFromDocument(o)}else{goog.asserts.fail();return null}};ol.format.XML.prototype.readFromDocument=goog.abstractMethod;ol.format.XML.prototype.readFromNode=goog.abstractMethod;goog.provide("ol.format.OWS");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("ol.format.XLink");goog.require("ol.format.XML");goog.require("ol.format.XSD");goog.require("ol.xml");ol.format.OWS=function(){goog.base(this)};goog.inherits(ol.format.OWS,ol.format.XML);ol.format.OWS.prototype.readFromDocument=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be DOCUMENT");for(var o=e.firstChild;o;o=o.nextSibling){if(o.nodeType==goog.dom.NodeType.ELEMENT){return this.readFromNode(o)}}return null};ol.format.OWS.prototype.readFromNode=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");var o=ol.xml.pushParseAndPop({},ol.format.OWS.PARSERS_,e,[]);return o?o:null};ol.format.OWS.readAddress_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Address","localName should be Address");return ol.xml.pushParseAndPop({},ol.format.OWS.ADDRESS_PARSERS_,e,o)};ol.format.OWS.readAllowedValues_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="AllowedValues","localName should be AllowedValues");return ol.xml.pushParseAndPop({},ol.format.OWS.ALLOWED_VALUES_PARSERS_,e,o)};ol.format.OWS.readConstraint_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Constraint","localName should be Constraint");var t=e.getAttribute("name");if(!t){return undefined}return ol.xml.pushParseAndPop({name:t},ol.format.OWS.CONSTRAINT_PARSERS_,e,o)};ol.format.OWS.readContactInfo_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="ContactInfo","localName should be ContactInfo");return ol.xml.pushParseAndPop({},ol.format.OWS.CONTACT_INFO_PARSERS_,e,o)};ol.format.OWS.readDcp_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="DCP","localName should be DCP");return ol.xml.pushParseAndPop({},ol.format.OWS.DCP_PARSERS_,e,o)};ol.format.OWS.readGet_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Get","localName should be Get");var t=ol.format.XLink.readHref(e);if(!t){return undefined}return ol.xml.pushParseAndPop({href:t},ol.format.OWS.REQUEST_METHOD_PARSERS_,e,o)};ol.format.OWS.readHttp_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="HTTP","localName should be HTTP");return ol.xml.pushParseAndPop({},ol.format.OWS.HTTP_PARSERS_,e,o)};ol.format.OWS.readOperation_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Operation","localName should be Operation");var t=e.getAttribute("name");var r=ol.xml.pushParseAndPop({},ol.format.OWS.OPERATION_PARSERS_,e,o);if(!r){return undefined}var i=o[o.length-1];goog.asserts.assert(goog.isObject(i),"object should be an Object");i[t]=r};ol.format.OWS.readOperationsMetadata_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="OperationsMetadata","localName should be OperationsMetadata");return ol.xml.pushParseAndPop({},ol.format.OWS.OPERATIONS_METADATA_PARSERS_,e,o)};ol.format.OWS.readPhone_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Phone","localName should be Phone");return ol.xml.pushParseAndPop({},ol.format.OWS.PHONE_PARSERS_,e,o)};ol.format.OWS.readServiceIdentification_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="ServiceIdentification","localName should be ServiceIdentification");return ol.xml.pushParseAndPop({},ol.format.OWS.SERVICE_IDENTIFICATION_PARSERS_,e,o)};ol.format.OWS.readServiceContact_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="ServiceContact","localName should be ServiceContact");return ol.xml.pushParseAndPop({},ol.format.OWS.SERVICE_CONTACT_PARSERS_,e,o)};ol.format.OWS.readServiceProvider_=function(e,o){
goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="ServiceProvider","localName should be ServiceProvider");return ol.xml.pushParseAndPop({},ol.format.OWS.SERVICE_PROVIDER_PARSERS_,e,o)};ol.format.OWS.readValue_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Value","localName should be Value");return ol.format.XSD.readString(e)};ol.format.OWS.NAMESPACE_URIS_=[null,"http://www.opengis.net/ows/1.1"];ol.format.OWS.PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{ServiceIdentification:ol.xml.makeObjectPropertySetter(ol.format.OWS.readServiceIdentification_),ServiceProvider:ol.xml.makeObjectPropertySetter(ol.format.OWS.readServiceProvider_),OperationsMetadata:ol.xml.makeObjectPropertySetter(ol.format.OWS.readOperationsMetadata_)});ol.format.OWS.ADDRESS_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{DeliveryPoint:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),City:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),AdministrativeArea:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),PostalCode:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Country:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ElectronicMailAddress:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.OWS.ALLOWED_VALUES_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Value:ol.xml.makeObjectPropertyPusher(ol.format.OWS.readValue_)});ol.format.OWS.CONSTRAINT_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{AllowedValues:ol.xml.makeObjectPropertySetter(ol.format.OWS.readAllowedValues_)});ol.format.OWS.CONTACT_INFO_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Phone:ol.xml.makeObjectPropertySetter(ol.format.OWS.readPhone_),Address:ol.xml.makeObjectPropertySetter(ol.format.OWS.readAddress_)});ol.format.OWS.DCP_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{HTTP:ol.xml.makeObjectPropertySetter(ol.format.OWS.readHttp_)});ol.format.OWS.HTTP_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Get:ol.xml.makeObjectPropertyPusher(ol.format.OWS.readGet_),Post:undefined});ol.format.OWS.OPERATION_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{DCP:ol.xml.makeObjectPropertySetter(ol.format.OWS.readDcp_)});ol.format.OWS.OPERATIONS_METADATA_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Operation:ol.format.OWS.readOperation_});ol.format.OWS.PHONE_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Voice:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Facsimile:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.OWS.REQUEST_METHOD_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Constraint:ol.xml.makeObjectPropertyPusher(ol.format.OWS.readConstraint_)});ol.format.OWS.SERVICE_CONTACT_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{IndividualName:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),PositionName:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactInfo:ol.xml.makeObjectPropertySetter(ol.format.OWS.readContactInfo_)});ol.format.OWS.SERVICE_IDENTIFICATION_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ServiceTypeVersion:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ServiceType:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.OWS.SERVICE_PROVIDER_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{ProviderName:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ProviderSite:ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref),ServiceContact:ol.xml.makeObjectPropertySetter(ol.format.OWS.readServiceContact_)});goog.provide("ol.geom.flat.flip");goog.require("goog.asserts");ol.geom.flat.flip.flipXY=function(e,o,t,r,i,n){var a,l;if(i!==undefined){a=i;l=n!==undefined?n:0}else{goog.asserts.assert(n===undefined,"opt_destOffSet should be defined");a=[];l=0}var s=o;while(s<t){var g=e[s++];a[l++]=e[s++];a[l++]=g;for(var p=2;p<r;++p){a[l++]=e[s++]}}a.length=l;return a};goog.provide("ol.format.Polyline");goog.require("goog.asserts");goog.require("ol.Feature");goog.require("ol.format.Feature");goog.require("ol.format.TextFeature");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.LineString");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.flip");goog.require("ol.geom.flat.inflate");goog.require("ol.proj");ol.format.Polyline=function(e){var o=e?e:{};goog.base(this);this.defaultDataProjection=ol.proj.get("EPSG:4326");this.factor_=o.factor?o.factor:1e5;this.geometryLayout_=o.geometryLayout?o.geometryLayout:ol.geom.GeometryLayout.XY};goog.inherits(ol.format.Polyline,ol.format.TextFeature);ol.format.Polyline.encodeDeltas=function(e,o,t){var r=t?t:1e5;var i;var n=new Array(o);for(i=0;i<o;++i){n[i]=0}var a,l;for(a=0,l=e.length;a<l;){for(i=0;i<o;++i,++a){var s=e[a];var g=s-n[i];n[i]=s;e[a]=g}}return ol.format.Polyline.encodeFloats(e,r)};ol.format.Polyline.decodeDeltas=function(e,o,t){var r=t?t:1e5;var i;var n=new Array(o);for(i=0;i<o;++i){n[i]=0}var a=ol.format.Polyline.decodeFloats(e,r);var l,s;for(l=0,s=a.length;l<s;){for(i=0;i<o;++i,++l){n[i]+=a[l];a[l]=n[i]}}return a};ol.format.Polyline.encodeFloats=function(e,o){var t=o?o:1e5;var r,i;for(r=0,i=e.length;r<i;++r){e[r]=Math.round(e[r]*t)}return ol.format.Polyline.encodeSignedIntegers(e)};ol.format.Polyline.decodeFloats=function(e,o){var t=o?o:1e5;var r=ol.format.Polyline.decodeSignedIntegers(e);var i,n;for(i=0,n=r.length;i<n;++i){r[i]/=t}return r};ol.format.Polyline.encodeSignedIntegers=function(e){var o,t;for(o=0,t=e.length;o<t;++o){var r=e[o];e[o]=r<0?~(r<<1):r<<1}return ol.format.Polyline.encodeUnsignedIntegers(e)};ol.format.Polyline.decodeSignedIntegers=function(e){var o=ol.format.Polyline.decodeUnsignedIntegers(e);var t,r;for(t=0,r=o.length;t<r;++t){var i=o[t];o[t]=i&1?~(i>>1):i>>1}return o};ol.format.Polyline.encodeUnsignedIntegers=function(e){var o="";var t,r;for(t=0,r=e.length;t<r;++t){o+=ol.format.Polyline.encodeUnsignedInteger(e[t])}return o};ol.format.Polyline.decodeUnsignedIntegers=function(e){var o=[];var t=0;var r=0;var i,n;for(i=0,n=e.length;i<n;++i){var a=e.charCodeAt(i)-63;t|=(a&31)<<r;if(a<32){o.push(t);t=0;r=0}else{r+=5}}return o};ol.format.Polyline.encodeUnsignedInteger=function(e){var o,t="";while(e>=32){o=(32|e&31)+63;t+=String.fromCharCode(o);e>>=5}o=e+63;t+=String.fromCharCode(o);return t};ol.format.Polyline.prototype.readFeature;ol.format.Polyline.prototype.readFeatureFromText=function(e,o){var t=this.readGeometryFromText(e,o);return new ol.Feature(t)};ol.format.Polyline.prototype.readFeatures;ol.format.Polyline.prototype.readFeaturesFromText=function(e,o){var t=this.readFeatureFromText(e,o);return[t]};ol.format.Polyline.prototype.readGeometry;ol.format.Polyline.prototype.readGeometryFromText=function(e,o){var t=ol.geom.SimpleGeometry.getStrideForLayout(this.geometryLayout_);var r=ol.format.Polyline.decodeDeltas(e,t,this.factor_);ol.geom.flat.flip.flipXY(r,0,r.length,t,r);var i=ol.geom.flat.inflate.coordinates(r,0,r.length,t);return ol.format.Feature.transformWithOptions(new ol.geom.LineString(i,this.geometryLayout_),false,this.adaptOptions(o))};ol.format.Polyline.prototype.readProjection;ol.format.Polyline.prototype.writeFeatureText=function(e,o){var t=e.getGeometry();if(t){return this.writeGeometryText(t,o)}else{goog.asserts.fail("geometry needs to be defined");return""}};ol.format.Polyline.prototype.writeFeaturesText=function(e,o){goog.asserts.assert(e.length==1,"features array should have 1 item");return this.writeFeatureText(e[0],o)};ol.format.Polyline.prototype.writeGeometry;ol.format.Polyline.prototype.writeGeometryText=function(e,o){goog.asserts.assertInstanceof(e,ol.geom.LineString,"geometry should be an ol.geom.LineString");e=ol.format.Feature.transformWithOptions(e,true,this.adaptOptions(o));var t=e.getFlatCoordinates();var r=e.getStride();ol.geom.flat.flip.flipXY(t,0,t.length,r,t);return ol.format.Polyline.encodeDeltas(t,r,this.factor_)};goog.provide("ol.format.TopoJSON");goog.require("goog.asserts");goog.require("ol.Feature");goog.require("ol.format.Feature");goog.require("ol.format.JSONFeature");goog.require("ol.geom.LineString");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.object");goog.require("ol.proj");ol.format.TopoJSON=function(e){var o=e?e:{};goog.base(this);this.defaultDataProjection=ol.proj.get(o.defaultDataProjection?o.defaultDataProjection:"EPSG:4326")};goog.inherits(ol.format.TopoJSON,ol.format.JSONFeature);ol.format.TopoJSON.EXTENSIONS_=[".topojson"];ol.format.TopoJSON.concatenateArcs_=function(e,o){var t=[];var r,i;var n,a;var l,s;for(n=0,a=e.length;n<a;++n){r=e[n];if(n>0){t.pop()}if(r>=0){i=o[r]}else{i=o[~r].slice().reverse()}t.push.apply(t,i)}for(l=0,s=t.length;l<s;++l){t[l]=t[l].slice()}return t};ol.format.TopoJSON.readPointGeometry_=function(e,o,t){var r=e.coordinates;if(o&&t){ol.format.TopoJSON.transformVertex_(r,o,t)}return new ol.geom.Point(r)};ol.format.TopoJSON.readMultiPointGeometry_=function(e,o,t){var r=e.coordinates;var i,n;if(o&&t){for(i=0,n=r.length;i<n;++i){ol.format.TopoJSON.transformVertex_(r[i],o,t)}}return new ol.geom.MultiPoint(r)};ol.format.TopoJSON.readLineStringGeometry_=function(e,o){var t=ol.format.TopoJSON.concatenateArcs_(e.arcs,o);return new ol.geom.LineString(t)};ol.format.TopoJSON.readMultiLineStringGeometry_=function(e,o){var t=[];var r,i;for(r=0,i=e.arcs.length;r<i;++r){t[r]=ol.format.TopoJSON.concatenateArcs_(e.arcs[r],o)}return new ol.geom.MultiLineString(t)};ol.format.TopoJSON.readPolygonGeometry_=function(e,o){var t=[];var r,i;for(r=0,i=e.arcs.length;r<i;++r){t[r]=ol.format.TopoJSON.concatenateArcs_(e.arcs[r],o)}return new ol.geom.Polygon(t)};ol.format.TopoJSON.readMultiPolygonGeometry_=function(e,o){var t=[];var r,i,n,a;var l,s;for(l=0,s=e.arcs.length;l<s;++l){r=e.arcs[l];i=[];for(n=0,a=r.length;n<a;++n){i[n]=ol.format.TopoJSON.concatenateArcs_(r[n],o)}t[l]=i}return new ol.geom.MultiPolygon(t)};ol.format.TopoJSON.prototype.getExtensions=function(){return ol.format.TopoJSON.EXTENSIONS_};ol.format.TopoJSON.readFeaturesFromGeometryCollection_=function(e,o,t,r,i){var n=e.geometries;var a=[];var l,s;for(l=0,s=n.length;l<s;++l){a[l]=ol.format.TopoJSON.readFeatureFromGeometry_(n[l],o,t,r,i)}return a};ol.format.TopoJSON.readFeatureFromGeometry_=function(e,o,t,r,i){var n;var a=e.type;var l=ol.format.TopoJSON.GEOMETRY_READERS_[a];goog.asserts.assert(l,"geometryReader should be defined");if(a==="Point"||a==="MultiPoint"){n=l(e,t,r)}else{n=l(e,o)}var s=new ol.Feature;s.setGeometry(ol.format.Feature.transformWithOptions(n,false,i));if(e.id!==undefined){s.setId(e.id)}if(e.properties){s.setProperties(e.properties)}return s};ol.format.TopoJSON.prototype.readFeatures;ol.format.TopoJSON.prototype.readFeaturesFromObject=function(e,o){if(e.type=="Topology"){var t=e;var r,i=null,n=null;if(t.transform){r=t.transform;i=r.scale;n=r.translate}var a=t.arcs;if(r){ol.format.TopoJSON.transformArcs_(a,i,n)}var l=[];var s=ol.object.getValues(t.objects);var g,p;var u;for(g=0,p=s.length;g<p;++g){if(s[g].type==="GeometryCollection"){u=s[g];l.push.apply(l,ol.format.TopoJSON.readFeaturesFromGeometryCollection_(u,a,i,n,o))}else{u=s[g];l.push(ol.format.TopoJSON.readFeatureFromGeometry_(u,a,i,n,o))}}return l}else{return[]}};ol.format.TopoJSON.transformArcs_=function(e,o,t){var r,i;for(r=0,i=e.length;r<i;++r){ol.format.TopoJSON.transformArc_(e[r],o,t)}};ol.format.TopoJSON.transformArc_=function(e,o,t){var r=0;var i=0;var n;var a,l;for(a=0,l=e.length;a<l;++a){n=e[a];r+=n[0];i+=n[1];n[0]=r;n[1]=i;ol.format.TopoJSON.transformVertex_(n,o,t)}};ol.format.TopoJSON.transformVertex_=function(e,o,t){e[0]=e[0]*o[0]+t[0];e[1]=e[1]*o[1]+t[1]};ol.format.TopoJSON.prototype.readProjection=function(e){return this.defaultDataProjection};ol.format.TopoJSON.GEOMETRY_READERS_={Point:ol.format.TopoJSON.readPointGeometry_,LineString:ol.format.TopoJSON.readLineStringGeometry_,Polygon:ol.format.TopoJSON.readPolygonGeometry_,MultiPoint:ol.format.TopoJSON.readMultiPointGeometry_,MultiLineString:ol.format.TopoJSON.readMultiLineStringGeometry_,MultiPolygon:ol.format.TopoJSON.readMultiPolygonGeometry_};goog.provide("ol.format.WFS");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("ol");goog.require("ol.format.GML3");goog.require("ol.format.GMLBase");goog.require("ol.format.XMLFeature");goog.require("ol.format.XSD");goog.require("ol.geom.Geometry");goog.require("ol.object");goog.require("ol.proj");goog.require("ol.xml");ol.format.WFS=function(e){var o=e?e:{};this.featureType_=o.featureType;this.featureNS_=o.featureNS;this.gmlFormat_=o.gmlFormat?o.gmlFormat:new ol.format.GML3;this.schemaLocation_=o.schemaLocation?o.schemaLocation:ol.format.WFS.SCHEMA_LOCATION;goog.base(this)};goog.inherits(ol.format.WFS,ol.format.XMLFeature);ol.format.WFS.FEATURE_PREFIX="feature";ol.format.WFS.XMLNS="http://www.w3.org/2000/xmlns/";ol.format.WFS.FeatureCollectionMetadata;ol.format.WFS.TransactionResponse;ol.format.WFS.SCHEMA_LOCATION="http://www.opengis.net/wfs "+"http://schemas.opengis.net/wfs/1.1.0/wfs.xsd";ol.format.WFS.prototype.readFeatures;ol.format.WFS.prototype.readFeaturesFromNode=function(e,o){var t={featureType:this.featureType_,featureNS:this.featureNS_};ol.object.assign(t,this.getReadOptions(e,o?o:{}));var r=[t];this.gmlFormat_.FEATURE_COLLECTION_PARSERS[ol.format.GMLBase.GMLNS]["featureMember"]=ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readFeaturesInternal);var i=ol.xml.pushParseAndPop([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,e,r,this.gmlFormat_);if(!i){i=[]}return i};ol.format.WFS.prototype.readTransactionResponse=function(e){if(ol.xml.isDocument(e)){return this.readTransactionResponseFromDocument(e)}else if(ol.xml.isNode(e)){return this.readTransactionResponseFromNode(e)}else if(typeof e==="string"){var o=ol.xml.parse(e);return this.readTransactionResponseFromDocument(o)}else{goog.asserts.fail("Unknown source type");return undefined}};ol.format.WFS.prototype.readFeatureCollectionMetadata=function(e){if(ol.xml.isDocument(e)){return this.readFeatureCollectionMetadataFromDocument(e)}else if(ol.xml.isNode(e)){return this.readFeatureCollectionMetadataFromNode(e)}else if(typeof e==="string"){var o=ol.xml.parse(e);return this.readFeatureCollectionMetadataFromDocument(o)}else{goog.asserts.fail("Unknown source type");return undefined}};ol.format.WFS.prototype.readFeatureCollectionMetadataFromDocument=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be DOCUMENT");for(var o=e.firstChild;o;o=o.nextSibling){if(o.nodeType==goog.dom.NodeType.ELEMENT){return this.readFeatureCollectionMetadataFromNode(o)}}return undefined};ol.format.WFS.FEATURE_COLLECTION_PARSERS_={"http://www.opengis.net/gml":{boundedBy:ol.xml.makeObjectPropertySetter(ol.format.GMLBase.prototype.readGeometryElement,"bounds")}};ol.format.WFS.prototype.readFeatureCollectionMetadataFromNode=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="FeatureCollection","localName should be FeatureCollection");var o={};var t=ol.format.XSD.readNonNegativeIntegerString(e.getAttribute("numberOfFeatures"));o["numberOfFeatures"]=t;return ol.xml.pushParseAndPop(o,ol.format.WFS.FEATURE_COLLECTION_PARSERS_,e,[],this.gmlFormat_)};ol.format.WFS.TRANSACTION_SUMMARY_PARSERS_={"http://www.opengis.net/wfs":{totalInserted:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),totalUpdated:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),totalDeleted:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger)}};ol.format.WFS.readTransactionSummary_=function(e,o){return ol.xml.pushParseAndPop({},ol.format.WFS.TRANSACTION_SUMMARY_PARSERS_,e,o)};ol.format.WFS.OGC_FID_PARSERS_={"http://www.opengis.net/ogc":{FeatureId:ol.xml.makeArrayPusher(function(e,o){return e.getAttribute("fid")})}};ol.format.WFS.fidParser_=function(e,o){ol.xml.parseNode(ol.format.WFS.OGC_FID_PARSERS_,e,o)};ol.format.WFS.INSERT_RESULTS_PARSERS_={"http://www.opengis.net/wfs":{Feature:ol.format.WFS.fidParser_}};ol.format.WFS.readInsertResults_=function(e,o){return ol.xml.pushParseAndPop([],ol.format.WFS.INSERT_RESULTS_PARSERS_,e,o)};ol.format.WFS.TRANSACTION_RESPONSE_PARSERS_={"http://www.opengis.net/wfs":{TransactionSummary:ol.xml.makeObjectPropertySetter(ol.format.WFS.readTransactionSummary_,"transactionSummary"),InsertResults:ol.xml.makeObjectPropertySetter(ol.format.WFS.readInsertResults_,"insertIds")}};ol.format.WFS.prototype.readTransactionResponseFromDocument=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be DOCUMENT");for(var o=e.firstChild;o;o=o.nextSibling){if(o.nodeType==goog.dom.NodeType.ELEMENT){return this.readTransactionResponseFromNode(o)}}return undefined};ol.format.WFS.prototype.readTransactionResponseFromNode=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should  be ELEMENT");goog.asserts.assert(e.localName=="TransactionResponse","localName should be TransactionResponse");return ol.xml.pushParseAndPop({},ol.format.WFS.TRANSACTION_RESPONSE_PARSERS_,e,[])};ol.format.WFS.QUERY_SERIALIZERS_={"http://www.opengis.net/wfs":{PropertyName:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)}};ol.format.WFS.writeFeature_=function(e,o,t){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=r["featureType"];var n=r["featureNS"];var a=ol.xml.createElementNS(n,i);e.appendChild(a);ol.format.GML3.prototype.writeFeatureElement(a,o,t)};ol.format.WFS.writeOgcFidFilter_=function(e,o,t){var r=ol.xml.createElementNS("http://www.opengis.net/ogc","Filter");var i=ol.xml.createElementNS("http://www.opengis.net/ogc","FeatureId");r.appendChild(i);i.setAttribute("fid",o);e.appendChild(r)};ol.format.WFS.writeDelete_=function(e,o,t){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");goog.asserts.assert(o.getId()!==undefined,"feature should have an id");var i=r["featureType"];var n=r["featurePrefix"];n=n?n:ol.format.WFS.FEATURE_PREFIX;var a=r["featureNS"];e.setAttribute("typeName",n+":"+i);ol.xml.setAttributeNS(e,ol.format.WFS.XMLNS,"xmlns:"+n,a);var l=o.getId();if(l!==undefined){ol.format.WFS.writeOgcFidFilter_(e,l,t)}};ol.format.WFS.writeUpdate_=function(e,o,t){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");goog.asserts.assert(o.getId()!==undefined,"feature should have an id");var i=r["featureType"];var n=r["featurePrefix"];n=n?n:ol.format.WFS.FEATURE_PREFIX;var a=r["featureNS"];e.setAttribute("typeName",n+":"+i);ol.xml.setAttributeNS(e,ol.format.WFS.XMLNS,"xmlns:"+n,a);var l=o.getId();if(l!==undefined){var s=o.getKeys();var g=[];for(var p=0,u=s.length;p<u;p++){var c=o.get(s[p]);if(c!==undefined){g.push({name:s[p],value:c})}}ol.xml.pushSerializeAndPop({node:e,srsName:r["srsName"]},ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Property"),g,t);ol.format.WFS.writeOgcFidFilter_(e,l,t)}};ol.format.WFS.writeProperty_=function(e,o,t){var r=ol.xml.createElementNS("http://www.opengis.net/wfs","Name");e.appendChild(r);ol.format.XSD.writeStringTextNode(r,o.name);if(o.value!==undefined&&o.value!==null){var i=ol.xml.createElementNS("http://www.opengis.net/wfs","Value");e.appendChild(i);if(o.value instanceof ol.geom.Geometry){ol.format.GML3.prototype.writeGeometryElement(i,o.value,t)}else{ol.format.XSD.writeStringTextNode(i,o.value)}}};ol.format.WFS.writeNative_=function(e,o,t){if(o.vendorId){e.setAttribute("vendorId",o.vendorId)}if(o.safeToIgnore!==undefined){e.setAttribute("safeToIgnore",o.safeToIgnore)}if(o.value!==undefined){ol.format.XSD.writeStringTextNode(e,o.value)}};ol.format.WFS.TRANSACTION_SERIALIZERS_={"http://www.opengis.net/wfs":{Insert:ol.xml.makeChildAppender(ol.format.WFS.writeFeature_),Update:ol.xml.makeChildAppender(ol.format.WFS.writeUpdate_),Delete:ol.xml.makeChildAppender(ol.format.WFS.writeDelete_),Property:ol.xml.makeChildAppender(ol.format.WFS.writeProperty_),Native:ol.xml.makeChildAppender(ol.format.WFS.writeNative_)}};ol.format.WFS.writeQuery_=function(e,o,t){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=r["featurePrefix"];var n=r["featureNS"];var a=r["propertyNames"];var l=r["srsName"];var s=i?i+":":"";e.setAttribute("typeName",s+o);if(l){e.setAttribute("srsName",l)}if(n){ol.xml.setAttributeNS(e,ol.format.WFS.XMLNS,"xmlns:"+i,n)}var g=ol.object.assign({},r);g.node=e;ol.xml.pushSerializeAndPop(g,ol.format.WFS.QUERY_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("PropertyName"),a,t);var p=r["bbox"];if(p){var u=ol.xml.createElementNS("http://www.opengis.net/ogc","Filter");ol.format.WFS.writeOgcBBOX_(u,p,t);e.appendChild(u)}};ol.format.WFS.writeOgcPropertyName_=function(e,o,t){var r=ol.xml.createElementNS("http://www.opengis.net/ogc","PropertyName");ol.format.XSD.writeStringTextNode(r,o);e.appendChild(r)};ol.format.WFS.writeOgcBBOX_=function(e,o,t){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=r["geometryName"];var n=ol.xml.createElementNS("http://www.opengis.net/ogc","BBOX");e.appendChild(n);ol.format.WFS.writeOgcPropertyName_(n,i,t);ol.format.GML3.prototype.writeGeometryElement(n,o,t)};ol.format.WFS.GETFEATURE_SERIALIZERS_={"http://www.opengis.net/wfs":{Query:ol.xml.makeChildAppender(ol.format.WFS.writeQuery_)}};ol.format.WFS.writeGetFeature_=function(e,o,t){var r=t[t.length-1];goog.asserts.assert(goog.isObject(r),"context should be an Object");var i=ol.object.assign({},r);i.node=e;ol.xml.pushSerializeAndPop(i,ol.format.WFS.GETFEATURE_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Query"),o,t)};ol.format.WFS.prototype.writeGetFeature=function(e){var o=ol.xml.createElementNS("http://www.opengis.net/wfs","GetFeature");o.setAttribute("service","WFS");o.setAttribute("version","1.1.0");if(e){if(e.handle){o.setAttribute("handle",e.handle)}if(e.outputFormat){o.setAttribute("outputFormat",e.outputFormat)}if(e.maxFeatures!==undefined){o.setAttribute("maxFeatures",e.maxFeatures)}if(e.resultType){o.setAttribute("resultType",e.resultType)}if(e.startIndex!==undefined){o.setAttribute("startIndex",e.startIndex)}if(e.count!==undefined){o.setAttribute("count",e.count)}}ol.xml.setAttributeNS(o,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation_);var t={node:o,srsName:e.srsName,featureNS:e.featureNS?e.featureNS:this.featureNS_,featurePrefix:e.featurePrefix,geometryName:e.geometryName,bbox:e.bbox,propertyNames:e.propertyNames?e.propertyNames:[]};goog.asserts.assert(goog.isArray(e.featureTypes),"options.featureTypes should be an array");ol.format.WFS.writeGetFeature_(o,e.featureTypes,[t]);return o};ol.format.WFS.prototype.writeTransaction=function(e,o,t,r){var i=[];var n=ol.xml.createElementNS("http://www.opengis.net/wfs","Transaction");n.setAttribute("service","WFS");n.setAttribute("version","1.1.0");var a,l;if(r){a=r.gmlOptions?r.gmlOptions:{};if(r.handle){n.setAttribute("handle",r.handle)}}ol.xml.setAttributeNS(n,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation_);if(e){l={node:n,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:r.featurePrefix};ol.object.assign(l,a);ol.xml.pushSerializeAndPop(l,ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Insert"),e,i)}if(o){l={node:n,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:r.featurePrefix};ol.object.assign(l,a);ol.xml.pushSerializeAndPop(l,ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Update"),o,i)}if(t){ol.xml.pushSerializeAndPop({node:n,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:r.featurePrefix},ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Delete"),t,i)}if(r.nativeElements){ol.xml.pushSerializeAndPop({node:n,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:r.featurePrefix},ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Native"),r.nativeElements,i)}return n};ol.format.WFS.prototype.readProjection;ol.format.WFS.prototype.readProjectionFromDocument=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be a DOCUMENT");for(var o=e.firstChild;o;o=o.nextSibling){if(o.nodeType==goog.dom.NodeType.ELEMENT){return this.readProjectionFromNode(o)}}return null};ol.format.WFS.prototype.readProjectionFromNode=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="FeatureCollection","localName should be FeatureCollection");if(e.firstElementChild&&e.firstElementChild.firstElementChild){e=e.firstElementChild.firstElementChild;for(var o=e.firstElementChild;o;o=o.nextElementSibling){if(!(o.childNodes.length===0||o.childNodes.length===1&&o.firstChild.nodeType===3)){var t=[{}];this.gmlFormat_.readGeometryElement(o,t);return ol.proj.get(t.pop().srsName)}}}return null};goog.provide("ol.format.WKT");goog.require("goog.asserts");goog.require("ol");goog.require("ol.Feature");goog.require("ol.format.Feature");goog.require("ol.format.TextFeature");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryCollection");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LineString");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");ol.format.WKT=function(e){var o=e?e:{};goog.base(this);this.splitCollection_=o.splitCollection!==undefined?o.splitCollection:false};goog.inherits(ol.format.WKT,ol.format.TextFeature);ol.format.WKT.EMPTY="EMPTY";ol.format.WKT.encodePointGeometry_=function(e){var o=e.getCoordinates();if(o.length===0){return""}return o[0]+" "+o[1]};ol.format.WKT.encodeMultiPointGeometry_=function(e){var o=[];var t=e.getPoints();for(var r=0,i=t.length;r<i;++r){o.push("("+ol.format.WKT.encodePointGeometry_(t[r])+")")}return o.join(",")};ol.format.WKT.encodeGeometryCollectionGeometry_=function(e){var o=[];var t=e.getGeometries();for(var r=0,i=t.length;r<i;++r){o.push(ol.format.WKT.encode_(t[r]))}return o.join(",")};ol.format.WKT.encodeLineStringGeometry_=function(e){var o=e.getCoordinates();var t=[];for(var r=0,i=o.length;r<i;++r){t.push(o[r][0]+" "+o[r][1])}return t.join(",")};ol.format.WKT.encodeMultiLineStringGeometry_=function(e){var o=[];var t=e.getLineStrings();for(var r=0,i=t.length;r<i;++r){o.push("("+ol.format.WKT.encodeLineStringGeometry_(t[r])+")")}return o.join(",")};ol.format.WKT.encodePolygonGeometry_=function(e){var o=[];var t=e.getLinearRings();for(var r=0,i=t.length;r<i;++r){o.push("("+ol.format.WKT.encodeLineStringGeometry_(t[r])+")")}return o.join(",")};ol.format.WKT.encodeMultiPolygonGeometry_=function(e){var o=[];var t=e.getPolygons();for(var r=0,i=t.length;r<i;++r){o.push("("+ol.format.WKT.encodePolygonGeometry_(t[r])+")")}return o.join(",")};ol.format.WKT.encode_=function(e){var o=e.getType();var t=ol.format.WKT.GeometryEncoder_[o];goog.asserts.assert(t,"geometryEncoder should be defined");var r=t(e);o=o.toUpperCase();if(r.length===0){return o+" "+ol.format.WKT.EMPTY}return o+"("+r+")"};ol.format.WKT.GeometryEncoder_={Point:ol.format.WKT.encodePointGeometry_,LineString:ol.format.WKT.encodeLineStringGeometry_,Polygon:ol.format.WKT.encodePolygonGeometry_,MultiPoint:ol.format.WKT.encodeMultiPointGeometry_,MultiLineString:ol.format.WKT.encodeMultiLineStringGeometry_,MultiPolygon:ol.format.WKT.encodeMultiPolygonGeometry_,GeometryCollection:ol.format.WKT.encodeGeometryCollectionGeometry_};ol.format.WKT.prototype.parse_=function(e){var o=new ol.format.WKT.Lexer(e);var t=new ol.format.WKT.Parser(o);return t.parse()};ol.format.WKT.prototype.readFeature;ol.format.WKT.prototype.readFeatureFromText=function(e,o){var t=this.readGeometryFromText(e,o);if(t){var r=new ol.Feature;r.setGeometry(t);return r}return null};ol.format.WKT.prototype.readFeatures;ol.format.WKT.prototype.readFeaturesFromText=function(e,o){var t=[];var r=this.readGeometryFromText(e,o);if(this.splitCollection_&&r.getType()==ol.geom.GeometryType.GEOMETRY_COLLECTION){t=r.getGeometriesArray()}else{t=[r]}var i,n=[];for(var a=0,l=t.length;a<l;++a){i=new ol.Feature;i.setGeometry(t[a]);n.push(i)}return n};ol.format.WKT.prototype.readGeometry;ol.format.WKT.prototype.readGeometryFromText=function(e,o){var t=this.parse_(e);if(t){return ol.format.Feature.transformWithOptions(t,false,o)}else{return null}};ol.format.WKT.prototype.writeFeature;ol.format.WKT.prototype.writeFeatureText=function(e,o){var t=e.getGeometry();if(t){return this.writeGeometryText(t,o)}return""};ol.format.WKT.prototype.writeFeatures;ol.format.WKT.prototype.writeFeaturesText=function(e,o){if(e.length==1){return this.writeFeatureText(e[0],o)}var t=[];for(var r=0,i=e.length;r<i;++r){t.push(e[r].getGeometry())}var n=new ol.geom.GeometryCollection(t);return this.writeGeometryText(n,o)};ol.format.WKT.prototype.writeGeometry;ol.format.WKT.prototype.writeGeometryText=function(e,o){return ol.format.WKT.encode_(ol.format.Feature.transformWithOptions(e,true,o))};ol.format.WKT.Token;ol.format.WKT.TokenType={TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6};ol.format.WKT.Lexer=function(e){this.wkt=e;this.index_=-1};ol.format.WKT.Lexer.prototype.isAlpha_=function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"};ol.format.WKT.Lexer.prototype.isNumeric_=function(e,o){var t=o!==undefined?o:false;return e>="0"&&e<="9"||e=="."&&!t};ol.format.WKT.Lexer.prototype.isWhiteSpace_=function(e){return e==" "||e=="\t"||e=="\r"||e=="\n"};ol.format.WKT.Lexer.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)};ol.format.WKT.Lexer.prototype.nextToken=function(){var e=this.nextChar_();var o={position:this.index_,value:e};if(e=="("){o.type=ol.format.WKT.TokenType.LEFT_PAREN}else if(e==","){o.type=ol.format.WKT.TokenType.COMMA}else if(e==")"){o.type=ol.format.WKT.TokenType.RIGHT_PAREN}else if(this.isNumeric_(e)||e=="-"){o.type=ol.format.WKT.TokenType.NUMBER;o.value=this.readNumber_()}else if(this.isAlpha_(e)){o.type=ol.format.WKT.TokenType.TEXT;o.value=this.readText_()}else if(this.isWhiteSpace_(e)){return this.nextToken()}else if(e===""){o.type=ol.format.WKT.TokenType.EOF}else{throw new Error("Unexpected character: "+e)}return o};ol.format.WKT.Lexer.prototype.readNumber_=function(){var e,o=this.index_;var t=false;var r=false;do{if(e=="."){t=true}else if(e=="e"||e=="E"){r=true}e=this.nextChar_()}while(this.isNumeric_(e,t)||!r&&(e=="e"||e=="E")||r&&(e=="-"||e=="+"));return parseFloat(this.wkt.substring(o,this.index_--))};ol.format.WKT.Lexer.prototype.readText_=function(){var e,o=this.index_;do{e=this.nextChar_()}while(this.isAlpha_(e));return this.wkt.substring(o,this.index_--).toUpperCase()};ol.format.WKT.Parser=function(e){this.lexer_=e;this.token_;this.dimension_=2};ol.format.WKT.Parser.prototype.consume_=function(){this.token_=this.lexer_.nextToken()};ol.format.WKT.Parser.prototype.match=function(e){var o=this.token_.type==e;if(o){this.consume_()}return o};ol.format.WKT.Parser.prototype.parse=function(){this.consume_();var e=this.parseGeometry_();goog.asserts.assert(this.token_.type==ol.format.WKT.TokenType.EOF,"token type should be end of file");return e};ol.format.WKT.Parser.prototype.parseGeometry_=function(){var e=this.token_;if(this.match(ol.format.WKT.TokenType.TEXT)){var o=e.value;if(o==ol.geom.GeometryType.GEOMETRY_COLLECTION.toUpperCase()){var t=this.parseGeometryCollectionText_();return new ol.geom.GeometryCollection(t)}else{var r=ol.format.WKT.Parser.GeometryParser_[o]
;var i=ol.format.WKT.Parser.GeometryConstructor_[o];if(!r||!i){throw new Error("Invalid geometry type: "+o)}var n=r.call(this);return new i(n)}}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parseGeometryCollectionText_=function(){if(this.match(ol.format.WKT.TokenType.LEFT_PAREN)){var e=[];do{e.push(this.parseGeometry_())}while(this.match(ol.format.WKT.TokenType.COMMA));if(this.match(ol.format.WKT.TokenType.RIGHT_PAREN)){return e}}else if(this.isEmptyGeometry_()){return[]}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parsePointText_=function(){if(this.match(ol.format.WKT.TokenType.LEFT_PAREN)){var e=this.parsePoint_();if(this.match(ol.format.WKT.TokenType.RIGHT_PAREN)){return e}}else if(this.isEmptyGeometry_()){return null}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parseLineStringText_=function(){if(this.match(ol.format.WKT.TokenType.LEFT_PAREN)){var e=this.parsePointList_();if(this.match(ol.format.WKT.TokenType.RIGHT_PAREN)){return e}}else if(this.isEmptyGeometry_()){return[]}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parsePolygonText_=function(){if(this.match(ol.format.WKT.TokenType.LEFT_PAREN)){var e=this.parseLineStringTextList_();if(this.match(ol.format.WKT.TokenType.RIGHT_PAREN)){return e}}else if(this.isEmptyGeometry_()){return[]}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parseMultiPointText_=function(){if(this.match(ol.format.WKT.TokenType.LEFT_PAREN)){var e;if(this.token_.type==ol.format.WKT.TokenType.LEFT_PAREN){e=this.parsePointTextList_()}else{e=this.parsePointList_()}if(this.match(ol.format.WKT.TokenType.RIGHT_PAREN)){return e}}else if(this.isEmptyGeometry_()){return[]}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parseMultiLineStringText_=function(){if(this.match(ol.format.WKT.TokenType.LEFT_PAREN)){var e=this.parseLineStringTextList_();if(this.match(ol.format.WKT.TokenType.RIGHT_PAREN)){return e}}else if(this.isEmptyGeometry_()){return[]}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parseMultiPolygonText_=function(){if(this.match(ol.format.WKT.TokenType.LEFT_PAREN)){var e=this.parsePolygonTextList_();if(this.match(ol.format.WKT.TokenType.RIGHT_PAREN)){return e}}else if(this.isEmptyGeometry_()){return[]}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parsePoint_=function(){var e=[];for(var o=0;o<this.dimension_;++o){var t=this.token_;if(this.match(ol.format.WKT.TokenType.NUMBER)){e.push(t.value)}else{break}}if(e.length==this.dimension_){return e}throw new Error(this.formatErrorMessage_())};ol.format.WKT.Parser.prototype.parsePointList_=function(){var e=[this.parsePoint_()];while(this.match(ol.format.WKT.TokenType.COMMA)){e.push(this.parsePoint_())}return e};ol.format.WKT.Parser.prototype.parsePointTextList_=function(){var e=[this.parsePointText_()];while(this.match(ol.format.WKT.TokenType.COMMA)){e.push(this.parsePointText_())}return e};ol.format.WKT.Parser.prototype.parseLineStringTextList_=function(){var e=[this.parseLineStringText_()];while(this.match(ol.format.WKT.TokenType.COMMA)){e.push(this.parseLineStringText_())}return e};ol.format.WKT.Parser.prototype.parsePolygonTextList_=function(){var e=[this.parsePolygonText_()];while(this.match(ol.format.WKT.TokenType.COMMA)){e.push(this.parsePolygonText_())}return e};ol.format.WKT.Parser.prototype.isEmptyGeometry_=function(){var e=this.token_.type==ol.format.WKT.TokenType.TEXT&&this.token_.value==ol.format.WKT.EMPTY;if(e){this.consume_()}return e};ol.format.WKT.Parser.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"};ol.format.WKT.Parser.GeometryConstructor_={POINT:ol.geom.Point,LINESTRING:ol.geom.LineString,POLYGON:ol.geom.Polygon,MULTIPOINT:ol.geom.MultiPoint,MULTILINESTRING:ol.geom.MultiLineString,MULTIPOLYGON:ol.geom.MultiPolygon};ol.format.WKT.Parser.GeometryParser_={POINT:ol.format.WKT.Parser.prototype.parsePointText_,LINESTRING:ol.format.WKT.Parser.prototype.parseLineStringText_,POLYGON:ol.format.WKT.Parser.prototype.parsePolygonText_,MULTIPOINT:ol.format.WKT.Parser.prototype.parseMultiPointText_,MULTILINESTRING:ol.format.WKT.Parser.prototype.parseMultiLineStringText_,MULTIPOLYGON:ol.format.WKT.Parser.prototype.parseMultiPolygonText_};goog.provide("ol.format.WMSCapabilities");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("ol");goog.require("ol.format.XLink");goog.require("ol.format.XML");goog.require("ol.format.XSD");goog.require("ol.xml");ol.format.WMSCapabilities=function(){goog.base(this);this.version=undefined};goog.inherits(ol.format.WMSCapabilities,ol.format.XML);ol.format.WMSCapabilities.prototype.read;ol.format.WMSCapabilities.prototype.readFromDocument=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be DOCUMENT");for(var o=e.firstChild;o;o=o.nextSibling){if(o.nodeType==goog.dom.NodeType.ELEMENT){return this.readFromNode(o)}}return null};ol.format.WMSCapabilities.prototype.readFromNode=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="WMS_Capabilities"||e.localName=="WMT_MS_Capabilities","localName should be WMS_Capabilities or WMT_MS_Capabilities");this.version=e.getAttribute("version").trim();goog.asserts.assertString(this.version,"this.version should be a string");var o=ol.xml.pushParseAndPop({version:this.version},ol.format.WMSCapabilities.PARSERS_,e,[]);return o?o:null};ol.format.WMSCapabilities.readAttribution_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Attribution","localName should be Attribution");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.ATTRIBUTION_PARSERS_,e,o)};ol.format.WMSCapabilities.readBoundingBox_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="BoundingBox","localName should be BoundingBox");var t=[ol.format.XSD.readDecimalString(e.getAttribute("minx")),ol.format.XSD.readDecimalString(e.getAttribute("miny")),ol.format.XSD.readDecimalString(e.getAttribute("maxx")),ol.format.XSD.readDecimalString(e.getAttribute("maxy"))];var r=[ol.format.XSD.readDecimalString(e.getAttribute("resx")),ol.format.XSD.readDecimalString(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS"),extent:t,res:r}};ol.format.WMSCapabilities.readEXGeographicBoundingBox_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="EX_GeographicBoundingBox","localName should be EX_GeographicBoundingBox");var t=ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS_,e,o);if(!t){return undefined}var r=t["westBoundLongitude"];var i=t["southBoundLatitude"];var n=t["eastBoundLongitude"];var a=t["northBoundLatitude"];if(r===undefined||i===undefined||n===undefined||a===undefined){return undefined}return[r,i,n,a]};ol.format.WMSCapabilities.readCapability_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Capability","localName should be Capability");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CAPABILITY_PARSERS_,e,o)};ol.format.WMSCapabilities.readService_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Service","localName should be Service");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.SERVICE_PARSERS_,e,o)};ol.format.WMSCapabilities.readContactInformation_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType shpuld be ELEMENT");goog.asserts.assert(e.localName=="ContactInformation","localName should be ContactInformation");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CONTACT_INFORMATION_PARSERS_,e,o)};ol.format.WMSCapabilities.readContactPersonPrimary_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="ContactPersonPrimary","localName should be ContactPersonPrimary");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CONTACT_PERSON_PARSERS_,e,o)};ol.format.WMSCapabilities.readContactAddress_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="ContactAddress","localName should be ContactAddress");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CONTACT_ADDRESS_PARSERS_,e,o)};ol.format.WMSCapabilities.readException_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Exception","localName should be Exception");return ol.xml.pushParseAndPop([],ol.format.WMSCapabilities.EXCEPTION_PARSERS_,e,o)};ol.format.WMSCapabilities.readCapabilityLayer_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Layer","localName should be Layer");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.LAYER_PARSERS_,e,o)};ol.format.WMSCapabilities.readLayer_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Layer","localName should be Layer");var t=o[o.length-1];var r=ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.LAYER_PARSERS_,e,o);if(!r){return undefined}var i=ol.format.XSD.readBooleanString(e.getAttribute("queryable"));if(i===undefined){i=t["queryable"]}r["queryable"]=i!==undefined?i:false;var n=ol.format.XSD.readNonNegativeIntegerString(e.getAttribute("cascaded"));if(n===undefined){n=t["cascaded"]}r["cascaded"]=n;var a=ol.format.XSD.readBooleanString(e.getAttribute("opaque"));if(a===undefined){a=t["opaque"]}r["opaque"]=a!==undefined?a:false;var l=ol.format.XSD.readBooleanString(e.getAttribute("noSubsets"));if(l===undefined){l=t["noSubsets"]}r["noSubsets"]=l!==undefined?l:false;var s=ol.format.XSD.readDecimalString(e.getAttribute("fixedWidth"));if(!s){s=t["fixedWidth"]}r["fixedWidth"]=s;var g=ol.format.XSD.readDecimalString(e.getAttribute("fixedHeight"));if(!g){g=t["fixedHeight"]}r["fixedHeight"]=g;var p=["Style","CRS","AuthorityURL"];p.forEach(function(e){if(e in t){var o=r[e]||[];r[e]=o.concat(t[e])}});var u=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];u.forEach(function(e){if(!(e in r)){var o=t[e];r[e]=o}});return r};ol.format.WMSCapabilities.readDimension_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Dimension","localName should be Dimension");var t={name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:ol.format.XSD.readBooleanString(e.getAttribute("multipleValues")),nearestValue:ol.format.XSD.readBooleanString(e.getAttribute("nearestValue")),current:ol.format.XSD.readBooleanString(e.getAttribute("current")),values:ol.format.XSD.readString(e)};return t};ol.format.WMSCapabilities.readFormatOnlineresource_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.FORMAT_ONLINERESOURCE_PARSERS_,e,o)};ol.format.WMSCapabilities.readRequest_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Request","localName should be Request");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.REQUEST_PARSERS_,e,o)};ol.format.WMSCapabilities.readDCPType_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="DCPType","localName should be DCPType");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.DCPTYPE_PARSERS_,e,o)};ol.format.WMSCapabilities.readHTTP_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="HTTP","localName should be HTTP");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.HTTP_PARSERS_,e,o)};ol.format.WMSCapabilities.readOperationType_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.OPERATIONTYPE_PARSERS_,e,o)};ol.format.WMSCapabilities.readSizedFormatOnlineresource_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");var t=ol.format.WMSCapabilities.readFormatOnlineresource_(e,o);if(t){var r=[ol.format.XSD.readNonNegativeIntegerString(e.getAttribute("width")),ol.format.XSD.readNonNegativeIntegerString(e.getAttribute("height"))];t["size"]=r;return t}return undefined};ol.format.WMSCapabilities.readAuthorityURL_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="AuthorityURL","localName should be AuthorityURL");var t=ol.format.WMSCapabilities.readFormatOnlineresource_(e,o);if(t){t["name"]=e.getAttribute("name");return t}return undefined};ol.format.WMSCapabilities.readMetadataURL_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="MetadataURL","localName should be MetadataURL");var t=ol.format.WMSCapabilities.readFormatOnlineresource_(e,o);if(t){t["type"]=e.getAttribute("type");return t}return undefined};ol.format.WMSCapabilities.readStyle_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Style","localName should be Style");return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.STYLE_PARSERS_,e,o)};ol.format.WMSCapabilities.readKeywordList_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="KeywordList","localName should be KeywordList");return ol.xml.pushParseAndPop([],ol.format.WMSCapabilities.KEYWORDLIST_PARSERS_,e,o)};ol.format.WMSCapabilities.NAMESPACE_URIS_=[null,"http://www.opengis.net/wms"];ol.format.WMSCapabilities.PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Service:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readService_),Capability:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readCapability_)});ol.format.WMSCapabilities.CAPABILITY_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Request:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readRequest_),Exception:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readException_),Layer:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readCapabilityLayer_)});ol.format.WMSCapabilities.SERVICE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Abstract:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),KeywordList:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readKeywordList_),OnlineResource:ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref),ContactInformation:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readContactInformation_),Fees:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),AccessConstraints:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),LayerLimit:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),MaxWidth:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),MaxHeight:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger)});ol.format.WMSCapabilities.CONTACT_INFORMATION_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{ContactPersonPrimary:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readContactPersonPrimary_),ContactPosition:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactAddress:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readContactAddress_),ContactVoiceTelephone:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactFacsimileTelephone:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactElectronicMailAddress:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.WMSCapabilities.CONTACT_PERSON_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{ContactPerson:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactOrganization:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.WMSCapabilities.CONTACT_ADDRESS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{AddressType:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Address:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),City:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),StateOrProvince:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),PostCode:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Country:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.WMSCapabilities.EXCEPTION_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Format:ol.xml.makeArrayPusher(ol.format.XSD.readString)});ol.format.WMSCapabilities.LAYER_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Abstract:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),KeywordList:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readKeywordList_),CRS:ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),EX_GeographicBoundingBox:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readEXGeographicBoundingBox_),BoundingBox:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readBoundingBox_),Dimension:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readDimension_),Attribution:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readAttribution_),AuthorityURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readAuthorityURL_),Identifier:ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),MetadataURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readMetadataURL_),DataURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readFormatOnlineresource_),FeatureListURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readFormatOnlineresource_),Style:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readStyle_),MinScaleDenominator:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),MaxScaleDenominator:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),Layer:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readLayer_)});ol.format.WMSCapabilities.ATTRIBUTION_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),OnlineResource:ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref),LogoURL:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readSizedFormatOnlineresource_)});ol.format.WMSCapabilities.EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{westBoundLongitude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),eastBoundLongitude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),southBoundLatitude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),northBoundLatitude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal)});ol.format.WMSCapabilities.REQUEST_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{GetCapabilities:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readOperationType_),GetMap:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readOperationType_),GetFeatureInfo:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readOperationType_)});ol.format.WMSCapabilities.OPERATIONTYPE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Format:ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),DCPType:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readDCPType_)});ol.format.WMSCapabilities.DCPTYPE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{HTTP:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readHTTP_)});ol.format.WMSCapabilities.HTTP_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Get:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_),Post:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_)});ol.format.WMSCapabilities.STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Abstract:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),LegendURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readSizedFormatOnlineresource_),StyleSheetURL:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_),StyleURL:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_)});ol.format.WMSCapabilities.FORMAT_ONLINERESOURCE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Format:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),OnlineResource:ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref)});ol.format.WMSCapabilities.KEYWORDLIST_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Keyword:ol.xml.makeArrayPusher(ol.format.XSD.readString)});goog.provide("ol.format.WMSGetFeatureInfo");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("ol.array");goog.require("ol.format.GML2");goog.require("ol.format.XMLFeature");goog.require("ol.object");goog.require("ol.xml");ol.format.WMSGetFeatureInfo=function(e){var o=e?e:{};this.featureNS_="http://mapserver.gis.umn.edu/mapserver";this.gmlFormat_=new ol.format.GML2;this.layers_=o.layers?o.layers:null;goog.base(this)};goog.inherits(ol.format.WMSGetFeatureInfo,ol.format.XMLFeature);ol.format.WMSGetFeatureInfo.featureIdentifier_="_feature";ol.format.WMSGetFeatureInfo.layerIdentifier_="_layer";ol.format.WMSGetFeatureInfo.prototype.readFeatures_=function(e,o){e.setAttribute("namespaceURI",this.featureNS_);goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");var t=ol.xml.getLocalName(e);var r=[];if(e.childNodes.length===0){return r}if(t=="msGMLOutput"){for(var i=0,n=e.childNodes.length;i<n;i++){var a=e.childNodes[i];if(a.nodeType!==goog.dom.NodeType.ELEMENT){continue}var l=o[0];goog.asserts.assert(goog.isObject(l),"context should be an Object");goog.asserts.assert(a.localName.indexOf(ol.format.WMSGetFeatureInfo.layerIdentifier_)>=0,"localName of layer node should match layerIdentifier");var s=ol.format.WMSGetFeatureInfo.layerIdentifier_;var g=a.localName.replace(s,"");if(this.layers_&&!ol.array.includes(this.layers_,g)){continue}var p=g+ol.format.WMSGetFeatureInfo.featureIdentifier_;l["featureType"]=p;l["featureNS"]=this.featureNS_;var u={};u[p]=ol.xml.makeArrayPusher(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var c=ol.xml.makeStructureNS([l["featureNS"],null],u);a.setAttribute("namespaceURI",this.featureNS_);var d=ol.xml.pushParseAndPop([],c,a,o,this.gmlFormat_);if(d){ol.array.extend(r,d)}}}if(t=="FeatureCollection"){var y=ol.xml.pushParseAndPop([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,e,[{}],this.gmlFormat_);if(y){r=y}}return r};ol.format.WMSGetFeatureInfo.prototype.readFeatures;ol.format.WMSGetFeatureInfo.prototype.readFeaturesFromNode=function(e,o){var t={featureType:this.featureType,featureNS:this.featureNS};if(o){ol.object.assign(t,this.getReadOptions(e,o))}return this.readFeatures_(e,[t])};goog.provide("ol.format.WMTSCapabilities");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("ol.extent");goog.require("ol.format.OWS");goog.require("ol.format.XLink");goog.require("ol.format.XML");goog.require("ol.format.XSD");goog.require("ol.xml");ol.format.WMTSCapabilities=function(){goog.base(this);this.owsParser_=new ol.format.OWS};goog.inherits(ol.format.WMTSCapabilities,ol.format.XML);ol.format.WMTSCapabilities.prototype.read;ol.format.WMTSCapabilities.prototype.readFromDocument=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.DOCUMENT,"doc.nodeType should be DOCUMENT");for(var o=e.firstChild;o;o=o.nextSibling){if(o.nodeType==goog.dom.NodeType.ELEMENT){return this.readFromNode(o)}}return null};ol.format.WMTSCapabilities.prototype.readFromNode=function(e){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Capabilities","localName should be Capabilities");var o=e.getAttribute("version").trim();goog.asserts.assertString(o,"version should be a string");var t=this.owsParser_.readFromNode(e);if(!t){return null}t["version"]=o;t=ol.xml.pushParseAndPop(t,ol.format.WMTSCapabilities.PARSERS_,e,[]);return t?t:null};ol.format.WMTSCapabilities.readContents_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Contents","localName should be Contents");return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.CONTENTS_PARSERS_,e,o)};ol.format.WMTSCapabilities.readLayer_=function(e,o){goog.asserts.assert(e.nodeType==goog.dom.NodeType.ELEMENT,"node.nodeType should be ELEMENT");goog.asserts.assert(e.localName=="Layer","localName should be Layer");return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.LAYER_PARSERS_,e,o)};ol.format.WMTSCapabilities.readTileMatrixSet_=function(e,o){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.TMS_PARSERS_,e,o)};ol.format.WMTSCapabilities.readStyle_=function(e,o){var t=ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.STYLE_PARSERS_,e,o);if(!t){return undefined}var r=e.getAttribute("isDefault")==="true";t["isDefault"]=r;return t};ol.format.WMTSCapabilities.readTileMatrixSetLink_=function(e,o){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.TMS_LINKS_PARSERS_,e,o)};ol.format.WMTSCapabilities.readDimensions_=function(e,o){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.DIMENSION_PARSERS_,e,o)};ol.format.WMTSCapabilities.readResourceUrl_=function(e,o){var t=e.getAttribute("format");var r=e.getAttribute("template");var i=e.getAttribute("resourceType");var n={};if(t){n["format"]=t}if(r){n["template"]=r}if(i){n["resourceType"]=i}return n};ol.format.WMTSCapabilities.readWgs84BoundingBox_=function(e,o){var t=ol.xml.pushParseAndPop([],ol.format.WMTSCapabilities.WGS84_BBOX_READERS_,e,o);if(t.length!=2){return undefined}return ol.extent.boundingExtent(t)};ol.format.WMTSCapabilities.readLegendUrl_=function(e,o){var t={};t["format"]=e.getAttribute("format");t["href"]=ol.format.XLink.readHref(e);return t};ol.format.WMTSCapabilities.readCoordinates_=function(e,o){var t=ol.format.XSD.readString(e).split(" ");if(!t||t.length!=2){return undefined}var r=+t[0];var i=+t[1];if(isNaN(r)||isNaN(i)){return undefined}return[r,i]};ol.format.WMTSCapabilities.readTileMatrix_=function(e,o){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.TM_PARSERS_,e,o)};ol.format.WMTSCapabilities.NAMESPACE_URIS_=[null,"http://www.opengis.net/wmts/1.0"];ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_=[null,"http://www.opengis.net/ows/1.1"];ol.format.WMTSCapabilities.PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{Contents:ol.xml.makeObjectPropertySetter(ol.format.WMTSCapabilities.readContents_)});ol.format.WMTSCapabilities.CONTENTS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{Layer:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readLayer_),TileMatrixSet:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readTileMatrixSet_)});ol.format.WMTSCapabilities.LAYER_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{Style:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readStyle_),Format:ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),TileMatrixSetLink:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readTileMatrixSetLink_),Dimension:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readDimensions_),ResourceURL:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readResourceUrl_)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Abstract:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),WGS84BoundingBox:ol.xml.makeObjectPropertySetter(ol.format.WMTSCapabilities.readWgs84BoundingBox_),Identifier:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}));ol.format.WMTSCapabilities.STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{LegendURL:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readLegendUrl_)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Identifier:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}));ol.format.WMTSCapabilities.TMS_LINKS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{TileMatrixSet:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.WMTSCapabilities.DIMENSION_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{Default:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Value:ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{Identifier:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}));ol.format.WMTSCapabilities.WGS84_BBOX_READERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{LowerCorner:ol.xml.makeArrayPusher(ol.format.WMTSCapabilities.readCoordinates_),UpperCorner:ol.xml.makeArrayPusher(ol.format.WMTSCapabilities.readCoordinates_)});ol.format.WMTSCapabilities.TMS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{WellKnownScaleSet:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),TileMatrix:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readTileMatrix_)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{SupportedCRS:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Identifier:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}));ol.format.WMTSCapabilities.TM_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{TopLeftCorner:ol.xml.makeObjectPropertySetter(ol.format.WMTSCapabilities.readCoordinates_),ScaleDenominator:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),TileWidth:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),TileHeight:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),MatrixWidth:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),MatrixHeight:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger)
},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{Identifier:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}));goog.provide("ol.Geolocation");goog.provide("ol.GeolocationProperty");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol.Coordinate");goog.require("ol.Object");goog.require("ol.geom.Geometry");goog.require("ol.geom.Polygon");goog.require("ol.has");goog.require("ol.math");goog.require("ol.proj");goog.require("ol.sphere.WGS84");ol.GeolocationProperty={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"};ol.Geolocation=function(e){goog.base(this);var o=e||{};this.position_=null;this.transform_=ol.proj.identityTransform;this.watchId_=undefined;ol.events.listen(this,ol.Object.getChangeEventType(ol.GeolocationProperty.PROJECTION),this.handleProjectionChanged_,this);ol.events.listen(this,ol.Object.getChangeEventType(ol.GeolocationProperty.TRACKING),this.handleTrackingChanged_,this);if(o.projection!==undefined){this.setProjection(ol.proj.get(o.projection))}if(o.trackingOptions!==undefined){this.setTrackingOptions(o.trackingOptions)}this.setTracking(o.tracking!==undefined?o.tracking:false)};goog.inherits(ol.Geolocation,ol.Object);ol.Geolocation.prototype.disposeInternal=function(){this.setTracking(false);goog.base(this,"disposeInternal")};ol.Geolocation.prototype.handleProjectionChanged_=function(){var e=this.getProjection();if(e){this.transform_=ol.proj.getTransformFromProjections(ol.proj.get("EPSG:4326"),e);if(this.position_){this.set(ol.GeolocationProperty.POSITION,this.transform_(this.position_))}}};ol.Geolocation.prototype.handleTrackingChanged_=function(){if(ol.has.GEOLOCATION){var e=this.getTracking();if(e&&this.watchId_===undefined){this.watchId_=goog.global.navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions())}else if(!e&&this.watchId_!==undefined){goog.global.navigator.geolocation.clearWatch(this.watchId_);this.watchId_=undefined}}};ol.Geolocation.prototype.positionChange_=function(e){var o=e.coords;this.set(ol.GeolocationProperty.ACCURACY,o.accuracy);this.set(ol.GeolocationProperty.ALTITUDE,o.altitude===null?undefined:o.altitude);this.set(ol.GeolocationProperty.ALTITUDE_ACCURACY,o.altitudeAccuracy===null?undefined:o.altitudeAccuracy);this.set(ol.GeolocationProperty.HEADING,o.heading===null?undefined:ol.math.toRadians(o.heading));if(!this.position_){this.position_=[o.longitude,o.latitude]}else{this.position_[0]=o.longitude;this.position_[1]=o.latitude}var t=this.transform_(this.position_);this.set(ol.GeolocationProperty.POSITION,t);this.set(ol.GeolocationProperty.SPEED,o.speed===null?undefined:o.speed);var r=ol.geom.Polygon.circular(ol.sphere.WGS84,this.position_,o.accuracy);r.applyTransform(this.transform_);this.set(ol.GeolocationProperty.ACCURACY_GEOMETRY,r);this.changed()};ol.Geolocation.prototype.positionError_=function(e){e.type=ol.events.EventType.ERROR;this.setTracking(false);this.dispatchEvent(e)};ol.Geolocation.prototype.getAccuracy=function(){return this.get(ol.GeolocationProperty.ACCURACY)};ol.Geolocation.prototype.getAccuracyGeometry=function(){return this.get(ol.GeolocationProperty.ACCURACY_GEOMETRY)||null};ol.Geolocation.prototype.getAltitude=function(){return this.get(ol.GeolocationProperty.ALTITUDE)};ol.Geolocation.prototype.getAltitudeAccuracy=function(){return this.get(ol.GeolocationProperty.ALTITUDE_ACCURACY)};ol.Geolocation.prototype.getHeading=function(){return this.get(ol.GeolocationProperty.HEADING)};ol.Geolocation.prototype.getPosition=function(){return this.get(ol.GeolocationProperty.POSITION)};ol.Geolocation.prototype.getProjection=function(){return this.get(ol.GeolocationProperty.PROJECTION)};ol.Geolocation.prototype.getSpeed=function(){return this.get(ol.GeolocationProperty.SPEED)};ol.Geolocation.prototype.getTracking=function(){return this.get(ol.GeolocationProperty.TRACKING)};ol.Geolocation.prototype.getTrackingOptions=function(){return this.get(ol.GeolocationProperty.TRACKING_OPTIONS)};ol.Geolocation.prototype.setProjection=function(e){this.set(ol.GeolocationProperty.PROJECTION,e)};ol.Geolocation.prototype.setTracking=function(e){this.set(ol.GeolocationProperty.TRACKING,e)};ol.Geolocation.prototype.setTrackingOptions=function(e){this.set(ol.GeolocationProperty.TRACKING_OPTIONS,e)};goog.provide("ol.geom.Circle");goog.require("goog.asserts");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.SimpleGeometry");goog.require("ol.geom.flat.deflate");goog.require("ol.proj");ol.geom.Circle=function(e,o,t){goog.base(this);var r=o?o:0;this.setCenterAndRadius(e,r,t)};goog.inherits(ol.geom.Circle,ol.geom.SimpleGeometry);ol.geom.Circle.prototype.clone=function(){var e=new ol.geom.Circle(null);e.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return e};ol.geom.Circle.prototype.closestPointXY=function(e,o,t,r){var i=this.flatCoordinates;var n=e-i[0];var a=o-i[1];var l=n*n+a*a;if(l<r){var s;if(l===0){for(s=0;s<this.stride;++s){t[s]=i[s]}}else{var g=this.getRadius()/Math.sqrt(l);t[0]=i[0]+g*n;t[1]=i[1]+g*a;for(s=2;s<this.stride;++s){t[s]=i[s]}}t.length=this.stride;return l}else{return r}};ol.geom.Circle.prototype.containsXY=function(e,o){var t=this.flatCoordinates;var r=e-t[0];var i=o-t[1];return r*r+i*i<=this.getRadiusSquared_()};ol.geom.Circle.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)};ol.geom.Circle.prototype.computeExtent=function(e){var o=this.flatCoordinates;var t=o[this.stride]-o[0];return ol.extent.createOrUpdate(o[0]-t,o[1]-t,o[0]+t,o[1]+t,e)};ol.geom.Circle.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())};ol.geom.Circle.prototype.getRadiusSquared_=function(){var e=this.flatCoordinates[this.stride]-this.flatCoordinates[0];var o=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+o*o};ol.geom.Circle.prototype.getType=function(){return ol.geom.GeometryType.CIRCLE};ol.geom.Circle.prototype.intersectsExtent=function(e){var o=this.getExtent();if(ol.extent.intersects(e,o)){var t=this.getCenter();if(e[0]<=t[0]&&e[2]>=t[0]){return true}if(e[1]<=t[1]&&e[3]>=t[1]){return true}return ol.extent.forEachCorner(e,this.containsCoordinate,this)}return false};ol.geom.Circle.prototype.setCenter=function(e){var o=this.stride;goog.asserts.assert(e.length==o,"center array length should match stride");var t=this.flatCoordinates[o]-this.flatCoordinates[0];var r=e.slice();r[o]=r[0]+t;var i;for(i=1;i<o;++i){r[o+i]=e[i]}this.setFlatCoordinates(this.layout,r)};ol.geom.Circle.prototype.setCenterAndRadius=function(e,o,t){if(!e){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)}else{this.setLayout(t,e,0);if(!this.flatCoordinates){this.flatCoordinates=[]}var r=this.flatCoordinates;var i=ol.geom.flat.deflate.coordinate(r,0,e,this.stride);r[i++]=r[0]+o;var n,a;for(n=1,a=this.stride;n<a;++n){r[i++]=r[n]}r.length=i;this.changed()}};ol.geom.Circle.prototype.setFlatCoordinates=function(e,o){this.setFlatCoordinatesInternal(e,o);this.changed()};ol.geom.Circle.prototype.setRadius=function(e){goog.asserts.assert(this.flatCoordinates,"truthy this.flatCoordinates expected");this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e;this.changed()};ol.geom.Circle.prototype.transform;goog.provide("ol.geom.flat.geodesic");goog.require("goog.asserts");goog.require("ol.TransformFunction");goog.require("ol.math");goog.require("ol.proj");ol.geom.flat.geodesic.line_=function(e,o,t){var r=[];var i=e(0);var n=e(1);var a=o(i);var l=o(n);var s=[n,i];var g=[l,a];var p=[1,0];var u={};var c=1e5;var d,y,h,m,f,v;while(--c>0&&p.length>0){h=p.pop();i=s.pop();a=g.pop();v=h.toString();if(!(v in u)){r.push(a[0],a[1]);u[v]=true}m=p.pop();n=s.pop();l=g.pop();f=(h+m)/2;d=e(f);y=o(d);if(ol.math.squaredSegmentDistance(y[0],y[1],a[0],a[1],l[0],l[1])<t){r.push(l[0],l[1]);v=m.toString();goog.asserts.assert(!(v in u),"fractions object should contain key : "+v);u[v]=true}else{p.push(m,f,f,h);g.push(l,y,y,a);s.push(n,d,d,i)}}goog.asserts.assert(c>0,"maxIterations should be more than 0");return r};ol.geom.flat.geodesic.greatCircleArc=function(e,o,t,r,i,n){var a=ol.proj.get("EPSG:4326");var l=Math.cos(ol.math.toRadians(o));var s=Math.sin(ol.math.toRadians(o));var g=Math.cos(ol.math.toRadians(r));var p=Math.sin(ol.math.toRadians(r));var u=Math.cos(ol.math.toRadians(t-e));var c=Math.sin(ol.math.toRadians(t-e));var d=s*p+l*g*u;return ol.geom.flat.geodesic.line_(function(o){if(1<=d){return[t,r]}var i=o*Math.acos(d);var n=Math.cos(i);var a=Math.sin(i);var y=c*g;var h=l*p-s*g*u;var m=Math.atan2(y,h);var f=Math.asin(s*n+l*a*Math.cos(m));var v=ol.math.toRadians(e)+Math.atan2(Math.sin(m)*a*l,n-s*Math.sin(f));return[ol.math.toDegrees(v),ol.math.toDegrees(f)]},ol.proj.getTransform(a,i),n)};ol.geom.flat.geodesic.meridian=function(e,o,t,r,i){var n=ol.proj.get("EPSG:4326");return ol.geom.flat.geodesic.line_(function(r){return[e,o+(t-o)*r]},ol.proj.getTransform(n,r),i)};ol.geom.flat.geodesic.parallel=function(e,o,t,r,i){var n=ol.proj.get("EPSG:4326");return ol.geom.flat.geodesic.line_(function(r){return[o+(t-o)*r,e]},ol.proj.getTransform(n,r),i)};goog.provide("ol.Graticule");goog.require("goog.asserts");goog.require("ol.extent");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.LineString");goog.require("ol.geom.flat.geodesic");goog.require("ol.math");goog.require("ol.proj");goog.require("ol.render.EventType");goog.require("ol.style.Stroke");ol.Graticule=function(e){var o=e||{};this.map_=null;this.projection_=null;this.maxLat_=Infinity;this.maxLon_=Infinity;this.minLat_=-Infinity;this.minLon_=-Infinity;this.maxLatP_=Infinity;this.maxLonP_=Infinity;this.minLatP_=-Infinity;this.minLonP_=-Infinity;this.targetSize_=o.targetSize!==undefined?o.targetSize:100;this.maxLines_=o.maxLines!==undefined?o.maxLines:100;goog.asserts.assert(this.maxLines_>0,"this.maxLines_ should be more than 0");this.meridians_=[];this.parallels_=[];this.strokeStyle_=o.strokeStyle!==undefined?o.strokeStyle:ol.Graticule.DEFAULT_STROKE_STYLE_;this.fromLonLatTransform_=undefined;this.toLonLatTransform_=undefined;this.projectionCenterLonLat_=null;this.setMap(o.map!==undefined?o.map:null)};ol.Graticule.DEFAULT_STROKE_STYLE_=new ol.style.Stroke({color:"rgba(0,0,0,0.2)"});ol.Graticule.intervals_=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001];ol.Graticule.prototype.addMeridian_=function(e,o,t,r,i,n){var a=this.getMeridian_(e,o,t,r,n);if(ol.extent.intersects(a.getExtent(),i)){this.meridians_[n++]=a}return n};ol.Graticule.prototype.addParallel_=function(e,o,t,r,i,n){var a=this.getParallel_(e,o,t,r,n);if(ol.extent.intersects(a.getExtent(),i)){this.parallels_[n++]=a}return n};ol.Graticule.prototype.createGraticule_=function(e,o,t,r){var i=this.getInterval_(t);if(i==-1){this.meridians_.length=this.parallels_.length=0;return}var n=this.toLonLatTransform_(o);var a=n[0];var l=n[1];var s=this.maxLines_;var g,p,u,c;var d=[Math.max(e[0],this.minLonP_),Math.max(e[1],this.minLatP_),Math.min(e[2],this.maxLonP_),Math.min(e[3],this.maxLatP_)];d=ol.proj.transformExtent(d,this.projection_,"EPSG:4326");var y=d[3];var h=d[2];var m=d[1];var f=d[0];a=Math.floor(a/i)*i;c=ol.math.clamp(a,this.minLon_,this.maxLon_);p=this.addMeridian_(c,m,y,r,e,0);g=0;while(c!=this.minLon_&&g++<s){c=Math.max(c-i,this.minLon_);p=this.addMeridian_(c,m,y,r,e,p)}c=ol.math.clamp(a,this.minLon_,this.maxLon_);g=0;while(c!=this.maxLon_&&g++<s){c=Math.min(c+i,this.maxLon_);p=this.addMeridian_(c,m,y,r,e,p)}this.meridians_.length=p;l=Math.floor(l/i)*i;u=ol.math.clamp(l,this.minLat_,this.maxLat_);p=this.addParallel_(u,f,h,r,e,0);g=0;while(u!=this.minLat_&&g++<s){u=Math.max(u-i,this.minLat_);p=this.addParallel_(u,f,h,r,e,p)}u=ol.math.clamp(l,this.minLat_,this.maxLat_);g=0;while(u!=this.maxLat_&&g++<s){u=Math.min(u+i,this.maxLat_);p=this.addParallel_(u,f,h,r,e,p)}this.parallels_.length=p};ol.Graticule.prototype.getInterval_=function(e){var o=this.projectionCenterLonLat_[0];var t=this.projectionCenterLonLat_[1];var r=-1;var i,n,a,l;var s=Math.pow(this.targetSize_*e,2);var g=[];var p=[];for(i=0,n=ol.Graticule.intervals_.length;i<n;++i){a=ol.Graticule.intervals_[i]/2;g[0]=o-a;g[1]=t-a;p[0]=o+a;p[1]=t+a;this.fromLonLatTransform_(g,g);this.fromLonLatTransform_(p,p);l=Math.pow(p[0]-g[0],2)+Math.pow(p[1]-g[1],2);if(l<=s){break}r=ol.Graticule.intervals_[i]}return r};ol.Graticule.prototype.getMap=function(){return this.map_};ol.Graticule.prototype.getMeridian_=function(e,o,t,r,i){goog.asserts.assert(e>=this.minLon_,"lon should be larger than or equal to this.minLon_");goog.asserts.assert(e<=this.maxLon_,"lon should be smaller than or equal to this.maxLon_");var n=ol.geom.flat.geodesic.meridian(e,o,t,this.projection_,r);goog.asserts.assert(n.length>0,"flatCoordinates cannot be empty");var a=this.meridians_[i]!==undefined?this.meridians_[i]:new ol.geom.LineString(null);a.setFlatCoordinates(ol.geom.GeometryLayout.XY,n);return a};ol.Graticule.prototype.getMeridians=function(){return this.meridians_};ol.Graticule.prototype.getParallel_=function(e,o,t,r,i){goog.asserts.assert(e>=this.minLat_,"lat should be larger than or equal to this.minLat_");goog.asserts.assert(e<=this.maxLat_,"lat should be smaller than or equal to this.maxLat_");var n=ol.geom.flat.geodesic.parallel(e,this.minLon_,this.maxLon_,this.projection_,r);goog.asserts.assert(n.length>0,"flatCoordinates cannot be empty");var a=this.parallels_[i]!==undefined?this.parallels_[i]:new ol.geom.LineString(null);a.setFlatCoordinates(ol.geom.GeometryLayout.XY,n);return a};ol.Graticule.prototype.getParallels=function(){return this.parallels_};ol.Graticule.prototype.handlePostCompose_=function(e){var o=e.vectorContext;var t=e.frameState;var r=t.extent;var i=t.viewState;var n=i.center;var a=i.projection;var l=i.resolution;var s=t.pixelRatio;var g=l*l/(4*s*s);var p=!this.projection_||!ol.proj.equivalent(this.projection_,a);if(p){this.updateProjectionInfo_(a)}var u=0;if(a.canWrapX()){var c=a.getExtent();var d=ol.extent.getWidth(c);var y=t.focus[0];if(y<c[0]||y>c[2]){var h=Math.ceil((c[0]-y)/d);u=d*h;r=[r[0]+u,r[1],r[2]+u,r[3]]}}this.createGraticule_(r,n,l,g);o.setFillStrokeStyle(null,this.strokeStyle_);var m,f,v;for(m=0,f=this.meridians_.length;m<f;++m){v=this.meridians_[m];o.drawLineStringGeometry(v,null)}for(m=0,f=this.parallels_.length;m<f;++m){v=this.parallels_[m];o.drawLineStringGeometry(v,null)}};ol.Graticule.prototype.updateProjectionInfo_=function(e){goog.asserts.assert(e,"projection cannot be null");var o=ol.proj.get("EPSG:4326");var t=e.getExtent();var r=e.getWorldExtent();var i=ol.proj.transformExtent(r,o,e);var n=r[3];var a=r[2];var l=r[1];var s=r[0];var g=i[3];var p=i[2];var u=i[1];var c=i[0];goog.asserts.assert(t,"extent cannot be null");goog.asserts.assert(n!==undefined,"maxLat should be defined");goog.asserts.assert(a!==undefined,"maxLon should be defined");goog.asserts.assert(l!==undefined,"minLat should be defined");goog.asserts.assert(s!==undefined,"minLon should be defined");goog.asserts.assert(g!==undefined,"projected maxLat should be defined");goog.asserts.assert(p!==undefined,"projected maxLon should be defined");goog.asserts.assert(u!==undefined,"projected minLat should be defined");goog.asserts.assert(c!==undefined,"projected minLon should be defined");this.maxLat_=n;this.maxLon_=a;this.minLat_=l;this.minLon_=s;this.maxLatP_=g;this.maxLonP_=p;this.minLatP_=u;this.minLonP_=c;this.fromLonLatTransform_=ol.proj.getTransform(o,e);this.toLonLatTransform_=ol.proj.getTransform(e,o);this.projectionCenterLonLat_=this.toLonLatTransform_(ol.extent.getCenter(t));this.projection_=e};ol.Graticule.prototype.setMap=function(e){if(this.map_){this.map_.un(ol.render.EventType.POSTCOMPOSE,this.handlePostCompose_,this);this.map_.render()}if(e){e.on(ol.render.EventType.POSTCOMPOSE,this.handlePostCompose_,this);e.render()}this.map_=e};goog.provide("ol.Image");goog.require("goog.asserts");goog.require("ol.ImageBase");goog.require("ol.ImageState");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol.extent");goog.require("ol.object");ol.Image=function(e,o,t,r,i,n,a){goog.base(this,e,o,t,ol.ImageState.IDLE,r);this.src_=i;this.image_=new Image;if(n!==null){this.image_.crossOrigin=n}this.imageByContext_={};this.imageListenerKeys_=null;this.state=ol.ImageState.IDLE;this.imageLoadFunction_=a};goog.inherits(ol.Image,ol.ImageBase);ol.Image.prototype.getImage=function(e){if(e!==undefined){var o;var t=goog.getUid(e);if(t in this.imageByContext_){return this.imageByContext_[t]}else if(ol.object.isEmpty(this.imageByContext_)){o=this.image_}else{o=this.image_.cloneNode(false)}this.imageByContext_[t]=o;return o}else{return this.image_}};ol.Image.prototype.handleImageError_=function(){this.state=ol.ImageState.ERROR;this.unlistenImage_();this.changed()};ol.Image.prototype.handleImageLoad_=function(){if(this.resolution===undefined){this.resolution=ol.extent.getHeight(this.extent)/this.image_.height}this.state=ol.ImageState.LOADED;this.unlistenImage_();this.changed()};ol.Image.prototype.load=function(){if(this.state==ol.ImageState.IDLE){this.state=ol.ImageState.LOADING;this.changed();goog.asserts.assert(!this.imageListenerKeys_,"this.imageListenerKeys_ should be null");this.imageListenerKeys_=[ol.events.listenOnce(this.image_,ol.events.EventType.ERROR,this.handleImageError_,this),ol.events.listenOnce(this.image_,ol.events.EventType.LOAD,this.handleImageLoad_,this)];this.imageLoadFunction_(this,this.src_)}};ol.Image.prototype.setImage=function(e){this.image_=e};ol.Image.prototype.unlistenImage_=function(){goog.asserts.assert(this.imageListenerKeys_,"this.imageListenerKeys_ should not be null");this.imageListenerKeys_.forEach(ol.events.unlistenByKey);this.imageListenerKeys_=null};goog.provide("ol.ImageLoadFunctionType");ol.ImageLoadFunctionType;goog.provide("ol.ImageTile");goog.require("goog.asserts");goog.require("ol.Tile");goog.require("ol.TileCoord");goog.require("ol.TileLoadFunctionType");goog.require("ol.TileState");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol.object");ol.ImageTile=function(e,o,t,r,i){goog.base(this,e,o);this.src_=t;this.image_=new Image;if(r!==null){this.image_.crossOrigin=r}this.imageByContext_={};this.imageListenerKeys_=null;this.tileLoadFunction_=i};goog.inherits(ol.ImageTile,ol.Tile);ol.ImageTile.prototype.disposeInternal=function(){if(this.state==ol.TileState.LOADING){this.unlistenImage_()}if(this.interimTile){goog.dispose(this.interimTile)}goog.base(this,"disposeInternal")};ol.ImageTile.prototype.getImage=function(e){if(e!==undefined){var o;var t=goog.getUid(e);if(t in this.imageByContext_){return this.imageByContext_[t]}else if(ol.object.isEmpty(this.imageByContext_)){o=this.image_}else{o=this.image_.cloneNode(false)}this.imageByContext_[t]=o;return o}else{return this.image_}};ol.ImageTile.prototype.getKey=function(){return this.src_};ol.ImageTile.prototype.handleImageError_=function(){this.state=ol.TileState.ERROR;this.unlistenImage_();this.changed()};ol.ImageTile.prototype.handleImageLoad_=function(){if(this.image_.naturalWidth&&this.image_.naturalHeight){this.state=ol.TileState.LOADED}else{this.state=ol.TileState.EMPTY}this.unlistenImage_();this.changed()};ol.ImageTile.prototype.load=function(){if(this.state==ol.TileState.IDLE){this.state=ol.TileState.LOADING;this.changed();goog.asserts.assert(!this.imageListenerKeys_,"this.imageListenerKeys_ should be null");this.imageListenerKeys_=[ol.events.listenOnce(this.image_,ol.events.EventType.ERROR,this.handleImageError_,this),ol.events.listenOnce(this.image_,ol.events.EventType.LOAD,this.handleImageLoad_,this)];this.tileLoadFunction_(this,this.src_)}};ol.ImageTile.prototype.unlistenImage_=function(){goog.asserts.assert(this.imageListenerKeys_,"this.imageListenerKeys_ should not be null");this.imageListenerKeys_.forEach(ol.events.unlistenByKey);this.imageListenerKeys_=null};goog.provide("ol.interaction.DragAndDrop");goog.provide("ol.interaction.DragAndDropEvent");goog.require("goog.asserts");goog.require("goog.functions");goog.require("ol.events");goog.require("ol.events.Event");goog.require("ol.events.EventType");goog.require("ol.interaction.Interaction");goog.require("ol.proj");ol.interaction.DragAndDrop=function(e){var o=e?e:{};goog.base(this,{handleEvent:ol.interaction.DragAndDrop.handleEvent});this.formatConstructors_=o.formatConstructors?o.formatConstructors:[];this.projection_=o.projection?ol.proj.get(o.projection):null;this.dropListenKeys_=null;this.target=o.target?o.target:null};goog.inherits(ol.interaction.DragAndDrop,ol.interaction.Interaction);ol.interaction.DragAndDrop.handleDrop_=function(e){var o=e.dataTransfer.files;var t,r,i;for(t=0,r=o.length;t<r;++t){i=o.item(t);var n=new FileReader;n.addEventListener(ol.events.EventType.LOAD,goog.partial(this.handleResult_,i).bind(this));n.readAsText(i)}};ol.interaction.DragAndDrop.handleStop_=function(e){e.stopPropagation();e.preventDefault();e.dataTransfer.dropEffect="copy"};ol.interaction.DragAndDrop.prototype.handleResult_=function(e,o){var t=o.target.result;var r=this.getMap();goog.asserts.assert(r,"map must be set");var i=this.projection_;if(!i){var n=r.getView();goog.asserts.assert(n,"map must have view");i=n.getProjection();goog.asserts.assert(i!==undefined,"projection should be defined")}var a=this.formatConstructors_;var l=[];var s,g;for(s=0,g=a.length;s<g;++s){var p=a[s];var u=new p;l=this.tryReadFeatures_(u,t,{featureProjection:i});if(l&&l.length>0){break}}this.dispatchEvent(new ol.interaction.DragAndDropEvent(ol.interaction.DragAndDropEventType.ADD_FEATURES,this,e,l,i))};ol.interaction.DragAndDrop.handleEvent=goog.functions.TRUE;ol.interaction.DragAndDrop.prototype.setMap=function(e){if(this.dropListenKeys_){this.dropListenKeys_.forEach(ol.events.unlistenByKey);this.dropListenKeys_=null}goog.base(this,"setMap",e);if(e){var o=this.target?this.target:e.getViewport();this.dropListenKeys_=[ol.events.listen(o,ol.events.EventType.DROP,ol.interaction.DragAndDrop.handleDrop_,this),ol.events.listen(o,ol.events.EventType.DRAGENTER,ol.interaction.DragAndDrop.handleStop_,this),ol.events.listen(o,ol.events.EventType.DRAGOVER,ol.interaction.DragAndDrop.handleStop_,this),ol.events.listen(o,ol.events.EventType.DROP,ol.interaction.DragAndDrop.handleStop_,this)]}};ol.interaction.DragAndDrop.prototype.tryReadFeatures_=function(e,o,t){try{return e.readFeatures(o,t)}catch(e){return null}};ol.interaction.DragAndDropEventType={ADD_FEATURES:"addfeatures"};ol.interaction.DragAndDropEvent=function(e,o,t,r,i){goog.base(this,e,o);this.features=r;this.file=t;this.projection=i};goog.inherits(ol.interaction.DragAndDropEvent,ol.events.Event);goog.provide("goog.math.Vec2");goog.require("goog.math");goog.require("goog.math.Coordinate");goog.math.Vec2=function(e,o){this.x=e;this.y=o};goog.inherits(goog.math.Vec2,goog.math.Coordinate);goog.math.Vec2.randomUnit=function(){var e=Math.random()*Math.PI*2;return new goog.math.Vec2(Math.cos(e),Math.sin(e))};goog.math.Vec2.random=function(){var e=Math.sqrt(Math.random());var o=Math.random()*Math.PI*2;return new goog.math.Vec2(Math.cos(o)*e,Math.sin(o)*e)};goog.math.Vec2.fromCoordinate=function(e){return new goog.math.Vec2(e.x,e.y)};goog.math.Vec2.prototype.clone=function(){return new goog.math.Vec2(this.x,this.y)};goog.math.Vec2.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};goog.math.Vec2.prototype.squaredMagnitude=function(){return this.x*this.x+this.y*this.y};goog.math.Vec2.prototype.scale=goog.math.Coordinate.prototype.scale;goog.math.Vec2.prototype.invert=function(){this.x=-this.x;this.y=-this.y;return this};goog.math.Vec2.prototype.normalize=function(){return this.scale(1/this.magnitude())};goog.math.Vec2.prototype.add=function(e){this.x+=e.x;this.y+=e.y;return this};goog.math.Vec2.prototype.subtract=function(e){this.x-=e.x;this.y-=e.y;return this};goog.math.Vec2.prototype.rotate=function(e){var o=Math.cos(e);var t=Math.sin(e);var r=this.x*o-this.y*t;var i=this.y*o+this.x*t;this.x=r;this.y=i;return this};goog.math.Vec2.rotateAroundPoint=function(e,o,t){var r=e.clone();return r.subtract(o).rotate(t).add(o)};goog.math.Vec2.prototype.equals=function(e){return this==e||!!e&&this.x==e.x&&this.y==e.y};goog.math.Vec2.distance=goog.math.Coordinate.distance;goog.math.Vec2.squaredDistance=goog.math.Coordinate.squaredDistance;goog.math.Vec2.equals=goog.math.Coordinate.equals;goog.math.Vec2.sum=function(e,o){return new goog.math.Vec2(e.x+o.x,e.y+o.y)};goog.math.Vec2.difference=function(e,o){return new goog.math.Vec2(e.x-o.x,e.y-o.y)};goog.math.Vec2.dot=function(e,o){return e.x*o.x+e.y*o.y};goog.math.Vec2.determinant=function(e,o){return e.x*o.y-e.y*o.x};goog.math.Vec2.lerp=function(e,o,t){return new goog.math.Vec2(goog.math.lerp(e.x,o.x,t),goog.math.lerp(e.y,o.y,t))};goog.provide("ol.interaction.DragRotateAndZoom");goog.require("goog.math.Vec2");goog.require("ol");goog.require("ol.ViewHint");goog.require("ol.events.ConditionType");goog.require("ol.events.condition");goog.require("ol.interaction.Interaction");goog.require("ol.interaction.Pointer");ol.interaction.DragRotateAndZoom=function(e){var o=e?e:{};goog.base(this,{handleDownEvent:ol.interaction.DragRotateAndZoom.handleDownEvent_,handleDragEvent:ol.interaction.DragRotateAndZoom.handleDragEvent_,handleUpEvent:ol.interaction.DragRotateAndZoom.handleUpEvent_});this.condition_=o.condition?o.condition:ol.events.condition.shiftKeyOnly;this.lastAngle_=undefined;this.lastMagnitude_=undefined;this.lastScaleDelta_=0;this.duration_=o.duration!==undefined?o.duration:400};goog.inherits(ol.interaction.DragRotateAndZoom,ol.interaction.Pointer);ol.interaction.DragRotateAndZoom.handleDragEvent_=function(e){if(!ol.events.condition.mouseOnly(e)){return}var o=e.map;var t=o.getSize();var r=e.pixel;var i=new goog.math.Vec2(r[0]-t[0]/2,t[1]/2-r[1]);var n=Math.atan2(i.y,i.x);var a=i.magnitude();var l=o.getView();o.render();if(this.lastAngle_!==undefined){var s=n-this.lastAngle_;ol.interaction.Interaction.rotateWithoutConstraints(o,l,l.getRotation()-s)}this.lastAngle_=n;if(this.lastMagnitude_!==undefined){var g=this.lastMagnitude_*(l.getResolution()/a);ol.interaction.Interaction.zoomWithoutConstraints(o,l,g)}if(this.lastMagnitude_!==undefined){this.lastScaleDelta_=this.lastMagnitude_/a}this.lastMagnitude_=a};ol.interaction.DragRotateAndZoom.handleUpEvent_=function(e){if(!ol.events.condition.mouseOnly(e)){return true}var o=e.map;var t=o.getView();t.setHint(ol.ViewHint.INTERACTING,-1);var r=this.lastScaleDelta_-1;ol.interaction.Interaction.rotate(o,t,t.getRotation());ol.interaction.Interaction.zoom(o,t,t.getResolution(),undefined,this.duration_,r);this.lastScaleDelta_=0;return false};ol.interaction.DragRotateAndZoom.handleDownEvent_=function(e){if(!ol.events.condition.mouseOnly(e)){return false}if(this.condition_(e)){e.map.getView().setHint(ol.ViewHint.INTERACTING,1);this.lastAngle_=undefined;this.lastMagnitude_=undefined;return true}else{return false}};goog.provide("ol.interaction.Draw");goog.provide("ol.interaction.DrawEvent");goog.provide("ol.interaction.DrawEventType");goog.provide("ol.interaction.DrawGeometryFunctionType");goog.provide("ol.interaction.DrawMode");goog.require("goog.asserts");goog.require("ol.events");goog.require("ol.events.Event");goog.require("ol.Collection");goog.require("ol.Coordinate");goog.require("ol.Feature");goog.require("ol.MapBrowserEvent");goog.require("ol.MapBrowserEvent.EventType");goog.require("ol.Object");goog.require("ol.coordinate");goog.require("ol.events.condition");goog.require("ol.geom.Circle");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LineString");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.geom.SimpleGeometry");goog.require("ol.interaction.InteractionProperty");goog.require("ol.interaction.Pointer");goog.require("ol.layer.Vector");goog.require("ol.source.Vector");ol.interaction.DrawEventType={DRAWSTART:"drawstart",DRAWEND:"drawend"};ol.interaction.DrawEvent=function(e,o){goog.base(this,e);this.feature=o};goog.inherits(ol.interaction.DrawEvent,ol.events.Event);ol.interaction.Draw=function(e){goog.base(this,{handleDownEvent:ol.interaction.Draw.handleDownEvent_,handleEvent:ol.interaction.Draw.handleEvent,handleUpEvent:ol.interaction.Draw.handleUpEvent_});this.downPx_=null;this.freehand_=false;this.source_=e.source?e.source:null;this.features_=e.features?e.features:null;this.snapTolerance_=e.snapTolerance?e.snapTolerance:12;this.type_=e.type;this.mode_=ol.interaction.Draw.getMode_(this.type_);this.minPoints_=e.minPoints?e.minPoints:this.mode_===ol.interaction.DrawMode.POLYGON?3:2;this.maxPoints_=e.maxPoints?e.maxPoints:Infinity;var o=e.geometryFunction;if(!o){if(this.type_===ol.geom.GeometryType.CIRCLE){o=function(e,o){var t=o?o:new ol.geom.Circle([NaN,NaN]);goog.asserts.assertInstanceof(t,ol.geom.Circle,"geometry must be an ol.geom.Circle");var r=ol.coordinate.squaredDistance(e[0],e[1]);t.setCenterAndRadius(e[0],Math.sqrt(r));return t}}else{var t;var r=this.mode_;if(r===ol.interaction.DrawMode.POINT){t=ol.geom.Point}else if(r===ol.interaction.DrawMode.LINE_STRING){t=ol.geom.LineString}else if(r===ol.interaction.DrawMode.POLYGON){t=ol.geom.Polygon}o=function(e,o){var r=o;if(r){r.setCoordinates(e)}else{r=new t(e)}return r}}}this.geometryFunction_=o;this.finishCoordinate_=null;this.sketchFeature_=null;this.sketchPoint_=null;this.sketchCoords_=null;this.sketchLine_=null;this.sketchLineCoords_=null;this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36;this.overlay_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:false,wrapX:e.wrapX?e.wrapX:false}),style:e.style?e.style:ol.interaction.Draw.getDefaultStyleFunction()});this.geometryName_=e.geometryName;this.condition_=e.condition?e.condition:ol.events.condition.noModifierKeys;this.freehandCondition_=e.freehandCondition?e.freehandCondition:ol.events.condition.shiftKeyOnly;ol.events.listen(this,ol.Object.getChangeEventType(ol.interaction.InteractionProperty.ACTIVE),this.updateState_,this)};goog.inherits(ol.interaction.Draw,ol.interaction.Pointer);ol.interaction.Draw.getDefaultStyleFunction=function(){var e=ol.style.createDefaultEditingStyles();return function(o,t){return e[o.getGeometry().getType()]}};ol.interaction.Draw.prototype.setMap=function(e){goog.base(this,"setMap",e);this.updateState_()};ol.interaction.Draw.handleEvent=function(e){var o=!this.freehand_;if(this.freehand_&&e.type===ol.MapBrowserEvent.EventType.POINTERDRAG){this.addToDrawing_(e);o=false}else if(e.type===ol.MapBrowserEvent.EventType.POINTERMOVE){o=this.handlePointerMove_(e)}else if(e.type===ol.MapBrowserEvent.EventType.DBLCLICK){o=false}return ol.interaction.Pointer.handleEvent.call(this,e)&&o};ol.interaction.Draw.handleDownEvent_=function(e){if(this.condition_(e)){this.downPx_=e.pixel;return true}else if((this.mode_===ol.interaction.DrawMode.LINE_STRING||this.mode_===ol.interaction.DrawMode.POLYGON)&&this.freehandCondition_(e)){this.downPx_=e.pixel;this.freehand_=true;if(!this.finishCoordinate_){this.startDrawing_(e)}return true}else{return false}};ol.interaction.Draw.handleUpEvent_=function(e){this.freehand_=false;var o=this.downPx_;var t=e.pixel;var r=o[0]-t[0];var i=o[1]-t[1];var n=r*r+i*i;var a=true;if(n<=this.squaredClickTolerance_){this.handlePointerMove_(e);if(!this.finishCoordinate_){this.startDrawing_(e);if(this.mode_===ol.interaction.DrawMode.POINT){this.finishDrawing()}}else if(this.mode_===ol.interaction.DrawMode.CIRCLE){this.finishDrawing()}else if(this.atFinish_(e)){this.finishDrawing()}else{this.addToDrawing_(e)}a=false}return a};ol.interaction.Draw.prototype.handlePointerMove_=function(e){if(this.finishCoordinate_){this.modifyDrawing_(e)}else{
this.createOrUpdateSketchPoint_(e)}return true};ol.interaction.Draw.prototype.atFinish_=function(e){var o=false;if(this.sketchFeature_){var t=false;var r=[this.finishCoordinate_];if(this.mode_===ol.interaction.DrawMode.LINE_STRING){t=this.sketchCoords_.length>this.minPoints_}else if(this.mode_===ol.interaction.DrawMode.POLYGON){t=this.sketchCoords_[0].length>this.minPoints_;r=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]}if(t){var i=e.map;for(var n=0,a=r.length;n<a;n++){var l=r[n];var s=i.getPixelFromCoordinate(l);var g=e.pixel;var p=g[0]-s[0];var u=g[1]-s[1];var c=this.freehand_&&this.freehandCondition_(e);var d=c?1:this.snapTolerance_;o=Math.sqrt(p*p+u*u)<=d;if(o){this.finishCoordinate_=l;break}}}}return o};ol.interaction.Draw.prototype.createOrUpdateSketchPoint_=function(e){var o=e.coordinate.slice();if(!this.sketchPoint_){this.sketchPoint_=new ol.Feature(new ol.geom.Point(o));this.updateSketchFeatures_()}else{var t=this.sketchPoint_.getGeometry();goog.asserts.assertInstanceof(t,ol.geom.Point,"sketchPointGeom should be an ol.geom.Point");t.setCoordinates(o)}};ol.interaction.Draw.prototype.startDrawing_=function(e){var o=e.coordinate;this.finishCoordinate_=o;if(this.mode_===ol.interaction.DrawMode.POINT){this.sketchCoords_=o.slice()}else if(this.mode_===ol.interaction.DrawMode.POLYGON){this.sketchCoords_=[[o.slice(),o.slice()]];this.sketchLineCoords_=this.sketchCoords_[0]}else{this.sketchCoords_=[o.slice(),o.slice()];if(this.mode_===ol.interaction.DrawMode.CIRCLE){this.sketchLineCoords_=this.sketchCoords_}}if(this.sketchLineCoords_){this.sketchLine_=new ol.Feature(new ol.geom.LineString(this.sketchLineCoords_))}var t=this.geometryFunction_(this.sketchCoords_);goog.asserts.assert(t!==undefined,"geometry should be defined");this.sketchFeature_=new ol.Feature;if(this.geometryName_){this.sketchFeature_.setGeometryName(this.geometryName_)}this.sketchFeature_.setGeometry(t);this.updateSketchFeatures_();this.dispatchEvent(new ol.interaction.DrawEvent(ol.interaction.DrawEventType.DRAWSTART,this.sketchFeature_))};ol.interaction.Draw.prototype.modifyDrawing_=function(e){var o=e.coordinate;var t=this.sketchFeature_.getGeometry();goog.asserts.assertInstanceof(t,ol.geom.SimpleGeometry,"geometry should be ol.geom.SimpleGeometry or subclass");var r,i;if(this.mode_===ol.interaction.DrawMode.POINT){i=this.sketchCoords_}else if(this.mode_===ol.interaction.DrawMode.POLYGON){r=this.sketchCoords_[0];i=r[r.length-1];if(this.atFinish_(e)){o=this.finishCoordinate_.slice()}}else{r=this.sketchCoords_;i=r[r.length-1]}i[0]=o[0];i[1]=o[1];goog.asserts.assert(this.sketchCoords_,"sketchCoords_ expected");this.geometryFunction_(this.sketchCoords_,t);if(this.sketchPoint_){var n=this.sketchPoint_.getGeometry();goog.asserts.assertInstanceof(n,ol.geom.Point,"sketchPointGeom should be an ol.geom.Point");n.setCoordinates(o)}var a;if(t instanceof ol.geom.Polygon&&this.mode_!==ol.interaction.DrawMode.POLYGON){if(!this.sketchLine_){this.sketchLine_=new ol.Feature(new ol.geom.LineString(null))}var l=t.getLinearRing(0);a=this.sketchLine_.getGeometry();goog.asserts.assertInstanceof(a,ol.geom.LineString,"sketchLineGeom must be an ol.geom.LineString");a.setFlatCoordinates(l.getLayout(),l.getFlatCoordinates())}else if(this.sketchLineCoords_){a=this.sketchLine_.getGeometry();goog.asserts.assertInstanceof(a,ol.geom.LineString,"sketchLineGeom must be an ol.geom.LineString");a.setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()};ol.interaction.Draw.prototype.addToDrawing_=function(e){var o=e.coordinate;var t=this.sketchFeature_.getGeometry();goog.asserts.assertInstanceof(t,ol.geom.SimpleGeometry,"geometry must be an ol.geom.SimpleGeometry");var r;var i;if(this.mode_===ol.interaction.DrawMode.LINE_STRING){this.finishCoordinate_=o.slice();i=this.sketchCoords_;i.push(o.slice());r=i.length>this.maxPoints_;this.geometryFunction_(i,t)}else if(this.mode_===ol.interaction.DrawMode.POLYGON){i=this.sketchCoords_[0];i.push(o.slice());r=i.length>this.maxPoints_;if(r){this.finishCoordinate_=i[0]}this.geometryFunction_(this.sketchCoords_,t)}this.updateSketchFeatures_();if(r){this.finishDrawing()}};ol.interaction.Draw.prototype.removeLastPoint=function(){var e=this.sketchFeature_.getGeometry();goog.asserts.assertInstanceof(e,ol.geom.SimpleGeometry,"geometry must be an ol.geom.SimpleGeometry");var o,t;if(this.mode_===ol.interaction.DrawMode.LINE_STRING){o=this.sketchCoords_;o.splice(-2,1);this.geometryFunction_(o,e)}else if(this.mode_===ol.interaction.DrawMode.POLYGON){o=this.sketchCoords_[0];o.splice(-2,1);t=this.sketchLine_.getGeometry();goog.asserts.assertInstanceof(t,ol.geom.LineString,"sketchLineGeom must be an ol.geom.LineString");t.setCoordinates(o);this.geometryFunction_(this.sketchCoords_,e)}if(o.length===0){this.finishCoordinate_=null}this.updateSketchFeatures_()};ol.interaction.Draw.prototype.finishDrawing=function(){var e=this.abortDrawing_();goog.asserts.assert(e,"sketchFeature expected to be truthy");var o=this.sketchCoords_;var t=e.getGeometry();goog.asserts.assertInstanceof(t,ol.geom.SimpleGeometry,"geometry must be an ol.geom.SimpleGeometry");if(this.mode_===ol.interaction.DrawMode.LINE_STRING){o.pop();this.geometryFunction_(o,t)}else if(this.mode_===ol.interaction.DrawMode.POLYGON){o[0].pop();o[0].push(o[0][0]);this.geometryFunction_(o,t)}if(this.type_===ol.geom.GeometryType.MULTI_POINT){e.setGeometry(new ol.geom.MultiPoint([o]))}else if(this.type_===ol.geom.GeometryType.MULTI_LINE_STRING){e.setGeometry(new ol.geom.MultiLineString([o]))}else if(this.type_===ol.geom.GeometryType.MULTI_POLYGON){e.setGeometry(new ol.geom.MultiPolygon([o]))}this.dispatchEvent(new ol.interaction.DrawEvent(ol.interaction.DrawEventType.DRAWEND,e));if(this.features_){this.features_.push(e)}if(this.source_){this.source_.addFeature(e)}};ol.interaction.Draw.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var e=this.sketchFeature_;if(e){this.sketchFeature_=null;this.sketchPoint_=null;this.sketchLine_=null;this.overlay_.getSource().clear(true)}return e};ol.interaction.Draw.prototype.extend=function(e){var o=e.getGeometry();goog.asserts.assert(this.mode_==ol.interaction.DrawMode.LINE_STRING,'interaction mode must be "line"');goog.asserts.assert(o,"feature must have a geometry");goog.asserts.assert(o.getType()==ol.geom.GeometryType.LINE_STRING,"feature geometry must be a line string");var t=o;this.sketchFeature_=e;this.sketchCoords_=t.getCoordinates();var r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice();this.sketchCoords_.push(r.slice());this.updateSketchFeatures_();this.dispatchEvent(new ol.interaction.DrawEvent(ol.interaction.DrawEventType.DRAWSTART,this.sketchFeature_))};ol.interaction.Draw.prototype.shouldStopEvent=goog.functions.FALSE;ol.interaction.Draw.prototype.updateSketchFeatures_=function(){var e=[];if(this.sketchFeature_){e.push(this.sketchFeature_)}if(this.sketchLine_){e.push(this.sketchLine_)}if(this.sketchPoint_){e.push(this.sketchPoint_)}var o=this.overlay_.getSource();o.clear(true);o.addFeatures(e)};ol.interaction.Draw.prototype.updateState_=function(){var e=this.getMap();var o=this.getActive();if(!e||!o){this.abortDrawing_()}this.overlay_.setMap(o?e:null)};ol.interaction.Draw.createRegularPolygon=function(e,o){return function(t,r){var i=t[0];var n=t[1];var a=Math.sqrt(ol.coordinate.squaredDistance(i,n));var l=r?r:ol.geom.Polygon.fromCircle(new ol.geom.Circle(i),e);goog.asserts.assertInstanceof(l,ol.geom.Polygon,"geometry must be a polygon");var s=o?o:Math.atan((n[1]-i[1])/(n[0]-i[0]));ol.geom.Polygon.makeRegular(l,i,a,s);return l}};ol.interaction.Draw.getMode_=function(e){var o;if(e===ol.geom.GeometryType.POINT||e===ol.geom.GeometryType.MULTI_POINT){o=ol.interaction.DrawMode.POINT}else if(e===ol.geom.GeometryType.LINE_STRING||e===ol.geom.GeometryType.MULTI_LINE_STRING){o=ol.interaction.DrawMode.LINE_STRING}else if(e===ol.geom.GeometryType.POLYGON||e===ol.geom.GeometryType.MULTI_POLYGON){o=ol.interaction.DrawMode.POLYGON}else if(e===ol.geom.GeometryType.CIRCLE){o=ol.interaction.DrawMode.CIRCLE}goog.asserts.assert(o!==undefined,"mode should be defined");return o};ol.interaction.DrawGeometryFunctionType;ol.interaction.DrawMode={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"};goog.provide("ol.interaction.Modify");goog.provide("ol.interaction.ModifyEvent");goog.require("goog.asserts");goog.require("ol.events");goog.require("ol.events.Event");goog.require("ol.events.EventType");goog.require("goog.functions");goog.require("ol");goog.require("ol.Collection");goog.require("ol.CollectionEventType");goog.require("ol.Feature");goog.require("ol.MapBrowserEvent.EventType");goog.require("ol.MapBrowserPointerEvent");goog.require("ol.ViewHint");goog.require("ol.array");goog.require("ol.coordinate");goog.require("ol.events.condition");goog.require("ol.extent");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LineString");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.interaction.Pointer");goog.require("ol.layer.Vector");goog.require("ol.source.Vector");goog.require("ol.structs.RBush");ol.ModifyEventType={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};ol.interaction.ModifyEvent=function(e,o,t){goog.base(this,e);this.features=o;this.mapBrowserPointerEvent=t};goog.inherits(ol.interaction.ModifyEvent,ol.events.Event);ol.interaction.SegmentDataType;ol.interaction.Modify=function(e){goog.base(this,{handleDownEvent:ol.interaction.Modify.handleDownEvent_,handleDragEvent:ol.interaction.Modify.handleDragEvent_,handleEvent:ol.interaction.Modify.handleEvent,handleUpEvent:ol.interaction.Modify.handleUpEvent_});this.deleteCondition_=e.deleteCondition?e.deleteCondition:goog.functions.and(ol.events.condition.noModifierKeys,ol.events.condition.singleClick);this.vertexFeature_=null;this.vertexSegments_=null;this.lastPixel_=[0,0];this.ignoreNextSingleClick_=false;this.modified_=false;this.rBush_=new ol.structs.RBush;this.pixelTolerance_=e.pixelTolerance!==undefined?e.pixelTolerance:10;this.snappedToVertex_=false;this.changingFeature_=false;this.dragSegments_=null;this.overlay_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:false,wrapX:!!e.wrapX}),style:e.style?e.style:ol.interaction.Modify.getDefaultStyleFunction(),updateWhileAnimating:true,updateWhileInteracting:true});this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_};this.features_=e.features;this.features_.forEach(this.addFeature_,this);ol.events.listen(this.features_,ol.CollectionEventType.ADD,this.handleFeatureAdd_,this);ol.events.listen(this.features_,ol.CollectionEventType.REMOVE,this.handleFeatureRemove_,this)};goog.inherits(ol.interaction.Modify,ol.interaction.Pointer);ol.interaction.Modify.prototype.addFeature_=function(e){var o=e.getGeometry();if(o.getType()in this.SEGMENT_WRITERS_){this.SEGMENT_WRITERS_[o.getType()].call(this,e,o)}var t=this.getMap();if(t){this.handlePointerAtPixel_(this.lastPixel_,t)}ol.events.listen(e,ol.events.EventType.CHANGE,this.handleFeatureChange_,this)};ol.interaction.Modify.prototype.willModifyFeatures_=function(e){if(!this.modified_){this.modified_=true;this.dispatchEvent(new ol.interaction.ModifyEvent(ol.ModifyEventType.MODIFYSTART,this.features_,e))}};ol.interaction.Modify.prototype.removeFeature_=function(e){this.removeFeatureSegmentData_(e);if(this.vertexFeature_&&this.features_.getLength()===0){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}ol.events.unlisten(e,ol.events.EventType.CHANGE,this.handleFeatureChange_,this)};ol.interaction.Modify.prototype.removeFeatureSegmentData_=function(e){var o=this.rBush_;var t=[];o.forEach(function(o){if(e===o.feature){t.push(o)}});for(var r=t.length-1;r>=0;--r){o.remove(t[r])}};ol.interaction.Modify.prototype.setMap=function(e){this.overlay_.setMap(e);goog.base(this,"setMap",e)};ol.interaction.Modify.prototype.handleFeatureAdd_=function(e){var o=e.element;goog.asserts.assertInstanceof(o,ol.Feature,"feature should be an ol.Feature");this.addFeature_(o)};ol.interaction.Modify.prototype.handleFeatureChange_=function(e){if(!this.changingFeature_){var o=e.target;this.removeFeature_(o);this.addFeature_(o)}};ol.interaction.Modify.prototype.handleFeatureRemove_=function(e){var o=e.element;this.removeFeature_(o)};ol.interaction.Modify.prototype.writePointGeometry_=function(e,o){var t=o.getCoordinates();var r={feature:e,geometry:o,segment:[t,t]};this.rBush_.insert(o.getExtent(),r)};ol.interaction.Modify.prototype.writeMultiPointGeometry_=function(e,o){var t=o.getCoordinates();var r,i,n,a;for(i=0,n=t.length;i<n;++i){r=t[i];a={feature:e,geometry:o,depth:[i],index:i,segment:[r,r]};this.rBush_.insert(o.getExtent(),a)}};ol.interaction.Modify.prototype.writeLineStringGeometry_=function(e,o){var t=o.getCoordinates();var r,i,n,a;for(r=0,i=t.length-1;r<i;++r){n=t.slice(r,r+2);a={feature:e,geometry:o,index:r,segment:n};this.rBush_.insert(ol.extent.boundingExtent(n),a)}};ol.interaction.Modify.prototype.writeMultiLineStringGeometry_=function(e,o){var t=o.getCoordinates();var r,i,n,a,l,s,g;for(a=0,l=t.length;a<l;++a){r=t[a];for(i=0,n=r.length-1;i<n;++i){s=r.slice(i,i+2);g={feature:e,geometry:o,depth:[a],index:i,segment:s};this.rBush_.insert(ol.extent.boundingExtent(s),g)}}};ol.interaction.Modify.prototype.writePolygonGeometry_=function(e,o){var t=o.getCoordinates();var r,i,n,a,l,s,g;for(a=0,l=t.length;a<l;++a){r=t[a];for(i=0,n=r.length-1;i<n;++i){s=r.slice(i,i+2);g={feature:e,geometry:o,depth:[a],index:i,segment:s};this.rBush_.insert(ol.extent.boundingExtent(s),g)}}};ol.interaction.Modify.prototype.writeMultiPolygonGeometry_=function(e,o){var t=o.getCoordinates();var r,i,n,a,l,s,g,p,u,c;for(s=0,g=t.length;s<g;++s){p=t[s];for(a=0,l=p.length;a<l;++a){r=p[a];for(i=0,n=r.length-1;i<n;++i){u=r.slice(i,i+2);c={feature:e,geometry:o,depth:[a,s],index:i,segment:u};this.rBush_.insert(ol.extent.boundingExtent(u),c)}}}};ol.interaction.Modify.prototype.writeGeometryCollectionGeometry_=function(e,o){var t,r=o.getGeometriesArray();for(t=0;t<r.length;++t){this.SEGMENT_WRITERS_[r[t].getType()].call(this,e,r[t])}};ol.interaction.Modify.prototype.createOrUpdateVertexFeature_=function(e){var o=this.vertexFeature_;if(!o){o=new ol.Feature(new ol.geom.Point(e));this.vertexFeature_=o;this.overlay_.getSource().addFeature(o)}else{var t=o.getGeometry();t.setCoordinates(e)}return o};ol.interaction.Modify.compareIndexes_=function(e,o){return e.index-o.index};ol.interaction.Modify.handleDownEvent_=function(e){this.handlePointerAtPixel_(e.pixel,e.map);this.dragSegments_=[];this.modified_=false;var o=this.vertexFeature_;if(o){var t=[];var r=o.getGeometry();var i=r.getCoordinates();var n=ol.extent.boundingExtent([i]);var a=this.rBush_.getInExtent(n);var l={};a.sort(ol.interaction.Modify.compareIndexes_);for(var s=0,g=a.length;s<g;++s){var p=a[s];var u=p.segment;var c=goog.getUid(p.feature);var d=p.depth;if(d){c+="-"+d.join("-")}if(!l[c]){l[c]=new Array(2)}if(ol.coordinate.equals(u[0],i)&&!l[c][0]){this.dragSegments_.push([p,0]);l[c][0]=p}else if(ol.coordinate.equals(u[1],i)&&!l[c][1]){if((p.geometry.getType()===ol.geom.GeometryType.LINE_STRING||p.geometry.getType()===ol.geom.GeometryType.MULTI_LINE_STRING)&&l[c][0]&&l[c][0].index===0){continue}this.dragSegments_.push([p,1]);l[c][1]=p}else if(goog.getUid(u)in this.vertexSegments_&&(!l[c][0]&&!l[c][1])){t.push([p,i])}}if(t.length){this.willModifyFeatures_(e)}for(var y=t.length-1;y>=0;--y){this.insertVertex_.apply(this,t[y])}}return!!this.vertexFeature_};ol.interaction.Modify.handleDragEvent_=function(e){this.ignoreNextSingleClick_=false;this.willModifyFeatures_(e);var o=e.coordinate;for(var t=0,r=this.dragSegments_.length;t<r;++t){var i=this.dragSegments_[t];var n=i[0];var a=n.depth;var l=n.geometry;var s=l.getCoordinates();var g=n.segment;var p=i[1];while(o.length<l.getStride()){o.push(0)}switch(l.getType()){case ol.geom.GeometryType.POINT:s=o;g[0]=g[1]=o;break;case ol.geom.GeometryType.MULTI_POINT:s[n.index]=o;g[0]=g[1]=o;break;case ol.geom.GeometryType.LINE_STRING:s[n.index+p]=o;g[p]=o;break;case ol.geom.GeometryType.MULTI_LINE_STRING:s[a[0]][n.index+p]=o;g[p]=o;break;case ol.geom.GeometryType.POLYGON:s[a[0]][n.index+p]=o;g[p]=o;break;case ol.geom.GeometryType.MULTI_POLYGON:s[a[1]][a[0]][n.index+p]=o;g[p]=o;break;default:}this.setGeometryCoordinates_(l,s)}this.createOrUpdateVertexFeature_(o)};ol.interaction.Modify.handleUpEvent_=function(e){var o;for(var t=this.dragSegments_.length-1;t>=0;--t){o=this.dragSegments_[t][0];this.rBush_.update(ol.extent.boundingExtent(o.segment),o)}if(this.modified_){this.dispatchEvent(new ol.interaction.ModifyEvent(ol.ModifyEventType.MODIFYEND,this.features_,e));this.modified_=false}return false};ol.interaction.Modify.handleEvent=function(e){if(!(e instanceof ol.MapBrowserPointerEvent)){return true}var o;if(!e.map.getView().getHints()[ol.ViewHint.INTERACTING]&&e.type==ol.MapBrowserEvent.EventType.POINTERMOVE&&!this.handlingDownUpSequence){this.handlePointerMove_(e)}if(this.vertexFeature_&&this.deleteCondition_(e)){if(e.type!=ol.MapBrowserEvent.EventType.SINGLECLICK||!this.ignoreNextSingleClick_){var t=this.vertexFeature_.getGeometry();goog.asserts.assertInstanceof(t,ol.geom.Point,"geometry should be an ol.geom.Point");this.willModifyFeatures_(e);o=this.removeVertex_();this.dispatchEvent(new ol.interaction.ModifyEvent(ol.ModifyEventType.MODIFYEND,this.features_,e));this.modified_=false}else{o=true}}if(e.type==ol.MapBrowserEvent.EventType.SINGLECLICK){this.ignoreNextSingleClick_=false}return ol.interaction.Pointer.handleEvent.call(this,e)&&!o};ol.interaction.Modify.prototype.handlePointerMove_=function(e){this.lastPixel_=e.pixel;this.handlePointerAtPixel_(e.pixel,e.map)};ol.interaction.Modify.prototype.handlePointerAtPixel_=function(e,o){var t=o.getCoordinateFromPixel(e);var r=function(e,o){return ol.coordinate.squaredDistanceToSegment(t,e.segment)-ol.coordinate.squaredDistanceToSegment(t,o.segment)};var i=o.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]);var n=o.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]);var a=ol.extent.boundingExtent([i,n]);var l=this.rBush_;var s=l.getInExtent(a);if(s.length>0){s.sort(r);var g=s[0];var p=g.segment;var u=ol.coordinate.closestOnSegment(t,p);var c=o.getPixelFromCoordinate(u);if(Math.sqrt(ol.coordinate.squaredDistance(e,c))<=this.pixelTolerance_){var d=o.getPixelFromCoordinate(p[0]);var y=o.getPixelFromCoordinate(p[1]);var h=ol.coordinate.squaredDistance(c,d);var m=ol.coordinate.squaredDistance(c,y);var f=Math.sqrt(Math.min(h,m));this.snappedToVertex_=f<=this.pixelTolerance_;if(this.snappedToVertex_){u=h>m?p[1]:p[0]}this.createOrUpdateVertexFeature_(u);var v={};v[goog.getUid(p)]=true;var _;for(var E=1,S=s.length;E<S;++E){_=s[E].segment;if(ol.coordinate.equals(p[0],_[0])&&ol.coordinate.equals(p[1],_[1])||ol.coordinate.equals(p[0],_[1])&&ol.coordinate.equals(p[1],_[0])){v[goog.getUid(_)]=true}else{break}}this.vertexSegments_=v;return}}if(this.vertexFeature_){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}};ol.interaction.Modify.prototype.insertVertex_=function(e,o){var t=e.segment;var r=e.feature;var i=e.geometry;var n=e.depth;var a=e.index;var l;while(o.length<i.getStride()){o.push(0)}switch(i.getType()){case ol.geom.GeometryType.MULTI_LINE_STRING:goog.asserts.assertInstanceof(i,ol.geom.MultiLineString,"geometry should be an ol.geom.MultiLineString");l=i.getCoordinates();l[n[0]].splice(a+1,0,o);break;case ol.geom.GeometryType.POLYGON:goog.asserts.assertInstanceof(i,ol.geom.Polygon,"geometry should be an ol.geom.Polygon");l=i.getCoordinates();l[n[0]].splice(a+1,0,o);break;case ol.geom.GeometryType.MULTI_POLYGON:goog.asserts.assertInstanceof(i,ol.geom.MultiPolygon,"geometry should be an ol.geom.MultiPolygon");l=i.getCoordinates();l[n[1]][n[0]].splice(a+1,0,o);break;case ol.geom.GeometryType.LINE_STRING:goog.asserts.assertInstanceof(i,ol.geom.LineString,"geometry should be an ol.geom.LineString");l=i.getCoordinates();l.splice(a+1,0,o);break;default:return}this.setGeometryCoordinates_(i,l);var s=this.rBush_;goog.asserts.assert(t!==undefined,"segment should be defined");s.remove(e);goog.asserts.assert(a!==undefined,"index should be defined");this.updateSegmentIndices_(i,a,n,1);var g={segment:[t[0],o],feature:r,geometry:i,depth:n,index:a};s.insert(ol.extent.boundingExtent(g.segment),g);this.dragSegments_.push([g,1]);var p={segment:[o,t[1]],feature:r,geometry:i,depth:n,index:a+1};s.insert(ol.extent.boundingExtent(p.segment),p);this.dragSegments_.push([p,0]);this.ignoreNextSingleClick_=true};ol.interaction.Modify.prototype.removeVertex_=function(){var e=this.dragSegments_;var o={};var t,r,i,n,a,l,s;var g,p,u,c,d,y;for(a=e.length-1;a>=0;--a){i=e[a];c=i[0];n=c.geometry;r=n.getCoordinates();d=goog.getUid(c.feature);if(c.depth){d+="-"+c.depth.join("-")}s=u=l=undefined;if(i[1]===0){u=c;l=c.index}else if(i[1]==1){s=c;l=c.index+1}if(!(d in o)){o[d]=[s,u,l]}p=o[d];if(s!==undefined){p[0]=s}if(u!==undefined){p[1]=u}if(p[0]!==undefined&&p[1]!==undefined){t=r;y=false;g=l-1;switch(n.getType()){case ol.geom.GeometryType.MULTI_LINE_STRING:r[c.depth[0]].splice(l,1);y=true;break;case ol.geom.GeometryType.LINE_STRING:r.splice(l,1);y=true;break;case ol.geom.GeometryType.MULTI_POLYGON:t=t[c.depth[1]];case ol.geom.GeometryType.POLYGON:t=t[c.depth[0]];if(t.length>4){if(l==t.length-1){l=0}t.splice(l,1);y=true;if(l===0){t.pop();t.push(t[0]);g=t.length-1}}break;default:}if(y){this.rBush_.remove(p[0]);this.rBush_.remove(p[1]);this.setGeometryCoordinates_(n,r);goog.asserts.assert(g>=0,"newIndex should be larger than 0");var h={depth:c.depth,feature:c.feature,geometry:c.geometry,index:g,segment:[p[0].segment[0],p[1].segment[1]]};this.rBush_.insert(ol.extent.boundingExtent(h.segment),h);this.updateSegmentIndices_(n,l,c.depth,-1);if(this.vertexFeature_){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}}}}return true};ol.interaction.Modify.prototype.setGeometryCoordinates_=function(e,o){this.changingFeature_=true;e.setCoordinates(o);this.changingFeature_=false};ol.interaction.Modify.prototype.updateSegmentIndices_=function(e,o,t,r){this.rBush_.forEachInExtent(e.getExtent(),function(i){if(i.geometry===e&&(t===undefined||i.depth===undefined||ol.array.equals(i.depth,t))&&i.index>o){i.index+=r}})};ol.interaction.Modify.getDefaultStyleFunction=function(){var e=ol.style.createDefaultEditingStyles();return function(o,t){return e[ol.geom.GeometryType.POINT]}};goog.provide("ol.interaction.Select");goog.provide("ol.interaction.SelectEvent");goog.provide("ol.interaction.SelectEventType");goog.provide("ol.interaction.SelectFilterFunction");goog.require("goog.asserts");goog.require("goog.functions");goog.require("ol.CollectionEventType");goog.require("ol.Feature");goog.require("ol.array");goog.require("ol.events");goog.require("ol.events.Event");goog.require("ol.events.condition");goog.require("ol.geom.GeometryType");goog.require("ol.interaction.Interaction");goog.require("ol.layer.Vector");goog.require("ol.object");goog.require("ol.source.Vector");ol.interaction.SelectEventType={SELECT:"select"};ol.interaction.SelectFilterFunction;ol.interaction.SelectEvent=function(e,o,t,r){goog.base(this,e);this.selected=o;this.deselected=t;this.mapBrowserEvent=r};goog.inherits(ol.interaction.SelectEvent,ol.events.Event);ol.interaction.Select=function(e){goog.base(this,{handleEvent:ol.interaction.Select.handleEvent});var o=e?e:{};this.condition_=o.condition?o.condition:ol.events.condition.singleClick;this.addCondition_=o.addCondition?o.addCondition:ol.events.condition.never;this.removeCondition_=o.removeCondition?o.removeCondition:ol.events.condition.never;this.toggleCondition_=o.toggleCondition?o.toggleCondition:ol.events.condition.shiftKeyOnly;this.multi_=o.multi?o.multi:false;this.filter_=o.filter?o.filter:goog.functions.TRUE;var t=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:false,features:o.features,wrapX:o.wrapX}),style:o.style?o.style:ol.interaction.Select.getDefaultStyleFunction(),updateWhileAnimating:true,updateWhileInteracting:true});this.featureOverlay_=t;var r;if(o.layers){if(goog.isFunction(o.layers)){r=function(e){goog.asserts.assertFunction(o.layers);return o.layers(e)}}else{var i=o.layers;r=function(e){return ol.array.includes(i,e)}}}else{r=goog.functions.TRUE}this.layerFilter_=r;this.featureLayerAssociation_={};var n=this.featureOverlay_.getSource().getFeaturesCollection();ol.events.listen(n,ol.CollectionEventType.ADD,this.addFeature_,this);ol.events.listen(n,ol.CollectionEventType.REMOVE,this.removeFeature_,this)};goog.inherits(ol.interaction.Select,ol.interaction.Interaction);ol.interaction.Select.prototype.addFeatureLayerAssociation_=function(e,o){var t=goog.getUid(e);this.featureLayerAssociation_[t]=o};ol.interaction.Select.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()};ol.interaction.Select.prototype.getLayer=function(e){goog.asserts.assertInstanceof(e,ol.Feature,"feature should be an ol.Feature");var o=goog.getUid(e);return this.featureLayerAssociation_[o]};ol.interaction.Select.handleEvent=function(e){if(!this.condition_(e)){return true}var o=this.addCondition_(e);var t=this.removeCondition_(e);var r=this.toggleCondition_(e);var i=!o&&!t&&!r;var n=e.map;var a=this.featureOverlay_.getSource().getFeaturesCollection();var l=[];var s=[];var g=false;if(i){n.forEachFeatureAtPixel(e.pixel,function(e,o){if(this.filter_(e,o)){s.push(e);this.addFeatureLayerAssociation_(e,o);return!this.multi_}},this,this.layerFilter_);if(s.length>0&&a.getLength()==1&&a.item(0)==s[0]){}else{g=true;if(a.getLength()!==0){l=Array.prototype.concat(a.getArray());a.clear()}a.extend(s);if(s.length===0){ol.object.clear(this.featureLayerAssociation_)}else{if(l.length>0){l.forEach(function(e){this.removeFeatureLayerAssociation_(e)},this)}}}}else{n.forEachFeatureAtPixel(e.pixel,function(e,i){if(this.filter_(e,i)){if((o||r)&&!ol.array.includes(a.getArray(),e)){s.push(e);this.addFeatureLayerAssociation_(e,i)}else if((t||r)&&ol.array.includes(a.getArray(),e)){l.push(e);this.removeFeatureLayerAssociation_(e)}return!this.multi_}},this,this.layerFilter_);var p;for(p=l.length-1;p>=0;--p){a.remove(l[p])}a.extend(s);if(s.length>0||l.length>0){g=true}}if(g){this.dispatchEvent(new ol.interaction.SelectEvent(ol.interaction.SelectEventType.SELECT,s,l,e))}return ol.events.condition.pointerMove(e)};ol.interaction.Select.prototype.setMap=function(e){var o=this.getMap();var t=this.featureOverlay_.getSource().getFeaturesCollection();if(o){t.forEach(o.unskipFeature,o)}goog.base(this,"setMap",e);this.featureOverlay_.setMap(e);if(e){t.forEach(e.skipFeature,e)}};ol.interaction.Select.getDefaultStyleFunction=function(){var e=ol.style.createDefaultEditingStyles();ol.array.extend(e[ol.geom.GeometryType.POLYGON],e[ol.geom.GeometryType.LINE_STRING]);ol.array.extend(e[ol.geom.GeometryType.GEOMETRY_COLLECTION],e[ol.geom.GeometryType.LINE_STRING]);return function(o,t){return e[o.getGeometry().getType()]}};ol.interaction.Select.prototype.addFeature_=function(e){var o=e.element;var t=this.getMap();goog.asserts.assertInstanceof(o,ol.Feature,"feature should be an ol.Feature");if(t){t.skipFeature(o)}};ol.interaction.Select.prototype.removeFeature_=function(e){var o=e.element;var t=this.getMap();goog.asserts.assertInstanceof(o,ol.Feature,"feature should be an ol.Feature");if(t){t.unskipFeature(o)}};ol.interaction.Select.prototype.removeFeatureLayerAssociation_=function(e){var o=goog.getUid(e);delete this.featureLayerAssociation_[o]};goog.provide("ol.interaction.Snap");goog.provide("ol.interaction.SnapProperty");goog.require("goog.asserts");goog.require("ol");goog.require("ol.Collection");goog.require("ol.CollectionEvent");goog.require("ol.CollectionEventType");goog.require("ol.Extent");goog.require("ol.Feature");goog.require("ol.Object");goog.require("ol.Observable");goog.require("ol.coordinate");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol.extent");goog.require("ol.geom.Geometry");goog.require("ol.interaction.Pointer");goog.require("ol.object");goog.require("ol.source.Vector");goog.require("ol.source.VectorEvent");goog.require("ol.source.VectorEventType");goog.require("ol.structs.RBush");ol.interaction.Snap=function(e){goog.base(this,{handleEvent:ol.interaction.Snap.handleEvent_,handleDownEvent:goog.functions.TRUE,handleUpEvent:ol.interaction.Snap.handleUpEvent_});var o=e?e:{};this.source_=o.source?o.source:null;this.features_=o.features?o.features:null;this.featuresListenerKeys_=[];this.geometryChangeListenerKeys_={};this.geometryModifyListenerKeys_={};this.indexedFeaturesExtents_={};this.pendingFeatures_={};this.pixelCoordinate_=null;this.pixelTolerance_=o.pixelTolerance!==undefined?o.pixelTolerance:10;this.sortByDistance_=ol.interaction.Snap.sortByDistance.bind(this);this.rBush_=new ol.structs.RBush;this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_}};goog.inherits(ol.interaction.Snap,ol.interaction.Pointer);ol.interaction.Snap.prototype.addFeature=function(e,o){var t=o!==undefined?o:true;var r=e.getGeometry();var i=this.SEGMENT_WRITERS_[r.getType()];if(i){var n=goog.getUid(e);this.indexedFeaturesExtents_[n]=r.getExtent(ol.extent.createEmpty());i.call(this,e,r);if(t){this.geometryModifyListenerKeys_[n]=ol.events.listen(r,ol.events.EventType.CHANGE,this.handleGeometryModify_.bind(this,e),this);this.geometryChangeListenerKeys_[n]=ol.events.listen(e,ol.Object.getChangeEventType(e.getGeometryName()),this.handleGeometryChange_,this)}}};ol.interaction.Snap.prototype.forEachFeatureAdd_=function(e){this.addFeature(e)};ol.interaction.Snap.prototype.forEachFeatureRemove_=function(e){this.removeFeature(e)};ol.interaction.Snap.prototype.getFeatures_=function(){var e;if(this.features_){e=this.features_}else if(this.source_){e=this.source_.getFeatures()}goog.asserts.assert(e!==undefined,"features should be defined");return e};ol.interaction.Snap.prototype.handleFeatureAdd_=function(e){var o;if(e instanceof ol.source.VectorEvent){o=e.feature}else if(e instanceof ol.CollectionEvent){o=e.element}goog.asserts.assertInstanceof(o,ol.Feature,"feature should be an ol.Feature");this.addFeature(o)};ol.interaction.Snap.prototype.handleFeatureRemove_=function(e){var o;if(e instanceof ol.source.VectorEvent){o=e.feature}else if(e instanceof ol.CollectionEvent){o=e.element}goog.asserts.assertInstanceof(o,ol.Feature,"feature should be an ol.Feature");this.removeFeature(o)};ol.interaction.Snap.prototype.handleGeometryChange_=function(e){var o=e.target;goog.asserts.assertInstanceof(o,ol.Feature);this.removeFeature(o,true);this.addFeature(o,true)};ol.interaction.Snap.prototype.handleGeometryModify_=function(e,o){if(this.handlingDownUpSequence){var t=goog.getUid(e);if(!(t in this.pendingFeatures_)){this.pendingFeatures_[t]=e}}else{this.updateFeature_(e)}};ol.interaction.Snap.prototype.removeFeature=function(e,o){var t=o!==undefined?o:true;var r=goog.getUid(e);var i=this.indexedFeaturesExtents_[r];if(i){var n=this.rBush_;var a,l=[];n.forEachInExtent(i,function(o){if(e===o.feature){l.push(o)}});for(a=l.length-1;a>=0;--a){n.remove(l[a])}if(t){ol.Observable.unByKey(this.geometryModifyListenerKeys_[r]);delete this.geometryModifyListenerKeys_[r]
;ol.Observable.unByKey(this.geometryChangeListenerKeys_[r]);delete this.geometryChangeListenerKeys_[r]}}};ol.interaction.Snap.prototype.setMap=function(e){var o=this.getMap();var t=this.featuresListenerKeys_;var r=this.getFeatures_();if(o){t.forEach(ol.Observable.unByKey);t.length=0;r.forEach(this.forEachFeatureRemove_,this)}goog.base(this,"setMap",e);if(e){if(this.features_){t.push(ol.events.listen(this.features_,ol.CollectionEventType.ADD,this.handleFeatureAdd_,this),ol.events.listen(this.features_,ol.CollectionEventType.REMOVE,this.handleFeatureRemove_,this))}else if(this.source_){t.push(ol.events.listen(this.source_,ol.source.VectorEventType.ADDFEATURE,this.handleFeatureAdd_,this),ol.events.listen(this.source_,ol.source.VectorEventType.REMOVEFEATURE,this.handleFeatureRemove_,this))}r.forEach(this.forEachFeatureAdd_,this)}};ol.interaction.Snap.prototype.shouldStopEvent=goog.functions.FALSE;ol.interaction.Snap.prototype.snapTo=function(e,o,t){var r=t.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]);var i=t.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]);var n=ol.extent.boundingExtent([r,i]);var a=this.rBush_.getInExtent(n);var l=false;var s=false;var g=null;var p=null;if(a.length>0){this.pixelCoordinate_=o;a.sort(this.sortByDistance_);var u=a[0].segment;g=ol.coordinate.closestOnSegment(o,u);p=t.getPixelFromCoordinate(g);if(Math.sqrt(ol.coordinate.squaredDistance(e,p))<=this.pixelTolerance_){s=true;var c=t.getPixelFromCoordinate(u[0]);var d=t.getPixelFromCoordinate(u[1]);var y=ol.coordinate.squaredDistance(p,c);var h=ol.coordinate.squaredDistance(p,d);var m=Math.sqrt(Math.min(y,h));l=m<=this.pixelTolerance_;if(l){g=y>h?u[1]:u[0];p=t.getPixelFromCoordinate(g);p=[Math.round(p[0]),Math.round(p[1])]}}}return{snapped:s,vertex:g,vertexPixel:p}};ol.interaction.Snap.prototype.updateFeature_=function(e){this.removeFeature(e,false);this.addFeature(e,false)};ol.interaction.Snap.prototype.writeGeometryCollectionGeometry_=function(e,o){var t,r=o.getGeometriesArray();for(t=0;t<r.length;++t){this.SEGMENT_WRITERS_[r[t].getType()].call(this,e,r[t])}};ol.interaction.Snap.prototype.writeLineStringGeometry_=function(e,o){var t=o.getCoordinates();var r,i,n,a;for(r=0,i=t.length-1;r<i;++r){n=t.slice(r,r+2);a={feature:e,segment:n};this.rBush_.insert(ol.extent.boundingExtent(n),a)}};ol.interaction.Snap.prototype.writeMultiLineStringGeometry_=function(e,o){var t=o.getCoordinates();var r,i,n,a,l,s,g;for(a=0,l=t.length;a<l;++a){r=t[a];for(i=0,n=r.length-1;i<n;++i){s=r.slice(i,i+2);g={feature:e,segment:s};this.rBush_.insert(ol.extent.boundingExtent(s),g)}}};ol.interaction.Snap.prototype.writeMultiPointGeometry_=function(e,o){var t=o.getCoordinates();var r,i,n,a;for(i=0,n=t.length;i<n;++i){r=t[i];a={feature:e,segment:[r,r]};this.rBush_.insert(o.getExtent(),a)}};ol.interaction.Snap.prototype.writeMultiPolygonGeometry_=function(e,o){var t=o.getCoordinates();var r,i,n,a,l,s,g,p,u,c;for(s=0,g=t.length;s<g;++s){p=t[s];for(a=0,l=p.length;a<l;++a){r=p[a];for(i=0,n=r.length-1;i<n;++i){u=r.slice(i,i+2);c={feature:e,segment:u};this.rBush_.insert(ol.extent.boundingExtent(u),c)}}}};ol.interaction.Snap.prototype.writePointGeometry_=function(e,o){var t=o.getCoordinates();var r={feature:e,segment:[t,t]};this.rBush_.insert(o.getExtent(),r)};ol.interaction.Snap.prototype.writePolygonGeometry_=function(e,o){var t=o.getCoordinates();var r,i,n,a,l,s,g;for(a=0,l=t.length;a<l;++a){r=t[a];for(i=0,n=r.length-1;i<n;++i){s=r.slice(i,i+2);g={feature:e,segment:s};this.rBush_.insert(ol.extent.boundingExtent(s),g)}}};ol.interaction.Snap.ResultType;ol.interaction.Snap.SegmentDataType;ol.interaction.Snap.handleEvent_=function(e){var o=this.snapTo(e.pixel,e.coordinate,e.map);if(o.snapped){e.coordinate=o.vertex.slice(0,2);e.pixel=o.vertexPixel}return ol.interaction.Pointer.handleEvent.call(this,e)};ol.interaction.Snap.handleUpEvent_=function(e){var o=ol.object.getValues(this.pendingFeatures_);if(o.length){o.forEach(this.updateFeature_,this);this.pendingFeatures_={}}return false};ol.interaction.Snap.sortByDistance=function(e,o){return ol.coordinate.squaredDistanceToSegment(this.pixelCoordinate_,e.segment)-ol.coordinate.squaredDistanceToSegment(this.pixelCoordinate_,o.segment)};goog.provide("ol.interaction.Translate");goog.provide("ol.interaction.TranslateEvent");goog.require("ol.events");goog.require("ol.events.Event");goog.require("ol.array");goog.require("ol.interaction.Pointer");ol.interaction.TranslateEventType={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"};ol.interaction.TranslateEvent=function(e,o,t){goog.base(this,e);this.features=o;this.coordinate=t};goog.inherits(ol.interaction.TranslateEvent,ol.events.Event);ol.interaction.Translate=function(e){goog.base(this,{handleDownEvent:ol.interaction.Translate.handleDownEvent_,handleDragEvent:ol.interaction.Translate.handleDragEvent_,handleMoveEvent:ol.interaction.Translate.handleMoveEvent_,handleUpEvent:ol.interaction.Translate.handleUpEvent_});this.previousCursor_=undefined;this.lastCoordinate_=null;this.features_=e.features!==undefined?e.features:null;this.lastFeature_=null};goog.inherits(ol.interaction.Translate,ol.interaction.Pointer);ol.interaction.Translate.handleDownEvent_=function(e){this.lastFeature_=this.featuresAtPixel_(e.pixel,e.map);if(!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=e.coordinate;ol.interaction.Translate.handleMoveEvent_.call(this,e);this.dispatchEvent(new ol.interaction.TranslateEvent(ol.interaction.TranslateEventType.TRANSLATESTART,this.features_,e.coordinate));return true}return false};ol.interaction.Translate.handleUpEvent_=function(e){if(this.lastCoordinate_){this.lastCoordinate_=null;ol.interaction.Translate.handleMoveEvent_.call(this,e);this.dispatchEvent(new ol.interaction.TranslateEvent(ol.interaction.TranslateEventType.TRANSLATEEND,this.features_,e.coordinate));return true}return false};ol.interaction.Translate.handleDragEvent_=function(e){if(this.lastCoordinate_){var o=e.coordinate;var t=o[0]-this.lastCoordinate_[0];var r=o[1]-this.lastCoordinate_[1];if(this.features_){this.features_.forEach(function(e){var o=e.getGeometry();o.translate(t,r);e.setGeometry(o)})}else if(this.lastFeature_){var i=this.lastFeature_.getGeometry();i.translate(t,r);this.lastFeature_.setGeometry(i)}this.lastCoordinate_=o;this.dispatchEvent(new ol.interaction.TranslateEvent(ol.interaction.TranslateEventType.TRANSLATING,this.features_,o))}};ol.interaction.Translate.handleMoveEvent_=function(e){var o=e.map.getTargetElement();var t=e.map.forEachFeatureAtPixel(e.pixel,function(e){return e});if(t){var r=false;if(this.features_&&ol.array.includes(this.features_.getArray(),t)){r=true}this.previousCursor_=o.style.cursor;o.style.cursor=this.lastCoordinate_?"-webkit-grabbing":r?"-webkit-grab":"pointer";o.style.cursor=!this.lastCoordinate_?"grabbing":r?"grab":"pointer"}else{o.style.cursor=this.previousCursor_!==undefined?this.previousCursor_:"";this.previousCursor_=undefined}};ol.interaction.Translate.prototype.featuresAtPixel_=function(e,o){var t=null;var r=o.forEachFeatureAtPixel(e,function(e){return e});if(this.features_&&ol.array.includes(this.features_.getArray(),r)){t=r}return t};goog.provide("ol.layer.Heatmap");goog.require("goog.asserts");goog.require("ol.events");goog.require("ol");goog.require("ol.Object");goog.require("ol.dom");goog.require("ol.layer.Vector");goog.require("ol.math");goog.require("ol.object");goog.require("ol.render.EventType");goog.require("ol.style.Icon");goog.require("ol.style.Style");ol.layer.HeatmapLayerProperty={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"};ol.layer.Heatmap=function(e){var o=e?e:{};var t=ol.object.assign({},o);delete t.gradient;delete t.radius;delete t.blur;delete t.shadow;delete t.weight;goog.base(this,t);this.gradient_=null;this.shadow_=o.shadow!==undefined?o.shadow:250;this.circleImage_=undefined;this.styleCache_=null;ol.events.listen(this,ol.Object.getChangeEventType(ol.layer.HeatmapLayerProperty.GRADIENT),this.handleGradientChanged_,this);this.setGradient(o.gradient?o.gradient:ol.layer.Heatmap.DEFAULT_GRADIENT);this.setBlur(o.blur!==undefined?o.blur:15);this.setRadius(o.radius!==undefined?o.radius:8);ol.events.listen(this,ol.Object.getChangeEventType(ol.layer.HeatmapLayerProperty.BLUR),this.handleStyleChanged_,this);ol.events.listen(this,ol.Object.getChangeEventType(ol.layer.HeatmapLayerProperty.RADIUS),this.handleStyleChanged_,this);this.handleStyleChanged_();var r=o.weight?o.weight:"weight";var i;if(typeof r==="string"){i=function(e){return e.get(r)}}else{i=r}goog.asserts.assert(goog.isFunction(i),"weightFunction should be a function");this.setStyle(function(e,o){goog.asserts.assert(this.styleCache_,"this.styleCache_ expected");goog.asserts.assert(this.circleImage_!==undefined,"this.circleImage_ should be defined");var t=i(e);var r=t!==undefined?ol.math.clamp(t,0,1):1;var n=255*r|0;var a=this.styleCache_[n];if(!a){a=[new ol.style.Style({image:new ol.style.Icon({opacity:r,src:this.circleImage_})})];this.styleCache_[n]=a}return a}.bind(this));this.setRenderOrder(null);ol.events.listen(this,ol.render.EventType.RENDER,this.handleRender_,this)};goog.inherits(ol.layer.Heatmap,ol.layer.Vector);ol.layer.Heatmap.DEFAULT_GRADIENT=["#00f","#0ff","#0f0","#ff0","#f00"];ol.layer.Heatmap.createGradient_=function(e){var o=1;var t=256;var r=ol.dom.createCanvasContext2D(o,t);var i=r.createLinearGradient(0,0,o,t);var n=1/(e.length-1);for(var a=0,l=e.length;a<l;++a){i.addColorStop(a*n,e[a])}r.fillStyle=i;r.fillRect(0,0,o,t);return r.getImageData(0,0,o,t).data};ol.layer.Heatmap.prototype.createCircle_=function(){var e=this.getRadius();var o=this.getBlur();goog.asserts.assert(e!==undefined&&o!==undefined,"radius and blur should be defined");var t=e+o+1;var r=2*t;var i=ol.dom.createCanvasContext2D(r,r);i.shadowOffsetX=i.shadowOffsetY=this.shadow_;i.shadowBlur=o;i.shadowColor="#000";i.beginPath();var n=t-this.shadow_;i.arc(n,n,e,0,Math.PI*2,true);i.fill();return i.canvas.toDataURL()};ol.layer.Heatmap.prototype.getBlur=function(){return this.get(ol.layer.HeatmapLayerProperty.BLUR)};ol.layer.Heatmap.prototype.getGradient=function(){return this.get(ol.layer.HeatmapLayerProperty.GRADIENT)};ol.layer.Heatmap.prototype.getRadius=function(){return this.get(ol.layer.HeatmapLayerProperty.RADIUS)};ol.layer.Heatmap.prototype.handleGradientChanged_=function(){this.gradient_=ol.layer.Heatmap.createGradient_(this.getGradient())};ol.layer.Heatmap.prototype.handleStyleChanged_=function(){this.circleImage_=this.createCircle_();this.styleCache_=new Array(256);this.changed()};ol.layer.Heatmap.prototype.handleRender_=function(e){goog.asserts.assert(e.type==ol.render.EventType.RENDER,"event.type should be RENDER");goog.asserts.assert(this.gradient_,"this.gradient_ expected");var o=e.context;var t=o.canvas;var r=o.getImageData(0,0,t.width,t.height);var i=r.data;var n,a,l;for(n=0,a=i.length;n<a;n+=4){l=i[n+3]*4;if(l){i[n]=this.gradient_[l];i[n+1]=this.gradient_[l+1];i[n+2]=this.gradient_[l+2]}}o.putImageData(r,0,0)};ol.layer.Heatmap.prototype.setBlur=function(e){this.set(ol.layer.HeatmapLayerProperty.BLUR,e)};ol.layer.Heatmap.prototype.setGradient=function(e){this.set(ol.layer.HeatmapLayerProperty.GRADIENT,e)};ol.layer.Heatmap.prototype.setRadius=function(e){this.set(ol.layer.HeatmapLayerProperty.RADIUS,e)};goog.provide("ol.net");ol.net.jsonp=function(e,o,t,r){var i=goog.global.document.createElement("script");var n="olc_"+goog.getUid(o);function a(){delete goog.global[n];i.parentNode.removeChild(i)}i.async=true;i.src=e+(e.indexOf("?")==-1?"?":"&")+(r||"callback")+"="+n;var l=goog.global.setTimeout(function(){a();if(t){t()}},1e4);goog.global[n]=function(e){goog.global.clearTimeout(l);a();o(e)};goog.global.document.getElementsByTagName("head")[0].appendChild(i)};goog.provide("ol.raster.Operation");goog.provide("ol.raster.OperationType");ol.raster.OperationType={PIXEL:"pixel",IMAGE:"image"};ol.raster.Operation;goog.provide("ol.raster.Pixel");ol.raster.Pixel;goog.provide("ol.render");goog.require("goog.vec.Mat4");goog.require("ol.render.canvas.Immediate");goog.require("ol.vec.Mat4");ol.render.toContext=function(e,o){var t=e.canvas;var r=o?o:{};var i=r.pixelRatio||ol.has.DEVICE_PIXEL_RATIO;var n=r.size;if(n){t.width=n[0]*i;t.height=n[1]*i;t.style.width=n[0]+"px";t.style.height=n[1]+"px"}var a=[0,0,t.width,t.height];var l=ol.vec.Mat4.makeTransform2D(goog.vec.Mat4.createNumber(),0,0,i,i,0,0,0);return new ol.render.canvas.Immediate(e,i,a,l,0)};goog.provide("ol.reproj.Tile");goog.provide("ol.reproj.TileFunctionType");goog.require("goog.asserts");goog.require("ol.Tile");goog.require("ol.TileState");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol.extent");goog.require("ol.math");goog.require("ol.object");goog.require("ol.proj");goog.require("ol.reproj");goog.require("ol.reproj.Triangulation");ol.reproj.TileFunctionType;ol.reproj.Tile=function(e,o,t,r,i,n,a,l,s,g,p){goog.base(this,i,ol.TileState.IDLE);this.renderEdges_=p!==undefined?p:false;this.pixelRatio_=a;this.gutter_=l;this.canvas_=null;this.canvasByContext_={};this.sourceTileGrid_=o;this.targetTileGrid_=r;this.wrappedTileCoord_=n?n:i;this.sourceTiles_=[];this.sourcesListenerKeys_=null;this.sourceZ_=0;var u=r.getTileCoordExtent(this.wrappedTileCoord_);var c=this.targetTileGrid_.getExtent();var d=this.sourceTileGrid_.getExtent();var y=c?ol.extent.getIntersection(u,c):u;if(ol.extent.getArea(y)===0){this.state=ol.TileState.EMPTY;return}var h=e.getExtent();if(h){if(!d){d=h}else{d=ol.extent.getIntersection(d,h)}}var m=r.getResolution(this.wrappedTileCoord_[0]);var f=ol.extent.getCenter(y);var v=ol.reproj.calculateSourceResolution(e,t,f,m);if(!isFinite(v)||v<=0){this.state=ol.TileState.EMPTY;return}var _=g!==undefined?g:ol.DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD;this.triangulation_=new ol.reproj.Triangulation(e,t,y,d,v*_);if(this.triangulation_.getTriangles().length===0){this.state=ol.TileState.EMPTY;return}this.sourceZ_=o.getZForResolution(v);var E=this.triangulation_.calculateSourceExtent();if(d){if(e.canWrapX()){E[1]=ol.math.clamp(E[1],d[1],d[3]);E[3]=ol.math.clamp(E[3],d[1],d[3])}else{E=ol.extent.getIntersection(E,d)}}if(!ol.extent.getArea(E)){this.state=ol.TileState.EMPTY}else{var S=o.getTileRangeForExtentAndZ(E,this.sourceZ_);var T=S.getWidth()*S.getHeight();if(!goog.asserts.assert(T<ol.RASTER_REPROJECTION_MAX_SOURCE_TILES,"reasonable number of tiles is required")){this.state=ol.TileState.ERROR;return}for(var P=S.minX;P<=S.maxX;P++){for(var x=S.minY;x<=S.maxY;x++){var b=s(this.sourceZ_,P,x,a);if(b){this.sourceTiles_.push(b)}}}if(this.sourceTiles_.length===0){this.state=ol.TileState.EMPTY}}};goog.inherits(ol.reproj.Tile,ol.Tile);ol.reproj.Tile.prototype.disposeInternal=function(){if(this.state==ol.TileState.LOADING){this.unlistenSources_()}goog.base(this,"disposeInternal")};ol.reproj.Tile.prototype.getImage=function(e){if(e!==undefined){var o;var t=goog.getUid(e);if(t in this.canvasByContext_){return this.canvasByContext_[t]}else if(ol.object.isEmpty(this.canvasByContext_)){o=this.canvas_}else{o=this.canvas_.cloneNode(false)}this.canvasByContext_[t]=o;return o}else{return this.canvas_}};ol.reproj.Tile.prototype.reproject_=function(){var e=[];this.sourceTiles_.forEach(function(o,t,r){if(o&&o.getState()==ol.TileState.LOADED){e.push({extent:this.sourceTileGrid_.getTileCoordExtent(o.tileCoord),image:o.getImage()})}},this);this.sourceTiles_.length=0;if(e.length===0){this.state=ol.TileState.ERROR}else{var o=this.wrappedTileCoord_[0];var t=this.targetTileGrid_.getTileSize(o);var r=goog.isNumber(t)?t:t[0];var i=goog.isNumber(t)?t:t[1];var n=this.targetTileGrid_.getResolution(o);var a=this.sourceTileGrid_.getResolution(this.sourceZ_);var l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=ol.reproj.render(r,i,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),n,l,this.triangulation_,e,this.gutter_,this.renderEdges_);this.state=ol.TileState.LOADED}this.changed()};ol.reproj.Tile.prototype.load=function(){if(this.state==ol.TileState.IDLE){this.state=ol.TileState.LOADING;this.changed();var e=0;goog.asserts.assert(!this.sourcesListenerKeys_,"this.sourcesListenerKeys_ should be null");this.sourcesListenerKeys_=[];this.sourceTiles_.forEach(function(o,t,r){var i=o.getState();if(i==ol.TileState.IDLE||i==ol.TileState.LOADING){e++;var n;n=ol.events.listen(o,ol.events.EventType.CHANGE,function(t){var r=o.getState();if(r==ol.TileState.LOADED||r==ol.TileState.ERROR||r==ol.TileState.EMPTY){ol.events.unlistenByKey(n);e--;goog.asserts.assert(e>=0,"leftToLoad should not be negative");if(e===0){this.unlistenSources_();this.reproject_()}}},this);this.sourcesListenerKeys_.push(n)}},this);this.sourceTiles_.forEach(function(e,o,t){var r=e.getState();if(r==ol.TileState.IDLE){e.load()}});if(e===0){goog.global.setTimeout(this.reproject_.bind(this),0)}}};ol.reproj.Tile.prototype.unlistenSources_=function(){goog.asserts.assert(this.sourcesListenerKeys_,"this.sourcesListenerKeys_ should not be null");this.sourcesListenerKeys_.forEach(ol.events.unlistenByKey);this.sourcesListenerKeys_=null};goog.provide("ol.source.TileImage");goog.require("goog.asserts");goog.require("ol.ImageTile");goog.require("ol.TileCache");goog.require("ol.TileState");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol.proj");goog.require("ol.reproj.Tile");goog.require("ol.source.UrlTile");ol.source.TileImage=function(e){goog.base(this,{attributions:e.attributions,extent:e.extent,logo:e.logo,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:ol.source.TileImage.defaultTileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX});this.crossOrigin=e.crossOrigin!==undefined?e.crossOrigin:null;this.tileClass=e.tileClass!==undefined?e.tileClass:ol.ImageTile;this.tileCacheForProjection={};this.tileGridForProjection={};this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold;this.renderReprojectionEdges_=false};goog.inherits(ol.source.TileImage,ol.source.UrlTile);ol.source.TileImage.prototype.canExpireCache=function(){if(!ol.ENABLE_RASTER_REPROJECTION){return goog.base(this,"canExpireCache")}if(this.tileCache.canExpireCache()){return true}else{for(var e in this.tileCacheForProjection){if(this.tileCacheForProjection[e].canExpireCache()){return true}}}return false};ol.source.TileImage.prototype.expireCache=function(e,o){if(!ol.ENABLE_RASTER_REPROJECTION){goog.base(this,"expireCache",e,o);return}var t=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==t?o:{});for(var r in this.tileCacheForProjection){var i=this.tileCacheForProjection[r];i.expireCache(i==t?o:{})}};ol.source.TileImage.prototype.getGutter=function(e){if(ol.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&e&&!ol.proj.equivalent(this.getProjection(),e)){return 0}else{return this.getGutterInternal()}};ol.source.TileImage.prototype.getGutterInternal=function(){return 0};ol.source.TileImage.prototype.getOpaque=function(e){if(ol.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&e&&!ol.proj.equivalent(this.getProjection(),e)){return false}else{return goog.base(this,"getOpaque",e)}};ol.source.TileImage.prototype.getTileGridForProjection=function(e){if(!ol.ENABLE_RASTER_REPROJECTION){return goog.base(this,"getTileGridForProjection",e)}var o=this.getProjection();if(this.tileGrid&&(!o||ol.proj.equivalent(o,e))){return this.tileGrid}else{var t=goog.getUid(e).toString();if(!(t in this.tileGridForProjection)){this.tileGridForProjection[t]=ol.tilegrid.getForProjection(e)}return this.tileGridForProjection[t]}};ol.source.TileImage.prototype.getTileCacheForProjection=function(e){if(!ol.ENABLE_RASTER_REPROJECTION){return goog.base(this,"getTileCacheForProjection",e)}var o=this.getProjection();if(!o||ol.proj.equivalent(o,e)){return this.tileCache}else{var t=goog.getUid(e).toString();if(!(t in this.tileCacheForProjection)){this.tileCacheForProjection[t]=new ol.TileCache}return this.tileCacheForProjection[t]}};ol.source.TileImage.prototype.createTile_=function(e,o,t,r,i,n){var a=[e,o,t];var l=this.getTileCoordForTileUrlFunction(a,i);var s=l?this.tileUrlFunction(l,r,i):undefined;var g=new this.tileClass(a,s!==undefined?ol.TileState.IDLE:ol.TileState.EMPTY,s!==undefined?s:"",this.crossOrigin,this.tileLoadFunction);g.key=n;ol.events.listen(g,ol.events.EventType.CHANGE,this.handleTileChange,this);return g};ol.source.TileImage.prototype.getTile=function(e,o,t,r,i){if(!ol.ENABLE_RASTER_REPROJECTION||!this.getProjection()||!i||ol.proj.equivalent(this.getProjection(),i)){return this.getTileInternal(e,o,t,r,i)}else{var n=this.getTileCacheForProjection(i);var a=[e,o,t];var l=this.getKeyZXY.apply(this,a);if(n.containsKey(l)){return n.get(l)}else{var s=this.getProjection();var g=this.getTileGridForProjection(s);var p=this.getTileGridForProjection(i);var u=this.getTileCoordForTileUrlFunction(a,i);var c=new ol.reproj.Tile(s,g,i,p,a,u,this.getTilePixelRatio(r),this.getGutterInternal(),function(e,o,t,r){return this.getTileInternal(e,o,t,r,s)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);n.set(l,c);return c}}};ol.source.TileImage.prototype.getTileInternal=function(e,o,t,r,i){var n=null;var a=this.getKeyZXY(e,o,t);var l=this.getKeyParams();if(!this.tileCache.containsKey(a)){goog.asserts.assert(i,"argument projection is truthy");n=this.createTile_(e,o,t,r,i,l);this.tileCache.set(a,n)}else{n=this.tileCache.get(a);if(n.key!=l){var s=n;if(n.interimTile&&n.interimTile.key==l){goog.asserts.assert(n.interimTile.getState()==ol.TileState.LOADED);goog.asserts.assert(n.interimTile.interimTile===null);n=n.interimTile;if(s.getState()==ol.TileState.LOADED){n.interimTile=s}}else{n=this.createTile_(e,o,t,r,i,l);if(s.getState()==ol.TileState.LOADED){n.interimTile=s}else if(s.interimTile&&s.interimTile.getState()==ol.TileState.LOADED){n.interimTile=s.interimTile;s.interimTile=null}}if(n.interimTile){n.interimTile.interimTile=null}this.tileCache.replace(a,n)}}goog.asserts.assert(n);return n};ol.source.TileImage.prototype.setRenderReprojectionEdges=function(e){if(!ol.ENABLE_RASTER_REPROJECTION||this.renderReprojectionEdges_==e){return}this.renderReprojectionEdges_=e;for(var o in this.tileCacheForProjection){this.tileCacheForProjection[o].clear()}this.changed()};ol.source.TileImage.prototype.setTileGridForProjection=function(e,o){if(ol.ENABLE_RASTER_REPROJECTION){var t=ol.proj.get(e);if(t){var r=goog.getUid(t).toString();if(!(r in this.tileGridForProjection)){this.tileGridForProjection[r]=o}}}};ol.source.TileImage.defaultTileLoadFunction=function(e,o){e.getImage().src=o};goog.provide("ol.source.BingMaps");goog.require("goog.asserts");goog.require("ol.Attribution");goog.require("ol.TileRange");goog.require("ol.TileUrlFunction");goog.require("ol.extent");goog.require("ol.net");goog.require("ol.proj");goog.require("ol.source.State");goog.require("ol.source.TileImage");goog.require("ol.tilecoord");ol.source.BingMaps=function(e){goog.base(this,{crossOrigin:"anonymous",opaque:true,projection:ol.proj.get("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:ol.source.State.LOADING,tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==undefined?e.wrapX:true});this.culture_=e.culture!==undefined?e.culture:"en-us";this.maxZoom_=e.maxZoom!==undefined?e.maxZoom:-1;var o="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+e.imagerySet+"?uriScheme=https&include=ImageryProviders&key="+e.key;ol.net.jsonp(o,this.handleImageryMetadataResponse.bind(this),undefined,"jsonp")};goog.inherits(ol.source.BingMaps,ol.source.TileImage);ol.source.BingMaps.TOS_ATTRIBUTION=new ol.Attribution({html:'<a class="ol-attribution-bing-tos" '+'href="http://www.microsoft.com/maps/product/terms.html">'+"Terms of Use</a>"});ol.source.BingMaps.prototype.handleImageryMetadataResponse=function(e){if(e.statusCode!=200||e.statusDescription!="OK"||e.authenticationResultCode!="ValidCredentials"||e.resourceSets.length!=1||e.resourceSets[0].resources.length!=1){this.setState(ol.source.State.ERROR);return}var o=e.brandLogoUri;if(o.indexOf("https")==-1){o=o.replace("http","https")}var t=e.resourceSets[0].resources[0];goog.asserts.assert(t.imageWidth==t.imageHeight,"resource has imageWidth equal to imageHeight, i.e. is square");var r=this.maxZoom_==-1?t.zoomMax:this.maxZoom_;var i=this.getProjection();var n=ol.tilegrid.extentFromProjection(i);var a=t.imageWidth==t.imageHeight?t.imageWidth:[t.imageWidth,t.imageHeight];var l=ol.tilegrid.createXYZ({extent:n,minZoom:t.zoomMin,maxZoom:r,tileSize:a});this.tileGrid=l;var s=this.culture_;this.tileUrlFunction=ol.TileUrlFunction.createFromTileUrlFunctions(t.imageUrlSubdomains.map(function(e){var o=[0,0,0];var r=t.imageUrl.replace("{subdomain}",e).replace("{culture}",s);return function(e,t,n){goog.asserts.assert(ol.proj.equivalent(n,i),"projections are equivalent");if(!e){return undefined}else{ol.tilecoord.createOrUpdate(e[0],e[1],-e[2]-1,o);return r.replace("{quadkey}",ol.tilecoord.quadKey(o))}}}));if(t.imageryProviders){var g=ol.proj.getTransformFromProjections(ol.proj.get("EPSG:4326"),this.getProjection());var p=t.imageryProviders.map(function(e){var o=e.attribution;var t={};e.coverageAreas.forEach(function(e){var o=e.zoomMin;var i=Math.min(e.zoomMax,r);var n=e.bbox;var a=[n[1],n[0],n[3],n[2]];var s=ol.extent.applyTransform(a,g);var p,u,c;for(u=o;u<=i;++u){c=u.toString();p=l.getTileRangeForExtentAndZ(s,u);if(c in t){t[c].push(p)}else{t[c]=[p]}}});return new ol.Attribution({html:o,tileRanges:t})});p.push(ol.source.BingMaps.TOS_ATTRIBUTION);this.setAttributions(p)}this.setLogo(o);this.setState(ol.source.State.READY)};goog.provide("ol.source.Cluster");goog.require("goog.asserts");goog.require("ol.Feature");goog.require("ol.coordinate");goog.require("ol.events.EventType");goog.require("ol.extent");goog.require("ol.geom.Point");goog.require("ol.source.Vector");ol.source.Cluster=function(e){goog.base(this,{attributions:e.attributions,extent:e.extent,logo:e.logo,projection:e.projection,wrapX:e.wrapX});this.resolution_=undefined;this.distance_=e.distance!==undefined?e.distance:20;this.features_=[];this.geometryFunction_=e.geometryFunction||function(e){var o=e.getGeometry();goog.asserts.assert(o instanceof ol.geom.Point,"feature geometry is a ol.geom.Point instance");return o};this.source_=e.source;this.source_.on(ol.events.EventType.CHANGE,ol.source.Cluster.prototype.onSourceChange_,this)};goog.inherits(ol.source.Cluster,ol.source.Vector);ol.source.Cluster.prototype.getSource=function(){return this.source_};ol.source.Cluster.prototype.loadFeatures=function(e,o,t){this.source_.loadFeatures(e,o,t);if(o!==this.resolution_){this.clear();this.resolution_=o;this.cluster_();this.addFeatures(this.features_)}};ol.source.Cluster.prototype.onSourceChange_=function(){this.clear();this.cluster_();this.addFeatures(this.features_);this.changed()};ol.source.Cluster.prototype.cluster_=function(){if(this.resolution_===undefined){return}this.features_.length=0;var e=ol.extent.createEmpty();var o=this.distance_*this.resolution_;var t=this.source_.getFeatures();var r={};for(var i=0,n=t.length;i<n;i++){var a=t[i];if(!(goog.getUid(a).toString()in r)){var l=this.geometryFunction_(a);if(l){var s=l.getCoordinates();ol.extent.createOrUpdateFromCoordinate(s,e);ol.extent.buffer(e,o,e);var g=this.source_.getFeaturesInExtent(e);goog.asserts.assert(g.length>=1,"at least one neighbor found");g=g.filter(function(e){var o=goog.getUid(e).toString();if(!(o in r)){r[o]=true;return true}else{return false}});this.features_.push(this.createCluster_(g))}}}goog.asserts.assert(Object.keys(r).length==this.source_.getFeatures().length,"number of clustered equals number of features in the source")};ol.source.Cluster.prototype.createCluster_=function(e){var o=[0,0];for(var t=e.length-1;t>=0;--t){var r=this.geometryFunction_(e[t]);if(r){ol.coordinate.add(o,r.getCoordinates())}else{e.splice(t,1)}}ol.coordinate.scale(o,1/e.length);var i=new ol.Feature(new ol.geom.Point(o));i.set("features",e);return i};goog.provide("ol.source.ImageMapGuide");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("goog.uri.utils");goog.require("ol.Image");goog.require("ol.ImageLoadFunctionType");goog.require("ol.extent");goog.require("ol.object");goog.require("ol.source.Image");ol.source.ImageMapGuide=function(e){goog.base(this,{projection:e.projection,resolutions:e.resolutions});this.crossOrigin_=e.crossOrigin!==undefined?e.crossOrigin:null;this.displayDpi_=e.displayDpi!==undefined?e.displayDpi:96;this.params_=e.params||{};this.url_=e.url;this.imageLoadFunction_=e.imageLoadFunction!==undefined?e.imageLoadFunction:ol.source.Image.defaultImageLoadFunction;this.hidpi_=e.hidpi!==undefined?e.hidpi:true;this.metersPerUnit_=e.metersPerUnit!==undefined?e.metersPerUnit:1;this.ratio_=e.ratio!==undefined?e.ratio:1;this.useOverlay_=e.useOverlay!==undefined?e.useOverlay:false;this.image_=null;this.renderedRevision_=0};goog.inherits(ol.source.ImageMapGuide,ol.source.Image);ol.source.ImageMapGuide.prototype.getParams=function(){return this.params_};ol.source.ImageMapGuide.prototype.getImageInternal=function(e,o,t,r){o=this.findNearestResolution(o);t=this.hidpi_?t:1;var i=this.image_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==o&&i.getPixelRatio()==t&&ol.extent.containsExtent(i.getExtent(),e)){return i}if(this.ratio_!=1){e=e.slice();ol.extent.scaleFromCenter(e,this.ratio_)}var n=ol.extent.getWidth(e)/o;var a=ol.extent.getHeight(e)/o;var l=[n*t,a*t];if(this.url_!==undefined){var s=this.getUrl(this.url_,this.params_,e,l,r);i=new ol.Image(e,o,t,this.getAttributions(),s,this.crossOrigin_,this.imageLoadFunction_);ol.events.listen(i,ol.events.EventType.CHANGE,this.handleImageChange,this)}else{i=null}this.image_=i;this.renderedRevision_=this.getRevision();return i};ol.source.ImageMapGuide.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_};ol.source.ImageMapGuide.getScale=function(e,o,t,r){var i=ol.extent.getWidth(e);var n=ol.extent.getHeight(e);var a=o[0];var l=o[1];var s=.0254/r;if(l*i>a*n){return i*t/(a*s)}else{return n*t/(l*s)}};ol.source.ImageMapGuide.prototype.updateParams=function(e){ol.object.assign(this.params_,e);this.changed()};ol.source.ImageMapGuide.prototype.getUrl=function(e,o,t,r,i){var n=ol.source.ImageMapGuide.getScale(t,r,this.metersPerUnit_,this.displayDpi_);var a=ol.extent.getCenter(t);var l={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol.source.ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:n,SETVIEWCENTERX:a[0],SETVIEWCENTERY:a[1]};ol.object.assign(l,o);return goog.uri.utils.appendParamsFromMap(e,l)};ol.source.ImageMapGuide.prototype.setImageLoadFunction=function(e){this.image_=null;this.imageLoadFunction_=e;this.changed()};goog.provide("ol.source.ImageStatic");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol.Image");goog.require("ol.ImageLoadFunctionType");goog.require("ol.ImageState");goog.require("ol.extent");goog.require("ol.proj");goog.require("ol.source.Image");ol.source.ImageStatic=function(e){var o=e.attributions!==undefined?e.attributions:null;var t=e.imageExtent;var r=e.crossOrigin!==undefined?e.crossOrigin:null;var i=e.imageLoadFunction!==undefined?e.imageLoadFunction:ol.source.Image.defaultImageLoadFunction;goog.base(this,{attributions:o,logo:e.logo,projection:ol.proj.get(e.projection)});this.image_=new ol.Image(t,undefined,1,o,e.url,r,i);this.imageSize_=e.imageSize?e.imageSize:null;ol.events.listen(this.image_,ol.events.EventType.CHANGE,this.handleImageChange,this)};goog.inherits(ol.source.ImageStatic,ol.source.Image);ol.source.ImageStatic.prototype.getImageInternal=function(e,o,t,r){if(ol.extent.intersects(e,this.image_.getExtent())){return this.image_}return null}
;ol.source.ImageStatic.prototype.handleImageChange=function(e){if(this.image_.getState()==ol.ImageState.LOADED){var o=this.image_.getExtent();var t=this.image_.getImage();var r,i;if(this.imageSize_){r=this.imageSize_[0];i=this.imageSize_[1]}else{r=t.width;i=t.height}var n=ol.extent.getHeight(o)/i;var a=Math.ceil(ol.extent.getWidth(o)/n);if(a!=r){var l=document.createElement("canvas");l.width=a;l.height=i;var s=l.getContext("2d");s.drawImage(t,0,0,r,i,0,0,l.width,l.height);this.image_.setImage(l)}}goog.base(this,"handleImageChange",e)};goog.provide("ol.source.wms");goog.provide("ol.source.wms.ServerType");ol.source.wms.ServerType={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"};goog.provide("ol.source.ImageWMS");goog.require("goog.asserts");goog.require("goog.string");goog.require("goog.uri.utils");goog.require("ol");goog.require("ol.Image");goog.require("ol.ImageLoadFunctionType");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol.extent");goog.require("ol.object");goog.require("ol.proj");goog.require("ol.source.Image");goog.require("ol.source.wms");goog.require("ol.source.wms.ServerType");ol.source.ImageWMS=function(e){var o=e||{};goog.base(this,{attributions:o.attributions,logo:o.logo,projection:o.projection,resolutions:o.resolutions});this.crossOrigin_=o.crossOrigin!==undefined?o.crossOrigin:null;this.url_=o.url;this.imageLoadFunction_=o.imageLoadFunction!==undefined?o.imageLoadFunction:ol.source.Image.defaultImageLoadFunction;this.params_=o.params||{};this.v13_=true;this.updateV13_();this.serverType_=o.serverType;this.hidpi_=o.hidpi!==undefined?o.hidpi:true;this.image_=null;this.imageSize_=[0,0];this.renderedRevision_=0;this.ratio_=o.ratio!==undefined?o.ratio:1.5};goog.inherits(ol.source.ImageWMS,ol.source.Image);ol.source.ImageWMS.GETFEATUREINFO_IMAGE_SIZE_=[101,101];ol.source.ImageWMS.prototype.getGetFeatureInfoUrl=function(e,o,t,r){goog.asserts.assert(!("VERSION"in r),"key VERSION is not allowed in params");if(this.url_===undefined){return undefined}var i=ol.extent.getForViewAndSize(e,o,0,ol.source.ImageWMS.GETFEATUREINFO_IMAGE_SIZE_);var n={SERVICE:"WMS",VERSION:ol.DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:true,QUERY_LAYERS:this.params_["LAYERS"]};ol.object.assign(n,this.params_,r);var a=Math.floor((e[0]-i[0])/o);var l=Math.floor((i[3]-e[1])/o);n[this.v13_?"I":"X"]=a;n[this.v13_?"J":"Y"]=l;return this.getRequestUrl_(i,ol.source.ImageWMS.GETFEATUREINFO_IMAGE_SIZE_,1,ol.proj.get(t),n)};ol.source.ImageWMS.prototype.getParams=function(){return this.params_};ol.source.ImageWMS.prototype.getImageInternal=function(e,o,t,r){if(this.url_===undefined){return null}o=this.findNearestResolution(o);if(t!=1&&(!this.hidpi_||this.serverType_===undefined)){t=1}e=e.slice();var i=(e[0]+e[2])/2;var n=(e[1]+e[3])/2;var a=o/t;var l=ol.extent.getWidth(e)/a;var s=ol.extent.getHeight(e)/a;var g=this.image_;if(g&&this.renderedRevision_==this.getRevision()&&g.getResolution()==o&&g.getPixelRatio()==t&&ol.extent.containsExtent(g.getExtent(),e)){return g}if(this.ratio_!=1){var p=this.ratio_*ol.extent.getWidth(e)/2;var u=this.ratio_*ol.extent.getHeight(e)/2;e[0]=i-p;e[1]=n-u;e[2]=i+p;e[3]=n+u}var c={SERVICE:"WMS",VERSION:ol.DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:true};ol.object.assign(c,this.params_);this.imageSize_[0]=Math.ceil(l*this.ratio_);this.imageSize_[1]=Math.ceil(s*this.ratio_);var d=this.getRequestUrl_(e,this.imageSize_,t,r,c);this.image_=new ol.Image(e,o,t,this.getAttributions(),d,this.crossOrigin_,this.imageLoadFunction_);this.renderedRevision_=this.getRevision();ol.events.listen(this.image_,ol.events.EventType.CHANGE,this.handleImageChange,this);return this.image_};ol.source.ImageWMS.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_};ol.source.ImageWMS.prototype.getRequestUrl_=function(e,o,t,r,i){goog.asserts.assert(this.url_!==undefined,"url is defined");i[this.v13_?"CRS":"SRS"]=r.getCode();if(!("STYLES"in this.params_)){i["STYLES"]=new String("")}if(t!=1){switch(this.serverType_){case ol.source.wms.ServerType.GEOSERVER:var n=90*t+.5|0;if("FORMAT_OPTIONS"in i){i["FORMAT_OPTIONS"]+=";dpi:"+n}else{i["FORMAT_OPTIONS"]="dpi:"+n}break;case ol.source.wms.ServerType.MAPSERVER:i["MAP_RESOLUTION"]=90*t;break;case ol.source.wms.ServerType.CARMENTA_SERVER:case ol.source.wms.ServerType.QGIS:i["DPI"]=90*t;break;default:goog.asserts.fail("unknown serverType configured");break}}i["WIDTH"]=o[0];i["HEIGHT"]=o[1];var a=r.getAxisOrientation();var l;if(this.v13_&&a.substr(0,2)=="ne"){l=[e[1],e[0],e[3],e[2]]}else{l=e}i["BBOX"]=l.join(",");return goog.uri.utils.appendParamsFromMap(this.url_,i)};ol.source.ImageWMS.prototype.getUrl=function(){return this.url_};ol.source.ImageWMS.prototype.setImageLoadFunction=function(e){this.image_=null;this.imageLoadFunction_=e;this.changed()};ol.source.ImageWMS.prototype.setUrl=function(e){if(e!=this.url_){this.url_=e;this.image_=null;this.changed()}};ol.source.ImageWMS.prototype.updateParams=function(e){ol.object.assign(this.params_,e);this.updateV13_();this.image_=null;this.changed()};ol.source.ImageWMS.prototype.updateV13_=function(){var e=this.params_["VERSION"]||ol.DEFAULT_WMS_VERSION;this.v13_=goog.string.compareVersions(e,"1.3")>=0};goog.provide("ol.source.XYZ");goog.require("ol.source.TileImage");ol.source.XYZ=function(e){var o=e.projection!==undefined?e.projection:"EPSG:3857";var t=e.tileGrid!==undefined?e.tileGrid:ol.tilegrid.createXYZ({extent:ol.tilegrid.extentFromProjection(o),maxZoom:e.maxZoom,tileSize:e.tileSize});goog.base(this,{attributions:e.attributions,crossOrigin:e.crossOrigin,logo:e.logo,opaque:e.opaque,projection:o,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:t,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==undefined?e.wrapX:true})};goog.inherits(ol.source.XYZ,ol.source.TileImage);goog.provide("ol.source.OSM");goog.require("ol.Attribution");goog.require("ol.source.XYZ");ol.source.OSM=function(e){var o=e||{};var t;if(o.attributions!==undefined){t=o.attributions}else{t=[ol.source.OSM.ATTRIBUTION]}var r=o.crossOrigin!==undefined?o.crossOrigin:"anonymous";var i=o.url!==undefined?o.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";goog.base(this,{attributions:t,crossOrigin:r,opaque:o.opaque!==undefined?o.opaque:true,maxZoom:o.maxZoom!==undefined?o.maxZoom:19,reprojectionErrorThreshold:o.reprojectionErrorThreshold,tileLoadFunction:o.tileLoadFunction,url:i,wrapX:o.wrapX})};goog.inherits(ol.source.OSM,ol.source.XYZ);ol.source.OSM.ATTRIBUTION=new ol.Attribution({html:"&copy; "+'<a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> '+"contributors."});goog.provide("ol.source.MapQuest");goog.require("goog.asserts");goog.require("ol.Attribution");goog.require("ol.source.OSM");goog.require("ol.source.XYZ");ol.source.MapQuest=function(e){var o=e||{};goog.asserts.assert(o.layer in ol.source.MapQuestConfig,"known layer configured");var t=ol.source.MapQuestConfig[o.layer];this.layer_=o.layer;var r=o.url!==undefined?o.url:"https://otile{1-4}-s.mqcdn.com/tiles/1.0.0/"+this.layer_+"/{z}/{x}/{y}.jpg";goog.base(this,{attributions:t.attributions,crossOrigin:"anonymous",logo:"https://developer.mapquest.com/content/osm/mq_logo.png",maxZoom:t.maxZoom,reprojectionErrorThreshold:o.reprojectionErrorThreshold,opaque:t.opaque,tileLoadFunction:o.tileLoadFunction,url:r})};goog.inherits(ol.source.MapQuest,ol.source.XYZ);ol.source.MapQuest.TILE_ATTRIBUTION=new ol.Attribution({html:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a>'});ol.source.MapQuestConfig={osm:{maxZoom:19,opaque:true,attributions:[ol.source.MapQuest.TILE_ATTRIBUTION,ol.source.OSM.ATTRIBUTION]},sat:{maxZoom:18,opaque:true,attributions:[ol.source.MapQuest.TILE_ATTRIBUTION,new ol.Attribution({html:"Portions Courtesy NASA/JPL-Caltech and "+"U.S. Depart. of Agriculture, Farm Service Agency"})]},hyb:{maxZoom:18,opaque:false,attributions:[ol.source.MapQuest.TILE_ATTRIBUTION,ol.source.OSM.ATTRIBUTION]}};ol.source.MapQuest.prototype.getLayer=function(){return this.layer_};goog.provide("ol.ext.pixelworks");ol.ext.pixelworks;(function(){var e={};var o={exports:e};var t;(function(r){if(typeof e==="object"&&typeof o!=="undefined"){o.exports=r()}else if(typeof t==="function"&&t.amd){t([],r)}else{var i;if(typeof window!=="undefined"){i=window}else if(typeof global!=="undefined"){i=global}else if(typeof self!=="undefined"){i=self}else{i=this}i.pixelworks=r()}})(function(){var e,o,t;return function e(o,t,r){function i(a,l){if(!t[a]){if(!o[a]){var s=typeof require=="function"&&require;if(!l&&s)return s(a,!0);if(n)return n(a,!0);var g=new Error("Cannot find module '"+a+"'");throw g.code="MODULE_NOT_FOUND",g}var p=t[a]={exports:{}};o[a][0].call(p.exports,function(e){var t=o[a][1][e];return i(t?t:e)},p,p.exports,e,o,t,r)}return t[a].exports}var n=typeof require=="function"&&require;for(var a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,o,t){var r=e("./processor");t.Processor=r},{"./processor":2}],2:[function(e,o,t){function r(e){return function(o){var t=o["buffers"];var r=o["meta"];var i=o["imageOps"];var n=o["width"];var a=o["height"];var l=t.length;var s=t[0].byteLength;var g,p;if(i){var u=new Array(l);for(p=0;p<l;++p){u[p]=new ImageData(new Uint8ClampedArray(t[p]),n,a)}g=e(u,r).data}else{g=new Uint8ClampedArray(s);var c=new Array(l);var d=new Array(l);for(p=0;p<l;++p){c[p]=new Uint8ClampedArray(t[p]);d[p]=[0,0,0,0]}for(var y=0;y<s;y+=4){for(var h=0;h<l;++h){var m=c[h];d[h][0]=m[y];d[h][1]=m[y+1];d[h][2]=m[y+2];d[h][3]=m[y+3]}var f=e(d,r);g[y]=f[0];g[y+1]=f[1];g[y+2]=f[2];g[y+3]=f[3]}}return g.buffer}}function i(e,o){var t=Object.keys(e.lib||{}).map(function(o){return"var "+o+" = "+e.lib[o].toString()+";"});var i=t.concat(["var __minion__ = ("+r.toString()+")(",e.operation.toString(),");",'self.addEventListener("message", function(__event__) {',"var buffer = __minion__(__event__.data);","self.postMessage({buffer: buffer, meta: __event__.data.meta}, [buffer]);","});"]);var n=new Blob(i,{type:"text/javascript"});var a=URL.createObjectURL(n);var l=new Worker(a);l.addEventListener("message",o);return l}function n(e,o){var t=r(e.operation);return{postMessage:function(e){setTimeout(function(){o({data:{buffer:t(e),meta:e.meta}})},0)}}}function a(e){this._imageOps=!!e.imageOps;var o;if(e.threads===0){o=0}else if(this._imageOps){o=1}else{o=e.threads||1}var t=[];if(o){for(var r=0;r<o;++r){t[r]=i(e,this._onWorkerMessage.bind(this,r))}}else{t[0]=n(e,this._onWorkerMessage.bind(this,0))}this._workers=t;this._queue=[];this._maxQueueLength=e.queue||Infinity;this._running=0;this._dataLookup={};this._job=null}a.prototype.process=function(e,o,t){this._enqueue({inputs:e,meta:o,callback:t});this._dispatch()};a.prototype.destroy=function(){for(var e in this){this[e]=null}this._destroyed=true};a.prototype._enqueue=function(e){this._queue.push(e);while(this._queue.length>this._maxQueueLength){this._queue.shift().callback(null,null)}};a.prototype._dispatch=function(){if(this._running===0&&this._queue.length>0){var e=this._job=this._queue.shift();var o=e.inputs[0].width;var t=e.inputs[0].height;var r=e.inputs.map(function(e){return e.data.buffer});var i=this._workers.length;this._running=i;if(i===1){this._workers[0].postMessage({buffers:r,meta:e.meta,imageOps:this._imageOps,width:o,height:t},r)}else{var n=e.inputs[0].data.length;var a=4*Math.ceil(n/4/i);for(var l=0;l<i;++l){var s=l*a;var g=[];for(var p=0,u=r.length;p<u;++p){g.push(r[l].slice(s,s+a))}this._workers[l].postMessage({buffers:g,meta:e.meta,imageOps:this._imageOps,width:o,height:t},g)}}}};a.prototype._onWorkerMessage=function(e,o){if(this._destroyed){return}this._dataLookup[e]=o.data;--this._running;if(this._running===0){this._resolveJob()}};a.prototype._resolveJob=function(){var e=this._job;var o=this._workers.length;var t,r;if(o===1){t=new Uint8ClampedArray(this._dataLookup[0]["buffer"]);r=this._dataLookup[0]["meta"]}else{var i=e.inputs[0].data.length;t=new Uint8ClampedArray(i);r=new Array(i);var n=4*Math.ceil(i/4/o);for(var a=0;a<o;++a){var l=this._dataLookup[a]["buffer"];var s=a*n;t.set(new Uint8ClampedArray(l),s);r[a]=this._dataLookup[a]["meta"]}}this._job=null;this._dataLookup={};e.callback(null,new ImageData(t,e.inputs[0].width,e.inputs[0].height),r);this._dispatch()};o.exports=a},{}]},{},[1])(1)});ol.ext.pixelworks=o.exports})();goog.provide("ol.source.Raster");goog.provide("ol.source.RasterEvent");goog.provide("ol.source.RasterEventType");goog.require("goog.asserts");goog.require("goog.vec.Mat4");goog.require("ol.ImageCanvas");goog.require("ol.TileQueue");goog.require("ol.dom");goog.require("ol.events");goog.require("ol.events.Event");goog.require("ol.events.EventType");goog.require("ol.ext.pixelworks");goog.require("ol.extent");goog.require("ol.layer.Image");goog.require("ol.layer.Tile");goog.require("ol.object");goog.require("ol.raster.OperationType");goog.require("ol.renderer.canvas.ImageLayer");goog.require("ol.renderer.canvas.TileLayer");goog.require("ol.source.Image");goog.require("ol.source.State");goog.require("ol.source.Tile");ol.source.Raster=function(e){this.worker_=null;this.operationType_=e.operationType!==undefined?e.operationType:ol.raster.OperationType.PIXEL;this.threads_=e.threads!==undefined?e.threads:1;this.renderers_=ol.source.Raster.createRenderers_(e.sources);for(var o=0,t=this.renderers_.length;o<t;++o){ol.events.listen(this.renderers_[o],ol.events.EventType.CHANGE,this.changed,this)}this.canvasContext_=ol.dom.createCanvasContext2D();this.tileQueue_=new ol.TileQueue(function(){return 1},this.changed.bind(this));var r=ol.source.Raster.getLayerStatesArray_(this.renderers_);var i={};for(var n=0,a=r.length;n<a;++n){i[goog.getUid(r[n].layer)]=r[n]}this.renderedState_=null;this.renderedImageCanvas_=null;this.frameState_={animate:false,attributions:{},coordinateToPixelMatrix:goog.vec.Mat4.createNumber(),extent:null,focus:null,index:0,layerStates:i,layerStatesArray:r,logos:{},pixelRatio:1,pixelToCoordinateMatrix:goog.vec.Mat4.createNumber(),postRenderFunctions:[],size:[0,0],skippedFeatureUids:{},tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{}};goog.base(this,{});if(e.operation!==undefined){this.setOperation(e.operation,e.lib)}};goog.inherits(ol.source.Raster,ol.source.Image);ol.source.Raster.prototype.setOperation=function(e,o){this.worker_=new ol.ext.pixelworks.Processor({operation:e,imageOps:this.operationType_===ol.raster.OperationType.IMAGE,queue:1,lib:o,threads:this.threads_});this.changed()};ol.source.Raster.prototype.updateFrameState_=function(e,o,t){var r=ol.object.assign({},this.frameState_);r.viewState=ol.object.assign({},r.viewState);var i=ol.extent.getCenter(e);var n=Math.round(ol.extent.getWidth(e)/o);var a=Math.round(ol.extent.getHeight(e)/o);r.extent=e;r.focus=ol.extent.getCenter(e);r.size[0]=n;r.size[1]=a;var l=r.viewState;l.center=i;l.projection=t;l.resolution=o;return r};ol.source.Raster.prototype.isDirty_=function(e,o){var t=this.renderedState_;return!t||this.getRevision()!==t.revision||o!==t.resolution||!ol.extent.equals(e,t.extent)};ol.source.Raster.prototype.getImage=function(e,o,t,r){if(!this.allSourcesReady_()){return null}if(!this.isDirty_(e,o)){return this.renderedImageCanvas_}var i=this.canvasContext_;var n=i.canvas;var a=Math.round(ol.extent.getWidth(e)/o);var l=Math.round(ol.extent.getHeight(e)/o);if(a!==n.width||l!==n.height){n.width=a;n.height=l}var s=this.updateFrameState_(e,o,r);var g=new ol.ImageCanvas(e,o,1,this.getAttributions(),n,this.composeFrame_.bind(this,s));this.renderedImageCanvas_=g;this.renderedState_={extent:e,resolution:o,revision:this.getRevision()};return g};ol.source.Raster.prototype.allSourcesReady_=function(){var e=true;var o;for(var t=0,r=this.renderers_.length;t<r;++t){o=this.renderers_[t].getLayer().getSource();if(o.getState()!==ol.source.State.READY){e=false;break}}return e};ol.source.Raster.prototype.composeFrame_=function(e,o){var t=this.renderers_.length;var r=new Array(t);for(var i=0;i<t;++i){var n=ol.source.Raster.getImageData_(this.renderers_[i],e,e.layerStatesArray[i]);if(n){r[i]=n}else{return}}var a={};this.dispatchEvent(new ol.source.RasterEvent(ol.source.RasterEventType.BEFOREOPERATIONS,e,a));this.worker_.process(r,a,this.onWorkerComplete_.bind(this,e,o));e.tileQueue.loadMoreTiles(16,16)};ol.source.Raster.prototype.onWorkerComplete_=function(e,o,t,r,i){if(t){o(t);return}if(!r){return}this.dispatchEvent(new ol.source.RasterEvent(ol.source.RasterEventType.AFTEROPERATIONS,e,i));var n=e.viewState.resolution/e.pixelRatio;if(!this.isDirty_(e.extent,n)){this.canvasContext_.putImageData(r,0,0)}o(null)};ol.source.Raster.getImageData_=function(e,o,t){if(!e.prepareFrame(o,t)){return null}var r=o.size[0];var i=o.size[1];if(!ol.source.Raster.context_){ol.source.Raster.context_=ol.dom.createCanvasContext2D(r,i)}else{var n=ol.source.Raster.context_.canvas;if(n.width!==r||n.height!==i){ol.source.Raster.context_=ol.dom.createCanvasContext2D(r,i)}else{ol.source.Raster.context_.clearRect(0,0,r,i)}}e.composeFrame(o,t,ol.source.Raster.context_);return ol.source.Raster.context_.getImageData(0,0,r,i)};ol.source.Raster.context_=null;ol.source.Raster.getLayerStatesArray_=function(e){return e.map(function(e){return e.getLayer().getLayerState()})};ol.source.Raster.createRenderers_=function(e){var o=e.length;var t=new Array(o);for(var r=0;r<o;++r){t[r]=ol.source.Raster.createRenderer_(e[r])}return t};ol.source.Raster.createRenderer_=function(e){var o=null;if(e instanceof ol.source.Tile){o=ol.source.Raster.createTileRenderer_(e)}else if(e instanceof ol.source.Image){o=ol.source.Raster.createImageRenderer_(e)}else{goog.asserts.fail("Unsupported source type: "+e)}return o};ol.source.Raster.createImageRenderer_=function(e){var o=new ol.layer.Image({source:e});return new ol.renderer.canvas.ImageLayer(o)};ol.source.Raster.createTileRenderer_=function(e){var o=new ol.layer.Tile({source:e});return new ol.renderer.canvas.TileLayer(o)};ol.source.Raster.RenderedState;ol.source.RasterEvent=function(e,o,t){goog.base(this,e);this.extent=o.extent;this.resolution=o.viewState.resolution/o.pixelRatio;this.data=t};goog.inherits(ol.source.RasterEvent,ol.events.Event);ol.source.RasterEventType={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};goog.provide("ol.source.Stamen");goog.require("goog.asserts");goog.require("ol.Attribution");goog.require("ol.source.OSM");goog.require("ol.source.XYZ");ol.source.StamenLayerConfig={terrain:{extension:"jpg",opaque:true},"terrain-background":{extension:"jpg",opaque:true},"terrain-labels":{extension:"png",opaque:false},"terrain-lines":{extension:"png",opaque:false},"toner-background":{extension:"png",opaque:true},toner:{extension:"png",opaque:true},"toner-hybrid":{extension:"png",opaque:false},"toner-labels":{extension:"png",opaque:false},"toner-lines":{extension:"png",opaque:false},"toner-lite":{extension:"png",opaque:true},watercolor:{extension:"jpg",opaque:true}};ol.source.StamenProviderConfig={terrain:{minZoom:4,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:3,maxZoom:16}};ol.source.Stamen=function(e){var o=e.layer.indexOf("-");var t=o==-1?e.layer:e.layer.slice(0,o);goog.asserts.assert(t in ol.source.StamenProviderConfig,"known provider configured");var r=ol.source.StamenProviderConfig[t];goog.asserts.assert(e.layer in ol.source.StamenLayerConfig,"known layer configured");var i=ol.source.StamenLayerConfig[e.layer];var n=e.url!==undefined?e.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+e.layer+"/{z}/{x}/{y}."+i.extension;goog.base(this,{attributions:ol.source.Stamen.ATTRIBUTIONS,crossOrigin:"anonymous",maxZoom:r.maxZoom,opaque:i.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,url:n})};goog.inherits(ol.source.Stamen,ol.source.XYZ);ol.source.Stamen.ATTRIBUTIONS=[new ol.Attribution({html:'Map tiles by <a href="http://stamen.com/">Stamen Design</a>, '+'under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY'+" 3.0</a>."}),ol.source.OSM.ATTRIBUTION];goog.provide("ol.source.TileArcGISRest");goog.require("goog.asserts");goog.require("goog.math");goog.require("goog.uri.utils");goog.require("ol");goog.require("ol.TileCoord");goog.require("ol.extent");goog.require("ol.object");goog.require("ol.proj");goog.require("ol.size");goog.require("ol.source.TileImage");goog.require("ol.tilecoord");ol.source.TileArcGISRest=function(e){var o=e||{};goog.base(this,{attributions:o.attributions,crossOrigin:o.crossOrigin,logo:o.logo,projection:o.projection,reprojectionErrorThreshold:o.reprojectionErrorThreshold,tileGrid:o.tileGrid,tileLoadFunction:o.tileLoadFunction,url:o.url,urls:o.urls,wrapX:o.wrapX!==undefined?o.wrapX:true});this.params_=o.params||{};this.tmpExtent_=ol.extent.createEmpty()};goog.inherits(ol.source.TileArcGISRest,ol.source.TileImage);ol.source.TileArcGISRest.prototype.getParams=function(){return this.params_};ol.source.TileArcGISRest.prototype.getRequestUrl_=function(e,o,t,r,i,n){var a=this.urls;if(!a){return undefined}var l=i.getCode().split(":").pop();n["SIZE"]=o[0]+","+o[1];n["BBOX"]=t.join(",");n["BBOXSR"]=l;n["IMAGESR"]=l;n["DPI"]=Math.round(n["DPI"]?n["DPI"]*r:90*r);var s;if(a.length==1){s=a[0]}else{var g=goog.math.modulo(ol.tilecoord.hash(e),a.length);s=a[g]}var p=s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");if(p==s){goog.asserts.fail("Unknown Rest Service",s)}return goog.uri.utils.appendParamsFromMap(p,n)};ol.source.TileArcGISRest.prototype.getTilePixelRatio=function(e){return e};ol.source.TileArcGISRest.prototype.fixedTileUrlFunction=function(e,o,t){var r=this.getTileGrid();if(!r){r=this.getTileGridForProjection(t)}if(r.getResolutions().length<=e[0]){return undefined}var i=r.getTileCoordExtent(e,this.tmpExtent_);var n=ol.size.toSize(r.getTileSize(e[0]),this.tmpSize);if(o!=1){n=ol.size.scale(n,o,this.tmpSize)}var a={F:"image",FORMAT:"PNG32",TRANSPARENT:true};ol.object.assign(a,this.params_);return this.getRequestUrl_(e,n,i,o,t,a)};ol.source.TileArcGISRest.prototype.updateParams=function(e){ol.object.assign(this.params_,e);this.changed()};goog.provide("ol.source.TileDebug");goog.require("ol.Tile");goog.require("ol.TileCoord");goog.require("ol.TileState");goog.require("ol.dom");goog.require("ol.size");goog.require("ol.source.Tile");ol.DebugTile_=function(e,o,t){goog.base(this,e,ol.TileState.LOADED);this.tileSize_=o;this.text_=t;this.canvasByContext_={}};goog.inherits(ol.DebugTile_,ol.Tile);ol.DebugTile_.prototype.getImage=function(e){var o=e!==undefined?goog.getUid(e):-1;if(o in this.canvasByContext_){return this.canvasByContext_[o]}else{var t=this.tileSize_;var r=ol.dom.createCanvasContext2D(t[0],t[1]);r.strokeStyle="black";r.strokeRect(.5,.5,t[0]+.5,t[1]+.5);r.fillStyle="black";r.textAlign="center";r.textBaseline="middle";r.font="24px sans-serif";r.fillText(this.text_,t[0]/2,t[1]/2);this.canvasByContext_[o]=r.canvas;return r.canvas}};ol.source.TileDebug=function(e){goog.base(this,{opaque:false,projection:e.projection,tileGrid:e.tileGrid,wrapX:e.wrapX!==undefined?e.wrapX:true})};goog.inherits(ol.source.TileDebug,ol.source.Tile);ol.source.TileDebug.prototype.getTile=function(e,o,t){var r=this.getKeyZXY(e,o,t);if(this.tileCache.containsKey(r)){return this.tileCache.get(r)}else{var i=ol.size.toSize(this.tileGrid.getTileSize(e));var n=[e,o,t];var a=this.getTileCoordForTileUrlFunction(n);var l=!a?"":this.getTileCoordForTileUrlFunction(a).toString();var s=new ol.DebugTile_(n,i,l);this.tileCache.set(r,s);return s}};goog.provide("ol.source.TileJSON");goog.provide("ol.tilejson");goog.require("goog.asserts");goog.require("ol.Attribution");goog.require("ol.TileRange");goog.require("ol.TileUrlFunction");goog.require("ol.extent");goog.require("ol.net");goog.require("ol.proj");goog.require("ol.source.State");goog.require("ol.source.TileImage");ol.source.TileJSON=function(e){goog.base(this,{attributions:e.attributions,crossOrigin:e.crossOrigin,projection:ol.proj.get("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:ol.source.State.LOADING,tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==undefined?e.wrapX:true});if(e.jsonp){ol.net.jsonp(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this))}else{var o=new XMLHttpRequest;o.open("GET",e.url,true);o.onload=function(e){if(o.status>=200&&o.status<300){var t=JSON.parse(o.responseText);this.handleTileJSONResponse(t)}else{this.handleTileJSONError()}}.bind(this);o.send()}};goog.inherits(ol.source.TileJSON,ol.source.TileImage);ol.source.TileJSON.prototype.handleTileJSONResponse=function(e){var o=ol.proj.get("EPSG:4326");var t=this.getProjection();var r;if(e.bounds!==undefined){var i=ol.proj.getTransformFromProjections(o,t);r=ol.extent.applyTransform(e.bounds,i)}if(e.scheme!==undefined){goog.asserts.assert(e.scheme=="xyz",'tileJSON-scheme is "xyz"')}var n=e.minzoom||0;var a=e.maxzoom||22;var l=ol.tilegrid.createXYZ({extent:ol.tilegrid.extentFromProjection(t),maxZoom:a,minZoom:n});this.tileGrid=l;this.tileUrlFunction=ol.TileUrlFunction.createFromTemplates(e.tiles,l);if(e.attribution!==undefined&&!this.getAttributions()){var s=r!==undefined?r:o.getExtent();var g={};var p,u;for(p=n;p<=a;++p){u=p.toString();g[u]=[l.getTileRangeForExtentAndZ(s,p)]}this.setAttributions([new ol.Attribution({html:e.attribution,tileRanges:g})])}this.setState(ol.source.State.READY)};ol.source.TileJSON.prototype.handleTileJSONError=function(){this.setState(ol.source.State.ERROR)};goog.provide("ol.source.TileUTFGrid");goog.require("goog.asserts");goog.require("goog.async.nextTick");goog.require("ol.Attribution");goog.require("ol.Tile");goog.require("ol.TileState");goog.require("ol.TileUrlFunction");goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol.extent");goog.require("ol.net");goog.require("ol.proj");goog.require("ol.source.State");goog.require("ol.source.Tile");ol.source.TileUTFGrid=function(e){goog.base(this,{projection:ol.proj.get("EPSG:3857"),state:ol.source.State.LOADING});this.preemptive_=e.preemptive!==undefined?e.preemptive:true;this.tileUrlFunction_=ol.TileUrlFunction.nullTileUrlFunction;this.template_=undefined;ol.net.jsonp(e.url,this.handleTileJSONResponse.bind(this))};goog.inherits(ol.source.TileUTFGrid,ol.source.Tile);ol.source.TileUTFGrid.prototype.getTemplate=function(){return this.template_};ol.source.TileUTFGrid.prototype.forDataAtCoordinateAndResolution=function(e,o,t,r,i){if(this.tileGrid){var n=this.tileGrid.getTileCoordForCoordAndResolution(e,o);var a=this.getTile(n[0],n[1],n[2],1,this.getProjection());a.forDataAtCoordinate(e,t,r,i)}else{if(i===true){goog.async.nextTick(function(){t.call(r,null)})}else{t.call(r,null)}}};ol.source.TileUTFGrid.prototype.handleTileJSONResponse=function(e){var o=ol.proj.get("EPSG:4326");var t=this.getProjection();var r;if(e.bounds!==undefined){var i=ol.proj.getTransformFromProjections(o,t);r=ol.extent.applyTransform(e.bounds,i)}if(e.scheme!==undefined){goog.asserts.assert(e.scheme=="xyz",'tileJSON-scheme is "xyz"')}var n=e.minzoom||0;var a=e.maxzoom||22;var l=ol.tilegrid.createXYZ({extent:ol.tilegrid.extentFromProjection(t),maxZoom:a,minZoom:n});this.tileGrid=l;this.template_=e.template;var s=e.grids;if(!s){this.setState(ol.source.State.ERROR);return}this.tileUrlFunction_=ol.TileUrlFunction.createFromTemplates(s,l);if(e.attribution!==undefined){var g=r!==undefined?r:o.getExtent();var p={};var u,c;for(u=n;u<=a;++u){c=u.toString();p[c]=[l.getTileRangeForExtentAndZ(g,u)]}this.setAttributions([new ol.Attribution({html:e.attribution,tileRanges:p})])}this.setState(ol.source.State.READY)};ol.source.TileUTFGrid.prototype.getTile=function(e,o,t,r,i){var n=this.getKeyZXY(e,o,t);if(this.tileCache.containsKey(n)){return this.tileCache.get(n)}else{goog.asserts.assert(i,"argument projection is truthy");var a=[e,o,t];var l=this.getTileCoordForTileUrlFunction(a,i);var s=this.tileUrlFunction_(l,r,i);var g=new ol.source.TileUTFGridTile_(a,s!==undefined?ol.TileState.IDLE:ol.TileState.EMPTY,s!==undefined?s:"",this.tileGrid.getTileCoordExtent(a),this.preemptive_);this.tileCache.set(n,g);return g}};ol.source.TileUTFGrid.prototype.useTile=function(e,o,t){var r=this.getKeyZXY(e,o,t);if(this.tileCache.containsKey(r)){this.tileCache.get(r)}};ol.source.TileUTFGridTile_=function(e,o,t,r,i){goog.base(this,e,o);this.src_=t;this.extent_=r;this.preemptive_=i;this.grid_=null;this.keys_=null;this.data_=null};goog.inherits(ol.source.TileUTFGridTile_,ol.Tile);ol.source.TileUTFGridTile_.prototype.getImage=function(e){return null};ol.source.TileUTFGridTile_.prototype.getData=function(e){if(!this.grid_||!this.keys_||!this.data_){return null}var o=(e[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]);var t=(e[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]);var r=this.grid_[Math.floor((1-t)*this.grid_.length)];if(typeof r!=="string"){return null}var i=r.charCodeAt(Math.floor(o*r.length));if(i>=93){i--}if(i>=35){i--}i-=32;return i in this.keys_?this.data_[this.keys_[i]]:null};ol.source.TileUTFGridTile_.prototype.forDataAtCoordinate=function(e,o,t,r){if(this.state==ol.TileState.IDLE&&r===true){ol.events.listenOnce(this,ol.events.EventType.CHANGE,function(r){o.call(t,this.getData(e))},this);this.loadInternal_()}else{if(r===true){goog.async.nextTick(function(){o.call(t,this.getData(e))},this)}else{o.call(t,this.getData(e))}}};ol.source.TileUTFGridTile_.prototype.getKey=function(){return this.src_};ol.source.TileUTFGridTile_.prototype.handleError_=function(){this.state=ol.TileState.ERROR;this.changed()};ol.source.TileUTFGridTile_.prototype.handleLoad_=function(e){this.grid_=e.grid;this.keys_=e.keys;this.data_=e.data;this.state=ol.TileState.EMPTY;this.changed()};ol.source.TileUTFGridTile_.prototype.loadInternal_=function(){if(this.state==ol.TileState.IDLE){this.state=ol.TileState.LOADING;ol.net.jsonp(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this))}};ol.source.TileUTFGridTile_.prototype.load=function(){if(this.preemptive_){this.loadInternal_()}};goog.provide("ol.source.TileWMS");goog.require("goog.asserts");goog.require("goog.math");goog.require("goog.string");goog.require("goog.uri.utils");goog.require("ol");goog.require("ol.TileCoord");goog.require("ol.extent");goog.require("ol.object");goog.require("ol.proj");goog.require("ol.size");goog.require("ol.source.TileImage");goog.require("ol.source.wms");goog.require("ol.source.wms.ServerType");goog.require("ol.tilecoord");ol.source.TileWMS=function(e){var o=e||{};var t=o.params||{};var r="TRANSPARENT"in t?t["TRANSPARENT"]:true;goog.base(this,{attributions:o.attributions,crossOrigin:o.crossOrigin,logo:o.logo,opaque:!r,projection:o.projection,reprojectionErrorThreshold:o.reprojectionErrorThreshold,tileGrid:o.tileGrid,tileLoadFunction:o.tileLoadFunction,url:o.url,urls:o.urls,wrapX:o.wrapX!==undefined?o.wrapX:true});this.gutter_=o.gutter!==undefined?o.gutter:0;this.params_=t;this.paramsKey_="";this.resetParamsKey_();this.v13_=true;this.serverType_=o.serverType;this.hidpi_=o.hidpi!==undefined?o.hidpi:true;this.coordKeyPrefix_="";this.resetCoordKeyPrefix_();this.tmpExtent_=ol.extent.createEmpty();this.updateV13_()};goog.inherits(ol.source.TileWMS,ol.source.TileImage);ol.source.TileWMS.prototype.getGetFeatureInfoUrl=function(e,o,t,r){goog.asserts.assert(!("VERSION"in r),"key VERSION is not allowed in params");var i=ol.proj.get(t);var n=this.getTileGrid();if(!n){n=this.getTileGridForProjection(i)}var a=n.getTileCoordForCoordAndResolution(e,o);if(n.getResolutions().length<=a[0]){return undefined}var l=n.getResolution(a[0]);var s=n.getTileCoordExtent(a,this.tmpExtent_);var g=ol.size.toSize(n.getTileSize(a[0]),this.tmpSize);var p=this.gutter_;if(p!==0){g=ol.size.buffer(g,p,this.tmpSize);s=ol.extent.buffer(s,l*p,s)}var u={SERVICE:"WMS",VERSION:ol.DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:true,QUERY_LAYERS:this.params_["LAYERS"]}
;ol.object.assign(u,this.params_,r);var c=Math.floor((e[0]-s[0])/l);var d=Math.floor((s[3]-e[1])/l);u[this.v13_?"I":"X"]=c;u[this.v13_?"J":"Y"]=d;return this.getRequestUrl_(a,g,s,1,i,u)};ol.source.TileWMS.prototype.getGutterInternal=function(){return this.gutter_};ol.source.TileWMS.prototype.getKeyParams=function(){return this.paramsKey_};ol.source.TileWMS.prototype.getKeyZXY=function(e,o,t){return this.coordKeyPrefix_+goog.base(this,"getKeyZXY",e,o,t)};ol.source.TileWMS.prototype.getParams=function(){return this.params_};ol.source.TileWMS.prototype.getRequestUrl_=function(e,o,t,r,i,n){var a=this.urls;if(!a){return undefined}n["WIDTH"]=o[0];n["HEIGHT"]=o[1];n[this.v13_?"CRS":"SRS"]=i.getCode();if(!("STYLES"in this.params_)){n["STYLES"]=new String("")}if(r!=1){switch(this.serverType_){case ol.source.wms.ServerType.GEOSERVER:var l=90*r+.5|0;if("FORMAT_OPTIONS"in n){n["FORMAT_OPTIONS"]+=";dpi:"+l}else{n["FORMAT_OPTIONS"]="dpi:"+l}break;case ol.source.wms.ServerType.MAPSERVER:n["MAP_RESOLUTION"]=90*r;break;case ol.source.wms.ServerType.CARMENTA_SERVER:case ol.source.wms.ServerType.QGIS:n["DPI"]=90*r;break;default:goog.asserts.fail("unknown serverType configured");break}}var s=i.getAxisOrientation();var g=t;if(this.v13_&&s.substr(0,2)=="ne"){var p;p=t[0];g[0]=t[1];g[1]=p;p=t[2];g[2]=t[3];g[3]=p}n["BBOX"]=g.join(",");var u;if(a.length==1){u=a[0]}else{var c=goog.math.modulo(ol.tilecoord.hash(e),a.length);u=a[c]}return goog.uri.utils.appendParamsFromMap(u,n)};ol.source.TileWMS.prototype.getTilePixelRatio=function(e){return!this.hidpi_||this.serverType_===undefined?1:e};ol.source.TileWMS.prototype.resetCoordKeyPrefix_=function(){var e=0;var o=[];if(this.urls){var t,r;for(t=0,r=this.urls.length;t<r;++t){o[e++]=this.urls[t]}}this.coordKeyPrefix_=o.join("#")};ol.source.TileWMS.prototype.resetParamsKey_=function(){var e=0;var o=[];for(var t in this.params_){o[e++]=t+"-"+this.params_[t]}this.paramsKey_=o.join("/")};ol.source.TileWMS.prototype.fixedTileUrlFunction=function(e,o,t){var r=this.getTileGrid();if(!r){r=this.getTileGridForProjection(t)}if(r.getResolutions().length<=e[0]){return undefined}if(o!=1&&(!this.hidpi_||this.serverType_===undefined)){o=1}var i=r.getResolution(e[0]);var n=r.getTileCoordExtent(e,this.tmpExtent_);var a=ol.size.toSize(r.getTileSize(e[0]),this.tmpSize);var l=this.gutter_;if(l!==0){a=ol.size.buffer(a,l,this.tmpSize);n=ol.extent.buffer(n,i*l,n)}if(o!=1){a=ol.size.scale(a,o,this.tmpSize)}var s={SERVICE:"WMS",VERSION:ol.DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:true};ol.object.assign(s,this.params_);return this.getRequestUrl_(e,a,n,o,t,s)};ol.source.TileWMS.prototype.updateParams=function(e){ol.object.assign(this.params_,e);this.resetCoordKeyPrefix_();this.resetParamsKey_();this.updateV13_();this.changed()};ol.source.TileWMS.prototype.updateV13_=function(){var e=this.params_["VERSION"]||ol.DEFAULT_WMS_VERSION;this.v13_=goog.string.compareVersions(e,"1.3")>=0};goog.provide("ol.tilegrid.WMTS");goog.require("goog.asserts");goog.require("ol.proj");goog.require("ol.tilegrid.TileGrid");ol.tilegrid.WMTS=function(e){goog.asserts.assert(e.resolutions.length==e.matrixIds.length,"options resolutions and matrixIds must have equal length (%s == %s)",e.resolutions.length,e.matrixIds.length);this.matrixIds_=e.matrixIds;goog.base(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes})};goog.inherits(ol.tilegrid.WMTS,ol.tilegrid.TileGrid);ol.tilegrid.WMTS.prototype.getMatrixId=function(e){goog.asserts.assert(0<=e&&e<this.matrixIds_.length,"attempted to retrive matrixId for illegal z (%s)",e);return this.matrixIds_[e]};ol.tilegrid.WMTS.prototype.getMatrixIds=function(){return this.matrixIds_};ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet=function(e,o){var t=[];var r=[];var i=[];var n=[];var a=[];var l="SupportedCRS";var s="TileMatrix";var g="Identifier";var p="ScaleDenominator";var u="TopLeftCorner";var c="TileWidth";var d="TileHeight";var y;y=ol.proj.get(e[l].replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"));var h=y.getMetersPerUnit();var m=y.getAxisOrientation().substr(0,2)=="ne";e[s].sort(function(e,o){return o[p]-e[p]});e[s].forEach(function(e,o,l){r.push(e[g]);var s=e[p]*28e-5/h;var y=e[c];var f=e[d];if(m){i.push([e[u][1],e[u][0]])}else{i.push(e[u])}t.push(s);n.push(y==f?y:[y,f]);a.push([e["MatrixWidth"],-e["MatrixHeight"]])});return new ol.tilegrid.WMTS({extent:o,origins:i,resolutions:t,matrixIds:r,tileSizes:n,sizes:a})};goog.provide("ol.source.WMTS");goog.provide("ol.source.WMTSRequestEncoding");goog.require("goog.asserts");goog.require("goog.uri.utils");goog.require("ol.TileUrlFunction");goog.require("ol.TileUrlFunctionType");goog.require("ol.array");goog.require("ol.extent");goog.require("ol.object");goog.require("ol.proj");goog.require("ol.source.TileImage");goog.require("ol.tilegrid.WMTS");ol.source.WMTSRequestEncoding={KVP:"KVP",REST:"REST"};ol.source.WMTS=function(e){this.version_=e.version!==undefined?e.version:"1.0.0";this.format_=e.format!==undefined?e.format:"image/jpeg";this.dimensions_=e.dimensions!==undefined?e.dimensions:{};this.dimensionsKey_="";this.resetDimensionsKey_();this.layer_=e.layer;this.matrixSet_=e.matrixSet;this.style_=e.style;var o=e.urls;if(o===undefined&&e.url!==undefined){o=ol.TileUrlFunction.expandUrl(e.url)}this.requestEncoding_=e.requestEncoding!==undefined?e.requestEncoding:ol.source.WMTSRequestEncoding.KVP;var t=this.requestEncoding_;var r=e.tileGrid;var i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};if(t==ol.source.WMTSRequestEncoding.KVP){ol.object.assign(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_})}var n=this.dimensions_;function a(e){e=t==ol.source.WMTSRequestEncoding.KVP?goog.uri.utils.appendParamsFromMap(e,i):e.replace(/\{(\w+?)\}/g,function(e,o){return o.toLowerCase()in i?i[o.toLowerCase()]:e});return function(o,i,a){if(!o){return undefined}else{var l={TileMatrix:r.getMatrixId(o[0]),TileCol:o[1],TileRow:-o[2]-1};ol.object.assign(l,n);var s=e;if(t==ol.source.WMTSRequestEncoding.KVP){s=goog.uri.utils.appendParamsFromMap(s,l)}else{s=s.replace(/\{(\w+?)\}/g,function(e,o){return l[o]})}return s}}}var l=o&&o.length>0?ol.TileUrlFunction.createFromTileUrlFunctions(o.map(a)):ol.TileUrlFunction.nullTileUrlFunction;goog.base(this,{attributions:e.attributions,crossOrigin:e.crossOrigin,logo:e.logo,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:l,urls:o,wrapX:e.wrapX!==undefined?e.wrapX:false})};goog.inherits(ol.source.WMTS,ol.source.TileImage);ol.source.WMTS.prototype.getDimensions=function(){return this.dimensions_};ol.source.WMTS.prototype.getFormat=function(){return this.format_};ol.source.WMTS.prototype.getKeyParams=function(){return this.dimensionsKey_};ol.source.WMTS.prototype.getLayer=function(){return this.layer_};ol.source.WMTS.prototype.getMatrixSet=function(){return this.matrixSet_};ol.source.WMTS.prototype.getRequestEncoding=function(){return this.requestEncoding_};ol.source.WMTS.prototype.getStyle=function(){return this.style_};ol.source.WMTS.prototype.getVersion=function(){return this.version_};ol.source.WMTS.prototype.resetDimensionsKey_=function(){var e=0;var o=[];for(var t in this.dimensions_){o[e++]=t+"-"+this.dimensions_[t]}this.dimensionsKey_=o.join("/")};ol.source.WMTS.prototype.updateDimensions=function(e){ol.object.assign(this.dimensions_,e);this.resetDimensionsKey_();this.changed()};ol.source.WMTS.optionsFromCapabilities=function(e,o){goog.asserts.assert(o["layer"],'config "layer" must not be null');var t=e["Contents"]["Layer"];var r=ol.array.find(t,function(e,t,r){return e["Identifier"]==o["layer"]});goog.asserts.assert(r,"found a matching layer in Contents/Layer");goog.asserts.assert(r["TileMatrixSetLink"].length>0,"layer has TileMatrixSetLink");var i=e["Contents"]["TileMatrixSet"];var n,a;if(r["TileMatrixSetLink"].length>1){if("projection"in o){n=ol.array.findIndex(r["TileMatrixSetLink"],function(e,t,r){var n=ol.array.find(i,function(o){return o["Identifier"]==e["TileMatrixSet"]});return n["SupportedCRS"].replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3")==o["projection"]})}else{n=ol.array.findIndex(r["TileMatrixSetLink"],function(e,t,r){return e["TileMatrixSet"]==o["matrixSet"]})}}else{n=0}if(n<0){n=0}a=r["TileMatrixSetLink"][n]["TileMatrixSet"];goog.asserts.assert(a,"TileMatrixSet must not be null");var l=r["Format"][0];if("format"in o){l=o["format"]}n=ol.array.findIndex(r["Style"],function(e,t,r){if("style"in o){return e["Title"]==o["style"]}else{return e["isDefault"]}});if(n<0){n=0}var s=r["Style"][n]["Identifier"];var g={};if("Dimension"in r){r["Dimension"].forEach(function(e,o,t){var r=e["Identifier"];var i=e["Default"];if(i!==undefined){goog.asserts.assert(ol.array.includes(e["Value"],i),"default value contained in values")}else{i=e["Value"][0]}goog.asserts.assert(i!==undefined,"value could be found");g[r]=i})}var p=e["Contents"]["TileMatrixSet"];var u=ol.array.find(p,function(e,o,t){return e["Identifier"]==a});goog.asserts.assert(u,"found matrixSet in Contents/TileMatrixSet");var c;if("projection"in o){c=ol.proj.get(o["projection"])}else{c=ol.proj.get(u["SupportedCRS"].replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))}var d=r["WGS84BoundingBox"];var y,h;if(d!==undefined){var m=ol.proj.get("EPSG:4326").getExtent();h=d[0]==m[0]&&d[2]==m[2];y=ol.proj.transformExtent(d,"EPSG:4326",c);var f=c.getExtent();if(f){if(!ol.extent.containsExtent(f,y)){y=undefined}}}var v=ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet(u,y);var _=[];var E=o["requestEncoding"];E=E!==undefined?E:"";goog.asserts.assert(ol.array.includes(["REST","RESTful","KVP",""],E),'requestEncoding (%s) is one of "REST", "RESTful", "KVP" or ""',E);if(!e.hasOwnProperty("OperationsMetadata")||!e["OperationsMetadata"].hasOwnProperty("GetTile")||E.indexOf("REST")===0){E=ol.source.WMTSRequestEncoding.REST;r["ResourceURL"].forEach(function(e,o,t){if(e["resourceType"]=="tile"){l=e["format"];_.push(e["template"])}})}else{var S=e["OperationsMetadata"]["GetTile"]["DCP"]["HTTP"]["Get"];for(var T=0,P=S.length;T<P;++T){var x=ol.array.find(S[T]["Constraint"],function(e,o,t){return e["name"]=="GetEncoding"});var b=x["AllowedValues"]["Value"];if(b.length>0&&ol.array.includes(b,"KVP")){E=ol.source.WMTSRequestEncoding.KVP;_.push(S[T]["href"])}}}goog.asserts.assert(_.length>0,"At least one URL found");return{urls:_,layer:o["layer"],matrixSet:a,format:l,projection:c,requestEncoding:E,tileGrid:v,style:s,dimensions:g,wrapX:h}};goog.provide("ol.source.Zoomify");goog.require("goog.asserts");goog.require("ol");goog.require("ol.ImageTile");goog.require("ol.TileCoord");goog.require("ol.TileState");goog.require("ol.dom");goog.require("ol.extent");goog.require("ol.proj");goog.require("ol.source.TileImage");goog.require("ol.tilegrid.TileGrid");ol.source.ZoomifyTierSizeCalculation={DEFAULT:"default",TRUNCATED:"truncated"};ol.source.Zoomify=function(e){var o=e||{};var t=o.size;var r=o.tierSizeCalculation!==undefined?o.tierSizeCalculation:ol.source.ZoomifyTierSizeCalculation.DEFAULT;var i=t[0];var n=t[1];var a=[];var l=ol.DEFAULT_TILE_SIZE;switch(r){case ol.source.ZoomifyTierSizeCalculation.DEFAULT:while(i>l||n>l){a.push([Math.ceil(i/l),Math.ceil(n/l)]);l+=l}break;case ol.source.ZoomifyTierSizeCalculation.TRUNCATED:var s=i;var g=n;while(s>l||g>l){a.push([Math.ceil(s/l),Math.ceil(g/l)]);s>>=1;g>>=1}break;default:goog.asserts.fail();break}a.push([1,1]);a.reverse();var p=[1];var u=[0];var c,d;for(c=1,d=a.length;c<d;c++){p.push(1<<c);u.push(a[c-1][0]*a[c-1][1]+u[c-1])}p.reverse();var y=[0,-t[1],t[0],0];var h=new ol.tilegrid.TileGrid({extent:y,origin:ol.extent.getTopLeft(y),resolutions:p});var m=o.url;function f(e,o,t){if(!e){return undefined}else{var r=e[0];var i=e[1];var n=-e[2]-1;var l=i+n*a[r][0]+u[r];var s=l/ol.DEFAULT_TILE_SIZE|0;return m+"TileGroup"+s+"/"+r+"-"+i+"-"+n+".jpg"}}goog.base(this,{attributions:o.attributions,crossOrigin:o.crossOrigin,logo:o.logo,reprojectionErrorThreshold:o.reprojectionErrorThreshold,tileClass:ol.source.ZoomifyTile_,tileGrid:h,tileUrlFunction:f})};goog.inherits(ol.source.Zoomify,ol.source.TileImage);ol.source.ZoomifyTile_=function(e,o,t,r,i){goog.base(this,e,o,t,r,i);this.zoomifyImageByContext_={}};goog.inherits(ol.source.ZoomifyTile_,ol.ImageTile);ol.source.ZoomifyTile_.prototype.getImage=function(e){var o=ol.DEFAULT_TILE_SIZE;var t=e!==undefined?goog.getUid(e).toString():"";if(t in this.zoomifyImageByContext_){return this.zoomifyImageByContext_[t]}else{var r=goog.base(this,"getImage",e);if(this.state==ol.TileState.LOADED){if(r.width==o&&r.height==o){this.zoomifyImageByContext_[t]=r;return r}else{var i=ol.dom.createCanvasContext2D(o,o);i.drawImage(r,0,0);this.zoomifyImageByContext_[t]=i.canvas;return i.canvas}}else{return r}}};goog.provide("ol.style.Atlas");goog.provide("ol.style.AtlasManager");goog.require("goog.asserts");goog.require("goog.functions");goog.require("ol");ol.style.AtlasManagerInfo;ol.style.AtlasManager=function(e){var o=e||{};this.currentSize_=o.initialSize!==undefined?o.initialSize:ol.INITIAL_ATLAS_SIZE;this.maxSize_=o.maxSize!==undefined?o.maxSize:ol.MAX_ATLAS_SIZE!=-1?ol.MAX_ATLAS_SIZE:ol.WEBGL_MAX_TEXTURE_SIZE!==undefined?ol.WEBGL_MAX_TEXTURE_SIZE:2048;this.space_=o.space!==undefined?o.space:1;this.atlases_=[new ol.style.Atlas(this.currentSize_,this.space_)];this.currentHitSize_=this.currentSize_;this.hitAtlases_=[new ol.style.Atlas(this.currentHitSize_,this.space_)]};ol.style.AtlasManager.prototype.getInfo=function(e){var o=this.getInfo_(this.atlases_,e);if(!o){return null}var t=this.getInfo_(this.hitAtlases_,e);goog.asserts.assert(t,"hitInfo must not be null");return this.mergeInfos_(o,t)};ol.style.AtlasManager.prototype.getInfo_=function(e,o){var t,r,i,n;for(i=0,n=e.length;i<n;++i){t=e[i];r=t.get(o);if(r){return r}}return null};ol.style.AtlasManager.prototype.mergeInfos_=function(e,o){goog.asserts.assert(e.offsetX===o.offsetX,"in order to merge, offsetX of info and hitInfo must be equal");goog.asserts.assert(e.offsetY===o.offsetY,"in order to merge, offsetY of info and hitInfo must be equal");return{offsetX:e.offsetX,offsetY:e.offsetY,image:e.image,hitImage:o.image}};ol.style.AtlasManager.prototype.add=function(e,o,t,r,i,n){if(o+this.space_>this.maxSize_||t+this.space_>this.maxSize_){return null}var a=this.add_(false,e,o,t,r,n);if(!a){return null}var l=i!==undefined?i:goog.functions.NULL;var s=this.add_(true,e,o,t,l,n);goog.asserts.assert(s,"hitInfo must not be null");return this.mergeInfos_(a,s)};ol.style.AtlasManager.prototype.add_=function(e,o,t,r,i,n){var a=e?this.hitAtlases_:this.atlases_;var l,s,g,p;for(g=0,p=a.length;g<p;++g){l=a[g];s=l.add(o,t,r,i,n);if(s){return s}else if(!s&&g===p-1){var u;if(e){u=Math.min(this.currentHitSize_*2,this.maxSize_);this.currentHitSize_=u}else{u=Math.min(this.currentSize_*2,this.maxSize_);this.currentSize_=u}l=new ol.style.Atlas(u,this.space_);a.push(l);++p}}goog.asserts.fail("Failed to add to atlasmanager")};ol.style.AtlasInfo;ol.style.Atlas=function(e,o){this.space_=o;this.emptyBlocks_=[{x:0,y:0,width:e,height:e}];this.entries_={};this.canvas_=document.createElement("CANVAS");this.canvas_.width=e;this.canvas_.height=e;this.context_=this.canvas_.getContext("2d")};ol.style.Atlas.prototype.get=function(e){return this.entries_[e]||null};ol.style.Atlas.prototype.add=function(e,o,t,r,i){var n,a,l;for(a=0,l=this.emptyBlocks_.length;a<l;++a){n=this.emptyBlocks_[a];if(n.width>=o+this.space_&&n.height>=t+this.space_){var s={offsetX:n.x+this.space_,offsetY:n.y+this.space_,image:this.canvas_};this.entries_[e]=s;r.call(i,this.context_,n.x+this.space_,n.y+this.space_);this.split_(a,n,o+this.space_,t+this.space_);return s}}return null};ol.style.Atlas.prototype.split_=function(e,o,t,r){var i=o.width-t;var n=o.height-r;var a;var l;if(i>n){a={x:o.x+t,y:o.y,width:o.width-t,height:o.height};l={x:o.x,y:o.y+r,width:t,height:o.height-r};this.updateBlocks_(e,a,l)}else{a={x:o.x+t,y:o.y,width:o.width-t,height:r};l={x:o.x,y:o.y+r,width:o.width,height:o.height-r};this.updateBlocks_(e,a,l)}};ol.style.Atlas.prototype.updateBlocks_=function(e,o,t){var r=[e,1];if(o.width>0&&o.height>0){r.push(o)}if(t.width>0&&t.height>0){r.push(t)}this.emptyBlocks_.splice.apply(this.emptyBlocks_,r)};ol.style.Atlas.Block;goog.provide("ol.style.RegularShape");goog.require("goog.asserts");goog.require("ol");goog.require("ol.color");goog.require("ol.colorlike");goog.require("ol.has");goog.require("ol.render.canvas");goog.require("ol.style.AtlasManager");goog.require("ol.style.Fill");goog.require("ol.style.Image");goog.require("ol.style.ImageState");goog.require("ol.style.Stroke");ol.style.RegularShape=function(e){goog.asserts.assert(e.radius!==undefined||e.radius1!==undefined,'must provide either "radius" or "radius1"');this.checksums_=null;this.canvas_=null;this.hitDetectionCanvas_=null;this.fill_=e.fill!==undefined?e.fill:null;this.origin_=[0,0];this.points_=e.points;this.radius_=e.radius!==undefined?e.radius:e.radius1;this.radius2_=e.radius2!==undefined?e.radius2:this.radius_;this.angle_=e.angle!==undefined?e.angle:0;this.stroke_=e.stroke!==undefined?e.stroke:null;this.anchor_=null;this.size_=null;this.imageSize_=null;this.hitDetectionImageSize_=null;this.render_(e.atlasManager);var o=e.snapToPixel!==undefined?e.snapToPixel:true;var t=e.rotateWithView!==undefined?e.rotateWithView:false;goog.base(this,{opacity:1,rotateWithView:t,rotation:e.rotation!==undefined?e.rotation:0,scale:1,snapToPixel:o})};goog.inherits(ol.style.RegularShape,ol.style.Image);ol.style.RegularShape.prototype.getAnchor=function(){return this.anchor_};ol.style.RegularShape.prototype.getAngle=function(){return this.angle_};ol.style.RegularShape.prototype.getFill=function(){return this.fill_};ol.style.RegularShape.prototype.getHitDetectionImage=function(e){return this.hitDetectionCanvas_};ol.style.RegularShape.prototype.getImage=function(e){return this.canvas_};ol.style.RegularShape.prototype.getImageSize=function(){return this.imageSize_};ol.style.RegularShape.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_};ol.style.RegularShape.prototype.getImageState=function(){return ol.style.ImageState.LOADED};ol.style.RegularShape.prototype.getOrigin=function(){return this.origin_};ol.style.RegularShape.prototype.getPoints=function(){return this.points_};ol.style.RegularShape.prototype.getRadius=function(){return this.radius_};ol.style.RegularShape.prototype.getRadius2=function(){return this.radius2_};ol.style.RegularShape.prototype.getSize=function(){return this.size_};ol.style.RegularShape.prototype.getStroke=function(){return this.stroke_};ol.style.RegularShape.prototype.listenImageChange=ol.nullFunction;ol.style.RegularShape.prototype.load=ol.nullFunction;ol.style.RegularShape.prototype.unlistenImageChange=ol.nullFunction;ol.style.RegularShape.RenderOptions;ol.style.RegularShape.prototype.render_=function(e){var o;var t="";var r="";var i=0;var n=null;var a;var l=0;if(this.stroke_){a=ol.color.asString(this.stroke_.getColor());l=this.stroke_.getWidth();if(l===undefined){l=ol.render.canvas.defaultLineWidth}n=this.stroke_.getLineDash();if(!ol.has.CANVAS_LINE_DASH){n=null}r=this.stroke_.getLineJoin();if(r===undefined){r=ol.render.canvas.defaultLineJoin}t=this.stroke_.getLineCap();if(t===undefined){t=ol.render.canvas.defaultLineCap}i=this.stroke_.getMiterLimit();if(i===undefined){i=ol.render.canvas.defaultMiterLimit}}var s=2*(this.radius_+l)+1;var g={strokeStyle:a,strokeWidth:l,size:s,lineCap:t,lineDash:n,lineJoin:r,miterLimit:i};if(e===undefined){this.canvas_=document.createElement("CANVAS");this.canvas_.height=s;this.canvas_.width=s;s=this.canvas_.width;o=s;var p=this.canvas_.getContext("2d");this.draw_(g,p,0,0);this.createHitDetectionCanvas_(g)}else{s=Math.round(s);var u=!this.fill_;var c;if(u){c=this.drawHitDetectionCanvas_.bind(this,g)}var d=this.getChecksum();var y=e.add(d,s,s,this.draw_.bind(this,g),c);goog.asserts.assert(y,"shape size is too large");this.canvas_=y.image;this.origin_=[y.offsetX,y.offsetY];o=y.image.width;if(u){this.hitDetectionCanvas_=y.hitImage;this.hitDetectionImageSize_=[y.hitImage.width,y.hitImage.height]}else{this.hitDetectionCanvas_=this.canvas_;this.hitDetectionImageSize_=[o,o]}}this.anchor_=[s/2,s/2];this.size_=[s,s];this.imageSize_=[o,o]};ol.style.RegularShape.prototype.draw_=function(e,o,t,r){var i,n,a;o.setTransform(1,0,0,1,0,0);o.translate(t,r);o.beginPath();if(this.radius2_!==this.radius_){this.points_=2*this.points_}for(i=0;i<=this.points_;i++){n=i*2*Math.PI/this.points_-Math.PI/2+this.angle_;a=i%2===0?this.radius_:this.radius2_;o.lineTo(e.size/2+a*Math.cos(n),e.size/2+a*Math.sin(n))}if(this.fill_){o.fillStyle=ol.colorlike.asColorLike(this.fill_.getColor());o.fill()}if(this.stroke_){o.strokeStyle=e.strokeStyle;o.lineWidth=e.strokeWidth;if(e.lineDash){o.setLineDash(e.lineDash)}o.lineCap=e.lineCap;o.lineJoin=e.lineJoin;o.miterLimit=e.miterLimit;o.stroke()}o.closePath()};ol.style.RegularShape.prototype.createHitDetectionCanvas_=function(e){this.hitDetectionImageSize_=[e.size,e.size];if(this.fill_){this.hitDetectionCanvas_=this.canvas_;return}this.hitDetectionCanvas_=document.createElement("CANVAS");var o=this.hitDetectionCanvas_;o.height=e.size;o.width=e.size;var t=o.getContext("2d");this.drawHitDetectionCanvas_(e,t,0,0)};ol.style.RegularShape.prototype.drawHitDetectionCanvas_=function(e,o,t,r){o.setTransform(1,0,0,1,0,0);o.translate(t,r);o.beginPath();if(this.radius2_!==this.radius_){this.points_=2*this.points_}var i,n,a;for(i=0;i<=this.points_;i++){a=i*2*Math.PI/this.points_-Math.PI/2+this.angle_;n=i%2===0?this.radius_:this.radius2_;o.lineTo(e.size/2+n*Math.cos(a),e.size/2+n*Math.sin(a))}o.fillStyle=ol.render.canvas.defaultFillStyle;o.fill();if(this.stroke_){o.strokeStyle=e.strokeStyle;o.lineWidth=e.strokeWidth;if(e.lineDash){o.setLineDash(e.lineDash)}o.stroke()}o.closePath()};ol.style.RegularShape.prototype.getChecksum=function(){var e=this.stroke_?this.stroke_.getChecksum():"-";var o=this.fill_?this.fill_.getChecksum():"-";var t=!this.checksums_||(e!=this.checksums_[1]||o!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]);if(t){var r="r"+e+o+(this.radius_!==undefined?this.radius_.toString():"-")+(this.radius2_!==undefined?this.radius2_.toString():"-")+(this.angle_!==undefined?this.angle_.toString():"-")+(this.points_!==undefined?this.points_.toString():"-");this.checksums_=[r,e,o,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]};goog.addDependency("demos/editor/equationeditor.js",["goog.demos.editor.EquationEditor"],["goog.ui.equation.EquationEditorDialog"]);goog.addDependency("demos/editor/helloworld.js",["goog.demos.editor.HelloWorld"],["goog.dom","goog.dom.TagName","goog.editor.Plugin"]);goog.addDependency("demos/editor/helloworlddialog.js",["goog.demos.editor.HelloWorldDialog","goog.demos.editor.HelloWorldDialog.OkEvent"],["goog.dom.TagName","goog.events.Event","goog.string","goog.ui.editor.AbstractDialog","goog.ui.editor.AbstractDialog.Builder","goog.ui.editor.AbstractDialog.EventType"]);goog.addDependency("demos/editor/helloworlddialogplugin.js",["goog.demos.editor.HelloWorldDialogPlugin","goog.demos.editor.HelloWorldDialogPlugin.Command"],["goog.demos.editor.HelloWorldDialog","goog.dom.TagName","goog.editor.plugins.AbstractDialogPlugin","goog.editor.range","goog.functions","goog.ui.editor.AbstractDialog.EventType"]);goog.require("ol");goog.require("ol.Attribution");goog.require("ol.Collection");goog.require("ol.CollectionEvent");goog.require("ol.CollectionEventType");goog.require("ol.Color");goog.require("ol.ColorLike");goog.require("ol.Coordinate");goog.require("ol.CoordinateFormatType");goog.require("ol.DeviceOrientation");goog.require("ol.DeviceOrientationProperty");goog.require("ol.DragBoxEvent");goog.require("ol.Extent");goog.require("ol.Feature");goog.require("ol.FeatureLoader");goog.require("ol.FeatureStyleFunction");goog.require("ol.FeatureUrlFunction");goog.require("ol.Geolocation");goog.require("ol.GeolocationProperty");goog.require("ol.Graticule");goog.require("ol.Image");goog.require("ol.ImageTile");goog.require("ol.Kinetic");goog.require("ol.LoadingStrategy");goog.require("ol.Map");goog.require("ol.MapBrowserEvent");goog.require("ol.MapBrowserEvent.EventType");goog.require("ol.MapBrowserEventHandler");goog.require("ol.MapBrowserPointerEvent");goog.require("ol.MapEvent");goog.require("ol.MapEventType");goog.require("ol.MapProperty");goog.require("ol.Object");goog.require("ol.ObjectEvent");goog.require("ol.ObjectEventType");goog.require("ol.Observable");goog.require("ol.Overlay");goog.require("ol.OverlayPositioning");goog.require("ol.OverlayProperty");goog.require("ol.Size");goog.require("ol.Sphere");goog.require("ol.Tile");goog.require("ol.TileState");goog.require("ol.VectorTile");goog.require("ol.View");goog.require("ol.ViewHint");goog.require("ol.ViewProperty");goog.require("ol.animation");goog.require("ol.color");goog.require("ol.colorlike");goog.require("ol.control");goog.require("ol.control.Attribution");goog.require("ol.control.Control");goog.require("ol.control.FullScreen");goog.require("ol.control.MousePosition");goog.require("ol.control.OverviewMap");goog.require("ol.control.Rotate");goog.require("ol.control.ScaleLine");goog.require("ol.control.ScaleLineProperty");goog.require("ol.control.ScaleLineUnits");goog.require("ol.control.Zoom");goog.require("ol.control.ZoomSlider");goog.require("ol.control.ZoomToExtent");goog.require("ol.coordinate");goog.require("ol.easing");goog.require("ol.events.ConditionType");goog.require("ol.events.condition");goog.require("ol.extent");goog.require("ol.extent.Corner");goog.require("ol.extent.Relationship");goog.require("ol.featureloader");goog.require("ol.format.EsriJSON");goog.require("ol.format.Feature");goog.require("ol.format.GML");goog.require("ol.format.GML2");goog.require("ol.format.GML3");goog.require("ol.format.GMLBase");goog.require("ol.format.GPX");goog.require("ol.format.GeoJSON");goog.require("ol.format.IGC");goog.require("ol.format.IGCZ");goog.require("ol.format.KML");goog.require("ol.format.MVT");goog.require("ol.format.OSMXML");goog.require("ol.format.Polyline");goog.require("ol.format.TopoJSON");goog.require("ol.format.WFS");goog.require("ol.format.WKT");goog.require("ol.format.WMSCapabilities");goog.require("ol.format.WMSGetFeatureInfo");goog.require("ol.format.WMTSCapabilities");goog.require("ol.geom.Circle");goog.require("ol.geom.Geometry");goog.require("ol.geom.GeometryCollection");goog.require("ol.geom.GeometryLayout");goog.require("ol.geom.GeometryType");goog.require("ol.geom.LineString");goog.require("ol.geom.LinearRing");goog.require("ol.geom.MultiLineString");goog.require("ol.geom.MultiPoint");goog.require("ol.geom.MultiPolygon");goog.require("ol.geom.Point");goog.require("ol.geom.Polygon");goog.require("ol.geom.SimpleGeometry");goog.require("ol.has");goog.require("ol.interaction");goog.require("ol.interaction.DoubleClickZoom");goog.require("ol.interaction.DragAndDrop");goog.require("ol.interaction.DragAndDropEvent");goog.require("ol.interaction.DragBox");goog.require("ol.interaction.DragPan");goog.require("ol.interaction.DragRotate");goog.require("ol.interaction.DragRotateAndZoom");goog.require("ol.interaction.DragZoom");goog.require("ol.interaction.Draw");goog.require("ol.interaction.DrawEvent");goog.require("ol.interaction.DrawEventType");goog.require("ol.interaction.DrawGeometryFunctionType");goog.require("ol.interaction.DrawMode");goog.require("ol.interaction.Interaction");goog.require("ol.interaction.InteractionProperty");goog.require("ol.interaction.KeyboardPan");goog.require("ol.interaction.KeyboardZoom");goog.require("ol.interaction.Modify");goog.require("ol.interaction.ModifyEvent");goog.require("ol.interaction.MouseWheelZoom");goog.require("ol.interaction.PinchRotate");goog.require("ol.interaction.PinchZoom");goog.require("ol.interaction.Pointer");goog.require("ol.interaction.Select");goog.require("ol.interaction.SelectEvent");goog.require("ol.interaction.SelectEventType");goog.require("ol.interaction.SelectFilterFunction");goog.require("ol.interaction.Snap");goog.require("ol.interaction.SnapProperty");goog.require("ol.interaction.Translate");goog.require("ol.interaction.TranslateEvent");goog.require("ol.layer.Base");goog.require("ol.layer.Group");goog.require("ol.layer.Heatmap");goog.require("ol.layer.Image");goog.require("ol.layer.Layer");goog.require("ol.layer.LayerProperty");goog.require("ol.layer.LayerState");goog.require("ol.layer.Tile");goog.require("ol.layer.Vector");goog.require("ol.layer.VectorTile");goog.require("ol.loadingstrategy");goog.require("ol.proj");goog.require("ol.proj.METERS_PER_UNIT");goog.require("ol.proj.Projection");goog.require("ol.proj.ProjectionLike");goog.require("ol.proj.Units");goog.require("ol.proj.common");goog.require("ol.render");goog.require("ol.render.Event");goog.require("ol.render.EventType");goog.require("ol.render.Feature");goog.require("ol.render.VectorContext");goog.require("ol.render.canvas.Immediate");goog.require("ol.render.webgl.Immediate");goog.require("ol.size");goog.require("ol.source.BingMaps");goog.require("ol.source.Cluster");goog.require("ol.source.Image");goog.require("ol.source.ImageCanvas");goog.require("ol.source.ImageEvent");goog.require("ol.source.ImageMapGuide");goog.require("ol.source.ImageStatic");goog.require("ol.source.ImageVector");goog.require("ol.source.ImageWMS");goog.require("ol.source.MapQuest");goog.require("ol.source.OSM");goog.require("ol.source.Raster");goog.require("ol.source.RasterEvent");goog.require("ol.source.RasterEventType");goog.require("ol.source.Source");goog.require("ol.source.Stamen");goog.require("ol.source.State");goog.require("ol.source.Tile");goog.require("ol.source.TileArcGISRest");goog.require("ol.source.TileDebug");goog.require("ol.source.TileEvent");goog.require("ol.source.TileImage");goog.require("ol.source.TileJSON");goog.require("ol.source.TileOptions");goog.require("ol.source.TileUTFGrid");goog.require("ol.source.TileWMS");goog.require("ol.source.UrlTile");goog.require("ol.source.Vector");goog.require("ol.source.VectorEvent");goog.require("ol.source.VectorEventType");goog.require("ol.source.VectorTile");goog.require("ol.source.WMTS");goog.require("ol.source.WMTSRequestEncoding");goog.require("ol.source.XYZ");goog.require("ol.source.Zoomify");goog.require("ol.style.Atlas");goog.require("ol.style.AtlasManager");goog.require("ol.style.Circle");goog.require("ol.style.Fill");goog.require("ol.style.GeometryFunction");goog.require("ol.style.Icon");goog.require("ol.style.IconAnchorUnits");goog.require("ol.style.IconImageCache");goog.require("ol.style.IconOrigin");goog.require("ol.style.Image");goog.require("ol.style.ImageState");goog.require("ol.style.RegularShape");goog.require("ol.style.Stroke");goog.require("ol.style.Style");goog.require("ol.style.StyleFunction");goog.require("ol.style.Text");goog.require("ol.style.defaultGeometryFunction");goog.require("ol.tilegrid.TileGrid");goog.require("ol.tilegrid.WMTS");goog.require("ol.tilejson");goog.require("ol.webgl.Context");goog.require("ol.xml");goog.exportSymbol("ol.animation.bounce",ol.animation.bounce,OPENLAYERS);goog.exportSymbol("ol.animation.pan",ol.animation.pan,OPENLAYERS);goog.exportSymbol("ol.animation.rotate",ol.animation.rotate,OPENLAYERS);goog.exportSymbol("ol.animation.zoom",ol.animation.zoom,OPENLAYERS);goog.exportSymbol("ol.Attribution",ol.Attribution,OPENLAYERS);goog.exportProperty(ol.Attribution.prototype,"getHTML",ol.Attribution.prototype.getHTML);goog.exportProperty(ol.CollectionEvent.prototype,"element",ol.CollectionEvent.prototype.element);goog.exportSymbol("ol.Collection",ol.Collection,OPENLAYERS);goog.exportProperty(ol.Collection.prototype,"clear",ol.Collection.prototype.clear)
;goog.exportProperty(ol.Collection.prototype,"extend",ol.Collection.prototype.extend);goog.exportProperty(ol.Collection.prototype,"forEach",ol.Collection.prototype.forEach);goog.exportProperty(ol.Collection.prototype,"getArray",ol.Collection.prototype.getArray);goog.exportProperty(ol.Collection.prototype,"item",ol.Collection.prototype.item);goog.exportProperty(ol.Collection.prototype,"getLength",ol.Collection.prototype.getLength);goog.exportProperty(ol.Collection.prototype,"insertAt",ol.Collection.prototype.insertAt);goog.exportProperty(ol.Collection.prototype,"pop",ol.Collection.prototype.pop);goog.exportProperty(ol.Collection.prototype,"push",ol.Collection.prototype.push);goog.exportProperty(ol.Collection.prototype,"remove",ol.Collection.prototype.remove);goog.exportProperty(ol.Collection.prototype,"removeAt",ol.Collection.prototype.removeAt);goog.exportProperty(ol.Collection.prototype,"setAt",ol.Collection.prototype.setAt);goog.exportSymbol("ol.color.asArray",ol.color.asArray,OPENLAYERS);goog.exportSymbol("ol.color.asString",ol.color.asString,OPENLAYERS);goog.exportSymbol("ol.colorlike.asColorLike",ol.colorlike.asColorLike,OPENLAYERS);goog.exportSymbol("ol.control.Attribution",ol.control.Attribution,OPENLAYERS);goog.exportSymbol("ol.control.Attribution.render",ol.control.Attribution.render,OPENLAYERS);goog.exportProperty(ol.control.Attribution.prototype,"getCollapsible",ol.control.Attribution.prototype.getCollapsible);goog.exportProperty(ol.control.Attribution.prototype,"setCollapsible",ol.control.Attribution.prototype.setCollapsible);goog.exportProperty(ol.control.Attribution.prototype,"setCollapsed",ol.control.Attribution.prototype.setCollapsed);goog.exportProperty(ol.control.Attribution.prototype,"getCollapsed",ol.control.Attribution.prototype.getCollapsed);goog.exportSymbol("ol.control.Control",ol.control.Control,OPENLAYERS);goog.exportProperty(ol.control.Control.prototype,"getMap",ol.control.Control.prototype.getMap);goog.exportProperty(ol.control.Control.prototype,"setMap",ol.control.Control.prototype.setMap);goog.exportProperty(ol.control.Control.prototype,"setTarget",ol.control.Control.prototype.setTarget);goog.exportSymbol("ol.control.defaults",ol.control.defaults,OPENLAYERS);goog.exportSymbol("ol.control.FullScreen",ol.control.FullScreen,OPENLAYERS);goog.exportSymbol("ol.control.MousePosition",ol.control.MousePosition,OPENLAYERS);goog.exportSymbol("ol.control.MousePosition.render",ol.control.MousePosition.render,OPENLAYERS);goog.exportProperty(ol.control.MousePosition.prototype,"getCoordinateFormat",ol.control.MousePosition.prototype.getCoordinateFormat);goog.exportProperty(ol.control.MousePosition.prototype,"getProjection",ol.control.MousePosition.prototype.getProjection);goog.exportProperty(ol.control.MousePosition.prototype,"setCoordinateFormat",ol.control.MousePosition.prototype.setCoordinateFormat);goog.exportProperty(ol.control.MousePosition.prototype,"setProjection",ol.control.MousePosition.prototype.setProjection);goog.exportSymbol("ol.control.OverviewMap",ol.control.OverviewMap,OPENLAYERS);goog.exportSymbol("ol.control.OverviewMap.render",ol.control.OverviewMap.render,OPENLAYERS);goog.exportProperty(ol.control.OverviewMap.prototype,"getCollapsible",ol.control.OverviewMap.prototype.getCollapsible);goog.exportProperty(ol.control.OverviewMap.prototype,"setCollapsible",ol.control.OverviewMap.prototype.setCollapsible);goog.exportProperty(ol.control.OverviewMap.prototype,"setCollapsed",ol.control.OverviewMap.prototype.setCollapsed);goog.exportProperty(ol.control.OverviewMap.prototype,"getCollapsed",ol.control.OverviewMap.prototype.getCollapsed);goog.exportProperty(ol.control.OverviewMap.prototype,"getOverviewMap",ol.control.OverviewMap.prototype.getOverviewMap);goog.exportSymbol("ol.control.Rotate",ol.control.Rotate,OPENLAYERS);goog.exportSymbol("ol.control.Rotate.render",ol.control.Rotate.render,OPENLAYERS);goog.exportSymbol("ol.control.ScaleLine",ol.control.ScaleLine,OPENLAYERS);goog.exportProperty(ol.control.ScaleLine.prototype,"getUnits",ol.control.ScaleLine.prototype.getUnits);goog.exportSymbol("ol.control.ScaleLine.render",ol.control.ScaleLine.render,OPENLAYERS);goog.exportProperty(ol.control.ScaleLine.prototype,"setUnits",ol.control.ScaleLine.prototype.setUnits);goog.exportSymbol("ol.control.Zoom",ol.control.Zoom,OPENLAYERS);goog.exportSymbol("ol.control.ZoomSlider",ol.control.ZoomSlider,OPENLAYERS);goog.exportSymbol("ol.control.ZoomSlider.render",ol.control.ZoomSlider.render,OPENLAYERS);goog.exportSymbol("ol.control.ZoomToExtent",ol.control.ZoomToExtent,OPENLAYERS);goog.exportSymbol("ol.coordinate.add",ol.coordinate.add,OPENLAYERS);goog.exportSymbol("ol.coordinate.createStringXY",ol.coordinate.createStringXY,OPENLAYERS);goog.exportSymbol("ol.coordinate.format",ol.coordinate.format,OPENLAYERS);goog.exportSymbol("ol.coordinate.rotate",ol.coordinate.rotate,OPENLAYERS);goog.exportSymbol("ol.coordinate.toStringHDMS",ol.coordinate.toStringHDMS,OPENLAYERS);goog.exportSymbol("ol.coordinate.toStringXY",ol.coordinate.toStringXY,OPENLAYERS);goog.exportSymbol("ol.DeviceOrientation",ol.DeviceOrientation,OPENLAYERS);goog.exportProperty(ol.DeviceOrientation.prototype,"getAlpha",ol.DeviceOrientation.prototype.getAlpha);goog.exportProperty(ol.DeviceOrientation.prototype,"getBeta",ol.DeviceOrientation.prototype.getBeta);goog.exportProperty(ol.DeviceOrientation.prototype,"getGamma",ol.DeviceOrientation.prototype.getGamma);goog.exportProperty(ol.DeviceOrientation.prototype,"getHeading",ol.DeviceOrientation.prototype.getHeading);goog.exportProperty(ol.DeviceOrientation.prototype,"getTracking",ol.DeviceOrientation.prototype.getTracking);goog.exportProperty(ol.DeviceOrientation.prototype,"setTracking",ol.DeviceOrientation.prototype.setTracking);goog.exportSymbol("ol.easing.easeIn",ol.easing.easeIn,OPENLAYERS);goog.exportSymbol("ol.easing.easeOut",ol.easing.easeOut,OPENLAYERS);goog.exportSymbol("ol.easing.inAndOut",ol.easing.inAndOut,OPENLAYERS);goog.exportSymbol("ol.easing.linear",ol.easing.linear,OPENLAYERS);goog.exportSymbol("ol.easing.upAndDown",ol.easing.upAndDown,OPENLAYERS);goog.exportSymbol("ol.events.condition.altKeyOnly",ol.events.condition.altKeyOnly,OPENLAYERS);goog.exportSymbol("ol.events.condition.altShiftKeysOnly",ol.events.condition.altShiftKeysOnly,OPENLAYERS);goog.exportSymbol("ol.events.condition.always",ol.events.condition.always,OPENLAYERS);goog.exportSymbol("ol.events.condition.click",ol.events.condition.click,OPENLAYERS);goog.exportSymbol("ol.events.condition.never",ol.events.condition.never,OPENLAYERS);goog.exportSymbol("ol.events.condition.pointerMove",ol.events.condition.pointerMove,OPENLAYERS);goog.exportSymbol("ol.events.condition.singleClick",ol.events.condition.singleClick,OPENLAYERS);goog.exportSymbol("ol.events.condition.doubleClick",ol.events.condition.doubleClick,OPENLAYERS);goog.exportSymbol("ol.events.condition.noModifierKeys",ol.events.condition.noModifierKeys,OPENLAYERS);goog.exportSymbol("ol.events.condition.platformModifierKeyOnly",ol.events.condition.platformModifierKeyOnly,OPENLAYERS);goog.exportSymbol("ol.events.condition.shiftKeyOnly",ol.events.condition.shiftKeyOnly,OPENLAYERS);goog.exportSymbol("ol.events.condition.targetNotEditable",ol.events.condition.targetNotEditable,OPENLAYERS);goog.exportSymbol("ol.events.condition.mouseOnly",ol.events.condition.mouseOnly,OPENLAYERS);goog.exportSymbol("ol.extent.boundingExtent",ol.extent.boundingExtent,OPENLAYERS);goog.exportSymbol("ol.extent.buffer",ol.extent.buffer,OPENLAYERS);goog.exportSymbol("ol.extent.containsCoordinate",ol.extent.containsCoordinate,OPENLAYERS);goog.exportSymbol("ol.extent.containsExtent",ol.extent.containsExtent,OPENLAYERS);goog.exportSymbol("ol.extent.containsXY",ol.extent.containsXY,OPENLAYERS);goog.exportSymbol("ol.extent.createEmpty",ol.extent.createEmpty,OPENLAYERS);goog.exportSymbol("ol.extent.equals",ol.extent.equals,OPENLAYERS);goog.exportSymbol("ol.extent.extend",ol.extent.extend,OPENLAYERS);goog.exportSymbol("ol.extent.getBottomLeft",ol.extent.getBottomLeft,OPENLAYERS);goog.exportSymbol("ol.extent.getBottomRight",ol.extent.getBottomRight,OPENLAYERS);goog.exportSymbol("ol.extent.getCenter",ol.extent.getCenter,OPENLAYERS);goog.exportSymbol("ol.extent.getHeight",ol.extent.getHeight,OPENLAYERS);goog.exportSymbol("ol.extent.getIntersection",ol.extent.getIntersection,OPENLAYERS);goog.exportSymbol("ol.extent.getSize",ol.extent.getSize,OPENLAYERS);goog.exportSymbol("ol.extent.getTopLeft",ol.extent.getTopLeft,OPENLAYERS);goog.exportSymbol("ol.extent.getTopRight",ol.extent.getTopRight,OPENLAYERS);goog.exportSymbol("ol.extent.getWidth",ol.extent.getWidth,OPENLAYERS);goog.exportSymbol("ol.extent.intersects",ol.extent.intersects,OPENLAYERS);goog.exportSymbol("ol.extent.isEmpty",ol.extent.isEmpty,OPENLAYERS);goog.exportSymbol("ol.extent.applyTransform",ol.extent.applyTransform,OPENLAYERS);goog.exportSymbol("ol.Feature",ol.Feature,OPENLAYERS);goog.exportProperty(ol.Feature.prototype,"clone",ol.Feature.prototype.clone);goog.exportProperty(ol.Feature.prototype,"getGeometry",ol.Feature.prototype.getGeometry);goog.exportProperty(ol.Feature.prototype,"getId",ol.Feature.prototype.getId);goog.exportProperty(ol.Feature.prototype,"getGeometryName",ol.Feature.prototype.getGeometryName);goog.exportProperty(ol.Feature.prototype,"getStyle",ol.Feature.prototype.getStyle);goog.exportProperty(ol.Feature.prototype,"getStyleFunction",ol.Feature.prototype.getStyleFunction);goog.exportProperty(ol.Feature.prototype,"setGeometry",ol.Feature.prototype.setGeometry);goog.exportProperty(ol.Feature.prototype,"setStyle",ol.Feature.prototype.setStyle);goog.exportProperty(ol.Feature.prototype,"setId",ol.Feature.prototype.setId);goog.exportProperty(ol.Feature.prototype,"setGeometryName",ol.Feature.prototype.setGeometryName);goog.exportSymbol("ol.featureloader.tile",ol.featureloader.tile,OPENLAYERS);goog.exportSymbol("ol.featureloader.xhr",ol.featureloader.xhr,OPENLAYERS);goog.exportSymbol("ol.format.EsriJSON",ol.format.EsriJSON,OPENLAYERS);goog.exportProperty(ol.format.EsriJSON.prototype,"readFeature",ol.format.EsriJSON.prototype.readFeature);goog.exportProperty(ol.format.EsriJSON.prototype,"readFeatures",ol.format.EsriJSON.prototype.readFeatures);goog.exportProperty(ol.format.EsriJSON.prototype,"readGeometry",ol.format.EsriJSON.prototype.readGeometry);goog.exportProperty(ol.format.EsriJSON.prototype,"readProjection",ol.format.EsriJSON.prototype.readProjection);goog.exportProperty(ol.format.EsriJSON.prototype,"writeGeometry",ol.format.EsriJSON.prototype.writeGeometry);goog.exportProperty(ol.format.EsriJSON.prototype,"writeGeometryObject",ol.format.EsriJSON.prototype.writeGeometryObject);goog.exportProperty(ol.format.EsriJSON.prototype,"writeFeature",ol.format.EsriJSON.prototype.writeFeature);goog.exportProperty(ol.format.EsriJSON.prototype,"writeFeatureObject",ol.format.EsriJSON.prototype.writeFeatureObject);goog.exportProperty(ol.format.EsriJSON.prototype,"writeFeatures",ol.format.EsriJSON.prototype.writeFeatures);goog.exportProperty(ol.format.EsriJSON.prototype,"writeFeaturesObject",ol.format.EsriJSON.prototype.writeFeaturesObject);goog.exportSymbol("ol.format.Feature",ol.format.Feature,OPENLAYERS);goog.exportSymbol("ol.format.GeoJSON",ol.format.GeoJSON,OPENLAYERS);goog.exportProperty(ol.format.GeoJSON.prototype,"readFeature",ol.format.GeoJSON.prototype.readFeature);goog.exportProperty(ol.format.GeoJSON.prototype,"readFeatures",ol.format.GeoJSON.prototype.readFeatures);goog.exportProperty(ol.format.GeoJSON.prototype,"readGeometry",ol.format.GeoJSON.prototype.readGeometry);goog.exportProperty(ol.format.GeoJSON.prototype,"readProjection",ol.format.GeoJSON.prototype.readProjection);goog.exportProperty(ol.format.GeoJSON.prototype,"writeFeature",ol.format.GeoJSON.prototype.writeFeature);goog.exportProperty(ol.format.GeoJSON.prototype,"writeFeatureObject",ol.format.GeoJSON.prototype.writeFeatureObject);goog.exportProperty(ol.format.GeoJSON.prototype,"writeFeatures",ol.format.GeoJSON.prototype.writeFeatures);goog.exportProperty(ol.format.GeoJSON.prototype,"writeFeaturesObject",ol.format.GeoJSON.prototype.writeFeaturesObject);goog.exportProperty(ol.format.GeoJSON.prototype,"writeGeometry",ol.format.GeoJSON.prototype.writeGeometry);goog.exportProperty(ol.format.GeoJSON.prototype,"writeGeometryObject",ol.format.GeoJSON.prototype.writeGeometryObject);goog.exportSymbol("ol.format.GML2",ol.format.GML2,OPENLAYERS);goog.exportSymbol("ol.format.GML3",ol.format.GML3,OPENLAYERS);goog.exportProperty(ol.format.GML3.prototype,"writeGeometryNode",ol.format.GML3.prototype.writeGeometryNode);goog.exportProperty(ol.format.GML3.prototype,"writeFeatures",ol.format.GML3.prototype.writeFeatures);goog.exportProperty(ol.format.GML3.prototype,"writeFeaturesNode",ol.format.GML3.prototype.writeFeaturesNode);goog.exportSymbol("ol.format.GML",ol.format.GML,OPENLAYERS);goog.exportProperty(ol.format.GML.prototype,"writeFeatures",ol.format.GML.prototype.writeFeatures);goog.exportProperty(ol.format.GML.prototype,"writeFeaturesNode",ol.format.GML.prototype.writeFeaturesNode);goog.exportProperty(ol.format.GMLBase.prototype,"readFeatures",ol.format.GMLBase.prototype.readFeatures);goog.exportSymbol("ol.format.GPX",ol.format.GPX,OPENLAYERS);goog.exportProperty(ol.format.GPX.prototype,"readFeature",ol.format.GPX.prototype.readFeature);goog.exportProperty(ol.format.GPX.prototype,"readFeatures",ol.format.GPX.prototype.readFeatures);goog.exportProperty(ol.format.GPX.prototype,"readProjection",ol.format.GPX.prototype.readProjection);goog.exportProperty(ol.format.GPX.prototype,"writeFeatures",ol.format.GPX.prototype.writeFeatures);goog.exportProperty(ol.format.GPX.prototype,"writeFeaturesNode",ol.format.GPX.prototype.writeFeaturesNode);goog.exportSymbol("ol.format.IGC",ol.format.IGC,OPENLAYERS);goog.exportProperty(ol.format.IGC.prototype,"readFeature",ol.format.IGC.prototype.readFeature);goog.exportProperty(ol.format.IGC.prototype,"readFeatures",ol.format.IGC.prototype.readFeatures);goog.exportProperty(ol.format.IGC.prototype,"readProjection",ol.format.IGC.prototype.readProjection);goog.exportSymbol("ol.format.KML",ol.format.KML,OPENLAYERS);goog.exportProperty(ol.format.KML.prototype,"readFeature",ol.format.KML.prototype.readFeature);goog.exportProperty(ol.format.KML.prototype,"readFeatures",ol.format.KML.prototype.readFeatures);goog.exportProperty(ol.format.KML.prototype,"readName",ol.format.KML.prototype.readName);goog.exportProperty(ol.format.KML.prototype,"readNetworkLinks",ol.format.KML.prototype.readNetworkLinks);goog.exportProperty(ol.format.KML.prototype,"readProjection",ol.format.KML.prototype.readProjection);goog.exportProperty(ol.format.KML.prototype,"writeFeatures",ol.format.KML.prototype.writeFeatures);goog.exportProperty(ol.format.KML.prototype,"writeFeaturesNode",ol.format.KML.prototype.writeFeaturesNode);goog.exportSymbol("ol.format.MVT",ol.format.MVT,OPENLAYERS);goog.exportProperty(ol.format.MVT.prototype,"setLayers",ol.format.MVT.prototype.setLayers);goog.exportSymbol("ol.format.OSMXML",ol.format.OSMXML,OPENLAYERS);goog.exportProperty(ol.format.OSMXML.prototype,"readFeatures",ol.format.OSMXML.prototype.readFeatures);goog.exportProperty(ol.format.OSMXML.prototype,"readProjection",ol.format.OSMXML.prototype.readProjection);goog.exportSymbol("ol.format.Polyline",ol.format.Polyline,OPENLAYERS);goog.exportSymbol("ol.format.Polyline.encodeDeltas",ol.format.Polyline.encodeDeltas,OPENLAYERS);goog.exportSymbol("ol.format.Polyline.decodeDeltas",ol.format.Polyline.decodeDeltas,OPENLAYERS);goog.exportSymbol("ol.format.Polyline.encodeFloats",ol.format.Polyline.encodeFloats,OPENLAYERS);goog.exportSymbol("ol.format.Polyline.decodeFloats",ol.format.Polyline.decodeFloats,OPENLAYERS);goog.exportProperty(ol.format.Polyline.prototype,"readFeature",ol.format.Polyline.prototype.readFeature);goog.exportProperty(ol.format.Polyline.prototype,"readFeatures",ol.format.Polyline.prototype.readFeatures);goog.exportProperty(ol.format.Polyline.prototype,"readGeometry",ol.format.Polyline.prototype.readGeometry);goog.exportProperty(ol.format.Polyline.prototype,"readProjection",ol.format.Polyline.prototype.readProjection);goog.exportProperty(ol.format.Polyline.prototype,"writeGeometry",ol.format.Polyline.prototype.writeGeometry);goog.exportSymbol("ol.format.TopoJSON",ol.format.TopoJSON,OPENLAYERS);goog.exportProperty(ol.format.TopoJSON.prototype,"readFeatures",ol.format.TopoJSON.prototype.readFeatures);goog.exportProperty(ol.format.TopoJSON.prototype,"readProjection",ol.format.TopoJSON.prototype.readProjection);goog.exportSymbol("ol.format.WFS",ol.format.WFS,OPENLAYERS);goog.exportProperty(ol.format.WFS.prototype,"readFeatures",ol.format.WFS.prototype.readFeatures);goog.exportProperty(ol.format.WFS.prototype,"readTransactionResponse",ol.format.WFS.prototype.readTransactionResponse);goog.exportProperty(ol.format.WFS.prototype,"readFeatureCollectionMetadata",ol.format.WFS.prototype.readFeatureCollectionMetadata);goog.exportProperty(ol.format.WFS.prototype,"writeGetFeature",ol.format.WFS.prototype.writeGetFeature);goog.exportProperty(ol.format.WFS.prototype,"writeTransaction",ol.format.WFS.prototype.writeTransaction);goog.exportProperty(ol.format.WFS.prototype,"readProjection",ol.format.WFS.prototype.readProjection);goog.exportSymbol("ol.format.WKT",ol.format.WKT,OPENLAYERS);goog.exportProperty(ol.format.WKT.prototype,"readFeature",ol.format.WKT.prototype.readFeature);goog.exportProperty(ol.format.WKT.prototype,"readFeatures",ol.format.WKT.prototype.readFeatures);goog.exportProperty(ol.format.WKT.prototype,"readGeometry",ol.format.WKT.prototype.readGeometry);goog.exportProperty(ol.format.WKT.prototype,"writeFeature",ol.format.WKT.prototype.writeFeature);goog.exportProperty(ol.format.WKT.prototype,"writeFeatures",ol.format.WKT.prototype.writeFeatures);goog.exportProperty(ol.format.WKT.prototype,"writeGeometry",ol.format.WKT.prototype.writeGeometry);goog.exportSymbol("ol.format.WMSCapabilities",ol.format.WMSCapabilities,OPENLAYERS);goog.exportProperty(ol.format.WMSCapabilities.prototype,"read",ol.format.WMSCapabilities.prototype.read);goog.exportSymbol("ol.format.WMSGetFeatureInfo",ol.format.WMSGetFeatureInfo,OPENLAYERS);goog.exportProperty(ol.format.WMSGetFeatureInfo.prototype,"readFeatures",ol.format.WMSGetFeatureInfo.prototype.readFeatures);goog.exportSymbol("ol.format.WMTSCapabilities",ol.format.WMTSCapabilities,OPENLAYERS);goog.exportProperty(ol.format.WMTSCapabilities.prototype,"read",ol.format.WMTSCapabilities.prototype.read);goog.exportSymbol("ol.Geolocation",ol.Geolocation,OPENLAYERS);goog.exportProperty(ol.Geolocation.prototype,"getAccuracy",ol.Geolocation.prototype.getAccuracy);goog.exportProperty(ol.Geolocation.prototype,"getAccuracyGeometry",ol.Geolocation.prototype.getAccuracyGeometry);goog.exportProperty(ol.Geolocation.prototype,"getAltitude",ol.Geolocation.prototype.getAltitude);goog.exportProperty(ol.Geolocation.prototype,"getAltitudeAccuracy",ol.Geolocation.prototype.getAltitudeAccuracy);goog.exportProperty(ol.Geolocation.prototype,"getHeading",ol.Geolocation.prototype.getHeading);goog.exportProperty(ol.Geolocation.prototype,"getPosition",ol.Geolocation.prototype.getPosition);goog.exportProperty(ol.Geolocation.prototype,"getProjection",ol.Geolocation.prototype.getProjection);goog.exportProperty(ol.Geolocation.prototype,"getSpeed",ol.Geolocation.prototype.getSpeed);goog.exportProperty(ol.Geolocation.prototype,"getTracking",ol.Geolocation.prototype.getTracking);goog.exportProperty(ol.Geolocation.prototype,"getTrackingOptions",ol.Geolocation.prototype.getTrackingOptions);goog.exportProperty(ol.Geolocation.prototype,"setProjection",ol.Geolocation.prototype.setProjection);goog.exportProperty(ol.Geolocation.prototype,"setTracking",ol.Geolocation.prototype.setTracking);goog.exportProperty(ol.Geolocation.prototype,"setTrackingOptions",ol.Geolocation.prototype.setTrackingOptions);goog.exportSymbol("ol.geom.Circle",ol.geom.Circle,OPENLAYERS);goog.exportProperty(ol.geom.Circle.prototype,"clone",ol.geom.Circle.prototype.clone);goog.exportProperty(ol.geom.Circle.prototype,"getCenter",ol.geom.Circle.prototype.getCenter);goog.exportProperty(ol.geom.Circle.prototype,"getRadius",ol.geom.Circle.prototype.getRadius);goog.exportProperty(ol.geom.Circle.prototype,"getType",ol.geom.Circle.prototype.getType);goog.exportProperty(ol.geom.Circle.prototype,"intersectsExtent",ol.geom.Circle.prototype.intersectsExtent);goog.exportProperty(ol.geom.Circle.prototype,"setCenter",ol.geom.Circle.prototype.setCenter);goog.exportProperty(ol.geom.Circle.prototype,"setCenterAndRadius",ol.geom.Circle.prototype.setCenterAndRadius);goog.exportProperty(ol.geom.Circle.prototype,"setRadius",ol.geom.Circle.prototype.setRadius);goog.exportProperty(ol.geom.Circle.prototype,"transform",ol.geom.Circle.prototype.transform);goog.exportSymbol("ol.geom.Geometry",ol.geom.Geometry,OPENLAYERS);goog.exportProperty(ol.geom.Geometry.prototype,"getClosestPoint",ol.geom.Geometry.prototype.getClosestPoint);goog.exportProperty(ol.geom.Geometry.prototype,"getExtent",ol.geom.Geometry.prototype.getExtent);goog.exportProperty(ol.geom.Geometry.prototype,"simplify",ol.geom.Geometry.prototype.simplify);goog.exportProperty(ol.geom.Geometry.prototype,"transform",ol.geom.Geometry.prototype.transform);goog.exportSymbol("ol.geom.GeometryCollection",ol.geom.GeometryCollection,OPENLAYERS);goog.exportProperty(ol.geom.GeometryCollection.prototype,"clone",ol.geom.GeometryCollection.prototype.clone);goog.exportProperty(ol.geom.GeometryCollection.prototype,"getGeometries",ol.geom.GeometryCollection.prototype.getGeometries);goog.exportProperty(ol.geom.GeometryCollection.prototype,"getType",ol.geom.GeometryCollection.prototype.getType);goog.exportProperty(ol.geom.GeometryCollection.prototype,"intersectsExtent",ol.geom.GeometryCollection.prototype.intersectsExtent);goog.exportProperty(ol.geom.GeometryCollection.prototype,"setGeometries",ol.geom.GeometryCollection.prototype.setGeometries);goog.exportProperty(ol.geom.GeometryCollection.prototype,"applyTransform",ol.geom.GeometryCollection.prototype.applyTransform);goog.exportProperty(ol.geom.GeometryCollection.prototype,"translate",ol.geom.GeometryCollection.prototype.translate);goog.exportSymbol("ol.geom.LinearRing",ol.geom.LinearRing,OPENLAYERS);goog.exportProperty(ol.geom.LinearRing.prototype,"clone",ol.geom.LinearRing.prototype.clone);goog.exportProperty(ol.geom.LinearRing.prototype,"getArea",ol.geom.LinearRing.prototype.getArea);goog.exportProperty(ol.geom.LinearRing.prototype,"getCoordinates",ol.geom.LinearRing.prototype.getCoordinates);goog.exportProperty(ol.geom.LinearRing.prototype,"getType",ol.geom.LinearRing.prototype.getType);goog.exportProperty(ol.geom.LinearRing.prototype,"setCoordinates",ol.geom.LinearRing.prototype.setCoordinates);goog.exportSymbol("ol.geom.LineString",ol.geom.LineString,OPENLAYERS);goog.exportProperty(ol.geom.LineString.prototype,"appendCoordinate",ol.geom.LineString.prototype.appendCoordinate);goog.exportProperty(ol.geom.LineString.prototype,"clone",ol.geom.LineString.prototype.clone);goog.exportProperty(ol.geom.LineString.prototype,"forEachSegment",ol.geom.LineString.prototype.forEachSegment);goog.exportProperty(ol.geom.LineString.prototype,"getCoordinateAtM",ol.geom.LineString.prototype.getCoordinateAtM);goog.exportProperty(ol.geom.LineString.prototype,"getCoordinates",ol.geom.LineString.prototype.getCoordinates);goog.exportProperty(ol.geom.LineString.prototype,"getCoordinateAt",ol.geom.LineString.prototype.getCoordinateAt);goog.exportProperty(ol.geom.LineString.prototype,"getLength",ol.geom.LineString.prototype.getLength);goog.exportProperty(ol.geom.LineString.prototype,"getType",ol.geom.LineString.prototype.getType);goog.exportProperty(ol.geom.LineString.prototype,"intersectsExtent",ol.geom.LineString.prototype.intersectsExtent);goog.exportProperty(ol.geom.LineString.prototype,"setCoordinates",ol.geom.LineString.prototype.setCoordinates);goog.exportSymbol("ol.geom.MultiLineString",ol.geom.MultiLineString,OPENLAYERS);goog.exportProperty(ol.geom.MultiLineString.prototype,"appendLineString",ol.geom.MultiLineString.prototype.appendLineString);goog.exportProperty(ol.geom.MultiLineString.prototype,"clone",ol.geom.MultiLineString.prototype.clone);goog.exportProperty(ol.geom.MultiLineString.prototype,"getCoordinateAtM",ol.geom.MultiLineString.prototype.getCoordinateAtM);goog.exportProperty(ol.geom.MultiLineString.prototype,"getCoordinates",ol.geom.MultiLineString.prototype.getCoordinates);goog.exportProperty(ol.geom.MultiLineString.prototype,"getLineString",ol.geom.MultiLineString.prototype.getLineString);goog.exportProperty(ol.geom.MultiLineString.prototype,"getLineStrings",ol.geom.MultiLineString.prototype.getLineStrings);goog.exportProperty(ol.geom.MultiLineString.prototype,"getType",ol.geom.MultiLineString.prototype.getType);goog.exportProperty(ol.geom.MultiLineString.prototype,"intersectsExtent",ol.geom.MultiLineString.prototype.intersectsExtent);goog.exportProperty(ol.geom.MultiLineString.prototype,"setCoordinates",ol.geom.MultiLineString.prototype.setCoordinates);goog.exportSymbol("ol.geom.MultiPoint",ol.geom.MultiPoint,OPENLAYERS);goog.exportProperty(ol.geom.MultiPoint.prototype,"appendPoint",ol.geom.MultiPoint.prototype.appendPoint);goog.exportProperty(ol.geom.MultiPoint.prototype,"clone",ol.geom.MultiPoint.prototype.clone);goog.exportProperty(ol.geom.MultiPoint.prototype,"getCoordinates",ol.geom.MultiPoint.prototype.getCoordinates);goog.exportProperty(ol.geom.MultiPoint.prototype,"getPoint",ol.geom.MultiPoint.prototype.getPoint);goog.exportProperty(ol.geom.MultiPoint.prototype,"getPoints",ol.geom.MultiPoint.prototype.getPoints);goog.exportProperty(ol.geom.MultiPoint.prototype,"getType",ol.geom.MultiPoint.prototype.getType);goog.exportProperty(ol.geom.MultiPoint.prototype,"intersectsExtent",ol.geom.MultiPoint.prototype.intersectsExtent);goog.exportProperty(ol.geom.MultiPoint.prototype,"setCoordinates",ol.geom.MultiPoint.prototype.setCoordinates);goog.exportSymbol("ol.geom.MultiPolygon",ol.geom.MultiPolygon,OPENLAYERS);goog.exportProperty(ol.geom.MultiPolygon.prototype,"appendPolygon",ol.geom.MultiPolygon.prototype.appendPolygon);goog.exportProperty(ol.geom.MultiPolygon.prototype,"clone",ol.geom.MultiPolygon.prototype.clone);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getArea",ol.geom.MultiPolygon.prototype.getArea);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getCoordinates",ol.geom.MultiPolygon.prototype.getCoordinates);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getInteriorPoints",ol.geom.MultiPolygon.prototype.getInteriorPoints);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getPolygon",ol.geom.MultiPolygon.prototype.getPolygon);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getPolygons",ol.geom.MultiPolygon.prototype.getPolygons);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getType",ol.geom.MultiPolygon.prototype.getType);goog.exportProperty(ol.geom.MultiPolygon.prototype,"intersectsExtent",ol.geom.MultiPolygon.prototype.intersectsExtent);goog.exportProperty(ol.geom.MultiPolygon.prototype,"setCoordinates",ol.geom.MultiPolygon.prototype.setCoordinates);goog.exportSymbol("ol.geom.Point",ol.geom.Point,OPENLAYERS);goog.exportProperty(ol.geom.Point.prototype,"clone",ol.geom.Point.prototype.clone);goog.exportProperty(ol.geom.Point.prototype,"getCoordinates",ol.geom.Point.prototype.getCoordinates);goog.exportProperty(ol.geom.Point.prototype,"getType",ol.geom.Point.prototype.getType);goog.exportProperty(ol.geom.Point.prototype,"intersectsExtent",ol.geom.Point.prototype.intersectsExtent);goog.exportProperty(ol.geom.Point.prototype,"setCoordinates",ol.geom.Point.prototype.setCoordinates);goog.exportSymbol("ol.geom.Polygon",ol.geom.Polygon,OPENLAYERS);goog.exportProperty(ol.geom.Polygon.prototype,"appendLinearRing",ol.geom.Polygon.prototype.appendLinearRing);goog.exportProperty(ol.geom.Polygon.prototype,"clone",ol.geom.Polygon.prototype.clone);goog.exportProperty(ol.geom.Polygon.prototype,"getArea",ol.geom.Polygon.prototype.getArea);goog.exportProperty(ol.geom.Polygon.prototype,"getCoordinates",ol.geom.Polygon.prototype.getCoordinates);goog.exportProperty(ol.geom.Polygon.prototype,"getInteriorPoint",ol.geom.Polygon.prototype.getInteriorPoint);goog.exportProperty(ol.geom.Polygon.prototype,"getLinearRingCount",ol.geom.Polygon.prototype.getLinearRingCount);goog.exportProperty(ol.geom.Polygon.prototype,"getLinearRing",ol.geom.Polygon.prototype.getLinearRing);goog.exportProperty(ol.geom.Polygon.prototype,"getLinearRings",ol.geom.Polygon.prototype.getLinearRings);goog.exportProperty(ol.geom.Polygon.prototype,"getType",ol.geom.Polygon.prototype.getType);goog.exportProperty(ol.geom.Polygon.prototype,"intersectsExtent",ol.geom.Polygon.prototype.intersectsExtent);goog.exportProperty(ol.geom.Polygon.prototype,"setCoordinates",ol.geom.Polygon.prototype.setCoordinates);goog.exportSymbol("ol.geom.Polygon.circular",ol.geom.Polygon.circular,OPENLAYERS);goog.exportSymbol("ol.geom.Polygon.fromExtent",ol.geom.Polygon.fromExtent,OPENLAYERS);goog.exportSymbol("ol.geom.Polygon.fromCircle",ol.geom.Polygon.fromCircle,OPENLAYERS);goog.exportSymbol("ol.geom.SimpleGeometry",ol.geom.SimpleGeometry,OPENLAYERS);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getFirstCoordinate",ol.geom.SimpleGeometry.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getLastCoordinate",ol.geom.SimpleGeometry.prototype.getLastCoordinate);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getLayout",ol.geom.SimpleGeometry.prototype.getLayout);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"applyTransform",ol.geom.SimpleGeometry.prototype.applyTransform);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"translate",ol.geom.SimpleGeometry.prototype.translate);goog.exportSymbol("ol.Graticule",ol.Graticule,OPENLAYERS);goog.exportProperty(ol.Graticule.prototype,"getMap",ol.Graticule.prototype.getMap);goog.exportProperty(ol.Graticule.prototype,"getMeridians",ol.Graticule.prototype.getMeridians);goog.exportProperty(ol.Graticule.prototype,"getParallels",ol.Graticule.prototype.getParallels);goog.exportProperty(ol.Graticule.prototype,"setMap",ol.Graticule.prototype.setMap);goog.exportSymbol("ol.has.DEVICE_PIXEL_RATIO",ol.has.DEVICE_PIXEL_RATIO,OPENLAYERS);goog.exportSymbol("ol.has.CANVAS",ol.has.CANVAS,OPENLAYERS);goog.exportSymbol("ol.has.DEVICE_ORIENTATION",ol.has.DEVICE_ORIENTATION,OPENLAYERS);goog.exportSymbol("ol.has.GEOLOCATION",ol.has.GEOLOCATION,OPENLAYERS);goog.exportSymbol("ol.has.TOUCH",ol.has.TOUCH,OPENLAYERS);goog.exportSymbol("ol.has.WEBGL",ol.has.WEBGL,OPENLAYERS);goog.exportProperty(ol.Image.prototype,"getImage",ol.Image.prototype.getImage);goog.exportProperty(ol.ImageTile.prototype,"getImage",ol.ImageTile.prototype.getImage);goog.exportSymbol("ol.interaction.DoubleClickZoom",ol.interaction.DoubleClickZoom,OPENLAYERS);goog.exportSymbol("ol.interaction.DoubleClickZoom.handleEvent",ol.interaction.DoubleClickZoom.handleEvent,OPENLAYERS);goog.exportSymbol("ol.interaction.DragAndDrop",ol.interaction.DragAndDrop,OPENLAYERS);goog.exportSymbol("ol.interaction.DragAndDrop.handleEvent",ol.interaction.DragAndDrop.handleEvent,OPENLAYERS);goog.exportProperty(ol.interaction.DragAndDropEvent.prototype,"features",ol.interaction.DragAndDropEvent.prototype.features);goog.exportProperty(ol.interaction.DragAndDropEvent.prototype,"file",ol.interaction.DragAndDropEvent.prototype.file);goog.exportProperty(ol.interaction.DragAndDropEvent.prototype,"projection",ol.interaction.DragAndDropEvent.prototype.projection);goog.exportProperty(ol.DragBoxEvent.prototype,"coordinate",ol.DragBoxEvent.prototype.coordinate);goog.exportProperty(ol.DragBoxEvent.prototype,"mapBrowserEvent",ol.DragBoxEvent.prototype.mapBrowserEvent);goog.exportSymbol("ol.interaction.DragBox",ol.interaction.DragBox,OPENLAYERS);goog.exportProperty(ol.interaction.DragBox.prototype,"getGeometry",ol.interaction.DragBox.prototype.getGeometry)
;goog.exportSymbol("ol.interaction.DragPan",ol.interaction.DragPan,OPENLAYERS);goog.exportSymbol("ol.interaction.DragRotateAndZoom",ol.interaction.DragRotateAndZoom,OPENLAYERS);goog.exportSymbol("ol.interaction.DragRotate",ol.interaction.DragRotate,OPENLAYERS);goog.exportSymbol("ol.interaction.DragZoom",ol.interaction.DragZoom,OPENLAYERS);goog.exportProperty(ol.interaction.DrawEvent.prototype,"feature",ol.interaction.DrawEvent.prototype.feature);goog.exportSymbol("ol.interaction.Draw",ol.interaction.Draw,OPENLAYERS);goog.exportSymbol("ol.interaction.Draw.handleEvent",ol.interaction.Draw.handleEvent,OPENLAYERS);goog.exportProperty(ol.interaction.Draw.prototype,"removeLastPoint",ol.interaction.Draw.prototype.removeLastPoint);goog.exportProperty(ol.interaction.Draw.prototype,"finishDrawing",ol.interaction.Draw.prototype.finishDrawing);goog.exportProperty(ol.interaction.Draw.prototype,"extend",ol.interaction.Draw.prototype.extend);goog.exportSymbol("ol.interaction.Draw.createRegularPolygon",ol.interaction.Draw.createRegularPolygon,OPENLAYERS);goog.exportSymbol("ol.interaction.Interaction",ol.interaction.Interaction,OPENLAYERS);goog.exportProperty(ol.interaction.Interaction.prototype,"getActive",ol.interaction.Interaction.prototype.getActive);goog.exportProperty(ol.interaction.Interaction.prototype,"getMap",ol.interaction.Interaction.prototype.getMap);goog.exportProperty(ol.interaction.Interaction.prototype,"setActive",ol.interaction.Interaction.prototype.setActive);goog.exportSymbol("ol.interaction.defaults",ol.interaction.defaults,OPENLAYERS);goog.exportSymbol("ol.interaction.KeyboardPan",ol.interaction.KeyboardPan,OPENLAYERS);goog.exportSymbol("ol.interaction.KeyboardPan.handleEvent",ol.interaction.KeyboardPan.handleEvent,OPENLAYERS);goog.exportSymbol("ol.interaction.KeyboardZoom",ol.interaction.KeyboardZoom,OPENLAYERS);goog.exportSymbol("ol.interaction.KeyboardZoom.handleEvent",ol.interaction.KeyboardZoom.handleEvent,OPENLAYERS);goog.exportProperty(ol.interaction.ModifyEvent.prototype,"features",ol.interaction.ModifyEvent.prototype.features);goog.exportProperty(ol.interaction.ModifyEvent.prototype,"mapBrowserPointerEvent",ol.interaction.ModifyEvent.prototype.mapBrowserPointerEvent);goog.exportSymbol("ol.interaction.Modify",ol.interaction.Modify,OPENLAYERS);goog.exportSymbol("ol.interaction.Modify.handleEvent",ol.interaction.Modify.handleEvent,OPENLAYERS);goog.exportSymbol("ol.interaction.MouseWheelZoom",ol.interaction.MouseWheelZoom,OPENLAYERS);goog.exportSymbol("ol.interaction.MouseWheelZoom.handleEvent",ol.interaction.MouseWheelZoom.handleEvent,OPENLAYERS);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"setMouseAnchor",ol.interaction.MouseWheelZoom.prototype.setMouseAnchor);goog.exportSymbol("ol.interaction.PinchRotate",ol.interaction.PinchRotate,OPENLAYERS);goog.exportSymbol("ol.interaction.PinchZoom",ol.interaction.PinchZoom,OPENLAYERS);goog.exportSymbol("ol.interaction.Pointer",ol.interaction.Pointer,OPENLAYERS);goog.exportSymbol("ol.interaction.Pointer.handleEvent",ol.interaction.Pointer.handleEvent,OPENLAYERS);goog.exportProperty(ol.interaction.SelectEvent.prototype,"selected",ol.interaction.SelectEvent.prototype.selected);goog.exportProperty(ol.interaction.SelectEvent.prototype,"deselected",ol.interaction.SelectEvent.prototype.deselected);goog.exportProperty(ol.interaction.SelectEvent.prototype,"mapBrowserEvent",ol.interaction.SelectEvent.prototype.mapBrowserEvent);goog.exportSymbol("ol.interaction.Select",ol.interaction.Select,OPENLAYERS);goog.exportProperty(ol.interaction.Select.prototype,"getFeatures",ol.interaction.Select.prototype.getFeatures);goog.exportProperty(ol.interaction.Select.prototype,"getLayer",ol.interaction.Select.prototype.getLayer);goog.exportSymbol("ol.interaction.Select.handleEvent",ol.interaction.Select.handleEvent,OPENLAYERS);goog.exportProperty(ol.interaction.Select.prototype,"setMap",ol.interaction.Select.prototype.setMap);goog.exportSymbol("ol.interaction.Snap",ol.interaction.Snap,OPENLAYERS);goog.exportProperty(ol.interaction.Snap.prototype,"addFeature",ol.interaction.Snap.prototype.addFeature);goog.exportProperty(ol.interaction.Snap.prototype,"removeFeature",ol.interaction.Snap.prototype.removeFeature);goog.exportProperty(ol.interaction.TranslateEvent.prototype,"features",ol.interaction.TranslateEvent.prototype.features);goog.exportProperty(ol.interaction.TranslateEvent.prototype,"coordinate",ol.interaction.TranslateEvent.prototype.coordinate);goog.exportSymbol("ol.interaction.Translate",ol.interaction.Translate,OPENLAYERS);goog.exportSymbol("ol.Kinetic",ol.Kinetic,OPENLAYERS);goog.exportSymbol("ol.layer.Heatmap",ol.layer.Heatmap,OPENLAYERS);goog.exportProperty(ol.layer.Heatmap.prototype,"getBlur",ol.layer.Heatmap.prototype.getBlur);goog.exportProperty(ol.layer.Heatmap.prototype,"getGradient",ol.layer.Heatmap.prototype.getGradient);goog.exportProperty(ol.layer.Heatmap.prototype,"getRadius",ol.layer.Heatmap.prototype.getRadius);goog.exportProperty(ol.layer.Heatmap.prototype,"setBlur",ol.layer.Heatmap.prototype.setBlur);goog.exportProperty(ol.layer.Heatmap.prototype,"setGradient",ol.layer.Heatmap.prototype.setGradient);goog.exportProperty(ol.layer.Heatmap.prototype,"setRadius",ol.layer.Heatmap.prototype.setRadius);goog.exportSymbol("ol.layer.Image",ol.layer.Image,OPENLAYERS);goog.exportProperty(ol.layer.Image.prototype,"getSource",ol.layer.Image.prototype.getSource);goog.exportSymbol("ol.layer.Layer",ol.layer.Layer,OPENLAYERS);goog.exportProperty(ol.layer.Layer.prototype,"getSource",ol.layer.Layer.prototype.getSource);goog.exportProperty(ol.layer.Layer.prototype,"setMap",ol.layer.Layer.prototype.setMap);goog.exportProperty(ol.layer.Layer.prototype,"setSource",ol.layer.Layer.prototype.setSource);goog.exportSymbol("ol.layer.Base",ol.layer.Base,OPENLAYERS);goog.exportProperty(ol.layer.Base.prototype,"getExtent",ol.layer.Base.prototype.getExtent);goog.exportProperty(ol.layer.Base.prototype,"getMaxResolution",ol.layer.Base.prototype.getMaxResolution);goog.exportProperty(ol.layer.Base.prototype,"getMinResolution",ol.layer.Base.prototype.getMinResolution);goog.exportProperty(ol.layer.Base.prototype,"getOpacity",ol.layer.Base.prototype.getOpacity);goog.exportProperty(ol.layer.Base.prototype,"getVisible",ol.layer.Base.prototype.getVisible);goog.exportProperty(ol.layer.Base.prototype,"getZIndex",ol.layer.Base.prototype.getZIndex);goog.exportProperty(ol.layer.Base.prototype,"setExtent",ol.layer.Base.prototype.setExtent);goog.exportProperty(ol.layer.Base.prototype,"setMaxResolution",ol.layer.Base.prototype.setMaxResolution);goog.exportProperty(ol.layer.Base.prototype,"setMinResolution",ol.layer.Base.prototype.setMinResolution);goog.exportProperty(ol.layer.Base.prototype,"setOpacity",ol.layer.Base.prototype.setOpacity);goog.exportProperty(ol.layer.Base.prototype,"setVisible",ol.layer.Base.prototype.setVisible);goog.exportProperty(ol.layer.Base.prototype,"setZIndex",ol.layer.Base.prototype.setZIndex);goog.exportSymbol("ol.layer.Group",ol.layer.Group,OPENLAYERS);goog.exportProperty(ol.layer.Group.prototype,"getLayers",ol.layer.Group.prototype.getLayers);goog.exportProperty(ol.layer.Group.prototype,"setLayers",ol.layer.Group.prototype.setLayers);goog.exportSymbol("ol.layer.Tile",ol.layer.Tile,OPENLAYERS);goog.exportProperty(ol.layer.Tile.prototype,"getPreload",ol.layer.Tile.prototype.getPreload);goog.exportProperty(ol.layer.Tile.prototype,"getSource",ol.layer.Tile.prototype.getSource);goog.exportProperty(ol.layer.Tile.prototype,"setPreload",ol.layer.Tile.prototype.setPreload);goog.exportProperty(ol.layer.Tile.prototype,"getUseInterimTilesOnError",ol.layer.Tile.prototype.getUseInterimTilesOnError);goog.exportProperty(ol.layer.Tile.prototype,"setUseInterimTilesOnError",ol.layer.Tile.prototype.setUseInterimTilesOnError);goog.exportSymbol("ol.layer.Vector",ol.layer.Vector,OPENLAYERS);goog.exportProperty(ol.layer.Vector.prototype,"getSource",ol.layer.Vector.prototype.getSource);goog.exportProperty(ol.layer.Vector.prototype,"getStyle",ol.layer.Vector.prototype.getStyle);goog.exportProperty(ol.layer.Vector.prototype,"getStyleFunction",ol.layer.Vector.prototype.getStyleFunction);goog.exportProperty(ol.layer.Vector.prototype,"setStyle",ol.layer.Vector.prototype.setStyle);goog.exportSymbol("ol.layer.VectorTile",ol.layer.VectorTile,OPENLAYERS);goog.exportProperty(ol.layer.VectorTile.prototype,"getPreload",ol.layer.VectorTile.prototype.getPreload);goog.exportProperty(ol.layer.VectorTile.prototype,"getUseInterimTilesOnError",ol.layer.VectorTile.prototype.getUseInterimTilesOnError);goog.exportProperty(ol.layer.VectorTile.prototype,"setPreload",ol.layer.VectorTile.prototype.setPreload);goog.exportProperty(ol.layer.VectorTile.prototype,"setUseInterimTilesOnError",ol.layer.VectorTile.prototype.setUseInterimTilesOnError);goog.exportSymbol("ol.loadingstrategy.all",ol.loadingstrategy.all,OPENLAYERS);goog.exportSymbol("ol.loadingstrategy.bbox",ol.loadingstrategy.bbox,OPENLAYERS);goog.exportSymbol("ol.loadingstrategy.tile",ol.loadingstrategy.tile,OPENLAYERS);goog.exportSymbol("ol.Map",ol.Map,OPENLAYERS);goog.exportProperty(ol.Map.prototype,"addControl",ol.Map.prototype.addControl);goog.exportProperty(ol.Map.prototype,"addInteraction",ol.Map.prototype.addInteraction);goog.exportProperty(ol.Map.prototype,"addLayer",ol.Map.prototype.addLayer);goog.exportProperty(ol.Map.prototype,"addOverlay",ol.Map.prototype.addOverlay);goog.exportProperty(ol.Map.prototype,"beforeRender",ol.Map.prototype.beforeRender);goog.exportProperty(ol.Map.prototype,"forEachFeatureAtPixel",ol.Map.prototype.forEachFeatureAtPixel);goog.exportProperty(ol.Map.prototype,"forEachLayerAtPixel",ol.Map.prototype.forEachLayerAtPixel);goog.exportProperty(ol.Map.prototype,"hasFeatureAtPixel",ol.Map.prototype.hasFeatureAtPixel);goog.exportProperty(ol.Map.prototype,"getEventCoordinate",ol.Map.prototype.getEventCoordinate);goog.exportProperty(ol.Map.prototype,"getEventPixel",ol.Map.prototype.getEventPixel);goog.exportProperty(ol.Map.prototype,"getTarget",ol.Map.prototype.getTarget);goog.exportProperty(ol.Map.prototype,"getTargetElement",ol.Map.prototype.getTargetElement);goog.exportProperty(ol.Map.prototype,"getCoordinateFromPixel",ol.Map.prototype.getCoordinateFromPixel);goog.exportProperty(ol.Map.prototype,"getControls",ol.Map.prototype.getControls);goog.exportProperty(ol.Map.prototype,"getOverlays",ol.Map.prototype.getOverlays);goog.exportProperty(ol.Map.prototype,"getOverlayById",ol.Map.prototype.getOverlayById);goog.exportProperty(ol.Map.prototype,"getInteractions",ol.Map.prototype.getInteractions);goog.exportProperty(ol.Map.prototype,"getLayerGroup",ol.Map.prototype.getLayerGroup);goog.exportProperty(ol.Map.prototype,"getLayers",ol.Map.prototype.getLayers);goog.exportProperty(ol.Map.prototype,"getPixelFromCoordinate",ol.Map.prototype.getPixelFromCoordinate);goog.exportProperty(ol.Map.prototype,"getSize",ol.Map.prototype.getSize);goog.exportProperty(ol.Map.prototype,"getView",ol.Map.prototype.getView);goog.exportProperty(ol.Map.prototype,"getViewport",ol.Map.prototype.getViewport);goog.exportProperty(ol.Map.prototype,"renderSync",ol.Map.prototype.renderSync);goog.exportProperty(ol.Map.prototype,"render",ol.Map.prototype.render);goog.exportProperty(ol.Map.prototype,"removeControl",ol.Map.prototype.removeControl);goog.exportProperty(ol.Map.prototype,"removeInteraction",ol.Map.prototype.removeInteraction);goog.exportProperty(ol.Map.prototype,"removeLayer",ol.Map.prototype.removeLayer);goog.exportProperty(ol.Map.prototype,"removeOverlay",ol.Map.prototype.removeOverlay);goog.exportProperty(ol.Map.prototype,"setLayerGroup",ol.Map.prototype.setLayerGroup);goog.exportProperty(ol.Map.prototype,"setSize",ol.Map.prototype.setSize);goog.exportProperty(ol.Map.prototype,"setTarget",ol.Map.prototype.setTarget);goog.exportProperty(ol.Map.prototype,"setView",ol.Map.prototype.setView);goog.exportProperty(ol.Map.prototype,"updateSize",ol.Map.prototype.updateSize);goog.exportProperty(ol.MapBrowserEvent.prototype,"originalEvent",ol.MapBrowserEvent.prototype.originalEvent);goog.exportProperty(ol.MapBrowserEvent.prototype,"pixel",ol.MapBrowserEvent.prototype.pixel);goog.exportProperty(ol.MapBrowserEvent.prototype,"coordinate",ol.MapBrowserEvent.prototype.coordinate);goog.exportProperty(ol.MapBrowserEvent.prototype,"dragging",ol.MapBrowserEvent.prototype.dragging);goog.exportProperty(ol.MapBrowserEvent.prototype,"preventDefault",ol.MapBrowserEvent.prototype.preventDefault);goog.exportProperty(ol.MapBrowserEvent.prototype,"stopPropagation",ol.MapBrowserEvent.prototype.stopPropagation);goog.exportProperty(ol.MapEvent.prototype,"map",ol.MapEvent.prototype.map);goog.exportProperty(ol.MapEvent.prototype,"frameState",ol.MapEvent.prototype.frameState);goog.exportProperty(ol.ObjectEvent.prototype,"key",ol.ObjectEvent.prototype.key);goog.exportProperty(ol.ObjectEvent.prototype,"oldValue",ol.ObjectEvent.prototype.oldValue);goog.exportSymbol("ol.Object",ol.Object,OPENLAYERS);goog.exportProperty(ol.Object.prototype,"get",ol.Object.prototype.get);goog.exportProperty(ol.Object.prototype,"getKeys",ol.Object.prototype.getKeys);goog.exportProperty(ol.Object.prototype,"getProperties",ol.Object.prototype.getProperties);goog.exportProperty(ol.Object.prototype,"set",ol.Object.prototype.set);goog.exportProperty(ol.Object.prototype,"setProperties",ol.Object.prototype.setProperties);goog.exportProperty(ol.Object.prototype,"unset",ol.Object.prototype.unset);goog.exportSymbol("ol.Observable",ol.Observable,OPENLAYERS);goog.exportSymbol("ol.Observable.unByKey",ol.Observable.unByKey,OPENLAYERS);goog.exportProperty(ol.Observable.prototype,"changed",ol.Observable.prototype.changed);goog.exportProperty(ol.Observable.prototype,"dispatchEvent",ol.Observable.prototype.dispatchEvent);goog.exportProperty(ol.Observable.prototype,"getRevision",ol.Observable.prototype.getRevision);goog.exportProperty(ol.Observable.prototype,"on",ol.Observable.prototype.on);goog.exportProperty(ol.Observable.prototype,"once",ol.Observable.prototype.once);goog.exportProperty(ol.Observable.prototype,"un",ol.Observable.prototype.un);goog.exportProperty(ol.Observable.prototype,"unByKey",ol.Observable.prototype.unByKey);goog.exportSymbol("ol.inherits",ol.inherits,OPENLAYERS);goog.exportSymbol("ol.Overlay",ol.Overlay,OPENLAYERS);goog.exportProperty(ol.Overlay.prototype,"getElement",ol.Overlay.prototype.getElement);goog.exportProperty(ol.Overlay.prototype,"getId",ol.Overlay.prototype.getId);goog.exportProperty(ol.Overlay.prototype,"getMap",ol.Overlay.prototype.getMap);goog.exportProperty(ol.Overlay.prototype,"getOffset",ol.Overlay.prototype.getOffset);goog.exportProperty(ol.Overlay.prototype,"getPosition",ol.Overlay.prototype.getPosition);goog.exportProperty(ol.Overlay.prototype,"getPositioning",ol.Overlay.prototype.getPositioning);goog.exportProperty(ol.Overlay.prototype,"setElement",ol.Overlay.prototype.setElement);goog.exportProperty(ol.Overlay.prototype,"setMap",ol.Overlay.prototype.setMap);goog.exportProperty(ol.Overlay.prototype,"setOffset",ol.Overlay.prototype.setOffset);goog.exportProperty(ol.Overlay.prototype,"setPosition",ol.Overlay.prototype.setPosition);goog.exportProperty(ol.Overlay.prototype,"setPositioning",ol.Overlay.prototype.setPositioning);goog.exportSymbol("ol.proj.common.add",ol.proj.common.add,OPENLAYERS);goog.exportSymbol("ol.proj.METERS_PER_UNIT",ol.proj.METERS_PER_UNIT,OPENLAYERS);goog.exportSymbol("ol.proj.Projection",ol.proj.Projection,OPENLAYERS);goog.exportProperty(ol.proj.Projection.prototype,"getCode",ol.proj.Projection.prototype.getCode);goog.exportProperty(ol.proj.Projection.prototype,"getExtent",ol.proj.Projection.prototype.getExtent);goog.exportProperty(ol.proj.Projection.prototype,"getUnits",ol.proj.Projection.prototype.getUnits);goog.exportProperty(ol.proj.Projection.prototype,"getMetersPerUnit",ol.proj.Projection.prototype.getMetersPerUnit);goog.exportProperty(ol.proj.Projection.prototype,"getWorldExtent",ol.proj.Projection.prototype.getWorldExtent);goog.exportProperty(ol.proj.Projection.prototype,"isGlobal",ol.proj.Projection.prototype.isGlobal);goog.exportProperty(ol.proj.Projection.prototype,"setGlobal",ol.proj.Projection.prototype.setGlobal);goog.exportProperty(ol.proj.Projection.prototype,"setExtent",ol.proj.Projection.prototype.setExtent);goog.exportProperty(ol.proj.Projection.prototype,"setWorldExtent",ol.proj.Projection.prototype.setWorldExtent);goog.exportProperty(ol.proj.Projection.prototype,"setGetPointResolution",ol.proj.Projection.prototype.setGetPointResolution);goog.exportProperty(ol.proj.Projection.prototype,"getPointResolution",ol.proj.Projection.prototype.getPointResolution);goog.exportSymbol("ol.proj.setProj4",ol.proj.setProj4,OPENLAYERS);goog.exportSymbol("ol.proj.addEquivalentProjections",ol.proj.addEquivalentProjections,OPENLAYERS);goog.exportSymbol("ol.proj.addProjection",ol.proj.addProjection,OPENLAYERS);goog.exportSymbol("ol.proj.addCoordinateTransforms",ol.proj.addCoordinateTransforms,OPENLAYERS);goog.exportSymbol("ol.proj.fromLonLat",ol.proj.fromLonLat,OPENLAYERS);goog.exportSymbol("ol.proj.toLonLat",ol.proj.toLonLat,OPENLAYERS);goog.exportSymbol("ol.proj.get",ol.proj.get,OPENLAYERS);goog.exportSymbol("ol.proj.equivalent",ol.proj.equivalent,OPENLAYERS);goog.exportSymbol("ol.proj.getTransform",ol.proj.getTransform,OPENLAYERS);goog.exportSymbol("ol.proj.transform",ol.proj.transform,OPENLAYERS);goog.exportSymbol("ol.proj.transformExtent",ol.proj.transformExtent,OPENLAYERS);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawAsync",ol.render.canvas.Immediate.prototype.drawAsync);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawCircleGeometry",ol.render.canvas.Immediate.prototype.drawCircleGeometry);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawFeature",ol.render.canvas.Immediate.prototype.drawFeature);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawPointGeometry",ol.render.canvas.Immediate.prototype.drawPointGeometry);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawMultiPointGeometry",ol.render.canvas.Immediate.prototype.drawMultiPointGeometry);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawLineStringGeometry",ol.render.canvas.Immediate.prototype.drawLineStringGeometry);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawMultiLineStringGeometry",ol.render.canvas.Immediate.prototype.drawMultiLineStringGeometry);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawPolygonGeometry",ol.render.canvas.Immediate.prototype.drawPolygonGeometry);goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawMultiPolygonGeometry",ol.render.canvas.Immediate.prototype.drawMultiPolygonGeometry);goog.exportProperty(ol.render.canvas.Immediate.prototype,"setFillStrokeStyle",ol.render.canvas.Immediate.prototype.setFillStrokeStyle);goog.exportProperty(ol.render.canvas.Immediate.prototype,"setImageStyle",ol.render.canvas.Immediate.prototype.setImageStyle);goog.exportProperty(ol.render.canvas.Immediate.prototype,"setTextStyle",ol.render.canvas.Immediate.prototype.setTextStyle);goog.exportProperty(ol.render.Event.prototype,"vectorContext",ol.render.Event.prototype.vectorContext);goog.exportProperty(ol.render.Event.prototype,"frameState",ol.render.Event.prototype.frameState);goog.exportProperty(ol.render.Event.prototype,"context",ol.render.Event.prototype.context);goog.exportProperty(ol.render.Event.prototype,"glContext",ol.render.Event.prototype.glContext);goog.exportProperty(ol.render.Feature.prototype,"get",ol.render.Feature.prototype.get);goog.exportProperty(ol.render.Feature.prototype,"getExtent",ol.render.Feature.prototype.getExtent);goog.exportProperty(ol.render.Feature.prototype,"getGeometry",ol.render.Feature.prototype.getGeometry);goog.exportProperty(ol.render.Feature.prototype,"getProperties",ol.render.Feature.prototype.getProperties);goog.exportProperty(ol.render.Feature.prototype,"getType",ol.render.Feature.prototype.getType);goog.exportSymbol("ol.render.VectorContext",ol.render.VectorContext,OPENLAYERS);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawAsync",ol.render.webgl.Immediate.prototype.drawAsync);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawCircleGeometry",ol.render.webgl.Immediate.prototype.drawCircleGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawFeature",ol.render.webgl.Immediate.prototype.drawFeature);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawGeometryCollectionGeometry",ol.render.webgl.Immediate.prototype.drawGeometryCollectionGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawPointGeometry",ol.render.webgl.Immediate.prototype.drawPointGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawLineStringGeometry",ol.render.webgl.Immediate.prototype.drawLineStringGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawMultiLineStringGeometry",ol.render.webgl.Immediate.prototype.drawMultiLineStringGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawMultiPointGeometry",ol.render.webgl.Immediate.prototype.drawMultiPointGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawMultiPolygonGeometry",ol.render.webgl.Immediate.prototype.drawMultiPolygonGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawPolygonGeometry",ol.render.webgl.Immediate.prototype.drawPolygonGeometry);goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawText",ol.render.webgl.Immediate.prototype.drawText);goog.exportProperty(ol.render.webgl.Immediate.prototype,"setFillStrokeStyle",ol.render.webgl.Immediate.prototype.setFillStrokeStyle);goog.exportProperty(ol.render.webgl.Immediate.prototype,"setImageStyle",ol.render.webgl.Immediate.prototype.setImageStyle);goog.exportProperty(ol.render.webgl.Immediate.prototype,"setTextStyle",ol.render.webgl.Immediate.prototype.setTextStyle);goog.exportSymbol("ol.render.toContext",ol.render.toContext,OPENLAYERS);goog.exportSymbol("ol.size.toSize",ol.size.toSize,OPENLAYERS);goog.exportSymbol("ol.source.BingMaps",ol.source.BingMaps,OPENLAYERS);goog.exportSymbol("ol.source.BingMaps.TOS_ATTRIBUTION",ol.source.BingMaps.TOS_ATTRIBUTION,OPENLAYERS);goog.exportSymbol("ol.source.Cluster",ol.source.Cluster,OPENLAYERS);goog.exportProperty(ol.source.Cluster.prototype,"getSource",ol.source.Cluster.prototype.getSource);goog.exportSymbol("ol.source.ImageCanvas",ol.source.ImageCanvas,OPENLAYERS);goog.exportSymbol("ol.source.ImageMapGuide",ol.source.ImageMapGuide,OPENLAYERS);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getParams",ol.source.ImageMapGuide.prototype.getParams);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getImageLoadFunction",ol.source.ImageMapGuide.prototype.getImageLoadFunction);goog.exportProperty(ol.source.ImageMapGuide.prototype,"updateParams",ol.source.ImageMapGuide.prototype.updateParams);goog.exportProperty(ol.source.ImageMapGuide.prototype,"setImageLoadFunction",ol.source.ImageMapGuide.prototype.setImageLoadFunction);goog.exportSymbol("ol.source.Image",ol.source.Image,OPENLAYERS);goog.exportProperty(ol.source.ImageEvent.prototype,"image",ol.source.ImageEvent.prototype.image);goog.exportSymbol("ol.source.ImageStatic",ol.source.ImageStatic,OPENLAYERS);goog.exportSymbol("ol.source.ImageVector",ol.source.ImageVector,OPENLAYERS);goog.exportProperty(ol.source.ImageVector.prototype,"getSource",ol.source.ImageVector.prototype.getSource);goog.exportProperty(ol.source.ImageVector.prototype,"getStyle",ol.source.ImageVector.prototype.getStyle);goog.exportProperty(ol.source.ImageVector.prototype,"getStyleFunction",ol.source.ImageVector.prototype.getStyleFunction);goog.exportProperty(ol.source.ImageVector.prototype,"setStyle",ol.source.ImageVector.prototype.setStyle);goog.exportSymbol("ol.source.ImageWMS",ol.source.ImageWMS,OPENLAYERS);goog.exportProperty(ol.source.ImageWMS.prototype,"getGetFeatureInfoUrl",ol.source.ImageWMS.prototype.getGetFeatureInfoUrl);goog.exportProperty(ol.source.ImageWMS.prototype,"getParams",ol.source.ImageWMS.prototype.getParams);goog.exportProperty(ol.source.ImageWMS.prototype,"getImageLoadFunction",ol.source.ImageWMS.prototype.getImageLoadFunction);goog.exportProperty(ol.source.ImageWMS.prototype,"getUrl",ol.source.ImageWMS.prototype.getUrl);goog.exportProperty(ol.source.ImageWMS.prototype,"setImageLoadFunction",ol.source.ImageWMS.prototype.setImageLoadFunction);goog.exportProperty(ol.source.ImageWMS.prototype,"setUrl",ol.source.ImageWMS.prototype.setUrl);goog.exportProperty(ol.source.ImageWMS.prototype,"updateParams",ol.source.ImageWMS.prototype.updateParams);goog.exportSymbol("ol.source.MapQuest",ol.source.MapQuest,OPENLAYERS);goog.exportProperty(ol.source.MapQuest.prototype,"getLayer",ol.source.MapQuest.prototype.getLayer);goog.exportSymbol("ol.source.OSM",ol.source.OSM,OPENLAYERS);goog.exportSymbol("ol.source.OSM.ATTRIBUTION",ol.source.OSM.ATTRIBUTION,OPENLAYERS);goog.exportSymbol("ol.source.Raster",ol.source.Raster,OPENLAYERS);goog.exportProperty(ol.source.Raster.prototype,"setOperation",ol.source.Raster.prototype.setOperation);goog.exportProperty(ol.source.RasterEvent.prototype,"extent",ol.source.RasterEvent.prototype.extent);goog.exportProperty(ol.source.RasterEvent.prototype,"resolution",ol.source.RasterEvent.prototype.resolution);goog.exportProperty(ol.source.RasterEvent.prototype,"data",ol.source.RasterEvent.prototype.data);goog.exportSymbol("ol.source.Source",ol.source.Source,OPENLAYERS);goog.exportProperty(ol.source.Source.prototype,"getAttributions",ol.source.Source.prototype.getAttributions);goog.exportProperty(ol.source.Source.prototype,"getLogo",ol.source.Source.prototype.getLogo);goog.exportProperty(ol.source.Source.prototype,"getProjection",ol.source.Source.prototype.getProjection);goog.exportProperty(ol.source.Source.prototype,"getState",ol.source.Source.prototype.getState);goog.exportProperty(ol.source.Source.prototype,"refresh",ol.source.Source.prototype.refresh);goog.exportProperty(ol.source.Source.prototype,"setAttributions",ol.source.Source.prototype.setAttributions);goog.exportSymbol("ol.source.Stamen",ol.source.Stamen,OPENLAYERS);goog.exportSymbol("ol.source.TileArcGISRest",ol.source.TileArcGISRest,OPENLAYERS);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getParams",ol.source.TileArcGISRest.prototype.getParams);goog.exportProperty(ol.source.TileArcGISRest.prototype,"updateParams",ol.source.TileArcGISRest.prototype.updateParams);goog.exportSymbol("ol.source.TileDebug",ol.source.TileDebug,OPENLAYERS);goog.exportSymbol("ol.source.TileImage",ol.source.TileImage,OPENLAYERS);goog.exportProperty(ol.source.TileImage.prototype,"setRenderReprojectionEdges",ol.source.TileImage.prototype.setRenderReprojectionEdges);goog.exportProperty(ol.source.TileImage.prototype,"setTileGridForProjection",ol.source.TileImage.prototype.setTileGridForProjection);goog.exportSymbol("ol.source.TileJSON",ol.source.TileJSON,OPENLAYERS);goog.exportSymbol("ol.source.Tile",ol.source.Tile,OPENLAYERS);goog.exportProperty(ol.source.Tile.prototype,"getTileGrid",ol.source.Tile.prototype.getTileGrid);goog.exportProperty(ol.source.TileEvent.prototype,"tile",ol.source.TileEvent.prototype.tile);goog.exportSymbol("ol.source.TileUTFGrid",ol.source.TileUTFGrid,OPENLAYERS);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getTemplate",ol.source.TileUTFGrid.prototype.getTemplate);goog.exportProperty(ol.source.TileUTFGrid.prototype,"forDataAtCoordinateAndResolution",ol.source.TileUTFGrid.prototype.forDataAtCoordinateAndResolution);goog.exportSymbol("ol.source.TileWMS",ol.source.TileWMS,OPENLAYERS);goog.exportProperty(ol.source.TileWMS.prototype,"getGetFeatureInfoUrl",ol.source.TileWMS.prototype.getGetFeatureInfoUrl);goog.exportProperty(ol.source.TileWMS.prototype,"getParams",ol.source.TileWMS.prototype.getParams);goog.exportProperty(ol.source.TileWMS.prototype,"updateParams",ol.source.TileWMS.prototype.updateParams);goog.exportProperty(ol.source.UrlTile.prototype,"getTileLoadFunction",ol.source.UrlTile.prototype.getTileLoadFunction);goog.exportProperty(ol.source.UrlTile.prototype,"getTileUrlFunction",ol.source.UrlTile.prototype.getTileUrlFunction);goog.exportProperty(ol.source.UrlTile.prototype,"getUrls",ol.source.UrlTile.prototype.getUrls);goog.exportProperty(ol.source.UrlTile.prototype,"setTileLoadFunction",ol.source.UrlTile.prototype.setTileLoadFunction);goog.exportProperty(ol.source.UrlTile.prototype,"setTileUrlFunction",ol.source.UrlTile.prototype.setTileUrlFunction);goog.exportProperty(ol.source.UrlTile.prototype,"setUrl",ol.source.UrlTile.prototype.setUrl);goog.exportProperty(ol.source.UrlTile.prototype,"setUrls",ol.source.UrlTile.prototype.setUrls);goog.exportSymbol("ol.source.Vector",ol.source.Vector,OPENLAYERS);goog.exportProperty(ol.source.Vector.prototype,"addFeature",ol.source.Vector.prototype.addFeature);goog.exportProperty(ol.source.Vector.prototype,"addFeatures",ol.source.Vector.prototype.addFeatures);goog.exportProperty(ol.source.Vector.prototype,"clear",ol.source.Vector.prototype.clear);goog.exportProperty(ol.source.Vector.prototype,"forEachFeature",ol.source.Vector.prototype.forEachFeature);goog.exportProperty(ol.source.Vector.prototype,"forEachFeatureInExtent",ol.source.Vector.prototype.forEachFeatureInExtent);goog.exportProperty(ol.source.Vector.prototype,"forEachFeatureIntersectingExtent",ol.source.Vector.prototype.forEachFeatureIntersectingExtent);goog.exportProperty(ol.source.Vector.prototype,"getFeaturesCollection",ol.source.Vector.prototype.getFeaturesCollection);goog.exportProperty(ol.source.Vector.prototype,"getFeatures",ol.source.Vector.prototype.getFeatures);goog.exportProperty(ol.source.Vector.prototype,"getFeaturesAtCoordinate",ol.source.Vector.prototype.getFeaturesAtCoordinate);goog.exportProperty(ol.source.Vector.prototype,"getFeaturesInExtent",ol.source.Vector.prototype.getFeaturesInExtent);goog.exportProperty(ol.source.Vector.prototype,"getClosestFeatureToCoordinate",ol.source.Vector.prototype.getClosestFeatureToCoordinate);goog.exportProperty(ol.source.Vector.prototype,"getExtent",ol.source.Vector.prototype.getExtent);goog.exportProperty(ol.source.Vector.prototype,"getFeatureById",ol.source.Vector.prototype.getFeatureById);goog.exportProperty(ol.source.Vector.prototype,"removeFeature",ol.source.Vector.prototype.removeFeature);goog.exportProperty(ol.source.VectorEvent.prototype,"feature",ol.source.VectorEvent.prototype.feature);goog.exportSymbol("ol.source.VectorTile",ol.source.VectorTile,OPENLAYERS);goog.exportSymbol("ol.source.WMTS",ol.source.WMTS,OPENLAYERS);goog.exportProperty(ol.source.WMTS.prototype,"getDimensions",ol.source.WMTS.prototype.getDimensions);goog.exportProperty(ol.source.WMTS.prototype,"getFormat",ol.source.WMTS.prototype.getFormat);goog.exportProperty(ol.source.WMTS.prototype,"getLayer",ol.source.WMTS.prototype.getLayer);goog.exportProperty(ol.source.WMTS.prototype,"getMatrixSet",ol.source.WMTS.prototype.getMatrixSet);goog.exportProperty(ol.source.WMTS.prototype,"getRequestEncoding",ol.source.WMTS.prototype.getRequestEncoding);goog.exportProperty(ol.source.WMTS.prototype,"getStyle",ol.source.WMTS.prototype.getStyle);goog.exportProperty(ol.source.WMTS.prototype,"getVersion",ol.source.WMTS.prototype.getVersion);goog.exportProperty(ol.source.WMTS.prototype,"updateDimensions",ol.source.WMTS.prototype.updateDimensions);goog.exportSymbol("ol.source.WMTS.optionsFromCapabilities",ol.source.WMTS.optionsFromCapabilities,OPENLAYERS);goog.exportSymbol("ol.source.XYZ",ol.source.XYZ,OPENLAYERS);goog.exportSymbol("ol.source.Zoomify",ol.source.Zoomify,OPENLAYERS);goog.exportSymbol("ol.Sphere",ol.Sphere,OPENLAYERS);goog.exportProperty(ol.Sphere.prototype,"geodesicArea",ol.Sphere.prototype.geodesicArea);goog.exportProperty(ol.Sphere.prototype,"haversineDistance",ol.Sphere.prototype.haversineDistance);goog.exportSymbol("ol.style.AtlasManager",ol.style.AtlasManager,OPENLAYERS);goog.exportSymbol("ol.style.Circle",ol.style.Circle,OPENLAYERS)
;goog.exportProperty(ol.style.Circle.prototype,"getFill",ol.style.Circle.prototype.getFill);goog.exportProperty(ol.style.Circle.prototype,"getImage",ol.style.Circle.prototype.getImage);goog.exportProperty(ol.style.Circle.prototype,"getRadius",ol.style.Circle.prototype.getRadius);goog.exportProperty(ol.style.Circle.prototype,"getStroke",ol.style.Circle.prototype.getStroke);goog.exportSymbol("ol.style.Fill",ol.style.Fill,OPENLAYERS);goog.exportProperty(ol.style.Fill.prototype,"getColor",ol.style.Fill.prototype.getColor);goog.exportProperty(ol.style.Fill.prototype,"setColor",ol.style.Fill.prototype.setColor);goog.exportSymbol("ol.style.Icon",ol.style.Icon,OPENLAYERS);goog.exportProperty(ol.style.Icon.prototype,"getAnchor",ol.style.Icon.prototype.getAnchor);goog.exportProperty(ol.style.Icon.prototype,"getImage",ol.style.Icon.prototype.getImage);goog.exportProperty(ol.style.Icon.prototype,"getOrigin",ol.style.Icon.prototype.getOrigin);goog.exportProperty(ol.style.Icon.prototype,"getSrc",ol.style.Icon.prototype.getSrc);goog.exportProperty(ol.style.Icon.prototype,"getSize",ol.style.Icon.prototype.getSize);goog.exportProperty(ol.style.Icon.prototype,"load",ol.style.Icon.prototype.load);goog.exportSymbol("ol.style.Image",ol.style.Image,OPENLAYERS);goog.exportProperty(ol.style.Image.prototype,"getOpacity",ol.style.Image.prototype.getOpacity);goog.exportProperty(ol.style.Image.prototype,"getRotateWithView",ol.style.Image.prototype.getRotateWithView);goog.exportProperty(ol.style.Image.prototype,"getRotation",ol.style.Image.prototype.getRotation);goog.exportProperty(ol.style.Image.prototype,"getScale",ol.style.Image.prototype.getScale);goog.exportProperty(ol.style.Image.prototype,"getSnapToPixel",ol.style.Image.prototype.getSnapToPixel);goog.exportProperty(ol.style.Image.prototype,"setOpacity",ol.style.Image.prototype.setOpacity);goog.exportProperty(ol.style.Image.prototype,"setRotation",ol.style.Image.prototype.setRotation);goog.exportProperty(ol.style.Image.prototype,"setScale",ol.style.Image.prototype.setScale);goog.exportSymbol("ol.style.RegularShape",ol.style.RegularShape,OPENLAYERS);goog.exportProperty(ol.style.RegularShape.prototype,"getAnchor",ol.style.RegularShape.prototype.getAnchor);goog.exportProperty(ol.style.RegularShape.prototype,"getAngle",ol.style.RegularShape.prototype.getAngle);goog.exportProperty(ol.style.RegularShape.prototype,"getFill",ol.style.RegularShape.prototype.getFill);goog.exportProperty(ol.style.RegularShape.prototype,"getImage",ol.style.RegularShape.prototype.getImage);goog.exportProperty(ol.style.RegularShape.prototype,"getOrigin",ol.style.RegularShape.prototype.getOrigin);goog.exportProperty(ol.style.RegularShape.prototype,"getPoints",ol.style.RegularShape.prototype.getPoints);goog.exportProperty(ol.style.RegularShape.prototype,"getRadius",ol.style.RegularShape.prototype.getRadius);goog.exportProperty(ol.style.RegularShape.prototype,"getRadius2",ol.style.RegularShape.prototype.getRadius2);goog.exportProperty(ol.style.RegularShape.prototype,"getSize",ol.style.RegularShape.prototype.getSize);goog.exportProperty(ol.style.RegularShape.prototype,"getStroke",ol.style.RegularShape.prototype.getStroke);goog.exportSymbol("ol.style.Stroke",ol.style.Stroke,OPENLAYERS);goog.exportProperty(ol.style.Stroke.prototype,"getColor",ol.style.Stroke.prototype.getColor);goog.exportProperty(ol.style.Stroke.prototype,"getLineCap",ol.style.Stroke.prototype.getLineCap);goog.exportProperty(ol.style.Stroke.prototype,"getLineDash",ol.style.Stroke.prototype.getLineDash);goog.exportProperty(ol.style.Stroke.prototype,"getLineJoin",ol.style.Stroke.prototype.getLineJoin);goog.exportProperty(ol.style.Stroke.prototype,"getMiterLimit",ol.style.Stroke.prototype.getMiterLimit);goog.exportProperty(ol.style.Stroke.prototype,"getWidth",ol.style.Stroke.prototype.getWidth);goog.exportProperty(ol.style.Stroke.prototype,"setColor",ol.style.Stroke.prototype.setColor);goog.exportProperty(ol.style.Stroke.prototype,"setLineCap",ol.style.Stroke.prototype.setLineCap);goog.exportProperty(ol.style.Stroke.prototype,"setLineDash",ol.style.Stroke.prototype.setLineDash);goog.exportProperty(ol.style.Stroke.prototype,"setLineJoin",ol.style.Stroke.prototype.setLineJoin);goog.exportProperty(ol.style.Stroke.prototype,"setMiterLimit",ol.style.Stroke.prototype.setMiterLimit);goog.exportProperty(ol.style.Stroke.prototype,"setWidth",ol.style.Stroke.prototype.setWidth);goog.exportSymbol("ol.style.Style",ol.style.Style,OPENLAYERS);goog.exportProperty(ol.style.Style.prototype,"getGeometry",ol.style.Style.prototype.getGeometry);goog.exportProperty(ol.style.Style.prototype,"getGeometryFunction",ol.style.Style.prototype.getGeometryFunction);goog.exportProperty(ol.style.Style.prototype,"getFill",ol.style.Style.prototype.getFill);goog.exportProperty(ol.style.Style.prototype,"getImage",ol.style.Style.prototype.getImage);goog.exportProperty(ol.style.Style.prototype,"getStroke",ol.style.Style.prototype.getStroke);goog.exportProperty(ol.style.Style.prototype,"getText",ol.style.Style.prototype.getText);goog.exportProperty(ol.style.Style.prototype,"getZIndex",ol.style.Style.prototype.getZIndex);goog.exportProperty(ol.style.Style.prototype,"setGeometry",ol.style.Style.prototype.setGeometry);goog.exportProperty(ol.style.Style.prototype,"setZIndex",ol.style.Style.prototype.setZIndex);goog.exportSymbol("ol.style.Text",ol.style.Text,OPENLAYERS);goog.exportProperty(ol.style.Text.prototype,"getFont",ol.style.Text.prototype.getFont);goog.exportProperty(ol.style.Text.prototype,"getOffsetX",ol.style.Text.prototype.getOffsetX);goog.exportProperty(ol.style.Text.prototype,"getOffsetY",ol.style.Text.prototype.getOffsetY);goog.exportProperty(ol.style.Text.prototype,"getFill",ol.style.Text.prototype.getFill);goog.exportProperty(ol.style.Text.prototype,"getRotation",ol.style.Text.prototype.getRotation);goog.exportProperty(ol.style.Text.prototype,"getScale",ol.style.Text.prototype.getScale);goog.exportProperty(ol.style.Text.prototype,"getStroke",ol.style.Text.prototype.getStroke);goog.exportProperty(ol.style.Text.prototype,"getText",ol.style.Text.prototype.getText);goog.exportProperty(ol.style.Text.prototype,"getTextAlign",ol.style.Text.prototype.getTextAlign);goog.exportProperty(ol.style.Text.prototype,"getTextBaseline",ol.style.Text.prototype.getTextBaseline);goog.exportProperty(ol.style.Text.prototype,"setFont",ol.style.Text.prototype.setFont);goog.exportProperty(ol.style.Text.prototype,"setOffsetX",ol.style.Text.prototype.setOffsetX);goog.exportProperty(ol.style.Text.prototype,"setOffsetY",ol.style.Text.prototype.setOffsetY);goog.exportProperty(ol.style.Text.prototype,"setFill",ol.style.Text.prototype.setFill);goog.exportProperty(ol.style.Text.prototype,"setRotation",ol.style.Text.prototype.setRotation);goog.exportProperty(ol.style.Text.prototype,"setScale",ol.style.Text.prototype.setScale);goog.exportProperty(ol.style.Text.prototype,"setStroke",ol.style.Text.prototype.setStroke);goog.exportProperty(ol.style.Text.prototype,"setText",ol.style.Text.prototype.setText);goog.exportProperty(ol.style.Text.prototype,"setTextAlign",ol.style.Text.prototype.setTextAlign);goog.exportProperty(ol.style.Text.prototype,"setTextBaseline",ol.style.Text.prototype.setTextBaseline);goog.exportProperty(ol.Tile.prototype,"getTileCoord",ol.Tile.prototype.getTileCoord);goog.exportSymbol("ol.tilegrid.TileGrid",ol.tilegrid.TileGrid,OPENLAYERS);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getMaxZoom",ol.tilegrid.TileGrid.prototype.getMaxZoom);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getMinZoom",ol.tilegrid.TileGrid.prototype.getMinZoom);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getOrigin",ol.tilegrid.TileGrid.prototype.getOrigin);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getResolution",ol.tilegrid.TileGrid.prototype.getResolution);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getResolutions",ol.tilegrid.TileGrid.prototype.getResolutions);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getTileCoordExtent",ol.tilegrid.TileGrid.prototype.getTileCoordExtent);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getTileCoordForCoordAndResolution",ol.tilegrid.TileGrid.prototype.getTileCoordForCoordAndResolution);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getTileCoordForCoordAndZ",ol.tilegrid.TileGrid.prototype.getTileCoordForCoordAndZ);goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getTileSize",ol.tilegrid.TileGrid.prototype.getTileSize);goog.exportSymbol("ol.tilegrid.createXYZ",ol.tilegrid.createXYZ,OPENLAYERS);goog.exportSymbol("ol.tilegrid.WMTS",ol.tilegrid.WMTS,OPENLAYERS);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getMatrixIds",ol.tilegrid.WMTS.prototype.getMatrixIds);goog.exportSymbol("ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet",ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet,OPENLAYERS);goog.exportProperty(ol.VectorTile.prototype,"getFormat",ol.VectorTile.prototype.getFormat);goog.exportProperty(ol.VectorTile.prototype,"setFeatures",ol.VectorTile.prototype.setFeatures);goog.exportProperty(ol.VectorTile.prototype,"setLoader",ol.VectorTile.prototype.setLoader);goog.exportSymbol("ol.View",ol.View,OPENLAYERS);goog.exportProperty(ol.View.prototype,"constrainCenter",ol.View.prototype.constrainCenter);goog.exportProperty(ol.View.prototype,"constrainResolution",ol.View.prototype.constrainResolution);goog.exportProperty(ol.View.prototype,"constrainRotation",ol.View.prototype.constrainRotation);goog.exportProperty(ol.View.prototype,"getCenter",ol.View.prototype.getCenter);goog.exportProperty(ol.View.prototype,"calculateExtent",ol.View.prototype.calculateExtent);goog.exportProperty(ol.View.prototype,"getProjection",ol.View.prototype.getProjection);goog.exportProperty(ol.View.prototype,"getResolution",ol.View.prototype.getResolution);goog.exportProperty(ol.View.prototype,"getRotation",ol.View.prototype.getRotation);goog.exportProperty(ol.View.prototype,"getZoom",ol.View.prototype.getZoom);goog.exportProperty(ol.View.prototype,"fit",ol.View.prototype.fit);goog.exportProperty(ol.View.prototype,"centerOn",ol.View.prototype.centerOn);goog.exportProperty(ol.View.prototype,"rotate",ol.View.prototype.rotate);goog.exportProperty(ol.View.prototype,"setCenter",ol.View.prototype.setCenter);goog.exportProperty(ol.View.prototype,"setResolution",ol.View.prototype.setResolution);goog.exportProperty(ol.View.prototype,"setRotation",ol.View.prototype.setRotation);goog.exportProperty(ol.View.prototype,"setZoom",ol.View.prototype.setZoom);goog.exportProperty(ol.webgl.Context.prototype,"getGL",ol.webgl.Context.prototype.getGL);goog.exportProperty(ol.webgl.Context.prototype,"useProgram",ol.webgl.Context.prototype.useProgram);goog.exportSymbol("ol.xml.getAllTextContent",ol.xml.getAllTextContent,OPENLAYERS);goog.exportSymbol("ol.xml.parse",ol.xml.parse,OPENLAYERS);goog.exportProperty(ol.Object.prototype,"changed",ol.Object.prototype.changed);goog.exportProperty(ol.Object.prototype,"dispatchEvent",ol.Object.prototype.dispatchEvent);goog.exportProperty(ol.Object.prototype,"getRevision",ol.Object.prototype.getRevision);goog.exportProperty(ol.Object.prototype,"on",ol.Object.prototype.on);goog.exportProperty(ol.Object.prototype,"once",ol.Object.prototype.once);goog.exportProperty(ol.Object.prototype,"un",ol.Object.prototype.un);goog.exportProperty(ol.Object.prototype,"unByKey",ol.Object.prototype.unByKey);goog.exportProperty(ol.Collection.prototype,"get",ol.Collection.prototype.get);goog.exportProperty(ol.Collection.prototype,"getKeys",ol.Collection.prototype.getKeys);goog.exportProperty(ol.Collection.prototype,"getProperties",ol.Collection.prototype.getProperties);goog.exportProperty(ol.Collection.prototype,"set",ol.Collection.prototype.set);goog.exportProperty(ol.Collection.prototype,"setProperties",ol.Collection.prototype.setProperties);goog.exportProperty(ol.Collection.prototype,"unset",ol.Collection.prototype.unset);goog.exportProperty(ol.Collection.prototype,"changed",ol.Collection.prototype.changed);goog.exportProperty(ol.Collection.prototype,"dispatchEvent",ol.Collection.prototype.dispatchEvent);goog.exportProperty(ol.Collection.prototype,"getRevision",ol.Collection.prototype.getRevision);goog.exportProperty(ol.Collection.prototype,"on",ol.Collection.prototype.on);goog.exportProperty(ol.Collection.prototype,"once",ol.Collection.prototype.once);goog.exportProperty(ol.Collection.prototype,"un",ol.Collection.prototype.un);goog.exportProperty(ol.Collection.prototype,"unByKey",ol.Collection.prototype.unByKey);goog.exportProperty(ol.control.Control.prototype,"get",ol.control.Control.prototype.get);goog.exportProperty(ol.control.Control.prototype,"getKeys",ol.control.Control.prototype.getKeys);goog.exportProperty(ol.control.Control.prototype,"getProperties",ol.control.Control.prototype.getProperties);goog.exportProperty(ol.control.Control.prototype,"set",ol.control.Control.prototype.set);goog.exportProperty(ol.control.Control.prototype,"setProperties",ol.control.Control.prototype.setProperties);goog.exportProperty(ol.control.Control.prototype,"unset",ol.control.Control.prototype.unset);goog.exportProperty(ol.control.Control.prototype,"changed",ol.control.Control.prototype.changed);goog.exportProperty(ol.control.Control.prototype,"dispatchEvent",ol.control.Control.prototype.dispatchEvent);goog.exportProperty(ol.control.Control.prototype,"getRevision",ol.control.Control.prototype.getRevision);goog.exportProperty(ol.control.Control.prototype,"on",ol.control.Control.prototype.on);goog.exportProperty(ol.control.Control.prototype,"once",ol.control.Control.prototype.once);goog.exportProperty(ol.control.Control.prototype,"un",ol.control.Control.prototype.un);goog.exportProperty(ol.control.Control.prototype,"unByKey",ol.control.Control.prototype.unByKey);goog.exportProperty(ol.control.Attribution.prototype,"getMap",ol.control.Attribution.prototype.getMap);goog.exportProperty(ol.control.Attribution.prototype,"setMap",ol.control.Attribution.prototype.setMap);goog.exportProperty(ol.control.Attribution.prototype,"setTarget",ol.control.Attribution.prototype.setTarget);goog.exportProperty(ol.control.Attribution.prototype,"get",ol.control.Attribution.prototype.get);goog.exportProperty(ol.control.Attribution.prototype,"getKeys",ol.control.Attribution.prototype.getKeys);goog.exportProperty(ol.control.Attribution.prototype,"getProperties",ol.control.Attribution.prototype.getProperties);goog.exportProperty(ol.control.Attribution.prototype,"set",ol.control.Attribution.prototype.set);goog.exportProperty(ol.control.Attribution.prototype,"setProperties",ol.control.Attribution.prototype.setProperties);goog.exportProperty(ol.control.Attribution.prototype,"unset",ol.control.Attribution.prototype.unset);goog.exportProperty(ol.control.Attribution.prototype,"changed",ol.control.Attribution.prototype.changed);goog.exportProperty(ol.control.Attribution.prototype,"dispatchEvent",ol.control.Attribution.prototype.dispatchEvent);goog.exportProperty(ol.control.Attribution.prototype,"getRevision",ol.control.Attribution.prototype.getRevision);goog.exportProperty(ol.control.Attribution.prototype,"on",ol.control.Attribution.prototype.on);goog.exportProperty(ol.control.Attribution.prototype,"once",ol.control.Attribution.prototype.once);goog.exportProperty(ol.control.Attribution.prototype,"un",ol.control.Attribution.prototype.un);goog.exportProperty(ol.control.Attribution.prototype,"unByKey",ol.control.Attribution.prototype.unByKey);goog.exportProperty(ol.control.FullScreen.prototype,"getMap",ol.control.FullScreen.prototype.getMap);goog.exportProperty(ol.control.FullScreen.prototype,"setMap",ol.control.FullScreen.prototype.setMap);goog.exportProperty(ol.control.FullScreen.prototype,"setTarget",ol.control.FullScreen.prototype.setTarget);goog.exportProperty(ol.control.FullScreen.prototype,"get",ol.control.FullScreen.prototype.get);goog.exportProperty(ol.control.FullScreen.prototype,"getKeys",ol.control.FullScreen.prototype.getKeys);goog.exportProperty(ol.control.FullScreen.prototype,"getProperties",ol.control.FullScreen.prototype.getProperties);goog.exportProperty(ol.control.FullScreen.prototype,"set",ol.control.FullScreen.prototype.set);goog.exportProperty(ol.control.FullScreen.prototype,"setProperties",ol.control.FullScreen.prototype.setProperties);goog.exportProperty(ol.control.FullScreen.prototype,"unset",ol.control.FullScreen.prototype.unset);goog.exportProperty(ol.control.FullScreen.prototype,"changed",ol.control.FullScreen.prototype.changed);goog.exportProperty(ol.control.FullScreen.prototype,"dispatchEvent",ol.control.FullScreen.prototype.dispatchEvent);goog.exportProperty(ol.control.FullScreen.prototype,"getRevision",ol.control.FullScreen.prototype.getRevision);goog.exportProperty(ol.control.FullScreen.prototype,"on",ol.control.FullScreen.prototype.on);goog.exportProperty(ol.control.FullScreen.prototype,"once",ol.control.FullScreen.prototype.once);goog.exportProperty(ol.control.FullScreen.prototype,"un",ol.control.FullScreen.prototype.un);goog.exportProperty(ol.control.FullScreen.prototype,"unByKey",ol.control.FullScreen.prototype.unByKey);goog.exportProperty(ol.control.MousePosition.prototype,"getMap",ol.control.MousePosition.prototype.getMap);goog.exportProperty(ol.control.MousePosition.prototype,"setMap",ol.control.MousePosition.prototype.setMap);goog.exportProperty(ol.control.MousePosition.prototype,"setTarget",ol.control.MousePosition.prototype.setTarget);goog.exportProperty(ol.control.MousePosition.prototype,"get",ol.control.MousePosition.prototype.get);goog.exportProperty(ol.control.MousePosition.prototype,"getKeys",ol.control.MousePosition.prototype.getKeys);goog.exportProperty(ol.control.MousePosition.prototype,"getProperties",ol.control.MousePosition.prototype.getProperties);goog.exportProperty(ol.control.MousePosition.prototype,"set",ol.control.MousePosition.prototype.set);goog.exportProperty(ol.control.MousePosition.prototype,"setProperties",ol.control.MousePosition.prototype.setProperties);goog.exportProperty(ol.control.MousePosition.prototype,"unset",ol.control.MousePosition.prototype.unset);goog.exportProperty(ol.control.MousePosition.prototype,"changed",ol.control.MousePosition.prototype.changed);goog.exportProperty(ol.control.MousePosition.prototype,"dispatchEvent",ol.control.MousePosition.prototype.dispatchEvent);goog.exportProperty(ol.control.MousePosition.prototype,"getRevision",ol.control.MousePosition.prototype.getRevision);goog.exportProperty(ol.control.MousePosition.prototype,"on",ol.control.MousePosition.prototype.on);goog.exportProperty(ol.control.MousePosition.prototype,"once",ol.control.MousePosition.prototype.once);goog.exportProperty(ol.control.MousePosition.prototype,"un",ol.control.MousePosition.prototype.un);goog.exportProperty(ol.control.MousePosition.prototype,"unByKey",ol.control.MousePosition.prototype.unByKey);goog.exportProperty(ol.control.OverviewMap.prototype,"getMap",ol.control.OverviewMap.prototype.getMap);goog.exportProperty(ol.control.OverviewMap.prototype,"setMap",ol.control.OverviewMap.prototype.setMap);goog.exportProperty(ol.control.OverviewMap.prototype,"setTarget",ol.control.OverviewMap.prototype.setTarget);goog.exportProperty(ol.control.OverviewMap.prototype,"get",ol.control.OverviewMap.prototype.get);goog.exportProperty(ol.control.OverviewMap.prototype,"getKeys",ol.control.OverviewMap.prototype.getKeys);goog.exportProperty(ol.control.OverviewMap.prototype,"getProperties",ol.control.OverviewMap.prototype.getProperties);goog.exportProperty(ol.control.OverviewMap.prototype,"set",ol.control.OverviewMap.prototype.set);goog.exportProperty(ol.control.OverviewMap.prototype,"setProperties",ol.control.OverviewMap.prototype.setProperties);goog.exportProperty(ol.control.OverviewMap.prototype,"unset",ol.control.OverviewMap.prototype.unset);goog.exportProperty(ol.control.OverviewMap.prototype,"changed",ol.control.OverviewMap.prototype.changed);goog.exportProperty(ol.control.OverviewMap.prototype,"dispatchEvent",ol.control.OverviewMap.prototype.dispatchEvent);goog.exportProperty(ol.control.OverviewMap.prototype,"getRevision",ol.control.OverviewMap.prototype.getRevision);goog.exportProperty(ol.control.OverviewMap.prototype,"on",ol.control.OverviewMap.prototype.on);goog.exportProperty(ol.control.OverviewMap.prototype,"once",ol.control.OverviewMap.prototype.once);goog.exportProperty(ol.control.OverviewMap.prototype,"un",ol.control.OverviewMap.prototype.un);goog.exportProperty(ol.control.OverviewMap.prototype,"unByKey",ol.control.OverviewMap.prototype.unByKey);goog.exportProperty(ol.control.Rotate.prototype,"getMap",ol.control.Rotate.prototype.getMap);goog.exportProperty(ol.control.Rotate.prototype,"setMap",ol.control.Rotate.prototype.setMap);goog.exportProperty(ol.control.Rotate.prototype,"setTarget",ol.control.Rotate.prototype.setTarget);goog.exportProperty(ol.control.Rotate.prototype,"get",ol.control.Rotate.prototype.get);goog.exportProperty(ol.control.Rotate.prototype,"getKeys",ol.control.Rotate.prototype.getKeys);goog.exportProperty(ol.control.Rotate.prototype,"getProperties",ol.control.Rotate.prototype.getProperties);goog.exportProperty(ol.control.Rotate.prototype,"set",ol.control.Rotate.prototype.set);goog.exportProperty(ol.control.Rotate.prototype,"setProperties",ol.control.Rotate.prototype.setProperties);goog.exportProperty(ol.control.Rotate.prototype,"unset",ol.control.Rotate.prototype.unset);goog.exportProperty(ol.control.Rotate.prototype,"changed",ol.control.Rotate.prototype.changed);goog.exportProperty(ol.control.Rotate.prototype,"dispatchEvent",ol.control.Rotate.prototype.dispatchEvent);goog.exportProperty(ol.control.Rotate.prototype,"getRevision",ol.control.Rotate.prototype.getRevision);goog.exportProperty(ol.control.Rotate.prototype,"on",ol.control.Rotate.prototype.on);goog.exportProperty(ol.control.Rotate.prototype,"once",ol.control.Rotate.prototype.once);goog.exportProperty(ol.control.Rotate.prototype,"un",ol.control.Rotate.prototype.un);goog.exportProperty(ol.control.Rotate.prototype,"unByKey",ol.control.Rotate.prototype.unByKey);goog.exportProperty(ol.control.ScaleLine.prototype,"getMap",ol.control.ScaleLine.prototype.getMap);goog.exportProperty(ol.control.ScaleLine.prototype,"setMap",ol.control.ScaleLine.prototype.setMap);goog.exportProperty(ol.control.ScaleLine.prototype,"setTarget",ol.control.ScaleLine.prototype.setTarget);goog.exportProperty(ol.control.ScaleLine.prototype,"get",ol.control.ScaleLine.prototype.get);goog.exportProperty(ol.control.ScaleLine.prototype,"getKeys",ol.control.ScaleLine.prototype.getKeys);goog.exportProperty(ol.control.ScaleLine.prototype,"getProperties",ol.control.ScaleLine.prototype.getProperties);goog.exportProperty(ol.control.ScaleLine.prototype,"set",ol.control.ScaleLine.prototype.set);goog.exportProperty(ol.control.ScaleLine.prototype,"setProperties",ol.control.ScaleLine.prototype.setProperties);goog.exportProperty(ol.control.ScaleLine.prototype,"unset",ol.control.ScaleLine.prototype.unset);goog.exportProperty(ol.control.ScaleLine.prototype,"changed",ol.control.ScaleLine.prototype.changed);goog.exportProperty(ol.control.ScaleLine.prototype,"dispatchEvent",ol.control.ScaleLine.prototype.dispatchEvent);goog.exportProperty(ol.control.ScaleLine.prototype,"getRevision",ol.control.ScaleLine.prototype.getRevision);goog.exportProperty(ol.control.ScaleLine.prototype,"on",ol.control.ScaleLine.prototype.on);goog.exportProperty(ol.control.ScaleLine.prototype,"once",ol.control.ScaleLine.prototype.once);goog.exportProperty(ol.control.ScaleLine.prototype,"un",ol.control.ScaleLine.prototype.un);goog.exportProperty(ol.control.ScaleLine.prototype,"unByKey",ol.control.ScaleLine.prototype.unByKey);goog.exportProperty(ol.control.Zoom.prototype,"getMap",ol.control.Zoom.prototype.getMap);goog.exportProperty(ol.control.Zoom.prototype,"setMap",ol.control.Zoom.prototype.setMap);goog.exportProperty(ol.control.Zoom.prototype,"setTarget",ol.control.Zoom.prototype.setTarget);goog.exportProperty(ol.control.Zoom.prototype,"get",ol.control.Zoom.prototype.get);goog.exportProperty(ol.control.Zoom.prototype,"getKeys",ol.control.Zoom.prototype.getKeys);goog.exportProperty(ol.control.Zoom.prototype,"getProperties",ol.control.Zoom.prototype.getProperties);goog.exportProperty(ol.control.Zoom.prototype,"set",ol.control.Zoom.prototype.set);goog.exportProperty(ol.control.Zoom.prototype,"setProperties",ol.control.Zoom.prototype.setProperties);goog.exportProperty(ol.control.Zoom.prototype,"unset",ol.control.Zoom.prototype.unset);goog.exportProperty(ol.control.Zoom.prototype,"changed",ol.control.Zoom.prototype.changed);goog.exportProperty(ol.control.Zoom.prototype,"dispatchEvent",ol.control.Zoom.prototype.dispatchEvent);goog.exportProperty(ol.control.Zoom.prototype,"getRevision",ol.control.Zoom.prototype.getRevision);goog.exportProperty(ol.control.Zoom.prototype,"on",ol.control.Zoom.prototype.on);goog.exportProperty(ol.control.Zoom.prototype,"once",ol.control.Zoom.prototype.once);goog.exportProperty(ol.control.Zoom.prototype,"un",ol.control.Zoom.prototype.un);goog.exportProperty(ol.control.Zoom.prototype,"unByKey",ol.control.Zoom.prototype.unByKey);goog.exportProperty(ol.control.ZoomSlider.prototype,"getMap",ol.control.ZoomSlider.prototype.getMap);goog.exportProperty(ol.control.ZoomSlider.prototype,"setMap",ol.control.ZoomSlider.prototype.setMap);goog.exportProperty(ol.control.ZoomSlider.prototype,"setTarget",ol.control.ZoomSlider.prototype.setTarget);goog.exportProperty(ol.control.ZoomSlider.prototype,"get",ol.control.ZoomSlider.prototype.get);goog.exportProperty(ol.control.ZoomSlider.prototype,"getKeys",ol.control.ZoomSlider.prototype.getKeys);goog.exportProperty(ol.control.ZoomSlider.prototype,"getProperties",ol.control.ZoomSlider.prototype.getProperties);goog.exportProperty(ol.control.ZoomSlider.prototype,"set",ol.control.ZoomSlider.prototype.set);goog.exportProperty(ol.control.ZoomSlider.prototype,"setProperties",ol.control.ZoomSlider.prototype.setProperties);goog.exportProperty(ol.control.ZoomSlider.prototype,"unset",ol.control.ZoomSlider.prototype.unset);goog.exportProperty(ol.control.ZoomSlider.prototype,"changed",ol.control.ZoomSlider.prototype.changed);goog.exportProperty(ol.control.ZoomSlider.prototype,"dispatchEvent",ol.control.ZoomSlider.prototype.dispatchEvent);goog.exportProperty(ol.control.ZoomSlider.prototype,"getRevision",ol.control.ZoomSlider.prototype.getRevision);goog.exportProperty(ol.control.ZoomSlider.prototype,"on",ol.control.ZoomSlider.prototype.on);goog.exportProperty(ol.control.ZoomSlider.prototype,"once",ol.control.ZoomSlider.prototype.once);goog.exportProperty(ol.control.ZoomSlider.prototype,"un",ol.control.ZoomSlider.prototype.un);goog.exportProperty(ol.control.ZoomSlider.prototype,"unByKey",ol.control.ZoomSlider.prototype.unByKey);goog.exportProperty(ol.control.ZoomToExtent.prototype,"getMap",ol.control.ZoomToExtent.prototype.getMap);goog.exportProperty(ol.control.ZoomToExtent.prototype,"setMap",ol.control.ZoomToExtent.prototype.setMap);goog.exportProperty(ol.control.ZoomToExtent.prototype,"setTarget",ol.control.ZoomToExtent.prototype.setTarget);goog.exportProperty(ol.control.ZoomToExtent.prototype,"get",ol.control.ZoomToExtent.prototype.get);goog.exportProperty(ol.control.ZoomToExtent.prototype,"getKeys",ol.control.ZoomToExtent.prototype.getKeys);goog.exportProperty(ol.control.ZoomToExtent.prototype,"getProperties",ol.control.ZoomToExtent.prototype.getProperties);goog.exportProperty(ol.control.ZoomToExtent.prototype,"set",ol.control.ZoomToExtent.prototype.set);goog.exportProperty(ol.control.ZoomToExtent.prototype,"setProperties",ol.control.ZoomToExtent.prototype.setProperties);goog.exportProperty(ol.control.ZoomToExtent.prototype,"unset",ol.control.ZoomToExtent.prototype.unset);goog.exportProperty(ol.control.ZoomToExtent.prototype,"changed",ol.control.ZoomToExtent.prototype.changed);goog.exportProperty(ol.control.ZoomToExtent.prototype,"dispatchEvent",ol.control.ZoomToExtent.prototype.dispatchEvent);goog.exportProperty(ol.control.ZoomToExtent.prototype,"getRevision",ol.control.ZoomToExtent.prototype.getRevision);goog.exportProperty(ol.control.ZoomToExtent.prototype,"on",ol.control.ZoomToExtent.prototype.on);goog.exportProperty(ol.control.ZoomToExtent.prototype,"once",ol.control.ZoomToExtent.prototype.once);goog.exportProperty(ol.control.ZoomToExtent.prototype,"un",ol.control.ZoomToExtent.prototype.un);goog.exportProperty(ol.control.ZoomToExtent.prototype,"unByKey",ol.control.ZoomToExtent.prototype.unByKey);goog.exportProperty(ol.DeviceOrientation.prototype,"get",ol.DeviceOrientation.prototype.get);goog.exportProperty(ol.DeviceOrientation.prototype,"getKeys",ol.DeviceOrientation.prototype.getKeys);goog.exportProperty(ol.DeviceOrientation.prototype,"getProperties",ol.DeviceOrientation.prototype.getProperties);goog.exportProperty(ol.DeviceOrientation.prototype,"set",ol.DeviceOrientation.prototype.set);goog.exportProperty(ol.DeviceOrientation.prototype,"setProperties",ol.DeviceOrientation.prototype.setProperties);goog.exportProperty(ol.DeviceOrientation.prototype,"unset",ol.DeviceOrientation.prototype.unset);goog.exportProperty(ol.DeviceOrientation.prototype,"changed",ol.DeviceOrientation.prototype.changed);goog.exportProperty(ol.DeviceOrientation.prototype,"dispatchEvent",ol.DeviceOrientation.prototype.dispatchEvent);goog.exportProperty(ol.DeviceOrientation.prototype,"getRevision",ol.DeviceOrientation.prototype.getRevision);goog.exportProperty(ol.DeviceOrientation.prototype,"on",ol.DeviceOrientation.prototype.on);goog.exportProperty(ol.DeviceOrientation.prototype,"once",ol.DeviceOrientation.prototype.once);goog.exportProperty(ol.DeviceOrientation.prototype,"un",ol.DeviceOrientation.prototype.un);goog.exportProperty(ol.DeviceOrientation.prototype,"unByKey",ol.DeviceOrientation.prototype.unByKey);goog.exportProperty(ol.Feature.prototype,"get",ol.Feature.prototype.get);goog.exportProperty(ol.Feature.prototype,"getKeys",ol.Feature.prototype.getKeys);goog.exportProperty(ol.Feature.prototype,"getProperties",ol.Feature.prototype.getProperties);goog.exportProperty(ol.Feature.prototype,"set",ol.Feature.prototype.set);goog.exportProperty(ol.Feature.prototype,"setProperties",ol.Feature.prototype.setProperties);goog.exportProperty(ol.Feature.prototype,"unset",ol.Feature.prototype.unset);goog.exportProperty(ol.Feature.prototype,"changed",ol.Feature.prototype.changed);goog.exportProperty(ol.Feature.prototype,"dispatchEvent",ol.Feature.prototype.dispatchEvent);goog.exportProperty(ol.Feature.prototype,"getRevision",ol.Feature.prototype.getRevision);goog.exportProperty(ol.Feature.prototype,"on",ol.Feature.prototype.on);goog.exportProperty(ol.Feature.prototype,"once",ol.Feature.prototype.once);goog.exportProperty(ol.Feature.prototype,"un",ol.Feature.prototype.un);goog.exportProperty(ol.Feature.prototype,"unByKey",ol.Feature.prototype.unByKey);goog.exportProperty(ol.format.GML2.prototype,"readFeatures",ol.format.GML2.prototype.readFeatures);goog.exportProperty(ol.format.GML3.prototype,"readFeatures",ol.format.GML3.prototype.readFeatures);goog.exportProperty(ol.format.GML.prototype,"readFeatures",ol.format.GML.prototype.readFeatures);goog.exportProperty(ol.Geolocation.prototype,"get",ol.Geolocation.prototype.get);goog.exportProperty(ol.Geolocation.prototype,"getKeys",ol.Geolocation.prototype.getKeys);goog.exportProperty(ol.Geolocation.prototype,"getProperties",ol.Geolocation.prototype.getProperties);goog.exportProperty(ol.Geolocation.prototype,"set",ol.Geolocation.prototype.set);goog.exportProperty(ol.Geolocation.prototype,"setProperties",ol.Geolocation.prototype.setProperties);goog.exportProperty(ol.Geolocation.prototype,"unset",ol.Geolocation.prototype.unset);goog.exportProperty(ol.Geolocation.prototype,"changed",ol.Geolocation.prototype.changed);goog.exportProperty(ol.Geolocation.prototype,"dispatchEvent",ol.Geolocation.prototype.dispatchEvent);goog.exportProperty(ol.Geolocation.prototype,"getRevision",ol.Geolocation.prototype.getRevision);goog.exportProperty(ol.Geolocation.prototype,"on",ol.Geolocation.prototype.on)
;goog.exportProperty(ol.Geolocation.prototype,"once",ol.Geolocation.prototype.once);goog.exportProperty(ol.Geolocation.prototype,"un",ol.Geolocation.prototype.un);goog.exportProperty(ol.Geolocation.prototype,"unByKey",ol.Geolocation.prototype.unByKey);goog.exportProperty(ol.geom.Geometry.prototype,"get",ol.geom.Geometry.prototype.get);goog.exportProperty(ol.geom.Geometry.prototype,"getKeys",ol.geom.Geometry.prototype.getKeys);goog.exportProperty(ol.geom.Geometry.prototype,"getProperties",ol.geom.Geometry.prototype.getProperties);goog.exportProperty(ol.geom.Geometry.prototype,"set",ol.geom.Geometry.prototype.set);goog.exportProperty(ol.geom.Geometry.prototype,"setProperties",ol.geom.Geometry.prototype.setProperties);goog.exportProperty(ol.geom.Geometry.prototype,"unset",ol.geom.Geometry.prototype.unset);goog.exportProperty(ol.geom.Geometry.prototype,"changed",ol.geom.Geometry.prototype.changed);goog.exportProperty(ol.geom.Geometry.prototype,"dispatchEvent",ol.geom.Geometry.prototype.dispatchEvent);goog.exportProperty(ol.geom.Geometry.prototype,"getRevision",ol.geom.Geometry.prototype.getRevision);goog.exportProperty(ol.geom.Geometry.prototype,"on",ol.geom.Geometry.prototype.on);goog.exportProperty(ol.geom.Geometry.prototype,"once",ol.geom.Geometry.prototype.once);goog.exportProperty(ol.geom.Geometry.prototype,"un",ol.geom.Geometry.prototype.un);goog.exportProperty(ol.geom.Geometry.prototype,"unByKey",ol.geom.Geometry.prototype.unByKey);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getClosestPoint",ol.geom.SimpleGeometry.prototype.getClosestPoint);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getExtent",ol.geom.SimpleGeometry.prototype.getExtent);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"simplify",ol.geom.SimpleGeometry.prototype.simplify);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"transform",ol.geom.SimpleGeometry.prototype.transform);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"get",ol.geom.SimpleGeometry.prototype.get);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getKeys",ol.geom.SimpleGeometry.prototype.getKeys);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getProperties",ol.geom.SimpleGeometry.prototype.getProperties);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"set",ol.geom.SimpleGeometry.prototype.set);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"setProperties",ol.geom.SimpleGeometry.prototype.setProperties);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"unset",ol.geom.SimpleGeometry.prototype.unset);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"changed",ol.geom.SimpleGeometry.prototype.changed);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"dispatchEvent",ol.geom.SimpleGeometry.prototype.dispatchEvent);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getRevision",ol.geom.SimpleGeometry.prototype.getRevision);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"on",ol.geom.SimpleGeometry.prototype.on);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"once",ol.geom.SimpleGeometry.prototype.once);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"un",ol.geom.SimpleGeometry.prototype.un);goog.exportProperty(ol.geom.SimpleGeometry.prototype,"unByKey",ol.geom.SimpleGeometry.prototype.unByKey);goog.exportProperty(ol.geom.Circle.prototype,"getFirstCoordinate",ol.geom.Circle.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.Circle.prototype,"getLastCoordinate",ol.geom.Circle.prototype.getLastCoordinate);goog.exportProperty(ol.geom.Circle.prototype,"getLayout",ol.geom.Circle.prototype.getLayout);goog.exportProperty(ol.geom.Circle.prototype,"getClosestPoint",ol.geom.Circle.prototype.getClosestPoint);goog.exportProperty(ol.geom.Circle.prototype,"getExtent",ol.geom.Circle.prototype.getExtent);goog.exportProperty(ol.geom.Circle.prototype,"simplify",ol.geom.Circle.prototype.simplify);goog.exportProperty(ol.geom.Circle.prototype,"get",ol.geom.Circle.prototype.get);goog.exportProperty(ol.geom.Circle.prototype,"getKeys",ol.geom.Circle.prototype.getKeys);goog.exportProperty(ol.geom.Circle.prototype,"getProperties",ol.geom.Circle.prototype.getProperties);goog.exportProperty(ol.geom.Circle.prototype,"set",ol.geom.Circle.prototype.set);goog.exportProperty(ol.geom.Circle.prototype,"setProperties",ol.geom.Circle.prototype.setProperties);goog.exportProperty(ol.geom.Circle.prototype,"unset",ol.geom.Circle.prototype.unset);goog.exportProperty(ol.geom.Circle.prototype,"changed",ol.geom.Circle.prototype.changed);goog.exportProperty(ol.geom.Circle.prototype,"dispatchEvent",ol.geom.Circle.prototype.dispatchEvent);goog.exportProperty(ol.geom.Circle.prototype,"getRevision",ol.geom.Circle.prototype.getRevision);goog.exportProperty(ol.geom.Circle.prototype,"on",ol.geom.Circle.prototype.on);goog.exportProperty(ol.geom.Circle.prototype,"once",ol.geom.Circle.prototype.once);goog.exportProperty(ol.geom.Circle.prototype,"un",ol.geom.Circle.prototype.un);goog.exportProperty(ol.geom.Circle.prototype,"unByKey",ol.geom.Circle.prototype.unByKey);goog.exportProperty(ol.geom.GeometryCollection.prototype,"getClosestPoint",ol.geom.GeometryCollection.prototype.getClosestPoint);goog.exportProperty(ol.geom.GeometryCollection.prototype,"getExtent",ol.geom.GeometryCollection.prototype.getExtent);goog.exportProperty(ol.geom.GeometryCollection.prototype,"simplify",ol.geom.GeometryCollection.prototype.simplify);goog.exportProperty(ol.geom.GeometryCollection.prototype,"transform",ol.geom.GeometryCollection.prototype.transform);goog.exportProperty(ol.geom.GeometryCollection.prototype,"get",ol.geom.GeometryCollection.prototype.get);goog.exportProperty(ol.geom.GeometryCollection.prototype,"getKeys",ol.geom.GeometryCollection.prototype.getKeys);goog.exportProperty(ol.geom.GeometryCollection.prototype,"getProperties",ol.geom.GeometryCollection.prototype.getProperties);goog.exportProperty(ol.geom.GeometryCollection.prototype,"set",ol.geom.GeometryCollection.prototype.set);goog.exportProperty(ol.geom.GeometryCollection.prototype,"setProperties",ol.geom.GeometryCollection.prototype.setProperties);goog.exportProperty(ol.geom.GeometryCollection.prototype,"unset",ol.geom.GeometryCollection.prototype.unset);goog.exportProperty(ol.geom.GeometryCollection.prototype,"changed",ol.geom.GeometryCollection.prototype.changed);goog.exportProperty(ol.geom.GeometryCollection.prototype,"dispatchEvent",ol.geom.GeometryCollection.prototype.dispatchEvent);goog.exportProperty(ol.geom.GeometryCollection.prototype,"getRevision",ol.geom.GeometryCollection.prototype.getRevision);goog.exportProperty(ol.geom.GeometryCollection.prototype,"on",ol.geom.GeometryCollection.prototype.on);goog.exportProperty(ol.geom.GeometryCollection.prototype,"once",ol.geom.GeometryCollection.prototype.once);goog.exportProperty(ol.geom.GeometryCollection.prototype,"un",ol.geom.GeometryCollection.prototype.un);goog.exportProperty(ol.geom.GeometryCollection.prototype,"unByKey",ol.geom.GeometryCollection.prototype.unByKey);goog.exportProperty(ol.geom.LinearRing.prototype,"getFirstCoordinate",ol.geom.LinearRing.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.LinearRing.prototype,"getLastCoordinate",ol.geom.LinearRing.prototype.getLastCoordinate);goog.exportProperty(ol.geom.LinearRing.prototype,"getLayout",ol.geom.LinearRing.prototype.getLayout);goog.exportProperty(ol.geom.LinearRing.prototype,"getClosestPoint",ol.geom.LinearRing.prototype.getClosestPoint);goog.exportProperty(ol.geom.LinearRing.prototype,"getExtent",ol.geom.LinearRing.prototype.getExtent);goog.exportProperty(ol.geom.LinearRing.prototype,"simplify",ol.geom.LinearRing.prototype.simplify);goog.exportProperty(ol.geom.LinearRing.prototype,"transform",ol.geom.LinearRing.prototype.transform);goog.exportProperty(ol.geom.LinearRing.prototype,"get",ol.geom.LinearRing.prototype.get);goog.exportProperty(ol.geom.LinearRing.prototype,"getKeys",ol.geom.LinearRing.prototype.getKeys);goog.exportProperty(ol.geom.LinearRing.prototype,"getProperties",ol.geom.LinearRing.prototype.getProperties);goog.exportProperty(ol.geom.LinearRing.prototype,"set",ol.geom.LinearRing.prototype.set);goog.exportProperty(ol.geom.LinearRing.prototype,"setProperties",ol.geom.LinearRing.prototype.setProperties);goog.exportProperty(ol.geom.LinearRing.prototype,"unset",ol.geom.LinearRing.prototype.unset);goog.exportProperty(ol.geom.LinearRing.prototype,"changed",ol.geom.LinearRing.prototype.changed);goog.exportProperty(ol.geom.LinearRing.prototype,"dispatchEvent",ol.geom.LinearRing.prototype.dispatchEvent);goog.exportProperty(ol.geom.LinearRing.prototype,"getRevision",ol.geom.LinearRing.prototype.getRevision);goog.exportProperty(ol.geom.LinearRing.prototype,"on",ol.geom.LinearRing.prototype.on);goog.exportProperty(ol.geom.LinearRing.prototype,"once",ol.geom.LinearRing.prototype.once);goog.exportProperty(ol.geom.LinearRing.prototype,"un",ol.geom.LinearRing.prototype.un);goog.exportProperty(ol.geom.LinearRing.prototype,"unByKey",ol.geom.LinearRing.prototype.unByKey);goog.exportProperty(ol.geom.LineString.prototype,"getFirstCoordinate",ol.geom.LineString.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.LineString.prototype,"getLastCoordinate",ol.geom.LineString.prototype.getLastCoordinate);goog.exportProperty(ol.geom.LineString.prototype,"getLayout",ol.geom.LineString.prototype.getLayout);goog.exportProperty(ol.geom.LineString.prototype,"getClosestPoint",ol.geom.LineString.prototype.getClosestPoint);goog.exportProperty(ol.geom.LineString.prototype,"getExtent",ol.geom.LineString.prototype.getExtent);goog.exportProperty(ol.geom.LineString.prototype,"simplify",ol.geom.LineString.prototype.simplify);goog.exportProperty(ol.geom.LineString.prototype,"transform",ol.geom.LineString.prototype.transform);goog.exportProperty(ol.geom.LineString.prototype,"get",ol.geom.LineString.prototype.get);goog.exportProperty(ol.geom.LineString.prototype,"getKeys",ol.geom.LineString.prototype.getKeys);goog.exportProperty(ol.geom.LineString.prototype,"getProperties",ol.geom.LineString.prototype.getProperties);goog.exportProperty(ol.geom.LineString.prototype,"set",ol.geom.LineString.prototype.set);goog.exportProperty(ol.geom.LineString.prototype,"setProperties",ol.geom.LineString.prototype.setProperties);goog.exportProperty(ol.geom.LineString.prototype,"unset",ol.geom.LineString.prototype.unset);goog.exportProperty(ol.geom.LineString.prototype,"changed",ol.geom.LineString.prototype.changed);goog.exportProperty(ol.geom.LineString.prototype,"dispatchEvent",ol.geom.LineString.prototype.dispatchEvent);goog.exportProperty(ol.geom.LineString.prototype,"getRevision",ol.geom.LineString.prototype.getRevision);goog.exportProperty(ol.geom.LineString.prototype,"on",ol.geom.LineString.prototype.on);goog.exportProperty(ol.geom.LineString.prototype,"once",ol.geom.LineString.prototype.once);goog.exportProperty(ol.geom.LineString.prototype,"un",ol.geom.LineString.prototype.un);goog.exportProperty(ol.geom.LineString.prototype,"unByKey",ol.geom.LineString.prototype.unByKey);goog.exportProperty(ol.geom.MultiLineString.prototype,"getFirstCoordinate",ol.geom.MultiLineString.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.MultiLineString.prototype,"getLastCoordinate",ol.geom.MultiLineString.prototype.getLastCoordinate);goog.exportProperty(ol.geom.MultiLineString.prototype,"getLayout",ol.geom.MultiLineString.prototype.getLayout);goog.exportProperty(ol.geom.MultiLineString.prototype,"getClosestPoint",ol.geom.MultiLineString.prototype.getClosestPoint);goog.exportProperty(ol.geom.MultiLineString.prototype,"getExtent",ol.geom.MultiLineString.prototype.getExtent);goog.exportProperty(ol.geom.MultiLineString.prototype,"simplify",ol.geom.MultiLineString.prototype.simplify);goog.exportProperty(ol.geom.MultiLineString.prototype,"transform",ol.geom.MultiLineString.prototype.transform);goog.exportProperty(ol.geom.MultiLineString.prototype,"get",ol.geom.MultiLineString.prototype.get);goog.exportProperty(ol.geom.MultiLineString.prototype,"getKeys",ol.geom.MultiLineString.prototype.getKeys);goog.exportProperty(ol.geom.MultiLineString.prototype,"getProperties",ol.geom.MultiLineString.prototype.getProperties);goog.exportProperty(ol.geom.MultiLineString.prototype,"set",ol.geom.MultiLineString.prototype.set);goog.exportProperty(ol.geom.MultiLineString.prototype,"setProperties",ol.geom.MultiLineString.prototype.setProperties);goog.exportProperty(ol.geom.MultiLineString.prototype,"unset",ol.geom.MultiLineString.prototype.unset);goog.exportProperty(ol.geom.MultiLineString.prototype,"changed",ol.geom.MultiLineString.prototype.changed);goog.exportProperty(ol.geom.MultiLineString.prototype,"dispatchEvent",ol.geom.MultiLineString.prototype.dispatchEvent);goog.exportProperty(ol.geom.MultiLineString.prototype,"getRevision",ol.geom.MultiLineString.prototype.getRevision);goog.exportProperty(ol.geom.MultiLineString.prototype,"on",ol.geom.MultiLineString.prototype.on);goog.exportProperty(ol.geom.MultiLineString.prototype,"once",ol.geom.MultiLineString.prototype.once);goog.exportProperty(ol.geom.MultiLineString.prototype,"un",ol.geom.MultiLineString.prototype.un);goog.exportProperty(ol.geom.MultiLineString.prototype,"unByKey",ol.geom.MultiLineString.prototype.unByKey);goog.exportProperty(ol.geom.MultiPoint.prototype,"getFirstCoordinate",ol.geom.MultiPoint.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.MultiPoint.prototype,"getLastCoordinate",ol.geom.MultiPoint.prototype.getLastCoordinate);goog.exportProperty(ol.geom.MultiPoint.prototype,"getLayout",ol.geom.MultiPoint.prototype.getLayout);goog.exportProperty(ol.geom.MultiPoint.prototype,"getClosestPoint",ol.geom.MultiPoint.prototype.getClosestPoint);goog.exportProperty(ol.geom.MultiPoint.prototype,"getExtent",ol.geom.MultiPoint.prototype.getExtent);goog.exportProperty(ol.geom.MultiPoint.prototype,"simplify",ol.geom.MultiPoint.prototype.simplify);goog.exportProperty(ol.geom.MultiPoint.prototype,"transform",ol.geom.MultiPoint.prototype.transform);goog.exportProperty(ol.geom.MultiPoint.prototype,"get",ol.geom.MultiPoint.prototype.get);goog.exportProperty(ol.geom.MultiPoint.prototype,"getKeys",ol.geom.MultiPoint.prototype.getKeys);goog.exportProperty(ol.geom.MultiPoint.prototype,"getProperties",ol.geom.MultiPoint.prototype.getProperties);goog.exportProperty(ol.geom.MultiPoint.prototype,"set",ol.geom.MultiPoint.prototype.set);goog.exportProperty(ol.geom.MultiPoint.prototype,"setProperties",ol.geom.MultiPoint.prototype.setProperties);goog.exportProperty(ol.geom.MultiPoint.prototype,"unset",ol.geom.MultiPoint.prototype.unset);goog.exportProperty(ol.geom.MultiPoint.prototype,"changed",ol.geom.MultiPoint.prototype.changed);goog.exportProperty(ol.geom.MultiPoint.prototype,"dispatchEvent",ol.geom.MultiPoint.prototype.dispatchEvent);goog.exportProperty(ol.geom.MultiPoint.prototype,"getRevision",ol.geom.MultiPoint.prototype.getRevision);goog.exportProperty(ol.geom.MultiPoint.prototype,"on",ol.geom.MultiPoint.prototype.on);goog.exportProperty(ol.geom.MultiPoint.prototype,"once",ol.geom.MultiPoint.prototype.once);goog.exportProperty(ol.geom.MultiPoint.prototype,"un",ol.geom.MultiPoint.prototype.un);goog.exportProperty(ol.geom.MultiPoint.prototype,"unByKey",ol.geom.MultiPoint.prototype.unByKey);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getFirstCoordinate",ol.geom.MultiPolygon.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getLastCoordinate",ol.geom.MultiPolygon.prototype.getLastCoordinate);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getLayout",ol.geom.MultiPolygon.prototype.getLayout);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getClosestPoint",ol.geom.MultiPolygon.prototype.getClosestPoint);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getExtent",ol.geom.MultiPolygon.prototype.getExtent);goog.exportProperty(ol.geom.MultiPolygon.prototype,"simplify",ol.geom.MultiPolygon.prototype.simplify);goog.exportProperty(ol.geom.MultiPolygon.prototype,"transform",ol.geom.MultiPolygon.prototype.transform);goog.exportProperty(ol.geom.MultiPolygon.prototype,"get",ol.geom.MultiPolygon.prototype.get);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getKeys",ol.geom.MultiPolygon.prototype.getKeys);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getProperties",ol.geom.MultiPolygon.prototype.getProperties);goog.exportProperty(ol.geom.MultiPolygon.prototype,"set",ol.geom.MultiPolygon.prototype.set);goog.exportProperty(ol.geom.MultiPolygon.prototype,"setProperties",ol.geom.MultiPolygon.prototype.setProperties);goog.exportProperty(ol.geom.MultiPolygon.prototype,"unset",ol.geom.MultiPolygon.prototype.unset);goog.exportProperty(ol.geom.MultiPolygon.prototype,"changed",ol.geom.MultiPolygon.prototype.changed);goog.exportProperty(ol.geom.MultiPolygon.prototype,"dispatchEvent",ol.geom.MultiPolygon.prototype.dispatchEvent);goog.exportProperty(ol.geom.MultiPolygon.prototype,"getRevision",ol.geom.MultiPolygon.prototype.getRevision);goog.exportProperty(ol.geom.MultiPolygon.prototype,"on",ol.geom.MultiPolygon.prototype.on);goog.exportProperty(ol.geom.MultiPolygon.prototype,"once",ol.geom.MultiPolygon.prototype.once);goog.exportProperty(ol.geom.MultiPolygon.prototype,"un",ol.geom.MultiPolygon.prototype.un);goog.exportProperty(ol.geom.MultiPolygon.prototype,"unByKey",ol.geom.MultiPolygon.prototype.unByKey);goog.exportProperty(ol.geom.Point.prototype,"getFirstCoordinate",ol.geom.Point.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.Point.prototype,"getLastCoordinate",ol.geom.Point.prototype.getLastCoordinate);goog.exportProperty(ol.geom.Point.prototype,"getLayout",ol.geom.Point.prototype.getLayout);goog.exportProperty(ol.geom.Point.prototype,"getClosestPoint",ol.geom.Point.prototype.getClosestPoint);goog.exportProperty(ol.geom.Point.prototype,"getExtent",ol.geom.Point.prototype.getExtent);goog.exportProperty(ol.geom.Point.prototype,"simplify",ol.geom.Point.prototype.simplify);goog.exportProperty(ol.geom.Point.prototype,"transform",ol.geom.Point.prototype.transform);goog.exportProperty(ol.geom.Point.prototype,"get",ol.geom.Point.prototype.get);goog.exportProperty(ol.geom.Point.prototype,"getKeys",ol.geom.Point.prototype.getKeys);goog.exportProperty(ol.geom.Point.prototype,"getProperties",ol.geom.Point.prototype.getProperties);goog.exportProperty(ol.geom.Point.prototype,"set",ol.geom.Point.prototype.set);goog.exportProperty(ol.geom.Point.prototype,"setProperties",ol.geom.Point.prototype.setProperties);goog.exportProperty(ol.geom.Point.prototype,"unset",ol.geom.Point.prototype.unset);goog.exportProperty(ol.geom.Point.prototype,"changed",ol.geom.Point.prototype.changed);goog.exportProperty(ol.geom.Point.prototype,"dispatchEvent",ol.geom.Point.prototype.dispatchEvent);goog.exportProperty(ol.geom.Point.prototype,"getRevision",ol.geom.Point.prototype.getRevision);goog.exportProperty(ol.geom.Point.prototype,"on",ol.geom.Point.prototype.on);goog.exportProperty(ol.geom.Point.prototype,"once",ol.geom.Point.prototype.once);goog.exportProperty(ol.geom.Point.prototype,"un",ol.geom.Point.prototype.un);goog.exportProperty(ol.geom.Point.prototype,"unByKey",ol.geom.Point.prototype.unByKey);goog.exportProperty(ol.geom.Polygon.prototype,"getFirstCoordinate",ol.geom.Polygon.prototype.getFirstCoordinate);goog.exportProperty(ol.geom.Polygon.prototype,"getLastCoordinate",ol.geom.Polygon.prototype.getLastCoordinate);goog.exportProperty(ol.geom.Polygon.prototype,"getLayout",ol.geom.Polygon.prototype.getLayout);goog.exportProperty(ol.geom.Polygon.prototype,"getClosestPoint",ol.geom.Polygon.prototype.getClosestPoint);goog.exportProperty(ol.geom.Polygon.prototype,"getExtent",ol.geom.Polygon.prototype.getExtent);goog.exportProperty(ol.geom.Polygon.prototype,"simplify",ol.geom.Polygon.prototype.simplify);goog.exportProperty(ol.geom.Polygon.prototype,"transform",ol.geom.Polygon.prototype.transform);goog.exportProperty(ol.geom.Polygon.prototype,"get",ol.geom.Polygon.prototype.get);goog.exportProperty(ol.geom.Polygon.prototype,"getKeys",ol.geom.Polygon.prototype.getKeys);goog.exportProperty(ol.geom.Polygon.prototype,"getProperties",ol.geom.Polygon.prototype.getProperties);goog.exportProperty(ol.geom.Polygon.prototype,"set",ol.geom.Polygon.prototype.set);goog.exportProperty(ol.geom.Polygon.prototype,"setProperties",ol.geom.Polygon.prototype.setProperties);goog.exportProperty(ol.geom.Polygon.prototype,"unset",ol.geom.Polygon.prototype.unset);goog.exportProperty(ol.geom.Polygon.prototype,"changed",ol.geom.Polygon.prototype.changed);goog.exportProperty(ol.geom.Polygon.prototype,"dispatchEvent",ol.geom.Polygon.prototype.dispatchEvent);goog.exportProperty(ol.geom.Polygon.prototype,"getRevision",ol.geom.Polygon.prototype.getRevision);goog.exportProperty(ol.geom.Polygon.prototype,"on",ol.geom.Polygon.prototype.on);goog.exportProperty(ol.geom.Polygon.prototype,"once",ol.geom.Polygon.prototype.once);goog.exportProperty(ol.geom.Polygon.prototype,"un",ol.geom.Polygon.prototype.un);goog.exportProperty(ol.geom.Polygon.prototype,"unByKey",ol.geom.Polygon.prototype.unByKey);goog.exportProperty(ol.ImageTile.prototype,"getTileCoord",ol.ImageTile.prototype.getTileCoord);goog.exportProperty(ol.interaction.Interaction.prototype,"get",ol.interaction.Interaction.prototype.get);goog.exportProperty(ol.interaction.Interaction.prototype,"getKeys",ol.interaction.Interaction.prototype.getKeys);goog.exportProperty(ol.interaction.Interaction.prototype,"getProperties",ol.interaction.Interaction.prototype.getProperties);goog.exportProperty(ol.interaction.Interaction.prototype,"set",ol.interaction.Interaction.prototype.set);goog.exportProperty(ol.interaction.Interaction.prototype,"setProperties",ol.interaction.Interaction.prototype.setProperties);goog.exportProperty(ol.interaction.Interaction.prototype,"unset",ol.interaction.Interaction.prototype.unset);goog.exportProperty(ol.interaction.Interaction.prototype,"changed",ol.interaction.Interaction.prototype.changed);goog.exportProperty(ol.interaction.Interaction.prototype,"dispatchEvent",ol.interaction.Interaction.prototype.dispatchEvent);goog.exportProperty(ol.interaction.Interaction.prototype,"getRevision",ol.interaction.Interaction.prototype.getRevision);goog.exportProperty(ol.interaction.Interaction.prototype,"on",ol.interaction.Interaction.prototype.on);goog.exportProperty(ol.interaction.Interaction.prototype,"once",ol.interaction.Interaction.prototype.once);goog.exportProperty(ol.interaction.Interaction.prototype,"un",ol.interaction.Interaction.prototype.un);goog.exportProperty(ol.interaction.Interaction.prototype,"unByKey",ol.interaction.Interaction.prototype.unByKey);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"getActive",ol.interaction.DoubleClickZoom.prototype.getActive);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"getMap",ol.interaction.DoubleClickZoom.prototype.getMap);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"setActive",ol.interaction.DoubleClickZoom.prototype.setActive);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"get",ol.interaction.DoubleClickZoom.prototype.get);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"getKeys",ol.interaction.DoubleClickZoom.prototype.getKeys);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"getProperties",ol.interaction.DoubleClickZoom.prototype.getProperties);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"set",ol.interaction.DoubleClickZoom.prototype.set);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"setProperties",ol.interaction.DoubleClickZoom.prototype.setProperties);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"unset",ol.interaction.DoubleClickZoom.prototype.unset);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"changed",ol.interaction.DoubleClickZoom.prototype.changed);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"dispatchEvent",ol.interaction.DoubleClickZoom.prototype.dispatchEvent);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"getRevision",ol.interaction.DoubleClickZoom.prototype.getRevision);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"on",ol.interaction.DoubleClickZoom.prototype.on);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"once",ol.interaction.DoubleClickZoom.prototype.once);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"un",ol.interaction.DoubleClickZoom.prototype.un);goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"unByKey",ol.interaction.DoubleClickZoom.prototype.unByKey);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"getActive",ol.interaction.DragAndDrop.prototype.getActive);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"getMap",ol.interaction.DragAndDrop.prototype.getMap);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"setActive",ol.interaction.DragAndDrop.prototype.setActive);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"get",ol.interaction.DragAndDrop.prototype.get);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"getKeys",ol.interaction.DragAndDrop.prototype.getKeys);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"getProperties",ol.interaction.DragAndDrop.prototype.getProperties);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"set",ol.interaction.DragAndDrop.prototype.set);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"setProperties",ol.interaction.DragAndDrop.prototype.setProperties);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"unset",ol.interaction.DragAndDrop.prototype.unset);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"changed",ol.interaction.DragAndDrop.prototype.changed);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"dispatchEvent",ol.interaction.DragAndDrop.prototype.dispatchEvent);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"getRevision",ol.interaction.DragAndDrop.prototype.getRevision);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"on",ol.interaction.DragAndDrop.prototype.on);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"once",ol.interaction.DragAndDrop.prototype.once);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"un",ol.interaction.DragAndDrop.prototype.un);goog.exportProperty(ol.interaction.DragAndDrop.prototype,"unByKey",ol.interaction.DragAndDrop.prototype.unByKey);goog.exportProperty(ol.interaction.Pointer.prototype,"getActive",ol.interaction.Pointer.prototype.getActive);goog.exportProperty(ol.interaction.Pointer.prototype,"getMap",ol.interaction.Pointer.prototype.getMap);goog.exportProperty(ol.interaction.Pointer.prototype,"setActive",ol.interaction.Pointer.prototype.setActive);goog.exportProperty(ol.interaction.Pointer.prototype,"get",ol.interaction.Pointer.prototype.get);goog.exportProperty(ol.interaction.Pointer.prototype,"getKeys",ol.interaction.Pointer.prototype.getKeys);goog.exportProperty(ol.interaction.Pointer.prototype,"getProperties",ol.interaction.Pointer.prototype.getProperties);goog.exportProperty(ol.interaction.Pointer.prototype,"set",ol.interaction.Pointer.prototype.set);goog.exportProperty(ol.interaction.Pointer.prototype,"setProperties",ol.interaction.Pointer.prototype.setProperties);goog.exportProperty(ol.interaction.Pointer.prototype,"unset",ol.interaction.Pointer.prototype.unset);goog.exportProperty(ol.interaction.Pointer.prototype,"changed",ol.interaction.Pointer.prototype.changed);goog.exportProperty(ol.interaction.Pointer.prototype,"dispatchEvent",ol.interaction.Pointer.prototype.dispatchEvent);goog.exportProperty(ol.interaction.Pointer.prototype,"getRevision",ol.interaction.Pointer.prototype.getRevision);goog.exportProperty(ol.interaction.Pointer.prototype,"on",ol.interaction.Pointer.prototype.on);goog.exportProperty(ol.interaction.Pointer.prototype,"once",ol.interaction.Pointer.prototype.once);goog.exportProperty(ol.interaction.Pointer.prototype,"un",ol.interaction.Pointer.prototype.un);goog.exportProperty(ol.interaction.Pointer.prototype,"unByKey",ol.interaction.Pointer.prototype.unByKey);goog.exportProperty(ol.interaction.DragBox.prototype,"getActive",ol.interaction.DragBox.prototype.getActive);goog.exportProperty(ol.interaction.DragBox.prototype,"getMap",ol.interaction.DragBox.prototype.getMap);goog.exportProperty(ol.interaction.DragBox.prototype,"setActive",ol.interaction.DragBox.prototype.setActive);goog.exportProperty(ol.interaction.DragBox.prototype,"get",ol.interaction.DragBox.prototype.get);goog.exportProperty(ol.interaction.DragBox.prototype,"getKeys",ol.interaction.DragBox.prototype.getKeys);goog.exportProperty(ol.interaction.DragBox.prototype,"getProperties",ol.interaction.DragBox.prototype.getProperties);goog.exportProperty(ol.interaction.DragBox.prototype,"set",ol.interaction.DragBox.prototype.set);goog.exportProperty(ol.interaction.DragBox.prototype,"setProperties",ol.interaction.DragBox.prototype.setProperties);goog.exportProperty(ol.interaction.DragBox.prototype,"unset",ol.interaction.DragBox.prototype.unset);goog.exportProperty(ol.interaction.DragBox.prototype,"changed",ol.interaction.DragBox.prototype.changed);goog.exportProperty(ol.interaction.DragBox.prototype,"dispatchEvent",ol.interaction.DragBox.prototype.dispatchEvent);goog.exportProperty(ol.interaction.DragBox.prototype,"getRevision",ol.interaction.DragBox.prototype.getRevision);goog.exportProperty(ol.interaction.DragBox.prototype,"on",ol.interaction.DragBox.prototype.on);goog.exportProperty(ol.interaction.DragBox.prototype,"once",ol.interaction.DragBox.prototype.once);goog.exportProperty(ol.interaction.DragBox.prototype,"un",ol.interaction.DragBox.prototype.un);goog.exportProperty(ol.interaction.DragBox.prototype,"unByKey",ol.interaction.DragBox.prototype.unByKey);goog.exportProperty(ol.interaction.DragPan.prototype,"getActive",ol.interaction.DragPan.prototype.getActive);goog.exportProperty(ol.interaction.DragPan.prototype,"getMap",ol.interaction.DragPan.prototype.getMap);goog.exportProperty(ol.interaction.DragPan.prototype,"setActive",ol.interaction.DragPan.prototype.setActive);goog.exportProperty(ol.interaction.DragPan.prototype,"get",ol.interaction.DragPan.prototype.get);goog.exportProperty(ol.interaction.DragPan.prototype,"getKeys",ol.interaction.DragPan.prototype.getKeys);goog.exportProperty(ol.interaction.DragPan.prototype,"getProperties",ol.interaction.DragPan.prototype.getProperties);goog.exportProperty(ol.interaction.DragPan.prototype,"set",ol.interaction.DragPan.prototype.set);goog.exportProperty(ol.interaction.DragPan.prototype,"setProperties",ol.interaction.DragPan.prototype.setProperties);goog.exportProperty(ol.interaction.DragPan.prototype,"unset",ol.interaction.DragPan.prototype.unset);goog.exportProperty(ol.interaction.DragPan.prototype,"changed",ol.interaction.DragPan.prototype.changed);goog.exportProperty(ol.interaction.DragPan.prototype,"dispatchEvent",ol.interaction.DragPan.prototype.dispatchEvent);goog.exportProperty(ol.interaction.DragPan.prototype,"getRevision",ol.interaction.DragPan.prototype.getRevision);goog.exportProperty(ol.interaction.DragPan.prototype,"on",ol.interaction.DragPan.prototype.on);goog.exportProperty(ol.interaction.DragPan.prototype,"once",ol.interaction.DragPan.prototype.once);goog.exportProperty(ol.interaction.DragPan.prototype,"un",ol.interaction.DragPan.prototype.un);goog.exportProperty(ol.interaction.DragPan.prototype,"unByKey",ol.interaction.DragPan.prototype.unByKey);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"getActive",ol.interaction.DragRotateAndZoom.prototype.getActive);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"getMap",ol.interaction.DragRotateAndZoom.prototype.getMap);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"setActive",ol.interaction.DragRotateAndZoom.prototype.setActive);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"get",ol.interaction.DragRotateAndZoom.prototype.get);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"getKeys",ol.interaction.DragRotateAndZoom.prototype.getKeys)
;goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"getProperties",ol.interaction.DragRotateAndZoom.prototype.getProperties);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"set",ol.interaction.DragRotateAndZoom.prototype.set);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"setProperties",ol.interaction.DragRotateAndZoom.prototype.setProperties);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"unset",ol.interaction.DragRotateAndZoom.prototype.unset);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"changed",ol.interaction.DragRotateAndZoom.prototype.changed);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"dispatchEvent",ol.interaction.DragRotateAndZoom.prototype.dispatchEvent);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"getRevision",ol.interaction.DragRotateAndZoom.prototype.getRevision);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"on",ol.interaction.DragRotateAndZoom.prototype.on);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"once",ol.interaction.DragRotateAndZoom.prototype.once);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"un",ol.interaction.DragRotateAndZoom.prototype.un);goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"unByKey",ol.interaction.DragRotateAndZoom.prototype.unByKey);goog.exportProperty(ol.interaction.DragRotate.prototype,"getActive",ol.interaction.DragRotate.prototype.getActive);goog.exportProperty(ol.interaction.DragRotate.prototype,"getMap",ol.interaction.DragRotate.prototype.getMap);goog.exportProperty(ol.interaction.DragRotate.prototype,"setActive",ol.interaction.DragRotate.prototype.setActive);goog.exportProperty(ol.interaction.DragRotate.prototype,"get",ol.interaction.DragRotate.prototype.get);goog.exportProperty(ol.interaction.DragRotate.prototype,"getKeys",ol.interaction.DragRotate.prototype.getKeys);goog.exportProperty(ol.interaction.DragRotate.prototype,"getProperties",ol.interaction.DragRotate.prototype.getProperties);goog.exportProperty(ol.interaction.DragRotate.prototype,"set",ol.interaction.DragRotate.prototype.set);goog.exportProperty(ol.interaction.DragRotate.prototype,"setProperties",ol.interaction.DragRotate.prototype.setProperties);goog.exportProperty(ol.interaction.DragRotate.prototype,"unset",ol.interaction.DragRotate.prototype.unset);goog.exportProperty(ol.interaction.DragRotate.prototype,"changed",ol.interaction.DragRotate.prototype.changed);goog.exportProperty(ol.interaction.DragRotate.prototype,"dispatchEvent",ol.interaction.DragRotate.prototype.dispatchEvent);goog.exportProperty(ol.interaction.DragRotate.prototype,"getRevision",ol.interaction.DragRotate.prototype.getRevision);goog.exportProperty(ol.interaction.DragRotate.prototype,"on",ol.interaction.DragRotate.prototype.on);goog.exportProperty(ol.interaction.DragRotate.prototype,"once",ol.interaction.DragRotate.prototype.once);goog.exportProperty(ol.interaction.DragRotate.prototype,"un",ol.interaction.DragRotate.prototype.un);goog.exportProperty(ol.interaction.DragRotate.prototype,"unByKey",ol.interaction.DragRotate.prototype.unByKey);goog.exportProperty(ol.interaction.DragZoom.prototype,"getGeometry",ol.interaction.DragZoom.prototype.getGeometry);goog.exportProperty(ol.interaction.DragZoom.prototype,"getActive",ol.interaction.DragZoom.prototype.getActive);goog.exportProperty(ol.interaction.DragZoom.prototype,"getMap",ol.interaction.DragZoom.prototype.getMap);goog.exportProperty(ol.interaction.DragZoom.prototype,"setActive",ol.interaction.DragZoom.prototype.setActive);goog.exportProperty(ol.interaction.DragZoom.prototype,"get",ol.interaction.DragZoom.prototype.get);goog.exportProperty(ol.interaction.DragZoom.prototype,"getKeys",ol.interaction.DragZoom.prototype.getKeys);goog.exportProperty(ol.interaction.DragZoom.prototype,"getProperties",ol.interaction.DragZoom.prototype.getProperties);goog.exportProperty(ol.interaction.DragZoom.prototype,"set",ol.interaction.DragZoom.prototype.set);goog.exportProperty(ol.interaction.DragZoom.prototype,"setProperties",ol.interaction.DragZoom.prototype.setProperties);goog.exportProperty(ol.interaction.DragZoom.prototype,"unset",ol.interaction.DragZoom.prototype.unset);goog.exportProperty(ol.interaction.DragZoom.prototype,"changed",ol.interaction.DragZoom.prototype.changed);goog.exportProperty(ol.interaction.DragZoom.prototype,"dispatchEvent",ol.interaction.DragZoom.prototype.dispatchEvent);goog.exportProperty(ol.interaction.DragZoom.prototype,"getRevision",ol.interaction.DragZoom.prototype.getRevision);goog.exportProperty(ol.interaction.DragZoom.prototype,"on",ol.interaction.DragZoom.prototype.on);goog.exportProperty(ol.interaction.DragZoom.prototype,"once",ol.interaction.DragZoom.prototype.once);goog.exportProperty(ol.interaction.DragZoom.prototype,"un",ol.interaction.DragZoom.prototype.un);goog.exportProperty(ol.interaction.DragZoom.prototype,"unByKey",ol.interaction.DragZoom.prototype.unByKey);goog.exportProperty(ol.interaction.Draw.prototype,"getActive",ol.interaction.Draw.prototype.getActive);goog.exportProperty(ol.interaction.Draw.prototype,"getMap",ol.interaction.Draw.prototype.getMap);goog.exportProperty(ol.interaction.Draw.prototype,"setActive",ol.interaction.Draw.prototype.setActive);goog.exportProperty(ol.interaction.Draw.prototype,"get",ol.interaction.Draw.prototype.get);goog.exportProperty(ol.interaction.Draw.prototype,"getKeys",ol.interaction.Draw.prototype.getKeys);goog.exportProperty(ol.interaction.Draw.prototype,"getProperties",ol.interaction.Draw.prototype.getProperties);goog.exportProperty(ol.interaction.Draw.prototype,"set",ol.interaction.Draw.prototype.set);goog.exportProperty(ol.interaction.Draw.prototype,"setProperties",ol.interaction.Draw.prototype.setProperties);goog.exportProperty(ol.interaction.Draw.prototype,"unset",ol.interaction.Draw.prototype.unset);goog.exportProperty(ol.interaction.Draw.prototype,"changed",ol.interaction.Draw.prototype.changed);goog.exportProperty(ol.interaction.Draw.prototype,"dispatchEvent",ol.interaction.Draw.prototype.dispatchEvent);goog.exportProperty(ol.interaction.Draw.prototype,"getRevision",ol.interaction.Draw.prototype.getRevision);goog.exportProperty(ol.interaction.Draw.prototype,"on",ol.interaction.Draw.prototype.on);goog.exportProperty(ol.interaction.Draw.prototype,"once",ol.interaction.Draw.prototype.once);goog.exportProperty(ol.interaction.Draw.prototype,"un",ol.interaction.Draw.prototype.un);goog.exportProperty(ol.interaction.Draw.prototype,"unByKey",ol.interaction.Draw.prototype.unByKey);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"getActive",ol.interaction.KeyboardPan.prototype.getActive);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"getMap",ol.interaction.KeyboardPan.prototype.getMap);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"setActive",ol.interaction.KeyboardPan.prototype.setActive);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"get",ol.interaction.KeyboardPan.prototype.get);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"getKeys",ol.interaction.KeyboardPan.prototype.getKeys);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"getProperties",ol.interaction.KeyboardPan.prototype.getProperties);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"set",ol.interaction.KeyboardPan.prototype.set);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"setProperties",ol.interaction.KeyboardPan.prototype.setProperties);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"unset",ol.interaction.KeyboardPan.prototype.unset);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"changed",ol.interaction.KeyboardPan.prototype.changed);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"dispatchEvent",ol.interaction.KeyboardPan.prototype.dispatchEvent);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"getRevision",ol.interaction.KeyboardPan.prototype.getRevision);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"on",ol.interaction.KeyboardPan.prototype.on);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"once",ol.interaction.KeyboardPan.prototype.once);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"un",ol.interaction.KeyboardPan.prototype.un);goog.exportProperty(ol.interaction.KeyboardPan.prototype,"unByKey",ol.interaction.KeyboardPan.prototype.unByKey);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"getActive",ol.interaction.KeyboardZoom.prototype.getActive);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"getMap",ol.interaction.KeyboardZoom.prototype.getMap);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"setActive",ol.interaction.KeyboardZoom.prototype.setActive);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"get",ol.interaction.KeyboardZoom.prototype.get);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"getKeys",ol.interaction.KeyboardZoom.prototype.getKeys);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"getProperties",ol.interaction.KeyboardZoom.prototype.getProperties);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"set",ol.interaction.KeyboardZoom.prototype.set);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"setProperties",ol.interaction.KeyboardZoom.prototype.setProperties);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"unset",ol.interaction.KeyboardZoom.prototype.unset);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"changed",ol.interaction.KeyboardZoom.prototype.changed);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"dispatchEvent",ol.interaction.KeyboardZoom.prototype.dispatchEvent);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"getRevision",ol.interaction.KeyboardZoom.prototype.getRevision);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"on",ol.interaction.KeyboardZoom.prototype.on);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"once",ol.interaction.KeyboardZoom.prototype.once);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"un",ol.interaction.KeyboardZoom.prototype.un);goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"unByKey",ol.interaction.KeyboardZoom.prototype.unByKey);goog.exportProperty(ol.interaction.Modify.prototype,"getActive",ol.interaction.Modify.prototype.getActive);goog.exportProperty(ol.interaction.Modify.prototype,"getMap",ol.interaction.Modify.prototype.getMap);goog.exportProperty(ol.interaction.Modify.prototype,"setActive",ol.interaction.Modify.prototype.setActive);goog.exportProperty(ol.interaction.Modify.prototype,"get",ol.interaction.Modify.prototype.get);goog.exportProperty(ol.interaction.Modify.prototype,"getKeys",ol.interaction.Modify.prototype.getKeys);goog.exportProperty(ol.interaction.Modify.prototype,"getProperties",ol.interaction.Modify.prototype.getProperties);goog.exportProperty(ol.interaction.Modify.prototype,"set",ol.interaction.Modify.prototype.set);goog.exportProperty(ol.interaction.Modify.prototype,"setProperties",ol.interaction.Modify.prototype.setProperties);goog.exportProperty(ol.interaction.Modify.prototype,"unset",ol.interaction.Modify.prototype.unset);goog.exportProperty(ol.interaction.Modify.prototype,"changed",ol.interaction.Modify.prototype.changed);goog.exportProperty(ol.interaction.Modify.prototype,"dispatchEvent",ol.interaction.Modify.prototype.dispatchEvent);goog.exportProperty(ol.interaction.Modify.prototype,"getRevision",ol.interaction.Modify.prototype.getRevision);goog.exportProperty(ol.interaction.Modify.prototype,"on",ol.interaction.Modify.prototype.on);goog.exportProperty(ol.interaction.Modify.prototype,"once",ol.interaction.Modify.prototype.once);goog.exportProperty(ol.interaction.Modify.prototype,"un",ol.interaction.Modify.prototype.un);goog.exportProperty(ol.interaction.Modify.prototype,"unByKey",ol.interaction.Modify.prototype.unByKey);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"getActive",ol.interaction.MouseWheelZoom.prototype.getActive);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"getMap",ol.interaction.MouseWheelZoom.prototype.getMap);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"setActive",ol.interaction.MouseWheelZoom.prototype.setActive);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"get",ol.interaction.MouseWheelZoom.prototype.get);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"getKeys",ol.interaction.MouseWheelZoom.prototype.getKeys);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"getProperties",ol.interaction.MouseWheelZoom.prototype.getProperties);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"set",ol.interaction.MouseWheelZoom.prototype.set);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"setProperties",ol.interaction.MouseWheelZoom.prototype.setProperties);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"unset",ol.interaction.MouseWheelZoom.prototype.unset);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"changed",ol.interaction.MouseWheelZoom.prototype.changed);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"dispatchEvent",ol.interaction.MouseWheelZoom.prototype.dispatchEvent);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"getRevision",ol.interaction.MouseWheelZoom.prototype.getRevision);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"on",ol.interaction.MouseWheelZoom.prototype.on);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"once",ol.interaction.MouseWheelZoom.prototype.once);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"un",ol.interaction.MouseWheelZoom.prototype.un);goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"unByKey",ol.interaction.MouseWheelZoom.prototype.unByKey);goog.exportProperty(ol.interaction.PinchRotate.prototype,"getActive",ol.interaction.PinchRotate.prototype.getActive);goog.exportProperty(ol.interaction.PinchRotate.prototype,"getMap",ol.interaction.PinchRotate.prototype.getMap);goog.exportProperty(ol.interaction.PinchRotate.prototype,"setActive",ol.interaction.PinchRotate.prototype.setActive);goog.exportProperty(ol.interaction.PinchRotate.prototype,"get",ol.interaction.PinchRotate.prototype.get);goog.exportProperty(ol.interaction.PinchRotate.prototype,"getKeys",ol.interaction.PinchRotate.prototype.getKeys);goog.exportProperty(ol.interaction.PinchRotate.prototype,"getProperties",ol.interaction.PinchRotate.prototype.getProperties);goog.exportProperty(ol.interaction.PinchRotate.prototype,"set",ol.interaction.PinchRotate.prototype.set);goog.exportProperty(ol.interaction.PinchRotate.prototype,"setProperties",ol.interaction.PinchRotate.prototype.setProperties);goog.exportProperty(ol.interaction.PinchRotate.prototype,"unset",ol.interaction.PinchRotate.prototype.unset);goog.exportProperty(ol.interaction.PinchRotate.prototype,"changed",ol.interaction.PinchRotate.prototype.changed);goog.exportProperty(ol.interaction.PinchRotate.prototype,"dispatchEvent",ol.interaction.PinchRotate.prototype.dispatchEvent);goog.exportProperty(ol.interaction.PinchRotate.prototype,"getRevision",ol.interaction.PinchRotate.prototype.getRevision);goog.exportProperty(ol.interaction.PinchRotate.prototype,"on",ol.interaction.PinchRotate.prototype.on);goog.exportProperty(ol.interaction.PinchRotate.prototype,"once",ol.interaction.PinchRotate.prototype.once);goog.exportProperty(ol.interaction.PinchRotate.prototype,"un",ol.interaction.PinchRotate.prototype.un);goog.exportProperty(ol.interaction.PinchRotate.prototype,"unByKey",ol.interaction.PinchRotate.prototype.unByKey);goog.exportProperty(ol.interaction.PinchZoom.prototype,"getActive",ol.interaction.PinchZoom.prototype.getActive);goog.exportProperty(ol.interaction.PinchZoom.prototype,"getMap",ol.interaction.PinchZoom.prototype.getMap);goog.exportProperty(ol.interaction.PinchZoom.prototype,"setActive",ol.interaction.PinchZoom.prototype.setActive);goog.exportProperty(ol.interaction.PinchZoom.prototype,"get",ol.interaction.PinchZoom.prototype.get);goog.exportProperty(ol.interaction.PinchZoom.prototype,"getKeys",ol.interaction.PinchZoom.prototype.getKeys);goog.exportProperty(ol.interaction.PinchZoom.prototype,"getProperties",ol.interaction.PinchZoom.prototype.getProperties);goog.exportProperty(ol.interaction.PinchZoom.prototype,"set",ol.interaction.PinchZoom.prototype.set);goog.exportProperty(ol.interaction.PinchZoom.prototype,"setProperties",ol.interaction.PinchZoom.prototype.setProperties);goog.exportProperty(ol.interaction.PinchZoom.prototype,"unset",ol.interaction.PinchZoom.prototype.unset);goog.exportProperty(ol.interaction.PinchZoom.prototype,"changed",ol.interaction.PinchZoom.prototype.changed);goog.exportProperty(ol.interaction.PinchZoom.prototype,"dispatchEvent",ol.interaction.PinchZoom.prototype.dispatchEvent);goog.exportProperty(ol.interaction.PinchZoom.prototype,"getRevision",ol.interaction.PinchZoom.prototype.getRevision);goog.exportProperty(ol.interaction.PinchZoom.prototype,"on",ol.interaction.PinchZoom.prototype.on);goog.exportProperty(ol.interaction.PinchZoom.prototype,"once",ol.interaction.PinchZoom.prototype.once);goog.exportProperty(ol.interaction.PinchZoom.prototype,"un",ol.interaction.PinchZoom.prototype.un);goog.exportProperty(ol.interaction.PinchZoom.prototype,"unByKey",ol.interaction.PinchZoom.prototype.unByKey);goog.exportProperty(ol.interaction.Select.prototype,"getActive",ol.interaction.Select.prototype.getActive);goog.exportProperty(ol.interaction.Select.prototype,"getMap",ol.interaction.Select.prototype.getMap);goog.exportProperty(ol.interaction.Select.prototype,"setActive",ol.interaction.Select.prototype.setActive);goog.exportProperty(ol.interaction.Select.prototype,"get",ol.interaction.Select.prototype.get);goog.exportProperty(ol.interaction.Select.prototype,"getKeys",ol.interaction.Select.prototype.getKeys);goog.exportProperty(ol.interaction.Select.prototype,"getProperties",ol.interaction.Select.prototype.getProperties);goog.exportProperty(ol.interaction.Select.prototype,"set",ol.interaction.Select.prototype.set);goog.exportProperty(ol.interaction.Select.prototype,"setProperties",ol.interaction.Select.prototype.setProperties);goog.exportProperty(ol.interaction.Select.prototype,"unset",ol.interaction.Select.prototype.unset);goog.exportProperty(ol.interaction.Select.prototype,"changed",ol.interaction.Select.prototype.changed);goog.exportProperty(ol.interaction.Select.prototype,"dispatchEvent",ol.interaction.Select.prototype.dispatchEvent);goog.exportProperty(ol.interaction.Select.prototype,"getRevision",ol.interaction.Select.prototype.getRevision);goog.exportProperty(ol.interaction.Select.prototype,"on",ol.interaction.Select.prototype.on);goog.exportProperty(ol.interaction.Select.prototype,"once",ol.interaction.Select.prototype.once);goog.exportProperty(ol.interaction.Select.prototype,"un",ol.interaction.Select.prototype.un);goog.exportProperty(ol.interaction.Select.prototype,"unByKey",ol.interaction.Select.prototype.unByKey);goog.exportProperty(ol.interaction.Snap.prototype,"getActive",ol.interaction.Snap.prototype.getActive);goog.exportProperty(ol.interaction.Snap.prototype,"getMap",ol.interaction.Snap.prototype.getMap);goog.exportProperty(ol.interaction.Snap.prototype,"setActive",ol.interaction.Snap.prototype.setActive);goog.exportProperty(ol.interaction.Snap.prototype,"get",ol.interaction.Snap.prototype.get);goog.exportProperty(ol.interaction.Snap.prototype,"getKeys",ol.interaction.Snap.prototype.getKeys);goog.exportProperty(ol.interaction.Snap.prototype,"getProperties",ol.interaction.Snap.prototype.getProperties);goog.exportProperty(ol.interaction.Snap.prototype,"set",ol.interaction.Snap.prototype.set);goog.exportProperty(ol.interaction.Snap.prototype,"setProperties",ol.interaction.Snap.prototype.setProperties);goog.exportProperty(ol.interaction.Snap.prototype,"unset",ol.interaction.Snap.prototype.unset);goog.exportProperty(ol.interaction.Snap.prototype,"changed",ol.interaction.Snap.prototype.changed);goog.exportProperty(ol.interaction.Snap.prototype,"dispatchEvent",ol.interaction.Snap.prototype.dispatchEvent);goog.exportProperty(ol.interaction.Snap.prototype,"getRevision",ol.interaction.Snap.prototype.getRevision);goog.exportProperty(ol.interaction.Snap.prototype,"on",ol.interaction.Snap.prototype.on);goog.exportProperty(ol.interaction.Snap.prototype,"once",ol.interaction.Snap.prototype.once);goog.exportProperty(ol.interaction.Snap.prototype,"un",ol.interaction.Snap.prototype.un);goog.exportProperty(ol.interaction.Snap.prototype,"unByKey",ol.interaction.Snap.prototype.unByKey);goog.exportProperty(ol.interaction.Translate.prototype,"getActive",ol.interaction.Translate.prototype.getActive);goog.exportProperty(ol.interaction.Translate.prototype,"getMap",ol.interaction.Translate.prototype.getMap);goog.exportProperty(ol.interaction.Translate.prototype,"setActive",ol.interaction.Translate.prototype.setActive);goog.exportProperty(ol.interaction.Translate.prototype,"get",ol.interaction.Translate.prototype.get);goog.exportProperty(ol.interaction.Translate.prototype,"getKeys",ol.interaction.Translate.prototype.getKeys);goog.exportProperty(ol.interaction.Translate.prototype,"getProperties",ol.interaction.Translate.prototype.getProperties);goog.exportProperty(ol.interaction.Translate.prototype,"set",ol.interaction.Translate.prototype.set);goog.exportProperty(ol.interaction.Translate.prototype,"setProperties",ol.interaction.Translate.prototype.setProperties);goog.exportProperty(ol.interaction.Translate.prototype,"unset",ol.interaction.Translate.prototype.unset);goog.exportProperty(ol.interaction.Translate.prototype,"changed",ol.interaction.Translate.prototype.changed);goog.exportProperty(ol.interaction.Translate.prototype,"dispatchEvent",ol.interaction.Translate.prototype.dispatchEvent);goog.exportProperty(ol.interaction.Translate.prototype,"getRevision",ol.interaction.Translate.prototype.getRevision);goog.exportProperty(ol.interaction.Translate.prototype,"on",ol.interaction.Translate.prototype.on);goog.exportProperty(ol.interaction.Translate.prototype,"once",ol.interaction.Translate.prototype.once);goog.exportProperty(ol.interaction.Translate.prototype,"un",ol.interaction.Translate.prototype.un);goog.exportProperty(ol.interaction.Translate.prototype,"unByKey",ol.interaction.Translate.prototype.unByKey);goog.exportProperty(ol.layer.Base.prototype,"get",ol.layer.Base.prototype.get);goog.exportProperty(ol.layer.Base.prototype,"getKeys",ol.layer.Base.prototype.getKeys);goog.exportProperty(ol.layer.Base.prototype,"getProperties",ol.layer.Base.prototype.getProperties);goog.exportProperty(ol.layer.Base.prototype,"set",ol.layer.Base.prototype.set);goog.exportProperty(ol.layer.Base.prototype,"setProperties",ol.layer.Base.prototype.setProperties);goog.exportProperty(ol.layer.Base.prototype,"unset",ol.layer.Base.prototype.unset);goog.exportProperty(ol.layer.Base.prototype,"changed",ol.layer.Base.prototype.changed);goog.exportProperty(ol.layer.Base.prototype,"dispatchEvent",ol.layer.Base.prototype.dispatchEvent);goog.exportProperty(ol.layer.Base.prototype,"getRevision",ol.layer.Base.prototype.getRevision);goog.exportProperty(ol.layer.Base.prototype,"on",ol.layer.Base.prototype.on);goog.exportProperty(ol.layer.Base.prototype,"once",ol.layer.Base.prototype.once);goog.exportProperty(ol.layer.Base.prototype,"un",ol.layer.Base.prototype.un);goog.exportProperty(ol.layer.Base.prototype,"unByKey",ol.layer.Base.prototype.unByKey);goog.exportProperty(ol.layer.Layer.prototype,"getExtent",ol.layer.Layer.prototype.getExtent);goog.exportProperty(ol.layer.Layer.prototype,"getMaxResolution",ol.layer.Layer.prototype.getMaxResolution);goog.exportProperty(ol.layer.Layer.prototype,"getMinResolution",ol.layer.Layer.prototype.getMinResolution);goog.exportProperty(ol.layer.Layer.prototype,"getOpacity",ol.layer.Layer.prototype.getOpacity);goog.exportProperty(ol.layer.Layer.prototype,"getVisible",ol.layer.Layer.prototype.getVisible);goog.exportProperty(ol.layer.Layer.prototype,"getZIndex",ol.layer.Layer.prototype.getZIndex);goog.exportProperty(ol.layer.Layer.prototype,"setExtent",ol.layer.Layer.prototype.setExtent);goog.exportProperty(ol.layer.Layer.prototype,"setMaxResolution",ol.layer.Layer.prototype.setMaxResolution);goog.exportProperty(ol.layer.Layer.prototype,"setMinResolution",ol.layer.Layer.prototype.setMinResolution);goog.exportProperty(ol.layer.Layer.prototype,"setOpacity",ol.layer.Layer.prototype.setOpacity);goog.exportProperty(ol.layer.Layer.prototype,"setVisible",ol.layer.Layer.prototype.setVisible);goog.exportProperty(ol.layer.Layer.prototype,"setZIndex",ol.layer.Layer.prototype.setZIndex);goog.exportProperty(ol.layer.Layer.prototype,"get",ol.layer.Layer.prototype.get);goog.exportProperty(ol.layer.Layer.prototype,"getKeys",ol.layer.Layer.prototype.getKeys);goog.exportProperty(ol.layer.Layer.prototype,"getProperties",ol.layer.Layer.prototype.getProperties);goog.exportProperty(ol.layer.Layer.prototype,"set",ol.layer.Layer.prototype.set);goog.exportProperty(ol.layer.Layer.prototype,"setProperties",ol.layer.Layer.prototype.setProperties);goog.exportProperty(ol.layer.Layer.prototype,"unset",ol.layer.Layer.prototype.unset);goog.exportProperty(ol.layer.Layer.prototype,"changed",ol.layer.Layer.prototype.changed);goog.exportProperty(ol.layer.Layer.prototype,"dispatchEvent",ol.layer.Layer.prototype.dispatchEvent);goog.exportProperty(ol.layer.Layer.prototype,"getRevision",ol.layer.Layer.prototype.getRevision);goog.exportProperty(ol.layer.Layer.prototype,"on",ol.layer.Layer.prototype.on);goog.exportProperty(ol.layer.Layer.prototype,"once",ol.layer.Layer.prototype.once);goog.exportProperty(ol.layer.Layer.prototype,"un",ol.layer.Layer.prototype.un);goog.exportProperty(ol.layer.Layer.prototype,"unByKey",ol.layer.Layer.prototype.unByKey);goog.exportProperty(ol.layer.Vector.prototype,"setMap",ol.layer.Vector.prototype.setMap);goog.exportProperty(ol.layer.Vector.prototype,"setSource",ol.layer.Vector.prototype.setSource);goog.exportProperty(ol.layer.Vector.prototype,"getExtent",ol.layer.Vector.prototype.getExtent);goog.exportProperty(ol.layer.Vector.prototype,"getMaxResolution",ol.layer.Vector.prototype.getMaxResolution);goog.exportProperty(ol.layer.Vector.prototype,"getMinResolution",ol.layer.Vector.prototype.getMinResolution);goog.exportProperty(ol.layer.Vector.prototype,"getOpacity",ol.layer.Vector.prototype.getOpacity);goog.exportProperty(ol.layer.Vector.prototype,"getVisible",ol.layer.Vector.prototype.getVisible);goog.exportProperty(ol.layer.Vector.prototype,"getZIndex",ol.layer.Vector.prototype.getZIndex);goog.exportProperty(ol.layer.Vector.prototype,"setExtent",ol.layer.Vector.prototype.setExtent);goog.exportProperty(ol.layer.Vector.prototype,"setMaxResolution",ol.layer.Vector.prototype.setMaxResolution);goog.exportProperty(ol.layer.Vector.prototype,"setMinResolution",ol.layer.Vector.prototype.setMinResolution);goog.exportProperty(ol.layer.Vector.prototype,"setOpacity",ol.layer.Vector.prototype.setOpacity);goog.exportProperty(ol.layer.Vector.prototype,"setVisible",ol.layer.Vector.prototype.setVisible);goog.exportProperty(ol.layer.Vector.prototype,"setZIndex",ol.layer.Vector.prototype.setZIndex);goog.exportProperty(ol.layer.Vector.prototype,"get",ol.layer.Vector.prototype.get);goog.exportProperty(ol.layer.Vector.prototype,"getKeys",ol.layer.Vector.prototype.getKeys);goog.exportProperty(ol.layer.Vector.prototype,"getProperties",ol.layer.Vector.prototype.getProperties);goog.exportProperty(ol.layer.Vector.prototype,"set",ol.layer.Vector.prototype.set);goog.exportProperty(ol.layer.Vector.prototype,"setProperties",ol.layer.Vector.prototype.setProperties);goog.exportProperty(ol.layer.Vector.prototype,"unset",ol.layer.Vector.prototype.unset);goog.exportProperty(ol.layer.Vector.prototype,"changed",ol.layer.Vector.prototype.changed);goog.exportProperty(ol.layer.Vector.prototype,"dispatchEvent",ol.layer.Vector.prototype.dispatchEvent);goog.exportProperty(ol.layer.Vector.prototype,"getRevision",ol.layer.Vector.prototype.getRevision);goog.exportProperty(ol.layer.Vector.prototype,"on",ol.layer.Vector.prototype.on);goog.exportProperty(ol.layer.Vector.prototype,"once",ol.layer.Vector.prototype.once);goog.exportProperty(ol.layer.Vector.prototype,"un",ol.layer.Vector.prototype.un);goog.exportProperty(ol.layer.Vector.prototype,"unByKey",ol.layer.Vector.prototype.unByKey);goog.exportProperty(ol.layer.Heatmap.prototype,"getSource",ol.layer.Heatmap.prototype.getSource);goog.exportProperty(ol.layer.Heatmap.prototype,"getStyle",ol.layer.Heatmap.prototype.getStyle);goog.exportProperty(ol.layer.Heatmap.prototype,"getStyleFunction",ol.layer.Heatmap.prototype.getStyleFunction);goog.exportProperty(ol.layer.Heatmap.prototype,"setStyle",ol.layer.Heatmap.prototype.setStyle);goog.exportProperty(ol.layer.Heatmap.prototype,"setMap",ol.layer.Heatmap.prototype.setMap);goog.exportProperty(ol.layer.Heatmap.prototype,"setSource",ol.layer.Heatmap.prototype.setSource);goog.exportProperty(ol.layer.Heatmap.prototype,"getExtent",ol.layer.Heatmap.prototype.getExtent);goog.exportProperty(ol.layer.Heatmap.prototype,"getMaxResolution",ol.layer.Heatmap.prototype.getMaxResolution);goog.exportProperty(ol.layer.Heatmap.prototype,"getMinResolution",ol.layer.Heatmap.prototype.getMinResolution);goog.exportProperty(ol.layer.Heatmap.prototype,"getOpacity",ol.layer.Heatmap.prototype.getOpacity);goog.exportProperty(ol.layer.Heatmap.prototype,"getVisible",ol.layer.Heatmap.prototype.getVisible);goog.exportProperty(ol.layer.Heatmap.prototype,"getZIndex",ol.layer.Heatmap.prototype.getZIndex);goog.exportProperty(ol.layer.Heatmap.prototype,"setExtent",ol.layer.Heatmap.prototype.setExtent);goog.exportProperty(ol.layer.Heatmap.prototype,"setMaxResolution",ol.layer.Heatmap.prototype.setMaxResolution);goog.exportProperty(ol.layer.Heatmap.prototype,"setMinResolution",ol.layer.Heatmap.prototype.setMinResolution);goog.exportProperty(ol.layer.Heatmap.prototype,"setOpacity",ol.layer.Heatmap.prototype.setOpacity);goog.exportProperty(ol.layer.Heatmap.prototype,"setVisible",ol.layer.Heatmap.prototype.setVisible);goog.exportProperty(ol.layer.Heatmap.prototype,"setZIndex",ol.layer.Heatmap.prototype.setZIndex);goog.exportProperty(ol.layer.Heatmap.prototype,"get",ol.layer.Heatmap.prototype.get);goog.exportProperty(ol.layer.Heatmap.prototype,"getKeys",ol.layer.Heatmap.prototype.getKeys);goog.exportProperty(ol.layer.Heatmap.prototype,"getProperties",ol.layer.Heatmap.prototype.getProperties);goog.exportProperty(ol.layer.Heatmap.prototype,"set",ol.layer.Heatmap.prototype.set);goog.exportProperty(ol.layer.Heatmap.prototype,"setProperties",ol.layer.Heatmap.prototype.setProperties);goog.exportProperty(ol.layer.Heatmap.prototype,"unset",ol.layer.Heatmap.prototype.unset);goog.exportProperty(ol.layer.Heatmap.prototype,"changed",ol.layer.Heatmap.prototype.changed);goog.exportProperty(ol.layer.Heatmap.prototype,"dispatchEvent",ol.layer.Heatmap.prototype.dispatchEvent);goog.exportProperty(ol.layer.Heatmap.prototype,"getRevision",ol.layer.Heatmap.prototype.getRevision);goog.exportProperty(ol.layer.Heatmap.prototype,"on",ol.layer.Heatmap.prototype.on);goog.exportProperty(ol.layer.Heatmap.prototype,"once",ol.layer.Heatmap.prototype.once);goog.exportProperty(ol.layer.Heatmap.prototype,"un",ol.layer.Heatmap.prototype.un);goog.exportProperty(ol.layer.Heatmap.prototype,"unByKey",ol.layer.Heatmap.prototype.unByKey);goog.exportProperty(ol.layer.Image.prototype,"setMap",ol.layer.Image.prototype.setMap);goog.exportProperty(ol.layer.Image.prototype,"setSource",ol.layer.Image.prototype.setSource);goog.exportProperty(ol.layer.Image.prototype,"getExtent",ol.layer.Image.prototype.getExtent);goog.exportProperty(ol.layer.Image.prototype,"getMaxResolution",ol.layer.Image.prototype.getMaxResolution);goog.exportProperty(ol.layer.Image.prototype,"getMinResolution",ol.layer.Image.prototype.getMinResolution);goog.exportProperty(ol.layer.Image.prototype,"getOpacity",ol.layer.Image.prototype.getOpacity)
;goog.exportProperty(ol.layer.Image.prototype,"getVisible",ol.layer.Image.prototype.getVisible);goog.exportProperty(ol.layer.Image.prototype,"getZIndex",ol.layer.Image.prototype.getZIndex);goog.exportProperty(ol.layer.Image.prototype,"setExtent",ol.layer.Image.prototype.setExtent);goog.exportProperty(ol.layer.Image.prototype,"setMaxResolution",ol.layer.Image.prototype.setMaxResolution);goog.exportProperty(ol.layer.Image.prototype,"setMinResolution",ol.layer.Image.prototype.setMinResolution);goog.exportProperty(ol.layer.Image.prototype,"setOpacity",ol.layer.Image.prototype.setOpacity);goog.exportProperty(ol.layer.Image.prototype,"setVisible",ol.layer.Image.prototype.setVisible);goog.exportProperty(ol.layer.Image.prototype,"setZIndex",ol.layer.Image.prototype.setZIndex);goog.exportProperty(ol.layer.Image.prototype,"get",ol.layer.Image.prototype.get);goog.exportProperty(ol.layer.Image.prototype,"getKeys",ol.layer.Image.prototype.getKeys);goog.exportProperty(ol.layer.Image.prototype,"getProperties",ol.layer.Image.prototype.getProperties);goog.exportProperty(ol.layer.Image.prototype,"set",ol.layer.Image.prototype.set);goog.exportProperty(ol.layer.Image.prototype,"setProperties",ol.layer.Image.prototype.setProperties);goog.exportProperty(ol.layer.Image.prototype,"unset",ol.layer.Image.prototype.unset);goog.exportProperty(ol.layer.Image.prototype,"changed",ol.layer.Image.prototype.changed);goog.exportProperty(ol.layer.Image.prototype,"dispatchEvent",ol.layer.Image.prototype.dispatchEvent);goog.exportProperty(ol.layer.Image.prototype,"getRevision",ol.layer.Image.prototype.getRevision);goog.exportProperty(ol.layer.Image.prototype,"on",ol.layer.Image.prototype.on);goog.exportProperty(ol.layer.Image.prototype,"once",ol.layer.Image.prototype.once);goog.exportProperty(ol.layer.Image.prototype,"un",ol.layer.Image.prototype.un);goog.exportProperty(ol.layer.Image.prototype,"unByKey",ol.layer.Image.prototype.unByKey);goog.exportProperty(ol.layer.Group.prototype,"getExtent",ol.layer.Group.prototype.getExtent);goog.exportProperty(ol.layer.Group.prototype,"getMaxResolution",ol.layer.Group.prototype.getMaxResolution);goog.exportProperty(ol.layer.Group.prototype,"getMinResolution",ol.layer.Group.prototype.getMinResolution);goog.exportProperty(ol.layer.Group.prototype,"getOpacity",ol.layer.Group.prototype.getOpacity);goog.exportProperty(ol.layer.Group.prototype,"getVisible",ol.layer.Group.prototype.getVisible);goog.exportProperty(ol.layer.Group.prototype,"getZIndex",ol.layer.Group.prototype.getZIndex);goog.exportProperty(ol.layer.Group.prototype,"setExtent",ol.layer.Group.prototype.setExtent);goog.exportProperty(ol.layer.Group.prototype,"setMaxResolution",ol.layer.Group.prototype.setMaxResolution);goog.exportProperty(ol.layer.Group.prototype,"setMinResolution",ol.layer.Group.prototype.setMinResolution);goog.exportProperty(ol.layer.Group.prototype,"setOpacity",ol.layer.Group.prototype.setOpacity);goog.exportProperty(ol.layer.Group.prototype,"setVisible",ol.layer.Group.prototype.setVisible);goog.exportProperty(ol.layer.Group.prototype,"setZIndex",ol.layer.Group.prototype.setZIndex);goog.exportProperty(ol.layer.Group.prototype,"get",ol.layer.Group.prototype.get);goog.exportProperty(ol.layer.Group.prototype,"getKeys",ol.layer.Group.prototype.getKeys);goog.exportProperty(ol.layer.Group.prototype,"getProperties",ol.layer.Group.prototype.getProperties);goog.exportProperty(ol.layer.Group.prototype,"set",ol.layer.Group.prototype.set);goog.exportProperty(ol.layer.Group.prototype,"setProperties",ol.layer.Group.prototype.setProperties);goog.exportProperty(ol.layer.Group.prototype,"unset",ol.layer.Group.prototype.unset);goog.exportProperty(ol.layer.Group.prototype,"changed",ol.layer.Group.prototype.changed);goog.exportProperty(ol.layer.Group.prototype,"dispatchEvent",ol.layer.Group.prototype.dispatchEvent);goog.exportProperty(ol.layer.Group.prototype,"getRevision",ol.layer.Group.prototype.getRevision);goog.exportProperty(ol.layer.Group.prototype,"on",ol.layer.Group.prototype.on);goog.exportProperty(ol.layer.Group.prototype,"once",ol.layer.Group.prototype.once);goog.exportProperty(ol.layer.Group.prototype,"un",ol.layer.Group.prototype.un);goog.exportProperty(ol.layer.Group.prototype,"unByKey",ol.layer.Group.prototype.unByKey);goog.exportProperty(ol.layer.Tile.prototype,"setMap",ol.layer.Tile.prototype.setMap);goog.exportProperty(ol.layer.Tile.prototype,"setSource",ol.layer.Tile.prototype.setSource);goog.exportProperty(ol.layer.Tile.prototype,"getExtent",ol.layer.Tile.prototype.getExtent);goog.exportProperty(ol.layer.Tile.prototype,"getMaxResolution",ol.layer.Tile.prototype.getMaxResolution);goog.exportProperty(ol.layer.Tile.prototype,"getMinResolution",ol.layer.Tile.prototype.getMinResolution);goog.exportProperty(ol.layer.Tile.prototype,"getOpacity",ol.layer.Tile.prototype.getOpacity);goog.exportProperty(ol.layer.Tile.prototype,"getVisible",ol.layer.Tile.prototype.getVisible);goog.exportProperty(ol.layer.Tile.prototype,"getZIndex",ol.layer.Tile.prototype.getZIndex);goog.exportProperty(ol.layer.Tile.prototype,"setExtent",ol.layer.Tile.prototype.setExtent);goog.exportProperty(ol.layer.Tile.prototype,"setMaxResolution",ol.layer.Tile.prototype.setMaxResolution);goog.exportProperty(ol.layer.Tile.prototype,"setMinResolution",ol.layer.Tile.prototype.setMinResolution);goog.exportProperty(ol.layer.Tile.prototype,"setOpacity",ol.layer.Tile.prototype.setOpacity);goog.exportProperty(ol.layer.Tile.prototype,"setVisible",ol.layer.Tile.prototype.setVisible);goog.exportProperty(ol.layer.Tile.prototype,"setZIndex",ol.layer.Tile.prototype.setZIndex);goog.exportProperty(ol.layer.Tile.prototype,"get",ol.layer.Tile.prototype.get);goog.exportProperty(ol.layer.Tile.prototype,"getKeys",ol.layer.Tile.prototype.getKeys);goog.exportProperty(ol.layer.Tile.prototype,"getProperties",ol.layer.Tile.prototype.getProperties);goog.exportProperty(ol.layer.Tile.prototype,"set",ol.layer.Tile.prototype.set);goog.exportProperty(ol.layer.Tile.prototype,"setProperties",ol.layer.Tile.prototype.setProperties);goog.exportProperty(ol.layer.Tile.prototype,"unset",ol.layer.Tile.prototype.unset);goog.exportProperty(ol.layer.Tile.prototype,"changed",ol.layer.Tile.prototype.changed);goog.exportProperty(ol.layer.Tile.prototype,"dispatchEvent",ol.layer.Tile.prototype.dispatchEvent);goog.exportProperty(ol.layer.Tile.prototype,"getRevision",ol.layer.Tile.prototype.getRevision);goog.exportProperty(ol.layer.Tile.prototype,"on",ol.layer.Tile.prototype.on);goog.exportProperty(ol.layer.Tile.prototype,"once",ol.layer.Tile.prototype.once);goog.exportProperty(ol.layer.Tile.prototype,"un",ol.layer.Tile.prototype.un);goog.exportProperty(ol.layer.Tile.prototype,"unByKey",ol.layer.Tile.prototype.unByKey);goog.exportProperty(ol.layer.VectorTile.prototype,"getSource",ol.layer.VectorTile.prototype.getSource);goog.exportProperty(ol.layer.VectorTile.prototype,"getStyle",ol.layer.VectorTile.prototype.getStyle);goog.exportProperty(ol.layer.VectorTile.prototype,"getStyleFunction",ol.layer.VectorTile.prototype.getStyleFunction);goog.exportProperty(ol.layer.VectorTile.prototype,"setStyle",ol.layer.VectorTile.prototype.setStyle);goog.exportProperty(ol.layer.VectorTile.prototype,"setMap",ol.layer.VectorTile.prototype.setMap);goog.exportProperty(ol.layer.VectorTile.prototype,"setSource",ol.layer.VectorTile.prototype.setSource);goog.exportProperty(ol.layer.VectorTile.prototype,"getExtent",ol.layer.VectorTile.prototype.getExtent);goog.exportProperty(ol.layer.VectorTile.prototype,"getMaxResolution",ol.layer.VectorTile.prototype.getMaxResolution);goog.exportProperty(ol.layer.VectorTile.prototype,"getMinResolution",ol.layer.VectorTile.prototype.getMinResolution);goog.exportProperty(ol.layer.VectorTile.prototype,"getOpacity",ol.layer.VectorTile.prototype.getOpacity);goog.exportProperty(ol.layer.VectorTile.prototype,"getVisible",ol.layer.VectorTile.prototype.getVisible);goog.exportProperty(ol.layer.VectorTile.prototype,"getZIndex",ol.layer.VectorTile.prototype.getZIndex);goog.exportProperty(ol.layer.VectorTile.prototype,"setExtent",ol.layer.VectorTile.prototype.setExtent);goog.exportProperty(ol.layer.VectorTile.prototype,"setMaxResolution",ol.layer.VectorTile.prototype.setMaxResolution);goog.exportProperty(ol.layer.VectorTile.prototype,"setMinResolution",ol.layer.VectorTile.prototype.setMinResolution);goog.exportProperty(ol.layer.VectorTile.prototype,"setOpacity",ol.layer.VectorTile.prototype.setOpacity);goog.exportProperty(ol.layer.VectorTile.prototype,"setVisible",ol.layer.VectorTile.prototype.setVisible);goog.exportProperty(ol.layer.VectorTile.prototype,"setZIndex",ol.layer.VectorTile.prototype.setZIndex);goog.exportProperty(ol.layer.VectorTile.prototype,"get",ol.layer.VectorTile.prototype.get);goog.exportProperty(ol.layer.VectorTile.prototype,"getKeys",ol.layer.VectorTile.prototype.getKeys);goog.exportProperty(ol.layer.VectorTile.prototype,"getProperties",ol.layer.VectorTile.prototype.getProperties);goog.exportProperty(ol.layer.VectorTile.prototype,"set",ol.layer.VectorTile.prototype.set);goog.exportProperty(ol.layer.VectorTile.prototype,"setProperties",ol.layer.VectorTile.prototype.setProperties);goog.exportProperty(ol.layer.VectorTile.prototype,"unset",ol.layer.VectorTile.prototype.unset);goog.exportProperty(ol.layer.VectorTile.prototype,"changed",ol.layer.VectorTile.prototype.changed);goog.exportProperty(ol.layer.VectorTile.prototype,"dispatchEvent",ol.layer.VectorTile.prototype.dispatchEvent);goog.exportProperty(ol.layer.VectorTile.prototype,"getRevision",ol.layer.VectorTile.prototype.getRevision);goog.exportProperty(ol.layer.VectorTile.prototype,"on",ol.layer.VectorTile.prototype.on);goog.exportProperty(ol.layer.VectorTile.prototype,"once",ol.layer.VectorTile.prototype.once);goog.exportProperty(ol.layer.VectorTile.prototype,"un",ol.layer.VectorTile.prototype.un);goog.exportProperty(ol.layer.VectorTile.prototype,"unByKey",ol.layer.VectorTile.prototype.unByKey);goog.exportProperty(ol.Map.prototype,"get",ol.Map.prototype.get);goog.exportProperty(ol.Map.prototype,"getKeys",ol.Map.prototype.getKeys);goog.exportProperty(ol.Map.prototype,"getProperties",ol.Map.prototype.getProperties);goog.exportProperty(ol.Map.prototype,"set",ol.Map.prototype.set);goog.exportProperty(ol.Map.prototype,"setProperties",ol.Map.prototype.setProperties);goog.exportProperty(ol.Map.prototype,"unset",ol.Map.prototype.unset);goog.exportProperty(ol.Map.prototype,"changed",ol.Map.prototype.changed);goog.exportProperty(ol.Map.prototype,"dispatchEvent",ol.Map.prototype.dispatchEvent);goog.exportProperty(ol.Map.prototype,"getRevision",ol.Map.prototype.getRevision);goog.exportProperty(ol.Map.prototype,"on",ol.Map.prototype.on);goog.exportProperty(ol.Map.prototype,"once",ol.Map.prototype.once);goog.exportProperty(ol.Map.prototype,"un",ol.Map.prototype.un);goog.exportProperty(ol.Map.prototype,"unByKey",ol.Map.prototype.unByKey);goog.exportProperty(ol.MapBrowserEvent.prototype,"map",ol.MapBrowserEvent.prototype.map);goog.exportProperty(ol.MapBrowserEvent.prototype,"frameState",ol.MapBrowserEvent.prototype.frameState);goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"originalEvent",ol.MapBrowserPointerEvent.prototype.originalEvent);goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"pixel",ol.MapBrowserPointerEvent.prototype.pixel);goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"coordinate",ol.MapBrowserPointerEvent.prototype.coordinate);goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"dragging",ol.MapBrowserPointerEvent.prototype.dragging);goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"stopPropagation",ol.MapBrowserPointerEvent.prototype.stopPropagation);goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"map",ol.MapBrowserPointerEvent.prototype.map);goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"frameState",ol.MapBrowserPointerEvent.prototype.frameState);goog.exportProperty(ol.Overlay.prototype,"get",ol.Overlay.prototype.get);goog.exportProperty(ol.Overlay.prototype,"getKeys",ol.Overlay.prototype.getKeys);goog.exportProperty(ol.Overlay.prototype,"getProperties",ol.Overlay.prototype.getProperties);goog.exportProperty(ol.Overlay.prototype,"set",ol.Overlay.prototype.set);goog.exportProperty(ol.Overlay.prototype,"setProperties",ol.Overlay.prototype.setProperties);goog.exportProperty(ol.Overlay.prototype,"unset",ol.Overlay.prototype.unset);goog.exportProperty(ol.Overlay.prototype,"changed",ol.Overlay.prototype.changed);goog.exportProperty(ol.Overlay.prototype,"dispatchEvent",ol.Overlay.prototype.dispatchEvent);goog.exportProperty(ol.Overlay.prototype,"getRevision",ol.Overlay.prototype.getRevision);goog.exportProperty(ol.Overlay.prototype,"on",ol.Overlay.prototype.on);goog.exportProperty(ol.Overlay.prototype,"once",ol.Overlay.prototype.once);goog.exportProperty(ol.Overlay.prototype,"un",ol.Overlay.prototype.un);goog.exportProperty(ol.Overlay.prototype,"unByKey",ol.Overlay.prototype.unByKey);goog.exportProperty(ol.renderer.Layer.prototype,"changed",ol.renderer.Layer.prototype.changed);goog.exportProperty(ol.renderer.Layer.prototype,"dispatchEvent",ol.renderer.Layer.prototype.dispatchEvent);goog.exportProperty(ol.renderer.Layer.prototype,"getRevision",ol.renderer.Layer.prototype.getRevision);goog.exportProperty(ol.renderer.Layer.prototype,"on",ol.renderer.Layer.prototype.on);goog.exportProperty(ol.renderer.Layer.prototype,"once",ol.renderer.Layer.prototype.once);goog.exportProperty(ol.renderer.Layer.prototype,"un",ol.renderer.Layer.prototype.un);goog.exportProperty(ol.renderer.Layer.prototype,"unByKey",ol.renderer.Layer.prototype.unByKey);goog.exportProperty(ol.renderer.canvas.Layer.prototype,"changed",ol.renderer.canvas.Layer.prototype.changed);goog.exportProperty(ol.renderer.canvas.Layer.prototype,"dispatchEvent",ol.renderer.canvas.Layer.prototype.dispatchEvent);goog.exportProperty(ol.renderer.canvas.Layer.prototype,"getRevision",ol.renderer.canvas.Layer.prototype.getRevision);goog.exportProperty(ol.renderer.canvas.Layer.prototype,"on",ol.renderer.canvas.Layer.prototype.on);goog.exportProperty(ol.renderer.canvas.Layer.prototype,"once",ol.renderer.canvas.Layer.prototype.once);goog.exportProperty(ol.renderer.canvas.Layer.prototype,"un",ol.renderer.canvas.Layer.prototype.un);goog.exportProperty(ol.renderer.canvas.Layer.prototype,"unByKey",ol.renderer.canvas.Layer.prototype.unByKey);goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"changed",ol.renderer.canvas.ImageLayer.prototype.changed);goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"dispatchEvent",ol.renderer.canvas.ImageLayer.prototype.dispatchEvent);goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"getRevision",ol.renderer.canvas.ImageLayer.prototype.getRevision);goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"on",ol.renderer.canvas.ImageLayer.prototype.on);goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"once",ol.renderer.canvas.ImageLayer.prototype.once);goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"un",ol.renderer.canvas.ImageLayer.prototype.un);goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"unByKey",ol.renderer.canvas.ImageLayer.prototype.unByKey);goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"changed",ol.renderer.canvas.TileLayer.prototype.changed);goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"dispatchEvent",ol.renderer.canvas.TileLayer.prototype.dispatchEvent);goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"getRevision",ol.renderer.canvas.TileLayer.prototype.getRevision);goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"on",ol.renderer.canvas.TileLayer.prototype.on);goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"once",ol.renderer.canvas.TileLayer.prototype.once);goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"un",ol.renderer.canvas.TileLayer.prototype.un);goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"unByKey",ol.renderer.canvas.TileLayer.prototype.unByKey);goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"changed",ol.renderer.canvas.VectorLayer.prototype.changed);goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"dispatchEvent",ol.renderer.canvas.VectorLayer.prototype.dispatchEvent);goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"getRevision",ol.renderer.canvas.VectorLayer.prototype.getRevision);goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"on",ol.renderer.canvas.VectorLayer.prototype.on);goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"once",ol.renderer.canvas.VectorLayer.prototype.once);goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"un",ol.renderer.canvas.VectorLayer.prototype.un);goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"unByKey",ol.renderer.canvas.VectorLayer.prototype.unByKey);goog.exportProperty(ol.renderer.canvas.VectorTileLayer.prototype,"changed",ol.renderer.canvas.VectorTileLayer.prototype.changed);goog.exportProperty(ol.renderer.canvas.VectorTileLayer.prototype,"dispatchEvent",ol.renderer.canvas.VectorTileLayer.prototype.dispatchEvent);goog.exportProperty(ol.renderer.canvas.VectorTileLayer.prototype,"getRevision",ol.renderer.canvas.VectorTileLayer.prototype.getRevision);goog.exportProperty(ol.renderer.canvas.VectorTileLayer.prototype,"on",ol.renderer.canvas.VectorTileLayer.prototype.on);goog.exportProperty(ol.renderer.canvas.VectorTileLayer.prototype,"once",ol.renderer.canvas.VectorTileLayer.prototype.once);goog.exportProperty(ol.renderer.canvas.VectorTileLayer.prototype,"un",ol.renderer.canvas.VectorTileLayer.prototype.un);goog.exportProperty(ol.renderer.canvas.VectorTileLayer.prototype,"unByKey",ol.renderer.canvas.VectorTileLayer.prototype.unByKey);goog.exportProperty(ol.renderer.dom.Layer.prototype,"changed",ol.renderer.dom.Layer.prototype.changed);goog.exportProperty(ol.renderer.dom.Layer.prototype,"dispatchEvent",ol.renderer.dom.Layer.prototype.dispatchEvent);goog.exportProperty(ol.renderer.dom.Layer.prototype,"getRevision",ol.renderer.dom.Layer.prototype.getRevision);goog.exportProperty(ol.renderer.dom.Layer.prototype,"on",ol.renderer.dom.Layer.prototype.on);goog.exportProperty(ol.renderer.dom.Layer.prototype,"once",ol.renderer.dom.Layer.prototype.once);goog.exportProperty(ol.renderer.dom.Layer.prototype,"un",ol.renderer.dom.Layer.prototype.un);goog.exportProperty(ol.renderer.dom.Layer.prototype,"unByKey",ol.renderer.dom.Layer.prototype.unByKey);goog.exportProperty(ol.renderer.dom.ImageLayer.prototype,"changed",ol.renderer.dom.ImageLayer.prototype.changed);goog.exportProperty(ol.renderer.dom.ImageLayer.prototype,"dispatchEvent",ol.renderer.dom.ImageLayer.prototype.dispatchEvent);goog.exportProperty(ol.renderer.dom.ImageLayer.prototype,"getRevision",ol.renderer.dom.ImageLayer.prototype.getRevision);goog.exportProperty(ol.renderer.dom.ImageLayer.prototype,"on",ol.renderer.dom.ImageLayer.prototype.on);goog.exportProperty(ol.renderer.dom.ImageLayer.prototype,"once",ol.renderer.dom.ImageLayer.prototype.once);goog.exportProperty(ol.renderer.dom.ImageLayer.prototype,"un",ol.renderer.dom.ImageLayer.prototype.un);goog.exportProperty(ol.renderer.dom.ImageLayer.prototype,"unByKey",ol.renderer.dom.ImageLayer.prototype.unByKey);goog.exportProperty(ol.renderer.dom.TileLayer.prototype,"changed",ol.renderer.dom.TileLayer.prototype.changed);goog.exportProperty(ol.renderer.dom.TileLayer.prototype,"dispatchEvent",ol.renderer.dom.TileLayer.prototype.dispatchEvent);goog.exportProperty(ol.renderer.dom.TileLayer.prototype,"getRevision",ol.renderer.dom.TileLayer.prototype.getRevision);goog.exportProperty(ol.renderer.dom.TileLayer.prototype,"on",ol.renderer.dom.TileLayer.prototype.on);goog.exportProperty(ol.renderer.dom.TileLayer.prototype,"once",ol.renderer.dom.TileLayer.prototype.once);goog.exportProperty(ol.renderer.dom.TileLayer.prototype,"un",ol.renderer.dom.TileLayer.prototype.un);goog.exportProperty(ol.renderer.dom.TileLayer.prototype,"unByKey",ol.renderer.dom.TileLayer.prototype.unByKey);goog.exportProperty(ol.renderer.dom.VectorLayer.prototype,"changed",ol.renderer.dom.VectorLayer.prototype.changed);goog.exportProperty(ol.renderer.dom.VectorLayer.prototype,"dispatchEvent",ol.renderer.dom.VectorLayer.prototype.dispatchEvent);goog.exportProperty(ol.renderer.dom.VectorLayer.prototype,"getRevision",ol.renderer.dom.VectorLayer.prototype.getRevision);goog.exportProperty(ol.renderer.dom.VectorLayer.prototype,"on",ol.renderer.dom.VectorLayer.prototype.on);goog.exportProperty(ol.renderer.dom.VectorLayer.prototype,"once",ol.renderer.dom.VectorLayer.prototype.once);goog.exportProperty(ol.renderer.dom.VectorLayer.prototype,"un",ol.renderer.dom.VectorLayer.prototype.un);goog.exportProperty(ol.renderer.dom.VectorLayer.prototype,"unByKey",ol.renderer.dom.VectorLayer.prototype.unByKey);goog.exportProperty(ol.renderer.webgl.Layer.prototype,"changed",ol.renderer.webgl.Layer.prototype.changed);goog.exportProperty(ol.renderer.webgl.Layer.prototype,"dispatchEvent",ol.renderer.webgl.Layer.prototype.dispatchEvent);goog.exportProperty(ol.renderer.webgl.Layer.prototype,"getRevision",ol.renderer.webgl.Layer.prototype.getRevision);goog.exportProperty(ol.renderer.webgl.Layer.prototype,"on",ol.renderer.webgl.Layer.prototype.on);goog.exportProperty(ol.renderer.webgl.Layer.prototype,"once",ol.renderer.webgl.Layer.prototype.once);goog.exportProperty(ol.renderer.webgl.Layer.prototype,"un",ol.renderer.webgl.Layer.prototype.un);goog.exportProperty(ol.renderer.webgl.Layer.prototype,"unByKey",ol.renderer.webgl.Layer.prototype.unByKey);goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"changed",ol.renderer.webgl.ImageLayer.prototype.changed);goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"dispatchEvent",ol.renderer.webgl.ImageLayer.prototype.dispatchEvent);goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"getRevision",ol.renderer.webgl.ImageLayer.prototype.getRevision);goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"on",ol.renderer.webgl.ImageLayer.prototype.on);goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"once",ol.renderer.webgl.ImageLayer.prototype.once);goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"un",ol.renderer.webgl.ImageLayer.prototype.un);goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"unByKey",ol.renderer.webgl.ImageLayer.prototype.unByKey);goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"changed",ol.renderer.webgl.TileLayer.prototype.changed);goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"dispatchEvent",ol.renderer.webgl.TileLayer.prototype.dispatchEvent);goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"getRevision",ol.renderer.webgl.TileLayer.prototype.getRevision);goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"on",ol.renderer.webgl.TileLayer.prototype.on);goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"once",ol.renderer.webgl.TileLayer.prototype.once);goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"un",ol.renderer.webgl.TileLayer.prototype.un);goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"unByKey",ol.renderer.webgl.TileLayer.prototype.unByKey);goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"changed",ol.renderer.webgl.VectorLayer.prototype.changed);goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"dispatchEvent",ol.renderer.webgl.VectorLayer.prototype.dispatchEvent);goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"getRevision",ol.renderer.webgl.VectorLayer.prototype.getRevision);goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"on",ol.renderer.webgl.VectorLayer.prototype.on);goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"once",ol.renderer.webgl.VectorLayer.prototype.once);goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"un",ol.renderer.webgl.VectorLayer.prototype.un);goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"unByKey",ol.renderer.webgl.VectorLayer.prototype.unByKey);goog.exportProperty(ol.reproj.Tile.prototype,"getTileCoord",ol.reproj.Tile.prototype.getTileCoord);goog.exportProperty(ol.source.Source.prototype,"get",ol.source.Source.prototype.get);goog.exportProperty(ol.source.Source.prototype,"getKeys",ol.source.Source.prototype.getKeys);goog.exportProperty(ol.source.Source.prototype,"getProperties",ol.source.Source.prototype.getProperties);goog.exportProperty(ol.source.Source.prototype,"set",ol.source.Source.prototype.set);goog.exportProperty(ol.source.Source.prototype,"setProperties",ol.source.Source.prototype.setProperties);goog.exportProperty(ol.source.Source.prototype,"unset",ol.source.Source.prototype.unset);goog.exportProperty(ol.source.Source.prototype,"changed",ol.source.Source.prototype.changed);goog.exportProperty(ol.source.Source.prototype,"dispatchEvent",ol.source.Source.prototype.dispatchEvent);goog.exportProperty(ol.source.Source.prototype,"getRevision",ol.source.Source.prototype.getRevision);goog.exportProperty(ol.source.Source.prototype,"on",ol.source.Source.prototype.on);goog.exportProperty(ol.source.Source.prototype,"once",ol.source.Source.prototype.once);goog.exportProperty(ol.source.Source.prototype,"un",ol.source.Source.prototype.un);goog.exportProperty(ol.source.Source.prototype,"unByKey",ol.source.Source.prototype.unByKey);goog.exportProperty(ol.source.Tile.prototype,"getAttributions",ol.source.Tile.prototype.getAttributions);goog.exportProperty(ol.source.Tile.prototype,"getLogo",ol.source.Tile.prototype.getLogo);goog.exportProperty(ol.source.Tile.prototype,"getProjection",ol.source.Tile.prototype.getProjection);goog.exportProperty(ol.source.Tile.prototype,"getState",ol.source.Tile.prototype.getState);goog.exportProperty(ol.source.Tile.prototype,"refresh",ol.source.Tile.prototype.refresh);goog.exportProperty(ol.source.Tile.prototype,"setAttributions",ol.source.Tile.prototype.setAttributions);goog.exportProperty(ol.source.Tile.prototype,"get",ol.source.Tile.prototype.get);goog.exportProperty(ol.source.Tile.prototype,"getKeys",ol.source.Tile.prototype.getKeys);goog.exportProperty(ol.source.Tile.prototype,"getProperties",ol.source.Tile.prototype.getProperties);goog.exportProperty(ol.source.Tile.prototype,"set",ol.source.Tile.prototype.set);goog.exportProperty(ol.source.Tile.prototype,"setProperties",ol.source.Tile.prototype.setProperties);goog.exportProperty(ol.source.Tile.prototype,"unset",ol.source.Tile.prototype.unset);goog.exportProperty(ol.source.Tile.prototype,"changed",ol.source.Tile.prototype.changed);goog.exportProperty(ol.source.Tile.prototype,"dispatchEvent",ol.source.Tile.prototype.dispatchEvent);goog.exportProperty(ol.source.Tile.prototype,"getRevision",ol.source.Tile.prototype.getRevision);goog.exportProperty(ol.source.Tile.prototype,"on",ol.source.Tile.prototype.on);goog.exportProperty(ol.source.Tile.prototype,"once",ol.source.Tile.prototype.once);goog.exportProperty(ol.source.Tile.prototype,"un",ol.source.Tile.prototype.un);goog.exportProperty(ol.source.Tile.prototype,"unByKey",ol.source.Tile.prototype.unByKey);goog.exportProperty(ol.source.UrlTile.prototype,"getTileGrid",ol.source.UrlTile.prototype.getTileGrid);goog.exportProperty(ol.source.UrlTile.prototype,"refresh",ol.source.UrlTile.prototype.refresh);goog.exportProperty(ol.source.UrlTile.prototype,"getAttributions",ol.source.UrlTile.prototype.getAttributions);goog.exportProperty(ol.source.UrlTile.prototype,"getLogo",ol.source.UrlTile.prototype.getLogo);goog.exportProperty(ol.source.UrlTile.prototype,"getProjection",ol.source.UrlTile.prototype.getProjection);goog.exportProperty(ol.source.UrlTile.prototype,"getState",ol.source.UrlTile.prototype.getState);goog.exportProperty(ol.source.UrlTile.prototype,"setAttributions",ol.source.UrlTile.prototype.setAttributions);goog.exportProperty(ol.source.UrlTile.prototype,"get",ol.source.UrlTile.prototype.get);goog.exportProperty(ol.source.UrlTile.prototype,"getKeys",ol.source.UrlTile.prototype.getKeys);goog.exportProperty(ol.source.UrlTile.prototype,"getProperties",ol.source.UrlTile.prototype.getProperties);goog.exportProperty(ol.source.UrlTile.prototype,"set",ol.source.UrlTile.prototype.set);goog.exportProperty(ol.source.UrlTile.prototype,"setProperties",ol.source.UrlTile.prototype.setProperties);goog.exportProperty(ol.source.UrlTile.prototype,"unset",ol.source.UrlTile.prototype.unset);goog.exportProperty(ol.source.UrlTile.prototype,"changed",ol.source.UrlTile.prototype.changed);goog.exportProperty(ol.source.UrlTile.prototype,"dispatchEvent",ol.source.UrlTile.prototype.dispatchEvent);goog.exportProperty(ol.source.UrlTile.prototype,"getRevision",ol.source.UrlTile.prototype.getRevision);goog.exportProperty(ol.source.UrlTile.prototype,"on",ol.source.UrlTile.prototype.on);goog.exportProperty(ol.source.UrlTile.prototype,"once",ol.source.UrlTile.prototype.once);goog.exportProperty(ol.source.UrlTile.prototype,"un",ol.source.UrlTile.prototype.un);goog.exportProperty(ol.source.UrlTile.prototype,"unByKey",ol.source.UrlTile.prototype.unByKey);goog.exportProperty(ol.source.TileImage.prototype,"getTileLoadFunction",ol.source.TileImage.prototype.getTileLoadFunction);goog.exportProperty(ol.source.TileImage.prototype,"getTileUrlFunction",ol.source.TileImage.prototype.getTileUrlFunction);goog.exportProperty(ol.source.TileImage.prototype,"getUrls",ol.source.TileImage.prototype.getUrls);goog.exportProperty(ol.source.TileImage.prototype,"setTileLoadFunction",ol.source.TileImage.prototype.setTileLoadFunction);goog.exportProperty(ol.source.TileImage.prototype,"setTileUrlFunction",ol.source.TileImage.prototype.setTileUrlFunction);goog.exportProperty(ol.source.TileImage.prototype,"setUrl",ol.source.TileImage.prototype.setUrl);goog.exportProperty(ol.source.TileImage.prototype,"setUrls",ol.source.TileImage.prototype.setUrls);goog.exportProperty(ol.source.TileImage.prototype,"getTileGrid",ol.source.TileImage.prototype.getTileGrid);goog.exportProperty(ol.source.TileImage.prototype,"refresh",ol.source.TileImage.prototype.refresh);goog.exportProperty(ol.source.TileImage.prototype,"getAttributions",ol.source.TileImage.prototype.getAttributions);goog.exportProperty(ol.source.TileImage.prototype,"getLogo",ol.source.TileImage.prototype.getLogo);goog.exportProperty(ol.source.TileImage.prototype,"getProjection",ol.source.TileImage.prototype.getProjection);goog.exportProperty(ol.source.TileImage.prototype,"getState",ol.source.TileImage.prototype.getState);goog.exportProperty(ol.source.TileImage.prototype,"setAttributions",ol.source.TileImage.prototype.setAttributions);goog.exportProperty(ol.source.TileImage.prototype,"get",ol.source.TileImage.prototype.get);goog.exportProperty(ol.source.TileImage.prototype,"getKeys",ol.source.TileImage.prototype.getKeys);goog.exportProperty(ol.source.TileImage.prototype,"getProperties",ol.source.TileImage.prototype.getProperties);goog.exportProperty(ol.source.TileImage.prototype,"set",ol.source.TileImage.prototype.set);goog.exportProperty(ol.source.TileImage.prototype,"setProperties",ol.source.TileImage.prototype.setProperties);goog.exportProperty(ol.source.TileImage.prototype,"unset",ol.source.TileImage.prototype.unset);goog.exportProperty(ol.source.TileImage.prototype,"changed",ol.source.TileImage.prototype.changed);goog.exportProperty(ol.source.TileImage.prototype,"dispatchEvent",ol.source.TileImage.prototype.dispatchEvent);goog.exportProperty(ol.source.TileImage.prototype,"getRevision",ol.source.TileImage.prototype.getRevision);goog.exportProperty(ol.source.TileImage.prototype,"on",ol.source.TileImage.prototype.on);goog.exportProperty(ol.source.TileImage.prototype,"once",ol.source.TileImage.prototype.once);goog.exportProperty(ol.source.TileImage.prototype,"un",ol.source.TileImage.prototype.un);goog.exportProperty(ol.source.TileImage.prototype,"unByKey",ol.source.TileImage.prototype.unByKey);goog.exportProperty(ol.source.BingMaps.prototype,"setRenderReprojectionEdges",ol.source.BingMaps.prototype.setRenderReprojectionEdges)
;goog.exportProperty(ol.source.BingMaps.prototype,"setTileGridForProjection",ol.source.BingMaps.prototype.setTileGridForProjection);goog.exportProperty(ol.source.BingMaps.prototype,"getTileLoadFunction",ol.source.BingMaps.prototype.getTileLoadFunction);goog.exportProperty(ol.source.BingMaps.prototype,"getTileUrlFunction",ol.source.BingMaps.prototype.getTileUrlFunction);goog.exportProperty(ol.source.BingMaps.prototype,"getUrls",ol.source.BingMaps.prototype.getUrls);goog.exportProperty(ol.source.BingMaps.prototype,"setTileLoadFunction",ol.source.BingMaps.prototype.setTileLoadFunction);goog.exportProperty(ol.source.BingMaps.prototype,"setTileUrlFunction",ol.source.BingMaps.prototype.setTileUrlFunction);goog.exportProperty(ol.source.BingMaps.prototype,"setUrl",ol.source.BingMaps.prototype.setUrl);goog.exportProperty(ol.source.BingMaps.prototype,"setUrls",ol.source.BingMaps.prototype.setUrls);goog.exportProperty(ol.source.BingMaps.prototype,"getTileGrid",ol.source.BingMaps.prototype.getTileGrid);goog.exportProperty(ol.source.BingMaps.prototype,"refresh",ol.source.BingMaps.prototype.refresh);goog.exportProperty(ol.source.BingMaps.prototype,"getAttributions",ol.source.BingMaps.prototype.getAttributions);goog.exportProperty(ol.source.BingMaps.prototype,"getLogo",ol.source.BingMaps.prototype.getLogo);goog.exportProperty(ol.source.BingMaps.prototype,"getProjection",ol.source.BingMaps.prototype.getProjection);goog.exportProperty(ol.source.BingMaps.prototype,"getState",ol.source.BingMaps.prototype.getState);goog.exportProperty(ol.source.BingMaps.prototype,"setAttributions",ol.source.BingMaps.prototype.setAttributions);goog.exportProperty(ol.source.BingMaps.prototype,"get",ol.source.BingMaps.prototype.get);goog.exportProperty(ol.source.BingMaps.prototype,"getKeys",ol.source.BingMaps.prototype.getKeys);goog.exportProperty(ol.source.BingMaps.prototype,"getProperties",ol.source.BingMaps.prototype.getProperties);goog.exportProperty(ol.source.BingMaps.prototype,"set",ol.source.BingMaps.prototype.set);goog.exportProperty(ol.source.BingMaps.prototype,"setProperties",ol.source.BingMaps.prototype.setProperties);goog.exportProperty(ol.source.BingMaps.prototype,"unset",ol.source.BingMaps.prototype.unset);goog.exportProperty(ol.source.BingMaps.prototype,"changed",ol.source.BingMaps.prototype.changed);goog.exportProperty(ol.source.BingMaps.prototype,"dispatchEvent",ol.source.BingMaps.prototype.dispatchEvent);goog.exportProperty(ol.source.BingMaps.prototype,"getRevision",ol.source.BingMaps.prototype.getRevision);goog.exportProperty(ol.source.BingMaps.prototype,"on",ol.source.BingMaps.prototype.on);goog.exportProperty(ol.source.BingMaps.prototype,"once",ol.source.BingMaps.prototype.once);goog.exportProperty(ol.source.BingMaps.prototype,"un",ol.source.BingMaps.prototype.un);goog.exportProperty(ol.source.BingMaps.prototype,"unByKey",ol.source.BingMaps.prototype.unByKey);goog.exportProperty(ol.source.Vector.prototype,"getAttributions",ol.source.Vector.prototype.getAttributions);goog.exportProperty(ol.source.Vector.prototype,"getLogo",ol.source.Vector.prototype.getLogo);goog.exportProperty(ol.source.Vector.prototype,"getProjection",ol.source.Vector.prototype.getProjection);goog.exportProperty(ol.source.Vector.prototype,"getState",ol.source.Vector.prototype.getState);goog.exportProperty(ol.source.Vector.prototype,"refresh",ol.source.Vector.prototype.refresh);goog.exportProperty(ol.source.Vector.prototype,"setAttributions",ol.source.Vector.prototype.setAttributions);goog.exportProperty(ol.source.Vector.prototype,"get",ol.source.Vector.prototype.get);goog.exportProperty(ol.source.Vector.prototype,"getKeys",ol.source.Vector.prototype.getKeys);goog.exportProperty(ol.source.Vector.prototype,"getProperties",ol.source.Vector.prototype.getProperties);goog.exportProperty(ol.source.Vector.prototype,"set",ol.source.Vector.prototype.set);goog.exportProperty(ol.source.Vector.prototype,"setProperties",ol.source.Vector.prototype.setProperties);goog.exportProperty(ol.source.Vector.prototype,"unset",ol.source.Vector.prototype.unset);goog.exportProperty(ol.source.Vector.prototype,"changed",ol.source.Vector.prototype.changed);goog.exportProperty(ol.source.Vector.prototype,"dispatchEvent",ol.source.Vector.prototype.dispatchEvent);goog.exportProperty(ol.source.Vector.prototype,"getRevision",ol.source.Vector.prototype.getRevision);goog.exportProperty(ol.source.Vector.prototype,"on",ol.source.Vector.prototype.on);goog.exportProperty(ol.source.Vector.prototype,"once",ol.source.Vector.prototype.once);goog.exportProperty(ol.source.Vector.prototype,"un",ol.source.Vector.prototype.un);goog.exportProperty(ol.source.Vector.prototype,"unByKey",ol.source.Vector.prototype.unByKey);goog.exportProperty(ol.source.Cluster.prototype,"addFeature",ol.source.Cluster.prototype.addFeature);goog.exportProperty(ol.source.Cluster.prototype,"addFeatures",ol.source.Cluster.prototype.addFeatures);goog.exportProperty(ol.source.Cluster.prototype,"clear",ol.source.Cluster.prototype.clear);goog.exportProperty(ol.source.Cluster.prototype,"forEachFeature",ol.source.Cluster.prototype.forEachFeature);goog.exportProperty(ol.source.Cluster.prototype,"forEachFeatureInExtent",ol.source.Cluster.prototype.forEachFeatureInExtent);goog.exportProperty(ol.source.Cluster.prototype,"forEachFeatureIntersectingExtent",ol.source.Cluster.prototype.forEachFeatureIntersectingExtent);goog.exportProperty(ol.source.Cluster.prototype,"getFeaturesCollection",ol.source.Cluster.prototype.getFeaturesCollection);goog.exportProperty(ol.source.Cluster.prototype,"getFeatures",ol.source.Cluster.prototype.getFeatures);goog.exportProperty(ol.source.Cluster.prototype,"getFeaturesAtCoordinate",ol.source.Cluster.prototype.getFeaturesAtCoordinate);goog.exportProperty(ol.source.Cluster.prototype,"getFeaturesInExtent",ol.source.Cluster.prototype.getFeaturesInExtent);goog.exportProperty(ol.source.Cluster.prototype,"getClosestFeatureToCoordinate",ol.source.Cluster.prototype.getClosestFeatureToCoordinate);goog.exportProperty(ol.source.Cluster.prototype,"getExtent",ol.source.Cluster.prototype.getExtent);goog.exportProperty(ol.source.Cluster.prototype,"getFeatureById",ol.source.Cluster.prototype.getFeatureById);goog.exportProperty(ol.source.Cluster.prototype,"removeFeature",ol.source.Cluster.prototype.removeFeature);goog.exportProperty(ol.source.Cluster.prototype,"getAttributions",ol.source.Cluster.prototype.getAttributions);goog.exportProperty(ol.source.Cluster.prototype,"getLogo",ol.source.Cluster.prototype.getLogo);goog.exportProperty(ol.source.Cluster.prototype,"getProjection",ol.source.Cluster.prototype.getProjection);goog.exportProperty(ol.source.Cluster.prototype,"getState",ol.source.Cluster.prototype.getState);goog.exportProperty(ol.source.Cluster.prototype,"refresh",ol.source.Cluster.prototype.refresh);goog.exportProperty(ol.source.Cluster.prototype,"setAttributions",ol.source.Cluster.prototype.setAttributions);goog.exportProperty(ol.source.Cluster.prototype,"get",ol.source.Cluster.prototype.get);goog.exportProperty(ol.source.Cluster.prototype,"getKeys",ol.source.Cluster.prototype.getKeys);goog.exportProperty(ol.source.Cluster.prototype,"getProperties",ol.source.Cluster.prototype.getProperties);goog.exportProperty(ol.source.Cluster.prototype,"set",ol.source.Cluster.prototype.set);goog.exportProperty(ol.source.Cluster.prototype,"setProperties",ol.source.Cluster.prototype.setProperties);goog.exportProperty(ol.source.Cluster.prototype,"unset",ol.source.Cluster.prototype.unset);goog.exportProperty(ol.source.Cluster.prototype,"changed",ol.source.Cluster.prototype.changed);goog.exportProperty(ol.source.Cluster.prototype,"dispatchEvent",ol.source.Cluster.prototype.dispatchEvent);goog.exportProperty(ol.source.Cluster.prototype,"getRevision",ol.source.Cluster.prototype.getRevision);goog.exportProperty(ol.source.Cluster.prototype,"on",ol.source.Cluster.prototype.on);goog.exportProperty(ol.source.Cluster.prototype,"once",ol.source.Cluster.prototype.once);goog.exportProperty(ol.source.Cluster.prototype,"un",ol.source.Cluster.prototype.un);goog.exportProperty(ol.source.Cluster.prototype,"unByKey",ol.source.Cluster.prototype.unByKey);goog.exportProperty(ol.source.Image.prototype,"getAttributions",ol.source.Image.prototype.getAttributions);goog.exportProperty(ol.source.Image.prototype,"getLogo",ol.source.Image.prototype.getLogo);goog.exportProperty(ol.source.Image.prototype,"getProjection",ol.source.Image.prototype.getProjection);goog.exportProperty(ol.source.Image.prototype,"getState",ol.source.Image.prototype.getState);goog.exportProperty(ol.source.Image.prototype,"refresh",ol.source.Image.prototype.refresh);goog.exportProperty(ol.source.Image.prototype,"setAttributions",ol.source.Image.prototype.setAttributions);goog.exportProperty(ol.source.Image.prototype,"get",ol.source.Image.prototype.get);goog.exportProperty(ol.source.Image.prototype,"getKeys",ol.source.Image.prototype.getKeys);goog.exportProperty(ol.source.Image.prototype,"getProperties",ol.source.Image.prototype.getProperties);goog.exportProperty(ol.source.Image.prototype,"set",ol.source.Image.prototype.set);goog.exportProperty(ol.source.Image.prototype,"setProperties",ol.source.Image.prototype.setProperties);goog.exportProperty(ol.source.Image.prototype,"unset",ol.source.Image.prototype.unset);goog.exportProperty(ol.source.Image.prototype,"changed",ol.source.Image.prototype.changed);goog.exportProperty(ol.source.Image.prototype,"dispatchEvent",ol.source.Image.prototype.dispatchEvent);goog.exportProperty(ol.source.Image.prototype,"getRevision",ol.source.Image.prototype.getRevision);goog.exportProperty(ol.source.Image.prototype,"on",ol.source.Image.prototype.on);goog.exportProperty(ol.source.Image.prototype,"once",ol.source.Image.prototype.once);goog.exportProperty(ol.source.Image.prototype,"un",ol.source.Image.prototype.un);goog.exportProperty(ol.source.Image.prototype,"unByKey",ol.source.Image.prototype.unByKey);goog.exportProperty(ol.source.ImageCanvas.prototype,"getAttributions",ol.source.ImageCanvas.prototype.getAttributions);goog.exportProperty(ol.source.ImageCanvas.prototype,"getLogo",ol.source.ImageCanvas.prototype.getLogo);goog.exportProperty(ol.source.ImageCanvas.prototype,"getProjection",ol.source.ImageCanvas.prototype.getProjection);goog.exportProperty(ol.source.ImageCanvas.prototype,"getState",ol.source.ImageCanvas.prototype.getState);goog.exportProperty(ol.source.ImageCanvas.prototype,"refresh",ol.source.ImageCanvas.prototype.refresh);goog.exportProperty(ol.source.ImageCanvas.prototype,"setAttributions",ol.source.ImageCanvas.prototype.setAttributions);goog.exportProperty(ol.source.ImageCanvas.prototype,"get",ol.source.ImageCanvas.prototype.get);goog.exportProperty(ol.source.ImageCanvas.prototype,"getKeys",ol.source.ImageCanvas.prototype.getKeys);goog.exportProperty(ol.source.ImageCanvas.prototype,"getProperties",ol.source.ImageCanvas.prototype.getProperties);goog.exportProperty(ol.source.ImageCanvas.prototype,"set",ol.source.ImageCanvas.prototype.set);goog.exportProperty(ol.source.ImageCanvas.prototype,"setProperties",ol.source.ImageCanvas.prototype.setProperties);goog.exportProperty(ol.source.ImageCanvas.prototype,"unset",ol.source.ImageCanvas.prototype.unset);goog.exportProperty(ol.source.ImageCanvas.prototype,"changed",ol.source.ImageCanvas.prototype.changed);goog.exportProperty(ol.source.ImageCanvas.prototype,"dispatchEvent",ol.source.ImageCanvas.prototype.dispatchEvent);goog.exportProperty(ol.source.ImageCanvas.prototype,"getRevision",ol.source.ImageCanvas.prototype.getRevision);goog.exportProperty(ol.source.ImageCanvas.prototype,"on",ol.source.ImageCanvas.prototype.on);goog.exportProperty(ol.source.ImageCanvas.prototype,"once",ol.source.ImageCanvas.prototype.once);goog.exportProperty(ol.source.ImageCanvas.prototype,"un",ol.source.ImageCanvas.prototype.un);goog.exportProperty(ol.source.ImageCanvas.prototype,"unByKey",ol.source.ImageCanvas.prototype.unByKey);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getAttributions",ol.source.ImageMapGuide.prototype.getAttributions);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getLogo",ol.source.ImageMapGuide.prototype.getLogo);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getProjection",ol.source.ImageMapGuide.prototype.getProjection);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getState",ol.source.ImageMapGuide.prototype.getState);goog.exportProperty(ol.source.ImageMapGuide.prototype,"refresh",ol.source.ImageMapGuide.prototype.refresh);goog.exportProperty(ol.source.ImageMapGuide.prototype,"setAttributions",ol.source.ImageMapGuide.prototype.setAttributions);goog.exportProperty(ol.source.ImageMapGuide.prototype,"get",ol.source.ImageMapGuide.prototype.get);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getKeys",ol.source.ImageMapGuide.prototype.getKeys);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getProperties",ol.source.ImageMapGuide.prototype.getProperties);goog.exportProperty(ol.source.ImageMapGuide.prototype,"set",ol.source.ImageMapGuide.prototype.set);goog.exportProperty(ol.source.ImageMapGuide.prototype,"setProperties",ol.source.ImageMapGuide.prototype.setProperties);goog.exportProperty(ol.source.ImageMapGuide.prototype,"unset",ol.source.ImageMapGuide.prototype.unset);goog.exportProperty(ol.source.ImageMapGuide.prototype,"changed",ol.source.ImageMapGuide.prototype.changed);goog.exportProperty(ol.source.ImageMapGuide.prototype,"dispatchEvent",ol.source.ImageMapGuide.prototype.dispatchEvent);goog.exportProperty(ol.source.ImageMapGuide.prototype,"getRevision",ol.source.ImageMapGuide.prototype.getRevision);goog.exportProperty(ol.source.ImageMapGuide.prototype,"on",ol.source.ImageMapGuide.prototype.on);goog.exportProperty(ol.source.ImageMapGuide.prototype,"once",ol.source.ImageMapGuide.prototype.once);goog.exportProperty(ol.source.ImageMapGuide.prototype,"un",ol.source.ImageMapGuide.prototype.un);goog.exportProperty(ol.source.ImageMapGuide.prototype,"unByKey",ol.source.ImageMapGuide.prototype.unByKey);goog.exportProperty(ol.source.ImageStatic.prototype,"getAttributions",ol.source.ImageStatic.prototype.getAttributions);goog.exportProperty(ol.source.ImageStatic.prototype,"getLogo",ol.source.ImageStatic.prototype.getLogo);goog.exportProperty(ol.source.ImageStatic.prototype,"getProjection",ol.source.ImageStatic.prototype.getProjection);goog.exportProperty(ol.source.ImageStatic.prototype,"getState",ol.source.ImageStatic.prototype.getState);goog.exportProperty(ol.source.ImageStatic.prototype,"refresh",ol.source.ImageStatic.prototype.refresh);goog.exportProperty(ol.source.ImageStatic.prototype,"setAttributions",ol.source.ImageStatic.prototype.setAttributions);goog.exportProperty(ol.source.ImageStatic.prototype,"get",ol.source.ImageStatic.prototype.get);goog.exportProperty(ol.source.ImageStatic.prototype,"getKeys",ol.source.ImageStatic.prototype.getKeys);goog.exportProperty(ol.source.ImageStatic.prototype,"getProperties",ol.source.ImageStatic.prototype.getProperties);goog.exportProperty(ol.source.ImageStatic.prototype,"set",ol.source.ImageStatic.prototype.set);goog.exportProperty(ol.source.ImageStatic.prototype,"setProperties",ol.source.ImageStatic.prototype.setProperties);goog.exportProperty(ol.source.ImageStatic.prototype,"unset",ol.source.ImageStatic.prototype.unset);goog.exportProperty(ol.source.ImageStatic.prototype,"changed",ol.source.ImageStatic.prototype.changed);goog.exportProperty(ol.source.ImageStatic.prototype,"dispatchEvent",ol.source.ImageStatic.prototype.dispatchEvent);goog.exportProperty(ol.source.ImageStatic.prototype,"getRevision",ol.source.ImageStatic.prototype.getRevision);goog.exportProperty(ol.source.ImageStatic.prototype,"on",ol.source.ImageStatic.prototype.on);goog.exportProperty(ol.source.ImageStatic.prototype,"once",ol.source.ImageStatic.prototype.once);goog.exportProperty(ol.source.ImageStatic.prototype,"un",ol.source.ImageStatic.prototype.un);goog.exportProperty(ol.source.ImageStatic.prototype,"unByKey",ol.source.ImageStatic.prototype.unByKey);goog.exportProperty(ol.source.ImageVector.prototype,"getAttributions",ol.source.ImageVector.prototype.getAttributions);goog.exportProperty(ol.source.ImageVector.prototype,"getLogo",ol.source.ImageVector.prototype.getLogo);goog.exportProperty(ol.source.ImageVector.prototype,"getProjection",ol.source.ImageVector.prototype.getProjection);goog.exportProperty(ol.source.ImageVector.prototype,"getState",ol.source.ImageVector.prototype.getState);goog.exportProperty(ol.source.ImageVector.prototype,"refresh",ol.source.ImageVector.prototype.refresh);goog.exportProperty(ol.source.ImageVector.prototype,"setAttributions",ol.source.ImageVector.prototype.setAttributions);goog.exportProperty(ol.source.ImageVector.prototype,"get",ol.source.ImageVector.prototype.get);goog.exportProperty(ol.source.ImageVector.prototype,"getKeys",ol.source.ImageVector.prototype.getKeys);goog.exportProperty(ol.source.ImageVector.prototype,"getProperties",ol.source.ImageVector.prototype.getProperties);goog.exportProperty(ol.source.ImageVector.prototype,"set",ol.source.ImageVector.prototype.set);goog.exportProperty(ol.source.ImageVector.prototype,"setProperties",ol.source.ImageVector.prototype.setProperties);goog.exportProperty(ol.source.ImageVector.prototype,"unset",ol.source.ImageVector.prototype.unset);goog.exportProperty(ol.source.ImageVector.prototype,"changed",ol.source.ImageVector.prototype.changed);goog.exportProperty(ol.source.ImageVector.prototype,"dispatchEvent",ol.source.ImageVector.prototype.dispatchEvent);goog.exportProperty(ol.source.ImageVector.prototype,"getRevision",ol.source.ImageVector.prototype.getRevision);goog.exportProperty(ol.source.ImageVector.prototype,"on",ol.source.ImageVector.prototype.on);goog.exportProperty(ol.source.ImageVector.prototype,"once",ol.source.ImageVector.prototype.once);goog.exportProperty(ol.source.ImageVector.prototype,"un",ol.source.ImageVector.prototype.un);goog.exportProperty(ol.source.ImageVector.prototype,"unByKey",ol.source.ImageVector.prototype.unByKey);goog.exportProperty(ol.source.ImageWMS.prototype,"getAttributions",ol.source.ImageWMS.prototype.getAttributions);goog.exportProperty(ol.source.ImageWMS.prototype,"getLogo",ol.source.ImageWMS.prototype.getLogo);goog.exportProperty(ol.source.ImageWMS.prototype,"getProjection",ol.source.ImageWMS.prototype.getProjection);goog.exportProperty(ol.source.ImageWMS.prototype,"getState",ol.source.ImageWMS.prototype.getState);goog.exportProperty(ol.source.ImageWMS.prototype,"refresh",ol.source.ImageWMS.prototype.refresh);goog.exportProperty(ol.source.ImageWMS.prototype,"setAttributions",ol.source.ImageWMS.prototype.setAttributions);goog.exportProperty(ol.source.ImageWMS.prototype,"get",ol.source.ImageWMS.prototype.get);goog.exportProperty(ol.source.ImageWMS.prototype,"getKeys",ol.source.ImageWMS.prototype.getKeys);goog.exportProperty(ol.source.ImageWMS.prototype,"getProperties",ol.source.ImageWMS.prototype.getProperties);goog.exportProperty(ol.source.ImageWMS.prototype,"set",ol.source.ImageWMS.prototype.set);goog.exportProperty(ol.source.ImageWMS.prototype,"setProperties",ol.source.ImageWMS.prototype.setProperties);goog.exportProperty(ol.source.ImageWMS.prototype,"unset",ol.source.ImageWMS.prototype.unset);goog.exportProperty(ol.source.ImageWMS.prototype,"changed",ol.source.ImageWMS.prototype.changed);goog.exportProperty(ol.source.ImageWMS.prototype,"dispatchEvent",ol.source.ImageWMS.prototype.dispatchEvent);goog.exportProperty(ol.source.ImageWMS.prototype,"getRevision",ol.source.ImageWMS.prototype.getRevision);goog.exportProperty(ol.source.ImageWMS.prototype,"on",ol.source.ImageWMS.prototype.on);goog.exportProperty(ol.source.ImageWMS.prototype,"once",ol.source.ImageWMS.prototype.once);goog.exportProperty(ol.source.ImageWMS.prototype,"un",ol.source.ImageWMS.prototype.un);goog.exportProperty(ol.source.ImageWMS.prototype,"unByKey",ol.source.ImageWMS.prototype.unByKey);goog.exportProperty(ol.source.XYZ.prototype,"setRenderReprojectionEdges",ol.source.XYZ.prototype.setRenderReprojectionEdges);goog.exportProperty(ol.source.XYZ.prototype,"setTileGridForProjection",ol.source.XYZ.prototype.setTileGridForProjection);goog.exportProperty(ol.source.XYZ.prototype,"getTileLoadFunction",ol.source.XYZ.prototype.getTileLoadFunction);goog.exportProperty(ol.source.XYZ.prototype,"getTileUrlFunction",ol.source.XYZ.prototype.getTileUrlFunction);goog.exportProperty(ol.source.XYZ.prototype,"getUrls",ol.source.XYZ.prototype.getUrls);goog.exportProperty(ol.source.XYZ.prototype,"setTileLoadFunction",ol.source.XYZ.prototype.setTileLoadFunction);goog.exportProperty(ol.source.XYZ.prototype,"setTileUrlFunction",ol.source.XYZ.prototype.setTileUrlFunction);goog.exportProperty(ol.source.XYZ.prototype,"setUrl",ol.source.XYZ.prototype.setUrl);goog.exportProperty(ol.source.XYZ.prototype,"setUrls",ol.source.XYZ.prototype.setUrls);goog.exportProperty(ol.source.XYZ.prototype,"getTileGrid",ol.source.XYZ.prototype.getTileGrid);goog.exportProperty(ol.source.XYZ.prototype,"refresh",ol.source.XYZ.prototype.refresh);goog.exportProperty(ol.source.XYZ.prototype,"getAttributions",ol.source.XYZ.prototype.getAttributions);goog.exportProperty(ol.source.XYZ.prototype,"getLogo",ol.source.XYZ.prototype.getLogo);goog.exportProperty(ol.source.XYZ.prototype,"getProjection",ol.source.XYZ.prototype.getProjection);goog.exportProperty(ol.source.XYZ.prototype,"getState",ol.source.XYZ.prototype.getState);goog.exportProperty(ol.source.XYZ.prototype,"setAttributions",ol.source.XYZ.prototype.setAttributions);goog.exportProperty(ol.source.XYZ.prototype,"get",ol.source.XYZ.prototype.get);goog.exportProperty(ol.source.XYZ.prototype,"getKeys",ol.source.XYZ.prototype.getKeys);goog.exportProperty(ol.source.XYZ.prototype,"getProperties",ol.source.XYZ.prototype.getProperties);goog.exportProperty(ol.source.XYZ.prototype,"set",ol.source.XYZ.prototype.set);goog.exportProperty(ol.source.XYZ.prototype,"setProperties",ol.source.XYZ.prototype.setProperties);goog.exportProperty(ol.source.XYZ.prototype,"unset",ol.source.XYZ.prototype.unset);goog.exportProperty(ol.source.XYZ.prototype,"changed",ol.source.XYZ.prototype.changed);goog.exportProperty(ol.source.XYZ.prototype,"dispatchEvent",ol.source.XYZ.prototype.dispatchEvent);goog.exportProperty(ol.source.XYZ.prototype,"getRevision",ol.source.XYZ.prototype.getRevision);goog.exportProperty(ol.source.XYZ.prototype,"on",ol.source.XYZ.prototype.on);goog.exportProperty(ol.source.XYZ.prototype,"once",ol.source.XYZ.prototype.once);goog.exportProperty(ol.source.XYZ.prototype,"un",ol.source.XYZ.prototype.un);goog.exportProperty(ol.source.XYZ.prototype,"unByKey",ol.source.XYZ.prototype.unByKey);goog.exportProperty(ol.source.MapQuest.prototype,"setRenderReprojectionEdges",ol.source.MapQuest.prototype.setRenderReprojectionEdges);goog.exportProperty(ol.source.MapQuest.prototype,"setTileGridForProjection",ol.source.MapQuest.prototype.setTileGridForProjection);goog.exportProperty(ol.source.MapQuest.prototype,"getTileLoadFunction",ol.source.MapQuest.prototype.getTileLoadFunction);goog.exportProperty(ol.source.MapQuest.prototype,"getTileUrlFunction",ol.source.MapQuest.prototype.getTileUrlFunction);goog.exportProperty(ol.source.MapQuest.prototype,"getUrls",ol.source.MapQuest.prototype.getUrls);goog.exportProperty(ol.source.MapQuest.prototype,"setTileLoadFunction",ol.source.MapQuest.prototype.setTileLoadFunction);goog.exportProperty(ol.source.MapQuest.prototype,"setTileUrlFunction",ol.source.MapQuest.prototype.setTileUrlFunction);goog.exportProperty(ol.source.MapQuest.prototype,"setUrl",ol.source.MapQuest.prototype.setUrl);goog.exportProperty(ol.source.MapQuest.prototype,"setUrls",ol.source.MapQuest.prototype.setUrls);goog.exportProperty(ol.source.MapQuest.prototype,"getTileGrid",ol.source.MapQuest.prototype.getTileGrid);goog.exportProperty(ol.source.MapQuest.prototype,"refresh",ol.source.MapQuest.prototype.refresh);goog.exportProperty(ol.source.MapQuest.prototype,"getAttributions",ol.source.MapQuest.prototype.getAttributions);goog.exportProperty(ol.source.MapQuest.prototype,"getLogo",ol.source.MapQuest.prototype.getLogo);goog.exportProperty(ol.source.MapQuest.prototype,"getProjection",ol.source.MapQuest.prototype.getProjection);goog.exportProperty(ol.source.MapQuest.prototype,"getState",ol.source.MapQuest.prototype.getState);goog.exportProperty(ol.source.MapQuest.prototype,"setAttributions",ol.source.MapQuest.prototype.setAttributions);goog.exportProperty(ol.source.MapQuest.prototype,"get",ol.source.MapQuest.prototype.get);goog.exportProperty(ol.source.MapQuest.prototype,"getKeys",ol.source.MapQuest.prototype.getKeys);goog.exportProperty(ol.source.MapQuest.prototype,"getProperties",ol.source.MapQuest.prototype.getProperties);goog.exportProperty(ol.source.MapQuest.prototype,"set",ol.source.MapQuest.prototype.set);goog.exportProperty(ol.source.MapQuest.prototype,"setProperties",ol.source.MapQuest.prototype.setProperties);goog.exportProperty(ol.source.MapQuest.prototype,"unset",ol.source.MapQuest.prototype.unset);goog.exportProperty(ol.source.MapQuest.prototype,"changed",ol.source.MapQuest.prototype.changed);goog.exportProperty(ol.source.MapQuest.prototype,"dispatchEvent",ol.source.MapQuest.prototype.dispatchEvent);goog.exportProperty(ol.source.MapQuest.prototype,"getRevision",ol.source.MapQuest.prototype.getRevision);goog.exportProperty(ol.source.MapQuest.prototype,"on",ol.source.MapQuest.prototype.on);goog.exportProperty(ol.source.MapQuest.prototype,"once",ol.source.MapQuest.prototype.once);goog.exportProperty(ol.source.MapQuest.prototype,"un",ol.source.MapQuest.prototype.un);goog.exportProperty(ol.source.MapQuest.prototype,"unByKey",ol.source.MapQuest.prototype.unByKey);goog.exportProperty(ol.source.OSM.prototype,"setRenderReprojectionEdges",ol.source.OSM.prototype.setRenderReprojectionEdges);goog.exportProperty(ol.source.OSM.prototype,"setTileGridForProjection",ol.source.OSM.prototype.setTileGridForProjection);goog.exportProperty(ol.source.OSM.prototype,"getTileLoadFunction",ol.source.OSM.prototype.getTileLoadFunction);goog.exportProperty(ol.source.OSM.prototype,"getTileUrlFunction",ol.source.OSM.prototype.getTileUrlFunction);goog.exportProperty(ol.source.OSM.prototype,"getUrls",ol.source.OSM.prototype.getUrls);goog.exportProperty(ol.source.OSM.prototype,"setTileLoadFunction",ol.source.OSM.prototype.setTileLoadFunction);goog.exportProperty(ol.source.OSM.prototype,"setTileUrlFunction",ol.source.OSM.prototype.setTileUrlFunction);goog.exportProperty(ol.source.OSM.prototype,"setUrl",ol.source.OSM.prototype.setUrl);goog.exportProperty(ol.source.OSM.prototype,"setUrls",ol.source.OSM.prototype.setUrls);goog.exportProperty(ol.source.OSM.prototype,"getTileGrid",ol.source.OSM.prototype.getTileGrid);goog.exportProperty(ol.source.OSM.prototype,"refresh",ol.source.OSM.prototype.refresh);goog.exportProperty(ol.source.OSM.prototype,"getAttributions",ol.source.OSM.prototype.getAttributions);goog.exportProperty(ol.source.OSM.prototype,"getLogo",ol.source.OSM.prototype.getLogo);goog.exportProperty(ol.source.OSM.prototype,"getProjection",ol.source.OSM.prototype.getProjection);goog.exportProperty(ol.source.OSM.prototype,"getState",ol.source.OSM.prototype.getState);goog.exportProperty(ol.source.OSM.prototype,"setAttributions",ol.source.OSM.prototype.setAttributions);goog.exportProperty(ol.source.OSM.prototype,"get",ol.source.OSM.prototype.get);goog.exportProperty(ol.source.OSM.prototype,"getKeys",ol.source.OSM.prototype.getKeys);goog.exportProperty(ol.source.OSM.prototype,"getProperties",ol.source.OSM.prototype.getProperties);goog.exportProperty(ol.source.OSM.prototype,"set",ol.source.OSM.prototype.set);goog.exportProperty(ol.source.OSM.prototype,"setProperties",ol.source.OSM.prototype.setProperties);goog.exportProperty(ol.source.OSM.prototype,"unset",ol.source.OSM.prototype.unset);goog.exportProperty(ol.source.OSM.prototype,"changed",ol.source.OSM.prototype.changed);goog.exportProperty(ol.source.OSM.prototype,"dispatchEvent",ol.source.OSM.prototype.dispatchEvent);goog.exportProperty(ol.source.OSM.prototype,"getRevision",ol.source.OSM.prototype.getRevision);goog.exportProperty(ol.source.OSM.prototype,"on",ol.source.OSM.prototype.on);goog.exportProperty(ol.source.OSM.prototype,"once",ol.source.OSM.prototype.once);goog.exportProperty(ol.source.OSM.prototype,"un",ol.source.OSM.prototype.un);goog.exportProperty(ol.source.OSM.prototype,"unByKey",ol.source.OSM.prototype.unByKey);goog.exportProperty(ol.source.Raster.prototype,"getAttributions",ol.source.Raster.prototype.getAttributions);goog.exportProperty(ol.source.Raster.prototype,"getLogo",ol.source.Raster.prototype.getLogo);goog.exportProperty(ol.source.Raster.prototype,"getProjection",ol.source.Raster.prototype.getProjection);goog.exportProperty(ol.source.Raster.prototype,"getState",ol.source.Raster.prototype.getState);goog.exportProperty(ol.source.Raster.prototype,"refresh",ol.source.Raster.prototype.refresh);goog.exportProperty(ol.source.Raster.prototype,"setAttributions",ol.source.Raster.prototype.setAttributions);goog.exportProperty(ol.source.Raster.prototype,"get",ol.source.Raster.prototype.get);goog.exportProperty(ol.source.Raster.prototype,"getKeys",ol.source.Raster.prototype.getKeys);goog.exportProperty(ol.source.Raster.prototype,"getProperties",ol.source.Raster.prototype.getProperties);goog.exportProperty(ol.source.Raster.prototype,"set",ol.source.Raster.prototype.set);goog.exportProperty(ol.source.Raster.prototype,"setProperties",ol.source.Raster.prototype.setProperties);goog.exportProperty(ol.source.Raster.prototype,"unset",ol.source.Raster.prototype.unset);goog.exportProperty(ol.source.Raster.prototype,"changed",ol.source.Raster.prototype.changed);goog.exportProperty(ol.source.Raster.prototype,"dispatchEvent",ol.source.Raster.prototype.dispatchEvent);goog.exportProperty(ol.source.Raster.prototype,"getRevision",ol.source.Raster.prototype.getRevision);goog.exportProperty(ol.source.Raster.prototype,"on",ol.source.Raster.prototype.on);goog.exportProperty(ol.source.Raster.prototype,"once",ol.source.Raster.prototype.once);goog.exportProperty(ol.source.Raster.prototype,"un",ol.source.Raster.prototype.un);goog.exportProperty(ol.source.Raster.prototype,"unByKey",ol.source.Raster.prototype.unByKey);goog.exportProperty(ol.source.Stamen.prototype,"setRenderReprojectionEdges",ol.source.Stamen.prototype.setRenderReprojectionEdges);goog.exportProperty(ol.source.Stamen.prototype,"setTileGridForProjection",ol.source.Stamen.prototype.setTileGridForProjection);goog.exportProperty(ol.source.Stamen.prototype,"getTileLoadFunction",ol.source.Stamen.prototype.getTileLoadFunction);goog.exportProperty(ol.source.Stamen.prototype,"getTileUrlFunction",ol.source.Stamen.prototype.getTileUrlFunction);goog.exportProperty(ol.source.Stamen.prototype,"getUrls",ol.source.Stamen.prototype.getUrls);goog.exportProperty(ol.source.Stamen.prototype,"setTileLoadFunction",ol.source.Stamen.prototype.setTileLoadFunction);goog.exportProperty(ol.source.Stamen.prototype,"setTileUrlFunction",ol.source.Stamen.prototype.setTileUrlFunction);goog.exportProperty(ol.source.Stamen.prototype,"setUrl",ol.source.Stamen.prototype.setUrl);goog.exportProperty(ol.source.Stamen.prototype,"setUrls",ol.source.Stamen.prototype.setUrls);goog.exportProperty(ol.source.Stamen.prototype,"getTileGrid",ol.source.Stamen.prototype.getTileGrid);goog.exportProperty(ol.source.Stamen.prototype,"refresh",ol.source.Stamen.prototype.refresh);goog.exportProperty(ol.source.Stamen.prototype,"getAttributions",ol.source.Stamen.prototype.getAttributions);goog.exportProperty(ol.source.Stamen.prototype,"getLogo",ol.source.Stamen.prototype.getLogo);goog.exportProperty(ol.source.Stamen.prototype,"getProjection",ol.source.Stamen.prototype.getProjection);goog.exportProperty(ol.source.Stamen.prototype,"getState",ol.source.Stamen.prototype.getState);goog.exportProperty(ol.source.Stamen.prototype,"setAttributions",ol.source.Stamen.prototype.setAttributions);goog.exportProperty(ol.source.Stamen.prototype,"get",ol.source.Stamen.prototype.get)
;goog.exportProperty(ol.source.Stamen.prototype,"getKeys",ol.source.Stamen.prototype.getKeys);goog.exportProperty(ol.source.Stamen.prototype,"getProperties",ol.source.Stamen.prototype.getProperties);goog.exportProperty(ol.source.Stamen.prototype,"set",ol.source.Stamen.prototype.set);goog.exportProperty(ol.source.Stamen.prototype,"setProperties",ol.source.Stamen.prototype.setProperties);goog.exportProperty(ol.source.Stamen.prototype,"unset",ol.source.Stamen.prototype.unset);goog.exportProperty(ol.source.Stamen.prototype,"changed",ol.source.Stamen.prototype.changed);goog.exportProperty(ol.source.Stamen.prototype,"dispatchEvent",ol.source.Stamen.prototype.dispatchEvent);goog.exportProperty(ol.source.Stamen.prototype,"getRevision",ol.source.Stamen.prototype.getRevision);goog.exportProperty(ol.source.Stamen.prototype,"on",ol.source.Stamen.prototype.on);goog.exportProperty(ol.source.Stamen.prototype,"once",ol.source.Stamen.prototype.once);goog.exportProperty(ol.source.Stamen.prototype,"un",ol.source.Stamen.prototype.un);goog.exportProperty(ol.source.Stamen.prototype,"unByKey",ol.source.Stamen.prototype.unByKey);goog.exportProperty(ol.source.TileArcGISRest.prototype,"setRenderReprojectionEdges",ol.source.TileArcGISRest.prototype.setRenderReprojectionEdges);goog.exportProperty(ol.source.TileArcGISRest.prototype,"setTileGridForProjection",ol.source.TileArcGISRest.prototype.setTileGridForProjection);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getTileLoadFunction",ol.source.TileArcGISRest.prototype.getTileLoadFunction);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getTileUrlFunction",ol.source.TileArcGISRest.prototype.getTileUrlFunction);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getUrls",ol.source.TileArcGISRest.prototype.getUrls);goog.exportProperty(ol.source.TileArcGISRest.prototype,"setTileLoadFunction",ol.source.TileArcGISRest.prototype.setTileLoadFunction);goog.exportProperty(ol.source.TileArcGISRest.prototype,"setTileUrlFunction",ol.source.TileArcGISRest.prototype.setTileUrlFunction);goog.exportProperty(ol.source.TileArcGISRest.prototype,"setUrl",ol.source.TileArcGISRest.prototype.setUrl);goog.exportProperty(ol.source.TileArcGISRest.prototype,"setUrls",ol.source.TileArcGISRest.prototype.setUrls);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getTileGrid",ol.source.TileArcGISRest.prototype.getTileGrid);goog.exportProperty(ol.source.TileArcGISRest.prototype,"refresh",ol.source.TileArcGISRest.prototype.refresh);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getAttributions",ol.source.TileArcGISRest.prototype.getAttributions);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getLogo",ol.source.TileArcGISRest.prototype.getLogo);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getProjection",ol.source.TileArcGISRest.prototype.getProjection);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getState",ol.source.TileArcGISRest.prototype.getState);goog.exportProperty(ol.source.TileArcGISRest.prototype,"setAttributions",ol.source.TileArcGISRest.prototype.setAttributions);goog.exportProperty(ol.source.TileArcGISRest.prototype,"get",ol.source.TileArcGISRest.prototype.get);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getKeys",ol.source.TileArcGISRest.prototype.getKeys);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getProperties",ol.source.TileArcGISRest.prototype.getProperties);goog.exportProperty(ol.source.TileArcGISRest.prototype,"set",ol.source.TileArcGISRest.prototype.set);goog.exportProperty(ol.source.TileArcGISRest.prototype,"setProperties",ol.source.TileArcGISRest.prototype.setProperties);goog.exportProperty(ol.source.TileArcGISRest.prototype,"unset",ol.source.TileArcGISRest.prototype.unset);goog.exportProperty(ol.source.TileArcGISRest.prototype,"changed",ol.source.TileArcGISRest.prototype.changed);goog.exportProperty(ol.source.TileArcGISRest.prototype,"dispatchEvent",ol.source.TileArcGISRest.prototype.dispatchEvent);goog.exportProperty(ol.source.TileArcGISRest.prototype,"getRevision",ol.source.TileArcGISRest.prototype.getRevision);goog.exportProperty(ol.source.TileArcGISRest.prototype,"on",ol.source.TileArcGISRest.prototype.on);goog.exportProperty(ol.source.TileArcGISRest.prototype,"once",ol.source.TileArcGISRest.prototype.once);goog.exportProperty(ol.source.TileArcGISRest.prototype,"un",ol.source.TileArcGISRest.prototype.un);goog.exportProperty(ol.source.TileArcGISRest.prototype,"unByKey",ol.source.TileArcGISRest.prototype.unByKey);goog.exportProperty(ol.source.TileDebug.prototype,"getTileGrid",ol.source.TileDebug.prototype.getTileGrid);goog.exportProperty(ol.source.TileDebug.prototype,"refresh",ol.source.TileDebug.prototype.refresh);goog.exportProperty(ol.source.TileDebug.prototype,"getAttributions",ol.source.TileDebug.prototype.getAttributions);goog.exportProperty(ol.source.TileDebug.prototype,"getLogo",ol.source.TileDebug.prototype.getLogo);goog.exportProperty(ol.source.TileDebug.prototype,"getProjection",ol.source.TileDebug.prototype.getProjection);goog.exportProperty(ol.source.TileDebug.prototype,"getState",ol.source.TileDebug.prototype.getState);goog.exportProperty(ol.source.TileDebug.prototype,"setAttributions",ol.source.TileDebug.prototype.setAttributions);goog.exportProperty(ol.source.TileDebug.prototype,"get",ol.source.TileDebug.prototype.get);goog.exportProperty(ol.source.TileDebug.prototype,"getKeys",ol.source.TileDebug.prototype.getKeys);goog.exportProperty(ol.source.TileDebug.prototype,"getProperties",ol.source.TileDebug.prototype.getProperties);goog.exportProperty(ol.source.TileDebug.prototype,"set",ol.source.TileDebug.prototype.set);goog.exportProperty(ol.source.TileDebug.prototype,"setProperties",ol.source.TileDebug.prototype.setProperties);goog.exportProperty(ol.source.TileDebug.prototype,"unset",ol.source.TileDebug.prototype.unset);goog.exportProperty(ol.source.TileDebug.prototype,"changed",ol.source.TileDebug.prototype.changed);goog.exportProperty(ol.source.TileDebug.prototype,"dispatchEvent",ol.source.TileDebug.prototype.dispatchEvent);goog.exportProperty(ol.source.TileDebug.prototype,"getRevision",ol.source.TileDebug.prototype.getRevision);goog.exportProperty(ol.source.TileDebug.prototype,"on",ol.source.TileDebug.prototype.on);goog.exportProperty(ol.source.TileDebug.prototype,"once",ol.source.TileDebug.prototype.once);goog.exportProperty(ol.source.TileDebug.prototype,"un",ol.source.TileDebug.prototype.un);goog.exportProperty(ol.source.TileDebug.prototype,"unByKey",ol.source.TileDebug.prototype.unByKey);goog.exportProperty(ol.source.TileJSON.prototype,"setRenderReprojectionEdges",ol.source.TileJSON.prototype.setRenderReprojectionEdges);goog.exportProperty(ol.source.TileJSON.prototype,"setTileGridForProjection",ol.source.TileJSON.prototype.setTileGridForProjection);goog.exportProperty(ol.source.TileJSON.prototype,"getTileLoadFunction",ol.source.TileJSON.prototype.getTileLoadFunction);goog.exportProperty(ol.source.TileJSON.prototype,"getTileUrlFunction",ol.source.TileJSON.prototype.getTileUrlFunction);goog.exportProperty(ol.source.TileJSON.prototype,"getUrls",ol.source.TileJSON.prototype.getUrls);goog.exportProperty(ol.source.TileJSON.prototype,"setTileLoadFunction",ol.source.TileJSON.prototype.setTileLoadFunction);goog.exportProperty(ol.source.TileJSON.prototype,"setTileUrlFunction",ol.source.TileJSON.prototype.setTileUrlFunction);goog.exportProperty(ol.source.TileJSON.prototype,"setUrl",ol.source.TileJSON.prototype.setUrl);goog.exportProperty(ol.source.TileJSON.prototype,"setUrls",ol.source.TileJSON.prototype.setUrls);goog.exportProperty(ol.source.TileJSON.prototype,"getTileGrid",ol.source.TileJSON.prototype.getTileGrid);goog.exportProperty(ol.source.TileJSON.prototype,"refresh",ol.source.TileJSON.prototype.refresh);goog.exportProperty(ol.source.TileJSON.prototype,"getAttributions",ol.source.TileJSON.prototype.getAttributions);goog.exportProperty(ol.source.TileJSON.prototype,"getLogo",ol.source.TileJSON.prototype.getLogo);goog.exportProperty(ol.source.TileJSON.prototype,"getProjection",ol.source.TileJSON.prototype.getProjection);goog.exportProperty(ol.source.TileJSON.prototype,"getState",ol.source.TileJSON.prototype.getState);goog.exportProperty(ol.source.TileJSON.prototype,"setAttributions",ol.source.TileJSON.prototype.setAttributions);goog.exportProperty(ol.source.TileJSON.prototype,"get",ol.source.TileJSON.prototype.get);goog.exportProperty(ol.source.TileJSON.prototype,"getKeys",ol.source.TileJSON.prototype.getKeys);goog.exportProperty(ol.source.TileJSON.prototype,"getProperties",ol.source.TileJSON.prototype.getProperties);goog.exportProperty(ol.source.TileJSON.prototype,"set",ol.source.TileJSON.prototype.set);goog.exportProperty(ol.source.TileJSON.prototype,"setProperties",ol.source.TileJSON.prototype.setProperties);goog.exportProperty(ol.source.TileJSON.prototype,"unset",ol.source.TileJSON.prototype.unset);goog.exportProperty(ol.source.TileJSON.prototype,"changed",ol.source.TileJSON.prototype.changed);goog.exportProperty(ol.source.TileJSON.prototype,"dispatchEvent",ol.source.TileJSON.prototype.dispatchEvent);goog.exportProperty(ol.source.TileJSON.prototype,"getRevision",ol.source.TileJSON.prototype.getRevision);goog.exportProperty(ol.source.TileJSON.prototype,"on",ol.source.TileJSON.prototype.on);goog.exportProperty(ol.source.TileJSON.prototype,"once",ol.source.TileJSON.prototype.once);goog.exportProperty(ol.source.TileJSON.prototype,"un",ol.source.TileJSON.prototype.un);goog.exportProperty(ol.source.TileJSON.prototype,"unByKey",ol.source.TileJSON.prototype.unByKey);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getTileGrid",ol.source.TileUTFGrid.prototype.getTileGrid);goog.exportProperty(ol.source.TileUTFGrid.prototype,"refresh",ol.source.TileUTFGrid.prototype.refresh);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getAttributions",ol.source.TileUTFGrid.prototype.getAttributions);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getLogo",ol.source.TileUTFGrid.prototype.getLogo);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getProjection",ol.source.TileUTFGrid.prototype.getProjection);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getState",ol.source.TileUTFGrid.prototype.getState);goog.exportProperty(ol.source.TileUTFGrid.prototype,"setAttributions",ol.source.TileUTFGrid.prototype.setAttributions);goog.exportProperty(ol.source.TileUTFGrid.prototype,"get",ol.source.TileUTFGrid.prototype.get);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getKeys",ol.source.TileUTFGrid.prototype.getKeys);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getProperties",ol.source.TileUTFGrid.prototype.getProperties);goog.exportProperty(ol.source.TileUTFGrid.prototype,"set",ol.source.TileUTFGrid.prototype.set);goog.exportProperty(ol.source.TileUTFGrid.prototype,"setProperties",ol.source.TileUTFGrid.prototype.setProperties);goog.exportProperty(ol.source.TileUTFGrid.prototype,"unset",ol.source.TileUTFGrid.prototype.unset);goog.exportProperty(ol.source.TileUTFGrid.prototype,"changed",ol.source.TileUTFGrid.prototype.changed);goog.exportProperty(ol.source.TileUTFGrid.prototype,"dispatchEvent",ol.source.TileUTFGrid.prototype.dispatchEvent);goog.exportProperty(ol.source.TileUTFGrid.prototype,"getRevision",ol.source.TileUTFGrid.prototype.getRevision);goog.exportProperty(ol.source.TileUTFGrid.prototype,"on",ol.source.TileUTFGrid.prototype.on);goog.exportProperty(ol.source.TileUTFGrid.prototype,"once",ol.source.TileUTFGrid.prototype.once);goog.exportProperty(ol.source.TileUTFGrid.prototype,"un",ol.source.TileUTFGrid.prototype.un);goog.exportProperty(ol.source.TileUTFGrid.prototype,"unByKey",ol.source.TileUTFGrid.prototype.unByKey);goog.exportProperty(ol.source.TileWMS.prototype,"setRenderReprojectionEdges",ol.source.TileWMS.prototype.setRenderReprojectionEdges);goog.exportProperty(ol.source.TileWMS.prototype,"setTileGridForProjection",ol.source.TileWMS.prototype.setTileGridForProjection);goog.exportProperty(ol.source.TileWMS.prototype,"getTileLoadFunction",ol.source.TileWMS.prototype.getTileLoadFunction);goog.exportProperty(ol.source.TileWMS.prototype,"getTileUrlFunction",ol.source.TileWMS.prototype.getTileUrlFunction);goog.exportProperty(ol.source.TileWMS.prototype,"getUrls",ol.source.TileWMS.prototype.getUrls);goog.exportProperty(ol.source.TileWMS.prototype,"setTileLoadFunction",ol.source.TileWMS.prototype.setTileLoadFunction);goog.exportProperty(ol.source.TileWMS.prototype,"setTileUrlFunction",ol.source.TileWMS.prototype.setTileUrlFunction);goog.exportProperty(ol.source.TileWMS.prototype,"setUrl",ol.source.TileWMS.prototype.setUrl);goog.exportProperty(ol.source.TileWMS.prototype,"setUrls",ol.source.TileWMS.prototype.setUrls);goog.exportProperty(ol.source.TileWMS.prototype,"getTileGrid",ol.source.TileWMS.prototype.getTileGrid);goog.exportProperty(ol.source.TileWMS.prototype,"refresh",ol.source.TileWMS.prototype.refresh);goog.exportProperty(ol.source.TileWMS.prototype,"getAttributions",ol.source.TileWMS.prototype.getAttributions);goog.exportProperty(ol.source.TileWMS.prototype,"getLogo",ol.source.TileWMS.prototype.getLogo);goog.exportProperty(ol.source.TileWMS.prototype,"getProjection",ol.source.TileWMS.prototype.getProjection);goog.exportProperty(ol.source.TileWMS.prototype,"getState",ol.source.TileWMS.prototype.getState);goog.exportProperty(ol.source.TileWMS.prototype,"setAttributions",ol.source.TileWMS.prototype.setAttributions);goog.exportProperty(ol.source.TileWMS.prototype,"get",ol.source.TileWMS.prototype.get);goog.exportProperty(ol.source.TileWMS.prototype,"getKeys",ol.source.TileWMS.prototype.getKeys);goog.exportProperty(ol.source.TileWMS.prototype,"getProperties",ol.source.TileWMS.prototype.getProperties);goog.exportProperty(ol.source.TileWMS.prototype,"set",ol.source.TileWMS.prototype.set);goog.exportProperty(ol.source.TileWMS.prototype,"setProperties",ol.source.TileWMS.prototype.setProperties);goog.exportProperty(ol.source.TileWMS.prototype,"unset",ol.source.TileWMS.prototype.unset);goog.exportProperty(ol.source.TileWMS.prototype,"changed",ol.source.TileWMS.prototype.changed);goog.exportProperty(ol.source.TileWMS.prototype,"dispatchEvent",ol.source.TileWMS.prototype.dispatchEvent);goog.exportProperty(ol.source.TileWMS.prototype,"getRevision",ol.source.TileWMS.prototype.getRevision);goog.exportProperty(ol.source.TileWMS.prototype,"on",ol.source.TileWMS.prototype.on);goog.exportProperty(ol.source.TileWMS.prototype,"once",ol.source.TileWMS.prototype.once);goog.exportProperty(ol.source.TileWMS.prototype,"un",ol.source.TileWMS.prototype.un);goog.exportProperty(ol.source.TileWMS.prototype,"unByKey",ol.source.TileWMS.prototype.unByKey);goog.exportProperty(ol.source.VectorTile.prototype,"getTileLoadFunction",ol.source.VectorTile.prototype.getTileLoadFunction);goog.exportProperty(ol.source.VectorTile.prototype,"getTileUrlFunction",ol.source.VectorTile.prototype.getTileUrlFunction);goog.exportProperty(ol.source.VectorTile.prototype,"getUrls",ol.source.VectorTile.prototype.getUrls);goog.exportProperty(ol.source.VectorTile.prototype,"setTileLoadFunction",ol.source.VectorTile.prototype.setTileLoadFunction);goog.exportProperty(ol.source.VectorTile.prototype,"setTileUrlFunction",ol.source.VectorTile.prototype.setTileUrlFunction);goog.exportProperty(ol.source.VectorTile.prototype,"setUrl",ol.source.VectorTile.prototype.setUrl);goog.exportProperty(ol.source.VectorTile.prototype,"setUrls",ol.source.VectorTile.prototype.setUrls);goog.exportProperty(ol.source.VectorTile.prototype,"getTileGrid",ol.source.VectorTile.prototype.getTileGrid);goog.exportProperty(ol.source.VectorTile.prototype,"refresh",ol.source.VectorTile.prototype.refresh);goog.exportProperty(ol.source.VectorTile.prototype,"getAttributions",ol.source.VectorTile.prototype.getAttributions);goog.exportProperty(ol.source.VectorTile.prototype,"getLogo",ol.source.VectorTile.prototype.getLogo);goog.exportProperty(ol.source.VectorTile.prototype,"getProjection",ol.source.VectorTile.prototype.getProjection);goog.exportProperty(ol.source.VectorTile.prototype,"getState",ol.source.VectorTile.prototype.getState);goog.exportProperty(ol.source.VectorTile.prototype,"setAttributions",ol.source.VectorTile.prototype.setAttributions);goog.exportProperty(ol.source.VectorTile.prototype,"get",ol.source.VectorTile.prototype.get);goog.exportProperty(ol.source.VectorTile.prototype,"getKeys",ol.source.VectorTile.prototype.getKeys);goog.exportProperty(ol.source.VectorTile.prototype,"getProperties",ol.source.VectorTile.prototype.getProperties);goog.exportProperty(ol.source.VectorTile.prototype,"set",ol.source.VectorTile.prototype.set);goog.exportProperty(ol.source.VectorTile.prototype,"setProperties",ol.source.VectorTile.prototype.setProperties);goog.exportProperty(ol.source.VectorTile.prototype,"unset",ol.source.VectorTile.prototype.unset);goog.exportProperty(ol.source.VectorTile.prototype,"changed",ol.source.VectorTile.prototype.changed);goog.exportProperty(ol.source.VectorTile.prototype,"dispatchEvent",ol.source.VectorTile.prototype.dispatchEvent);goog.exportProperty(ol.source.VectorTile.prototype,"getRevision",ol.source.VectorTile.prototype.getRevision);goog.exportProperty(ol.source.VectorTile.prototype,"on",ol.source.VectorTile.prototype.on);goog.exportProperty(ol.source.VectorTile.prototype,"once",ol.source.VectorTile.prototype.once);goog.exportProperty(ol.source.VectorTile.prototype,"un",ol.source.VectorTile.prototype.un);goog.exportProperty(ol.source.VectorTile.prototype,"unByKey",ol.source.VectorTile.prototype.unByKey);goog.exportProperty(ol.source.WMTS.prototype,"setRenderReprojectionEdges",ol.source.WMTS.prototype.setRenderReprojectionEdges);goog.exportProperty(ol.source.WMTS.prototype,"setTileGridForProjection",ol.source.WMTS.prototype.setTileGridForProjection);goog.exportProperty(ol.source.WMTS.prototype,"getTileLoadFunction",ol.source.WMTS.prototype.getTileLoadFunction);goog.exportProperty(ol.source.WMTS.prototype,"getTileUrlFunction",ol.source.WMTS.prototype.getTileUrlFunction);goog.exportProperty(ol.source.WMTS.prototype,"getUrls",ol.source.WMTS.prototype.getUrls);goog.exportProperty(ol.source.WMTS.prototype,"setTileLoadFunction",ol.source.WMTS.prototype.setTileLoadFunction);goog.exportProperty(ol.source.WMTS.prototype,"setTileUrlFunction",ol.source.WMTS.prototype.setTileUrlFunction);goog.exportProperty(ol.source.WMTS.prototype,"setUrl",ol.source.WMTS.prototype.setUrl);goog.exportProperty(ol.source.WMTS.prototype,"setUrls",ol.source.WMTS.prototype.setUrls);goog.exportProperty(ol.source.WMTS.prototype,"getTileGrid",ol.source.WMTS.prototype.getTileGrid);goog.exportProperty(ol.source.WMTS.prototype,"refresh",ol.source.WMTS.prototype.refresh);goog.exportProperty(ol.source.WMTS.prototype,"getAttributions",ol.source.WMTS.prototype.getAttributions);goog.exportProperty(ol.source.WMTS.prototype,"getLogo",ol.source.WMTS.prototype.getLogo);goog.exportProperty(ol.source.WMTS.prototype,"getProjection",ol.source.WMTS.prototype.getProjection);goog.exportProperty(ol.source.WMTS.prototype,"getState",ol.source.WMTS.prototype.getState);goog.exportProperty(ol.source.WMTS.prototype,"setAttributions",ol.source.WMTS.prototype.setAttributions);goog.exportProperty(ol.source.WMTS.prototype,"get",ol.source.WMTS.prototype.get);goog.exportProperty(ol.source.WMTS.prototype,"getKeys",ol.source.WMTS.prototype.getKeys);goog.exportProperty(ol.source.WMTS.prototype,"getProperties",ol.source.WMTS.prototype.getProperties);goog.exportProperty(ol.source.WMTS.prototype,"set",ol.source.WMTS.prototype.set);goog.exportProperty(ol.source.WMTS.prototype,"setProperties",ol.source.WMTS.prototype.setProperties);goog.exportProperty(ol.source.WMTS.prototype,"unset",ol.source.WMTS.prototype.unset);goog.exportProperty(ol.source.WMTS.prototype,"changed",ol.source.WMTS.prototype.changed);goog.exportProperty(ol.source.WMTS.prototype,"dispatchEvent",ol.source.WMTS.prototype.dispatchEvent);goog.exportProperty(ol.source.WMTS.prototype,"getRevision",ol.source.WMTS.prototype.getRevision);goog.exportProperty(ol.source.WMTS.prototype,"on",ol.source.WMTS.prototype.on);goog.exportProperty(ol.source.WMTS.prototype,"once",ol.source.WMTS.prototype.once);goog.exportProperty(ol.source.WMTS.prototype,"un",ol.source.WMTS.prototype.un);goog.exportProperty(ol.source.WMTS.prototype,"unByKey",ol.source.WMTS.prototype.unByKey);goog.exportProperty(ol.source.Zoomify.prototype,"setRenderReprojectionEdges",ol.source.Zoomify.prototype.setRenderReprojectionEdges);goog.exportProperty(ol.source.Zoomify.prototype,"setTileGridForProjection",ol.source.Zoomify.prototype.setTileGridForProjection);goog.exportProperty(ol.source.Zoomify.prototype,"getTileLoadFunction",ol.source.Zoomify.prototype.getTileLoadFunction);goog.exportProperty(ol.source.Zoomify.prototype,"getTileUrlFunction",ol.source.Zoomify.prototype.getTileUrlFunction);goog.exportProperty(ol.source.Zoomify.prototype,"getUrls",ol.source.Zoomify.prototype.getUrls);goog.exportProperty(ol.source.Zoomify.prototype,"setTileLoadFunction",ol.source.Zoomify.prototype.setTileLoadFunction);goog.exportProperty(ol.source.Zoomify.prototype,"setTileUrlFunction",ol.source.Zoomify.prototype.setTileUrlFunction);goog.exportProperty(ol.source.Zoomify.prototype,"setUrl",ol.source.Zoomify.prototype.setUrl);goog.exportProperty(ol.source.Zoomify.prototype,"setUrls",ol.source.Zoomify.prototype.setUrls);goog.exportProperty(ol.source.Zoomify.prototype,"getTileGrid",ol.source.Zoomify.prototype.getTileGrid);goog.exportProperty(ol.source.Zoomify.prototype,"refresh",ol.source.Zoomify.prototype.refresh);goog.exportProperty(ol.source.Zoomify.prototype,"getAttributions",ol.source.Zoomify.prototype.getAttributions);goog.exportProperty(ol.source.Zoomify.prototype,"getLogo",ol.source.Zoomify.prototype.getLogo);goog.exportProperty(ol.source.Zoomify.prototype,"getProjection",ol.source.Zoomify.prototype.getProjection);goog.exportProperty(ol.source.Zoomify.prototype,"getState",ol.source.Zoomify.prototype.getState);goog.exportProperty(ol.source.Zoomify.prototype,"setAttributions",ol.source.Zoomify.prototype.setAttributions);goog.exportProperty(ol.source.Zoomify.prototype,"get",ol.source.Zoomify.prototype.get);goog.exportProperty(ol.source.Zoomify.prototype,"getKeys",ol.source.Zoomify.prototype.getKeys);goog.exportProperty(ol.source.Zoomify.prototype,"getProperties",ol.source.Zoomify.prototype.getProperties);goog.exportProperty(ol.source.Zoomify.prototype,"set",ol.source.Zoomify.prototype.set);goog.exportProperty(ol.source.Zoomify.prototype,"setProperties",ol.source.Zoomify.prototype.setProperties);goog.exportProperty(ol.source.Zoomify.prototype,"unset",ol.source.Zoomify.prototype.unset);goog.exportProperty(ol.source.Zoomify.prototype,"changed",ol.source.Zoomify.prototype.changed);goog.exportProperty(ol.source.Zoomify.prototype,"dispatchEvent",ol.source.Zoomify.prototype.dispatchEvent);goog.exportProperty(ol.source.Zoomify.prototype,"getRevision",ol.source.Zoomify.prototype.getRevision);goog.exportProperty(ol.source.Zoomify.prototype,"on",ol.source.Zoomify.prototype.on);goog.exportProperty(ol.source.Zoomify.prototype,"once",ol.source.Zoomify.prototype.once);goog.exportProperty(ol.source.Zoomify.prototype,"un",ol.source.Zoomify.prototype.un);goog.exportProperty(ol.source.Zoomify.prototype,"unByKey",ol.source.Zoomify.prototype.unByKey);goog.exportProperty(ol.style.Circle.prototype,"getOpacity",ol.style.Circle.prototype.getOpacity);goog.exportProperty(ol.style.Circle.prototype,"getRotateWithView",ol.style.Circle.prototype.getRotateWithView);goog.exportProperty(ol.style.Circle.prototype,"getRotation",ol.style.Circle.prototype.getRotation);goog.exportProperty(ol.style.Circle.prototype,"getScale",ol.style.Circle.prototype.getScale);goog.exportProperty(ol.style.Circle.prototype,"getSnapToPixel",ol.style.Circle.prototype.getSnapToPixel);goog.exportProperty(ol.style.Circle.prototype,"setOpacity",ol.style.Circle.prototype.setOpacity);goog.exportProperty(ol.style.Circle.prototype,"setRotation",ol.style.Circle.prototype.setRotation);goog.exportProperty(ol.style.Circle.prototype,"setScale",ol.style.Circle.prototype.setScale);goog.exportProperty(ol.style.Icon.prototype,"getOpacity",ol.style.Icon.prototype.getOpacity);goog.exportProperty(ol.style.Icon.prototype,"getRotateWithView",ol.style.Icon.prototype.getRotateWithView);goog.exportProperty(ol.style.Icon.prototype,"getRotation",ol.style.Icon.prototype.getRotation);goog.exportProperty(ol.style.Icon.prototype,"getScale",ol.style.Icon.prototype.getScale);goog.exportProperty(ol.style.Icon.prototype,"getSnapToPixel",ol.style.Icon.prototype.getSnapToPixel);goog.exportProperty(ol.style.Icon.prototype,"setOpacity",ol.style.Icon.prototype.setOpacity);goog.exportProperty(ol.style.Icon.prototype,"setRotation",ol.style.Icon.prototype.setRotation);goog.exportProperty(ol.style.Icon.prototype,"setScale",ol.style.Icon.prototype.setScale);goog.exportProperty(ol.style.RegularShape.prototype,"getOpacity",ol.style.RegularShape.prototype.getOpacity);goog.exportProperty(ol.style.RegularShape.prototype,"getRotateWithView",ol.style.RegularShape.prototype.getRotateWithView);goog.exportProperty(ol.style.RegularShape.prototype,"getRotation",ol.style.RegularShape.prototype.getRotation);goog.exportProperty(ol.style.RegularShape.prototype,"getScale",ol.style.RegularShape.prototype.getScale);goog.exportProperty(ol.style.RegularShape.prototype,"getSnapToPixel",ol.style.RegularShape.prototype.getSnapToPixel);goog.exportProperty(ol.style.RegularShape.prototype,"setOpacity",ol.style.RegularShape.prototype.setOpacity);goog.exportProperty(ol.style.RegularShape.prototype,"setRotation",ol.style.RegularShape.prototype.setRotation);goog.exportProperty(ol.style.RegularShape.prototype,"setScale",ol.style.RegularShape.prototype.setScale);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getMaxZoom",ol.tilegrid.WMTS.prototype.getMaxZoom);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getMinZoom",ol.tilegrid.WMTS.prototype.getMinZoom);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getOrigin",ol.tilegrid.WMTS.prototype.getOrigin);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getResolution",ol.tilegrid.WMTS.prototype.getResolution);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getResolutions",ol.tilegrid.WMTS.prototype.getResolutions);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getTileCoordExtent",ol.tilegrid.WMTS.prototype.getTileCoordExtent);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getTileCoordForCoordAndResolution",ol.tilegrid.WMTS.prototype.getTileCoordForCoordAndResolution);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getTileCoordForCoordAndZ",ol.tilegrid.WMTS.prototype.getTileCoordForCoordAndZ);goog.exportProperty(ol.tilegrid.WMTS.prototype,"getTileSize",ol.tilegrid.WMTS.prototype.getTileSize);goog.exportProperty(ol.VectorTile.prototype,"getTileCoord",ol.VectorTile.prototype.getTileCoord);goog.exportProperty(ol.View.prototype,"get",ol.View.prototype.get);goog.exportProperty(ol.View.prototype,"getKeys",ol.View.prototype.getKeys);goog.exportProperty(ol.View.prototype,"getProperties",ol.View.prototype.getProperties);goog.exportProperty(ol.View.prototype,"set",ol.View.prototype.set);goog.exportProperty(ol.View.prototype,"setProperties",ol.View.prototype.setProperties);goog.exportProperty(ol.View.prototype,"unset",ol.View.prototype.unset);goog.exportProperty(ol.View.prototype,"changed",ol.View.prototype.changed);goog.exportProperty(ol.View.prototype,"dispatchEvent",ol.View.prototype.dispatchEvent);goog.exportProperty(ol.View.prototype,"getRevision",ol.View.prototype.getRevision);goog.exportProperty(ol.View.prototype,"on",ol.View.prototype.on);goog.exportProperty(ol.View.prototype,"once",ol.View.prototype.once);goog.exportProperty(ol.View.prototype,"un",ol.View.prototype.un);goog.exportProperty(ol.View.prototype,"unByKey",ol.View.prototype.unByKey);OPENLAYERS.ol=ol;return OPENLAYERS.ol});goog.provide("ol.MapPane");goog.require("ol.Object");goog.require("goog.dom");ol.MapPane=function(){goog.base(this);this.element=null;this.map_=null;this.listenerKeys=[];this.render=goog.nullFunction};goog.inherits(ol.MapPane,ol.Object);ol.MapPane.prototype.disposeInternal=function(){goog.dom.removeNode(this.extern);goog.base(this,"disposeInternal")};ol.MapPane.prototype.getMap=function(){return this.map_};ol.MapPane.prototype.setMap=function(e){if(!goog.isNull(this.map_)){goog.dom.removeNode(this.element)}if(!goog.array.isEmpty(this.listenerKeys)){goog.array.forEach(this.listenerKeys,goog.events.unlistenByKey);this.listenerKeys.length=0}this.map_=e;if(!goog.isNull(this.map_)){var o=e.getViewport();this.extern=goog.dom.createDom(goog.dom.TagName.DIV,"ol-overlaycontainer");var t=goog.dom.getChildren(o).length;goog.dom.insertChildAt(o,this.extern,t-1);var r=this.extern;goog.dom.appendChild(r,this.element);if(this.render!==goog.nullFunction){this.listenerKeys.push(goog.events.listen(e,ol.MapEventType.POSTRENDER,this.render,false,this))}e.render()}};ol.MapPane.prototype.setElement=function(e){this.element=e};goog.provide("ol.format.HotSpot");goog.require("ol.format.TextFeature");ol.format.HotSpot=function(e,o,t,r){goog.base(this);this.type_=e;this.icon_=o;this.scaleFactor_=r?r:1;this.scale_=t?t:false};goog.inherits(ol.format.HotSpot,ol.format.TextFeature);ol.format.HotSpot.prototype.readFeatureFromText=function(e){return[]};ol.format.HotSpot.prototype.readFeaturesFromText=function(e){var o,t,r,i,n,a=[];var l=e.split("\r\n");if(this.icon_){n=this.icon_}var i=this.type_.trim();var s,g;for(var p=0;p<l.length;p++){if(l[p]&&l[p].length>0){t=JSON.parse(l[p]);o=new Ez.Coordinate(t.X,t.Y);result=this.matchType(i,t);if(result===null){new Error("输入的数据格式不正确！无法解析")}if(this.scale_){var u=n.getOptions();var c=Object.assign({},u,{scale:Math.pow(result.weight,1/10)*this.scaleFactor_});n=new Ez.Icon(c)}var d=new Ez.Marker(o,n,result.title);d.setId(t.ID);d.set("type_name","hotspot");d.set("nativeObject",t);for(var y in result){if(y!=="title"){d.set(y,result[y])}}a.push(d)}}return a};ol.format.HotSpot.prototype.readProjection=function(){return new ol.proj.get("EPSG:4326")};ol.format.HotSpot.prototype.matchType=function(e,o){switch(e){case"jsonv1":{return{title:o.LABEL,weight:o.WEIGHT,bbox:o.BBOX,customs:o.customs}}case"jsonv1s":{return{title:o.LABEL,weight:o.WEIGHT,bbox:o.BBOX}}case"jsonv2":{return{title:o.name,weight:o.weight,bbox:o.bbox,address:o.address,layer:o.layer,customs:o.customs}}case"jsonv2s":{return{title:o.name,weight:o.weight,bbox:o.bbox,address:o.address,layer:o.layer}}}return null};goog.provide("ol.source.EzHotspot");goog.require("ol.source.TileImage");goog.require("ol.TileUrlFunction");ol.source.EzHotspot=function(e){var o=goog.isDef(e.projection)?e.projection:"EPSG:4326";var t=ol.proj.get(o).getExtent();var r=goog.isDef(e.tileSize)?e.tileSize:256;var i=360/r;var n=new Array(18);for(var a=0;a<18;++a){n[a]=i/Math.pow(2,a)}var l=goog.isDef(e.resolutions)?e.resolutions:n;var s=new ol.tilegrid.TileGrid({origin:ol.extent.getTopLeft(t),resolutions:l,tileSize:r});goog.base(this,{projection:o,tileUrlFunction:this.urlCallbackFunction_,tileGrid:s});goog.asserts.assert(goog.isDef(e.hotspotUrlTemplate),"热点数据URL模板不能为空");this.hotspotUrlTemplate_=e.hotspotUrlTemplate;goog.asserts.assert(goog.isDef(e.tileUrlTemplate),"热点数据URL模板不能为空");this.tileUrlTemplate_=e.tileUrlTemplate;this.markerData_={};this.proxyUrl_=goog.isDef(e.proxyUrl)?e.proxyUrl+"?request=gotourl&url=":""};goog.inherits(ol.source.EzHotspot,ol.source.TileImage);ol.source.EzHotspot.prototype.urlCallbackFunction_=function(e,o,t){var r=e[0];var i=e[1];var n=-e[2]-1;var a=this.hotspotUrlTemplate_;var l=this.tileUrlTemplate_;var a=a.replace(/{z}/g,r.toString()).replace(/{y}/g,n.toString()).replace(/{x}/g,i.toString());var s=this.markerData_;var g=this;var p=this.createXHR();var u=function(e){if(p.readyState<4){return}if(p.status!==200){return}if(p.readyState===4){var o=p.responseText.replace(/((\r\n)+)$/,"").replace(/\r\n/g,",").replace(/(.\d+)$/,"");o="["+o+"]";if(r in s){s[r][i+":"+n]=JSON.parse(o)}else{s[r]={};s[r][i+":"+n]=JSON.parse(o)}}};p.onreadystatechange=u
;p.open("GET",this.proxyUrl_+encodeURIComponent(a),true);p.send(null);return l.replace("{z}",r.toString()).replace("{y}",n.toString()).replace("{x}",i.toString())};ol.source.EzHotspot.prototype.createXHR=function(){var e;if(typeof XMLHttpRequest!=="undefined")e=new XMLHttpRequest;else{var o=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"];for(var t=0,r=o.length;t<r;t++){try{e=new ActiveXObject(o[t]);break}catch(e){new Error("查看浏览器版本")}}}return e};ol.source.EzHotspot.prototype.getMarkerData=function(){return this.markerData_};goog.provide("ol.source.SingleHotSpot");ol.source.SingleHotSpot=function(e){if(!e.url){return}this.url=e.url;this.proxyurl=e.proxyurl;this.appkey=e.appkey;this.proxyurlJoin=e.proxyJoin||"?toUrl=";var o=e.type;var t=e.icon;var r=e.isScale;var i=e.scaleFactor;this.format=new ol.format.HotSpot(o,t,r,i);var n=360/256;var a=new Array(22);for(var l=0;l<=22;++l){a[l]=n/Math.pow(2,l)}var s=this.tilegrid=new ol.tilegrid.TileGrid({origin:e.origin||[-180,90],resolutions:e.resolutions||a,tileSize:e.tileSize||256});goog.base(this,{projection:e.projection||"EPSG:4326",tileGrid:s,url:this.tileurlfunc.bind(this),strategy:ol.loadingstrategy.tile(s),format:this.format});this.lasttime_=null;this.loading_=false;this.loadend_=true};goog.inherits(ol.source.SingleHotSpot,ol.source.Vector);ol.source.SingleHotSpot.prototype.setLoadingState=function(e){this.loading_=e};ol.source.SingleHotSpot.prototype.setLoadendState=function(e){this.loadend_=e};ol.source.SingleHotSpot.prototype.tileurlfunc=function(e,o){var t=this.tilegrid.getTileCoordForCoordAndResolution(ol.extent.getCenter(e),o);var r=t[0];var i=t[1];var n=-t[2]-1;var a=this.url;var l=a.replace("{z}",r.toString()).replace("{y}",n.toString()).replace("{x}",i.toString());return this.proxyurl+this.proxyurlJoin+encodeURIComponent(l+"&appkey="+this.appkey)};ol.source.SingleHotSpot.prototype.loadFeatures=function(e,o,t){var r=this.loadedExtentsRtree_;var i=this.strategy_(e,o);var n,a;for(n=0,a=i.length;n<a;++n){var l=i[n];var s=r.forEachInExtent(l,function(e){return ol.extent.containsExtent(e.extent,l)});if(!s){if(!this.loading_&&this.loadend_){this.loader_.call(this,l,o,t);r.insert(l,{extent:l.slice()})}}}};goog.provide("ol.source.EzMap2010");goog.require("ol.source.TileImage");goog.require("ol.TileUrlFunction");goog.require("ol.tilegrid.TileGrid");goog.require("ol.proj");goog.require("ol.proj.Projection");goog.require("ol.TileCoord");ol.source.EzMap2010=function(e){var o=e.projection||"EPSG:4326";var t=new Array(30);for(var r=0;r<=30;++r){t[r]=Math.pow(2,1-r)}var i={};i["tileGrid"]=new ol.tilegrid.TileGrid({origin:[0,0],resolutions:e.resolutions||t,tileSize:256});i["projection"]=o;i["tileUrlFunction"]=this.urlCallbackFunction_.bind(this);goog.asserts.assert(goog.isDef(e.url),"瓦片URL模板不能为空");this.urlTemplate_=e.url;goog.base(this,i)};goog.inherits(ol.source.EzMap2010,ol.source.TileImage);ol.source.EzMap2010.prototype.urlCallbackFunction_=function(e,o,t){var r=e[0];var i=e[1];var n=e[2];var a=this.urlTemplate_;return a.replace("{z}",r.toString()).replace("{y}",n.toString()).replace("{x}",i.toString())};goog.exportSymbol("ol.source.EzMap2010",ol.source.EzMap2010);goog.provide("ol.source.Cluster2");ol.source.Cluster2=function(e){goog.base(this,{attributions:e.attributions,extent:e.extent,logo:e.logo,projection:e.projection,wrapX:e.wrapX});this.resolution_=undefined;this.distance_=e.distance!==undefined?e.distance:20;this.features_=[];this.geometryFunction_=e.geometryFunction||function(e){var o=e.getGeometry();goog.asserts.assert(o instanceof ol.geom.Point,"feature geometry is a ol.geom.Point instance");return o};this.source_=e.source;this.source_.on(ol.events.EventType.CHANGE,ol.source.Cluster2.prototype.onSourceChange_,this)};goog.inherits(ol.source.Cluster2,ol.source.Vector);ol.source.Cluster2.prototype.getSource=function(){return this.source_};ol.source.Cluster2.prototype.loadFeatures=function(e,o,t){this.source_.loadFeatures(e,o,t);if(o!==this.resolution_){this.clear();this.resolution_=o;this.cluster_();this.addFeatures(this.features_)}};ol.source.Cluster2.prototype.onSourceChange_=function(){this.clear();this.cluster_();this.addFeatures(this.features_);this.changed()};ol.source.Cluster2.prototype.cluster_=function(){if(this.resolution_===undefined){return}this.features_.length=0;var e=ol.extent.createEmpty();var o=this.distance_*this.resolution_;var t=this.source_.getFeatures();var r={};for(var i=0,n=t.length;i<n;i++){var a=t[i];if(!(goog.getUid(a).toString()in r)){var l=this.geometryFunction_(a);if(l){var s=l.getCoordinates();ol.extent.createOrUpdateFromCoordinate(s,e);ol.extent.buffer(e,o,e);var g=this.source_.getFeaturesInExtent(e);goog.asserts.assert(g.length>=1,"at least one neighbor found");g=g.filter(function(e){var o=goog.getUid(e).toString();if(!(o in r)){r[o]=true;return true}else{return false}});this.features_.push(this.createCluster_(g))}}}goog.asserts.assert(Object.keys(r).length==this.source_.getFeatures().length,"number of clustered equals number of features in the source")};ol.source.Cluster2.prototype.createCluster_=function(e){var o=[0,0];for(var t=e.length-1;t>=0;--t){var r=this.geometryFunction_(e[t]);if(r){ol.coordinate.add(o,r.getCoordinates())}else{e.splice(t,1)}}ol.coordinate.scale(o,1/e.length);var i;if(e.length>1){i=new ol.Feature(new ol.geom.Point(o));i.set("features",e)}else{i=e[0]}return i};goog.provide("ol.interaction.AddDOMForClick");goog.require("ol.Overlay");ol.interaction.AddDOMForClick=function(e){goog.base(this,{handleDownEvent:ol.interaction.AddDOMForClick.handleDownEvent_});var o=goog.isDef(e)?e:{};var t=document.createElement("div");var r=document.createTextNode("test");t.appendChild(r);t.style.marginLeft=-5;t.style.marginTop=-3;this.overlay_=goog.isDef(o.overlay)?o.overlay:new ol.Overlay({element:t})};goog.inherits(ol.interaction.AddDOMForClick,ol.interaction.Pointer);ol.interaction.AddDOMForClick.handleDownEvent_=function(e){var o=e.browserEvent;if(o.isMouseActionButton()){var t=e.coordinate;var r=e.map;this.overlay_.setPosition(t);r.addOverlay(this.overlay_);return true}else{return false}};goog.provide("ol.interaction.Draw2");goog.require("ol.interaction.Pointer");ol.interaction.Draw2=function(e){goog.base(this,{handleDownEvent:ol.interaction.Draw2.handleDownEvent_,handleEvent:ol.interaction.Draw2.handleEvent,handleUpEvent:ol.interaction.Draw2.handleUpEvent_});var o=goog.isDef(e)?e:{};this.downPx_=null;this.source_=goog.isDef(o.source)?o.source:null;this.features_=goog.isDef(o.features)?o.features:null;this.snapTolerance_=goog.isDef(o.snapTolerance)?o.snapTolerance:12;this.type_=o.type;this.mode_=ol.interaction.Draw.getMode_(this.type_);this.minPoints_=goog.isDef(o.minPoints)?o.minPoints:this.mode_===ol.interaction.DrawMode.POLYGON?3:2;this.maxPoints_=goog.isDef(o.maxPoints)?o.maxPoints:Infinity;this.helpTooltipElement=null;this.helpTooltip=null;var t=o.geometryFunction;if(!goog.isDef(t)){if(this.type_===ol.geom.GeometryType.CIRCLE){t=function(e,o){var t=goog.isDef(o)?o:new ol.geom.Circle([NaN,NaN]);goog.asserts.assertInstanceof(t,ol.geom.Circle,"初始化geometryFunction中opt_geometry必须是一个ol.geom.Circle");var r=ol.coordinate.squaredDistance(e[0],e[1]);t.setCenterAndRadius(e[0],Math.sqrt(r));return t}}else{var r;var i=this.mode_;if(i===ol.interaction.DrawMode.POINT){r=ol.geom.Point}else if(i===ol.interaction.DrawMode.LINE_STRING){r=ol.geom.LineString}else if(i===ol.interaction.DrawMode.POLYGON){r=ol.geom.Polygon}t=function(e,o){var t=o;if(goog.isDef(t)){t.setCoordinates(e)}else{t=new r(e)}return t}}}this.geometryFunction_=t;this.finishCoordinate_=null;this.sketchFeature_=null;this.sketchPoint_=null;this.sketchCoords_=null;this.sketchLine_=null;this.sketchLineCoords_=null;this.squaredClickTolerance_=goog.isDef(o.clickTolerance)?o.clickTolerance*o.clickTolerance:36;this.overlay_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:false,wrapX:goog.isDef(o.wrapX)?o.wrapX:false}),style:goog.isDef(o.style)?o.style:ol.interaction.Draw2.getDefaultStyleFunction()});this.geometryName_=o.geometryName;this.condition_=goog.isDef(o.condition)?o.condition:ol.events.condition.noModifierKeys;this.freehandCondition_=goog.isDef(o.freehandCondition)?o.freehandCondition:ol.events.condition.shiftKeyOnly;ol.events.listen(this,ol.Object.getChangeEventType(ol.interaction.InteractionProperty.ACTIVE),this.updateState_,false,this)};goog.inherits(ol.interaction.Draw2,ol.interaction.Pointer);ol.interaction.Draw2.prototype.changeStyle_=function(e){ol.interaction.Draw2.addClass(this.helpTooltipElement,"hidden")};ol.interaction.Draw2.prototype.createHelpTooltip=function(){if(this.helpTooltipElement){this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement)}this.helpTooltipElement=document.createElement("div");this.helpTooltipElement.className="tooltip hidden";this.helpTooltip=new ol.Overlay({element:this.helpTooltipElement,offset:[15,0],positioning:"center-left"});var e=this.getMap();e.addOverlay(this.helpTooltip,true)};ol.interaction.Draw2.getDefaultStyleFunction=function(){var e=ol.style.createDefaultEditingStyles();return function(o,t){return e[o.getGeometry().getType()]}};ol.interaction.Draw2.prototype.setMap=function(e){goog.base(this,"setMap",e);var o=this.map;this.updateState_();if(e){this.map=e;this.createHelpTooltip();this.changeStyle_=this.changeStyle_.bind(this);e.getViewport().addEventListener("mouseout",this.changeStyle_)}else{o.removeOverlay(this.helpTooltip,true);o.getViewport().removeEventListener("mouseout",this.changeStyle_)}};ol.interaction.Draw2.handleEvent=function(e){var o=!this.freehand_;if(this.freehand_&&e.type===ol.MapBrowserEvent.EventType.POINTERDRAG){this.addToDrawing_(e);o=false}else if(e.type===ol.MapBrowserEvent.EventType.POINTERMOVE){o=this.handlePointerMove_(e)}else if(e.type===ol.MapBrowserEvent.EventType.DBLCLICK){o=false}return ol.interaction.Pointer.handleEvent.call(this,e)&&o};ol.interaction.Draw2.handleDownEvent_=function(e){if(this.condition_(e)){this.downPx_=e.pixel;return true}else if((this.mode_===ol.interaction.DrawMode.LINE_STRING||this.mode_===ol.interaction.DrawMode.POLYGON)&&this.freehandCondition_(e)){this.downPx_=e.pixel;this.freehand_=true;if(goog.isNull(this.finishCoordinate_)){this.startDrawing_(e)}return true}else{return false}};ol.interaction.Draw2.handleUpEvent_=function(e){var o=e.pointerEvent.button===2?true:false;this.freehand_=false;var t=this.downPx_;var r=e.pixel;var i=t[0]-r[0];var n=t[1]-r[1];var a=i*i+n*n;var l=true;if(a<=this.squaredClickTolerance_){this.handlePointerMove_(e);if(goog.isNull(this.finishCoordinate_)){this.startDrawing_(e);if(this.mode_===ol.interaction.DrawMode.POINT){this.finishDrawing()}}else if(this.mode_===ol.interaction.DrawMode.CIRCLE){this.finishDrawing()}else{this.addToDrawing_(e)}l=false}if(o){if(this.atFinish_(e)){this.finishDrawing(o)}}return l};ol.interaction.Draw2.prototype.handlePointerMove_=function(e){if(!goog.isNull(this.finishCoordinate_)){this.modifyDrawing_(e)}else{this.createOrUpdateSketchPoint_(e)}this.updateTipTool(e,this.startDrawingFlag);return true};ol.interaction.Draw2.prototype.updateTipTool=function(e,o){var t="点击开始绘制";if(o&&this.type_){var r=this.type_;if(r===ol.geom.GeometryType.CIRCLE){t="移动确定半径，单击完成绘制"}else if(r===ol.geom.GeometryType.LINE_STRING&&this.maxPoints_===2){t="移动确定长度，单击完成绘制"}else if(r===ol.geom.GeometryType.LINE_STRING){t="单击确定节点，右击完成绘制"}else if(r===ol.geom.GeometryType.POLYGON){t="单击确定节点，右击完成绘制"}}this.helpTooltipElement.innerHTML=t;this.helpTooltip.setPosition(e.coordinate);ol.interaction.Draw2.addClass(this.helpTooltipElement,"hidden")};ol.interaction.Draw2.prototype.atFinish_=function(e){var o=false;if(!goog.isNull(this.sketchFeature_)){var t=false;var r=[this.finishCoordinate_];if(this.mode_===ol.interaction.DrawMode.LINE_STRING){t=this.sketchCoords_.length>this.minPoints_}else if(this.mode_===ol.interaction.DrawMode.POLYGON){t=this.sketchCoords_[0].length>this.minPoints_;r=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]}if(t){var i=e.map;for(var n=0,a=r.length;n<a;n++){var l=r[n];var s=i.getPixelFromCoordinate(l);var g=e.pixel;var p=g[0]-s[0];var u=g[1]-s[1];var c=this.freehand_&&this.freehandCondition_(e);var d=c?1:this.snapTolerance_;o=Math.sqrt(p*p+u*u)<=d;if(o){this.finishCoordinate_=l;break}}}}return o};ol.interaction.Draw2.prototype.createOrUpdateSketchPoint_=function(e){var o=e.coordinate.slice();if(goog.isNull(this.sketchPoint_)){this.sketchPoint_=new ol.Feature(new ol.geom.Point(o));this.updateSketchFeatures_()}else{var t=this.sketchPoint_.getGeometry();goog.asserts.assertInstanceof(t,ol.geom.Point,"sketchPointGeom should be an ol.geom.Point");t.setCoordinates(o)}};ol.interaction.Draw2.prototype.startDrawing_=function(e){var o=this.getMap();if(!o)return;var t=o.getViewport();t.addEventListener("contextmenu",function(e){e.preventDefault();e.stopPropagation();e.currentTarget.removeEventListener(e.type,arguments.callee);return false});var r=e.coordinate;this.finishCoordinate_=r;if(this.mode_===ol.interaction.DrawMode.POINT){this.sketchCoords_=r.slice()}else if(this.mode_===ol.interaction.DrawMode.POLYGON){this.sketchCoords_=[[r.slice(),r.slice()]];this.sketchLineCoords_=this.sketchCoords_[0]}else{this.sketchCoords_=[r.slice(),r.slice()];if(this.mode_===ol.interaction.DrawMode.CIRCLE){this.sketchLineCoords_=this.sketchCoords_}}if(!goog.isNull(this.sketchLineCoords_)){this.sketchLine_=new ol.Feature(new ol.geom.LineString(this.sketchLineCoords_))}var i=this.geometryFunction_(this.sketchCoords_);goog.asserts.assert(goog.isDef(i),"geometry should be defined");this.sketchFeature_=new ol.Feature;if(goog.isDef(this.geometryName_)){this.sketchFeature_.setGeometryName(this.geometryName_)}this.sketchFeature_.setGeometry(i);this.updateSketchFeatures_();this.dispatchEvent(new ol.interaction.DrawEvent(ol.interaction.DrawEventType.DRAWSTART,this.sketchFeature_))};ol.interaction.Draw2.prototype.modifyDrawing_=function(e){var o=e.coordinate;var t=this.sketchFeature_.getGeometry();goog.asserts.assertInstanceof(t,ol.geom.SimpleGeometry,"geometry should be ol.geom.SimpleGeometry or subclass");var r,i;if(this.mode_===ol.interaction.DrawMode.POINT){i=this.sketchCoords_}else if(this.mode_===ol.interaction.DrawMode.POLYGON){r=this.sketchCoords_[0];i=r[r.length-1];if(this.atFinish_(e)){o=this.finishCoordinate_.slice()}}else{r=this.sketchCoords_;i=r[r.length-1]}i[0]=o[0];i[1]=o[1];goog.asserts.assert(!goog.isNull(this.sketchCoords_),"sketchCoords_ must not be null");this.geometryFunction_(this.sketchCoords_,t);if(!goog.isNull(this.sketchPoint_)){var n=this.sketchPoint_.getGeometry();goog.asserts.assertInstanceof(n,ol.geom.Point,"sketchPointGeom should be an ol.geom.Point");n.setCoordinates(o)}var a;if(t instanceof ol.geom.Polygon&&this.mode_!==ol.interaction.DrawMode.POLYGON){if(goog.isNull(this.sketchLine_)){this.sketchLine_=new ol.Feature(new ol.geom.LineString(null))}var l=t.getLinearRing(0);a=this.sketchLine_.getGeometry();goog.asserts.assertInstanceof(a,ol.geom.LineString,"sketchLineGeom must be an ol.geom.LineString");a.setFlatCoordinates(l.getLayout(),l.getFlatCoordinates())}else if(!goog.isNull(this.sketchLineCoords_)){a=this.sketchLine_.getGeometry();goog.asserts.assertInstanceof(a,ol.geom.LineString,"sketchLineGeom must be an ol.geom.LineString");a.setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_();this.startDrawingFlag=true};ol.interaction.Draw2.prototype.addToDrawing_=function(e){var o=e.coordinate;var t=this.sketchFeature_.getGeometry();goog.asserts.assertInstanceof(t,ol.geom.SimpleGeometry,"geometry must be an ol.geom.SimpleGeometry");var r;var i;if(this.mode_===ol.interaction.DrawMode.LINE_STRING){this.finishCoordinate_=o.slice();i=this.sketchCoords_;i.push(o.slice());r=i.length>this.maxPoints_;this.geometryFunction_(i,t)}else if(this.mode_===ol.interaction.DrawMode.POLYGON){i=this.sketchCoords_[0];i.push(o.slice());r=i.length>this.maxPoints_;if(r){this.finishCoordinate_=i[0]}this.geometryFunction_(this.sketchCoords_,t)}this.updateSketchFeatures_();if(r){this.finishDrawing()}};ol.interaction.Draw2.prototype.finishDrawing=function(e){var o=this.abortDrawing_();goog.asserts.assert(!goog.isNull(o),"sketchFeature should not be null");var t=this.sketchCoords_;var r=o.getGeometry();goog.asserts.assertInstanceof(r,ol.geom.SimpleGeometry,"geometry must be an ol.geom.SimpleGeometry");if(this.mode_===ol.interaction.DrawMode.LINE_STRING){t.pop();if(e){t.pop()}this.geometryFunction_(t,r)}else if(this.mode_===ol.interaction.DrawMode.POLYGON){t[0].pop();if(e){t[0].pop()}t[0].push(t[0][0]);this.geometryFunction_(t,r)}if(this.type_===ol.geom.GeometryType.MULTI_POINT){o.setGeometry(new ol.geom.MultiPoint([t]))}else if(this.type_===ol.geom.GeometryType.MULTI_LINE_STRING){o.setGeometry(new ol.geom.MultiLineString([t]))}else if(this.type_===ol.geom.GeometryType.MULTI_POLYGON){o.setGeometry(new ol.geom.MultiPolygon([t]))}this.dispatchEvent(new ol.interaction.DrawEvent(ol.interaction.DrawEventType.DRAWEND,o));if(!goog.isNull(this.features_)){this.features_.push(o)}if(!goog.isNull(this.source_)){}var i=this.map;i.removeOverlay(this.helpTooltip,true);this.helpTooltip=null;i.getViewport().removeEventListener("mouseout",this.changeStyle_);delete this.map};ol.interaction.Draw2.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var e=this.sketchFeature_;if(!goog.isNull(e)){this.sketchFeature_=null;this.sketchPoint_=null;this.sketchLine_=null;this.overlay_.getSource().clear(true)}return e};ol.interaction.Draw2.prototype.shouldStopEvent=goog.functions.FALSE;ol.interaction.Draw2.prototype.updateSketchFeatures_=function(){var e=[];if(!goog.isNull(this.sketchFeature_)){e.push(this.sketchFeature_)}if(!goog.isNull(this.sketchLine_)){e.push(this.sketchLine_)}if(!goog.isNull(this.sketchPoint_)){e.push(this.sketchPoint_)}var o=this.overlay_.getSource();o.clear(true);o.addFeatures(e)};ol.interaction.Draw2.prototype.updateState_=function(){var e=this.getMap();var o=this.getActive();if(goog.isNull(e)||!o){this.abortDrawing_()}this.overlay_.setMap(o?e:null)};ol.interaction.Draw2.createRegularPolygon=function(e,o){return function(t,r){var i=t[0];var n=t[1];var a=Math.sqrt(ol.coordinate.squaredDistance(i,n));var l=goog.isDef(r)?r:ol.geom.Polygon.fromCircle(new ol.geom.Circle(i),e);goog.asserts.assertInstanceof(l,ol.geom.Polygon,"geometry must be a polygon");var s=goog.isDef(o)?o:Math.atan((n[1]-i[1])/(n[0]-i[0]));ol.geom.Polygon.makeRegular(l,i,a,s);return l}};ol.interaction.Draw2.getMode_=function(e){var o;if(e===ol.geom.GeometryType.POINT||e===ol.geom.GeometryType.MULTI_POINT){o=ol.interaction.DrawMode.POINT}else if(e===ol.geom.GeometryType.LINE_STRING||e===ol.geom.GeometryType.MULTI_LINE_STRING){o=ol.interaction.DrawMode.LINE_STRING}else if(e===ol.geom.GeometryType.POLYGON||e===ol.geom.GeometryType.MULTI_POLYGON){o=ol.interaction.DrawMode.POLYGON}else if(e===ol.geom.GeometryType.CIRCLE){o=ol.interaction.DrawMode.CIRCLE}goog.asserts.assert(goog.isDef(o),"mode should be defined");return o};ol.interaction.Draw2.addClass=function(e,o){var t=e.className.split(" ");for(var r=0;r<t.length;r++){if(t[r]===o.trim()){return}}t.push(o.trim());e.className=t.join(" ")};ol.interaction.Draw2.removeClass=function(e,o){var t=e.className;var r=t.split(" ");for(var i=0;i<r.length;i++){if(r[i]===o){r[i]="";break}}var n=r.join(" ");e.className=n};goog.provide("ol.interaction.EditCircle");goog.require("ol.interaction.Pointer");ol.interaction.EditCircle=function(e,o,t){if(!e){new Error("圆编辑必须指定featue对象")}goog.base(this,{handleDownEvent:ol.interaction.EditCircle.handleDownEvent_,handleEvent:ol.interaction.EditCircle.handleEvent,handleUpEvent:ol.interaction.EditCircle.handleUpEvent_});this.target_=e;this.overlay_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:false}),style:e.getStyle()});this.center_=this.target_.getCenter().getCoordinate();this.radius_=this.target_.getGeometry().getRadius();this.cb_=o?o:function(){};this.cb2_=t?t:function(){};this.controlBtn_=new ol.Overlay({element:this.initElement()});this.editing=false;this.mousedown_=false;this.upfn_=ol.interaction.EditCircle.handleUpEvent_.bind(this);this.mapport};goog.inherits(ol.interaction.EditCircle,ol.interaction.Pointer);ol.interaction.EditCircle.prototype.initSketch=function(){var e=this.getMap();e.removeOverlay(this.target_);var o=this.target_.getGeometry();var t=new ol.Feature({geometry:o});t.setId("skectchId");this.overlay_.getSource().addFeature(t);this.controlBtn_.setPosition([this.center_[0]+this.radius_,this.center_[1]])};ol.interaction.EditCircle.prototype.setMap=function(e){goog.base(this,"setMap",e);this.updateState_()};ol.interaction.EditCircle.prototype.updateState_=function(){var e=this.getMap();if(goog.isNull(e)){return}var o=e.getVectorLayers();o.getLayers().push(this.overlay_);e.addOverlay(this.controlBtn_,true);this.initSketch();this.mapport=this.getMap().getViewport();this.mapport.addEventListener("mouseup",this.upfn_)};ol.interaction.EditCircle.prototype.initElement=function(){var e=document.createElement("div");e.className="ez-editCircle-btn";e.id="ez_editCicle_btn";e.addEventListener("mousedown",this.handleDownEvent_.bind(this));return e};ol.interaction.EditCircle.handleEvent=function(e){if(e.type===ol.MapBrowserEvent.EventType.POINTERMOVE&&this.editing){var o=this.getMap();var t=this.overlay_.getSource();var r=t.getFeatureById("skectchId");var i=r.getGeometry();this.handleDragGeom_(i,e);var n=r.getGeometry().getCenter();var a=new Ez.Coordinate(n[0],n[1]);var l=new Ez.g.Circle(a,r.getGeometry().getRadius(),{isMeter:true});this.cb2_(l)}return false};ol.interaction.EditCircle.prototype.handleDragGeom_=function(e,o){var t=o.coordinate;var r=this.center_;this.controlBtn_.setPosition([t[0],r[1]]);var i=Math.abs(t[0]-r[0]);e.setRadius(i)};ol.interaction.EditCircle.handleDownEvent_=function(e){this.editing=true;this.mousedown_=true};ol.interaction.EditCircle.handleUpEvent_=function(e){this.editing=false;var o=this.overlay_.getSource();var t=o.getFeatureById("skectchId");var r=t.getGeometry().getCenter();var i=new Ez.Coordinate(r[0],r[1]);var n=new Ez.g.Circle(i,t.getGeometry().getRadius(),{isMeter:true});this.cb_(n)};ol.interaction.EditCircle.prototype.disposeAll=function(e){var o=this.getMap();var t=this.overlay_.getSource();var r=t.getFeatureById("skectchId").getGeometry();var i=o.getViewport();this.mapport.removeEventListener("mouseup",this.upfn_);var n=r.getCenter();var a=new Ez.Coordinate(n[0],n[1]);var l=new Ez.g.Circle(a,r.getRadius(),{isMeter:true});o.removeOverlay(this.controlBtn_,true);var s=o.getVectorLayers().getLayers();var g=this.overlay_;s.forEach(function(e){if(g===e){s.remove(e);return}});this.target_.getGeometry().setRadius(l.getGeometry().getRadius());o.addOverlay(this.target_);e(this.target_)};goog.provide("ol.interaction.DragFeature");goog.require("ol.interaction.Pointer");ol.interaction.DragFeature=function(){ol.interaction.Pointer.call(this,{handleDownEvent:this.handleDownEvent,handleDragEvent:this.handleDragEvent,handleMoveEvent:this.handleMoveEvent,handleUpEvent:this.handleUpEvent});this.coordinate_=null;this.cursor_="pointer";this.feature_=null;this.previousCursor_=undefined};goog.inherits(ol.interaction.DragFeature,ol.interaction.Pointer);ol.interaction.DragFeature.prototype.handleDownEvent=function(e){var o=e.map;var t=o.forEachFeatureAtPixel(e.pixel,function(e){return e});if(t&&t.get("draggable")){this.coordinate_=e.coordinate;this.feature_=t;this.feature_.dispatchEvent(new Ez.MarkerDragEvent("dragstart"));return true}else{return false}};ol.interaction.DragFeature.prototype.handleDragEvent=function(e){var o=e.coordinate[0]-this.coordinate_[0];var t=e.coordinate[1]-this.coordinate_[1];var r=this.feature_.getGeometry();r.translate(o,t);this.coordinate_[0]=e.coordinate[0];this.coordinate_[1]=e.coordinate[1]};ol.interaction.DragFeature.prototype.handleMoveEvent=function(e){if(this.cursor_){var o=e.map;var t=o.forEachFeatureAtPixel(e.pixel,function(e){return e});var r=e.map.getTargetElement();if(t){if(r.style.cursor!=this.cursor_){this.previousCursor_=r.style.cursor;r.style.cursor=this.cursor_}}else if(this.previousCursor_!==undefined){r.style.cursor=this.previousCursor_;this.previousCursor_=undefined}}};ol.interaction.DragFeature.prototype.handleUpEvent=function(){this.feature_.dispatchEvent(new Ez.MarkerDragEvent("dragend"));this.coordinate_=null;this.feature_=null;return false};goog.provide("Ez.Coordinate");goog.require("goog.asserts");Ez.Coordinate=function(e,o){goog.asserts.assert(goog.isDef(e),"经度坐标不能为空");goog.asserts.assert(goog.isDef(o),"纬度坐标不能为空");this.coordinate_=[parseFloat(e),parseFloat(o)]};Ez.Coordinate.prototype.getCoordinate=function(){return this.coordinate_};Ez.Coordinate.prototype.toStringXY=function(){var e=this.coordinate_;return e[0]+","+e[1]};Ez.Coordinate.prototype.distanceTo=function(e){var o=this.getCoordinate();var t=e.getCoordinate();var r=ol.sphere.WGS84.haversineDistance(o,t);return r};goog.exportSymbol("EzCoord",Ez.Coordinate);goog.provide("Ez.Event");Ez.Event={MAP_CLICK:"click",MAP_DBLCLICK:"dblclick",MAP_MOUSEDOWN:"pointerdown",MAP_MOUSEMOVE:"pointermove",MAP_MOUSEUP:"pointerup",MAP_MOUSEOVER:"pointerover",MAP_MOUSEOUT:"pointerout",MAP_PANEND:"moveend",MAP_PAN:"pointerdrag",MAP_ZOOMCHANGE:"change:resolution",POPUP_OPEN:"popup:open",POPUP_CLOSE:"popup:close"};goog.provide("Ez.Overlay");goog.require("ol.Feature");Ez.Overlay=function(e){goog.base(this,e);this.layer_=null;this.set("isAddToMap",false)};goog.inherits(Ez.Overlay,ol.Feature);Ez.Overlay.prototype.onAdd=function(e){this.map_=e;var o=e.getVectorLayers();var t=this;o.getLayers().forEach(function(e,o,r){if(e.get("name")==="vector_default"){var i=e;i.getSource().addFeature(t);t.layer_=i}});this.set("isAddToMap",true)};Ez.Overlay.prototype.onRemove=function(e){if(!this.get("isAddToMap"))return;if(this.popup_){this.map_.removeOverlay(this.popup_);this.popup_=null}this.map_=null;var o=e.getVectorLayers();var t=this;o.getLayers().forEach(function(e,o,r){if(e.get("name")==="vector_default"){var i=e;i.getSource().removeFeature(t)}});this.set("isAddToMap",false)};Ez.Overlay.prototype.getMBR=function(){var e=this.getGeometry().getExtent();return new Ez.MBR(e[0],e[1],e[2],e[3])};Ez.Overlay.readGeoJSON=function(e){var o=new ol.format.GeoJSON;var t=o.readFeature(e);return t};Ez.Overlay.prototype.toGeoJSON=function(){var e=new ol.format.GeoJSON;return JSON.parse(e.writeFeature(this))};Ez.Overlay.prototype.getFillStyle_=function(){return this.getStyle().getFill()};Ez.Overlay.prototype.getStrokeStyle_=function(){return this.getStyle().getStroke()};Ez.Overlay.prototype.getFillColor=function(){var e=this.getFillStyle_();var o=ol.color.asArray(e.getColor());return ol.color.asString(o)};Ez.Overlay.prototype.getFillOpacity=function(){var e=this.getFillStyle_();var o=ol.color.asArray(e.getColor());return parseFloat(o[3])};Ez.Overlay.prototype.setFillColor=function(e){var o=this.getStyle();var t=this.getFillStyle_();var r=ol.color.asArray(t.getColor())[3];var i=ol.color.asArray(e);i[3]=r;t.setColor(i);this.setStyle(o)};Ez.Overlay.prototype.setFillOpacity=function(e){goog.asserts.assert(e>=0&&e<=1,"设置的透明度必须在[0,1]范围内");var o=this.getStyle();var t=this.getFillStyle_();var r=ol.color.asArray(t.getColor());r[3]=e;t.setColor(r);this.setStyle(o)};Ez.Overlay.prototype.getStrokeColor=function(){var e=this.getStrokeStyle_();var o=ol.color.asArray(e.getColor());return ol.color.asString(o)};Ez.Overlay.prototype.getStrokeWidth=function(){var e=this.getStrokeStyle_();return e.getWidth()};Ez.Overlay.prototype.getStrokeOpacity=function(){var e=this.getStrokeStyle_();var o=ol.color.asArray(e.getColor());return parseFloat(o[3])};Ez.Overlay.prototype.setStrokeColor=function(e){var o=this.getStyle();var t=this.getStrokeStyle_();var r=ol.color.asArray(t.getColor())[3];var i=ol.color.asArray(e);i[3]=r;t.setColor(i);this.setStyle(o)};Ez.Overlay.prototype.setStrokeWidth=function(e){var o=this.getStyle();var t=this.getStrokeStyle_();t.setWidth(e);this.setStyle(o)};Ez.Overlay.prototype.setStrokeOpacity=function(e){goog.asserts.assert(e>=0&&e<=1,"设置的透明度必须在[0,1]范围内");var o=this.getStyle();var t=this.getStrokeStyle_();var r=ol.color.asArray(t.getColor());r[3]=e;t.setColor(r);this.setStyle(o)};Ez.Overlay.prototype.show=function(){if(this.get("isAddToMap"))return;var e=this.map_.getVectorLayers();var o=this;e.getLayers().forEach(function(e,t,r){if(e.get("name")==="vector_default"){var i=e;i.getSource().addFeature(o)}});this.set("isAddToMap",true)};Ez.Overlay.prototype.hide=function(){if(!this.get("isAddToMap"))return;var e=this.map_.getVectorLayers();var o=this;e.getLayers().forEach(function(e,t,r){if(e.get("name")==="vector_default"){var i=e;i.getSource().removeFeature(o)}});this.set("isAddToMap",false)};Ez.Overlay.prototype.addTitle=function(e){if(!e){goog.assert(false,"EzTitle对象不能为空")}this.title_=e;this.isTitleOnMap=false;this.isTitleInited=false};Ez.Overlay.prototype.showTitle=function(){if(!this.map_||!this.title_){return}var e=this.map_;if(!this.isTitleInited){this.handleTitleInit_()}this.title_.show();this.isTitleOnMap=true};Ez.Overlay.prototype.handleTitleInit_=function(){var e=this.getGeometry().getType();var o;if(e===ol.geom.GeometryType.CIRCLE){o=this.getCenter()}else if(e===ol.geom.GeometryType.POINT){o=this.getCenter()}else if(e===ol.geom.GeometryType.LINE_STRING){o=this.getCenter()}else if(e===ol.geom.GeometryType.POLYGON){o=this.getCenter()}else{o=this.getPoint()}this.title_.setPosition(o);this.map_.addOverlay(this.title_);this.isTitleInited=true};Ez.Overlay.prototype.hideTitle=function(){this.title_.hide();this.isTitleOnMap=false;this.isTitleInited=false;this.map_.removeOverlay(this.title_)};Ez.Overlay.prototype.openInfoWindow=function(e,o,t){var r;if(o instanceof Ez.Coordinate){r=o.getCoordinate()}else if(goog.isArray(o)){r=o}else{goog.asserts.assert(false,"请传入坐标数组或者EzCoord对象")}if(this.popup_){this.map_.removeOverlay(this.popup_);this.popup_=null}this.popup_=new Ez.Popup(t);this.map_.addOverlay(this.popup_);this.popup_.show(e,r)};Ez.Overlay.prototype.closeInfoWindow=function(){if(!this.popup_){return}this.map_.removeOverlay(this.popup_);this.popup_=null};Ez.Overlay.prototype.getBounds=function(){var e=this.getGeometry().getExtent();return new Ez.MBR(e[0],e[1],e[2],e[3])};Ez.Overlay.prototype.flash=function(e){var o=e?e:{};var t=o["duration"]?o["duration"]:3e3;var r=o["times"]?o["times"]:3;this.hide();var i=this.getFillOpacity();var n=this.getStrokeOpacity();if(!this.map_)return;var a=(new Date).getTime();var l=new Date(a);var s;var g=this;function p(e){var o=e.vectorContext;var i=e.frameState;var n=i.time-a;var p=n/(t/r*1.25);var u=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(76,140,88,"+p+")"})});o.drawFeature(g.clone(),u);if(p>=.8){a=i.time;p=0}if(i.time-l>t){ol.Observable.unByKey(s);map.render();g.show();return}map.render()}s=map.on("postcompose",p);map.render()};Ez.Overlay.prototype.hexToRgb_=function(e){var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return o?[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]:null};goog.exportSymbol("EzOverlay",Ez.Overlay);goog.provide("Ez.Icon");goog.provide("Ez.style.IconAnchorUnits");goog.require("ol.style.Icon");Ez.style.IconAnchorUnits={FRACTION:"fraction",PIXELS:"pixels"};Ez.Icon=function(e){var o=e?e:{};goog.base(this,o);this.iconOpts=o};goog.inherits(Ez.Icon,ol.style.Icon);Ez.Icon.prototype.getOptions=function(){return this.iconOpts};goog.exportSymbol("EzIcon",Ez.Icon);goog.provide("Ez.Marker");goog.provide("Ez.MarkerDragEvent");goog.require("Ez.Coordinate");goog.require("Ez.Event");goog.require("Ez.Overlay");goog.require("ol.geom.Point");goog.require("ol.style.Style");goog.require("ol.style.Icon");goog.require("ol.style.Text");Ez.MarkerDragEvent=function(e){goog.base(this,e)};goog.inherits(Ez.MarkerDragEvent,ol.events.Event);Ez.Marker=function(e,o,t,r){var i;if(goog.isDef(o)){i=new ol.style.Style({image:o})}else{i=new ol.style.Style({image:new ol.style.Icon({
src:"../images/marker-icon.png",anchor:[.5,1],anchorXUnits:ol.style.IconAnchorUnits.FRACTION,anchorYUnits:ol.style.IconAnchorUnits.FRACTION,size:[25,41],opacity:1})})}this.coordinatesOfEz_=e;this.coordinatesOfOl_=e.getCoordinate();this.map_=null;var n={geometry:new ol.geom.Point(this.coordinatesOfOl_)};goog.base(this,n);this.title_=goog.isDef(t)?t:null;this.isTitleOnMap=false;this.isTitleInited=false;this.anchorImg_=this.set("coordinate",this.coordinatesOfOl_);this.set("markerStyle",i);this.setStyle(i);this.markerFlag=true;var a=r||{};if(a.draggable){this.set("draggable",a.draggable)}};goog.inherits(Ez.Marker,Ez.Overlay);Ez.Marker.prototype.onAdd=function(e){this.map_=e;var o=e.getMarkerLayers();var t=this;o.getLayers().forEach(function(e,o,r){if(e.get("name")==="marker_default"){var i=e;i.getSource().addFeature(t)}});this.set("isAddToMap",true)};Ez.Marker.prototype.onRemove=function(e){if(!this.get("isAddToMap"))return;if(this.title_&&this.isTitleOnMap){this.hideTitle()}this.map_=null;var o=e.getMarkerLayers();var t=this;o.getLayers().forEach(function(e,o,r){if(e.get("name")==="marker_default"){var i=e;i.getSource().removeFeature(t)}});this.set("isAddToMap",false)};Ez.Marker.prototype.show=function(){this.setOpacity(this.opac_?this.opac_:this.getOpacity());delete this.opac_;if(this.isTitleOnMap){if(!this.title_.isShow){this.title_.show()}}};Ez.Marker.prototype.hide=function(){this.opac_=this.getOpacity();this.setOpacity(0);if(this.isTitleOnMap){this.title_.hide()}};Ez.Marker.prototype.getPoint=function(){var e=this.getGeometry().getCoordinates();return new Ez.Coordinate(e[0],e[1])};Ez.Marker.prototype.setPoint=function(e){this.coordinatesOfEz_=e;var o=e.getCoordinate();this.coordinatesOfOl_=o;this.getGeometry().setCoordinates(o);this.set("coordinate",o);return this};Ez.Marker.prototype.setOpacity=function(e){var o=this.getStyle();o.getImage().setOpacity(e);this.setStyle(o)};Ez.Marker.prototype.getOpacity=function(){return this.getStyle().getImage().getOpacity()};Ez.Marker.prototype.getRotate=function(){return this.getStyle().getImage().getRotation()};Ez.Marker.prototype.openInfoWindow=function(e,o){var t=this.getGeometry().getCoordinates();var r=o?o:{};var i={};for(var n in r){i[n]=r[n]}var a=this.getStyle().getImage().getSize();a=a?a:[25,41];var l=this.getStyle().getImage().getScale();l=l?l:1;i["offsetX"]=0;i["offsetY"]=-(a[1]*l+5);if(this.popup_){this.map_.removeOverlay(this.popup_);this.popup_=null}this.popup_=new Ez.Popup(i);this.map_.addOverlay(this.popup_);this.popup_.show(e,t)};Ez.Marker.prototype.closeInfoWindow=function(){if(!this.popup_){return}this.map_.removeoverlay(this.popup_);this.popup_=null};Ez.Marker.prototype.handleChange_=function(){var e=this.getGeometry().getCoordinates();this.title_.setPosition(e)};Ez.Marker.prototype.handleOnLoad_=function(){this.handleChange_();this.map_.addOverlay(this.title_)};Ez.Marker.prototype.handleTitleInit_=function(){var e=this.getPoint();this.title_.setPosition(e);this.map_.addOverlay(this.title_);this.isTitleInited=true};Ez.Marker.prototype.getImage=function(){var e=this.getStyle();return e.getImage().getImage()};Ez.Marker.prototype.getIcon=function(){return this.getStyle().getImage()};Ez.Marker.prototype.setIcon=function(e){var o=this.getStyle();var t=new ol.style.Style({image:e});this.setStyle(t);this.changed()};Ez.Marker.prototype.setPositionSmooth=function(e,o,t){var r=this.getIcon();var i=this;var n;var a=this.map_;var l=this.linearInterpolation_(this.getPoint(),e,o,t);function s(e){var o=e.vectorContext;var r=e.frameState;var s=r.time-n;var p=Math.round(s/(1e3/t));if(p>=1){if(p>=l.length){g();return}i.getGeometry().setCoordinates(l[p]);a.render()}}function g(){a.un("postcompose",s)}function p(){n=(new Date).getTime();a.on("postcompose",s);a.render()}p()};Ez.Marker.prototype.linearInterpolation_=function(e,o,t,r){var i=t/(1e3/r);var n=e.getCoordinate();var a=o.getCoordinate();var l=(n[1]-a[1])/(n[0]-a[0]);var s=(n[0]*a[1]-a[0]*n[1])/(n[0]-a[0]);var g=Math.abs(a[0]-n[0])/(i>0?i:0);var p=[];p.push(n);for(var u=1;u<i+1;u++){var c=n[0]+g*u;var d=l*c+s;p.push([c,d])}p.push(a);return p};Ez.Marker.prototype.flash=function(e){var o=e?e:{};var t=o["duration"]?o["duration"]:3e3;var r=o["times"]?o["times"]:3;this.hide();var i=this.getIcon();if(!this.map_)return;var n=(new Date).getTime();var a=new Date(n);var l;var s=this;function g(e){var o=e.vectorContext;var a=e.frameState;var g=a.time-n;var p=g/parseFloat(t/r);var u=new ol.style.Style({image:i});var c=p%1;if(c<.3||c>.6){i.setOpacity(1)}else{i.setOpacity(0)}o.drawFeature(s.clone(),u);if(p>r){ol.Observable.unByKey(l);map.render();s.show();return}map.render()}l=map.on("postcompose",g);map.render()};goog.exportSymbol("EzMarker",Ez.Marker);goog.provide("Ez.Layer.Group");goog.require("ol.layer.Group");Ez.Layer.Group=function(e){goog.base(this,e);this.set("isAddToMap",false)};goog.inherits(Ez.Layer.Group,ol.layer.Group);Ez.Layer.Group.prototype.onAdd=function(e){this.map_=e;var o=e.getTileLayers().getLayers();o.push(this);this.set("isAddToMap",true)};Ez.Layer.Group.prototype.onRemove=function(e){if(!this.get("isAddToMap"))return;this.map_=null;var o=e.getTileLayers().getLayers();o.remove(this);this.set("isAddToMap",false)};Ez.Layer.Group.prototype.push=function(e){var o=this.getLayers();o.push(e)};Ez.Layer.Group.prototype.remove=function(e){var o=this.getLayers();o.remove(e)};Ez.Layer.Group.prototype.clear=function(){var e=this.getLayers();e.clear()};Ez.Layer.Group.prototype.show=function(){this.setVisible(true)};Ez.Layer.Group.prototype.hide=function(){this.setVisible(false)};goog.exportSymbol("EzLayerGroup",Ez.Layer.Group);goog.provide("Ez.Layer.HeatMap");goog.require("ol.layer.Heatmap");goog.require("ol.source.Vector");goog.require("goog.asserts");Ez.Layer.HeatMap=function(e){goog.asserts.assert(goog.isDef(e),"config参数不能为空");this.radius_=e.radius||8;this.blur_=e.blur||15;this.shadow_=e.shadow||250;this.weight_=e.weight;this.opacity_=e.opacity||1;this.extent_=e.extent||undefined;this.xField_=e.xField||null;this.yField_=e.yField||null;this.valueField_=e.valueField||null;this.gradient_=e.gradient||undefined;this.isProj_=e.isProj_||false;this.source_=new ol.source.Vector;this.map_=null;goog.base(this,{source:this.source_,radius:this.radius_,blur:this.blur_,projection:this.isProj_?"EPSG:3857":"EPSG:4326",weight:this.weight_,shadow:this.shadow_,opacity:this.opacity_,extent:this.extent_,gradient:this.gradient_});this.set("name","heatmap");this.set("isAddToMap",false)};goog.inherits(Ez.Layer.HeatMap,ol.layer.Heatmap);Ez.Layer.HeatMap.prototype.onAdd=function(e){this.map_=e;var o=e.getVectorLayers();var t=o.getLayers();t.push(this);this.set("isAddToMap",true)};Ez.Layer.HeatMap.prototype.onRemove=function(e){if(!this.get("isAddToMap"))return;this.map_=null;var o=e.getVectorLayers();var t=o.getLayers();var r=this;t.forEach(function(e){if(r===e){t.remove(e)}});this.set("isAddToMap",false)};Ez.Layer.HeatMap.prototype.show=function(){this.setVisible(true)};Ez.Layer.HeatMap.prototype.hide=function(){this.setVisible(false)};Ez.Layer.HeatMap.prototype.addData=function(e){var o=this.xField_;var t=this.yField_;var r=this.valueField_;goog.asserts.assert(!goog.isNull(o),"xField值必须指定");goog.asserts.assert(!goog.isNull(t),"yField值必须指定");goog.asserts.assert(!goog.isNull(r),"valueField值必须指定");for(var i in e){var n=e[i];var a=new ol.geom.Point([n[o],n[t]]);var l=new ol.Feature({geometry:a});l.set("weight",n[r]);this.source_.addFeature(l)}};goog.exportSymbol("EzLayerHeatMap",Ez.Layer.HeatMap);goog.provide("Ez.Layer.ImageWMS");goog.require("ol.layer.Image");goog.require("ol.source.ImageWMS");Ez.Layer.ImageWMS=function(e){var o=e?e:{};var t={url:o.url,serverType:o.serverType?o.serverType:"mapserver",params:o.params?o.params:undefined,imageLoadFunction:o.imageLoadFunction?o.imageLoadFunction:undefined,ratio:o.ratio?o.ratio:undefined,projection:o.projection?o.projection:"EPSG:4326"};var r={source:new ol.source.ImageWMS(t),extent:o.mbr?o.mbr:undefined,opacity:o.opacity?o.opacity:1};goog.base(this,r)};goog.inherits(Ez.Layer.ImageWMS,ol.layer.Image);Ez.Layer.ImageWMS.prototype.onAdd=function(e){this.map_=e;e.getTileLayerOverlayLayers().getLayers().push(this)};Ez.Layer.ImageWMS.prototype.onRemove=function(e){this.map_=null;e.getTileLayerOverlayLayers().getLayers().remove(this)};goog.provide("Ez.Layer.Cluster");Ez.Layer.Cluster=function(e){var o=e?e:{};var t=o.projection?o.projection:"EPSG:4326";var r=o.opacity?o.opacity:1;var i=Ez.Layer.Cluster.getResolution(o.maxZoom?o.maxZoom:18);var n=Ez.Layer.Cluster.getResolution(o.minZoom?o.minZoom:0);var a=o.type?o.type:"default";var l={default:Ez.Layer.Cluster.styleFunctionDefault.bind(this),scale:Ez.Layer.Cluster.styleFunctionScale.bind(this),nomarker:Ez.Layer.Cluster.styleFunctionNoMarker.bind(this)};var s=o.styleFunction?o.styleFunction:l[a];var g=o.cluster?o.cluster:{};var p=new ol.source.Vector;var u=new ol.source.Cluster2({geometryFunction:g.geometryFunction,distance:g.distance?g.distance:40,source:p});goog.base(this,{projection:t,opacity:r,minResolution:i,maxResolution:n,source:u,style:s});this.styleCache={};this.currentResolution_;this.maxFeatureCount_};goog.inherits(Ez.Layer.Cluster,ol.layer.Vector);Ez.Layer.Cluster.styleFunctionDefault=function(e){var o=e.get("features").length;var t=this.styleCache[o];if(!t){t=new ol.style.Style({image:new ol.style.Circle({radius:15,stroke:new ol.style.Stroke({color:"#fff"}),fill:new ol.style.Fill({color:"#3399CC"})}),text:new ol.style.Text({text:o.toString(),fill:new ol.style.Fill({color:"#fff"})})});this.styleCache[o]=t}if(o>1){return t}else{var r=e.get("features")[0].getStyle();return r}};Ez.Layer.Cluster.styleFunctionNoMarker=function(e){var o=e.get("features").length;var t=this.styleCache[o];if(!t){t=new ol.style.Style({image:new ol.style.Circle({radius:15,stroke:new ol.style.Stroke({color:"#fff"}),fill:new ol.style.Fill({color:"#F15D2D"})}),text:new ol.style.Text({text:o.toString(),fill:new ol.style.Fill({color:"#fff"})})});this.styleCache[o]=t}return t};Ez.Layer.Cluster.styleFunctionScale=function(e,o){var t=new ol.style.Fill({color:"#fff"});var r=new ol.style.Stroke({color:"rgba(0, 0, 0, 0.6)",width:3});if(o!=this.currentResolution_){this.calculateClusterInfo_(o);this.currentResolution_=o}var i;var n=e.get("features").length;if(n>1){i=new ol.style.Style({image:new ol.style.Circle({radius:e.get("radius"),fill:new ol.style.Fill({color:[255,153,0,Math.min(.8,.4+n/this.maxFeatureCount_)]})}),text:new ol.style.Text({text:n.toString(),fill:t,stroke:r})})}else{i=e.get("features")[0].getStyle()}return i};Ez.Layer.Cluster.prototype.calculateClusterInfo_=function(e){this.maxFeatureCount_=0;var o=this.getSource().getFeatures();var t,r;for(var i=o.length-1;i>=0;--i){t=o[i];var n=t.get("features");var a=ol.extent.createEmpty();var l,s;for(l=0,s=n.length;l<s;++l){ol.extent.extend(a,n[l].getGeometry().getExtent())}this.maxFeatureCount_=Math.max(this.maxFeatureCount_,s);r=.25*(ol.extent.getWidth(a)+ol.extent.getHeight(a))/e;t.set("radius",r)}};Ez.Layer.Cluster.getResolution=function(e){var o=ol.tilegrid.createXYZ({extent:ol.tilegrid.extentFromProjection("EPSG:4326"),tileSize:256});return o.getResolution(e)};Ez.Layer.Cluster.prototype.onAdd=function(e){this.map_=e;e.getTileLayerOverlayLayers().getLayers().push(this)};Ez.Layer.Cluster.prototype.onRemove=function(e){this.map_=null;e.getTileLayerOverlayLayers().getLayers().remove(this)};Ez.Layer.Cluster.prototype.addData=function(e){this.getSource().getSource().addFeatures(e)};goog.exportSymbol("EzLayerCluster",Ez.Layer.Cluster);goog.provide("Ez.TileLayer.Base");goog.require("ol.layer.Tile");Ez.TileLayer.Base=function(e,o){var t=o?o:{};var r={};var i=t.customOpts?t.customOpts:null;for(var n in t){if(t[n]!=="customOpts"){r[n]=t[n]}}goog.base(this,r);this.key_=t.key;this.set("ezname",e);this.set("isAddToMap",false);if(i){this.set("customOpts",i)}};goog.inherits(Ez.TileLayer.Base,ol.layer.Tile);Ez.TileLayer.Base.prototype.onAdd=function(e){this.map_=e;e.getTileLayers().getLayers().push(this);this.set("isAddToMap",true)};Ez.TileLayer.Base.prototype.onRemove=function(e){if(!this.get("isAddToMap"))return;this.map_=null;e.getTileLayers().getLayers().remove(this);this.set("isAddToMap",false)};Ez.TileLayer.Base.prototype.getResolutions=function(){return this.getSource().getTileGrid().getResolutions()};goog.exportSymbol("EzTileLayerBase",Ez.TileLayer.Base);goog.provide("Ez.TileLayer.TDT");goog.require("Ez.TileLayer.Base");Ez.TileLayer.TDT=function(e,o,t){var r=t?t:{};this.url_=o;var i=o+"/EzMap?Service=getImage&Type=RGB&ZoomOffset=0&Col={x}&Row={y}&Zoom={z}&V=0.3&key="+r.key;var n=new ol.source.XYZ({url:i,crossOrigin:r.crossOrigin,wrapX:goog.isDef(r.wrapX)?r.wrapX:true,cacheSize:r.cacheSize?r.cacheSize:2048,tileLoadFunction:r.tileLoadFunction?r.tileLoadFunction:undefined,projection:"EPSG:4326"});var a=Object.assign({},r,{source:n});goog.base(this,e,a)};goog.inherits(Ez.TileLayer.TDT,Ez.TileLayer.Base);Ez.TileLayer.TDT.prototype.getUrl=function(){return this.url_};goog.exportSymbol("EzTileLayerTDT",Ez.TileLayer.TDT);goog.provide("Ez.TileLayer.WMTS");goog.require("Ez.TileLayer.Base");Ez.TileLayer.WMTS=function(e,o,t){var r=t?t:{};this.url_=o;var i=new Array(30);var n=new Array(30);for(var a=0;a<30;++a){i[a]=360/(256*Math.pow(2,a));n[a]=a}var l=new ol.tilegrid.WMTS({origin:[-180,90],resolutions:i,matrixIds:n});var s=new ol.source.WMTS({url:o,crossOrigin:r.crossOrigin,wrapX:goog.isDef(r.wrapX)?r.wrapX:true,projection:"EPSG:4326",layer:r.layer,requestEncoding:r.requestType?r.requestType:"KVP",tileGrid:l,matrixSet:r.matrixSet,format:r.format,style:r.style});var g=Object.assign({},r,{source:s});goog.base(this,e,g)};goog.inherits(Ez.TileLayer.WMTS,Ez.TileLayer.Base);Ez.TileLayer.WMTS.prototype.getUrl=function(){return this.url_};goog.provide("Ez.TileLayer.XYZ");goog.require("Ez.TileLayer.Base");Ez.TileLayer.XYZ=function(e,o,t){var r=t?t:{};this.url_=o;var i=new ol.source.XYZ({url:this.url_,crossOrigin:r.crossOrigin,projection:r.projection,tileGrid:r.tileGrid,maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize,wrapX:goog.isDef(r.wrapX)?r.wrapX:true,attributions:r.attributions});var n=Object.assign({},r,{source:i});goog.base(this,e,n)};goog.inherits(Ez.TileLayer.XYZ,Ez.TileLayer.Base);Ez.TileLayer.XYZ.prototype.getUrl=function(){return this.url_};goog.exportSymbol("EzTileLayerXYZ",Ez.TileLayer.XYZ);goog.provide("Ez.TileLayer.EzMap2010");goog.require("Ez.TileLayer.Base");goog.require("ol.source.EzMap2010");Ez.TileLayer.EzMap2010=function(e,o,t){var r=t?t:{};var i=new Array(30);for(var n=0;n<=30;++n){i[n]=Math.pow(2,1-n)}this.url_=o;var a=o+"/EzMap?Service=getImage&Type=RGB&ZoomOffset=0&Col={x}&Row={y}&Zoom={z}&V=0.3&key="+r.key;var l=new ol.source.EzMap2010({url:a,crossOrigin:r.crossOrigin,wrapX:goog.isDef(r.wrapX)?r.wrapX:true,cacheSize:r.cacheSize?r.cacheSize:2048,resolutions:i});var s=Object.assign({},r,{source:l});goog.base(this,e,s)};goog.inherits(Ez.TileLayer.EzMap2010,Ez.TileLayer.Base);Ez.TileLayer.EzMap2010.prototype.getUrl=function(){return this.url_};Ez.TileLayer.EzMap2010.getResolutions=function(e,o){var t=new Array(30);for(var r=0;r<=30;++r){t[r]=Math.pow(2,1-r)}return t.slice(e,o+1)};goog.exportSymbol("EzTileLayerEzMap2010",Ez.TileLayer.EzMap2010);goog.provide("Ez.TileLayer.EzMap2010Proj");goog.require("Ez.TileLayer.Base");goog.require("ol.source.EzMap2010");Ez.TileLayer.EzMap2010Proj=function(e,o,t){var r=t?t:{};var i=new Array(30);for(var n=9;n>=0;--n){i[n]=Math.pow(2,9-n)/256*114699}for(var n=10;n<=30;++n){i[n]=1/Math.pow(2,n-9)/256*114699}this.url_=o;var a=o+"/EzMap?Service=getImage&Type=RGB&ZoomOffset=0&Col={x}&Row={y}&Zoom={z}&V=0.3&key="+r.key;var l=new ol.source.EzMap2010({url:a,crossOrigin:r.crossOrigin,resolutions:i,wrapX:goog.isDef(r.wrapX)?r.wrapX:true,projection:"EPSG:3857"});var s=Object.assign({},r,{source:l});goog.base(this,e,s)};goog.inherits(Ez.TileLayer.EzMap2010Proj,Ez.TileLayer.Base);Ez.TileLayer.EzMap2010Proj.prototype.getUrl=function(){return this.url_};goog.exportSymbol("EzTileLayerEzMap2010Proj",Ez.TileLayer.EzMap2010Proj);goog.provide("Ez.TileLayer.SingleHotSpot");goog.require("Ez.Coordinate");goog.require("ol.source.SingleHotSpot");Ez.TileLayer.SingleHotSpot=function(e){var o=e||{};var t=this.singleSource=new ol.source.SingleHotSpot(o);goog.base(this,{source:t});this.set("isAddToMap",false);this.currentId=null;this.duration=e.duration?e.duration:500};goog.inherits(Ez.TileLayer.SingleHotSpot,ol.layer.Vector);Ez.TileLayer.SingleHotSpot.prototype.onAdd=function(e){this.map_=e;var o=e.getView();o.on("change:resolution",this.handleTileData_.bind(this));e.getCustomLayers().getLayers().push(this);this.set("isAddToMap",true)};Ez.TileLayer.SingleHotSpot.prototype.onRemove=function(e){if(!this.get("isAddToMap"))return;this.map_=null;var o=e.getView();o.off("change:resolution",this.handleTileData_.bind(this));var t=e.getCustomLayers().getLayers();var r=this;t.forEach(function(e){if(r===e){t.remove(e)}});this.set("isAddToMap",false)};Ez.TileLayer.SingleHotSpot.prototype.updateSopurceState=function(e,o){var t=this.getSource();t.setLoadingState(e);t.setLoadendState(o)};Ez.TileLayer.SingleHotSpot.prototype.handleTileData_=function(e){var o=this.getSource();o.clear(true);this.updateSopurceState(true,false);window.clearTimeout(this.currentId);this.currentId=window.setTimeout(function(){this.updateSopurceState(false,true);o.changed()}.bind(this),this.duration)};goog.exportSymbol("EzTileLayerSingleHotSpot",Ez.TileLayer.SingleHotSpot);goog.provide("Ez.TileLayer.MultiHotSpot");goog.require("Ez.TileLayer.SingleHotSpot");goog.require("ol.layer.Group");Ez.TileLayer.MultiHotSpot=function(e){goog.base(this,e);this.currentId=null;this.duration=e.duration?e.duration:500};goog.inherits(Ez.TileLayer.MultiHotSpot,ol.layer.Group);Ez.TileLayer.MultiHotSpot.prototype.addSingleLayer=function(e){this.getLayers().push(e)};Ez.TileLayer.MultiHotSpot.prototype.deleteSingleLayer=function(e){var o=this.getLayers();o.forEach(function(t){if(e===t){o.remove(t);return}})};Ez.TileLayer.MultiHotSpot.prototype.handleTileData_=function(){var e=this.getLayers();e.forEach(function(e){e.getSource().clear();e.updateSopurceState(true,false)});window.clearTimeout(this.currentId);this.currentId=window.setTimeout(function(){e.forEach(function(e){e.updateSopurceState(false,true);e.getSource().changed()})}.bind(this),this.duration)};Ez.TileLayer.MultiHotSpot.prototype.onAdd=function(e){this.map_=e;var o=e.getView();o.on("change:resolution",this.handleTileData_.bind(this));e.getCustomLayers().getLayers().push(this);this.set("isAddToMap",true)};Ez.TileLayer.MultiHotSpot.prototype.onRemove=function(e){if(!this.get("isAddToMap"))return;this.map_=null;var o=e.getView();o.off("change:resolution",this.handleTileData_.bind(this));var t=e.getCustomLayers().getLayers();var r=this;t.forEach(function(e){if(r===e){t.remove(e)}});this.set("isAddToMap",false)};goog.exportSymbol("EzTileLayerMultiHotSpot",Ez.TileLayer.MultiHotSpot);goog.provide("Ez.MBR");goog.require("ol.extent");Ez.MBR=function(e,o,t,r){this.minX=e;this.minY=o;this.maxX=t;this.maxY=r;this.value_=[e,o,t,r]};Ez.MBR.prototype.centerPoint=function(e){var o=ol.extent.getCenter(this.value_);if(e){return new Ez.Coordinate(o[0],o[1])}else{return o}};Ez.MBR.prototype.containsBounds=function(e){return ol.extent.containsExtent(this.value_,e.value_)};Ez.MBR.prototype.containsPoint=function(e){var o;if(e instanceof Ez.Coordinate){o=e.getCoordinate()}else{o=e}return ol.extent.containsCoordinate(this.value_,o)};Ez.MBR.prototype.getExtent=function(){return this.value_};Ez.MBR.prototype.toBBoxString=function(){return this.minX+","+this.minY+","+this.maxX+","+this.maxY};goog.exportSymbol("EzMBR",Ez.MBR);goog.provide("Ez.g.Point");goog.require("ol.geom.Point");goog.require("Ez.Overlay");goog.require("Ez.Coordinate");goog.require("ol.style.Style");goog.require("ol.style.Fill");goog.require("ol.style.Image");Ez.g.Point=function(e,o){var t;var r;var i="";if(goog.isString(e)){r=e.split(",");i=e}else if(e instanceof Ez.Coordinate){r=e.getCoordinate();i=e.toStringXY()}else{goog.asserts.assert(false,"坐标点必须是EzCoord对象")}if(goog.isDef(o)){var n=goog.isDef(o.fillColor)?o.fillColor:"#FFFFFF";var a=this.hexToRgb_(n);a[3]=goog.isDef(o.fillOpacity)?o.fillOpacity:1;var l=ol.color.asArray(goog.isDef(o.strokeColor)?o.strokeColor:"#FFCC33");l[3]=goog.isDef(o.strokeOpacity)?o.strokeOpacity:1;t=new ol.style.Style({image:new ol.style.Circle({radius:goog.isDef(o.radius)?o.radius:7,fill:new ol.style.Fill({color:a}),stroke:new ol.style.Stroke({color:l,width:goog.isDef(o.strokeWidth)?parseInt(o.strokeWidth):2})})})}else{t=new ol.style.Style({image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:[255,255,255,1]}),stroke:new ol.style.Stroke({color:[255,204,51,1],width:2})})})}var s={geometry:new ol.geom.Point(r)};goog.base(this,s);this.coordString=i;this.setStyle(t)};goog.inherits(Ez.g.Point,Ez.Overlay);Ez.g.Point.prototype.getCenter=function(){var e=this.getGeometry().getCoordinates();return new Ez.Coordinate(e[0],e[1])};Ez.g.Point.prototype.getFillColor=function(){var e=this.getStyle();var o=e.getImage().getFill();var t=ol.color.asArray(o.getColor());return ol.color.asString(t)};Ez.g.Point.prototype.getFillOpacity=function(){var e=this.getStyle();var o=e.getImage().getFill();var t=ol.color.asArray(o.getColor());return parseFloat(t[3])};Ez.g.Point.prototype.getRadius=function(){var e=this.getStyle();var o=e.getImage();return o.getRadius()};Ez.g.Point.prototype.setFillColor=function(e){var o=this.getStyle();var t=o.getImage().getFill();var r=ol.color.asArray(t.getColor())[3];var i=ol.color.asArray(e);i[3]=r;t.setColor(i);this.setStyle(o)};Ez.g.Point.prototype.setFillOpacity=function(e){goog.asserts.assert(e>=0&&e<=1,"设置的透明度必须在[0,1]范围内");var o=this.getStyle();var t=o.getImage().getFill();var r=ol.color.asArray(t.getColor());r[3]=e;t.setColor(r);this.setStyle(o)};Ez.g.Point.prototype.getStrokeColor=function(){var e=this.getStyle();var o=e.getImage().getStroke();var t=ol.color.asArray(o.getColor());return ol.color.asString(t)};Ez.g.Point.prototype.getStrokeWidth=function(){var e=this.getStyle();var o=e.getImage().getStroke();return o.getWidth()};Ez.g.Point.prototype.getStrokeOpacity=function(){var e=this.getStyle();var o=e.getImage().getStroke();var t=ol.color.asArray(o.getColor());return parseFloat(t[3])};Ez.g.Point.prototype.setStrokeColor=function(e){var o=this.getStyle();var t=o.getImage().getStroke();var r=ol.color.asArray(t.getColor())[3];var i=ol.color.asArray(e);i[3]=r;t.setColor(i);this.setStyle(o)};Ez.g.Point.prototype.setStrokeWidth=function(e){var o=this.getStyle();var t=o.getImage().getStroke();t.setWidth(e);this.setStyle(o)};Ez.g.Point.prototype.setStrokeOpacity=function(e){goog.asserts.assert(e>=0&&e<=1,"设置的透明度必须在[0,1]范围内");var o=this.getStyle();var t=o.getImage().getStroke();var r=ol.color.asArray(t.getColor());r[3]=e;t.setColor(r);this.setStyle(o)};goog.exportSymbol("Point",Ez.g.Point);goog.provide("Ez.g.Polyline");goog.require("ol.geom.LineString");goog.require("Ez.Overlay");goog.require("Ez.Coordinate");goog.require("ol.style.Style");goog.require("ol.style.Fill");goog.require("ol.style.Stroke");Ez.g.Polyline=function(e,o){var t;var r="";var i;if(goog.isString(e)){var n=e.split(",");t=[];for(var a=0;a<n.length-1;a++){t.push([parseFloat(n[a]),parseFloat(n[a+1])]);a++}r=e}else if(goog.isArray(e)){t=[];for(var l=0;l<e.length;l++){if(e[l]instanceof Ez.Coordinate){r+=e[l].toStringXY();t.push(e[l].getCoordinate())}else{r+=e[l][0]+","+e[l][1];t.push(e[l])}if(l!==e.length-1){r+=","}}}else{goog.asserts.assert(false,"坐标格式不对")}var s=o?o:{};if(goog.isDef(o)){var g=goog.isDef(s.strokeColor)?s.strokeColor:"#FFCC33";var p=this.hexToRgb_(g);p[3]=goog.isDef(s.strokeOpacity)?s.strokeOpacity:1;var u=goog.isDef(s.strokeLineDash)?s.strokeLineDash:undefined;i=new ol.style.Style({stroke:new ol.style.Stroke({color:p,width:goog.isDef(s.strokeWidth)?parseInt(s.strokeWidth):2,lineDash:u})})}else{i=new ol.style.Style({stroke:new ol.style.Stroke({color:[255,204,51,1],width:2})})}var c={geometry:new ol.geom.LineString(t)};goog.base(this,c);this.coordString=r;this.polylineFlag=true;this.setStyle(i)};goog.inherits(Ez.g.Polyline,Ez.Overlay);Ez.g.Polyline.prototype.onRemove=function(e){this.map_=null;var o=e.getVectorLayers();var t=this;o.getLayers().forEach(function(e,o,r){if(e.get("name")==="vector_default"){var i=e;if(t.pointFeature_){i.getSource().removeFeature(t.pointFeature_);delete t.pointFeature_}i.getSource().removeFeature(t)}})};Ez.g.Polyline.prototype.getFirstPoint=function(){var e=this.getPoints();return new Ez.Coordinate(e[0][0],e[0][1])};Ez.g.Polyline.prototype.getCenter=function(){var e=this.getGeometry().getCoordinates();var o=e.length;var t=o%2;if(t===1){var r=e[Math.floor(o/2)];return new Ez.Coordinate(r[0],r[1])}else if(t===0){var i=e[o/2-1];var n=e[o/2];var r=[(i[0]+n[0])/2,(i[1]+n[1])/2];return new Ez.Coordinate(r[0],r[1])}else{goog.assert(false,"线段的长度存在异常值")}};Ez.g.Polyline.prototype.getFillColor=function(){};Ez.g.Polyline.prototype.getFillOpacity=function(){};Ez.g.Polyline.prototype.setFillColor=function(e){};Ez.g.Polyline.prototype.setFillOpacity=function(e){};Ez.g.Polyline.prototype.getPoints=function(){var e=this.getGeometry();return e.getCoordinates()};Ez.g.Polyline.prototype.addArrowHead=function(e){var o=e||{};var t=this.getGeometry();var r=t.getCoordinates();var i=this.map_;var n=r.length;var a=r[n-2];var l=r[n-1];var s=l[0]-a[0];var g=l[1]-a[1];var p=Math.atan2(g,s);if(p>0){var u=360-180*parseFloat(p)/Math.PI;p=u*Math.PI/180}else{p=Math.abs(Number(p))}var c=new ol.style.Fill({color:o.fill||"#2ABC8B"});var d=new ol.style.Stroke({color:o.stroke||"#2ABC8B",width:1});var y=new ol.style.Style({image:new ol.style.RegularShape({fill:c,stroke:d,points:3,radius:o.radius||10,rotation:p,angle:Math.PI/2})});var h=new ol.geom.Point(l);var m=new ol.Feature({geometry:h});m.setStyle(y);var f=i.getVectorLayers();f.getLayers().forEach(function(e,o,t){if(e.get("name")==="vector_default"){var r=e;r.getSource().addFeature(m)}});this.pointFeature_=m};goog.exportSymbol("Polyline",Ez.g.Polyline);goog.provide("Ez.g.Polygon");goog.require("ol.geom.Polygon");goog.require("Ez.Overlay");goog.require("Ez.Coordinate");goog.require("ol.style.Style");goog.require("ol.style.Fill");goog.require("ol.style.Stroke");Ez.g.Polygon=function(e,o){var t="";var r;var i;var n;if(goog.isString(e)){var a=e.split(";");n=[];for(var l=0;l<a.length;l++){var s=a[l].split(",");var r=[];for(var g=0;g<s.length-1;g++){r.push([parseFloat(s[g]),parseFloat(s[g+1])]);g++}n.push(r)}t=e}else if(goog.isArray(e)){n=[];for(var l=0;l<e.length;l++){var r=[];for(var g=0;g<e[l].length;g++){if(e[l][g]instanceof Ez.Coordinate){t+=e[l][g].toStringXY();r.push(e[l][g].getCoordinate())}else{t+=e[l][g][0]+","+e[l][g][1];r.push(e[l][g])}if(g!==e[l].length-1){t+=","}}n.push(r);if(l!==e.length-1){t+=";"}}}else{goog.asserts.assert(false,"坐标格式不对")}var p=o?o:{};if(goog.isDef(o)){var u=goog.isDef(p.fillColor)?p.fillColor:"#FFFFFF";var c=this.hexToRgb_(u);c[3]=goog.isDef(p.fillOpacity)?p.fillOpacity:.5;var d=ol.color.asArray(goog.isDef(p.strokeColor)?p.strokeColor:"#FFCC33");d[3]=goog.isDef(p.strokeOpacity)?p.strokeOpacity:1;var y=goog.isDef(p.strokeLineDash)?p.strokeLineDash:undefined;i=new ol.style.Style({fill:new ol.style.Fill({color:c}),stroke:new ol.style.Stroke({color:d,width:goog.isDef(p.strokeWidth)?parseInt(p.strokeWidth):2,lineDash:y})})}else{i=new ol.style.Style({fill:new ol.style.Fill({color:[255,255,255,.5]}),stroke:new ol.style.Stroke({color:[255,204,51,1],width:2})})}var h={geometry:new ol.geom.Polygon(n)};goog.base(this,h);this.coordString=t;this.polygonFlag=true;this.setStyle(i)};goog.inherits(Ez.g.Polygon,Ez.Overlay);Ez.g.Polygon.readGeoJSON=function(e,o){var t=Ez.Overlay.readGeoJSON.call(this,e);var r=t.getGeometry().getCoordinates();return new Ez.g.Polygon(r,o)};Ez.g.Polygon.prototype.getCenter=function(){var e=this.getGeometry().getInteriorPoint().getCoordinates();return new Ez.Coordinate(e[0],e[1])};Ez.g.Polygon.prototype.getPoints=function(){var e=this.getGeometry();return e.getCoordinates()};goog.exportSymbol("Polygon",Ez.g.Polygon);goog.provide("Ez.g.Circle");goog.require("ol.geom.Circle");goog.require("Ez.Overlay");goog.require("Ez.Coordinate");goog.require("ol.style.Style");goog.require("ol.style.Fill");goog.require("ol.style.Stroke");Ez.g.Circle=function(e,o,t){var r;var i;var n="";if(goog.isString(e)){i=e.split(",");n=e}else if(e instanceof Ez.Coordinate){i=e.getCoordinate();n=e.toStringXY()}else{goog.asserts.assert(false,"坐标点必须是EzCoord对象")}o=parseFloat(o);var a=t?t:{};if(!a.isMeter){var l=i;var s=[l[0]+1,l[1]];var g=ol.sphere.WGS84.haversineDistance(l,s);o=1*o/g}if(!goog.isNumber(o)){goog.asserts.assert(false,"圆形半径必须为数值型")}if(goog.isDef(t)){var p=goog.isDef(a.fillColor)?a.fillColor:"#FFFFFF";var u=this.hexToRgb_(p);u[3]=goog.isDef(a.fillOpacity)?a.fillOpacity:.5;var c=ol.color.asArray(goog.isDef(a.strokeColor)?a.strokeColor:"#FFCC33");c[3]=goog.isDef(a.strokeOpacity)?a.strokeOpacity:1;var d=goog.isDef(a.strokeLineDash)?a.strokeLineDash:undefined;r=new ol.style.Style({fill:new ol.style.Fill({color:u}),stroke:new ol.style.Stroke({color:c,width:goog.isDef(a.strokeWidth)?parseInt(a.strokeWidth):2,lineDash:d})})}else{r=new ol.style.Style({fill:new ol.style.Fill({color:[255,255,255,.5]}),stroke:new ol.style.Stroke({color:[255,204,51,1],width:2})})}var y={geometry:new ol.geom.Circle(i,o)};goog.base(this,y);this.coordString=n;this.circleFlag=true;this.setStyle(r)};goog.inherits(Ez.g.Circle,Ez.Overlay);Ez.g.Circle.prototype.getCenter=function(){var e=this.getGeometry().getCenter();return new Ez.Coordinate(e[0],e[1])};Ez.g.Circle.prototype.setCenter=function(e){this.getGeometry().setCenter(e.getCoordinate())};Ez.g.Circle.prototype.getRadius=function(){var e=this.getGeometry().getCenter();var o=[e[0]+1,e[1]];var t=ol.sphere.WGS84.haversineDistance(e,o);var r=this.getGeometry().getRadius();return r*t};Ez.g.Circle.prototype.setRadius=function(e){var o=this.getGeometry().getCenter();var t=[o[0]+1,o[1]];var r=ol.sphere.WGS84.haversineDistance(o,t);this.getGeometry().setRadius(e/r)};Ez.g.Circle.prototype.isPointInCircle=function(e){var o=this.getGeometry().getCenter();var t=this.getGeometry().getRadius();var r=e.getCoordinate();var i=(o[0]-r[0])*(o[0]-r[0])+(o[1]-r[1])*(o[1]-r[1]);return!(i>t*t)};goog.exportSymbol("Circle",Ez.g.Circle);goog.provide("Ez.g.Rectangle");goog.require("ol.geom.Polygon");goog.require("Ez.Overlay");goog.require("Ez.Coordinate");goog.require("ol.style.Style");goog.require("ol.style.Fill");goog.require("ol.style.Image");Ez.g.Rectangle=function(e,o){var t=[];var r;var i="";if(goog.isString(e)){var n=e.split(",");if(n.length===4){i+=e;t.push([parseFloat(n[0]),parseFloat(n[1])]);t.push([parseFloat(n[0]),parseFloat(n[3])]);t.push([parseFloat(n[2]),parseFloat(n[3])]);t.push([parseFloat(n[2]),parseFloat(n[1])]);t.push([parseFloat(n[0]),parseFloat(n[1])])}else{i+=e;t.push([parseFloat(n[0]),parseFloat(n[1])]);t.push([parseFloat(n[2]),parseFloat(n[3])]);t.push([parseFloat(n[4]),parseFloat(n[5])]);t.push([parseFloat(n[6]),parseFloat(n[7])]);t.push([parseFloat(n[0]),parseFloat(n[1])])}}else if(goog.isArray(e)){if(e[0]instanceof Ez.Coordinate){t.push(e[0].getCoordinate());i+=e[0].getCoordinate();t.push(e[1].getCoordinate());i+=",";t.push(e[2].getCoordinate());i+=e[2].getCoordinate();t.push(e[3].getCoordinate());t.push(e[0].getCoordinate())}else{e=e[0];t.push(e[0]);i+=e[0][0]+","+e[2][1]+",";t.push(e[1]);t.push(e[2]);i+=e[2][0]+","+e[0][1];t.push(e[3]);t.push(e[0])}}else{goog.asserts.assert(false,"坐标格式不对")}var a=o?o:{};if(goog.isDef(o)){var l=goog.isDef(a.fillColor)?a.fillColor:"#FFFFFF";var s=this.hexToRgb_(l);s[3]=goog.isDef(a.fillOpacity)?a.fillOpacity:.5;var g=goog.isDef(a.strokeColor)?a.strokeColor:"#FFCC33";var p=this.hexToRgb_(g);p[3]=goog.isDef(a.strokeOpacity)?a.strokeOpacity:1;var u=goog.isDef(a.strokeLineDash)?a.strokeLineDash:undefined;r=new ol.style.Style({fill:new ol.style.Fill({color:s}),stroke:new ol.style.Stroke({color:p,
width:goog.isDef(a.strokeWidth)?parseInt(a.strokeWidth):2,lineDash:u})})}else{r=new ol.style.Style({fill:new ol.style.Fill({color:[255,255,255,.5]}),stroke:new ol.style.Stroke({color:[255,204,51,1],width:2})})}t=[t];var c={geometry:new ol.geom.Polygon(t)};goog.base(this,c);this.coordString=i;this.rectFlag=true;this.setStyle(r)};goog.inherits(Ez.g.Rectangle,Ez.Overlay);Ez.g.Rectangle.prototype.getCenter=function(){var e=this.getGeometry().getExtent();var o=ol.extent.getCenter(e);return new Ez.Coordinate(o[0],o[1])};goog.exportSymbol("Rectangle",Ez.g.Rectangle);goog.provide("Ez.controls.Layers");Ez.controls.Layers=function(e){this.baseLayers_={};this.eleContainer=document.createElement("div");this.showContainer=document.createElement("div");this.eleContainer.className="ez-layers ol-unselectable ol-control";this.showContainer.className="ez-layers-showLayers";this.layers_={};for(var o=0;o<e.length;o++){var t=e[o];var r=Ez.controls.Layers.generateLayerFrame(t);this.baseLayers_[t.title]=r;this.baseLayers_[t.title+"_layer"]=t.layer;this.layers_[t.title]=t.layer}this.eleContainer.addEventListener("mouseover",goog.bind(this.onMouseOver_,this),false);this.eleContainer.addEventListener("mouseout",goog.bind(this.onMouseOut_,this),false);this.eleContainer.addEventListener("click",goog.bind(this.onClick_,this),false);ol.control.Control.call(this,{element:this.eleContainer})};goog.inherits(Ez.controls.Layers,ol.control.Control);Ez.controls.Layers.generateLayerFrame=function(e){goog.asserts.assert(goog.isDef(e.title),"图层缺少title信息");goog.asserts.assert(goog.isDef(e.layer),"图层缺少layer对象");goog.asserts.assert(goog.isDef(e.imageSRC),"图层缺少image图标");var o=document.createElement("div");o.className="ez-layers-div ez-layers-hidden";o.id="ezLayer";o.addEventListener("mouseover",function(e){this.children[1].style.backgroundColor="#989CFC"},false);o.addEventListener("mouseout",function(e){this.children[1].style.backgroundColor=""},false);var t=document.createElement("img");t.src=e.imageSRC;var r=document.createElement("div");r.innerHTML=e.title;r.className="ez-layers-title";o.appendChild(t);o.appendChild(r);return o};Ez.controls.Layers.prototype.refesh=function(){var e=this.getMap();var o=e.getTileLayers().getLayers();var t=/_layer/;var r=o.item(o.getLength()-1);for(var i in this.baseLayers_){if(i===r.get("ezname")){this.eleContainer.appendChild(this.baseLayers_[i]);this.topElement_=this.baseLayers_[i];this.removeCss(this.topElement_,"ez-layers-hidden");continue}if(t.test(i)){continue}this.showContainer.appendChild(this.baseLayers_[i])}this.eleContainer.appendChild(this.showContainer)};Ez.controls.Layers.prototype.onMouseOver_=function(e){e.stopPropagation();this.expand()};Ez.controls.Layers.prototype.onMouseOut_=function(e){e.stopPropagation();this.collapse()};Ez.controls.Layers.prototype.onClick_=function(e){e.stopPropagation();var o=e.target;var t;if(o.lastChild){t=o.lastChild.textContent}else{t=o.nextSibling.lastChild.textContent}this.swapTo(t);this.eleContainer.removeChild(this.showContainer);while(this.showContainer.hasChildNodes()){this.showContainer.removeChild(this.showContainer.lastChild)}this.refesh()};Ez.controls.Layers.prototype.expand=function(){var e=this.showContainer.childNodes;for(var o=0;o<e.length;o++){this.removeCss(e[o],"ez-layers-hidden")}};Ez.controls.Layers.prototype.collapse=function(){var e=this.showContainer.childNodes;for(var o=0;o<e.length;o++){this.addCss(e[o],"ez-layers-hidden")}};Ez.controls.Layers.prototype.removeCss=function(e,o){var t=this.getClass(e);var r=goog.array.slice(arguments,1);var i=0;for(var n=0;n<t.length;n++){if(goog.array.contains(r,t[n])){goog.array.splice(t,n--,1);i++}}e.className=t.join(" ");return i==r.length};Ez.controls.Layers.prototype.addCss=function(e,o){var t=this.getClass(e);var r=goog.array.slice(arguments,1);var i=1;for(var n=0;n<r.length;n++){if(!goog.array.contains(t,r[n])){t.push(r[n]);i&=1}else{i&=0}}e.className=t.join(" ");return Boolean(i)};Ez.controls.Layers.prototype.getClass=function(e){var o=e.className;return o&&typeof o.split=="function"?o.split(" "):[]};Ez.controls.Layers.prototype.swapTo=function(e){var o=this.getMap();if(!goog.isDef(e)){return}var t=this.getCurrentTileLayer(),r=t.get("ezname");if(e===r){return}var i=this.layers_,n=i[e];var a=o.getView().getProjection();var l,s;if(n instanceof Ez.Layer.Group){l=n.getLayers().getArray()[0].getSource().getProjection();s=n.getLayers().getArray()[0].getResolutions()}else{s=n.getResolutions();l=n.getSource().getProjection()}var g=o.getView().getCenter(),p=o.getView().getZoom();var u=o.getView(),c=u.getState();var d=ol.proj.transform(g,a,l);var y={center:d,projection:l,resolutions:s,zoom:p};o.removeLayer(t);o.addLayer(n)};Ez.controls.Layers.prototype.getCurrentTileLayer=function(){var e=this.map_.tileLayerGroup_.getLayers();return e.item(e.getLength()-1)};goog.provide("Ez.controls.NavBar");goog.require("ol.control.Control");Ez.controls.NavBar=function(e){var o=document.createElement("div");o.className="ez-navigation ol-unselectable ol-control";var t=document.createElement("div");t.className="ez-navigation-top ez-navigation-pan";t.setAttribute("data-orientation","NORTH");o.appendChild(t);var r=document.createElement("div");r.className="ez-navigation-left ez-navigation-pan";r.setAttribute("data-orientation","WEST");o.appendChild(r);var i=document.createElement("div");i.className="ez-navigation-bottom ez-navigation-pan";i.setAttribute("data-orientation","SOUTH");o.appendChild(i);var n=document.createElement("div");n.className="ez-navigation-right ez-navigation-pan";n.setAttribute("data-orientation","EAST");o.appendChild(n);ol.events.listen(t,ol.events.EventType.CLICK,this.handleClick_,this);ol.events.listen(r,ol.events.EventType.CLICK,this.handleClick_,this);ol.events.listen(i,ol.events.EventType.CLICK,this.handleClick_,this);ol.events.listen(n,ol.events.EventType.CLICK,this.handleClick_,this);ol.control.Control.call(this,{element:o})};goog.inherits(Ez.controls.NavBar,ol.control.Control);Ez.controls.NavBar.prototype.handleClick_=function(e){var o=e.target;var t=o.getAttribute("data-orientation");var r=this.getMap();var i=r.getView();var n=i.getState();var a=n.resolution*128;var l=0,s=0;if(t==="SOUTH"){s=-a}else if(t==="WEST"){l=-a}else if(t==="EAST"){l=a}else{s=a}var g=[l,s];ol.coordinate.rotate(g,n.rotation);ol.interaction.Interaction.pan(r,i,g,100);e.preventDefault()};goog.provide("Ez.controls.ZoomSlider");goog.require("ol.control.Control");Ez.controls.ZoomSlider=function(e){var o=goog.isDef(e)?e:{};var t=goog.isDef(o.maxZoom)?o.maxZoom:18;var r=goog.isDef(o.minZoom)?o.minZoom:2;var i=goog.isDef(o.isTitleArea)?o.isTitleArea:false;this.eleContainer=document.createElement("div");this.eleContainer.className="ez-zoomslider ol-unselectable ol-control";var n=document.createElement("div");n.className="ez-zoomslider-zoomin ez-zoomslider-btn";n.title="放大一级";var a=document.createElement("div");a.className="ez-zoomslider-zoomcontent";a.title="放置到此级别";var l=document.createElement("div");l.className="ez-zoomslider-zoomout ez-zoomslider-btn";l.title="缩小一级";this.tagContainer=null;if(i){this.tagContainer=this.initFlagArea(o.flag2level,t,r);a.appendChild(this.tagContainer)}var s=(t-r-1)*10+15+14;a.style.height=s+"px";if(i){this.tagContainer.style.height=s+"px";a.addEventListener("mouseover",this.handleTagContainerMouseover_.bind(this),false);a.addEventListener("mouseout",this.handleTagContainerMouseout_.bind(this),false);var g=this.tagContainer.children;for(var p=0;p<g.length;p++){g[p].addEventListener("click",this.locationZoom_.bind(this),false)}}var u=document.createElement("div");u.className="ez-zoomslider-zoomcontent-top";a.appendChild(u);var c=document.createElement("div");c.className="ez-zoomslider-zoomcontent-bottom";a.appendChild(c);var d=document.createElement("div");d.className="ez-zoomslider-zoomcontent-body";a.appendChild(d);d.style.height=(t-r-1)*10+"px";var y=this.zoomcontentrender_=document.createElement("div");y.className="ez-zoomslider-zoomcontentrender";a.appendChild(y);this.thumbElement=document.createElement("div");this.thumbElement.className="ez-zoomslider-thumb";this.thumbElement.title="拖拽";a.appendChild(this.thumbElement);this.eleContainer.appendChild(n);this.eleContainer.appendChild(a);this.eleContainer.appendChild(l);this.dragger_=new ol.pointer.PointerEventHandler(a);this.registerDisposable(this.dragger_);this.dragger_.limits={left:2,top:9-4,width:0,height:s-18-4};ol.events.listen(this.dragger_,ol.pointer.EventType.POINTERDOWN,this.handleDraggerStart_,this);ol.events.listen(this.dragger_,ol.pointer.EventType.POINTERMOVE,this.handleDraggerDrag_,this);ol.events.listen(this.dragger_,ol.pointer.EventType.POINTERUP,this.handleDraggerEnd_,this);ol.events.listen(d,ol.events.EventType.CLICK,this.handleContainerClick_,this);ol.events.listen(y,ol.events.EventType.CLICK,this.handleContainerrenderClick_,this);ol.events.listen(u,ol.events.EventType.CLICK,this.handleTopClick_,this);ol.events.listen(c,ol.events.EventType.CLICK,this.handleBottomClick_,this);ol.events.listen(this.thumbElement,ol.events.EventType.CLICK,ol.events.Event.stopPropagation);ol.events.listen(n,"click",this.zoomin_,this);ol.events.listen(l,"click",this.zoomout_,this);this.dragging_;this.dragListenerKeys_;this.currentResolution_=undefined;ol.control.Control.call(this,{element:this.eleContainer,render:Ez.controls.ZoomSlider.render})};goog.inherits(Ez.controls.ZoomSlider,ol.control.Control);Ez.controls.ZoomSlider.render=function(e){if(goog.isNull(e.frameState)){return}goog.asserts.assert(goog.isDefAndNotNull(e.frameState.viewState),"viewState should be defined");var o=e.frameState.viewState.resolution;if(o!==this.currentResolution_){this.currentResolution_=o;this.setThumbPosition_(o);var t=this.thumbElement.style.top;var r=this.dragger_.limits.height-parseInt(t)+4;if(r<0){r=0}this.zoomcontentrender_.style.height=r+"px"}};Ez.controls.ZoomSlider.prototype.initFlagArea=function(e,o,t){var r=goog.isDef(e)?e:{};var i=goog.isDef(r.country)?r.country:2;var n=goog.isDef(r.province)?r.province:7;var a=goog.isDef(r.city)?r.city:11;var l=goog.isDef(r.street)?r.street:17;var s=[i,n,a,l];var g=document.createElement("div");g.className="ez-zoomslider-tagArea ez-zoomslider-tagArea-hidden";for(var p=0;p<s.length;p++){if(s[p]<=o&&s[p]>=t){if(p===0){var u=document.createElement("div");u.className="ez-zoomslider-tag ez-zoomslider-tag-country";u.id="country";u.setAttribute("data-zoom",s[p]);u.style.top=(o-s[p]-1)*10+15+5-10+"px";g.appendChild(u)}else if(p===1){var c=document.createElement("div");c.className="ez-zoomslider-tag ez-zoomslider-tag-province";c.style.top=(o-s[p]-1)*10+15+5-10+"px";c.id="province";c.setAttribute("data-zoom",s[p]);g.appendChild(c)}else if(p===2){var d=document.createElement("div");d.className="ez-zoomslider-tag ez-zoomslider-tag-city";d.style.top=(o-s[p]-1)*10+15+5-10+"px";d.id="city";d.setAttribute("data-zoom",s[p]);g.appendChild(d)}else if(p===3){var y=document.createElement("div");y.className="ez-zoomslider-tag ez-zoomslider-tag-street";y.style.top=(o-s[p]-1)*10+15+5-10+"px";y.id="street";y.setAttribute("data-zoom",s[p]);g.appendChild(y)}}}return g};Ez.controls.ZoomSlider.prototype.handleTagContainerMouseover_=function(e){this.tagContainer.className="ez-zoomslider-tagArea"};Ez.controls.ZoomSlider.prototype.handleTagContainerMouseout_=function(e){this.tagContainer.className="ez-zoomslider-tagArea ez-zoomslider-tagArea-hidden"};Ez.controls.ZoomSlider.prototype.setThumbPosition_=function(e){var o=this.getPositionForResolution_(e);var t=this.dragger_;var r=this.thumbElement;var i=t.limits.top+t.limits.height*o;goog.style.setPosition(r,t.limits.left,i)};Ez.controls.ZoomSlider.prototype.handleDraggerStart_=function(e){if(!this.dragging_&&e.originalEvent.target===this.thumbElement){this.getMap().getView().setHint(ol.ViewHint.INTERACTING,1);this.previousX_=e.clientX;this.previousY_=e.clientY;this.dragging_=true;if(!this.dragListenerKeys_){var o=this.handleDraggerDrag_;var t=this.handleDraggerEnd_;this.dragListenerKeys_=[ol.events.listen(document,ol.events.EventType.MOUSEMOVE,o,this),ol.events.listen(document,ol.events.EventType.MOUSEUP,t,this)]}}};Ez.controls.ZoomSlider.prototype.handleDraggerDrag_=function(e){if(this.dragging_){var o=this.thumbElement;var t=e.clientX-this.previousX_+parseInt(o.style.left,10);var r=e.clientY-this.previousY_+parseInt(o.style.top,10);var i=parseInt(this.dragger_.limits.height)-parseInt(o.style.top)+4;this.zoomcontentrender_.style.height=i+"px";var n=this.getRelativePosition_(t,r);this.currentResolution_=this.getResolutionForPosition_(n);this.getMap().getView().setResolution(this.currentResolution_);this.setThumbPosition_(this.currentResolution_);this.previousX_=e.clientX;this.previousY_=e.clientY}};Ez.controls.ZoomSlider.prototype.handleDraggerEnd_=function(e){if(this.dragging_){var o=this.getMap();var t=o.getView();t.setHint(ol.ViewHint.INTERACTING,-1);goog.asserts.assert(this.currentResolution_,"this.currentResolution_ should be defined");var r=t.constrainResolution(this.currentResolution_);t.setResolution(r);this.dragging_=false;this.previousX_=undefined;this.previousY_=undefined;this.dragListenerKeys_.forEach(ol.events.unlistenByKey);this.dragListenerKeys_=null}};Ez.controls.ZoomSlider.prototype.locationZoom_=function(e){var o=this.getMap();var t=o.getView();var r=parseInt(e.target.getAttribute("data-zoom"));t.setZoom(r)};Ez.controls.ZoomSlider.prototype.handleContainerClick_=function(e){var o=this.getMap();var t=o.getView();var r=t.getResolution();goog.asserts.assert(goog.isDef(r),"currentResolution should be defined");var i=this.getRelativePosition_(e.offsetX-18/2,e.offsetY-9/2+11);var n=this.getResolutionForPosition_(i);t.setResolution(t.constrainResolution(n));var a=this.thumbElement;a.title=t.getZoom()};Ez.controls.ZoomSlider.prototype.handleContainerrenderClick_=function(e){var o=this.getMap();var t=o.getView();var r=this.thumbElement;var i=t.getResolution();goog.asserts.assert(goog.isDef(i),"currentResolution should be defined");var n=this.getRelativePosition_(e.offsetX-18/2,e.offsetY+parseFloat(r.style.top));var a=this.getResolutionForPosition_(n);t.setResolution(t.constrainResolution(a));r.title=t.getZoom()};Ez.controls.ZoomSlider.prototype.handleTopClick_=function(e){var o=this.getMap();var t=o.getView();var r=t.getResolution();goog.asserts.assert(goog.isDef(r),"currentResolution should be defined");var i=this.getRelativePosition_(0,5);var n=this.getResolutionForPosition_(i);t.setResolution(t.constrainResolution(n));var a=this.thumbElement;a.title=t.getZoom()};Ez.controls.ZoomSlider.prototype.handleBottomClick_=function(e){var o=this.getMap();var t=o.getView();var r=t.getResolution();goog.asserts.assert(goog.isDef(r),"currentResolution should be defined");var i=this.getRelativePosition_(0,151);var n=this.getResolutionForPosition_(i);t.setResolution(t.constrainResolution(n));var a=this.thumbElement;a.title=t.getZoom()};Ez.controls.ZoomSlider.prototype.zoomin_=function(){var e=this.getMap();var o=e.getView();var t=o.getZoom();o.setZoom(t+1)};Ez.controls.ZoomSlider.prototype.zoomout_=function(){var e=this.getMap();var o=e.getView();var t=o.getZoom();o.setZoom(t-1)};Ez.controls.ZoomSlider.prototype.getRelativePosition_=function(e,o){var t=this.dragger_.limits;var r;if(this.direction_===ol.control.ZoomSlider.direction.HORIZONTAL){r=(e-t.left)/t.width}else{r=(o-t.top)/t.height}return goog.math.clamp(r,0,1)};Ez.controls.ZoomSlider.prototype.getResolutionForPosition_=function(e){var o=this.getMap().getView().getResolutionForValueFunction();return o(1-e)};Ez.controls.ZoomSlider.prototype.getPositionForResolution_=function(e){var o=this.getMap().getView().getValueForResolutionFunction();return 1-o(e)};goog.provide("Ez.controls.ScaleLine");goog.require("ol.control.ScaleLine");Ez.controls.ScaleLine=function(e){var o=e?e:{};var t=o.className?o.className:"ez-scale-line";var r=o.minWidth?o.minWidth:64;var i=o.units?o.units:"metric";goog.base(this,{className:t,minWidth:r,units:i})};goog.inherits(Ez.controls.ScaleLine,ol.control.ScaleLine);goog.provide("Ez.controls.Overview");goog.require("ol.control.OverviewMap");Ez.controls.Overview=function(e){var o=e?e:{};var t=o.className?o.className:"ol-overviewmap ez-custom-overview";var r=o.collapseLabel?o.collapseLabel:"»";var i=o.label?o.label:"«";var n=o.collapsed?o.collapsed:true;var a=o.projection?o.projection:"EPSG:4326";goog.base(this,{className:t,collapseLabel:r,label:i,view:new ol.View({projection:a}),collapsed:n})};goog.inherits(Ez.controls.Overview,ol.control.OverviewMap);goog.provide("Ez.controls.SimpleZoom");Ez.controls.SimpleZoom=function(){var e=this.createDom("div","ez-simple-zoom ol-unselectable ol-control");var o=this.createDom("div","ez-simple-btn");o.title="放大一级";var t=this.createDom("div","ez-simple-zoomview ez-simple-zoomin");o.appendChild(t);var r=this.createDom("div","ez-simple-btn");r.title="当前级别";var i=this.view=this.createDom("div","ez-simple-zoomview ez-simple-status");r.appendChild(i);var n=this.createDom("div","ez-simple-btn");n.title="缩小一级";var a=this.createDom("div","ez-simple-zoomview ez-simple-zoomout");n.appendChild(a);o.addEventListener("click",this.handleZoomIn.bind(this));n.addEventListener("click",this.handleZoomOut.bind(this));e.appendChild(o);e.appendChild(r);e.appendChild(n);window.setTimeout(this.initView.bind(this),300);goog.base(this,{element:e})};goog.inherits(Ez.controls.SimpleZoom,ol.control.Control);Ez.controls.SimpleZoom.prototype.initView=function(){var e=this.getMap();var o=e.getZoom();this.view.innerHTML=o;e.getView().on("change:resolution",function(o){this.view.innerHTML=e.getZoom()}.bind(this))};Ez.controls.SimpleZoom.prototype.createDom=function(e,o){var t=document.createElement(e);t.className=o;return t};Ez.controls.SimpleZoom.prototype.handleZoomIn=function(){var e=this.getMap();e.zoomIn()};Ez.controls.SimpleZoom.prototype.handleZoomOut=function(){var e=this.getMap();e.zoomOut()};goog.provide("Ez.controls.SimpleLayers");Ez.controls.SimpleLayers=function(e){var o=this.element=document.createElement("div");o.className="ez-simple-layers ol-unselectable ol-control";this.layers_={};for(var t=e.length-1;t>=0;t--){var r;if(t===0){r=this.createLayerCard(e[t])}else{r=this.createLayerCard(e[t],true)}o.appendChild(r);this.layers_[e[t].title]=e[t].layer}o.addEventListener("mouseover",this.onMouseOver.bind(this));o.addEventListener("mouseout",this.onMouseOut.bind(this));goog.base(this,{element:o})};goog.inherits(Ez.controls.SimpleLayers,ol.control.Control);Ez.controls.SimpleLayers.prototype.createLayerCard=function(e,o){var t=e.title;var r=e.layer;var i=e.imageSRC;var n=document.createElement("div");if(o){n.className="ez-simple-card hide"}else{n.className="ez-simple-card"}var a=document.createElement("img");a.src=i;var l=document.createElement("span");l.innerHTML=t;n.addEventListener("mouseover",this.oncardmouseover.bind(n,this));n.addEventListener("mouseout",this.oncardmouseout.bind(n,this));n.addEventListener("click",this.oncardclick.bind(n,this));n.appendChild(a);n.appendChild(l);return n};Ez.controls.SimpleLayers.prototype.onMouseOver=function(e){var o=this.element;var t=o.children;this.addClass(o,"ez-simple-layers--onfocus");for(var r=0;r<t.length-1;r++){this.removeClass(t[r],"hide")}};Ez.controls.SimpleLayers.prototype.onMouseOut=function(e){var o=this.element;var t=o.children;this.removeClass(o,"ez-simple-layers--onfocus");for(var r=0;r<t.length-1;r++){this.addClass(t[r],"hide")}};Ez.controls.SimpleLayers.prototype.oncardmouseover=function(e){var o=this;var t=o.children[1];e.addClass(o,"ez-simple-card--onfocus");e.addClass(t,"ez-simple-card-title--onfocus")};Ez.controls.SimpleLayers.prototype.oncardmouseout=function(e){var o=this;var t=o.children[1];e.removeClass(o,"ez-simple-card--onfocus");e.removeClass(t,"ez-simple-card-title--onfocus")};Ez.controls.SimpleLayers.prototype.oncardclick=function(e){var o=this.children[1].textContent;e.swapTo(o)};Ez.controls.SimpleLayers.prototype.addClass=function(e,o){this.removeClass(e,o);e.className+=" "+o};Ez.controls.SimpleLayers.prototype.removeClass=function(e,o){var t=e.className.split(" ");for(var r=0;r<t.length;r++){if(t[r]===o){t.splice(r,1);break}}e.className=t.join(" ")};Ez.controls.SimpleLayers.prototype.swapTo=function(e){var o=this.getMap();if(!goog.isDef(e)){return}var t=this.getCurrentTileLayer(),r=t.get("ezname");if(e===r){return}var i=this.layers_,n=i[e];var a=o.getView().getProjection();var l,s;if(n instanceof Ez.Layer.Group){l=n.getLayers().getArray()[0].getSource().getProjection();s=n.getLayers().getArray()[0].getResolutions()}else{s=n.getResolutions();l=n.getSource().getProjection()}var g=o.getView().getCenter(),p=o.getView().getZoom();var u=o.getView(),c=u.getState();var d=ol.proj.transform(g,a,l);var y={center:d,projection:l,resolutions:s,zoom:p};o.removeLayer(t);o.addLayer(n)};Ez.controls.SimpleLayers.prototype.getCurrentTileLayer=function(){var e=this.map_.tileLayerGroup_.getLayers();return e.item(e.getLength()-1)};goog.provide("Ez.controls.Attr");Ez.controls.Attr=function(e){e.className+=" ol-unselectable ol-control";goog.base(this,{element:e})};goog.inherits(Ez.controls.Attr,ol.control.Control);goog.provide("Ez.utility.Measure");goog.require("ol.Object");goog.require("ol.interaction.Draw");goog.require("ol.layer.Vector");goog.require("ol.source.Vector");goog.require("ol.Overlay");goog.require("ol.Feature");goog.require("ol.geom.LineString");goog.require("ol.geom.Polygon");goog.require("ol.style.Circle");goog.require("ol.style.Fill");goog.require("ol.style.Stroke");goog.require("ol.style.Style");Ez.utility.Measure=function(e,o,t){goog.base(this);this.type=e;this.map_=o;this.fn_=t;this.callbackData=null;this.sketch=null;this.sketchStyle=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(67, 78, 255, 0.3)"}),stroke:new ol.style.Stroke({color:"rgba(67, 78, 255, 0.8)",width:2})});this.helpTooltipElement=null;this.helpTooltip=null;this.measureTooltipElement=null;this.measureTooltip=null;this.continuePolygonMsg="点击右键结束测量";this.continueLineMsg="点击右键结束测量";this.vectorLayer=null;this.draw=null;this.listener=null;this.wgs84Sphere=new ol.Sphere(6378137);this.closeBtn=null;this.init()};goog.inherits(Ez.utility.Measure,ol.Object);Ez.utility.Measure.prototype.init=function(){var e=this.map_;var o=e.getMarkerLayers();var t;o.getLayers().forEach(function(e,o,r){if(e.get("name")==="marker_default"){t=e}});if(t){this.vectorLayer=t}else{throw new Error("不能获取到默认的marker图层")}this.draw=this.createInteraction(this.type);e.addInteraction(this.draw);this.createHelpTooltip();this.createMeasureTooltip();this.draw.once("drawstart",this.onStartDraw,this);this.draw.once("drawend",this.onEndDraw,this);e.on("pointermove",this.handlePointerMove,this);e.getViewport().addEventListener("mouseout",function(e){Ez.utility.Measure.addClass(this.helpTooltipElement,"hidden")}.bind(this))};Ez.utility.Measure.prototype.de_init=function(){var e=this.map_;e.removeInteraction(this.draw);e.removeOverlay(this.helpTooltip,true);e.removeOverlay(this.measureTooltip,true);this.draw.un("drawstart",this.onStartDraw,this);this.draw.un("drawend",this.onEndDraw,this);e.un("pointermove",this.handlePointerMove,this);e.getViewport().removeEventListener("mouseout",function(e){Ez.utility.Measure.addClass(this.helpTooltipElement,"hidden")}.bind(this))};Ez.utility.Measure.prototype.disposeAll=function(){var e=this.vectorLayer;var o=e.getSource();if(this.waitSketch){o.removeFeature(this.waitSketch);this.waitSketch=null}var t=this.map_;t.removeOverlay(this.measureTooltip,true);t.removeOverlay(this.HelpTooltip,true);t.removeOverlay(this.closeBtn,true)};Ez.utility.Measure.prototype.handlePointerMove=function(e){if(e.dragging){return}var o="点击开始绘制与测量";if(this.sketch){var t=this.sketch;var r=t.getGeometry();if(r instanceof ol.geom.Polygon){o=this.continuePolygonMsg}else if(r instanceof ol.geom.LineString){o=this.continueLineMsg}}this.helpTooltipElement.innerHTML=o;this.helpTooltip.setPosition(e.coordinate);Ez.utility.Measure.addClass(this.helpTooltipElement,"hidden")};Ez.utility.Measure.prototype.createInteraction=function(e){var o=new ol.interaction.Draw2({source:this.vectorLayer.getSource(),type:e,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(67, 78, 255, 0.3)"}),stroke:new ol.style.Stroke({color:"rgba(67, 78, 255, 0.8)",width:2})})});return o};Ez.utility.Measure.prototype.onStartDraw=function(e){var o=this.sketch=e.feature;var t=e.coordinate;listener=o.getGeometry().on("change",function(e){var o=e.target;var r;if(o instanceof ol.geom.Polygon){r=this.formatArea(o);t=o.getInteriorPoint().getCoordinates()}else if(o instanceof ol.geom.LineString){r=this.formatLength(o);t=o.getLastCoordinate()}this.measureTooltipElement.innerHTML=r;this.measureTooltip.setPosition(t)},this)};Ez.utility.Measure.prototype.onEndDraw=function(e){this.measureTooltipElement.className="tooltip tooltip-static";this.measureTooltip.setOffset([0,-7]);this.sketch.setStyle(this.sketchStyle);this.measureTooltipElement=null;this.fn_(this.callbackData);this.createCloseBtn();var o=e.feature;this.vectorLayer.getSource().addFeature(o);this.waitSketch=this.sketch;this.sketch=null;this.deleteHandleOfMeasure()};Ez.utility.Measure.prototype.createCloseBtn=function(){var e=document.createElement("div");e.className="close";this.closeBtn=new ol.Overlay({element:e,offset:[0,5],positioning:"top-center"});var o=this.map_;o.addOverlay(this.closeBtn,true);var t=this.sketch;var r=t.getGeometry();var i;if(r instanceof ol.geom.LineString){i=r.getLastCoordinate()}else if(r instanceof ol.geom.Polygon){i=r.getInteriorPoint().getCoordinates()}this.closeBtn.setPosition(i);e.addEventListener("click",function(){this.disposeAll()}.bind(this))};Ez.utility.Measure.prototype.deleteHandleOfMeasure=function(){var e=this.map_;e.removeOverlay(this.helpTooltip,true);this.unByKey(this.listener);e.removeInteraction(this.draw);this.draw=null;e.un("pointermove",this.handlePointerMove,this);e.getViewport().removeEventListener("mouseout",function(e){Ez.utility.Measure.addClass(this.helpTooltipElement,"hidden")}.bind(this))};Ez.utility.Measure.prototype.createMeasureTooltip=function(){if(this.measureTooltipElement){this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement)}this.measureTooltipElement=document.createElement("div");this.measureTooltipElement.className="tooltip tooltip-measure";this.measureTooltip=new ol.Overlay({element:this.measureTooltipElement,offset:[0,-15],positioning:"bottom-center"});var e=this.map_;e.addOverlay(this.measureTooltip,true)};Ez.utility.Measure.prototype.createHelpTooltip=function(){if(this.helpTooltipElement){this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement)}this.helpTooltipElement=document.createElement("div");this.helpTooltipElement.className="tooltip hidden";this.helpTooltip=new ol.Overlay({element:this.helpTooltipElement,offset:[15,0],positioning:"center-left"});var e=this.map_;e.addOverlay(this.helpTooltip,true)};Ez.utility.Measure.prototype.formatArea=function(e){var o;var t=this.map_.getView().getProjection();var r=e.clone().transform(t,"EPSG:4326");var i=r.getLinearRing(0).getCoordinates();o=Math.abs(this.wgs84Sphere.geodesicArea(i));var n;if(o>1e4){n=Math.round(o/1e6*100)/100+" "+"km<sup>2</sup>"}else{n=Math.round(o*100)/100+" "+"m<sup>2</sup>"}this.callbackData={value:o,pretty:n};return n};Ez.utility.Measure.prototype.formatLength=function(e){var o;var t=e.getCoordinates();o=0;var r=this.map_.getView().getProjection();for(var i=0,n=t.length-1;i<n;++i){var a=ol.proj.transform(t[i],r,"EPSG:4326");var l=ol.proj.transform(t[i+1],r,"EPSG:4326");o+=this.wgs84Sphere.haversineDistance(a,l)}var s;if(o>100){s=Math.round(o/1e3*100)/100+" "+"km"}else{s=Math.round(o*100)/100+" "+"m"}this.callbackData={value:o,pretty:s};return s};Ez.utility.Measure.addClass=function(e,o){var t=" "+o.trim();e.className+=t};Ez.utility.Measure.removeClass=function(e,o){var t=e.className;var r=t.split(" ");for(var i=0;i<r.length;i++){if(r[i]===o){r[i]="";break}}var n=r.join(" ");e.className=n};goog.provide("Ez.Global");goog.require("ol.events.EventTarget");Ez.Global=function(e,o){var t=goog.isDef(e)?e:{};goog.base(this);this.map_=o;this.opts_=t;var r=t.MapSrcURL;this.layersInfoArray_=[];this.layers_=[];for(var i=r.length-1;i>=0;i--){var n=r[i][0];var a=r[i][1];var l=r[i][2];var s={};for(var g in l){if(g==="crs"){s.projection=this.crs2Projection(l[g])}else{s[g]=l[g]}}if(!s.key){s.key=t.AuthorKey?t.AuthorKey:""}var p;if(s.type==="EzMap2010"){p=new Ez.TileLayer.EzMap2010(n,a,s)}else if(s.type==="EzMap2010Local"){p=new Ez.TileLayer.EzMap2010Proj(n,a,s)}else if(s.type==="wmts"){p=new Ez.TileLayer.WMTS(n,a,s)}else if(s.type==="group"){var u,c,d;d=Object.assign({},s.subLayer[1],{projection:s.projection},{key:s.key});if(s.subType==="EzMap2010"){u=new Ez.TileLayer.EzMap2010(n,a,s);c=new Ez.TileLayer.EzMap2010(n,s.subLayer[0],d)}else if(s.subType==="EzMap2010Local"){u=new Ez.TileLayer.EzMap2010Proj(n,a,s);c=new Ez.TileLayer.EzMap2010Proj(n,s.subLayer[0],d)}else if(s.subType==="wmts"){u=new Ez.TileLayer.WMTS(n,a,s);c=new Ez.TileLayer.WMTS(n,s.subLayer[0],d)}else{u=new Ez.TileLayer.TDT(n,a,s);c=new Ez.TileLayer.TDT(n,s.subLayer[0],d)}p=new Ez.Layer.Group({layers:[u,c]});p.set("ezname",n);p.set("imageSRC",s.imageSRC)}else{p=new Ez.TileLayer.TDT(n,a,s)}if(i===0){o.addLayer(p)}this.layers_.push(p);var y={};y.title=p.get("ezname");y.layer=p;y.imageSRC=p.get("imageSRC");this.layersInfoArray_.push(y)}};goog.inherits(Ez.Global,ol.events.EventTarget);Ez.Global.prototype.initialize=function(){};Ez.Global.prototype.getGlobalOptions=function(){return this.opts_};Ez.Global.prototype.crs2Projection=function(e){var o=goog.isDef(e)?e:"4326";return"EPSG:"+o};Ez.Global.prototype.getLayers=function(){return this.layers_};Ez.Global.prototype.getLayersInfo=function(){return this.layersInfoArray_};goog.provide("Ez.Map");goog.provide("Ez.ViewOptions");goog.provide("Ez.PopupTargetMoveEvent");goog.require("Ez.Coordinate");goog.require("Ez.Overlay");goog.require("Ez.MBR");goog.require("Ez.Marker");goog.require("Ez.Global");goog.require("ol.Map");goog.require("ol.View");goog.require("ol.layer.Group");goog.require("ol.layer.Vector");goog.require("ol.source.Vector");goog.require("ol.Feature");goog.require("ol.Collection");goog.require("ol.animation");goog.require("ol.interaction.Draw");goog.require("ol.interaction.Modify");goog.require("goog.asserts");Ez.PopupTargetMoveEvent=function(e){goog.base(this,e)};goog.inherits(Ez.PopupTargetMoveEvent,ol.events.Event);Ez.ViewOptions={mapCenter:true,mapInitLevel:true,constrainRotation:true,enableRotation:true,extent:true,minResolution:true,maxResolution:true,mapMinLevel:true,mapMaxLevel:true,projection:true,resolution:true,resolutions:true,rotation:true,zoomFactor:true};Ez.Map=function(e,o){var t={};var r={};for(var i in o){if(i in Ez.ViewOptions){if(i==="mapCenter"){if(o[i]instanceof Ez.Coordinate){t["center"]=[o[i].x,o[i].y]}else{t["center"]=o[i]}}else if(i==="mapInitLevel"){t["zoom"]=o[i]}else if(i==="mapMinLevel"){t["minZoom"]=o[i]}else if(i==="mapMaxLevel"){t["maxZoom"]=o[i]}else{t[i]=o[i]}}else{r[i]=o[i]}}var n=window.ezMap;if(goog.isDef(n)){if(!goog.isDef(o)||!goog.isDef(o.indoor)||!o.indoor){t.minZoom=n.MapMinLevel;t.maxZoom=n.MapMaxLevel;t.zoom=n.MapInitLevel;t.center=n.CenterPoint;t.extent=n.MapFullExtent;t.projection="EPSG:"+n.MapSrcURL[0][2].crs;if(n.MapSrcURL[0][2].type==="EzMap2010"||n.MapSrcURL[0][2].type==="EzMap2010Local"){t.resolutions=Ez.TileLayer.EzMap2010.getResolutions(n.MapMinLevel,n.MapMaxLevel)}}}this.maxZoom_=t.maxZoom;this.minZoom_=t.minZoom;this.viewOfEz_=new ol.View(t);this.elementOfEz_=goog.isDef(e)?e:undefined;this.tileLayerGroup_=new ol.layer.Group({layers:[]});this.tileLayerGroup_.set("title","baseLayers");this.markerLayerGroup_=new ol.layer.Group({layers:[]});this.markerLayerGroup_.set("title","markerLayers");var a=new ol.layer.Vector({source:new ol.source.Vector({wrapX:false}),projection:this.viewOfEz_.getProjection()});a.set("name","marker_default");this.defaultMarkerLayer_=l
;this.markerLayerGroup_.getLayers().push(a);this.vectorLayerGroup_=new ol.layer.Group({layers:[]});this.vectorLayerGroup_.set("title","vectorLayers");var l=new ol.layer.Vector({source:new ol.source.Vector({wrapX:false}),projection:this.viewOfEz_.getProjection()});l.set("name","vector_default");this.defaultVectorLayer_=l;this.vectorLayerGroup_.getLayers().push(l);this.customLayerGroup_=new ol.layer.Group({layers:[]});this.customLayerGroup_.set("title","customLayers");this.tileLayerOverlayGroup_=new ol.layer.Group({layers:[]});this.tileLayerOverlayGroup_.set("title","tileOverlayLayers");var s=[this.tileLayerGroup_,this.tileLayerOverlayGroup_,this.vectorLayerGroup_,this.customLayerGroup_,this.markerLayerGroup_];if(!goog.isDef(r.logo)){r["logo"]=false}r["layers"]=s;r["target"]=this.elementOfEz_;r["view"]=this.viewOfEz_;r["controls"]=ol.control.defaults({attribution:false,rotate:false,zoom:false});if(goog.isDef(n)){if(!goog.isDef(o)||!goog.isDef(o.indoor)||!o.indoor){r.loadTilesWhileAnimating=goog.isDef(n.loadTilesWhileAnimating)?n.loadTilesWhileAnimating:false}}goog.base(this,r);var g=o?o:{};if(goog.isDef(g.appkeys)){var p=g.appkeys;for(var u=0;u<p.length;u++){var c=p[u];if(c){n.MapSrcURL[u][2].appkey=c}}}if(goog.isDef(n)){this.global_=new Ez.Global(n,this)}};goog.inherits(Ez.Map,ol.Map);Ez.Map.prototype.getTileLayers=function(){return this.tileLayerGroup_};Ez.Map.prototype.getTileLayerOverlayLayers=function(){return this.tileLayerOverlayGroup_};Ez.Map.prototype.getMarkerLayers=function(){return this.markerLayerGroup_};Ez.Map.prototype.getVectorLayers=function(){return this.vectorLayerGroup_};Ez.Map.prototype.getCustomLayers=function(){return this.customLayerGroup_};Ez.Map.prototype.getDegree=function(e,o){var t=1,r=e.getCoordinate(),i=parseFloat(r[0])+t;var n=[i,r[1]];var a=r,l=n;var s=new ol.Sphere(6378137),g=s.haversineDistance(a,l);var p=t*o/g;return p};Ez.Map.prototype.pixeldistance2KMdistance=function(e){var o=this.viewOfEz_;var t=o.getResolution();return e*t};Ez.Map.prototype.addlayer=function(e,o){if(o){goog.base(this,"addLayer",e);return}e.onAdd(this)};Ez.Map.prototype.removelayer=function(e,o){if(o){goog.base(this,"removeLayer",e);return}e.onRemove(this)};Ez.Map.prototype.addoverlay=function(e,o){if(o){goog.base(this,"addOverlay",e);return}e.onAdd(this);if(e instanceof Ez.Popup){goog.base(this,"addOverlay",e)}else if(e instanceof Ez.HTMLElementOverLay){goog.base(this,"addOverlay",e)}};Ez.Map.prototype.removeoverlay=function(e,o){if(o){goog.base(this,"removeOverlay",e);return}e.onRemove(this);if(e instanceof Ez.Popup){goog.base(this,"removeOverlay",e)}else if(e instanceof Ez.HTMLElementOverLay){goog.base(this,"removeOverlay",e)}};Ez.Map.prototype.getCenter=function(){var e=this.viewOfEz_.getCenter();return new Ez.Coordinate(e[0],e[1])};Ez.Map.prototype.zoomIn=function(){var e=this.viewOfEz_.getResolution();if(e<=this.viewOfEz_.minResolution_){return}this.doZoom(.5)};Ez.Map.prototype.zoomOut=function(){var e=this.viewOfEz_.getResolution();if(e>=this.viewOfEz_.maxResolution_){return}this.doZoom(2)};Ez.Map.prototype.getZoom=function(){return this.viewOfEz_.getZoom()};Ez.Map.prototype.doZoom=function(e){var o=this;var t=ol.animation.zoom({resolution:this.viewOfEz_.getResolution()});o.beforeRender(t);o.getView().setResolution(this.viewOfEz_.getResolution()*e)};Ez.Map.prototype.showStandMapControl=function(e){if(this.zoomslider_)return;var o=this.global_.getGlobalOptions();var t=goog.isDef(o)?o:{};e=goog.isDef(e)?e:{};var r=goog.isDef(t.MapMaxLevel)?t.MapMaxLevel:goog.isDef(e.maxZoom)?e.maxZoom:18;var i=goog.isDef(t.MapMinLevel)?t.MapMinLevel:goog.isDef(e.minZoom)?e.minZoom:0;var n=goog.isDef(t.isTitleArea)?t.isTitleArea:goog.isDef(e.isTitleArea)?e.isTitleArea:false;var a=goog.isDef(t.flag2level)?t.flag2level:goog.isDef(e.flag2level)?e.flag2level:undefined;this.zoomslider_=new Ez.controls.ZoomSlider({maxZoom:r,minZoom:i,isTitleArea:n,flag2level:a});this.addControl(this.zoomslider_)};Ez.Map.prototype.showMapControl=function(e){if(this.navi_||this.zoomslider_)return;var o=this.global_.getGlobalOptions();var t=goog.isDef(o)?o:{};e=goog.isDef(e)?e:{};var r=goog.isDef(t.MapMaxLevel)?t.MapMaxLevel:goog.isDef(e.maxZoom)?e.maxZoom:18;var i=goog.isDef(t.MapMinLevel)?t.MapMinLevel:goog.isDef(e.minZoom)?e.minZoom:0;var n=goog.isDef(t.isTitleArea)?t.isTitleArea:goog.isDef(e.isTitleArea)?e.isTitleArea:false;var a=goog.isDef(t.flag2level)?t.flag2level:goog.isDef(e.flag2level)?e.flag2level:undefined;this.zoomslider_=new Ez.controls.ZoomSlider({maxZoom:r,minZoom:i,isTitleArea:n,flag2level:a});this.addControl(this.zoomslider_);this.navi_=new Ez.controls.NavBar;this.addControl(this.navi_)};Ez.Map.prototype.hideMapControl=function(){if(this.navi_){this.removeControl(this.navi_);this.navi_=null}if(this.zoomslider_){this.removeControl(this.zoomslider_);this.zoomslider_=null}};Ez.Map.prototype.showSimpleZoomControl=function(){if(!this.simplezoom_){this.simplezoom_=new Ez.controls.SimpleZoom;this.addControl(this.simplezoom_)}};Ez.Map.prototype.hideSimpleZoomControl=function(){if(this.simplezoom_){this.removeControl(this.simplezoom_);delete this.simplezoom_}};Ez.Map.prototype.showLayersControl=function(e){var o=this.getConfig();var t=o.getLayersInfo();var r="default";var i;var n;if(e){i=e(t,r);t=i.layerInfo;r=i.type}switch(r){case"default":n=new Ez.controls.Layers(t);break;case"simple":n=new Ez.controls.SimpleLayers(t);break}this.addControl(n);this.layersControl_=n;if(r==="default"){n.refesh()}else{n.changed()}};Ez.Map.prototype.hideLayersControl=function(){this.removeControl(this.layersControl_);delete this.layersControl_};Ez.Map.prototype.getConfig=function(){return this.global_};Ez.Map.prototype.addMapEventListener=function(e,o,t){var r;if(Ez.Event.MAP_ZOOMCHANGE===e){r=this.viewOfEz_.on(e,o,t)}else{r=this.on(e,o,t)}return r};Ez.Map.prototype.addMapEventListenerOnce=function(e,o,t){var r;if(Ez.Event.MAP_ZOOMCHANGE===e){r=this.viewOfEz_.once(e,o,t)}else{r=this.once(e,o,t)}return r};Ez.Map.prototype.removeMapEventListener=function(e){this.unByKey(e)};Ez.Map.prototype.centerAtLatlng=function(e,o){var t;if(e instanceof Ez.Coordinate){t=e.getCoordinate()}if(goog.isDef(o)){if(goog.isNumber(e)||goog.isString(e)){t=[parseFloat(e),parseFloat(o)]}}if(!t){goog.asserts.assert(false,"参数类型不正确或者输入格式有误")}this.viewOfEz_.setCenter(t)};Ez.Map.prototype.showScaleControl=function(){this.scale_=new Ez.controls.ScaleLine;this.addControl(this.scale_)};Ez.Map.prototype.hideScaleControl=function(){this.removeControl(this.scale_);delete this.scale_};Ez.Map.prototype.showOverviewControl=function(){this.overview_=new Ez.controls.Overview;this.addControl(this.overview_)};Ez.Map.prototype.hideOverviewControl=function(){this.removeControl(this.overview_);delete this.overview_};Ez.Map.prototype.centerAndZoom=function(e,o){goog.asserts.assert(goog.isDef(e),"缩放级别不能为undefined");goog.asserts.assert(e instanceof Ez.Coordinate,"point 参数必须为EzCoord类型");var t=e.getCoordinate();goog.asserts.assert(goog.isDef(o),"缩放级别不能为undefined");goog.asserts.assert(goog.isNumber(o),"缩放级别必须为数值类型");this.viewOfEz_.setCenter(t);this.viewOfEz_.setZoom(o)};Ez.Map.prototype.centerAtMBR=function(e){if(e instanceof Ez.MBR){var o=e.value_}else{goog.asserts.assert(goog.isArray(e),"目标包络框类型错误");var o=e}var t=this.getSize();this.viewOfEz_.fit(o,t)};Ez.Map.prototype.zoomTo=function(e){goog.asserts.assert(goog.isDef(e),"缩放级别不能为undefined");goog.asserts.assert(goog.isNumber(e),"缩放级别必须为数值类型");this.viewOfEz_.setZoom(e)};Ez.Map.prototype.changeDragMode=function(e,o,t,r,i){var n;switch(e){case"drawPoint":{this.drawType_("Point");n=Ez.g.Point;break}case"drawPolyline":{this.drawType_("LineString");n=Ez.g.Polyline;break}case"drawPolygon":{this.drawType_("Polygon");n=Ez.g.Polygon;break}case"drawCircle":{this.drawType_("Circle");n=Ez.g.Circle;break}case"drawRect":{this.drawType_("Rect");n=Ez.g.Rectangle;break}case"measureLine":{if(!goog.isDef(this.draw_)){this.draw_=new Ez.utility.Measure("LineString",this,o)}else{if(this.draw_ instanceof ol.interaction.Draw2){this.removeInteraction(this.draw_);this.draw_=new Ez.utility.Measure("LineString",this,o)}else{if(this.draw_.draw){this.draw_.de_init()}this.draw_=new Ez.utility.Measure("LineString",this,o)}}return}case"measureArea":{if(!goog.isDef(this.draw_)){this.draw_=new Ez.utility.Measure("Polygon",this,o)}else{if(this.draw_ instanceof ol.interaction.Draw2){this.removeInteraction(this.draw_);this.draw_=new Ez.utility.Measure("Polygon",this,o)}else{if(this.draw_.draw){this.draw_.de_init()}this.draw_=new Ez.utility.Measure("Polygon",this,o)}}return}case"editGeometry":{if(r==="on"){if(!t){return}this.draw_=new ol.interaction.Modify({features:new ol.Collection([t])});this.addInteraction(this.draw_);break}else{var a=t.getGeometry().getCoordinates();var l=a.map(function(e){return e.join(",")});t.coordString=l.join(",");o(t);this.removeInteraction(this.draw_);this.draw_=undefined;break}}case"editCircle":{if(r==="on"){if(!t){return}this.draw_=new ol.interaction.EditCircle(t,o,i);this.addInteraction(this.draw_);break}else{this.draw_.disposeAll(o);this.removeInteraction(this.draw_);this.draw_=undefined;break}}}var s=this;if(goog.isDef(o)&&e!=="editGeometry"&&e!=="editCircle"){this.draw_.on("drawend",function(e){var t=e.feature.getGeometry();if(t.getType()==="Circle"){var r=t.getCenter();var i=t.getRadius();var a=r;var l=[a[0]+1,a[1]];var g=ol.sphere.WGS84.haversineDistance(a,l);i=i*g;var p=new n(new Ez.Coordinate(r[0],r[1]),i)}else if(t.getType()==="Point"){var r=t.getCoordinates();var p=new n(new Ez.Coordinate(r[0],r[1]))}else{var r=t.getCoordinates();var p=new n(r)}o(p);s.removeInteraction(s.draw_);s.draw_=undefined})}};Ez.Map.prototype.clearDragMode=function(){if(this.draw_){if(this.draw_ instanceof ol.interaction.Draw2){this.removeInteraction(this.draw_);delete this.draw_}else if(this.draw_.draw){this.draw_.de_init();delete this.draw_}}};Ez.Map.prototype.drawType_=function(e){var o={};if(e==="Rect"){o.type="LineString";o.source=this.defaultVectorLayer_.getSource();o.maxPoints=2;o.geometryFunction=function(e,o){if(!o){o=new ol.geom.Polygon(null)}var t=e[0];var r=e[1];o.setCoordinates([[t,[t[0],r[1]],r,[r[0],t[1]],t]]);return o}}else{o.type=e;o.source=this.defaultVectorLayer_.getSource()}if(!goog.isDef(this.draw_)){this.draw_=new ol.interaction.Draw2(o);this.addInteraction(this.draw_)}else{if(this.draw_ instanceof ol.interaction.Draw2){this.removeInteraction(this.draw_);this.draw_=new ol.interaction.Draw2(o);this.addInteraction(this.draw_)}else{if(this.draw_.draw){this.draw_.de_init()}this.draw_=new ol.interaction.Draw2(o);this.addInteraction(this.draw_)}}};Ez.Map.prototype.animationTo=function(e,o,t){var r=this;var i=this.viewOfEz_;var n=goog.isDef(t)?goog.isDef(t.duration)?t.duration:2e3:2e3;var a=i.getCenter();if(o==="fly"){var l=+new Date;var s=ol.animation.pan({duration:n,start:l,source:a});var g=ol.animation.bounce({duration:n,resolution:4*i.getResolution(),start:l});r.beforeRender(s,g)}else if(o==="spiral"){var l=+new Date;var s=ol.animation.pan({duration:n,start:l,source:a});var g=ol.animation.bounce({duration:n,resolution:2*i.getResolution(),start:l});var p=ol.animation.rotate({duration:n,rotation:-4*Math.PI,start:l});r.beforeRender(s,g,p)}else{var s=new ol.animation.pan({duration:n,source:a});r.beforeRender(s)}i.setCenter(e.getCoordinate())};Ez.Map.prototype.zoomAnimationTo=function(e,o){var t=this;var r=goog.isDef(o)?o:{};var i=r.fn;var n=+new Date;var a=new ol.animation.zoom({resolution:this.getView().getResolution(),start:n,duration:goog.isDef(r.duration)?r.duration:2e3,easing:goog.isDef(r.easing)?r.easing:ol.easing.inAndOut});t.beforeRender(function(e,o){var t=a(e,o);if(!t){if(i){i()}}return t});t.viewOfEz_.setZoom(e)};Ez.Map.prototype.openInfoWindow=function(e,o,t){var r;if(o instanceof Ez.Coordinate){r=o.getCoordinate()}else if(goog.isArray(o)){r=o}else{goog.asserts.assert(false,"参数类型不正确或者输入格式有误")}if(this.popup_){this.removeOverlay(this.popup_);this.popup_=null}this.popup_=new Ez.Popup(t);this.popup_.on("CLOSE",this.assignPopup2null_.bind(this));this.addOverlay(this.popup_);this.popup_.show(e,r)};Ez.Map.prototype.assignPopup2null_=function(){this.popup_=null};Ez.Map.prototype.closeInfoWindow=function(){if(!this.popup_){return}this.popup_.close()};Ez.Map.prototype.getBoundsLatLng=function(){var e=this.viewOfEz_.calculateExtent(this.getSize());return new EzMBR(e[0],e[1],e[2],e[3])};Ez.Map.prototype.clear=function(){var e=this.getLayers();var o=this;e.forEach(function(e,t,r){if(e.get("title")!=="baseLayers"){if(e instanceof ol.layer.Group){e.getLayers().forEach(function(e){if(!(e instanceof Ez.TileLayer.SingleHotSpot)){e.getSource().clear()}else{if(e.onRemove){o.removeLayer(e)}else{o.removeLayer(e,true)}}})}else{e.getSource().clear()}}});var t=this.getOverlays();if(t.getLength()!==0){t.clear()}};Ez.Map.prototype.draggable=function(){this.dragfeatureinteraction=new ol.interaction.DragFeature;this.addInteraction(this.dragfeatureinteraction)};Ez.Map.prototype.disdraggable=function(){this.removeInteraction(this.dragfeatureinteraction);delete this.dragfeatureinteraction};Ez.Map.prototype.enabledblZoom=function(){if(this.dblzoominteraction){if(!this.dblzoominteraction.isOnMap&&this.dblzoominteraction.interaction){this.addInteraction(this.dblzoominteraction.interaction);this.dblzoominteraction.isOnMap=true}}};Ez.Map.prototype.disabledblZoom=function(){if(!this.dblzoominteraction){var e=this.getInteractions();this.dblzoominteraction={interaction:null,isOnMap:null};var o=this;e.forEach(function(e){if(e instanceof ol.interaction.DoubleClickZoom){o.dblzoominteraction.interaction=e}})}this.removeInteraction(this.dblzoominteraction.interaction);this.dblzoominteraction.isOnMap=false};Ez.Map.prototype.getAllFeaturesFromMap=function(){var e=[];var o=[];e=e.concat(this.getOverlays().getArray());var t=this.getMarkerLayers().getLayers().getArray();t.forEach(function(o){e=e.concat(o.getSource().getFeatures())});var r=this.getVectorLayers().getLayers().getArray();r.forEach(function(o){e=e.concat(o.getSource().getFeatures())});var i=this.getTileLayers().getLayers().getArray();o=o.concat(i);return{features:e,tile:o}};Ez.Map.prototype.addLayerToContainer=function(e,o){o.getLayers().push(e)};Ez.Map.prototype.removeFromContainer=function(e,o){o.getLayers().remove(e)};Ez.Map.prototype.addScaleLineControl=function(e){this.scaleline_=new Ez.controls.ScaleLine(e);map.addControl(this.scaleline_)};Ez.Map.prototype.removeScaleLineControl=function(){if(!this.scaleline_)return;map.removeControl(this.scaleline_);delete this.scaleline_};Ez.Map.prototype.addOverviewControl=function(e){this.overview_=new Ez.controls.Overview(e);map.addControl(this.overview_)};Ez.Map.prototype.removeOverviewControl=function(){if(!this.overview_)return;map.removeControl(this.overview_);delete this.overview_};Ez.Map.prototype.calculateTileCount=function(e,o,t){tdt=t?t:true;var r=e.getExtent();var i=360/256;var n=new Array(22);for(var a=0;a<=22;++a){n[a]=i/Math.pow(2,a)}var l=new ol.tilegrid.TileGrid({resolutions:n,origin:tdt?[-180,90]:[0,0]});var s=l.getTileRangeForExtentAndZ(r,o);return(s.maxX-s.minX+1)*(s.maxY-s.minY+1)};Ez.Map.prototype.getMaxZoom=function(){return this.maxZoom_};Ez.Map.prototype.getMinZoom=function(){return this.minZoom_};Ez.Map.getVersion=function(){return"EzServerClient 7.1.19"};goog.exportSymbol("EzMap",Ez.Map);goog.exportProperty(Ez.Map.prototype,"addLayer",Ez.Map.prototype.addlayer);goog.exportProperty(Ez.Map.prototype,"removeLayer",Ez.Map.prototype.removelayer);goog.exportProperty(Ez.Map.prototype,"addOverlay",Ez.Map.prototype.addoverlay);goog.exportProperty(Ez.Map.prototype,"removeOverlay",Ez.Map.prototype.removeoverlay);goog.provide("Ez.HTMLElementOverLay");goog.require("ol.Overlay");Ez.HTMLElementOverLay=function(e,o,t,r,i,n){var a=document.createElement("div");a.id=e;a.innerHTML=t;var l;if(o instanceof Ez.Coordinate){l=o.getCoordinate()}else if(goog.isArray(o)){l=o}else{goog.asserts.assert(false,"请传入坐标数组或者EzCoord对象")}var n=goog.isDef(n)?n:true;var s=goog.isDef(r)?r:[0,0];var g=goog.isDef(i)?i:"top-left";ol.Overlay.call(this,{stopEvent:n,element:a,offset:s,positioning:g,position:l});this.htmlelementoverlayFlag=true};goog.inherits(Ez.HTMLElementOverLay,ol.Overlay);Ez.HTMLElementOverLay.prototype.onAdd=function(e){this.map_=e};Ez.HTMLElementOverLay.prototype.onRemove=function(e){this.map_=null};Ez.HTMLElementOverLay.prototype.show=function(){this.getElement().style.display="block"};Ez.HTMLElementOverLay.prototype.hide=function(){this.getElement().style.display="none"};Ez.HTMLElementOverLay.prototype.setPos=function(e){var o;if(e instanceof Ez.Coordinate){o=e.getCoordinate()}else if(goog.isArray(e)){o=e}else{goog.asserts.assert(false,"请传入坐标数组或者EzCoord对象")}this.setPosition(o)};Ez.HTMLElementOverLay.prototype.getPos=function(e){var o=this.getPosition();if(goog.isDef(e)&&e){return o}else{return new Ez.Coordinate(o[0],o[1])}};Ez.HTMLElementOverLay.prototype.openInfoWindow=function(e,o,t){var r;if(o instanceof Ez.Coordinate){r=o.getCoordinate()}else if(goog.isArray(o)){r=o}else{goog.asserts.assert(false,"请传入坐标数组或者EzCoord对象")}if(!this.popup_){if(e instanceof Ez.Popup){this.popup_=e}else{this.popup_=new Ez.Popup(t)}this.map_.addOverlay(this.popup_)}this.popup_.show(r,e)};Ez.HTMLElementOverLay.prototype.closeInfoWindow=function(){if(!this.popup_){return}this.map_.removeOverlay(this.popup_);this.popup_=null};goog.exportSymbol("HTMLElementOverLay",Ez.HTMLElementOverLay);goog.provide("Ez.Popup");goog.provide("Ez.PopupEvent");goog.require("Ez.Map");goog.require("ol.Overlay");goog.require("ol.animation");Ez.PopupEvent=function(e){goog.base(this,e)};goog.inherits(Ez.PopupEvent,ol.events.Event);Ez.Popup=function(e){var o=e||{};var t=goog.isDef(o.customStyle)?o.customStyle:"ez-popup";var r=o.offsetY||0;var i=o.offsetX||0;this.panMapIfOutOfView=o.panMapIfOutOfView;if(this.panMapIfOutOfView===undefined){this.panMapIfOutOfView=true}this.ani=o.ani;if(this.ani===undefined){this.ani=ol.animation.pan}this.ani_opts=o.ani_opts;if(this.ani_opts===undefined){this.ani_opts={duration:250}}this.isDefaultStyle=!goog.isDef(o.customStyle);this.container=document.createElement("div");this.container.className=t;this.appendContent=null;if(this.isDefaultStyle){var n=document.createElement("a");n.className="ez-popup-closer";this.container.appendChild(n);var a=this;n.addEventListener("click",function(e){e.stopPropagation();a.close();this.blur()});var l=document.createElement("div");l.className="ez-popup-content";this.container.appendChild(l);this.appendContent=l}else{this.appendContent=this.container}var s=o.stopEvent?o.stopEvent:false;var g=this.fn_=o.fn?o.fn:null;if(g){this.appendContent.addEventListener("click",this.delegate_.bind(this))}goog.base(this,{element:this.container,autoPan:false,stopEvent:s,insertFirst:o.hasOwnProperty("insertFirst")?o.insertFirst:true,positioning:"bottom-center",offset:[i,r]})};goog.inherits(Ez.Popup,ol.Overlay);Ez.Popup.prototype.onAdd=function(e){this.map_=e};Ez.Popup.prototype.onRemove=function(e){this.map_=null};Ez.Popup.prototype.delegate_=function(e){if(!this.fn_)return;this.fn_(e);return false};Ez.Popup.prototype.close=function(){this.map_.dispatchEvent(new Ez.PopupTargetMoveEvent("popup:close"));this.dispatchEvent(new Ez.PopupEvent("CLOSE"));this.map_.removeOverlay(this);if(this.map_&&this.map_.popup_){this.map_.popup_=null}};Ez.Popup.prototype.show=function(e,o){this.appendContent.innerHTML=e;if(o instanceof Ez.Coordinate){this.setPosition(o.getCoordinate())}else{this.setPosition(o)}this.container.style.display="block";this.getMap().dispatchEvent(new Ez.PopupTargetMoveEvent("popup:open"));this.updatePixelPosition();if(this.panMapIfOutOfView){if(this.map_.frameState_){this.panIntoView_(o)}}return this};Ez.Popup.prototype.setContent=function(e){this.appendContent.innerHTML=e};Ez.Popup.prototype.panIntoView_=function(){var e=this.getMap();if(e===undefined||!e.getTargetElement()){return}var o=this.getRect_(e.getTargetElement(),e.getSize());var t=this.getElement();goog.asserts.assert(t,"element should be defined");var r=this.getRect_(t,[ol.dom.outerWidth(t),ol.dom.outerHeight(t)]);var i=this.autoPanMargin_;if(!ol.extent.containsExtent(o,r)){var n=r[0]-o[0];var a=o[2]-r[2];var l=r[1]-o[1];var s=o[3]-r[3];var g=[0,0];if(n<0){g[0]=n-i}else if(a<0){g[0]=Math.abs(a)+i}if(l<0){g[1]=l-i}else if(s<0){g[1]=Math.abs(s)+i}if(g[0]!==0||g[1]!==0){var p=e.getView().getCenter();goog.asserts.assert(p!==undefined,"center should be defined");var u=e.getPixelFromCoordinate(p);var c=[u[0]+g[0],u[1]+g[1]];if(this.autoPanAnimation_){this.autoPanAnimation_.source=p;e.beforeRender(ol.animation.pan(this.autoPanAnimation_))}e.getView().setCenter(e.getCoordinateFromPixel(c))}}};Ez.Popup.isTouchDevice_=function(){try{document.createEvent("TouchEvent");return true}catch(e){return false}};Ez.Popup.enableTouchScroll_=function(e){if(Ez.Popup.isTouchDevice_()){var o=0;e.addEventListener("touchstart",function(e){o=this.scrollTop+e.touches[0].pageY},false);e.addEventListener("touchmove",function(e){this.scrollTop=o-e.touches[0].pageY},false)}};Ez.Popup.prototype.hide=function(){this.container.style.display="none";return this};goog.exportSymbol("EzPopup",Ez.Popup);goog.provide("Ez.Title");goog.require("ol.style.Style");goog.require("goog.asserts.assert");Ez.Title=function(e,o){goog.base(this,{geometry:new ol.geom.Point([0,0])});goog.asserts.assert(goog.isDef(e),"Title对象构造时name参数不能为空");this.title_=e;var t=goog.isDef(o)?o:{};var r=this.defaultStyle_={font:goog.isDef(t.font)?t.font:"微软雅黑,宋体",fontSize:goog.isDef(t.fontSize)?parseInt(t.fontSize):12,fontColor:goog.isDef(t.fontColor)?t.fontColor:"#000000",fillColor:goog.isDef(t.fillColor)?t.fillColor:"#FFFFFF",strokeColor:goog.isDef(t.strokeColor)?t.strokeColor:"#000000",isStroke:goog.isDef(t.isStroke)?t.isStroke:false,strokeWidth:goog.isDef(t.strokeWidth)?parseInt(t.strokeWidth):1,strokeStyle:goog.isDef(t.strokeStyle)?t.strokeStyle:undefined,textAlign:goog.isDef(t.textAlign)?t.textAlign:"center",textBaseline:goog.isDef(t.textBaseline)?t.textBaseline:"middle",paddingV:goog.isDef(t.paddingV)?parseInt(t.paddingV):1,lineHeight:goog.isDef(t.lineHeight)?parseInt(t.lineHeight):1,paddingH:goog.isDef(t.paddingH)?parseInt(t.paddingH):2,positioning:goog.isDef(t.positioning)?t.positioning:"top-left",anchor:goog.isDef(t.anchor)?t.anchor:[.5,1],offset:goog.isDef(t.offset)?t.offset:[0,0],gap:goog.isDef(t.gap)?t.gap:2};this.map_=null;this.position_=[0,0];this.positioning_=r.positioning;this.offset_=r.offset;this.isShow=true;this.setStyle(Ez.Title.styleFunction.bind(this))};goog.inherits(Ez.Title,ol.Feature);Ez.Title.formatFont=function(e,o){return e+"px"+" "+o};Ez.Title.styleFunction=function(e,o){if(!this.isShow)return null;var t=this.getDefaultStyle_();var r=this.calcWidthOfTitle(this.getTitle());var i=this.offset_[0];var n=this.offset_[1];var a=r+Number(t.paddingH)+Math.abs(i);var l=Math.ceil(parseFloat(t.fontSize)*parseFloat(t.lineHeight))+Math.abs(n);var s=document.createElement("canvas");var g=ol.render.toContext(s.getContext("2d"),{size:[a,l]});var p=new ol.style.Fill({color:t.fillColor});var u;if(t.isStroke){u=new ol.style.Stroke({color:t.strokeColor,width:t.strokeWidth,lineDash:t.strokeStyle})}else{u=new ol.style.Stroke({color:t.fillColor,width:1,lineDash:undefined})}g.setFillStrokeStyle(p,u);g.setTextStyle(null);var c=i>0?i:0;var d=n>0?n:0;var y=r+Number(t.paddingH)+c;var h=Math.ceil(parseFloat(t.fontSize)*parseFloat(t.lineHeight));g.drawPolygonGeometry(new ol.geom.Polygon([[[c,d],[y,d],[y,h],[c,h],[c,d]]]));g.setTextStyle(new ol.style.Text({text:this.getTitle().trim(),font:Ez.Title.formatFont(t.fontSize,t.font),textAlign:"center",textBaseline:"middle",fill:new ol.style.Fill({color:t.fontColor})}));g.drawPointGeometry(new ol.geom.Point([c+Math.ceil((r+Number(t.paddingH))/2),d+Math.ceil(h/2)]));var m=new ol.style.Style({image:new ol.style.Icon({img:s,imgSize:[s.width,s.height],anchor:t.anchor})});return m};Ez.Title.prototype.getDefaultStyle_=function(){return this.defaultStyle_};Ez.Title.prototype.calcWidthOfTitle=function(e){var o=e.trim();var t=this.getDefaultStyle_();var r=document.createElement("canvas");var i=r.getContext("2d");i.font=Ez.Title.formatFont(t.fontSize,t.font);return i.measureText(o).width};Ez.Title.prototype.getTitle=function(){return this.title_};Ez.Title.prototype.show=function(){this.isShow=true};Ez.Title.prototype.hide=function(){this.isShow=false};Ez.Title.prototype.onAdd=function(e){this.map_=e;var o=e.getMarkerLayers();var t=this;o.getLayers().forEach(function(e,o,r){if(e.get("name")==="marker_default"){var i=e;i.getSource().addFeature(t)}})};Ez.Title.prototype.onRemove=function(e){this.map_=null;var o=e.getMarkerLayers();var t=this;o.getLayers().forEach(function(e,o,r){if(e.get("name")==="marker_default"){var i=e;i.getSource().removeFeature(t)}})};Ez.Title.prototype.setPosition=function(e){if(e instanceof Ez.Coordinate){this.position_=e.getCoordinate()}else{this.position_=e}this.getGeometry().setCoordinates(this.position_)};Ez.Title.prototype.setOffset=function(e){this.offset_=e;this.changed()};goog.exportSymbol("EzTitle",Ez.Title);goog.provide("Ez.animation.InteropFn");Ez.animation.InteropFn={linear:linear,radius:radius};function linear(e,o,t,r){var i=(r-o)/(t-e);var n=(t*o-e*r)/(t-e);if(Math.abs(i)===Infinity){return Infinity}return function(e){return i*e+n}}function radius(){}goog.provide("Ez.animation.Transition");Ez.animation.Transition=function(e,o,t,r,i){goog.base(this);var n=i?i:{};this.duration_=e||0;this.atttibute_=o||null;this.stateOfStart_=t||null;this.stateOfEnd_=r||null;var a=n.interoptype?n.interoptype:"linear";this.interopFn_=n.interopfn?n.interopfn:Ez.animation.InteropFn[a];this.fps_=n.fps?n.fps:60};goog.inherits(Ez.animation.Transition,ol.Object);Ez.animation.Transition.prototype.generateInteropfn=function(){var e=this.interopFn_;var o=this.stateOfStart_.getCoordinate();var t=this.stateOfEnd_.getCoordinate();return e(o[0],o[1],t[0],t[1])};Ez.animation.Transition.prototype.getDuration=function(){return this.duration_};Ez.animation.Transition.prototype.getFPS=function(){return this.fps_};goog.provide("Ez.animation.Translate");goog.require("Ez.animation.Transition");Ez.animation.Translate=function(e,o,t,r,i){var n=i?i:{};var a=n.type?n.type:"linear";goog.base(this,e,o,t,r,Object.assign({},n,{type:a}))};goog.inherits(Ez.animation.Translate,Ez.animation.Transition);Ez.animation.Translate.prototype.generateTransition=function(e,o){var t=o;var r=this.stateOfStart_.getCoordinate()[0];var i=this.stateOfEnd_.getCoordinate()[0];var n=this.getDuration();var a=this.getFPS();var l=this.generateInteropfn();var s=this.generateLine(this.stateOfStart_.getCoordinate(),this.stateOfEnd_.getCoordinate(),n,this.getFPS(),l);var g=this;return function(o){var r=o.frameState;var i=o.target;var n=r.time-t;var l=Math.round(n/(1e3/a));if(l>=1){if(l>=s.length){return true}e.getGeometry().setCoordinates(s[l]);i.render()}}};Ez.animation.Translate.prototype.generateLine=function(e,o,t,r,i){var n=t/(1e3/r);var a;if(i===Infinity){a=(o[1]-e[1])/(n>0?n:0)}else{a=(o[0]-e[0])/(n>0?n:0)}var l=[];l.push(e);var s,g;for(var p=1;p<n+1;p++){if(i===Infinity){s=e[0];g=e[1]+a*p}else{s=e[0]+a*p;g=i(s)}l.push([s,g])}l.push(o);return l};goog.provide("Ez.animation.Rotate");Ez.animation.Rotate=function(e,o,t,r,i,n){var a=n?n:{};var l=a.type?a.type:"radius";goog.base(this,e,o,t,r,Object.assign({},a,{type:l}));this.isRight_=goog.isDef(i)?i:true};goog.inherits(Ez.animation.Rotate,Ez.animation.Transition);Ez.animation.Rotate.prototype.generateTransition=function(e,o){var t=o;var r=this.stateOfStart_;var i=this.stateOfEnd_;var n=this.getDuration();var a=this.getFPS();var l=this.generateRad(r,i,n,a);var s=this;return function(o){var r=o.frameState;var i=o.target;var n=r.time-t;var s=Math.round(n/(1e3/a));if(s>=1){if(s>=l.length){return true}var g=e.getStyle();var p=g.getImage();p.setRotation(l[s]);e.setStyle(g)}}};Ez.animation.Rotate.prototype.generateRad=function(e,o,t,r){var i=t/(1e3/r);var n=this.isRight_;if(n){var a=this.radianClockwise_(e,o);e=a.start;o=a.end}else{var l=this.radianUnClockwise_(e,o);e=l.start;o=l.end}var s=(o-e)/(i>0?i:0);var g=[];g.push(e);for(var p=1;p<i+1;p++){var u;u=e+s*p;g.push(u)}g.push(o);return g};Ez.animation.Rotate.prototype.radianClockwise_=function(e,o){var t=o-e;if(t>=0){return{start:e,end:o}}else{return{start:e,end:2*Math.PI+o}}};Ez.animation.Rotate.prototype.radianUnClockwise_=function(e,o){var t=o-e;if(t>=0){return{start:e,end:-2*Math.PI+o}}else{return{start:e,end:o}}};goog.provide("Ez.animation.Compose");goog.provide("Ez.animation.ComposeEvent");Ez.animation.ComposeEvent=function(e,o){goog.base(this,e);this.time=o};goog.inherits(Ez.animation.ComposeEvent,ol.events.Event);Ez.animation.Compose=function(e,o){goog.base(this);this.feature_=e;this.transitions_=o;this.map_=null;this.now_=null};goog.inherits(Ez.animation.Compose,ol.Object);Ez.animation.Compose.prototype.setRefreshController=function(e){this.map_=e};Ez.animation.Compose.prototype.play=function(){var e=this.feature_;var o=this.now_=(new Date).getTime();var t=this.map_;var r=this.generateTransition(e,o);this.on("animation:end",function(){t.un("postcompose",r)});t.on("postcompose",r);this.dispatchEvent(new Ez.animation.ComposeEvent("animation:start",(new Date).getTime()));t.render()};goog.provide("Ez.animation.Sequence");goog.require("Ez.animation.Compose");goog.require("Ez.animation.ComposeEvent");Ez.animation.Sequence=function(e,o){goog.base(this,e,o)};goog.inherits(Ez.animation.Sequence,Ez.animation.Compose);Ez.animation.Sequence.prototype.calcSumDur=function(e,o,t){if(t<0){return e}else{return o[t].getDuration()+this.calcSumDur(e,o,t-1)}};Ez.animation.Sequence.prototype.generateTransition=function(e,o){var t=this.transitions_;var r=this;var i=t.map(function(){return false});var n=t.map(function(t,i,n){var a=r.calcSumDur(o,n,i-1);return t.generateTransition(e,a)});var a=0;return function(e){if(!i[a]){if(n[a](e)){i[a]=true;a++;e.target.render()}}if(a===n.length){r.dispatchEvent(new Ez.animation.ComposeEvent("animation:end",e.frameState.time))}}};goog.provide("Ez.animation.Parallel");goog.require("Ez.animation.Compose");goog.require("Ez.animation.ComposeEvent");Ez.animation.Parallel=function(e,o){goog.base(this,e,o)};goog.inherits(Ez.animation.Parallel,Ez.animation.Compose);Ez.animation.Parallel.prototype.generateTransition=function(e,o){var t=this.transitions_;var r;t.forEach(function(e,o){if(o===0){r=e.getDuration()}if(r<e.getDuration()){r=e.getDuration()}});var i=t.map(function(t){return t.generateTransition(e,o)});var n=0;var a=this;return function(e){var t=e.frameState.time-o;i.forEach(function(o,i,l){if(o(e)){n++}if(n===l.length){if(t>=r){a.dispatchEvent(new Ez.animation.ComposeEvent("animation:end"))}}})}};