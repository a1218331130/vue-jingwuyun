<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <img id="mmm" src="">
  <script>
    function getBase64Image(img) {
      var canvas = document.createElement("canvas");
      canvas.width = img.width;
      canvas.height = img.height;
      var ctx = canvas.getContext("2d");
      ctx.drawImage(img, 0, 0, img.width, img.height);
      var ext = img.src.substring(img.src.lastIndexOf(".") + 1).toLowerCase();
      console.log(ext)
      var dataURL = canvas.toDataURL("image/" + ext);
      return dataURL;
    }
    // var img = "https://img.alicdn.com/bao/uploaded/TBlqimQIpXXXXXbXFXXSutbFXXX.jpg"
    var img =
      "http://10.146.14.66:8888/qingbaoyun-navigation/query/getperson/gettx?token=68FCB70174C58C16E053455C920A8BBE&sfzh=433024197802157583";

    // var img = "http://10.146.92.42:8888/qingbaoyun-navigation/query/getperson/gettx?token=68ED04B8053B734CE053455C920AA4EE&sfzh=430623198902056147";
    var image = new Image();
    image.crossOrigin = 'anonymous';
    image.src = img;
    image.onload = function() {
      var base64 = getBase64Image(image);
      console.log(base64);
    }

  </script>
</body>

</html>
